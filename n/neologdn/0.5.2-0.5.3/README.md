# Comparing `tmp/neologdn-0.5.2.tar.gz` & `tmp/neologdn-0.5.3.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "neologdn-0.5.2.tar", last modified: Thu Aug  3 12:53:54 2023, max compression
+gzip compressed data, was "neologdn-0.5.3.tar", last modified: Thu May  2 15:58:16 2024, max compression
```

## Comparing `neologdn-0.5.2.tar` & `neologdn-0.5.3.tar`

### file list

```diff
@@ -1,14 +1,15 @@
-drwxr-xr-x   0 yukino     (501) staff       (20)        0 2023-08-03 12:53:54.979622 neologdn-0.5.2/
--rw-r--r--   0 yukino     (501) staff       (20)     1271 2023-08-03 11:54:12.000000 neologdn-0.5.2/CHANGES.rst
--rw-r--r--   0 yukino     (501) staff       (20)    11345 2023-08-03 11:43:11.000000 neologdn-0.5.2/LICENSE
--rw-r--r--   0 yukino     (501) staff       (20)       51 2023-08-03 11:43:11.000000 neologdn-0.5.2/MANIFEST.in
--rw-r--r--   0 yukino     (501) staff       (20)     5580 2023-08-03 12:53:54.979514 neologdn-0.5.2/PKG-INFO
--rw-r--r--   0 yukino     (501) staff       (20)     3298 2023-08-03 12:47:56.000000 neologdn-0.5.2/README.rst
--rw-r--r--   0 yukino     (501) staff       (20)   564567 2023-08-03 11:47:41.000000 neologdn-0.5.2/neologdn.cpp
-drwxr-xr-x   0 yukino     (501) staff       (20)        0 2023-08-03 12:53:54.979362 neologdn-0.5.2/neologdn.egg-info/
--rw-r--r--   0 yukino     (501) staff       (20)     5580 2023-08-03 12:53:54.000000 neologdn-0.5.2/neologdn.egg-info/PKG-INFO
--rw-r--r--   0 yukino     (501) staff       (20)      192 2023-08-03 12:53:54.000000 neologdn-0.5.2/neologdn.egg-info/SOURCES.txt
--rw-r--r--   0 yukino     (501) staff       (20)        1 2023-08-03 12:53:54.000000 neologdn-0.5.2/neologdn.egg-info/dependency_links.txt
--rw-r--r--   0 yukino     (501) staff       (20)        9 2023-08-03 12:53:54.000000 neologdn-0.5.2/neologdn.egg-info/top_level.txt
--rw-r--r--   0 yukino     (501) staff       (20)       38 2023-08-03 12:53:54.979652 neologdn-0.5.2/setup.cfg
--rw-r--r--   0 yukino     (501) staff       (20)     1847 2023-08-03 12:52:38.000000 neologdn-0.5.2/setup.py
+drwxr-xr-x   0 yukino     (501) staff       (20)        0 2024-05-02 15:58:16.162118 neologdn-0.5.3/
+-rw-r--r--   0 yukino     (501) staff       (20)     1343 2024-05-02 15:56:30.000000 neologdn-0.5.3/CHANGES.rst
+-rw-r--r--   0 yukino     (501) staff       (20)    11345 2023-08-03 11:43:11.000000 neologdn-0.5.3/LICENSE
+-rw-r--r--   0 yukino     (501) staff       (20)       51 2023-08-03 11:43:11.000000 neologdn-0.5.3/MANIFEST.in
+-rw-r--r--   0 yukino     (501) staff       (20)     9352 2024-05-02 15:58:16.161637 neologdn-0.5.3/PKG-INFO
+-rw-r--r--   0 yukino     (501) staff       (20)     6997 2024-05-02 13:58:08.000000 neologdn-0.5.3/README.rst
+-rw-r--r--   0 yukino     (501) staff       (20)   357925 2024-05-02 15:22:49.000000 neologdn-0.5.3/neologdn.c
+-rw-r--r--   0 yukino     (501) staff       (20)   590272 2024-05-02 15:39:31.000000 neologdn-0.5.3/neologdn.cpp
+drwxr-xr-x   0 yukino     (501) staff       (20)        0 2024-05-02 15:58:16.161319 neologdn-0.5.3/neologdn.egg-info/
+-rw-r--r--   0 yukino     (501) staff       (20)     9352 2024-05-02 15:58:16.000000 neologdn-0.5.3/neologdn.egg-info/PKG-INFO
+-rw-r--r--   0 yukino     (501) staff       (20)      203 2024-05-02 15:58:16.000000 neologdn-0.5.3/neologdn.egg-info/SOURCES.txt
+-rw-r--r--   0 yukino     (501) staff       (20)        1 2024-05-02 15:58:16.000000 neologdn-0.5.3/neologdn.egg-info/dependency_links.txt
+-rw-r--r--   0 yukino     (501) staff       (20)        9 2024-05-02 15:58:16.000000 neologdn-0.5.3/neologdn.egg-info/top_level.txt
+-rw-r--r--   0 yukino     (501) staff       (20)       38 2024-05-02 15:58:16.162181 neologdn-0.5.3/setup.cfg
+-rw-r--r--   0 yukino     (501) staff       (20)     1848 2024-05-02 15:52:33.000000 neologdn-0.5.3/setup.py
```

### Comparing `neologdn-0.5.2/CHANGES.rst` & `neologdn-0.5.3/CHANGES.rst`

 * *Files 6% similar despite different names*

```diff
@@ -1,10 +1,15 @@
 CHANGES
 ========
 
+0.5.3 (2024-05-03)
+----------------------------
+
+- Support Python 3.12
+
 0.5.2 (2023-08-03)
 ----------------------------
 
 - Support Python 3.10 and 3.11 (Many thanks @polm)
 
 0.5.1 (2021-05-02)
 ----------------------------
```

### Comparing `neologdn-0.5.2/LICENSE` & `neologdn-0.5.3/LICENSE`

 * *Files identical despite different names*

### Comparing `neologdn-0.5.2/neologdn.cpp` & `neologdn-0.5.3/neologdn.cpp`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-/* Generated by Cython 3.0.0 */
+/* Generated by Cython 3.0.10 */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
   #ifndef Py_LIMITED_API
     #if CYTHON_LIMITED_API+0 > 0x03030000
@@ -15,18 +15,23 @@
 
 #include "Python.h"
 #ifndef Py_PYTHON_H
     #error Python headers needed to compile C extensions, please install development version of Python.
 #elif PY_VERSION_HEX < 0x02070000 || (0x03000000 <= PY_VERSION_HEX && PY_VERSION_HEX < 0x03030000)
     #error Cython requires Python 2.7+ or Python 3.3+.
 #else
-#define CYTHON_ABI "3_0_0"
+#if defined(CYTHON_LIMITED_API) && CYTHON_LIMITED_API
+#define __PYX_EXTRA_ABI_MODULE_NAME "limited"
+#else
+#define __PYX_EXTRA_ABI_MODULE_NAME ""
+#endif
+#define CYTHON_ABI "3_0_10" __PYX_EXTRA_ABI_MODULE_NAME
 #define __PYX_ABI_MODULE_NAME "_cython_" CYTHON_ABI
 #define __PYX_TYPE_MODULE_PREFIX __PYX_ABI_MODULE_NAME "."
-#define CYTHON_HEX_VERSION 0x030000F0
+#define CYTHON_HEX_VERSION 0x03000AF0
 #define CYTHON_FUTURE_DIVISION 1
 #include <stddef.h>
 #ifndef offsetof
   #define offsetof(type, member) ( (size_t) & ((type*)0) -> member )
 #endif
 #if !defined(_WIN32) && !defined(WIN32) && !defined(MS_WINDOWS)
   #ifndef __stdcall
@@ -51,14 +56,15 @@
 #endif
 #ifndef PY_LONG_LONG
   #define PY_LONG_LONG LONG_LONG
 #endif
 #ifndef Py_HUGE_VAL
   #define Py_HUGE_VAL HUGE_VAL
 #endif
+#define __PYX_LIMITED_VERSION_HEX PY_VERSION_HEX
 #if defined(GRAALVM_PYTHON)
   /* For very preliminary testing purposes. Most variables are set the same as PyPy.
      The existence of this section does not imply that anything works or is even tested */
   #define CYTHON_COMPILING_IN_PYPY 0
   #define CYTHON_COMPILING_IN_CPYTHON 0
   #define CYTHON_COMPILING_IN_LIMITED_API 0
   #define CYTHON_COMPILING_IN_GRAAL 1
@@ -109,24 +115,27 @@
   #undef CYTHON_USE_DICT_VERSIONS
   #define CYTHON_USE_DICT_VERSIONS 0
   #undef CYTHON_USE_EXC_INFO_STACK
   #define CYTHON_USE_EXC_INFO_STACK 0
   #ifndef CYTHON_UPDATE_DESCRIPTOR_DOC
     #define CYTHON_UPDATE_DESCRIPTOR_DOC 0
   #endif
+  #undef CYTHON_USE_FREELISTS
+  #define CYTHON_USE_FREELISTS 0
 #elif defined(PYPY_VERSION)
   #define CYTHON_COMPILING_IN_PYPY 1
   #define CYTHON_COMPILING_IN_CPYTHON 0
   #define CYTHON_COMPILING_IN_LIMITED_API 0
   #define CYTHON_COMPILING_IN_GRAAL 0
   #define CYTHON_COMPILING_IN_NOGIL 0
   #undef CYTHON_USE_TYPE_SLOTS
   #define CYTHON_USE_TYPE_SLOTS 0
-  #undef CYTHON_USE_TYPE_SPECS
-  #define CYTHON_USE_TYPE_SPECS 0
+  #ifndef CYTHON_USE_TYPE_SPECS
+    #define CYTHON_USE_TYPE_SPECS 0
+  #endif
   #undef CYTHON_USE_PYTYPE_LOOKUP
   #define CYTHON_USE_PYTYPE_LOOKUP 0
   #if PY_VERSION_HEX < 0x03050000
     #undef CYTHON_USE_ASYNC_SLOTS
     #define CYTHON_USE_ASYNC_SLOTS 0
   #elif !defined(CYTHON_USE_ASYNC_SLOTS)
     #define CYTHON_USE_ASYNC_SLOTS 1
@@ -169,15 +178,21 @@
   #undef CYTHON_USE_DICT_VERSIONS
   #define CYTHON_USE_DICT_VERSIONS 0
   #undef CYTHON_USE_EXC_INFO_STACK
   #define CYTHON_USE_EXC_INFO_STACK 0
   #ifndef CYTHON_UPDATE_DESCRIPTOR_DOC
     #define CYTHON_UPDATE_DESCRIPTOR_DOC 0
   #endif
+  #undef CYTHON_USE_FREELISTS
+  #define CYTHON_USE_FREELISTS 0
 #elif defined(CYTHON_LIMITED_API)
+  #ifdef Py_LIMITED_API
+    #undef __PYX_LIMITED_VERSION_HEX
+    #define __PYX_LIMITED_VERSION_HEX Py_LIMITED_API
+  #endif
   #define CYTHON_COMPILING_IN_PYPY 0
   #define CYTHON_COMPILING_IN_CPYTHON 0
   #define CYTHON_COMPILING_IN_LIMITED_API 1
   #define CYTHON_COMPILING_IN_GRAAL 0
   #define CYTHON_COMPILING_IN_NOGIL 0
   #undef CYTHON_CLINE_IN_TRACEBACK
   #define CYTHON_CLINE_IN_TRACEBACK 0
@@ -217,69 +232,92 @@
     #define CYTHON_PEP487_INIT_SUBCLASS 1
   #endif
   #undef CYTHON_PEP489_MULTI_PHASE_INIT
   #define CYTHON_PEP489_MULTI_PHASE_INIT 0
   #undef CYTHON_USE_MODULE_STATE
   #define CYTHON_USE_MODULE_STATE 1
   #ifndef CYTHON_USE_TP_FINALIZE
-    #define CYTHON_USE_TP_FINALIZE 1
+    #define CYTHON_USE_TP_FINALIZE 0
   #endif
   #undef CYTHON_USE_DICT_VERSIONS
   #define CYTHON_USE_DICT_VERSIONS 0
   #undef CYTHON_USE_EXC_INFO_STACK
   #define CYTHON_USE_EXC_INFO_STACK 0
   #ifndef CYTHON_UPDATE_DESCRIPTOR_DOC
     #define CYTHON_UPDATE_DESCRIPTOR_DOC 0
   #endif
-#elif defined(PY_NOGIL)
+  #undef CYTHON_USE_FREELISTS
+  #define CYTHON_USE_FREELISTS 0
+#elif defined(Py_GIL_DISABLED) || defined(Py_NOGIL)
   #define CYTHON_COMPILING_IN_PYPY 0
   #define CYTHON_COMPILING_IN_CPYTHON 0
   #define CYTHON_COMPILING_IN_LIMITED_API 0
   #define CYTHON_COMPILING_IN_GRAAL 0
   #define CYTHON_COMPILING_IN_NOGIL 1
   #ifndef CYTHON_USE_TYPE_SLOTS
     #define CYTHON_USE_TYPE_SLOTS 1
   #endif
+  #ifndef CYTHON_USE_TYPE_SPECS
+    #define CYTHON_USE_TYPE_SPECS 0
+  #endif
   #undef CYTHON_USE_PYTYPE_LOOKUP
   #define CYTHON_USE_PYTYPE_LOOKUP 0
   #ifndef CYTHON_USE_ASYNC_SLOTS
     #define CYTHON_USE_ASYNC_SLOTS 1
   #endif
+  #ifndef CYTHON_USE_PYLONG_INTERNALS
+    #define CYTHON_USE_PYLONG_INTERNALS 0
+  #endif
   #undef CYTHON_USE_PYLIST_INTERNALS
   #define CYTHON_USE_PYLIST_INTERNALS 0
   #ifndef CYTHON_USE_UNICODE_INTERNALS
     #define CYTHON_USE_UNICODE_INTERNALS 1
   #endif
   #undef CYTHON_USE_UNICODE_WRITER
   #define CYTHON_USE_UNICODE_WRITER 0
-  #undef CYTHON_USE_PYLONG_INTERNALS
-  #define CYTHON_USE_PYLONG_INTERNALS 0
   #ifndef CYTHON_AVOID_BORROWED_REFS
     #define CYTHON_AVOID_BORROWED_REFS 0
   #endif
   #ifndef CYTHON_ASSUME_SAFE_MACROS
     #define CYTHON_ASSUME_SAFE_MACROS 1
   #endif
   #ifndef CYTHON_UNPACK_METHODS
     #define CYTHON_UNPACK_METHODS 1
   #endif
   #undef CYTHON_FAST_THREAD_STATE
   #define CYTHON_FAST_THREAD_STATE 0
+  #undef CYTHON_FAST_GIL
+  #define CYTHON_FAST_GIL 0
+  #ifndef CYTHON_METH_FASTCALL
+    #define CYTHON_METH_FASTCALL 1
+  #endif
   #undef CYTHON_FAST_PYCALL
   #define CYTHON_FAST_PYCALL 0
+  #ifndef CYTHON_PEP487_INIT_SUBCLASS
+    #define CYTHON_PEP487_INIT_SUBCLASS 1
+  #endif
   #ifndef CYTHON_PEP489_MULTI_PHASE_INIT
     #define CYTHON_PEP489_MULTI_PHASE_INIT 1
   #endif
+  #ifndef CYTHON_USE_MODULE_STATE
+    #define CYTHON_USE_MODULE_STATE 0
+  #endif
   #ifndef CYTHON_USE_TP_FINALIZE
     #define CYTHON_USE_TP_FINALIZE 1
   #endif
   #undef CYTHON_USE_DICT_VERSIONS
   #define CYTHON_USE_DICT_VERSIONS 0
   #undef CYTHON_USE_EXC_INFO_STACK
   #define CYTHON_USE_EXC_INFO_STACK 0
+  #ifndef CYTHON_UPDATE_DESCRIPTOR_DOC
+    #define CYTHON_UPDATE_DESCRIPTOR_DOC 1
+  #endif
+  #ifndef CYTHON_USE_FREELISTS
+    #define CYTHON_USE_FREELISTS 0
+  #endif
 #else
   #define CYTHON_COMPILING_IN_PYPY 0
   #define CYTHON_COMPILING_IN_CPYTHON 1
   #define CYTHON_COMPILING_IN_LIMITED_API 0
   #define CYTHON_COMPILING_IN_GRAAL 0
   #define CYTHON_COMPILING_IN_NOGIL 0
   #ifndef CYTHON_USE_TYPE_SLOTS
@@ -362,14 +400,17 @@
     #define CYTHON_USE_EXC_INFO_STACK 0
   #elif !defined(CYTHON_USE_EXC_INFO_STACK)
     #define CYTHON_USE_EXC_INFO_STACK 1
   #endif
   #ifndef CYTHON_UPDATE_DESCRIPTOR_DOC
     #define CYTHON_UPDATE_DESCRIPTOR_DOC 1
   #endif
+  #ifndef CYTHON_USE_FREELISTS
+    #define CYTHON_USE_FREELISTS 1
+  #endif
 #endif
 #if !defined(CYTHON_FAST_PYCCALL)
 #define CYTHON_FAST_PYCCALL  (CYTHON_FAST_PYCALL && PY_VERSION_HEX >= 0x030600B1)
 #endif
 #if !defined(CYTHON_VECTORCALL)
 #define CYTHON_VECTORCALL  (CYTHON_FAST_PYCCALL && PY_VERSION_HEX >= 0x030800B1)
 #endif
@@ -439,14 +480,22 @@
 #ifndef CYTHON_NCP_UNUSED
 # if CYTHON_COMPILING_IN_CPYTHON
 #  define CYTHON_NCP_UNUSED
 # else
 #  define CYTHON_NCP_UNUSED CYTHON_UNUSED
 # endif
 #endif
+#ifndef CYTHON_USE_CPP_STD_MOVE
+  #if defined(__cplusplus) && (\
+    __cplusplus >= 201103L || (defined(_MSC_VER) && _MSC_VER >= 1600))
+    #define CYTHON_USE_CPP_STD_MOVE 1
+  #else
+    #define CYTHON_USE_CPP_STD_MOVE 0
+  #endif
+#endif
 #define __Pyx_void_to_None(void_result) ((void)(void_result), Py_INCREF(Py_None), Py_None)
 #ifdef _MSC_VER
     #ifndef _MSC_STDINT_H_
         #if _MSC_VER < 1300
             typedef unsigned char     uint8_t;
             typedef unsigned short    uint16_t;
             typedef unsigned int      uint32_t;
@@ -554,67 +603,99 @@
   #define __Pyx_BUILTIN_MODULE_NAME "__builtin__"
   #define __Pyx_DefaultClassType PyClass_Type
   #define __Pyx_PyCode_New(a, p, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
           PyCode_New(a+k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
 #else
   #define __Pyx_BUILTIN_MODULE_NAME "builtins"
   #define __Pyx_DefaultClassType PyType_Type
-#if PY_VERSION_HEX >= 0x030B00A1
-    static CYTHON_INLINE PyCodeObject* __Pyx_PyCode_New(int a, int p, int k, int l, int s, int f,
+#if CYTHON_COMPILING_IN_LIMITED_API
+    static CYTHON_INLINE PyObject* __Pyx_PyCode_New(int a, int p, int k, int l, int s, int f,
                                                     PyObject *code, PyObject *c, PyObject* n, PyObject *v,
                                                     PyObject *fv, PyObject *cell, PyObject* fn,
                                                     PyObject *name, int fline, PyObject *lnos) {
-        PyObject *kwds=NULL, *argcount=NULL, *posonlyargcount=NULL, *kwonlyargcount=NULL;
-        PyObject *nlocals=NULL, *stacksize=NULL, *flags=NULL, *replace=NULL, *empty=NULL;
-        const char *fn_cstr=NULL;
-        const char *name_cstr=NULL;
-        PyCodeObject *co=NULL, *result=NULL;
+        PyObject *exception_table = NULL;
+        PyObject *types_module=NULL, *code_type=NULL, *result=NULL;
+        #if __PYX_LIMITED_VERSION_HEX < 0x030B0000
+        PyObject *version_info;
+        PyObject *py_minor_version = NULL;
+        #endif
+        long minor_version = 0;
         PyObject *type, *value, *traceback;
         PyErr_Fetch(&type, &value, &traceback);
-        if (!(kwds=PyDict_New())) goto end;
-        if (!(argcount=PyLong_FromLong(a))) goto end;
-        if (PyDict_SetItemString(kwds, "co_argcount", argcount) != 0) goto end;
-        if (!(posonlyargcount=PyLong_FromLong(p))) goto end;
-        if (PyDict_SetItemString(kwds, "co_posonlyargcount", posonlyargcount) != 0) goto end;
-        if (!(kwonlyargcount=PyLong_FromLong(k))) goto end;
-        if (PyDict_SetItemString(kwds, "co_kwonlyargcount", kwonlyargcount) != 0) goto end;
-        if (!(nlocals=PyLong_FromLong(l))) goto end;
-        if (PyDict_SetItemString(kwds, "co_nlocals", nlocals) != 0) goto end;
-        if (!(stacksize=PyLong_FromLong(s))) goto end;
-        if (PyDict_SetItemString(kwds, "co_stacksize", stacksize) != 0) goto end;
-        if (!(flags=PyLong_FromLong(f))) goto end;
-        if (PyDict_SetItemString(kwds, "co_flags", flags) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_code", code) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_consts", c) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_names", n) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_varnames", v) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_freevars", fv) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_cellvars", cell) != 0) goto end;
-        if (PyDict_SetItemString(kwds, "co_linetable", lnos) != 0) goto end;
-        if (!(fn_cstr=PyUnicode_AsUTF8AndSize(fn, NULL))) goto end;
-        if (!(name_cstr=PyUnicode_AsUTF8AndSize(name, NULL))) goto end;
-        if (!(co = PyCode_NewEmpty(fn_cstr, name_cstr, fline))) goto end;
-        if (!(replace = PyObject_GetAttrString((PyObject*)co, "replace"))) goto end;
-        if (!(empty = PyTuple_New(0))) goto end;
-        result = (PyCodeObject*) PyObject_Call(replace, empty, kwds);
+        #if __PYX_LIMITED_VERSION_HEX >= 0x030B0000
+        minor_version = 11;
+        #else
+        if (!(version_info = PySys_GetObject("version_info"))) goto end;
+        if (!(py_minor_version = PySequence_GetItem(version_info, 1))) goto end;
+        minor_version = PyLong_AsLong(py_minor_version);
+        Py_DECREF(py_minor_version);
+        if (minor_version == -1 && PyErr_Occurred()) goto end;
+        #endif
+        if (!(types_module = PyImport_ImportModule("types"))) goto end;
+        if (!(code_type = PyObject_GetAttrString(types_module, "CodeType"))) goto end;
+        if (minor_version <= 7) {
+            (void)p;
+            result = PyObject_CallFunction(code_type, "iiiiiOOOOOOiOO", a, k, l, s, f, code,
+                          c, n, v, fn, name, fline, lnos, fv, cell);
+        } else if (minor_version <= 10) {
+            result = PyObject_CallFunction(code_type, "iiiiiiOOOOOOiOO", a,p, k, l, s, f, code,
+                          c, n, v, fn, name, fline, lnos, fv, cell);
+        } else {
+            if (!(exception_table = PyBytes_FromStringAndSize(NULL, 0))) goto end;
+            result = PyObject_CallFunction(code_type, "iiiiiiOOOOOOOiOO", a,p, k, l, s, f, code,
+                          c, n, v, fn, name, name, fline, lnos, exception_table, fv, cell);
+        }
     end:
-        Py_XDECREF((PyObject*) co);
-        Py_XDECREF(kwds);
-        Py_XDECREF(argcount);
-        Py_XDECREF(posonlyargcount);
-        Py_XDECREF(kwonlyargcount);
-        Py_XDECREF(nlocals);
-        Py_XDECREF(stacksize);
-        Py_XDECREF(replace);
-        Py_XDECREF(empty);
+        Py_XDECREF(code_type);
+        Py_XDECREF(exception_table);
+        Py_XDECREF(types_module);
         if (type) {
             PyErr_Restore(type, value, traceback);
         }
         return result;
     }
+    #ifndef CO_OPTIMIZED
+    #define CO_OPTIMIZED 0x0001
+    #endif
+    #ifndef CO_NEWLOCALS
+    #define CO_NEWLOCALS 0x0002
+    #endif
+    #ifndef CO_VARARGS
+    #define CO_VARARGS 0x0004
+    #endif
+    #ifndef CO_VARKEYWORDS
+    #define CO_VARKEYWORDS 0x0008
+    #endif
+    #ifndef CO_ASYNC_GENERATOR
+    #define CO_ASYNC_GENERATOR 0x0200
+    #endif
+    #ifndef CO_GENERATOR
+    #define CO_GENERATOR 0x0020
+    #endif
+    #ifndef CO_COROUTINE
+    #define CO_COROUTINE 0x0080
+    #endif
+#elif PY_VERSION_HEX >= 0x030B0000
+  static CYTHON_INLINE PyCodeObject* __Pyx_PyCode_New(int a, int p, int k, int l, int s, int f,
+                                                    PyObject *code, PyObject *c, PyObject* n, PyObject *v,
+                                                    PyObject *fv, PyObject *cell, PyObject* fn,
+                                                    PyObject *name, int fline, PyObject *lnos) {
+    PyCodeObject *result;
+    PyObject *empty_bytes = PyBytes_FromStringAndSize("", 0);
+    if (!empty_bytes) return NULL;
+    result =
+      #if PY_VERSION_HEX >= 0x030C0000
+        PyUnstable_Code_NewWithPosOnlyArgs
+      #else
+        PyCode_NewWithPosOnlyArgs
+      #endif
+        (a, p, k, l, s, f, code, c, n, v, fv, cell, fn, name, name, fline, lnos, empty_bytes);
+    Py_DECREF(empty_bytes);
+    return result;
+  }
 #elif PY_VERSION_HEX >= 0x030800B2 && !CYTHON_COMPILING_IN_PYPY
   #define __Pyx_PyCode_New(a, p, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
           PyCode_NewWithPosOnlyArgs(a, p, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
 #else
   #define __Pyx_PyCode_New(a, p, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
           PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
 #endif
@@ -681,16 +762,21 @@
   #ifndef METH_FASTCALL
      #define METH_FASTCALL 0x80
   #endif
   typedef PyObject *(*__Pyx_PyCFunctionFast) (PyObject *self, PyObject *const *args, Py_ssize_t nargs);
   typedef PyObject *(*__Pyx_PyCFunctionFastWithKeywords) (PyObject *self, PyObject *const *args,
                                                           Py_ssize_t nargs, PyObject *kwnames);
 #else
-  #define __Pyx_PyCFunctionFast _PyCFunctionFast
-  #define __Pyx_PyCFunctionFastWithKeywords _PyCFunctionFastWithKeywords
+  #if PY_VERSION_HEX >= 0x030d00A4
+  #  define __Pyx_PyCFunctionFast PyCFunctionFast
+  #  define __Pyx_PyCFunctionFastWithKeywords PyCFunctionFastWithKeywords
+  #else
+  #  define __Pyx_PyCFunctionFast _PyCFunctionFast
+  #  define __Pyx_PyCFunctionFastWithKeywords _PyCFunctionFastWithKeywords
+  #endif
 #endif
 #if CYTHON_METH_FASTCALL
   #define __Pyx_METH_FASTCALL METH_FASTCALL
   #define __Pyx_PyCFunction_FastCall __Pyx_PyCFunctionFast
   #define __Pyx_PyCFunction_FastCallWithKeywords __Pyx_PyCFunctionFastWithKeywords
 #else
   #define __Pyx_METH_FASTCALL METH_VARARGS
@@ -706,15 +792,40 @@
                                             size_t nargsf, PyObject *kwnames);
   #define __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET  ((size_t)1 << (8 * sizeof(size_t) - 1))
   #define __Pyx_PyVectorcall_NARGS(n)  ((Py_ssize_t)(((size_t)(n)) & ~__Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET))
 #else
   #define __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET  0
   #define __Pyx_PyVectorcall_NARGS(n)  ((Py_ssize_t)(n))
 #endif
-#if PY_VERSION_HEX < 0x030900B1
+#if PY_MAJOR_VERSION >= 0x030900B1
+#define __Pyx_PyCFunction_CheckExact(func)  PyCFunction_CheckExact(func)
+#else
+#define __Pyx_PyCFunction_CheckExact(func)  PyCFunction_Check(func)
+#endif
+#define __Pyx_CyOrPyCFunction_Check(func)  PyCFunction_Check(func)
+#if CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_CyOrPyCFunction_GET_FUNCTION(func)  (((PyCFunctionObject*)(func))->m_ml->ml_meth)
+#elif !CYTHON_COMPILING_IN_LIMITED_API
+#define __Pyx_CyOrPyCFunction_GET_FUNCTION(func)  PyCFunction_GET_FUNCTION(func)
+#endif
+#if CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_CyOrPyCFunction_GET_FLAGS(func)  (((PyCFunctionObject*)(func))->m_ml->ml_flags)
+static CYTHON_INLINE PyObject* __Pyx_CyOrPyCFunction_GET_SELF(PyObject *func) {
+    return (__Pyx_CyOrPyCFunction_GET_FLAGS(func) & METH_STATIC) ? NULL : ((PyCFunctionObject*)func)->m_self;
+}
+#endif
+static CYTHON_INLINE int __Pyx__IsSameCFunction(PyObject *func, void *cfunc) {
+#if CYTHON_COMPILING_IN_LIMITED_API
+    return PyCFunction_Check(func) && PyCFunction_GetFunction(func) == (PyCFunction) cfunc;
+#else
+    return PyCFunction_Check(func) && PyCFunction_GET_FUNCTION(func) == (PyCFunction) cfunc;
+#endif
+}
+#define __Pyx_IsSameCFunction(func, cfunc)   __Pyx__IsSameCFunction(func, cfunc)
+#if __PYX_LIMITED_VERSION_HEX < 0x030900B1
   #define __Pyx_PyType_FromModuleAndSpec(m, s, b)  ((void)m, PyType_FromSpecWithBases(s, b))
   typedef PyObject *(*__Pyx_PyCMethod)(PyObject *, PyTypeObject *, PyObject *const *, size_t, PyObject *);
 #else
   #define __Pyx_PyType_FromModuleAndSpec(m, s, b)  PyType_FromModuleAndSpec(m, s, b)
   #define __Pyx_PyCMethod  PyCMethod
 #endif
 #ifndef METH_METHOD
@@ -732,14 +843,16 @@
   #define __Pyx_PyCode_HasFreeVars(co)  (PyCode_GetNumFree(co) > 0)
   #define __Pyx_PyFrame_SetLineNumber(frame, lineno)  (frame)->f_lineno = (lineno)
 #endif
 #if CYTHON_COMPILING_IN_LIMITED_API
   #define __Pyx_PyThreadState_Current PyThreadState_Get()
 #elif !CYTHON_FAST_THREAD_STATE
   #define __Pyx_PyThreadState_Current PyThreadState_GET()
+#elif PY_VERSION_HEX >= 0x030d00A1
+  #define __Pyx_PyThreadState_Current PyThreadState_GetUnchecked()
 #elif PY_VERSION_HEX >= 0x03060000
   #define __Pyx_PyThreadState_Current _PyThreadState_UncheckedGet()
 #elif PY_VERSION_HEX >= 0x03000000
   #define __Pyx_PyThreadState_Current PyThreadState_GET()
 #else
   #define __Pyx_PyThreadState_Current _PyThreadState_Current
 #endif
@@ -807,27 +920,27 @@
     #else
         static CYTHON_INLINE int PyGILState_Check(void) {
             PyThreadState * tstate = _PyThreadState_Current;
             return tstate && (tstate == PyGILState_GetThisThreadState());
         }
     #endif
 #endif
-#if CYTHON_COMPILING_IN_CPYTHON || defined(_PyDict_NewPresized)
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX < 0x030d0000 || defined(_PyDict_NewPresized)
 #define __Pyx_PyDict_NewPresized(n)  ((n <= 8) ? PyDict_New() : _PyDict_NewPresized(n))
 #else
 #define __Pyx_PyDict_NewPresized(n)  PyDict_New()
 #endif
 #if PY_MAJOR_VERSION >= 3 || CYTHON_FUTURE_DIVISION
   #define __Pyx_PyNumber_Divide(x,y)         PyNumber_TrueDivide(x,y)
   #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceTrueDivide(x,y)
 #else
   #define __Pyx_PyNumber_Divide(x,y)         PyNumber_Divide(x,y)
   #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceDivide(x,y)
 #endif
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX > 0x030600B4 && CYTHON_USE_UNICODE_INTERNALS
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX > 0x030600B4 && PY_VERSION_HEX < 0x030d0000 && CYTHON_USE_UNICODE_INTERNALS
 #define __Pyx_PyDict_GetItemStrWithError(dict, name)  _PyDict_GetItem_KnownHash(dict, name, ((PyASCIIObject *) name)->hash)
 static CYTHON_INLINE PyObject * __Pyx_PyDict_GetItemStr(PyObject *dict, PyObject *name) {
     PyObject *res = __Pyx_PyDict_GetItemStrWithError(dict, name);
     if (res == NULL) PyErr_Clear();
     return res;
 }
 #elif PY_MAJOR_VERSION >= 3 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07020000)
@@ -856,17 +969,22 @@
   #define __Pyx_PyType_HasFeature(type, feature)  ((__Pyx_PyType_GetFlags(type) & (feature)) != 0)
   #define __Pyx_PyObject_GetIterNextFunc(obj)  (Py_TYPE(obj)->tp_iternext)
 #else
   #define __Pyx_PyType_GetFlags(tp)   (PyType_GetFlags((PyTypeObject *)tp))
   #define __Pyx_PyType_HasFeature(type, feature)  PyType_HasFeature(type, feature)
   #define __Pyx_PyObject_GetIterNextFunc(obj)  PyIter_Next
 #endif
+#if CYTHON_COMPILING_IN_LIMITED_API
+  #define __Pyx_SetItemOnTypeDict(tp, k, v) PyObject_GenericSetAttr((PyObject*)tp, k, v)
+#else
+  #define __Pyx_SetItemOnTypeDict(tp, k, v) PyDict_SetItem(tp->tp_dict, k, v)
+#endif
 #if CYTHON_USE_TYPE_SPECS && PY_VERSION_HEX >= 0x03080000
 #define __Pyx_PyHeapTypeObject_GC_Del(obj)  {\
-    PyTypeObject *type = Py_TYPE(obj);\
+    PyTypeObject *type = Py_TYPE((PyObject*)obj);\
     assert(__Pyx_PyType_HasFeature(type, Py_TPFLAGS_HEAPTYPE));\
     PyObject_GC_Del(obj);\
     Py_DECREF(type);\
 }
 #else
 #define __Pyx_PyHeapTypeObject_GC_Del(obj)  PyObject_GC_Del(obj)
 #endif
@@ -982,17 +1100,42 @@
   #define __Pyx_SET_REFCNT(obj, refcnt) Py_SET_REFCNT(obj, refcnt)
   #define __Pyx_SET_SIZE(obj, size) Py_SET_SIZE(obj, size)
 #else
   #define __Pyx_SET_REFCNT(obj, refcnt) Py_REFCNT(obj) = (refcnt)
   #define __Pyx_SET_SIZE(obj, size) Py_SIZE(obj) = (size)
 #endif
 #if CYTHON_ASSUME_SAFE_MACROS
+  #define __Pyx_PySequence_ITEM(o, i) PySequence_ITEM(o, i)
   #define __Pyx_PySequence_SIZE(seq)  Py_SIZE(seq)
+  #define __Pyx_PyTuple_SET_ITEM(o, i, v) (PyTuple_SET_ITEM(o, i, v), (0))
+  #define __Pyx_PyList_SET_ITEM(o, i, v) (PyList_SET_ITEM(o, i, v), (0))
+  #define __Pyx_PyTuple_GET_SIZE(o) PyTuple_GET_SIZE(o)
+  #define __Pyx_PyList_GET_SIZE(o) PyList_GET_SIZE(o)
+  #define __Pyx_PySet_GET_SIZE(o) PySet_GET_SIZE(o)
+  #define __Pyx_PyBytes_GET_SIZE(o) PyBytes_GET_SIZE(o)
+  #define __Pyx_PyByteArray_GET_SIZE(o) PyByteArray_GET_SIZE(o)
 #else
+  #define __Pyx_PySequence_ITEM(o, i) PySequence_GetItem(o, i)
   #define __Pyx_PySequence_SIZE(seq)  PySequence_Size(seq)
+  #define __Pyx_PyTuple_SET_ITEM(o, i, v) PyTuple_SetItem(o, i, v)
+  #define __Pyx_PyList_SET_ITEM(o, i, v) PyList_SetItem(o, i, v)
+  #define __Pyx_PyTuple_GET_SIZE(o) PyTuple_Size(o)
+  #define __Pyx_PyList_GET_SIZE(o) PyList_Size(o)
+  #define __Pyx_PySet_GET_SIZE(o) PySet_Size(o)
+  #define __Pyx_PyBytes_GET_SIZE(o) PyBytes_Size(o)
+  #define __Pyx_PyByteArray_GET_SIZE(o) PyByteArray_Size(o)
+#endif
+#if __PYX_LIMITED_VERSION_HEX >= 0x030d00A1
+  #define __Pyx_PyImport_AddModuleRef(name) PyImport_AddModuleRef(name)
+#else
+  static CYTHON_INLINE PyObject *__Pyx_PyImport_AddModuleRef(const char *name) {
+      PyObject *module = PyImport_AddModule(name);
+      Py_XINCREF(module);
+      return module;
+  }
 #endif
 #if PY_MAJOR_VERSION >= 3
   #define PyIntObject                  PyLongObject
   #define PyInt_Type                   PyLong_Type
   #define PyInt_Check(op)              PyLong_Check(op)
   #define PyInt_CheckExact(op)         PyLong_CheckExact(op)
   #define __Pyx_Py3Int_Check(op)       PyLong_Check(op)
@@ -1064,15 +1207,15 @@
 #if defined(__CYGWIN__) && defined(_LDBL_EQ_DBL)
 #define __Pyx_truncl trunc
 #else
 #define __Pyx_truncl truncl
 #endif
 
 #define __PYX_MARK_ERR_POS(f_index, lineno) \
-    { __pyx_filename = __pyx_f[f_index]; (void)__pyx_filename; __pyx_lineno = lineno; (void)__pyx_lineno; __pyx_clineno = __LINE__; (void)__pyx_clineno; }
+    { __pyx_filename = __pyx_f[f_index]; (void)__pyx_filename; __pyx_lineno = lineno; (void)__pyx_lineno; __pyx_clineno = __LINE__;  (void)__pyx_clineno; }
 #define __PYX_ERR(f_index, lineno, Ln_error) \
     { __PYX_MARK_ERR_POS(f_index, lineno) goto Ln_error; }
 
 #ifdef CYTHON_EXTERN_C
     #undef __PYX_EXTERN_C
     #define __PYX_EXTERN_C CYTHON_EXTERN_C
 #elif defined(__PYX_EXTERN_C)
@@ -1153,17 +1296,18 @@
 #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
     #define __Pyx_sst_abs(value) llabs(value)
 #elif defined (__GNUC__)
     #define __Pyx_sst_abs(value) __builtin_llabs(value)
 #else
     #define __Pyx_sst_abs(value) ((value<0) ? -value : value)
 #endif
+static CYTHON_INLINE Py_ssize_t __Pyx_ssize_strlen(const char *s);
 static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject*);
 static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject*, Py_ssize_t* length);
-#define __Pyx_PyByteArray_FromString(s) PyByteArray_FromStringAndSize((const char*)s, strlen((const char*)s))
+static CYTHON_INLINE PyObject* __Pyx_PyByteArray_FromString(const char*);
 #define __Pyx_PyByteArray_FromStringAndSize(s, l) PyByteArray_FromStringAndSize((const char*)s, l)
 #define __Pyx_PyBytes_FromString        PyBytes_FromString
 #define __Pyx_PyBytes_FromStringAndSize PyBytes_FromStringAndSize
 static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char*);
 #if PY_MAJOR_VERSION < 3
     #define __Pyx_PyStr_FromString        __Pyx_PyBytes_FromString
     #define __Pyx_PyStr_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
@@ -1183,32 +1327,15 @@
 #define __Pyx_PyObject_AsSString(s)    ((const signed char*) __Pyx_PyObject_AsString(s))
 #define __Pyx_PyObject_AsUString(s)    ((const unsigned char*) __Pyx_PyObject_AsString(s))
 #define __Pyx_PyObject_FromCString(s)  __Pyx_PyObject_FromString((const char*)s)
 #define __Pyx_PyBytes_FromCString(s)   __Pyx_PyBytes_FromString((const char*)s)
 #define __Pyx_PyByteArray_FromCString(s)   __Pyx_PyByteArray_FromString((const char*)s)
 #define __Pyx_PyStr_FromCString(s)     __Pyx_PyStr_FromString((const char*)s)
 #define __Pyx_PyUnicode_FromCString(s) __Pyx_PyUnicode_FromString((const char*)s)
-#if CYTHON_COMPILING_IN_LIMITED_API
-static CYTHON_INLINE size_t __Pyx_Py_UNICODE_strlen(const wchar_t *u)
-{
-    const wchar_t *u_end = u;
-    while (*u_end++) ;
-    return (size_t)(u_end - u - 1);
-}
-#else
-static CYTHON_INLINE size_t __Pyx_Py_UNICODE_strlen(const Py_UNICODE *u)
-{
-    const Py_UNICODE *u_end = u;
-    while (*u_end++) ;
-    return (size_t)(u_end - u - 1);
-}
-#endif
 #define __Pyx_PyUnicode_FromOrdinal(o)       PyUnicode_FromOrdinal((int)o)
-#define __Pyx_PyUnicode_FromUnicode(u)       PyUnicode_FromUnicode(u, __Pyx_Py_UNICODE_strlen(u))
-#define __Pyx_PyUnicode_FromUnicodeAndLength PyUnicode_FromUnicode
 #define __Pyx_PyUnicode_AsUnicode            PyUnicode_AsUnicode
 #define __Pyx_NewRef(obj) (Py_INCREF(obj), obj)
 #define __Pyx_Owned_Py_None(b) __Pyx_NewRef(Py_None)
 static CYTHON_INLINE PyObject * __Pyx_PyBool_FromLong(long b);
 static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject*);
 static CYTHON_INLINE int __Pyx_PyObject_IsTrueAndDecref(PyObject*);
 static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x);
@@ -1250,15 +1377,15 @@
     #define __Pyx_PyLong_CompactValue(x)  PyUnstable_Long_CompactValue((PyLongObject*) x)
   #else
     #define __Pyx_PyLong_IsCompact(x)     (((PyLongObject*)x)->long_value.lv_tag < (2 << _PyLong_NON_SIZE_BITS))
     #define __Pyx_PyLong_CompactValue(x)  ((1 - (Py_ssize_t) __Pyx_PyLong_Sign(x)) * (Py_ssize_t) __Pyx_PyLong_Digits(x)[0])
   #endif
   typedef Py_ssize_t  __Pyx_compact_pylong;
   typedef size_t  __Pyx_compact_upylong;
-  #else  // Py < 3.12
+  #else
   #define __Pyx_PyLong_IsNeg(x)  (Py_SIZE(x) < 0)
   #define __Pyx_PyLong_IsNonNeg(x)  (Py_SIZE(x) >= 0)
   #define __Pyx_PyLong_IsZero(x)  (Py_SIZE(x) == 0)
   #define __Pyx_PyLong_IsPos(x)  (Py_SIZE(x) > 0)
   #define __Pyx_PyLong_CompactValueUnsigned(x)  ((Py_SIZE(x) == 0) ? 0 : __Pyx_PyLong_Digits(x)[0])
   #define __Pyx_PyLong_DigitCount(x)  __Pyx_sst_abs(Py_SIZE(x))
   #define __Pyx_PyLong_SignedDigitCount(x)  Py_SIZE(x)
@@ -1271,14 +1398,15 @@
   #if PY_VERSION_HEX >= 0x030C00A5
   #define __Pyx_PyLong_Digits(x)  (((PyLongObject*)x)->long_value.ob_digit)
   #else
   #define __Pyx_PyLong_Digits(x)  (((PyLongObject*)x)->ob_digit)
   #endif
 #endif
 #if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
+#include <string.h>
 static int __Pyx_sys_getdefaultencoding_not_ascii;
 static int __Pyx_init_sys_getdefaultencoding_params(void) {
     PyObject* sys;
     PyObject* default_encoding = NULL;
     PyObject* ascii_chars_u = NULL;
     PyObject* ascii_chars_b = NULL;
     const char* default_encoding_c;
@@ -1321,14 +1449,15 @@
 }
 #endif
 #if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT && PY_MAJOR_VERSION >= 3
 #define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_DecodeUTF8(c_str, size, NULL)
 #else
 #define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_Decode(c_str, size, __PYX_DEFAULT_STRING_ENCODING, NULL)
 #if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
+#include <string.h>
 static char* __PYX_DEFAULT_STRING_ENCODING;
 static int __Pyx_init_sys_getdefaultencoding_params(void) {
     PyObject* sys;
     PyObject* default_encoding = NULL;
     char* default_encoding_c;
     sys = PyImport_ImportModule("sys");
     if (!sys) goto bad;
@@ -1370,40 +1499,45 @@
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
   "neologdn.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
+/* ForceInitThreads.proto */
+#ifndef __PYX_FORCE_INIT_THREADS
+  #define __PYX_FORCE_INIT_THREADS 0
+#endif
+
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
 struct __pyx_opt_args_8neologdn_shorten_repeat;
 struct __pyx_opt_args_8neologdn_normalize;
 
-/* "neologdn.pyx":102
+/* "neologdn.pyx":110
  * 
  * 
  * cpdef unicode shorten_repeat(unicode text, int repeat_threshould, int max_repeat_substr_length=8):             # <<<<<<<<<<<<<<
  *     cdef int text_length, i, repeat_length, right_start, right_end, num_repeat_substrs
  *     cdef int upper_repeat_substr_length
  */
 struct __pyx_opt_args_8neologdn_shorten_repeat {
   int __pyx_n;
   int max_repeat_substr_length;
 };
 
-/* "neologdn.pyx":132
+/* "neologdn.pyx":140
  * 
  * 
  * cpdef unicode normalize(unicode text, int repeat=0, bint remove_space=True,             # <<<<<<<<<<<<<<
  *                         int max_repeat_substr_length=8, unicode tilde='remove'):
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))
  */
 struct __pyx_opt_args_8neologdn_normalize {
   int __pyx_n;
   int repeat;
   int remove_space;
   int max_repeat_substr_length;
   PyObject *tilde;
@@ -1591,33 +1725,55 @@
 /* TupleAndListFromArray.proto */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
 static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
 #endif
 
 /* fastcall.proto */
-#define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
+#if CYTHON_AVOID_BORROWED_REFS
+    #define __Pyx_Arg_VARARGS(args, i) PySequence_GetItem(args, i)
+#elif CYTHON_ASSUME_SAFE_MACROS
+    #define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
+#else
+    #define __Pyx_Arg_VARARGS(args, i) PyTuple_GetItem(args, i)
+#endif
+#if CYTHON_AVOID_BORROWED_REFS
+    #define __Pyx_Arg_NewRef_VARARGS(arg) __Pyx_NewRef(arg)
+    #define __Pyx_Arg_XDECREF_VARARGS(arg) Py_XDECREF(arg)
+#else
+    #define __Pyx_Arg_NewRef_VARARGS(arg) arg
+    #define __Pyx_Arg_XDECREF_VARARGS(arg)
+#endif
 #define __Pyx_NumKwargs_VARARGS(kwds) PyDict_Size(kwds)
 #define __Pyx_KwValues_VARARGS(args, nargs) NULL
 #define __Pyx_GetKwValue_VARARGS(kw, kwvalues, s) __Pyx_PyDict_GetItemStrWithError(kw, s)
 #define __Pyx_KwargsAsDict_VARARGS(kw, kwvalues) PyDict_Copy(kw)
 #if CYTHON_METH_FASTCALL
     #define __Pyx_Arg_FASTCALL(args, i) args[i]
     #define __Pyx_NumKwargs_FASTCALL(kwds) PyTuple_GET_SIZE(kwds)
     #define __Pyx_KwValues_FASTCALL(args, nargs) ((args) + (nargs))
     static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s);
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030d0000
+    CYTHON_UNUSED static PyObject *__Pyx_KwargsAsDict_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues);
+  #else
     #define __Pyx_KwargsAsDict_FASTCALL(kw, kwvalues) _PyStack_AsDict(kwvalues, kw)
+  #endif
+    #define __Pyx_Arg_NewRef_FASTCALL(arg) arg  /* no-op, __Pyx_Arg_FASTCALL is direct and this needs
+                                                   to have the same reference counting */
+    #define __Pyx_Arg_XDECREF_FASTCALL(arg)
 #else
     #define __Pyx_Arg_FASTCALL __Pyx_Arg_VARARGS
     #define __Pyx_NumKwargs_FASTCALL __Pyx_NumKwargs_VARARGS
     #define __Pyx_KwValues_FASTCALL __Pyx_KwValues_VARARGS
     #define __Pyx_GetKwValue_FASTCALL __Pyx_GetKwValue_VARARGS
     #define __Pyx_KwargsAsDict_FASTCALL __Pyx_KwargsAsDict_VARARGS
+    #define __Pyx_Arg_NewRef_FASTCALL(arg) __Pyx_Arg_NewRef_VARARGS(arg)
+    #define __Pyx_Arg_XDECREF_FASTCALL(arg) __Pyx_Arg_XDECREF_VARARGS(arg)
 #endif
-#if CYTHON_COMPILING_IN_CPYTHON
+#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
 #else
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #endif
 
@@ -1755,15 +1911,30 @@
 #if !CYTHON_USE_TYPE_SPECS
 static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);
 #else
 static PyTypeObject* __Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases);
 #endif
 
 /* PyMethodNew.proto */
-#if PY_MAJOR_VERSION >= 3
+#if CYTHON_COMPILING_IN_LIMITED_API
+static PyObject *__Pyx_PyMethod_New(PyObject *func, PyObject *self, PyObject *typ) {
+    PyObject *typesModule=NULL, *methodType=NULL, *result=NULL;
+    CYTHON_UNUSED_VAR(typ);
+    if (!self)
+        return __Pyx_NewRef(func);
+    typesModule = PyImport_ImportModule("types");
+    if (!typesModule) return NULL;
+    methodType = PyObject_GetAttrString(typesModule, "MethodType");
+    Py_DECREF(typesModule);
+    if (!methodType) return NULL;
+    result = PyObject_CallFunctionObjArgs(methodType, func, self, NULL);
+    Py_DECREF(methodType);
+    return result;
+}
+#elif PY_MAJOR_VERSION >= 3
 static PyObject *__Pyx_PyMethod_New(PyObject *func, PyObject *self, PyObject *typ) {
     CYTHON_UNUSED_VAR(typ);
     if (!self)
         return __Pyx_NewRef(func);
     return PyMethod_New(func, self);
 }
 #else
@@ -1779,62 +1950,69 @@
 #define __Pyx_CyFunction_USED
 #define __Pyx_CYFUNCTION_STATICMETHOD  0x01
 #define __Pyx_CYFUNCTION_CLASSMETHOD   0x02
 #define __Pyx_CYFUNCTION_CCLASS        0x04
 #define __Pyx_CYFUNCTION_COROUTINE     0x08
 #define __Pyx_CyFunction_GetClosure(f)\
     (((__pyx_CyFunctionObject *) (f))->func_closure)
-#if PY_VERSION_HEX < 0x030900B1
+#if PY_VERSION_HEX < 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
   #define __Pyx_CyFunction_GetClassObj(f)\
       (((__pyx_CyFunctionObject *) (f))->func_classobj)
 #else
   #define __Pyx_CyFunction_GetClassObj(f)\
       ((PyObject*) ((PyCMethodObject *) (f))->mm_class)
 #endif
 #define __Pyx_CyFunction_SetClassObj(f, classobj)\
     __Pyx__CyFunction_SetClassObj((__pyx_CyFunctionObject *) (f), (classobj))
 #define __Pyx_CyFunction_Defaults(type, f)\
     ((type *)(((__pyx_CyFunctionObject *) (f))->defaults))
 #define __Pyx_CyFunction_SetDefaultsGetter(f, g)\
     ((__pyx_CyFunctionObject *) (f))->defaults_getter = (g)
 typedef struct {
-#if PY_VERSION_HEX < 0x030900B1
+#if CYTHON_COMPILING_IN_LIMITED_API
+    PyObject_HEAD
+    PyObject *func;
+#elif PY_VERSION_HEX < 0x030900B1
     PyCFunctionObject func;
 #else
     PyCMethodObject func;
 #endif
 #if CYTHON_BACKPORT_VECTORCALL
     __pyx_vectorcallfunc func_vectorcall;
 #endif
-#if PY_VERSION_HEX < 0x030500A0
+#if PY_VERSION_HEX < 0x030500A0 || CYTHON_COMPILING_IN_LIMITED_API
     PyObject *func_weakreflist;
 #endif
     PyObject *func_dict;
     PyObject *func_name;
     PyObject *func_qualname;
     PyObject *func_doc;
     PyObject *func_globals;
     PyObject *func_code;
     PyObject *func_closure;
-#if PY_VERSION_HEX < 0x030900B1
+#if PY_VERSION_HEX < 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     PyObject *func_classobj;
 #endif
     void *defaults;
     int defaults_pyobjects;
-    size_t defaults_size;  // used by FusedFunction for copying defaults
+    size_t defaults_size;
     int flags;
     PyObject *defaults_tuple;
     PyObject *defaults_kwdict;
     PyObject *(*defaults_getter)(PyObject *);
     PyObject *func_annotations;
     PyObject *func_is_coroutine;
 } __pyx_CyFunctionObject;
+#undef __Pyx_CyOrPyCFunction_Check
 #define __Pyx_CyFunction_Check(obj)  __Pyx_TypeCheck(obj, __pyx_CyFunctionType)
-#define __Pyx_IsCyOrPyCFunction(obj)  __Pyx_TypeCheck2(obj, __pyx_CyFunctionType, &PyCFunction_Type)
+#define __Pyx_CyOrPyCFunction_Check(obj)  __Pyx_TypeCheck2(obj, __pyx_CyFunctionType, &PyCFunction_Type)
 #define __Pyx_CyFunction_CheckExact(obj)  __Pyx_IS_TYPE(obj, __pyx_CyFunctionType)
+static CYTHON_INLINE int __Pyx__IsSameCyOrCFunction(PyObject *func, void *cfunc);
+#undef __Pyx_IsSameCFunction
+#define __Pyx_IsSameCFunction(func, cfunc)   __Pyx__IsSameCyOrCFunction(func, cfunc)
 static PyObject *__Pyx_CyFunction_Init(__pyx_CyFunctionObject* op, PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 static CYTHON_INLINE void __Pyx__CyFunction_SetClassObj(__pyx_CyFunctionObject* f, PyObject* classobj);
 static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *m,
@@ -1890,16 +2068,16 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
-/* ObjectAsPyUnicode.proto */
-static CYTHON_INLINE Py_UNICODE __Pyx_PyObject_AsPy_UNICODE(PyObject*);
+/* UnicodeAsUCS4.proto */
+static CYTHON_INLINE Py_UCS4 __Pyx_PyUnicode_AsPy_UCS4(PyObject*);
 
 /* CppExceptionConversion.proto */
 #ifndef __Pyx_CppExn2PyErr
 #include <new>
 #include <typeinfo>
 #include <stdexcept>
 #include <ios>
@@ -1940,14 +2118,19 @@
 #endif
 
 /* GCCDiagnostics.proto */
 #if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
 #define __Pyx_HAS_GCC_DIAGNOSTIC
 #endif
 
+/* ObjectAsUCS4.proto */
+#define __Pyx_PyObject_AsPy_UCS4(x)\
+    (likely(PyUnicode_Check(x)) ? __Pyx_PyUnicode_AsPy_UCS4(x) : __Pyx__PyObject_AsPy_UCS4(x))
+static Py_UCS4 __Pyx__PyObject_AsPy_UCS4(PyObject*);
+
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* CIntToPy.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_int(int value);
 
 /* FormatTypeName.proto */
@@ -1983,15 +2166,16 @@
 #define __Pyx_PyErr_GivenExceptionMatches(err, type) PyErr_GivenExceptionMatches(err, type)
 #define __Pyx_PyErr_GivenExceptionMatches2(err, type1, type2) (PyErr_GivenExceptionMatches(err, type1) || PyErr_GivenExceptionMatches(err, type2))
 #endif
 #define __Pyx_PyErr_ExceptionMatches2(err1, err2)  __Pyx_PyErr_GivenExceptionMatches2(__Pyx_PyErr_CurrentExceptionType(), err1, err2)
 #define __Pyx_PyException_Check(obj) __Pyx_TypeCheck(obj, PyExc_Exception)
 
 /* CheckBinaryVersion.proto */
-static int __Pyx_check_binary_version(void);
+static unsigned long __Pyx_get_runtime_version(void);
+static int __Pyx_check_binary_version(unsigned long ct_version, unsigned long rt_version, int allow_newer);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
 /* Module declarations from "libc.string" */
@@ -2001,19 +2185,20 @@
 /* Module declarations from "libcpp.utility" */
 
 /* Module declarations from "libcpp.unordered_map" */
 
 /* Module declarations from "libcpp.unordered_set" */
 
 /* Module declarations from "neologdn" */
-static std::unordered_map<Py_UNICODE,Py_UNICODE>  __pyx_v_8neologdn_conversion_map;
-static std::unordered_map<Py_UNICODE,Py_UNICODE>  __pyx_v_8neologdn_kana_ten_map;
-static std::unordered_map<Py_UNICODE,Py_UNICODE>  __pyx_v_8neologdn_kana_maru_map;
-static std::unordered_set<Py_UNICODE>  __pyx_v_8neologdn_blocks;
-static std::unordered_set<Py_UNICODE>  __pyx_v_8neologdn_basic_latin;
+static std::unordered_map<Py_UCS4,Py_UCS4>  __pyx_v_8neologdn_conversion_map;
+static std::unordered_map<Py_UCS4,Py_UCS4>  __pyx_v_8neologdn_kana_ten_map;
+static std::unordered_map<Py_UCS4,Py_UCS4>  __pyx_v_8neologdn_kana_maru_map;
+static std::unordered_set<Py_UCS4>  __pyx_v_8neologdn_blocks;
+static std::unordered_set<Py_UCS4>  __pyx_v_8neologdn_basic_latin;
+static PyObject *__pyx_f_8neologdn_py_ucs4_to_unicode(Py_UCS4 *, Py_ssize_t); /*proto*/
 static PyObject *__pyx_f_8neologdn_shorten_repeat(PyObject *, int, int __pyx_skip_dispatch, struct __pyx_opt_args_8neologdn_shorten_repeat *__pyx_optional_args); /*proto*/
 static PyObject *__pyx_f_8neologdn_normalize(PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_8neologdn_normalize *__pyx_optional_args); /*proto*/
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
 #define __Pyx_MODULE_NAME "neologdn"
 extern int __pyx_module_is_main_neologdn;
 int __pyx_module_is_main_neologdn = 0;
@@ -2196,17 +2381,17 @@
 static const char __pyx_k__182[] = "^";
 static const char __pyx_k__184[] = "\357\274\277";
 static const char __pyx_k__185[] = "_";
 static const char __pyx_k__187[] = "\342\200\230";
 static const char __pyx_k__188[] = "`";
 static const char __pyx_k__190[] = "\357\275\233";
 static const char __pyx_k__191[] = "{";
-  static const char __pyx_k__193[] = "\357\275\234";
-  static const char __pyx_k__194[] = "|";
-  static const char __pyx_k__196[] = "\357\275\235";
+static const char __pyx_k__193[] = "\357\275\234";
+static const char __pyx_k__194[] = "|";
+static const char __pyx_k__196[] = "\357\275\235";
 static const char __pyx_k__197[] = "}";
 static const char __pyx_k__200[] = "\357\275\261";
 static const char __pyx_k__201[] = "\343\202\242";
 static const char __pyx_k__203[] = "\357\275\262";
 static const char __pyx_k__204[] = "\343\202\244";
 static const char __pyx_k__206[] = "\357\275\263";
 static const char __pyx_k__207[] = "\343\202\246";
@@ -2402,15 +2587,15 @@
 static const char __pyx_k__507[] = " ";
 static const char __pyx_k__508[] = "\343\200\200";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_spec[] = "__spec__";
 static const char __pyx_k_test[] = "__test__";
 static const char __pyx_k_text[] = "text";
-static const char __pyx_k_0_5_2[] = "0.5.2";
+static const char __pyx_k_0_5_3[] = "0.5.3";
 static const char __pyx_k_ASCII[] = "ASCII";
 static const char __pyx_k_DIGIT[] = "DIGIT";
 static const char __pyx_k_SPACE[] = "SPACE";
 static const char __pyx_k_after[] = "after";
 static const char __pyx_k_chain[] = "chain";
 static const char __pyx_k_range[] = "range";
 static const char __pyx_k_tilde[] = "tilde";
@@ -2482,15 +2667,15 @@
   #if CYTHON_USE_MODULE_STATE
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_n_s_;
   PyObject *__pyx_kp_u_;
   PyObject *__pyx_kp_u_0;
-  PyObject *__pyx_kp_u_0_5_2;
+  PyObject *__pyx_kp_u_0_5_3;
   PyObject *__pyx_kp_u_1;
   PyObject *__pyx_kp_u_2;
   PyObject *__pyx_kp_u_3;
   PyObject *__pyx_kp_u_4;
   PyObject *__pyx_kp_u_5;
   PyObject *__pyx_kp_u_6;
   PyObject *__pyx_kp_u_7;
@@ -2901,15 +3086,15 @@
   PyObject *__pyx_n_s_version;
   PyObject *__pyx_n_s_version_info;
   PyObject *__pyx_n_u_w;
   PyObject *__pyx_n_u_x;
   PyObject *__pyx_n_u_y;
   PyObject *__pyx_n_u_z;
   PyObject *__pyx_int_0;
-  PyObject *__pyx_int_2;
+  PyObject *__pyx_int_3;
   PyObject *__pyx_int_5;
   PyObject *__pyx_int_8;
   PyObject *__pyx_int_128;
   PyObject *__pyx_int_12289;
   PyObject *__pyx_int_12352;
   PyObject *__pyx_int_12448;
   PyObject *__pyx_int_12544;
@@ -3168,15 +3353,15 @@
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_n_s_);
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
   Py_CLEAR(clear_module_state->__pyx_kp_u_0);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_0_5_2);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_0_5_3);
   Py_CLEAR(clear_module_state->__pyx_kp_u_1);
   Py_CLEAR(clear_module_state->__pyx_kp_u_2);
   Py_CLEAR(clear_module_state->__pyx_kp_u_3);
   Py_CLEAR(clear_module_state->__pyx_kp_u_4);
   Py_CLEAR(clear_module_state->__pyx_kp_u_5);
   Py_CLEAR(clear_module_state->__pyx_kp_u_6);
   Py_CLEAR(clear_module_state->__pyx_kp_u_7);
@@ -3587,15 +3772,15 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_version);
   Py_CLEAR(clear_module_state->__pyx_n_s_version_info);
   Py_CLEAR(clear_module_state->__pyx_n_u_w);
   Py_CLEAR(clear_module_state->__pyx_n_u_x);
   Py_CLEAR(clear_module_state->__pyx_n_u_y);
   Py_CLEAR(clear_module_state->__pyx_n_u_z);
   Py_CLEAR(clear_module_state->__pyx_int_0);
-  Py_CLEAR(clear_module_state->__pyx_int_2);
+  Py_CLEAR(clear_module_state->__pyx_int_3);
   Py_CLEAR(clear_module_state->__pyx_int_5);
   Py_CLEAR(clear_module_state->__pyx_int_8);
   Py_CLEAR(clear_module_state->__pyx_int_128);
   Py_CLEAR(clear_module_state->__pyx_int_12289);
   Py_CLEAR(clear_module_state->__pyx_int_12352);
   Py_CLEAR(clear_module_state->__pyx_int_12448);
   Py_CLEAR(clear_module_state->__pyx_int_12544);
@@ -3832,15 +4017,15 @@
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_n_s_);
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
   Py_VISIT(traverse_module_state->__pyx_kp_u_0);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_0_5_2);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_0_5_3);
   Py_VISIT(traverse_module_state->__pyx_kp_u_1);
   Py_VISIT(traverse_module_state->__pyx_kp_u_2);
   Py_VISIT(traverse_module_state->__pyx_kp_u_3);
   Py_VISIT(traverse_module_state->__pyx_kp_u_4);
   Py_VISIT(traverse_module_state->__pyx_kp_u_5);
   Py_VISIT(traverse_module_state->__pyx_kp_u_6);
   Py_VISIT(traverse_module_state->__pyx_kp_u_7);
@@ -4251,15 +4436,15 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_version);
   Py_VISIT(traverse_module_state->__pyx_n_s_version_info);
   Py_VISIT(traverse_module_state->__pyx_n_u_w);
   Py_VISIT(traverse_module_state->__pyx_n_u_x);
   Py_VISIT(traverse_module_state->__pyx_n_u_y);
   Py_VISIT(traverse_module_state->__pyx_n_u_z);
   Py_VISIT(traverse_module_state->__pyx_int_0);
-  Py_VISIT(traverse_module_state->__pyx_int_2);
+  Py_VISIT(traverse_module_state->__pyx_int_3);
   Py_VISIT(traverse_module_state->__pyx_int_5);
   Py_VISIT(traverse_module_state->__pyx_int_8);
   Py_VISIT(traverse_module_state->__pyx_int_128);
   Py_VISIT(traverse_module_state->__pyx_int_12289);
   Py_VISIT(traverse_module_state->__pyx_int_12352);
   Py_VISIT(traverse_module_state->__pyx_int_12448);
   Py_VISIT(traverse_module_state->__pyx_int_12544);
@@ -4516,15 +4701,15 @@
 #if CYTHON_USE_MODULE_STATE
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_n_s_ __pyx_mstate_global->__pyx_n_s_
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
 #define __pyx_kp_u_0 __pyx_mstate_global->__pyx_kp_u_0
-#define __pyx_kp_u_0_5_2 __pyx_mstate_global->__pyx_kp_u_0_5_2
+#define __pyx_kp_u_0_5_3 __pyx_mstate_global->__pyx_kp_u_0_5_3
 #define __pyx_kp_u_1 __pyx_mstate_global->__pyx_kp_u_1
 #define __pyx_kp_u_2 __pyx_mstate_global->__pyx_kp_u_2
 #define __pyx_kp_u_3 __pyx_mstate_global->__pyx_kp_u_3
 #define __pyx_kp_u_4 __pyx_mstate_global->__pyx_kp_u_4
 #define __pyx_kp_u_5 __pyx_mstate_global->__pyx_kp_u_5
 #define __pyx_kp_u_6 __pyx_mstate_global->__pyx_kp_u_6
 #define __pyx_kp_u_7 __pyx_mstate_global->__pyx_kp_u_7
@@ -4935,15 +5120,15 @@
 #define __pyx_n_s_version __pyx_mstate_global->__pyx_n_s_version
 #define __pyx_n_s_version_info __pyx_mstate_global->__pyx_n_s_version_info
 #define __pyx_n_u_w __pyx_mstate_global->__pyx_n_u_w
 #define __pyx_n_u_x __pyx_mstate_global->__pyx_n_u_x
 #define __pyx_n_u_y __pyx_mstate_global->__pyx_n_u_y
 #define __pyx_n_u_z __pyx_mstate_global->__pyx_n_u_z
 #define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
-#define __pyx_int_2 __pyx_mstate_global->__pyx_int_2
+#define __pyx_int_3 __pyx_mstate_global->__pyx_int_3
 #define __pyx_int_5 __pyx_mstate_global->__pyx_int_5
 #define __pyx_int_8 __pyx_mstate_global->__pyx_int_8
 #define __pyx_int_128 __pyx_mstate_global->__pyx_int_128
 #define __pyx_int_12289 __pyx_mstate_global->__pyx_int_12289
 #define __pyx_int_12352 __pyx_mstate_global->__pyx_int_12352
 #define __pyx_int_12448 __pyx_mstate_global->__pyx_int_12448
 #define __pyx_int_12544 __pyx_mstate_global->__pyx_int_12544
@@ -5159,15 +5344,65 @@
 #define __pyx_tuple__518 __pyx_mstate_global->__pyx_tuple__518
 #define __pyx_tuple__519 __pyx_mstate_global->__pyx_tuple__519
 #define __pyx_tuple__521 __pyx_mstate_global->__pyx_tuple__521
 #define __pyx_codeobj__517 __pyx_mstate_global->__pyx_codeobj__517
 #define __pyx_codeobj__520 __pyx_mstate_global->__pyx_codeobj__520
 /* #### Code section: module_code ### */
 
-/* "neologdn.pyx":102
+/* "neologdn.pyx":18
+ * 
+ * 
+ * cdef py_ucs4_to_unicode(Py_UCS4 *ucs4_ptr, Py_ssize_t length):             # <<<<<<<<<<<<<<
+ *     return PyUnicode_DecodeUTF32(<char*>ucs4_ptr, sizeof(Py_UCS4)*length, NULL, NULL)
+ * 
+ */
+
+static PyObject *__pyx_f_8neologdn_py_ucs4_to_unicode(Py_UCS4 *__pyx_v_ucs4_ptr, Py_ssize_t __pyx_v_length) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("py_ucs4_to_unicode", 1);
+
+  /* "neologdn.pyx":19
+ * 
+ * cdef py_ucs4_to_unicode(Py_UCS4 *ucs4_ptr, Py_ssize_t length):
+ *     return PyUnicode_DecodeUTF32(<char*>ucs4_ptr, sizeof(Py_UCS4)*length, NULL, NULL)             # <<<<<<<<<<<<<<
+ * 
+ * 
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = PyUnicode_DecodeUTF32(((char *)__pyx_v_ucs4_ptr), ((sizeof(Py_UCS4)) * __pyx_v_length), NULL, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
+
+  /* "neologdn.pyx":18
+ * 
+ * 
+ * cdef py_ucs4_to_unicode(Py_UCS4 *ucs4_ptr, Py_ssize_t length):             # <<<<<<<<<<<<<<
+ *     return PyUnicode_DecodeUTF32(<char*>ucs4_ptr, sizeof(Py_UCS4)*length, NULL, NULL)
+ * 
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("neologdn.py_ucs4_to_unicode", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = 0;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "neologdn.pyx":110
  * 
  * 
  * cpdef unicode shorten_repeat(unicode text, int repeat_threshould, int max_repeat_substr_length=8):             # <<<<<<<<<<<<<<
  *     cdef int text_length, i, repeat_length, right_start, right_end, num_repeat_substrs
  *     cdef int upper_repeat_substr_length
  */
 
@@ -5207,63 +5442,63 @@
   if (__pyx_optional_args) {
     if (__pyx_optional_args->__pyx_n > 0) {
       __pyx_v_max_repeat_substr_length = __pyx_optional_args->max_repeat_substr_length;
     }
   }
   __Pyx_INCREF(__pyx_v_text);
 
-  /* "neologdn.pyx":107
+  /* "neologdn.pyx":115
  *     cdef unicode substr, right_substr
  * 
  *     i = 0             # <<<<<<<<<<<<<<
  *     while i < len(text):
  *         text_length = len(text)
  */
   __pyx_v_i = 0;
 
-  /* "neologdn.pyx":108
+  /* "neologdn.pyx":116
  * 
  *     i = 0
  *     while i < len(text):             # <<<<<<<<<<<<<<
  *         text_length = len(text)
  * 
  */
   while (1) {
     if (unlikely(__pyx_v_text == Py_None)) {
       PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
-      __PYX_ERR(0, 108, __pyx_L1_error)
+      __PYX_ERR(0, 116, __pyx_L1_error)
     }
-    __pyx_t_1 = __Pyx_PyUnicode_GET_LENGTH(__pyx_v_text); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 108, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyUnicode_GET_LENGTH(__pyx_v_text); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 116, __pyx_L1_error)
     __pyx_t_2 = (__pyx_v_i < __pyx_t_1);
     if (!__pyx_t_2) break;
 
-    /* "neologdn.pyx":109
+    /* "neologdn.pyx":117
  *     i = 0
  *     while i < len(text):
  *         text_length = len(text)             # <<<<<<<<<<<<<<
  * 
  *         upper_repeat_substr_length = (text_length - i) // 2
  */
     if (unlikely(__pyx_v_text == Py_None)) {
       PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
-      __PYX_ERR(0, 109, __pyx_L1_error)
+      __PYX_ERR(0, 117, __pyx_L1_error)
     }
-    __pyx_t_1 = __Pyx_PyUnicode_GET_LENGTH(__pyx_v_text); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 109, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyUnicode_GET_LENGTH(__pyx_v_text); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 117, __pyx_L1_error)
     __pyx_v_text_length = __pyx_t_1;
 
-    /* "neologdn.pyx":111
+    /* "neologdn.pyx":119
  *         text_length = len(text)
  * 
  *         upper_repeat_substr_length = (text_length - i) // 2             # <<<<<<<<<<<<<<
  *         if max_repeat_substr_length and max_repeat_substr_length < upper_repeat_substr_length:
  *             upper_repeat_substr_length = max_repeat_substr_length + 1
  */
     __pyx_v_upper_repeat_substr_length = __Pyx_div_long((__pyx_v_text_length - __pyx_v_i), 2);
 
-    /* "neologdn.pyx":112
+    /* "neologdn.pyx":120
  * 
  *         upper_repeat_substr_length = (text_length - i) // 2
  *         if max_repeat_substr_length and max_repeat_substr_length < upper_repeat_substr_length:             # <<<<<<<<<<<<<<
  *             upper_repeat_substr_length = max_repeat_substr_length + 1
  * 
  */
     __pyx_t_3 = (__pyx_v_max_repeat_substr_length != 0);
@@ -5273,235 +5508,235 @@
       goto __pyx_L6_bool_binop_done;
     }
     __pyx_t_3 = (__pyx_v_max_repeat_substr_length < __pyx_v_upper_repeat_substr_length);
     __pyx_t_2 = __pyx_t_3;
     __pyx_L6_bool_binop_done:;
     if (__pyx_t_2) {
 
-      /* "neologdn.pyx":113
+      /* "neologdn.pyx":121
  *         upper_repeat_substr_length = (text_length - i) // 2
  *         if max_repeat_substr_length and max_repeat_substr_length < upper_repeat_substr_length:
  *             upper_repeat_substr_length = max_repeat_substr_length + 1             # <<<<<<<<<<<<<<
  * 
  *         for repeat_length in range(1, upper_repeat_substr_length):
  */
       __pyx_v_upper_repeat_substr_length = (__pyx_v_max_repeat_substr_length + 1);
 
-      /* "neologdn.pyx":112
+      /* "neologdn.pyx":120
  * 
  *         upper_repeat_substr_length = (text_length - i) // 2
  *         if max_repeat_substr_length and max_repeat_substr_length < upper_repeat_substr_length:             # <<<<<<<<<<<<<<
  *             upper_repeat_substr_length = max_repeat_substr_length + 1
  * 
  */
     }
 
-    /* "neologdn.pyx":115
+    /* "neologdn.pyx":123
  *             upper_repeat_substr_length = max_repeat_substr_length + 1
  * 
  *         for repeat_length in range(1, upper_repeat_substr_length):             # <<<<<<<<<<<<<<
  *             substr = text[i:i+repeat_length]
  *             right_start = i + repeat_length
  */
     __pyx_t_4 = __pyx_v_upper_repeat_substr_length;
     __pyx_t_5 = __pyx_t_4;
     for (__pyx_t_6 = 1; __pyx_t_6 < __pyx_t_5; __pyx_t_6+=1) {
       __pyx_v_repeat_length = __pyx_t_6;
 
-      /* "neologdn.pyx":116
+      /* "neologdn.pyx":124
  * 
  *         for repeat_length in range(1, upper_repeat_substr_length):
  *             substr = text[i:i+repeat_length]             # <<<<<<<<<<<<<<
  *             right_start = i + repeat_length
  *             right_end = right_start + repeat_length
  */
       if (unlikely(__pyx_v_text == Py_None)) {
         PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-        __PYX_ERR(0, 116, __pyx_L1_error)
+        __PYX_ERR(0, 124, __pyx_L1_error)
       }
-      __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, __pyx_v_i, (__pyx_v_i + __pyx_v_repeat_length)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 116, __pyx_L1_error)
+      __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, __pyx_v_i, (__pyx_v_i + __pyx_v_repeat_length)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 124, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
       __Pyx_XDECREF_SET(__pyx_v_substr, ((PyObject*)__pyx_t_7));
       __pyx_t_7 = 0;
 
-      /* "neologdn.pyx":117
+      /* "neologdn.pyx":125
  *         for repeat_length in range(1, upper_repeat_substr_length):
  *             substr = text[i:i+repeat_length]
  *             right_start = i + repeat_length             # <<<<<<<<<<<<<<
  *             right_end = right_start + repeat_length
  *             right_substr = text[right_start:right_end]
  */
       __pyx_v_right_start = (__pyx_v_i + __pyx_v_repeat_length);
 
-      /* "neologdn.pyx":118
+      /* "neologdn.pyx":126
  *             substr = text[i:i+repeat_length]
  *             right_start = i + repeat_length
  *             right_end = right_start + repeat_length             # <<<<<<<<<<<<<<
  *             right_substr = text[right_start:right_end]
  *             num_repeat_substrs = 1
  */
       __pyx_v_right_end = (__pyx_v_right_start + __pyx_v_repeat_length);
 
-      /* "neologdn.pyx":119
+      /* "neologdn.pyx":127
  *             right_start = i + repeat_length
  *             right_end = right_start + repeat_length
  *             right_substr = text[right_start:right_end]             # <<<<<<<<<<<<<<
  *             num_repeat_substrs = 1
  *             while substr == right_substr and right_end <= text_length:
  */
       if (unlikely(__pyx_v_text == Py_None)) {
         PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-        __PYX_ERR(0, 119, __pyx_L1_error)
+        __PYX_ERR(0, 127, __pyx_L1_error)
       }
-      __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, __pyx_v_right_start, __pyx_v_right_end); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 119, __pyx_L1_error)
+      __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, __pyx_v_right_start, __pyx_v_right_end); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 127, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
       __Pyx_XDECREF_SET(__pyx_v_right_substr, ((PyObject*)__pyx_t_7));
       __pyx_t_7 = 0;
 
-      /* "neologdn.pyx":120
+      /* "neologdn.pyx":128
  *             right_end = right_start + repeat_length
  *             right_substr = text[right_start:right_end]
  *             num_repeat_substrs = 1             # <<<<<<<<<<<<<<
  *             while substr == right_substr and right_end <= text_length:
  *                 num_repeat_substrs += 1
  */
       __pyx_v_num_repeat_substrs = 1;
 
-      /* "neologdn.pyx":121
+      /* "neologdn.pyx":129
  *             right_substr = text[right_start:right_end]
  *             num_repeat_substrs = 1
  *             while substr == right_substr and right_end <= text_length:             # <<<<<<<<<<<<<<
  *                 num_repeat_substrs += 1
  *                 right_start += repeat_length
  */
       while (1) {
-        __pyx_t_3 = (__Pyx_PyUnicode_Equals(__pyx_v_substr, __pyx_v_right_substr, Py_EQ)); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 121, __pyx_L1_error)
+        __pyx_t_3 = (__Pyx_PyUnicode_Equals(__pyx_v_substr, __pyx_v_right_substr, Py_EQ)); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 129, __pyx_L1_error)
         if (__pyx_t_3) {
         } else {
           __pyx_t_2 = __pyx_t_3;
           goto __pyx_L12_bool_binop_done;
         }
         __pyx_t_3 = (__pyx_v_right_end <= __pyx_v_text_length);
         __pyx_t_2 = __pyx_t_3;
         __pyx_L12_bool_binop_done:;
         if (!__pyx_t_2) break;
 
-        /* "neologdn.pyx":122
+        /* "neologdn.pyx":130
  *             num_repeat_substrs = 1
  *             while substr == right_substr and right_end <= text_length:
  *                 num_repeat_substrs += 1             # <<<<<<<<<<<<<<
  *                 right_start += repeat_length
  *                 right_end += repeat_length
  */
         __pyx_v_num_repeat_substrs = (__pyx_v_num_repeat_substrs + 1);
 
-        /* "neologdn.pyx":123
+        /* "neologdn.pyx":131
  *             while substr == right_substr and right_end <= text_length:
  *                 num_repeat_substrs += 1
  *                 right_start += repeat_length             # <<<<<<<<<<<<<<
  *                 right_end += repeat_length
  *                 right_substr = text[right_start:right_end]
  */
         __pyx_v_right_start = (__pyx_v_right_start + __pyx_v_repeat_length);
 
-        /* "neologdn.pyx":124
+        /* "neologdn.pyx":132
  *                 num_repeat_substrs += 1
  *                 right_start += repeat_length
  *                 right_end += repeat_length             # <<<<<<<<<<<<<<
  *                 right_substr = text[right_start:right_end]
  *             if num_repeat_substrs > repeat_threshould:
  */
         __pyx_v_right_end = (__pyx_v_right_end + __pyx_v_repeat_length);
 
-        /* "neologdn.pyx":125
+        /* "neologdn.pyx":133
  *                 right_start += repeat_length
  *                 right_end += repeat_length
  *                 right_substr = text[right_start:right_end]             # <<<<<<<<<<<<<<
  *             if num_repeat_substrs > repeat_threshould:
  *                 text = text[:i+repeat_length*repeat_threshould] + text[i+repeat_length*num_repeat_substrs:]
  */
         if (unlikely(__pyx_v_text == Py_None)) {
           PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-          __PYX_ERR(0, 125, __pyx_L1_error)
+          __PYX_ERR(0, 133, __pyx_L1_error)
         }
-        __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, __pyx_v_right_start, __pyx_v_right_end); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 125, __pyx_L1_error)
+        __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, __pyx_v_right_start, __pyx_v_right_end); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 133, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_7);
         __Pyx_DECREF_SET(__pyx_v_right_substr, ((PyObject*)__pyx_t_7));
         __pyx_t_7 = 0;
       }
 
-      /* "neologdn.pyx":126
+      /* "neologdn.pyx":134
  *                 right_end += repeat_length
  *                 right_substr = text[right_start:right_end]
  *             if num_repeat_substrs > repeat_threshould:             # <<<<<<<<<<<<<<
  *                 text = text[:i+repeat_length*repeat_threshould] + text[i+repeat_length*num_repeat_substrs:]
  *         i += 1
  */
       __pyx_t_2 = (__pyx_v_num_repeat_substrs > __pyx_v_repeat_threshould);
       if (__pyx_t_2) {
 
-        /* "neologdn.pyx":127
+        /* "neologdn.pyx":135
  *                 right_substr = text[right_start:right_end]
  *             if num_repeat_substrs > repeat_threshould:
  *                 text = text[:i+repeat_length*repeat_threshould] + text[i+repeat_length*num_repeat_substrs:]             # <<<<<<<<<<<<<<
  *         i += 1
  *     return text
  */
         if (unlikely(__pyx_v_text == Py_None)) {
           PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-          __PYX_ERR(0, 127, __pyx_L1_error)
+          __PYX_ERR(0, 135, __pyx_L1_error)
         }
-        __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, 0, (__pyx_v_i + (__pyx_v_repeat_length * __pyx_v_repeat_threshould))); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 127, __pyx_L1_error)
+        __pyx_t_7 = __Pyx_PyUnicode_Substring(__pyx_v_text, 0, (__pyx_v_i + (__pyx_v_repeat_length * __pyx_v_repeat_threshould))); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 135, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_7);
         if (unlikely(__pyx_v_text == Py_None)) {
           PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
-          __PYX_ERR(0, 127, __pyx_L1_error)
+          __PYX_ERR(0, 135, __pyx_L1_error)
         }
-        __pyx_t_8 = __Pyx_PyUnicode_Substring(__pyx_v_text, (__pyx_v_i + (__pyx_v_repeat_length * __pyx_v_num_repeat_substrs)), PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 127, __pyx_L1_error)
+        __pyx_t_8 = __Pyx_PyUnicode_Substring(__pyx_v_text, (__pyx_v_i + (__pyx_v_repeat_length * __pyx_v_num_repeat_substrs)), PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 135, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_9 = __Pyx_PyUnicode_ConcatInPlace(__pyx_t_7, __pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 127, __pyx_L1_error)
+        __pyx_t_9 = __Pyx_PyUnicode_ConcatInPlace(__pyx_t_7, __pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 135, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_9);
         __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
         __Pyx_DECREF_SET(__pyx_v_text, ((PyObject*)__pyx_t_9));
         __pyx_t_9 = 0;
 
-        /* "neologdn.pyx":126
+        /* "neologdn.pyx":134
  *                 right_end += repeat_length
  *                 right_substr = text[right_start:right_end]
  *             if num_repeat_substrs > repeat_threshould:             # <<<<<<<<<<<<<<
  *                 text = text[:i+repeat_length*repeat_threshould] + text[i+repeat_length*num_repeat_substrs:]
  *         i += 1
  */
       }
     }
 
-    /* "neologdn.pyx":128
+    /* "neologdn.pyx":136
  *             if num_repeat_substrs > repeat_threshould:
  *                 text = text[:i+repeat_length*repeat_threshould] + text[i+repeat_length*num_repeat_substrs:]
  *         i += 1             # <<<<<<<<<<<<<<
  *     return text
  * 
  */
     __pyx_v_i = (__pyx_v_i + 1);
   }
 
-  /* "neologdn.pyx":129
+  /* "neologdn.pyx":137
  *                 text = text[:i+repeat_length*repeat_threshould] + text[i+repeat_length*num_repeat_substrs:]
  *         i += 1
  *     return text             # <<<<<<<<<<<<<<
  * 
  * 
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_text);
   __pyx_r = __pyx_v_text;
   goto __pyx_L0;
 
-  /* "neologdn.pyx":102
+  /* "neologdn.pyx":110
  * 
  * 
  * cpdef unicode shorten_repeat(unicode text, int repeat_threshould, int max_repeat_substr_length=8):             # <<<<<<<<<<<<<<
  *     cdef int text_length, i, repeat_length, right_start, right_end, num_repeat_substrs
  *     cdef int upper_repeat_substr_length
  */
 
@@ -5537,26 +5772,34 @@
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_text = 0;
   int __pyx_v_repeat_threshould;
   int __pyx_v_max_repeat_substr_length;
   #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[3] = {0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("shorten_repeat (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_repeat_threshould,&__pyx_n_s_max_repeat_substr_length,0};
-    PyObject* values[3] = {0,0,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
@@ -5564,87 +5807,107 @@
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 102, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 110, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
-        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_repeat_threshould)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 102, __pyx_L3_error)
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_repeat_threshould)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[1]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 110, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("shorten_repeat", 0, 2, 3, 1); __PYX_ERR(0, 102, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("shorten_repeat", 0, 2, 3, 1); __PYX_ERR(0, 110, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_max_repeat_substr_length);
-          if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 102, __pyx_L3_error)
+          if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 110, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "shorten_repeat") < 0)) __PYX_ERR(0, 102, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "shorten_repeat") < 0)) __PYX_ERR(0, 110, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
     __pyx_v_text = ((PyObject*)values[0]);
-    __pyx_v_repeat_threshould = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_repeat_threshould == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 102, __pyx_L3_error)
+    __pyx_v_repeat_threshould = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_repeat_threshould == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 110, __pyx_L3_error)
     if (values[2]) {
-      __pyx_v_max_repeat_substr_length = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_max_repeat_substr_length == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 102, __pyx_L3_error)
+      __pyx_v_max_repeat_substr_length = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_max_repeat_substr_length == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 110, __pyx_L3_error)
     } else {
       __pyx_v_max_repeat_substr_length = ((int)8);
     }
   }
-  goto __pyx_L4_argument_unpacking_done;
+  goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("shorten_repeat", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 102, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("shorten_repeat", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 110, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
   __Pyx_AddTraceback("neologdn.shorten_repeat", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_text), (&PyUnicode_Type), 1, "text", 1))) __PYX_ERR(0, 102, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_text), (&PyUnicode_Type), 1, "text", 1))) __PYX_ERR(0, 110, __pyx_L1_error)
   __pyx_r = __pyx_pf_8neologdn_shorten_repeat(__pyx_self, __pyx_v_text, __pyx_v_repeat_threshould, __pyx_v_max_repeat_substr_length);
 
   /* function exit code */
   goto __pyx_L0;
   __pyx_L1_error:;
   __pyx_r = NULL;
   __pyx_L0:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyObject *__pyx_pf_8neologdn_shorten_repeat(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, int __pyx_v_repeat_threshould, int __pyx_v_max_repeat_substr_length) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   struct __pyx_opt_args_8neologdn_shorten_repeat __pyx_t_2;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("shorten_repeat", 0);
+  __Pyx_RefNannySetupContext("shorten_repeat", 1);
   __Pyx_XDECREF(__pyx_r);
   __pyx_t_2.__pyx_n = 1;
   __pyx_t_2.max_repeat_substr_length = __pyx_v_max_repeat_substr_length;
-  __pyx_t_1 = __pyx_f_8neologdn_shorten_repeat(__pyx_v_text, __pyx_v_repeat_threshould, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 102, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_8neologdn_shorten_repeat(__pyx_v_text, __pyx_v_repeat_threshould, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 110, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -5653,37 +5916,37 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "neologdn.pyx":132
+/* "neologdn.pyx":140
  * 
  * 
  * cpdef unicode normalize(unicode text, int repeat=0, bint remove_space=True,             # <<<<<<<<<<<<<<
  *                         int max_repeat_substr_length=8, unicode tilde='remove'):
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))
  */
 
 static PyObject *__pyx_pw_8neologdn_3normalize(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
 static PyObject *__pyx_f_8neologdn_normalize(PyObject *__pyx_v_text, CYTHON_UNUSED int __pyx_skip_dispatch, struct __pyx_opt_args_8neologdn_normalize *__pyx_optional_args) {
   int __pyx_v_repeat = ((int)0);
   int __pyx_v_remove_space = ((int)1);
   int __pyx_v_max_repeat_substr_length = ((int)8);
   PyObject *__pyx_v_tilde = ((PyObject*)__pyx_n_u_remove);
-  Py_UNICODE *__pyx_v_buf;
-  Py_UNICODE __pyx_v_c;
-  Py_UNICODE __pyx_v_prev;
+  Py_UCS4 *__pyx_v_buf;
+  Py_UCS4 __pyx_v_c;
+  Py_UCS4 __pyx_v_prev;
   int __pyx_v_pos;
   int __pyx_v_lattin_space;
   PyObject *__pyx_v_ret = 0;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   Py_ssize_t __pyx_t_1;
   PyObject *__pyx_t_2 = NULL;
@@ -5696,15 +5959,15 @@
   PyObject *__pyx_t_9 = NULL;
   int __pyx_t_10;
   int __pyx_t_11;
   struct __pyx_opt_args_8neologdn_shorten_repeat __pyx_t_12;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("normalize", 0);
+  __Pyx_RefNannySetupContext("normalize", 1);
   if (__pyx_optional_args) {
     if (__pyx_optional_args->__pyx_n > 0) {
       __pyx_v_repeat = __pyx_optional_args->repeat;
       if (__pyx_optional_args->__pyx_n > 1) {
         __pyx_v_remove_space = __pyx_optional_args->remove_space;
         if (__pyx_optional_args->__pyx_n > 2) {
           __pyx_v_max_repeat_substr_length = __pyx_optional_args->max_repeat_substr_length;
@@ -5712,99 +5975,99 @@
             __pyx_v_tilde = __pyx_optional_args->tilde;
           }
         }
       }
     }
   }
 
-  /* "neologdn.pyx":134
+  /* "neologdn.pyx":142
  * cpdef unicode normalize(unicode text, int repeat=0, bint remove_space=True,
  *                         int max_repeat_substr_length=8, unicode tilde='remove'):
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))             # <<<<<<<<<<<<<<
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))             # <<<<<<<<<<<<<<
  * 
- *     cdef Py_UNICODE c, prev = '\0'
+ *     cdef Py_UCS4 c, prev = '\0'
  */
   if (unlikely(__pyx_v_text == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
-    __PYX_ERR(0, 134, __pyx_L1_error)
+    __PYX_ERR(0, 142, __pyx_L1_error)
   }
-  __pyx_t_1 = __Pyx_PyUnicode_GET_LENGTH(__pyx_v_text); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 134, __pyx_L1_error)
-  __pyx_v_buf = ((Py_UNICODE *)malloc(((sizeof(Py_UNICODE)) * (__pyx_t_1 + 1))));
+  __pyx_t_1 = __Pyx_PyUnicode_GET_LENGTH(__pyx_v_text); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 142, __pyx_L1_error)
+  __pyx_v_buf = ((Py_UCS4 *)malloc(((sizeof(Py_UCS4)) * (__pyx_t_1 + 1))));
 
-  /* "neologdn.pyx":136
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))
+  /* "neologdn.pyx":144
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))
  * 
- *     cdef Py_UNICODE c, prev = '\0'             # <<<<<<<<<<<<<<
+ *     cdef Py_UCS4 c, prev = '\0'             # <<<<<<<<<<<<<<
  *     cdef int pos = 0
  *     cdef bint lattin_space = False
  */
   __pyx_v_prev = 0;
 
-  /* "neologdn.pyx":137
+  /* "neologdn.pyx":145
  * 
- *     cdef Py_UNICODE c, prev = '\0'
+ *     cdef Py_UCS4 c, prev = '\0'
  *     cdef int pos = 0             # <<<<<<<<<<<<<<
  *     cdef bint lattin_space = False
  * 
  */
   __pyx_v_pos = 0;
 
-  /* "neologdn.pyx":138
- *     cdef Py_UNICODE c, prev = '\0'
+  /* "neologdn.pyx":146
+ *     cdef Py_UCS4 c, prev = '\0'
  *     cdef int pos = 0
  *     cdef bint lattin_space = False             # <<<<<<<<<<<<<<
  * 
  *     for c in text:
  */
   __pyx_v_lattin_space = 0;
 
-  /* "neologdn.pyx":140
+  /* "neologdn.pyx":148
  *     cdef bint lattin_space = False
  * 
  *     for c in text:             # <<<<<<<<<<<<<<
  *         if c in SPACE:
  *             c = ' '
  */
   if (unlikely(__pyx_v_text == Py_None)) {
     PyErr_SetString(PyExc_TypeError, "'NoneType' is not iterable");
-    __PYX_ERR(0, 140, __pyx_L1_error)
+    __PYX_ERR(0, 148, __pyx_L1_error)
   }
   __Pyx_INCREF(__pyx_v_text);
   __pyx_t_2 = __pyx_v_text;
-  __pyx_t_6 = __Pyx_init_unicode_iteration(__pyx_t_2, (&__pyx_t_3), (&__pyx_t_4), (&__pyx_t_5)); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 140, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_init_unicode_iteration(__pyx_t_2, (&__pyx_t_3), (&__pyx_t_4), (&__pyx_t_5)); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 148, __pyx_L1_error)
   for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_3; __pyx_t_7++) {
     __pyx_t_1 = __pyx_t_7;
     __pyx_v_c = __Pyx_PyUnicode_READ(__pyx_t_5, __pyx_t_4, __pyx_t_1);
 
-    /* "neologdn.pyx":141
+    /* "neologdn.pyx":149
  * 
  *     for c in text:
  *         if c in SPACE:             # <<<<<<<<<<<<<<
  *             c = ' '
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:
  */
-    __pyx_t_8 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 141, __pyx_L1_error)
+    __pyx_t_8 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 149, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_8);
-    __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_SPACE); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 141, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_SPACE); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 149, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_9);
-    __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_8, __pyx_t_9, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 141, __pyx_L1_error)
+    __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_8, __pyx_t_9, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 149, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
     __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
     if (__pyx_t_10) {
 
-      /* "neologdn.pyx":142
+      /* "neologdn.pyx":150
  *     for c in text:
  *         if c in SPACE:
  *             c = ' '             # <<<<<<<<<<<<<<
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:
  *                 continue
  */
       __pyx_v_c = 32;
 
-      /* "neologdn.pyx":143
+      /* "neologdn.pyx":151
  *         if c in SPACE:
  *             c = ' '
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:             # <<<<<<<<<<<<<<
  *                 continue
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):
  */
       __pyx_t_11 = (__pyx_v_prev == 32);
@@ -5819,33 +6082,33 @@
         goto __pyx_L7_bool_binop_done;
       }
       __pyx_L8_next_and:;
       __pyx_t_10 = __pyx_v_remove_space;
       __pyx_L7_bool_binop_done:;
       if (__pyx_t_10) {
 
-        /* "neologdn.pyx":144
+        /* "neologdn.pyx":152
  *             c = ' '
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:
  *                 continue             # <<<<<<<<<<<<<<
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):
  *                 lattin_space = True
  */
         goto __pyx_L3_continue;
 
-        /* "neologdn.pyx":143
+        /* "neologdn.pyx":151
  *         if c in SPACE:
  *             c = ' '
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:             # <<<<<<<<<<<<<<
  *                 continue
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):
  */
       }
 
-      /* "neologdn.pyx":145
+      /* "neologdn.pyx":153
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:
  *                 continue
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):             # <<<<<<<<<<<<<<
  *                 lattin_space = True
  *                 buf[pos] = c
  */
       __pyx_t_11 = (__pyx_v_prev != 42);
@@ -5861,382 +6124,382 @@
         goto __pyx_L10_bool_binop_done;
       }
       __pyx_t_11 = (__pyx_v_8neologdn_basic_latin.count(__pyx_v_prev) != 0);
       __pyx_t_10 = __pyx_t_11;
       __pyx_L10_bool_binop_done:;
       if (__pyx_t_10) {
 
-        /* "neologdn.pyx":146
+        /* "neologdn.pyx":154
  *                 continue
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):
  *                 lattin_space = True             # <<<<<<<<<<<<<<
  *                 buf[pos] = c
  *             elif remove_space:
  */
         __pyx_v_lattin_space = 1;
 
-        /* "neologdn.pyx":147
+        /* "neologdn.pyx":155
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):
  *                 lattin_space = True
  *                 buf[pos] = c             # <<<<<<<<<<<<<<
  *             elif remove_space:
  *                 pos -= 1
  */
         (__pyx_v_buf[__pyx_v_pos]) = __pyx_v_c;
 
-        /* "neologdn.pyx":145
+        /* "neologdn.pyx":153
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:
  *                 continue
  *             elif prev != '*' and pos > 0 and basic_latin.count(prev):             # <<<<<<<<<<<<<<
  *                 lattin_space = True
  *                 buf[pos] = c
  */
         goto __pyx_L6;
       }
 
-      /* "neologdn.pyx":148
+      /* "neologdn.pyx":156
  *                 lattin_space = True
  *                 buf[pos] = c
  *             elif remove_space:             # <<<<<<<<<<<<<<
  *                 pos -= 1
  *             else:
  */
       if (__pyx_v_remove_space) {
 
-        /* "neologdn.pyx":149
+        /* "neologdn.pyx":157
  *                 buf[pos] = c
  *             elif remove_space:
  *                 pos -= 1             # <<<<<<<<<<<<<<
  *             else:
  *                 buf[pos] = c
  */
         __pyx_v_pos = (__pyx_v_pos - 1);
 
-        /* "neologdn.pyx":148
+        /* "neologdn.pyx":156
  *                 lattin_space = True
  *                 buf[pos] = c
  *             elif remove_space:             # <<<<<<<<<<<<<<
  *                 pos -= 1
  *             else:
  */
         goto __pyx_L6;
       }
 
-      /* "neologdn.pyx":151
+      /* "neologdn.pyx":159
  *                 pos -= 1
  *             else:
  *                 buf[pos] = c             # <<<<<<<<<<<<<<
  *         else:
  *             if c in HIPHENS:
  */
       /*else*/ {
         (__pyx_v_buf[__pyx_v_pos]) = __pyx_v_c;
       }
       __pyx_L6:;
 
-      /* "neologdn.pyx":141
+      /* "neologdn.pyx":149
  * 
  *     for c in text:
  *         if c in SPACE:             # <<<<<<<<<<<<<<
  *             c = ' '
  *             if (prev == ' ' or blocks.count(prev)) and remove_space:
  */
       goto __pyx_L5;
     }
 
-    /* "neologdn.pyx":153
+    /* "neologdn.pyx":161
  *                 buf[pos] = c
  *         else:
  *             if c in HIPHENS:             # <<<<<<<<<<<<<<
  *                 if prev == '-':
  *                     continue
  */
     /*else*/ {
-      __pyx_t_9 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 153, __pyx_L1_error)
+      __pyx_t_9 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 161, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_9);
-      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_HIPHENS); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 153, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_HIPHENS); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 161, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
-      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_9, __pyx_t_8, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 153, __pyx_L1_error)
+      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_9, __pyx_t_8, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 161, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       if (__pyx_t_10) {
 
-        /* "neologdn.pyx":154
+        /* "neologdn.pyx":162
  *         else:
  *             if c in HIPHENS:
  *                 if prev == '-':             # <<<<<<<<<<<<<<
  *                     continue
  *                 else:
  */
         __pyx_t_10 = (__pyx_v_prev == 45);
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":155
+          /* "neologdn.pyx":163
  *             if c in HIPHENS:
  *                 if prev == '-':
  *                     continue             # <<<<<<<<<<<<<<
  *                 else:
  *                     buf[pos] = c = '-'
  */
           goto __pyx_L3_continue;
 
-          /* "neologdn.pyx":154
+          /* "neologdn.pyx":162
  *         else:
  *             if c in HIPHENS:
  *                 if prev == '-':             # <<<<<<<<<<<<<<
  *                     continue
  *                 else:
  */
         }
 
-        /* "neologdn.pyx":157
+        /* "neologdn.pyx":165
  *                     continue
  *                 else:
  *                     buf[pos] = c = '-'             # <<<<<<<<<<<<<<
  *             elif c in CHOONPUS:
  *                 if prev == '':
  */
         /*else*/ {
           (__pyx_v_buf[__pyx_v_pos]) = 45;
           __pyx_v_c = 45;
         }
 
-        /* "neologdn.pyx":153
+        /* "neologdn.pyx":161
  *                 buf[pos] = c
  *         else:
  *             if c in HIPHENS:             # <<<<<<<<<<<<<<
  *                 if prev == '-':
  *                     continue
  */
         goto __pyx_L13;
       }
 
-      /* "neologdn.pyx":158
+      /* "neologdn.pyx":166
  *                 else:
  *                     buf[pos] = c = '-'
  *             elif c in CHOONPUS:             # <<<<<<<<<<<<<<
  *                 if prev == '':
  *                     continue
  */
-      __pyx_t_8 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 158, __pyx_L1_error)
+      __pyx_t_8 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 166, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
-      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_CHOONPUS); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 158, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_CHOONPUS); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 166, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_9);
-      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_8, __pyx_t_9, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 158, __pyx_L1_error)
+      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_8, __pyx_t_9, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 166, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
       if (__pyx_t_10) {
 
-        /* "neologdn.pyx":159
+        /* "neologdn.pyx":167
  *                     buf[pos] = c = '-'
  *             elif c in CHOONPUS:
  *                 if prev == '':             # <<<<<<<<<<<<<<
  *                     continue
  *                 else:
  */
         __pyx_t_10 = (__pyx_v_prev == 0x30FC);
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":160
+          /* "neologdn.pyx":168
  *             elif c in CHOONPUS:
  *                 if prev == '':
  *                     continue             # <<<<<<<<<<<<<<
  *                 else:
  *                     buf[pos] = c = ''
  */
           goto __pyx_L3_continue;
 
-          /* "neologdn.pyx":159
+          /* "neologdn.pyx":167
  *                     buf[pos] = c = '-'
  *             elif c in CHOONPUS:
  *                 if prev == '':             # <<<<<<<<<<<<<<
  *                     continue
  *                 else:
  */
         }
 
-        /* "neologdn.pyx":162
+        /* "neologdn.pyx":170
  *                     continue
  *                 else:
  *                     buf[pos] = c = ''             # <<<<<<<<<<<<<<
  *             elif c in TILDES:
  *                 if tilde == 'ignore':
  */
         /*else*/ {
           (__pyx_v_buf[__pyx_v_pos]) = 0x30FC;
           __pyx_v_c = 0x30FC;
         }
 
-        /* "neologdn.pyx":158
+        /* "neologdn.pyx":166
  *                 else:
  *                     buf[pos] = c = '-'
  *             elif c in CHOONPUS:             # <<<<<<<<<<<<<<
  *                 if prev == '':
  *                     continue
  */
         goto __pyx_L13;
       }
 
-      /* "neologdn.pyx":163
+      /* "neologdn.pyx":171
  *                 else:
  *                     buf[pos] = c = ''
  *             elif c in TILDES:             # <<<<<<<<<<<<<<
  *                 if tilde == 'ignore':
  *                     buf[pos] = c
  */
-      __pyx_t_9 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 163, __pyx_L1_error)
+      __pyx_t_9 = __Pyx_PyUnicode_FromOrdinal(__pyx_v_c); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 171, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_9);
-      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_TILDES); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 163, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_TILDES); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 171, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
-      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_9, __pyx_t_8, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 163, __pyx_L1_error)
+      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_t_9, __pyx_t_8, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 171, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       if (__pyx_t_10) {
 
-        /* "neologdn.pyx":164
+        /* "neologdn.pyx":172
  *                     buf[pos] = c = ''
  *             elif c in TILDES:
  *                 if tilde == 'ignore':             # <<<<<<<<<<<<<<
  *                     buf[pos] = c
  *                 elif tilde == 'normalize':
  */
-        __pyx_t_10 = (__Pyx_PyUnicode_Equals(__pyx_v_tilde, __pyx_n_u_ignore, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 164, __pyx_L1_error)
+        __pyx_t_10 = (__Pyx_PyUnicode_Equals(__pyx_v_tilde, __pyx_n_u_ignore, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 172, __pyx_L1_error)
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":165
+          /* "neologdn.pyx":173
  *             elif c in TILDES:
  *                 if tilde == 'ignore':
  *                     buf[pos] = c             # <<<<<<<<<<<<<<
  *                 elif tilde == 'normalize':
  *                     buf[pos] = c = '~'
  */
           (__pyx_v_buf[__pyx_v_pos]) = __pyx_v_c;
 
-          /* "neologdn.pyx":164
+          /* "neologdn.pyx":172
  *                     buf[pos] = c = ''
  *             elif c in TILDES:
  *                 if tilde == 'ignore':             # <<<<<<<<<<<<<<
  *                     buf[pos] = c
  *                 elif tilde == 'normalize':
  */
           goto __pyx_L16;
         }
 
-        /* "neologdn.pyx":166
+        /* "neologdn.pyx":174
  *                 if tilde == 'ignore':
  *                     buf[pos] = c
  *                 elif tilde == 'normalize':             # <<<<<<<<<<<<<<
  *                     buf[pos] = c = '~'
  *                 elif tilde == 'normalize_zenkaku':
  */
-        __pyx_t_10 = (__Pyx_PyUnicode_Equals(__pyx_v_tilde, __pyx_n_u_normalize, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 166, __pyx_L1_error)
+        __pyx_t_10 = (__Pyx_PyUnicode_Equals(__pyx_v_tilde, __pyx_n_u_normalize, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 174, __pyx_L1_error)
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":167
+          /* "neologdn.pyx":175
  *                     buf[pos] = c
  *                 elif tilde == 'normalize':
  *                     buf[pos] = c = '~'             # <<<<<<<<<<<<<<
  *                 elif tilde == 'normalize_zenkaku':
  *                     buf[pos] = c = ''
  */
           (__pyx_v_buf[__pyx_v_pos]) = 0x7E;
           __pyx_v_c = 0x7E;
 
-          /* "neologdn.pyx":166
+          /* "neologdn.pyx":174
  *                 if tilde == 'ignore':
  *                     buf[pos] = c
  *                 elif tilde == 'normalize':             # <<<<<<<<<<<<<<
  *                     buf[pos] = c = '~'
  *                 elif tilde == 'normalize_zenkaku':
  */
           goto __pyx_L16;
         }
 
-        /* "neologdn.pyx":168
+        /* "neologdn.pyx":176
  *                 elif tilde == 'normalize':
  *                     buf[pos] = c = '~'
  *                 elif tilde == 'normalize_zenkaku':             # <<<<<<<<<<<<<<
  *                     buf[pos] = c = ''
  *                 else:
  */
-        __pyx_t_10 = (__Pyx_PyUnicode_Equals(__pyx_v_tilde, __pyx_n_u_normalize_zenkaku, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 168, __pyx_L1_error)
+        __pyx_t_10 = (__Pyx_PyUnicode_Equals(__pyx_v_tilde, __pyx_n_u_normalize_zenkaku, Py_EQ)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 176, __pyx_L1_error)
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":169
+          /* "neologdn.pyx":177
  *                     buf[pos] = c = '~'
  *                 elif tilde == 'normalize_zenkaku':
  *                     buf[pos] = c = ''             # <<<<<<<<<<<<<<
  *                 else:
  *                     continue
  */
           (__pyx_v_buf[__pyx_v_pos]) = 0x301C;
           __pyx_v_c = 0x301C;
 
-          /* "neologdn.pyx":168
+          /* "neologdn.pyx":176
  *                 elif tilde == 'normalize':
  *                     buf[pos] = c = '~'
  *                 elif tilde == 'normalize_zenkaku':             # <<<<<<<<<<<<<<
  *                     buf[pos] = c = ''
  *                 else:
  */
           goto __pyx_L16;
         }
 
-        /* "neologdn.pyx":171
+        /* "neologdn.pyx":179
  *                     buf[pos] = c = ''
  *                 else:
  *                     continue             # <<<<<<<<<<<<<<
  *             else:
  *                 if conversion_map.count(c):
  */
         /*else*/ {
           goto __pyx_L3_continue;
         }
         __pyx_L16:;
 
-        /* "neologdn.pyx":163
+        /* "neologdn.pyx":171
  *                 else:
  *                     buf[pos] = c = ''
  *             elif c in TILDES:             # <<<<<<<<<<<<<<
  *                 if tilde == 'ignore':
  *                     buf[pos] = c
  */
         goto __pyx_L13;
       }
 
-      /* "neologdn.pyx":173
+      /* "neologdn.pyx":181
  *                     continue
  *             else:
  *                 if conversion_map.count(c):             # <<<<<<<<<<<<<<
  *                     c = conversion_map[c]
  *                 if c == '' and kana_ten_map.count(prev):
  */
       /*else*/ {
         __pyx_t_10 = (__pyx_v_8neologdn_conversion_map.count(__pyx_v_c) != 0);
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":174
+          /* "neologdn.pyx":182
  *             else:
  *                 if conversion_map.count(c):
  *                     c = conversion_map[c]             # <<<<<<<<<<<<<<
  *                 if c == '' and kana_ten_map.count(prev):
  *                     pos -= 1
  */
           __pyx_v_c = (__pyx_v_8neologdn_conversion_map[__pyx_v_c]);
 
-          /* "neologdn.pyx":173
+          /* "neologdn.pyx":181
  *                     continue
  *             else:
  *                 if conversion_map.count(c):             # <<<<<<<<<<<<<<
  *                     c = conversion_map[c]
  *                 if c == '' and kana_ten_map.count(prev):
  */
         }
 
-        /* "neologdn.pyx":175
+        /* "neologdn.pyx":183
  *                 if conversion_map.count(c):
  *                     c = conversion_map[c]
  *                 if c == '' and kana_ten_map.count(prev):             # <<<<<<<<<<<<<<
  *                     pos -= 1
  *                     c = kana_ten_map[prev]
  */
         __pyx_t_11 = (__pyx_v_c == 0xFF9E);
@@ -6246,43 +6509,43 @@
           goto __pyx_L19_bool_binop_done;
         }
         __pyx_t_11 = (__pyx_v_8neologdn_kana_ten_map.count(__pyx_v_prev) != 0);
         __pyx_t_10 = __pyx_t_11;
         __pyx_L19_bool_binop_done:;
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":176
+          /* "neologdn.pyx":184
  *                     c = conversion_map[c]
  *                 if c == '' and kana_ten_map.count(prev):
  *                     pos -= 1             # <<<<<<<<<<<<<<
  *                     c = kana_ten_map[prev]
  *                 elif c == '' and kana_maru_map.count(prev):
  */
           __pyx_v_pos = (__pyx_v_pos - 1);
 
-          /* "neologdn.pyx":177
+          /* "neologdn.pyx":185
  *                 if c == '' and kana_ten_map.count(prev):
  *                     pos -= 1
  *                     c = kana_ten_map[prev]             # <<<<<<<<<<<<<<
  *                 elif c == '' and kana_maru_map.count(prev):
  *                     pos -= 1
  */
           __pyx_v_c = (__pyx_v_8neologdn_kana_ten_map[__pyx_v_prev]);
 
-          /* "neologdn.pyx":175
+          /* "neologdn.pyx":183
  *                 if conversion_map.count(c):
  *                     c = conversion_map[c]
  *                 if c == '' and kana_ten_map.count(prev):             # <<<<<<<<<<<<<<
  *                     pos -= 1
  *                     c = kana_ten_map[prev]
  */
           goto __pyx_L18;
         }
 
-        /* "neologdn.pyx":178
+        /* "neologdn.pyx":186
  *                     pos -= 1
  *                     c = kana_ten_map[prev]
  *                 elif c == '' and kana_maru_map.count(prev):             # <<<<<<<<<<<<<<
  *                     pos -= 1
  *                     c = kana_maru_map[prev]
  */
         __pyx_t_11 = (__pyx_v_c == 0xFF9F);
@@ -6292,43 +6555,43 @@
           goto __pyx_L21_bool_binop_done;
         }
         __pyx_t_11 = (__pyx_v_8neologdn_kana_maru_map.count(__pyx_v_prev) != 0);
         __pyx_t_10 = __pyx_t_11;
         __pyx_L21_bool_binop_done:;
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":179
+          /* "neologdn.pyx":187
  *                     c = kana_ten_map[prev]
  *                 elif c == '' and kana_maru_map.count(prev):
  *                     pos -= 1             # <<<<<<<<<<<<<<
  *                     c = kana_maru_map[prev]
  *                 if lattin_space and blocks.count(c) and remove_space:
  */
           __pyx_v_pos = (__pyx_v_pos - 1);
 
-          /* "neologdn.pyx":180
+          /* "neologdn.pyx":188
  *                 elif c == '' and kana_maru_map.count(prev):
  *                     pos -= 1
  *                     c = kana_maru_map[prev]             # <<<<<<<<<<<<<<
  *                 if lattin_space and blocks.count(c) and remove_space:
  *                     pos -= 1
  */
           __pyx_v_c = (__pyx_v_8neologdn_kana_maru_map[__pyx_v_prev]);
 
-          /* "neologdn.pyx":178
+          /* "neologdn.pyx":186
  *                     pos -= 1
  *                     c = kana_ten_map[prev]
  *                 elif c == '' and kana_maru_map.count(prev):             # <<<<<<<<<<<<<<
  *                     pos -= 1
  *                     c = kana_maru_map[prev]
  */
         }
         __pyx_L18:;
 
-        /* "neologdn.pyx":181
+        /* "neologdn.pyx":189
  *                     pos -= 1
  *                     c = kana_maru_map[prev]
  *                 if lattin_space and blocks.count(c) and remove_space:             # <<<<<<<<<<<<<<
  *                     pos -= 1
  *                 lattin_space = False
  */
         if (__pyx_v_lattin_space) {
@@ -6342,184 +6605,184 @@
           __pyx_t_10 = __pyx_t_11;
           goto __pyx_L24_bool_binop_done;
         }
         __pyx_t_10 = __pyx_v_remove_space;
         __pyx_L24_bool_binop_done:;
         if (__pyx_t_10) {
 
-          /* "neologdn.pyx":182
+          /* "neologdn.pyx":190
  *                     c = kana_maru_map[prev]
  *                 if lattin_space and blocks.count(c) and remove_space:
  *                     pos -= 1             # <<<<<<<<<<<<<<
  *                 lattin_space = False
  *                 buf[pos] = c
  */
           __pyx_v_pos = (__pyx_v_pos - 1);
 
-          /* "neologdn.pyx":181
+          /* "neologdn.pyx":189
  *                     pos -= 1
  *                     c = kana_maru_map[prev]
  *                 if lattin_space and blocks.count(c) and remove_space:             # <<<<<<<<<<<<<<
  *                     pos -= 1
  *                 lattin_space = False
  */
         }
 
-        /* "neologdn.pyx":183
+        /* "neologdn.pyx":191
  *                 if lattin_space and blocks.count(c) and remove_space:
  *                     pos -= 1
  *                 lattin_space = False             # <<<<<<<<<<<<<<
  *                 buf[pos] = c
  *         prev = c
  */
         __pyx_v_lattin_space = 0;
 
-        /* "neologdn.pyx":184
+        /* "neologdn.pyx":192
  *                     pos -= 1
  *                 lattin_space = False
  *                 buf[pos] = c             # <<<<<<<<<<<<<<
  *         prev = c
  *         pos += 1
  */
         (__pyx_v_buf[__pyx_v_pos]) = __pyx_v_c;
       }
       __pyx_L13:;
     }
     __pyx_L5:;
 
-    /* "neologdn.pyx":185
+    /* "neologdn.pyx":193
  *                 lattin_space = False
  *                 buf[pos] = c
  *         prev = c             # <<<<<<<<<<<<<<
  *         pos += 1
  * 
  */
     __pyx_v_prev = __pyx_v_c;
 
-    /* "neologdn.pyx":186
+    /* "neologdn.pyx":194
  *                 buf[pos] = c
  *         prev = c
  *         pos += 1             # <<<<<<<<<<<<<<
  * 
  *     if buf[pos-1] == ' ':
  */
     __pyx_v_pos = (__pyx_v_pos + 1);
     __pyx_L3_continue:;
   }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "neologdn.pyx":188
+  /* "neologdn.pyx":196
  *         pos += 1
  * 
  *     if buf[pos-1] == ' ':             # <<<<<<<<<<<<<<
  *         pos -= 1
  *     buf[pos] = '\0'
  */
   __pyx_t_10 = ((__pyx_v_buf[(__pyx_v_pos - 1)]) == 32);
   if (__pyx_t_10) {
 
-    /* "neologdn.pyx":189
+    /* "neologdn.pyx":197
  * 
  *     if buf[pos-1] == ' ':
  *         pos -= 1             # <<<<<<<<<<<<<<
  *     buf[pos] = '\0'
  * 
  */
     __pyx_v_pos = (__pyx_v_pos - 1);
 
-    /* "neologdn.pyx":188
+    /* "neologdn.pyx":196
  *         pos += 1
  * 
  *     if buf[pos-1] == ' ':             # <<<<<<<<<<<<<<
  *         pos -= 1
  *     buf[pos] = '\0'
  */
   }
 
-  /* "neologdn.pyx":190
+  /* "neologdn.pyx":198
  *     if buf[pos-1] == ' ':
  *         pos -= 1
  *     buf[pos] = '\0'             # <<<<<<<<<<<<<<
  * 
- *     cdef unicode ret = buf
+ *     cdef unicode ret = py_ucs4_to_unicode(buf, pos)
  */
   (__pyx_v_buf[__pyx_v_pos]) = 0;
 
-  /* "neologdn.pyx":192
+  /* "neologdn.pyx":200
  *     buf[pos] = '\0'
  * 
- *     cdef unicode ret = buf             # <<<<<<<<<<<<<<
+ *     cdef unicode ret = py_ucs4_to_unicode(buf, pos)             # <<<<<<<<<<<<<<
  *     free(buf)
  * 
  */
-  __pyx_t_8 = __Pyx_PyUnicode_FromUnicode(__pyx_v_buf); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 192, __pyx_L1_error)
+  __pyx_t_8 = __pyx_f_8neologdn_py_ucs4_to_unicode(__pyx_v_buf, __pyx_v_pos); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 200, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_8);
-  if (!(likely(PyUnicode_CheckExact(__pyx_t_8)) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_8))) __PYX_ERR(0, 192, __pyx_L1_error)
+  if (!(likely(PyUnicode_CheckExact(__pyx_t_8))||((__pyx_t_8) == Py_None) || __Pyx_RaiseUnexpectedTypeError("unicode", __pyx_t_8))) __PYX_ERR(0, 200, __pyx_L1_error)
   __pyx_v_ret = ((PyObject*)__pyx_t_8);
   __pyx_t_8 = 0;
 
-  /* "neologdn.pyx":193
+  /* "neologdn.pyx":201
  * 
- *     cdef unicode ret = buf
+ *     cdef unicode ret = py_ucs4_to_unicode(buf, pos)
  *     free(buf)             # <<<<<<<<<<<<<<
  * 
  *     if repeat:
  */
   free(__pyx_v_buf);
 
-  /* "neologdn.pyx":195
+  /* "neologdn.pyx":203
  *     free(buf)
  * 
  *     if repeat:             # <<<<<<<<<<<<<<
  *         return shorten_repeat(ret, repeat, max_repeat_substr_length)
  *     return ret
  */
   __pyx_t_10 = (__pyx_v_repeat != 0);
   if (__pyx_t_10) {
 
-    /* "neologdn.pyx":196
+    /* "neologdn.pyx":204
  * 
  *     if repeat:
  *         return shorten_repeat(ret, repeat, max_repeat_substr_length)             # <<<<<<<<<<<<<<
  *     return ret
  */
     __Pyx_XDECREF(__pyx_r);
     __pyx_t_12.__pyx_n = 1;
     __pyx_t_12.max_repeat_substr_length = __pyx_v_max_repeat_substr_length;
-    __pyx_t_8 = __pyx_f_8neologdn_shorten_repeat(__pyx_v_ret, __pyx_v_repeat, 0, &__pyx_t_12); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 196, __pyx_L1_error)
+    __pyx_t_8 = __pyx_f_8neologdn_shorten_repeat(__pyx_v_ret, __pyx_v_repeat, 0, &__pyx_t_12); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 204, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_8);
     __pyx_r = ((PyObject*)__pyx_t_8);
     __pyx_t_8 = 0;
     goto __pyx_L0;
 
-    /* "neologdn.pyx":195
+    /* "neologdn.pyx":203
  *     free(buf)
  * 
  *     if repeat:             # <<<<<<<<<<<<<<
  *         return shorten_repeat(ret, repeat, max_repeat_substr_length)
  *     return ret
  */
   }
 
-  /* "neologdn.pyx":197
+  /* "neologdn.pyx":205
  *     if repeat:
  *         return shorten_repeat(ret, repeat, max_repeat_substr_length)
  *     return ret             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_ret);
   __pyx_r = __pyx_v_ret;
   goto __pyx_L0;
 
-  /* "neologdn.pyx":132
+  /* "neologdn.pyx":140
  * 
  * 
  * cpdef unicode normalize(unicode text, int repeat=0, bint remove_space=True,             # <<<<<<<<<<<<<<
  *                         int max_repeat_substr_length=8, unicode tilde='remove'):
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_XDECREF(__pyx_t_9);
@@ -6550,27 +6813,35 @@
 ) {
   PyObject *__pyx_v_text = 0;
   int __pyx_v_repeat;
   int __pyx_v_remove_space;
   int __pyx_v_max_repeat_substr_length;
   PyObject *__pyx_v_tilde = 0;
   #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  CYTHON_UNUSED Py_ssize_t __pyx_nargs;
   #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues;
+  PyObject* values[5] = {0,0,0,0,0};
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("normalize (wrapper)", 0);
+  #if !CYTHON_METH_FASTCALL
+  #if CYTHON_ASSUME_SAFE_MACROS
+  __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #else
+  __pyx_nargs = PyTuple_Size(__pyx_args); if (unlikely(__pyx_nargs < 0)) return NULL;
+  #endif
+  #endif
+  __pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_repeat,&__pyx_n_s_remove_space,&__pyx_n_s_max_repeat_substr_length,&__pyx_n_s_tilde,0};
-    PyObject* values[5] = {0,0,0,0,0};
-    values[4] = ((PyObject*)__pyx_n_u_remove);
+    values[4] = __Pyx_Arg_NewRef_FASTCALL(((PyObject*)__pyx_n_u_remove));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
         CYTHON_FALLTHROUGH;
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
@@ -6582,49 +6853,52 @@
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) {
+          (void)__Pyx_Arg_NewRef_FASTCALL(values[0]);
+          kw_args--;
+        }
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_repeat);
-          if (value) { values[1] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+          if (value) { values[1] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_remove_space);
-          if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+          if (value) { values[2] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_max_repeat_substr_length);
-          if (value) { values[3] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+          if (value) { values[3] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  4:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_tilde);
-          if (value) { values[4] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+          if (value) { values[4] = __Pyx_Arg_NewRef_FASTCALL(value); kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "normalize") < 0)) __PYX_ERR(0, 132, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "normalize") < 0)) __PYX_ERR(0, 140, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
         CYTHON_FALLTHROUGH;
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
@@ -6635,67 +6909,81 @@
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
     __pyx_v_text = ((PyObject*)values[0]);
     if (values[1]) {
-      __pyx_v_repeat = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_repeat == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+      __pyx_v_repeat = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_repeat == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
     } else {
       __pyx_v_repeat = ((int)0);
     }
     if (values[2]) {
-      __pyx_v_remove_space = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_remove_space == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+      __pyx_v_remove_space = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_remove_space == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 140, __pyx_L3_error)
     } else {
       __pyx_v_remove_space = ((int)1);
     }
     if (values[3]) {
-      __pyx_v_max_repeat_substr_length = __Pyx_PyInt_As_int(values[3]); if (unlikely((__pyx_v_max_repeat_substr_length == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 133, __pyx_L3_error)
+      __pyx_v_max_repeat_substr_length = __Pyx_PyInt_As_int(values[3]); if (unlikely((__pyx_v_max_repeat_substr_length == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 141, __pyx_L3_error)
     } else {
       __pyx_v_max_repeat_substr_length = ((int)8);
     }
     __pyx_v_tilde = ((PyObject*)values[4]);
   }
-  goto __pyx_L4_argument_unpacking_done;
+  goto __pyx_L6_skip;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("normalize", 0, 1, 5, __pyx_nargs); __PYX_ERR(0, 132, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("normalize", 0, 1, 5, __pyx_nargs); __PYX_ERR(0, 140, __pyx_L3_error)
+  __pyx_L6_skip:;
+  goto __pyx_L4_argument_unpacking_done;
   __pyx_L3_error:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
   __Pyx_AddTraceback("neologdn.normalize", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_text), (&PyUnicode_Type), 1, "text", 1))) __PYX_ERR(0, 132, __pyx_L1_error)
-  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_tilde), (&PyUnicode_Type), 1, "tilde", 1))) __PYX_ERR(0, 133, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_text), (&PyUnicode_Type), 1, "text", 1))) __PYX_ERR(0, 140, __pyx_L1_error)
+  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_tilde), (&PyUnicode_Type), 1, "tilde", 1))) __PYX_ERR(0, 141, __pyx_L1_error)
   __pyx_r = __pyx_pf_8neologdn_2normalize(__pyx_self, __pyx_v_text, __pyx_v_repeat, __pyx_v_remove_space, __pyx_v_max_repeat_substr_length, __pyx_v_tilde);
 
   /* function exit code */
   goto __pyx_L0;
   __pyx_L1_error:;
   __pyx_r = NULL;
   __pyx_L0:;
+  {
+    Py_ssize_t __pyx_temp;
+    for (__pyx_temp=0; __pyx_temp < (Py_ssize_t)(sizeof(values)/sizeof(values[0])); ++__pyx_temp) {
+      __Pyx_Arg_XDECREF_FASTCALL(values[__pyx_temp]);
+    }
+  }
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyObject *__pyx_pf_8neologdn_2normalize(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, int __pyx_v_repeat, int __pyx_v_remove_space, int __pyx_v_max_repeat_substr_length, PyObject *__pyx_v_tilde) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   struct __pyx_opt_args_8neologdn_normalize __pyx_t_2;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("normalize", 0);
+  __Pyx_RefNannySetupContext("normalize", 1);
   __Pyx_XDECREF(__pyx_r);
   __pyx_t_2.__pyx_n = 4;
   __pyx_t_2.repeat = __pyx_v_repeat;
   __pyx_t_2.remove_space = __pyx_v_remove_space;
   __pyx_t_2.max_repeat_substr_length = __pyx_v_max_repeat_substr_length;
   __pyx_t_2.tilde = __pyx_v_tilde;
-  __pyx_t_1 = __pyx_f_8neologdn_normalize(__pyx_v_text, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_t_1 = __pyx_f_8neologdn_normalize(__pyx_v_text, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 140, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
   /* function exit code */
   __pyx_L1_error:;
@@ -6723,15 +7011,15 @@
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_n_s_, __pyx_k_, sizeof(__pyx_k_), 0, 0, 1, 1},
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
     {&__pyx_kp_u_0, __pyx_k_0, sizeof(__pyx_k_0), 0, 1, 0, 0},
-    {&__pyx_kp_u_0_5_2, __pyx_k_0_5_2, sizeof(__pyx_k_0_5_2), 0, 1, 0, 0},
+    {&__pyx_kp_u_0_5_3, __pyx_k_0_5_3, sizeof(__pyx_k_0_5_3), 0, 1, 0, 0},
     {&__pyx_kp_u_1, __pyx_k_1, sizeof(__pyx_k_1), 0, 1, 0, 0},
     {&__pyx_kp_u_2, __pyx_k_2, sizeof(__pyx_k_2), 0, 1, 0, 0},
     {&__pyx_kp_u_3, __pyx_k_3, sizeof(__pyx_k_3), 0, 1, 0, 0},
     {&__pyx_kp_u_4, __pyx_k_4, sizeof(__pyx_k_4), 0, 1, 0, 0},
     {&__pyx_kp_u_5, __pyx_k_5, sizeof(__pyx_k_5), 0, 1, 0, 0},
     {&__pyx_kp_u_6, __pyx_k_6, sizeof(__pyx_k_6), 0, 1, 0, 0},
     {&__pyx_kp_u_7, __pyx_k_7, sizeof(__pyx_k_7), 0, 1, 0, 0},
@@ -7147,1144 +7435,1144 @@
     {&__pyx_n_u_z, __pyx_k_z, sizeof(__pyx_k_z), 0, 1, 0, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 87, __pyx_L1_error)
-  __pyx_builtin_map = __Pyx_GetBuiltinName(__pyx_n_s_map); if (!__pyx_builtin_map) __PYX_ERR(0, 93, __pyx_L1_error)
-  __pyx_builtin_chr = __Pyx_GetBuiltinName(__pyx_n_s_chr); if (!__pyx_builtin_chr) __PYX_ERR(0, 93, __pyx_L1_error)
+  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 94, __pyx_L1_error)
+  __pyx_builtin_map = __Pyx_GetBuiltinName(__pyx_n_s_map); if (!__pyx_builtin_map) __PYX_ERR(0, 100, __pyx_L1_error)
+  __pyx_builtin_chr = __Pyx_GetBuiltinName(__pyx_n_s_chr); if (!__pyx_builtin_chr) __PYX_ERR(0, 100, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "neologdn.pyx":12
+  /* "neologdn.pyx":11
  * from libcpp.unordered_set cimport unordered_set
  * 
- * VERSION = (0, 5, 2)             # <<<<<<<<<<<<<<
- * __version__ = '0.5.2'
+ * VERSION = (0, 5, 3)             # <<<<<<<<<<<<<<
+ * __version__ = '0.5.3'
  * 
  */
-  __pyx_tuple__3 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_5, __pyx_int_2); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __pyx_tuple__3 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_5, __pyx_int_3); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__3);
   __Pyx_GIVEREF(__pyx_tuple__3);
 
-  /* "neologdn.pyx":16
+  /* "neologdn.pyx":23
  * 
  * ASCII = (
  *     ('', 'a'), ('', 'b'), ('', 'c'), ('', 'd'), ('', 'e'),             # <<<<<<<<<<<<<<
  *     ('', 'f'), ('', 'g'), ('', 'h'), ('', 'i'), ('', 'j'),
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),
  */
-  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_u__4, __pyx_n_u_a); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_u__4, __pyx_n_u_a); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
-  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_n_u__6, __pyx_n_u_b); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_n_u__6, __pyx_n_u_b); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__7);
   __Pyx_GIVEREF(__pyx_tuple__7);
-  __pyx_tuple__9 = PyTuple_Pack(2, __pyx_n_u__8, __pyx_n_u_c); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_tuple__9 = PyTuple_Pack(2, __pyx_n_u__8, __pyx_n_u_c); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__9);
   __Pyx_GIVEREF(__pyx_tuple__9);
-  __pyx_tuple__11 = PyTuple_Pack(2, __pyx_n_u__10, __pyx_n_u_d); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_tuple__11 = PyTuple_Pack(2, __pyx_n_u__10, __pyx_n_u_d); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__11);
   __Pyx_GIVEREF(__pyx_tuple__11);
-  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_n_u__12, __pyx_n_u_e); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_n_u__12, __pyx_n_u_e); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__13);
   __Pyx_GIVEREF(__pyx_tuple__13);
 
-  /* "neologdn.pyx":17
+  /* "neologdn.pyx":24
  * ASCII = (
  *     ('', 'a'), ('', 'b'), ('', 'c'), ('', 'd'), ('', 'e'),
  *     ('', 'f'), ('', 'g'), ('', 'h'), ('', 'i'), ('', 'j'),             # <<<<<<<<<<<<<<
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),
  *     ('', 'p'), ('', 'q'), ('', 'r'), ('', 's'), ('', 't'),
  */
-  __pyx_tuple__15 = PyTuple_Pack(2, __pyx_n_u__14, __pyx_n_u_f); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_tuple__15 = PyTuple_Pack(2, __pyx_n_u__14, __pyx_n_u_f); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 24, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__15);
   __Pyx_GIVEREF(__pyx_tuple__15);
-  __pyx_tuple__17 = PyTuple_Pack(2, __pyx_n_u__16, __pyx_n_u_g); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_tuple__17 = PyTuple_Pack(2, __pyx_n_u__16, __pyx_n_u_g); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 24, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__17);
   __Pyx_GIVEREF(__pyx_tuple__17);
-  __pyx_tuple__19 = PyTuple_Pack(2, __pyx_n_u__18, __pyx_n_u_h); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_tuple__19 = PyTuple_Pack(2, __pyx_n_u__18, __pyx_n_u_h); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 24, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__19);
   __Pyx_GIVEREF(__pyx_tuple__19);
-  __pyx_tuple__21 = PyTuple_Pack(2, __pyx_n_u__20, __pyx_n_u_i); if (unlikely(!__pyx_tuple__21)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_tuple__21 = PyTuple_Pack(2, __pyx_n_u__20, __pyx_n_u_i); if (unlikely(!__pyx_tuple__21)) __PYX_ERR(0, 24, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__21);
   __Pyx_GIVEREF(__pyx_tuple__21);
-  __pyx_tuple__23 = PyTuple_Pack(2, __pyx_n_u__22, __pyx_n_u_j); if (unlikely(!__pyx_tuple__23)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_tuple__23 = PyTuple_Pack(2, __pyx_n_u__22, __pyx_n_u_j); if (unlikely(!__pyx_tuple__23)) __PYX_ERR(0, 24, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__23);
   __Pyx_GIVEREF(__pyx_tuple__23);
 
-  /* "neologdn.pyx":18
+  /* "neologdn.pyx":25
  *     ('', 'a'), ('', 'b'), ('', 'c'), ('', 'd'), ('', 'e'),
  *     ('', 'f'), ('', 'g'), ('', 'h'), ('', 'i'), ('', 'j'),
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),             # <<<<<<<<<<<<<<
  *     ('', 'p'), ('', 'q'), ('', 'r'), ('', 's'), ('', 't'),
  *     ('', 'u'), ('', 'v'), ('', 'w'), ('', 'x'), ('', 'y'),
  */
-  __pyx_tuple__25 = PyTuple_Pack(2, __pyx_n_u__24, __pyx_n_u_k); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __pyx_tuple__25 = PyTuple_Pack(2, __pyx_n_u__24, __pyx_n_u_k); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__25);
   __Pyx_GIVEREF(__pyx_tuple__25);
-  __pyx_tuple__27 = PyTuple_Pack(2, __pyx_n_u__26, __pyx_n_u_l); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __pyx_tuple__27 = PyTuple_Pack(2, __pyx_n_u__26, __pyx_n_u_l); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__27);
   __Pyx_GIVEREF(__pyx_tuple__27);
-  __pyx_tuple__29 = PyTuple_Pack(2, __pyx_n_u__28, __pyx_n_u_m); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __pyx_tuple__29 = PyTuple_Pack(2, __pyx_n_u__28, __pyx_n_u_m); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__29);
   __Pyx_GIVEREF(__pyx_tuple__29);
-  __pyx_tuple__31 = PyTuple_Pack(2, __pyx_n_u__30, __pyx_n_u_n); if (unlikely(!__pyx_tuple__31)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __pyx_tuple__31 = PyTuple_Pack(2, __pyx_n_u__30, __pyx_n_u_n); if (unlikely(!__pyx_tuple__31)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__31);
   __Pyx_GIVEREF(__pyx_tuple__31);
-  __pyx_tuple__33 = PyTuple_Pack(2, __pyx_n_u__32, __pyx_n_u_o); if (unlikely(!__pyx_tuple__33)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __pyx_tuple__33 = PyTuple_Pack(2, __pyx_n_u__32, __pyx_n_u_o); if (unlikely(!__pyx_tuple__33)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__33);
   __Pyx_GIVEREF(__pyx_tuple__33);
 
-  /* "neologdn.pyx":19
+  /* "neologdn.pyx":26
  *     ('', 'f'), ('', 'g'), ('', 'h'), ('', 'i'), ('', 'j'),
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),
  *     ('', 'p'), ('', 'q'), ('', 'r'), ('', 's'), ('', 't'),             # <<<<<<<<<<<<<<
  *     ('', 'u'), ('', 'v'), ('', 'w'), ('', 'x'), ('', 'y'),
  *     ('', 'z'),
  */
-  __pyx_tuple__35 = PyTuple_Pack(2, __pyx_n_u__34, __pyx_n_u_p); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_tuple__35 = PyTuple_Pack(2, __pyx_n_u__34, __pyx_n_u_p); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__35);
   __Pyx_GIVEREF(__pyx_tuple__35);
-  __pyx_tuple__37 = PyTuple_Pack(2, __pyx_n_u__36, __pyx_n_u_q); if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_tuple__37 = PyTuple_Pack(2, __pyx_n_u__36, __pyx_n_u_q); if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__37);
   __Pyx_GIVEREF(__pyx_tuple__37);
-  __pyx_tuple__39 = PyTuple_Pack(2, __pyx_n_u__38, __pyx_n_u_r); if (unlikely(!__pyx_tuple__39)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_tuple__39 = PyTuple_Pack(2, __pyx_n_u__38, __pyx_n_u_r); if (unlikely(!__pyx_tuple__39)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__39);
   __Pyx_GIVEREF(__pyx_tuple__39);
-  __pyx_tuple__41 = PyTuple_Pack(2, __pyx_n_u__40, __pyx_n_u_s); if (unlikely(!__pyx_tuple__41)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_tuple__41 = PyTuple_Pack(2, __pyx_n_u__40, __pyx_n_u_s); if (unlikely(!__pyx_tuple__41)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__41);
   __Pyx_GIVEREF(__pyx_tuple__41);
-  __pyx_tuple__43 = PyTuple_Pack(2, __pyx_n_u__42, __pyx_n_u_t); if (unlikely(!__pyx_tuple__43)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_tuple__43 = PyTuple_Pack(2, __pyx_n_u__42, __pyx_n_u_t); if (unlikely(!__pyx_tuple__43)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__43);
   __Pyx_GIVEREF(__pyx_tuple__43);
 
-  /* "neologdn.pyx":20
+  /* "neologdn.pyx":27
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),
  *     ('', 'p'), ('', 'q'), ('', 'r'), ('', 's'), ('', 't'),
  *     ('', 'u'), ('', 'v'), ('', 'w'), ('', 'x'), ('', 'y'),             # <<<<<<<<<<<<<<
  *     ('', 'z'),
  *     ('', 'A'), ('', 'B'), ('', 'C'), ('', 'D'), ('', 'E'),
  */
-  __pyx_tuple__45 = PyTuple_Pack(2, __pyx_n_u__44, __pyx_n_u_u); if (unlikely(!__pyx_tuple__45)) __PYX_ERR(0, 20, __pyx_L1_error)
+  __pyx_tuple__45 = PyTuple_Pack(2, __pyx_n_u__44, __pyx_n_u_u); if (unlikely(!__pyx_tuple__45)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__45);
   __Pyx_GIVEREF(__pyx_tuple__45);
-  __pyx_tuple__47 = PyTuple_Pack(2, __pyx_n_u__46, __pyx_n_u_v); if (unlikely(!__pyx_tuple__47)) __PYX_ERR(0, 20, __pyx_L1_error)
+  __pyx_tuple__47 = PyTuple_Pack(2, __pyx_n_u__46, __pyx_n_u_v); if (unlikely(!__pyx_tuple__47)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__47);
   __Pyx_GIVEREF(__pyx_tuple__47);
-  __pyx_tuple__49 = PyTuple_Pack(2, __pyx_n_u__48, __pyx_n_u_w); if (unlikely(!__pyx_tuple__49)) __PYX_ERR(0, 20, __pyx_L1_error)
+  __pyx_tuple__49 = PyTuple_Pack(2, __pyx_n_u__48, __pyx_n_u_w); if (unlikely(!__pyx_tuple__49)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__49);
   __Pyx_GIVEREF(__pyx_tuple__49);
-  __pyx_tuple__51 = PyTuple_Pack(2, __pyx_n_u__50, __pyx_n_u_x); if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 20, __pyx_L1_error)
+  __pyx_tuple__51 = PyTuple_Pack(2, __pyx_n_u__50, __pyx_n_u_x); if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__51);
   __Pyx_GIVEREF(__pyx_tuple__51);
-  __pyx_tuple__53 = PyTuple_Pack(2, __pyx_n_u__52, __pyx_n_u_y); if (unlikely(!__pyx_tuple__53)) __PYX_ERR(0, 20, __pyx_L1_error)
+  __pyx_tuple__53 = PyTuple_Pack(2, __pyx_n_u__52, __pyx_n_u_y); if (unlikely(!__pyx_tuple__53)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__53);
   __Pyx_GIVEREF(__pyx_tuple__53);
 
-  /* "neologdn.pyx":21
+  /* "neologdn.pyx":28
  *     ('', 'p'), ('', 'q'), ('', 'r'), ('', 's'), ('', 't'),
  *     ('', 'u'), ('', 'v'), ('', 'w'), ('', 'x'), ('', 'y'),
  *     ('', 'z'),             # <<<<<<<<<<<<<<
  *     ('', 'A'), ('', 'B'), ('', 'C'), ('', 'D'), ('', 'E'),
  *     ('', 'F'), ('', 'G'), ('', 'H'), ('', 'I'), ('', 'J'),
  */
-  __pyx_tuple__55 = PyTuple_Pack(2, __pyx_n_u__54, __pyx_n_u_z); if (unlikely(!__pyx_tuple__55)) __PYX_ERR(0, 21, __pyx_L1_error)
+  __pyx_tuple__55 = PyTuple_Pack(2, __pyx_n_u__54, __pyx_n_u_z); if (unlikely(!__pyx_tuple__55)) __PYX_ERR(0, 28, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__55);
   __Pyx_GIVEREF(__pyx_tuple__55);
 
-  /* "neologdn.pyx":22
+  /* "neologdn.pyx":29
  *     ('', 'u'), ('', 'v'), ('', 'w'), ('', 'x'), ('', 'y'),
  *     ('', 'z'),
  *     ('', 'A'), ('', 'B'), ('', 'C'), ('', 'D'), ('', 'E'),             # <<<<<<<<<<<<<<
  *     ('', 'F'), ('', 'G'), ('', 'H'), ('', 'I'), ('', 'J'),
  *     ('', 'K'), ('', 'L'), ('', 'M'), ('', 'N'), ('', 'O'),
  */
-  __pyx_tuple__57 = PyTuple_Pack(2, __pyx_n_u__56, __pyx_n_u_A); if (unlikely(!__pyx_tuple__57)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_tuple__57 = PyTuple_Pack(2, __pyx_n_u__56, __pyx_n_u_A); if (unlikely(!__pyx_tuple__57)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__57);
   __Pyx_GIVEREF(__pyx_tuple__57);
-  __pyx_tuple__59 = PyTuple_Pack(2, __pyx_n_u__58, __pyx_n_u_B); if (unlikely(!__pyx_tuple__59)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_tuple__59 = PyTuple_Pack(2, __pyx_n_u__58, __pyx_n_u_B); if (unlikely(!__pyx_tuple__59)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__59);
   __Pyx_GIVEREF(__pyx_tuple__59);
-  __pyx_tuple__61 = PyTuple_Pack(2, __pyx_n_u__60, __pyx_n_u_C); if (unlikely(!__pyx_tuple__61)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_tuple__61 = PyTuple_Pack(2, __pyx_n_u__60, __pyx_n_u_C); if (unlikely(!__pyx_tuple__61)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__61);
   __Pyx_GIVEREF(__pyx_tuple__61);
-  __pyx_tuple__63 = PyTuple_Pack(2, __pyx_n_u__62, __pyx_n_u_D); if (unlikely(!__pyx_tuple__63)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_tuple__63 = PyTuple_Pack(2, __pyx_n_u__62, __pyx_n_u_D); if (unlikely(!__pyx_tuple__63)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__63);
   __Pyx_GIVEREF(__pyx_tuple__63);
-  __pyx_tuple__65 = PyTuple_Pack(2, __pyx_n_u__64, __pyx_n_u_E); if (unlikely(!__pyx_tuple__65)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_tuple__65 = PyTuple_Pack(2, __pyx_n_u__64, __pyx_n_u_E); if (unlikely(!__pyx_tuple__65)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__65);
   __Pyx_GIVEREF(__pyx_tuple__65);
 
-  /* "neologdn.pyx":23
+  /* "neologdn.pyx":30
  *     ('', 'z'),
  *     ('', 'A'), ('', 'B'), ('', 'C'), ('', 'D'), ('', 'E'),
  *     ('', 'F'), ('', 'G'), ('', 'H'), ('', 'I'), ('', 'J'),             # <<<<<<<<<<<<<<
  *     ('', 'K'), ('', 'L'), ('', 'M'), ('', 'N'), ('', 'O'),
  *     ('', 'P'), ('', 'Q'), ('', 'R'), ('', 'S'), ('', 'T'),
  */
-  __pyx_tuple__67 = PyTuple_Pack(2, __pyx_n_u__66, __pyx_n_u_F); if (unlikely(!__pyx_tuple__67)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_tuple__67 = PyTuple_Pack(2, __pyx_n_u__66, __pyx_n_u_F); if (unlikely(!__pyx_tuple__67)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__67);
   __Pyx_GIVEREF(__pyx_tuple__67);
-  __pyx_tuple__69 = PyTuple_Pack(2, __pyx_n_u__68, __pyx_n_u_G); if (unlikely(!__pyx_tuple__69)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_tuple__69 = PyTuple_Pack(2, __pyx_n_u__68, __pyx_n_u_G); if (unlikely(!__pyx_tuple__69)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__69);
   __Pyx_GIVEREF(__pyx_tuple__69);
-  __pyx_tuple__71 = PyTuple_Pack(2, __pyx_n_u__70, __pyx_n_u_H); if (unlikely(!__pyx_tuple__71)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_tuple__71 = PyTuple_Pack(2, __pyx_n_u__70, __pyx_n_u_H); if (unlikely(!__pyx_tuple__71)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__71);
   __Pyx_GIVEREF(__pyx_tuple__71);
-  __pyx_tuple__73 = PyTuple_Pack(2, __pyx_n_u__72, __pyx_n_u_I); if (unlikely(!__pyx_tuple__73)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_tuple__73 = PyTuple_Pack(2, __pyx_n_u__72, __pyx_n_u_I); if (unlikely(!__pyx_tuple__73)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__73);
   __Pyx_GIVEREF(__pyx_tuple__73);
-  __pyx_tuple__75 = PyTuple_Pack(2, __pyx_n_u__74, __pyx_n_u_J); if (unlikely(!__pyx_tuple__75)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_tuple__75 = PyTuple_Pack(2, __pyx_n_u__74, __pyx_n_u_J); if (unlikely(!__pyx_tuple__75)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__75);
   __Pyx_GIVEREF(__pyx_tuple__75);
 
-  /* "neologdn.pyx":24
+  /* "neologdn.pyx":31
  *     ('', 'A'), ('', 'B'), ('', 'C'), ('', 'D'), ('', 'E'),
  *     ('', 'F'), ('', 'G'), ('', 'H'), ('', 'I'), ('', 'J'),
  *     ('', 'K'), ('', 'L'), ('', 'M'), ('', 'N'), ('', 'O'),             # <<<<<<<<<<<<<<
  *     ('', 'P'), ('', 'Q'), ('', 'R'), ('', 'S'), ('', 'T'),
  *     ('', 'U'), ('', 'V'), ('', 'W'), ('', 'X'), ('', 'Y'),
  */
-  __pyx_tuple__77 = PyTuple_Pack(2, __pyx_n_u__76, __pyx_n_u_K); if (unlikely(!__pyx_tuple__77)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __pyx_tuple__77 = PyTuple_Pack(2, __pyx_n_u__76, __pyx_n_u_K); if (unlikely(!__pyx_tuple__77)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__77);
   __Pyx_GIVEREF(__pyx_tuple__77);
-  __pyx_tuple__79 = PyTuple_Pack(2, __pyx_n_u__78, __pyx_n_u_L); if (unlikely(!__pyx_tuple__79)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __pyx_tuple__79 = PyTuple_Pack(2, __pyx_n_u__78, __pyx_n_u_L); if (unlikely(!__pyx_tuple__79)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__79);
   __Pyx_GIVEREF(__pyx_tuple__79);
-  __pyx_tuple__81 = PyTuple_Pack(2, __pyx_n_u__80, __pyx_n_u_M); if (unlikely(!__pyx_tuple__81)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __pyx_tuple__81 = PyTuple_Pack(2, __pyx_n_u__80, __pyx_n_u_M); if (unlikely(!__pyx_tuple__81)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__81);
   __Pyx_GIVEREF(__pyx_tuple__81);
-  __pyx_tuple__83 = PyTuple_Pack(2, __pyx_n_u__82, __pyx_n_u_N); if (unlikely(!__pyx_tuple__83)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __pyx_tuple__83 = PyTuple_Pack(2, __pyx_n_u__82, __pyx_n_u_N); if (unlikely(!__pyx_tuple__83)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__83);
   __Pyx_GIVEREF(__pyx_tuple__83);
-  __pyx_tuple__85 = PyTuple_Pack(2, __pyx_n_u__84, __pyx_n_u_O); if (unlikely(!__pyx_tuple__85)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __pyx_tuple__85 = PyTuple_Pack(2, __pyx_n_u__84, __pyx_n_u_O); if (unlikely(!__pyx_tuple__85)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__85);
   __Pyx_GIVEREF(__pyx_tuple__85);
 
-  /* "neologdn.pyx":25
+  /* "neologdn.pyx":32
  *     ('', 'F'), ('', 'G'), ('', 'H'), ('', 'I'), ('', 'J'),
  *     ('', 'K'), ('', 'L'), ('', 'M'), ('', 'N'), ('', 'O'),
  *     ('', 'P'), ('', 'Q'), ('', 'R'), ('', 'S'), ('', 'T'),             # <<<<<<<<<<<<<<
  *     ('', 'U'), ('', 'V'), ('', 'W'), ('', 'X'), ('', 'Y'),
  *     ('', 'Z'),
  */
-  __pyx_tuple__87 = PyTuple_Pack(2, __pyx_n_u__86, __pyx_n_u_P); if (unlikely(!__pyx_tuple__87)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_tuple__87 = PyTuple_Pack(2, __pyx_n_u__86, __pyx_n_u_P); if (unlikely(!__pyx_tuple__87)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__87);
   __Pyx_GIVEREF(__pyx_tuple__87);
-  __pyx_tuple__89 = PyTuple_Pack(2, __pyx_n_u__88, __pyx_n_u_Q); if (unlikely(!__pyx_tuple__89)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_tuple__89 = PyTuple_Pack(2, __pyx_n_u__88, __pyx_n_u_Q); if (unlikely(!__pyx_tuple__89)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__89);
   __Pyx_GIVEREF(__pyx_tuple__89);
-  __pyx_tuple__91 = PyTuple_Pack(2, __pyx_n_u__90, __pyx_n_u_R); if (unlikely(!__pyx_tuple__91)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_tuple__91 = PyTuple_Pack(2, __pyx_n_u__90, __pyx_n_u_R); if (unlikely(!__pyx_tuple__91)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__91);
   __Pyx_GIVEREF(__pyx_tuple__91);
-  __pyx_tuple__93 = PyTuple_Pack(2, __pyx_n_u__92, __pyx_n_u_S); if (unlikely(!__pyx_tuple__93)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_tuple__93 = PyTuple_Pack(2, __pyx_n_u__92, __pyx_n_u_S); if (unlikely(!__pyx_tuple__93)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__93);
   __Pyx_GIVEREF(__pyx_tuple__93);
-  __pyx_tuple__95 = PyTuple_Pack(2, __pyx_n_u__94, __pyx_n_u_T); if (unlikely(!__pyx_tuple__95)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_tuple__95 = PyTuple_Pack(2, __pyx_n_u__94, __pyx_n_u_T); if (unlikely(!__pyx_tuple__95)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__95);
   __Pyx_GIVEREF(__pyx_tuple__95);
 
-  /* "neologdn.pyx":26
+  /* "neologdn.pyx":33
  *     ('', 'K'), ('', 'L'), ('', 'M'), ('', 'N'), ('', 'O'),
  *     ('', 'P'), ('', 'Q'), ('', 'R'), ('', 'S'), ('', 'T'),
  *     ('', 'U'), ('', 'V'), ('', 'W'), ('', 'X'), ('', 'Y'),             # <<<<<<<<<<<<<<
  *     ('', 'Z'),
  *     ('', '!'), ('', '"'), ('', '#'), ('', '$'), ('', '%'),
  */
-  __pyx_tuple__97 = PyTuple_Pack(2, __pyx_n_u__96, __pyx_n_u_U); if (unlikely(!__pyx_tuple__97)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_tuple__97 = PyTuple_Pack(2, __pyx_n_u__96, __pyx_n_u_U); if (unlikely(!__pyx_tuple__97)) __PYX_ERR(0, 33, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__97);
   __Pyx_GIVEREF(__pyx_tuple__97);
-  __pyx_tuple__99 = PyTuple_Pack(2, __pyx_n_u__98, __pyx_n_u_V); if (unlikely(!__pyx_tuple__99)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_tuple__99 = PyTuple_Pack(2, __pyx_n_u__98, __pyx_n_u_V); if (unlikely(!__pyx_tuple__99)) __PYX_ERR(0, 33, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__99);
   __Pyx_GIVEREF(__pyx_tuple__99);
-  __pyx_tuple__101 = PyTuple_Pack(2, __pyx_n_u__100, __pyx_n_u_W); if (unlikely(!__pyx_tuple__101)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_tuple__101 = PyTuple_Pack(2, __pyx_n_u__100, __pyx_n_u_W); if (unlikely(!__pyx_tuple__101)) __PYX_ERR(0, 33, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__101);
   __Pyx_GIVEREF(__pyx_tuple__101);
-  __pyx_tuple__103 = PyTuple_Pack(2, __pyx_n_u__102, __pyx_n_u_X); if (unlikely(!__pyx_tuple__103)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_tuple__103 = PyTuple_Pack(2, __pyx_n_u__102, __pyx_n_u_X); if (unlikely(!__pyx_tuple__103)) __PYX_ERR(0, 33, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__103);
   __Pyx_GIVEREF(__pyx_tuple__103);
-  __pyx_tuple__105 = PyTuple_Pack(2, __pyx_n_u__104, __pyx_n_u_Y); if (unlikely(!__pyx_tuple__105)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_tuple__105 = PyTuple_Pack(2, __pyx_n_u__104, __pyx_n_u_Y); if (unlikely(!__pyx_tuple__105)) __PYX_ERR(0, 33, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__105);
   __Pyx_GIVEREF(__pyx_tuple__105);
 
-  /* "neologdn.pyx":27
+  /* "neologdn.pyx":34
  *     ('', 'P'), ('', 'Q'), ('', 'R'), ('', 'S'), ('', 'T'),
  *     ('', 'U'), ('', 'V'), ('', 'W'), ('', 'X'), ('', 'Y'),
  *     ('', 'Z'),             # <<<<<<<<<<<<<<
  *     ('', '!'), ('', '"'), ('', '#'), ('', '$'), ('', '%'),
  *     ('', '&'), ('', '\''), ('', '('), ('', ')'), ('', '*'),
  */
-  __pyx_tuple__107 = PyTuple_Pack(2, __pyx_n_u__106, __pyx_n_u_Z); if (unlikely(!__pyx_tuple__107)) __PYX_ERR(0, 27, __pyx_L1_error)
+  __pyx_tuple__107 = PyTuple_Pack(2, __pyx_n_u__106, __pyx_n_u_Z); if (unlikely(!__pyx_tuple__107)) __PYX_ERR(0, 34, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__107);
   __Pyx_GIVEREF(__pyx_tuple__107);
 
-  /* "neologdn.pyx":28
+  /* "neologdn.pyx":35
  *     ('', 'U'), ('', 'V'), ('', 'W'), ('', 'X'), ('', 'Y'),
  *     ('', 'Z'),
  *     ('', '!'), ('', '"'), ('', '#'), ('', '$'), ('', '%'),             # <<<<<<<<<<<<<<
  *     ('', '&'), ('', '\''), ('', '('), ('', ')'), ('', '*'),
  *     ('', '+'), ('', ','), ('', '-'), ('', '.'), ('', '/'),
  */
-  __pyx_tuple__110 = PyTuple_Pack(2, __pyx_kp_u__108, __pyx_kp_u__109); if (unlikely(!__pyx_tuple__110)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __pyx_tuple__110 = PyTuple_Pack(2, __pyx_kp_u__108, __pyx_kp_u__109); if (unlikely(!__pyx_tuple__110)) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__110);
   __Pyx_GIVEREF(__pyx_tuple__110);
-  __pyx_tuple__113 = PyTuple_Pack(2, __pyx_kp_u__111, __pyx_kp_u__112); if (unlikely(!__pyx_tuple__113)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __pyx_tuple__113 = PyTuple_Pack(2, __pyx_kp_u__111, __pyx_kp_u__112); if (unlikely(!__pyx_tuple__113)) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__113);
   __Pyx_GIVEREF(__pyx_tuple__113);
-  __pyx_tuple__116 = PyTuple_Pack(2, __pyx_kp_u__114, __pyx_kp_u__115); if (unlikely(!__pyx_tuple__116)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __pyx_tuple__116 = PyTuple_Pack(2, __pyx_kp_u__114, __pyx_kp_u__115); if (unlikely(!__pyx_tuple__116)) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__116);
   __Pyx_GIVEREF(__pyx_tuple__116);
-  __pyx_tuple__119 = PyTuple_Pack(2, __pyx_kp_u__117, __pyx_kp_u__118); if (unlikely(!__pyx_tuple__119)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __pyx_tuple__119 = PyTuple_Pack(2, __pyx_kp_u__117, __pyx_kp_u__118); if (unlikely(!__pyx_tuple__119)) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__119);
   __Pyx_GIVEREF(__pyx_tuple__119);
-  __pyx_tuple__122 = PyTuple_Pack(2, __pyx_kp_u__120, __pyx_kp_u__121); if (unlikely(!__pyx_tuple__122)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __pyx_tuple__122 = PyTuple_Pack(2, __pyx_kp_u__120, __pyx_kp_u__121); if (unlikely(!__pyx_tuple__122)) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__122);
   __Pyx_GIVEREF(__pyx_tuple__122);
 
-  /* "neologdn.pyx":29
+  /* "neologdn.pyx":36
  *     ('', 'Z'),
  *     ('', '!'), ('', '"'), ('', '#'), ('', '$'), ('', '%'),
  *     ('', '&'), ('', '\''), ('', '('), ('', ')'), ('', '*'),             # <<<<<<<<<<<<<<
  *     ('', '+'), ('', ','), ('', '-'), ('', '.'), ('', '/'),
  *     ('', ':'), ('', ';'), ('', '<'), ('', '='), ('', '>'),
  */
-  __pyx_tuple__125 = PyTuple_Pack(2, __pyx_kp_u__123, __pyx_kp_u__124); if (unlikely(!__pyx_tuple__125)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __pyx_tuple__125 = PyTuple_Pack(2, __pyx_kp_u__123, __pyx_kp_u__124); if (unlikely(!__pyx_tuple__125)) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__125);
   __Pyx_GIVEREF(__pyx_tuple__125);
-  __pyx_tuple__128 = PyTuple_Pack(2, __pyx_kp_u__126, __pyx_kp_u__127); if (unlikely(!__pyx_tuple__128)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __pyx_tuple__128 = PyTuple_Pack(2, __pyx_kp_u__126, __pyx_kp_u__127); if (unlikely(!__pyx_tuple__128)) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__128);
   __Pyx_GIVEREF(__pyx_tuple__128);
-  __pyx_tuple__131 = PyTuple_Pack(2, __pyx_kp_u__129, __pyx_kp_u__130); if (unlikely(!__pyx_tuple__131)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __pyx_tuple__131 = PyTuple_Pack(2, __pyx_kp_u__129, __pyx_kp_u__130); if (unlikely(!__pyx_tuple__131)) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__131);
   __Pyx_GIVEREF(__pyx_tuple__131);
-  __pyx_tuple__134 = PyTuple_Pack(2, __pyx_kp_u__132, __pyx_kp_u__133); if (unlikely(!__pyx_tuple__134)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __pyx_tuple__134 = PyTuple_Pack(2, __pyx_kp_u__132, __pyx_kp_u__133); if (unlikely(!__pyx_tuple__134)) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__134);
   __Pyx_GIVEREF(__pyx_tuple__134);
-  __pyx_tuple__136 = PyTuple_Pack(2, __pyx_kp_u__135, __pyx_kp_u_); if (unlikely(!__pyx_tuple__136)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __pyx_tuple__136 = PyTuple_Pack(2, __pyx_kp_u__135, __pyx_kp_u_); if (unlikely(!__pyx_tuple__136)) __PYX_ERR(0, 36, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__136);
   __Pyx_GIVEREF(__pyx_tuple__136);
 
-  /* "neologdn.pyx":30
+  /* "neologdn.pyx":37
  *     ('', '!'), ('', '"'), ('', '#'), ('', '$'), ('', '%'),
  *     ('', '&'), ('', '\''), ('', '('), ('', ')'), ('', '*'),
  *     ('', '+'), ('', ','), ('', '-'), ('', '.'), ('', '/'),             # <<<<<<<<<<<<<<
  *     ('', ':'), ('', ';'), ('', '<'), ('', '='), ('', '>'),
  *     ('', '?'), ('', '@'), ('', '['), ('', '\\'), ('', ']'),
  */
-  __pyx_tuple__139 = PyTuple_Pack(2, __pyx_kp_u__137, __pyx_kp_u__138); if (unlikely(!__pyx_tuple__139)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_tuple__139 = PyTuple_Pack(2, __pyx_kp_u__137, __pyx_kp_u__138); if (unlikely(!__pyx_tuple__139)) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__139);
   __Pyx_GIVEREF(__pyx_tuple__139);
-  __pyx_tuple__142 = PyTuple_Pack(2, __pyx_kp_u__140, __pyx_kp_u__141); if (unlikely(!__pyx_tuple__142)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_tuple__142 = PyTuple_Pack(2, __pyx_kp_u__140, __pyx_kp_u__141); if (unlikely(!__pyx_tuple__142)) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__142);
   __Pyx_GIVEREF(__pyx_tuple__142);
-  __pyx_tuple__145 = PyTuple_Pack(2, __pyx_kp_u__143, __pyx_kp_u__144); if (unlikely(!__pyx_tuple__145)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_tuple__145 = PyTuple_Pack(2, __pyx_kp_u__143, __pyx_kp_u__144); if (unlikely(!__pyx_tuple__145)) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__145);
   __Pyx_GIVEREF(__pyx_tuple__145);
-  __pyx_tuple__147 = PyTuple_Pack(2, __pyx_kp_u__146, __pyx_kp_u__2); if (unlikely(!__pyx_tuple__147)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_tuple__147 = PyTuple_Pack(2, __pyx_kp_u__146, __pyx_kp_u__2); if (unlikely(!__pyx_tuple__147)) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__147);
   __Pyx_GIVEREF(__pyx_tuple__147);
-  __pyx_tuple__150 = PyTuple_Pack(2, __pyx_kp_u__148, __pyx_kp_u__149); if (unlikely(!__pyx_tuple__150)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_tuple__150 = PyTuple_Pack(2, __pyx_kp_u__148, __pyx_kp_u__149); if (unlikely(!__pyx_tuple__150)) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__150);
   __Pyx_GIVEREF(__pyx_tuple__150);
 
-  /* "neologdn.pyx":31
+  /* "neologdn.pyx":38
  *     ('', '&'), ('', '\''), ('', '('), ('', ')'), ('', '*'),
  *     ('', '+'), ('', ','), ('', '-'), ('', '.'), ('', '/'),
  *     ('', ':'), ('', ';'), ('', '<'), ('', '='), ('', '>'),             # <<<<<<<<<<<<<<
  *     ('', '?'), ('', '@'), ('', '['), ('', '\\'), ('', ']'),
  *     ('', '^'), ('', '_'), ('', '`'), ('', '{'), ('', '|'),
  */
-  __pyx_tuple__153 = PyTuple_Pack(2, __pyx_kp_u__151, __pyx_kp_u__152); if (unlikely(!__pyx_tuple__153)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_tuple__153 = PyTuple_Pack(2, __pyx_kp_u__151, __pyx_kp_u__152); if (unlikely(!__pyx_tuple__153)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__153);
   __Pyx_GIVEREF(__pyx_tuple__153);
-  __pyx_tuple__156 = PyTuple_Pack(2, __pyx_kp_u__154, __pyx_kp_u__155); if (unlikely(!__pyx_tuple__156)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_tuple__156 = PyTuple_Pack(2, __pyx_kp_u__154, __pyx_kp_u__155); if (unlikely(!__pyx_tuple__156)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__156);
   __Pyx_GIVEREF(__pyx_tuple__156);
-  __pyx_tuple__159 = PyTuple_Pack(2, __pyx_kp_u__157, __pyx_kp_u__158); if (unlikely(!__pyx_tuple__159)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_tuple__159 = PyTuple_Pack(2, __pyx_kp_u__157, __pyx_kp_u__158); if (unlikely(!__pyx_tuple__159)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__159);
   __Pyx_GIVEREF(__pyx_tuple__159);
-  __pyx_tuple__162 = PyTuple_Pack(2, __pyx_kp_u__160, __pyx_kp_u__161); if (unlikely(!__pyx_tuple__162)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_tuple__162 = PyTuple_Pack(2, __pyx_kp_u__160, __pyx_kp_u__161); if (unlikely(!__pyx_tuple__162)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__162);
   __Pyx_GIVEREF(__pyx_tuple__162);
-  __pyx_tuple__165 = PyTuple_Pack(2, __pyx_kp_u__163, __pyx_kp_u__164); if (unlikely(!__pyx_tuple__165)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_tuple__165 = PyTuple_Pack(2, __pyx_kp_u__163, __pyx_kp_u__164); if (unlikely(!__pyx_tuple__165)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__165);
   __Pyx_GIVEREF(__pyx_tuple__165);
 
-  /* "neologdn.pyx":32
+  /* "neologdn.pyx":39
  *     ('', '+'), ('', ','), ('', '-'), ('', '.'), ('', '/'),
  *     ('', ':'), ('', ';'), ('', '<'), ('', '='), ('', '>'),
  *     ('', '?'), ('', '@'), ('', '['), ('', '\\'), ('', ']'),             # <<<<<<<<<<<<<<
  *     ('', '^'), ('', '_'), ('', '`'), ('', '{'), ('', '|'),
  *     ('', '}')
  */
-  __pyx_tuple__168 = PyTuple_Pack(2, __pyx_kp_u__166, __pyx_kp_u__167); if (unlikely(!__pyx_tuple__168)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_tuple__168 = PyTuple_Pack(2, __pyx_kp_u__166, __pyx_kp_u__167); if (unlikely(!__pyx_tuple__168)) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__168);
   __Pyx_GIVEREF(__pyx_tuple__168);
-  __pyx_tuple__171 = PyTuple_Pack(2, __pyx_kp_u__169, __pyx_kp_u__170); if (unlikely(!__pyx_tuple__171)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_tuple__171 = PyTuple_Pack(2, __pyx_kp_u__169, __pyx_kp_u__170); if (unlikely(!__pyx_tuple__171)) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__171);
   __Pyx_GIVEREF(__pyx_tuple__171);
-  __pyx_tuple__174 = PyTuple_Pack(2, __pyx_kp_u__172, __pyx_kp_u__173); if (unlikely(!__pyx_tuple__174)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_tuple__174 = PyTuple_Pack(2, __pyx_kp_u__172, __pyx_kp_u__173); if (unlikely(!__pyx_tuple__174)) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__174);
   __Pyx_GIVEREF(__pyx_tuple__174);
-  __pyx_tuple__177 = PyTuple_Pack(2, __pyx_kp_u__175, __pyx_kp_u__176); if (unlikely(!__pyx_tuple__177)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_tuple__177 = PyTuple_Pack(2, __pyx_kp_u__175, __pyx_kp_u__176); if (unlikely(!__pyx_tuple__177)) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__177);
   __Pyx_GIVEREF(__pyx_tuple__177);
-  __pyx_tuple__180 = PyTuple_Pack(2, __pyx_kp_u__178, __pyx_kp_u__179); if (unlikely(!__pyx_tuple__180)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_tuple__180 = PyTuple_Pack(2, __pyx_kp_u__178, __pyx_kp_u__179); if (unlikely(!__pyx_tuple__180)) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__180);
   __Pyx_GIVEREF(__pyx_tuple__180);
 
-  /* "neologdn.pyx":33
+  /* "neologdn.pyx":40
  *     ('', ':'), ('', ';'), ('', '<'), ('', '='), ('', '>'),
  *     ('', '?'), ('', '@'), ('', '['), ('', '\\'), ('', ']'),
  *     ('', '^'), ('', '_'), ('', '`'), ('', '{'), ('', '|'),             # <<<<<<<<<<<<<<
  *     ('', '}')
  * )
  */
-  __pyx_tuple__183 = PyTuple_Pack(2, __pyx_kp_u__181, __pyx_kp_u__182); if (unlikely(!__pyx_tuple__183)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_tuple__183 = PyTuple_Pack(2, __pyx_kp_u__181, __pyx_kp_u__182); if (unlikely(!__pyx_tuple__183)) __PYX_ERR(0, 40, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__183);
   __Pyx_GIVEREF(__pyx_tuple__183);
-  __pyx_tuple__186 = PyTuple_Pack(2, __pyx_kp_u__184, __pyx_n_u__185); if (unlikely(!__pyx_tuple__186)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_tuple__186 = PyTuple_Pack(2, __pyx_kp_u__184, __pyx_n_u__185); if (unlikely(!__pyx_tuple__186)) __PYX_ERR(0, 40, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__186);
   __Pyx_GIVEREF(__pyx_tuple__186);
-  __pyx_tuple__189 = PyTuple_Pack(2, __pyx_kp_u__187, __pyx_kp_u__188); if (unlikely(!__pyx_tuple__189)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_tuple__189 = PyTuple_Pack(2, __pyx_kp_u__187, __pyx_kp_u__188); if (unlikely(!__pyx_tuple__189)) __PYX_ERR(0, 40, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__189);
   __Pyx_GIVEREF(__pyx_tuple__189);
-  __pyx_tuple__192 = PyTuple_Pack(2, __pyx_kp_u__190, __pyx_kp_u__191); if (unlikely(!__pyx_tuple__192)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_tuple__192 = PyTuple_Pack(2, __pyx_kp_u__190, __pyx_kp_u__191); if (unlikely(!__pyx_tuple__192)) __PYX_ERR(0, 40, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__192);
   __Pyx_GIVEREF(__pyx_tuple__192);
-  __pyx_tuple__195 = PyTuple_Pack(2, __pyx_kp_u__193, __pyx_kp_u__194); if (unlikely(!__pyx_tuple__195)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_tuple__195 = PyTuple_Pack(2, __pyx_kp_u__193, __pyx_kp_u__194); if (unlikely(!__pyx_tuple__195)) __PYX_ERR(0, 40, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__195);
   __Pyx_GIVEREF(__pyx_tuple__195);
 
-  /* "neologdn.pyx":34
+  /* "neologdn.pyx":41
  *     ('', '?'), ('', '@'), ('', '['), ('', '\\'), ('', ']'),
  *     ('', '^'), ('', '_'), ('', '`'), ('', '{'), ('', '|'),
  *     ('', '}')             # <<<<<<<<<<<<<<
  * )
  * KANA = (
  */
-  __pyx_tuple__198 = PyTuple_Pack(2, __pyx_kp_u__196, __pyx_kp_u__197); if (unlikely(!__pyx_tuple__198)) __PYX_ERR(0, 34, __pyx_L1_error)
+  __pyx_tuple__198 = PyTuple_Pack(2, __pyx_kp_u__196, __pyx_kp_u__197); if (unlikely(!__pyx_tuple__198)) __PYX_ERR(0, 41, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__198);
   __Pyx_GIVEREF(__pyx_tuple__198);
 
-  /* "neologdn.pyx":16
+  /* "neologdn.pyx":23
  * 
  * ASCII = (
  *     ('', 'a'), ('', 'b'), ('', 'c'), ('', 'd'), ('', 'e'),             # <<<<<<<<<<<<<<
  *     ('', 'f'), ('', 'g'), ('', 'h'), ('', 'i'), ('', 'j'),
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),
  */
-  __pyx_tuple__199 = PyTuple_Pack(83, __pyx_tuple__5, __pyx_tuple__7, __pyx_tuple__9, __pyx_tuple__11, __pyx_tuple__13, __pyx_tuple__15, __pyx_tuple__17, __pyx_tuple__19, __pyx_tuple__21, __pyx_tuple__23, __pyx_tuple__25, __pyx_tuple__27, __pyx_tuple__29, __pyx_tuple__31, __pyx_tuple__33, __pyx_tuple__35, __pyx_tuple__37, __pyx_tuple__39, __pyx_tuple__41, __pyx_tuple__43, __pyx_tuple__45, __pyx_tuple__47, __pyx_tuple__49, __pyx_tuple__51, __pyx_tuple__53, __pyx_tuple__55, __pyx_tuple__57, __pyx_tuple__59, __pyx_tuple__61, __pyx_tuple__63, __pyx_tuple__65, __pyx_tuple__67, __pyx_tuple__69, __pyx_tuple__71, __pyx_tuple__73, __pyx_tuple__75, __pyx_tuple__77, __pyx_tuple__79, __pyx_tuple__81, __pyx_tuple__83, __pyx_tuple__85, __pyx_tuple__87, __pyx_tuple__89, __pyx_tuple__91, __pyx_tuple__93, __pyx_tuple__95, __pyx_tuple__97, __pyx_tuple__99, __pyx_tuple__101, __pyx_tuple__103, __pyx_tuple__105, __pyx_tuple__107, __pyx_tuple__110, __pyx_tuple__113, __pyx_tuple__116, __pyx_tuple__119, __pyx_tuple__122, __pyx_tuple__125, __pyx_tuple__128, __pyx_tuple__131, __pyx_tuple__134, __pyx_tuple__136, __pyx_tuple__139, __pyx_tuple__142, __pyx_tuple__145, __pyx_tuple__147, __pyx_tuple__150, __pyx_tuple__153, __pyx_tuple__156, __pyx_tuple__159, __pyx_tuple__162, __pyx_tuple__165, __pyx_tuple__168, __pyx_tuple__171, __pyx_tuple__174, __pyx_tuple__177, __pyx_tuple__180, __pyx_tuple__183, __pyx_tuple__186, __pyx_tuple__189, __pyx_tuple__192, __pyx_tuple__195, __pyx_tuple__198); if (unlikely(!__pyx_tuple__199)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __pyx_tuple__199 = PyTuple_Pack(83, __pyx_tuple__5, __pyx_tuple__7, __pyx_tuple__9, __pyx_tuple__11, __pyx_tuple__13, __pyx_tuple__15, __pyx_tuple__17, __pyx_tuple__19, __pyx_tuple__21, __pyx_tuple__23, __pyx_tuple__25, __pyx_tuple__27, __pyx_tuple__29, __pyx_tuple__31, __pyx_tuple__33, __pyx_tuple__35, __pyx_tuple__37, __pyx_tuple__39, __pyx_tuple__41, __pyx_tuple__43, __pyx_tuple__45, __pyx_tuple__47, __pyx_tuple__49, __pyx_tuple__51, __pyx_tuple__53, __pyx_tuple__55, __pyx_tuple__57, __pyx_tuple__59, __pyx_tuple__61, __pyx_tuple__63, __pyx_tuple__65, __pyx_tuple__67, __pyx_tuple__69, __pyx_tuple__71, __pyx_tuple__73, __pyx_tuple__75, __pyx_tuple__77, __pyx_tuple__79, __pyx_tuple__81, __pyx_tuple__83, __pyx_tuple__85, __pyx_tuple__87, __pyx_tuple__89, __pyx_tuple__91, __pyx_tuple__93, __pyx_tuple__95, __pyx_tuple__97, __pyx_tuple__99, __pyx_tuple__101, __pyx_tuple__103, __pyx_tuple__105, __pyx_tuple__107, __pyx_tuple__110, __pyx_tuple__113, __pyx_tuple__116, __pyx_tuple__119, __pyx_tuple__122, __pyx_tuple__125, __pyx_tuple__128, __pyx_tuple__131, __pyx_tuple__134, __pyx_tuple__136, __pyx_tuple__139, __pyx_tuple__142, __pyx_tuple__145, __pyx_tuple__147, __pyx_tuple__150, __pyx_tuple__153, __pyx_tuple__156, __pyx_tuple__159, __pyx_tuple__162, __pyx_tuple__165, __pyx_tuple__168, __pyx_tuple__171, __pyx_tuple__174, __pyx_tuple__177, __pyx_tuple__180, __pyx_tuple__183, __pyx_tuple__186, __pyx_tuple__189, __pyx_tuple__192, __pyx_tuple__195, __pyx_tuple__198); if (unlikely(!__pyx_tuple__199)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__199);
   __Pyx_GIVEREF(__pyx_tuple__199);
 
-  /* "neologdn.pyx":37
+  /* "neologdn.pyx":44
  * )
  * KANA = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__202 = PyTuple_Pack(2, __pyx_n_u__200, __pyx_n_u__201); if (unlikely(!__pyx_tuple__202)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __pyx_tuple__202 = PyTuple_Pack(2, __pyx_n_u__200, __pyx_n_u__201); if (unlikely(!__pyx_tuple__202)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__202);
   __Pyx_GIVEREF(__pyx_tuple__202);
-  __pyx_tuple__205 = PyTuple_Pack(2, __pyx_n_u__203, __pyx_n_u__204); if (unlikely(!__pyx_tuple__205)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __pyx_tuple__205 = PyTuple_Pack(2, __pyx_n_u__203, __pyx_n_u__204); if (unlikely(!__pyx_tuple__205)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__205);
   __Pyx_GIVEREF(__pyx_tuple__205);
-  __pyx_tuple__208 = PyTuple_Pack(2, __pyx_n_u__206, __pyx_n_u__207); if (unlikely(!__pyx_tuple__208)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __pyx_tuple__208 = PyTuple_Pack(2, __pyx_n_u__206, __pyx_n_u__207); if (unlikely(!__pyx_tuple__208)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__208);
   __Pyx_GIVEREF(__pyx_tuple__208);
-  __pyx_tuple__211 = PyTuple_Pack(2, __pyx_n_u__209, __pyx_n_u__210); if (unlikely(!__pyx_tuple__211)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __pyx_tuple__211 = PyTuple_Pack(2, __pyx_n_u__209, __pyx_n_u__210); if (unlikely(!__pyx_tuple__211)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__211);
   __Pyx_GIVEREF(__pyx_tuple__211);
-  __pyx_tuple__214 = PyTuple_Pack(2, __pyx_n_u__212, __pyx_n_u__213); if (unlikely(!__pyx_tuple__214)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __pyx_tuple__214 = PyTuple_Pack(2, __pyx_n_u__212, __pyx_n_u__213); if (unlikely(!__pyx_tuple__214)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__214);
   __Pyx_GIVEREF(__pyx_tuple__214);
 
-  /* "neologdn.pyx":38
+  /* "neologdn.pyx":45
  * KANA = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__217 = PyTuple_Pack(2, __pyx_n_u__215, __pyx_n_u__216); if (unlikely(!__pyx_tuple__217)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_tuple__217 = PyTuple_Pack(2, __pyx_n_u__215, __pyx_n_u__216); if (unlikely(!__pyx_tuple__217)) __PYX_ERR(0, 45, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__217);
   __Pyx_GIVEREF(__pyx_tuple__217);
-  __pyx_tuple__220 = PyTuple_Pack(2, __pyx_n_u__218, __pyx_n_u__219); if (unlikely(!__pyx_tuple__220)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_tuple__220 = PyTuple_Pack(2, __pyx_n_u__218, __pyx_n_u__219); if (unlikely(!__pyx_tuple__220)) __PYX_ERR(0, 45, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__220);
   __Pyx_GIVEREF(__pyx_tuple__220);
-  __pyx_tuple__223 = PyTuple_Pack(2, __pyx_n_u__221, __pyx_n_u__222); if (unlikely(!__pyx_tuple__223)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_tuple__223 = PyTuple_Pack(2, __pyx_n_u__221, __pyx_n_u__222); if (unlikely(!__pyx_tuple__223)) __PYX_ERR(0, 45, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__223);
   __Pyx_GIVEREF(__pyx_tuple__223);
-  __pyx_tuple__226 = PyTuple_Pack(2, __pyx_n_u__224, __pyx_n_u__225); if (unlikely(!__pyx_tuple__226)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_tuple__226 = PyTuple_Pack(2, __pyx_n_u__224, __pyx_n_u__225); if (unlikely(!__pyx_tuple__226)) __PYX_ERR(0, 45, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__226);
   __Pyx_GIVEREF(__pyx_tuple__226);
-  __pyx_tuple__229 = PyTuple_Pack(2, __pyx_n_u__227, __pyx_n_u__228); if (unlikely(!__pyx_tuple__229)) __PYX_ERR(0, 38, __pyx_L1_error)
+  __pyx_tuple__229 = PyTuple_Pack(2, __pyx_n_u__227, __pyx_n_u__228); if (unlikely(!__pyx_tuple__229)) __PYX_ERR(0, 45, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__229);
   __Pyx_GIVEREF(__pyx_tuple__229);
 
-  /* "neologdn.pyx":39
+  /* "neologdn.pyx":46
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__232 = PyTuple_Pack(2, __pyx_n_u__230, __pyx_n_u__231); if (unlikely(!__pyx_tuple__232)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_tuple__232 = PyTuple_Pack(2, __pyx_n_u__230, __pyx_n_u__231); if (unlikely(!__pyx_tuple__232)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__232);
   __Pyx_GIVEREF(__pyx_tuple__232);
-  __pyx_tuple__235 = PyTuple_Pack(2, __pyx_n_u__233, __pyx_n_u__234); if (unlikely(!__pyx_tuple__235)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_tuple__235 = PyTuple_Pack(2, __pyx_n_u__233, __pyx_n_u__234); if (unlikely(!__pyx_tuple__235)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__235);
   __Pyx_GIVEREF(__pyx_tuple__235);
-  __pyx_tuple__238 = PyTuple_Pack(2, __pyx_n_u__236, __pyx_n_u__237); if (unlikely(!__pyx_tuple__238)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_tuple__238 = PyTuple_Pack(2, __pyx_n_u__236, __pyx_n_u__237); if (unlikely(!__pyx_tuple__238)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__238);
   __Pyx_GIVEREF(__pyx_tuple__238);
-  __pyx_tuple__241 = PyTuple_Pack(2, __pyx_n_u__239, __pyx_n_u__240); if (unlikely(!__pyx_tuple__241)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_tuple__241 = PyTuple_Pack(2, __pyx_n_u__239, __pyx_n_u__240); if (unlikely(!__pyx_tuple__241)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__241);
   __Pyx_GIVEREF(__pyx_tuple__241);
-  __pyx_tuple__244 = PyTuple_Pack(2, __pyx_n_u__242, __pyx_n_u__243); if (unlikely(!__pyx_tuple__244)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_tuple__244 = PyTuple_Pack(2, __pyx_n_u__242, __pyx_n_u__243); if (unlikely(!__pyx_tuple__244)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__244);
   __Pyx_GIVEREF(__pyx_tuple__244);
 
-  /* "neologdn.pyx":40
+  /* "neologdn.pyx":47
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__247 = PyTuple_Pack(2, __pyx_n_u__245, __pyx_n_u__246); if (unlikely(!__pyx_tuple__247)) __PYX_ERR(0, 40, __pyx_L1_error)
+  __pyx_tuple__247 = PyTuple_Pack(2, __pyx_n_u__245, __pyx_n_u__246); if (unlikely(!__pyx_tuple__247)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__247);
   __Pyx_GIVEREF(__pyx_tuple__247);
-  __pyx_tuple__250 = PyTuple_Pack(2, __pyx_n_u__248, __pyx_n_u__249); if (unlikely(!__pyx_tuple__250)) __PYX_ERR(0, 40, __pyx_L1_error)
+  __pyx_tuple__250 = PyTuple_Pack(2, __pyx_n_u__248, __pyx_n_u__249); if (unlikely(!__pyx_tuple__250)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__250);
   __Pyx_GIVEREF(__pyx_tuple__250);
-  __pyx_tuple__253 = PyTuple_Pack(2, __pyx_n_u__251, __pyx_n_u__252); if (unlikely(!__pyx_tuple__253)) __PYX_ERR(0, 40, __pyx_L1_error)
+  __pyx_tuple__253 = PyTuple_Pack(2, __pyx_n_u__251, __pyx_n_u__252); if (unlikely(!__pyx_tuple__253)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__253);
   __Pyx_GIVEREF(__pyx_tuple__253);
-  __pyx_tuple__256 = PyTuple_Pack(2, __pyx_n_u__254, __pyx_n_u__255); if (unlikely(!__pyx_tuple__256)) __PYX_ERR(0, 40, __pyx_L1_error)
+  __pyx_tuple__256 = PyTuple_Pack(2, __pyx_n_u__254, __pyx_n_u__255); if (unlikely(!__pyx_tuple__256)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__256);
   __Pyx_GIVEREF(__pyx_tuple__256);
-  __pyx_tuple__259 = PyTuple_Pack(2, __pyx_n_u__257, __pyx_n_u__258); if (unlikely(!__pyx_tuple__259)) __PYX_ERR(0, 40, __pyx_L1_error)
+  __pyx_tuple__259 = PyTuple_Pack(2, __pyx_n_u__257, __pyx_n_u__258); if (unlikely(!__pyx_tuple__259)) __PYX_ERR(0, 47, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__259);
   __Pyx_GIVEREF(__pyx_tuple__259);
 
-  /* "neologdn.pyx":41
+  /* "neologdn.pyx":48
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__262 = PyTuple_Pack(2, __pyx_n_u__260, __pyx_n_u__261); if (unlikely(!__pyx_tuple__262)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_tuple__262 = PyTuple_Pack(2, __pyx_n_u__260, __pyx_n_u__261); if (unlikely(!__pyx_tuple__262)) __PYX_ERR(0, 48, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__262);
   __Pyx_GIVEREF(__pyx_tuple__262);
-  __pyx_tuple__265 = PyTuple_Pack(2, __pyx_n_u__263, __pyx_n_u__264); if (unlikely(!__pyx_tuple__265)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_tuple__265 = PyTuple_Pack(2, __pyx_n_u__263, __pyx_n_u__264); if (unlikely(!__pyx_tuple__265)) __PYX_ERR(0, 48, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__265);
   __Pyx_GIVEREF(__pyx_tuple__265);
-  __pyx_tuple__268 = PyTuple_Pack(2, __pyx_n_u__266, __pyx_n_u__267); if (unlikely(!__pyx_tuple__268)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_tuple__268 = PyTuple_Pack(2, __pyx_n_u__266, __pyx_n_u__267); if (unlikely(!__pyx_tuple__268)) __PYX_ERR(0, 48, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__268);
   __Pyx_GIVEREF(__pyx_tuple__268);
-  __pyx_tuple__271 = PyTuple_Pack(2, __pyx_n_u__269, __pyx_n_u__270); if (unlikely(!__pyx_tuple__271)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_tuple__271 = PyTuple_Pack(2, __pyx_n_u__269, __pyx_n_u__270); if (unlikely(!__pyx_tuple__271)) __PYX_ERR(0, 48, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__271);
   __Pyx_GIVEREF(__pyx_tuple__271);
-  __pyx_tuple__274 = PyTuple_Pack(2, __pyx_n_u__272, __pyx_n_u__273); if (unlikely(!__pyx_tuple__274)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_tuple__274 = PyTuple_Pack(2, __pyx_n_u__272, __pyx_n_u__273); if (unlikely(!__pyx_tuple__274)) __PYX_ERR(0, 48, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__274);
   __Pyx_GIVEREF(__pyx_tuple__274);
 
-  /* "neologdn.pyx":42
+  /* "neologdn.pyx":49
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__277 = PyTuple_Pack(2, __pyx_n_u__275, __pyx_n_u__276); if (unlikely(!__pyx_tuple__277)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __pyx_tuple__277 = PyTuple_Pack(2, __pyx_n_u__275, __pyx_n_u__276); if (unlikely(!__pyx_tuple__277)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__277);
   __Pyx_GIVEREF(__pyx_tuple__277);
-  __pyx_tuple__280 = PyTuple_Pack(2, __pyx_n_u__278, __pyx_n_u__279); if (unlikely(!__pyx_tuple__280)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __pyx_tuple__280 = PyTuple_Pack(2, __pyx_n_u__278, __pyx_n_u__279); if (unlikely(!__pyx_tuple__280)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__280);
   __Pyx_GIVEREF(__pyx_tuple__280);
-  __pyx_tuple__283 = PyTuple_Pack(2, __pyx_n_u__281, __pyx_n_u__282); if (unlikely(!__pyx_tuple__283)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __pyx_tuple__283 = PyTuple_Pack(2, __pyx_n_u__281, __pyx_n_u__282); if (unlikely(!__pyx_tuple__283)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__283);
   __Pyx_GIVEREF(__pyx_tuple__283);
-  __pyx_tuple__286 = PyTuple_Pack(2, __pyx_n_u__284, __pyx_n_u__285); if (unlikely(!__pyx_tuple__286)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __pyx_tuple__286 = PyTuple_Pack(2, __pyx_n_u__284, __pyx_n_u__285); if (unlikely(!__pyx_tuple__286)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__286);
   __Pyx_GIVEREF(__pyx_tuple__286);
-  __pyx_tuple__289 = PyTuple_Pack(2, __pyx_n_u__287, __pyx_n_u__288); if (unlikely(!__pyx_tuple__289)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __pyx_tuple__289 = PyTuple_Pack(2, __pyx_n_u__287, __pyx_n_u__288); if (unlikely(!__pyx_tuple__289)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__289);
   __Pyx_GIVEREF(__pyx_tuple__289);
 
-  /* "neologdn.pyx":43
+  /* "neologdn.pyx":50
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__292 = PyTuple_Pack(2, __pyx_n_u__290, __pyx_n_u__291); if (unlikely(!__pyx_tuple__292)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_tuple__292 = PyTuple_Pack(2, __pyx_n_u__290, __pyx_n_u__291); if (unlikely(!__pyx_tuple__292)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__292);
   __Pyx_GIVEREF(__pyx_tuple__292);
-  __pyx_tuple__295 = PyTuple_Pack(2, __pyx_n_u__293, __pyx_n_u__294); if (unlikely(!__pyx_tuple__295)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_tuple__295 = PyTuple_Pack(2, __pyx_n_u__293, __pyx_n_u__294); if (unlikely(!__pyx_tuple__295)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__295);
   __Pyx_GIVEREF(__pyx_tuple__295);
-  __pyx_tuple__298 = PyTuple_Pack(2, __pyx_n_u__296, __pyx_n_u__297); if (unlikely(!__pyx_tuple__298)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_tuple__298 = PyTuple_Pack(2, __pyx_n_u__296, __pyx_n_u__297); if (unlikely(!__pyx_tuple__298)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__298);
   __Pyx_GIVEREF(__pyx_tuple__298);
-  __pyx_tuple__301 = PyTuple_Pack(2, __pyx_n_u__299, __pyx_n_u__300); if (unlikely(!__pyx_tuple__301)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_tuple__301 = PyTuple_Pack(2, __pyx_n_u__299, __pyx_n_u__300); if (unlikely(!__pyx_tuple__301)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__301);
   __Pyx_GIVEREF(__pyx_tuple__301);
-  __pyx_tuple__304 = PyTuple_Pack(2, __pyx_n_u__302, __pyx_n_u__303); if (unlikely(!__pyx_tuple__304)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_tuple__304 = PyTuple_Pack(2, __pyx_n_u__302, __pyx_n_u__303); if (unlikely(!__pyx_tuple__304)) __PYX_ERR(0, 50, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__304);
   __Pyx_GIVEREF(__pyx_tuple__304);
 
-  /* "neologdn.pyx":44
+  /* "neologdn.pyx":51
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__307 = PyTuple_Pack(2, __pyx_n_u__305, __pyx_n_u__306); if (unlikely(!__pyx_tuple__307)) __PYX_ERR(0, 44, __pyx_L1_error)
+  __pyx_tuple__307 = PyTuple_Pack(2, __pyx_n_u__305, __pyx_n_u__306); if (unlikely(!__pyx_tuple__307)) __PYX_ERR(0, 51, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__307);
   __Pyx_GIVEREF(__pyx_tuple__307);
-  __pyx_tuple__310 = PyTuple_Pack(2, __pyx_n_u__308, __pyx_n_u__309); if (unlikely(!__pyx_tuple__310)) __PYX_ERR(0, 44, __pyx_L1_error)
+  __pyx_tuple__310 = PyTuple_Pack(2, __pyx_n_u__308, __pyx_n_u__309); if (unlikely(!__pyx_tuple__310)) __PYX_ERR(0, 51, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__310);
   __Pyx_GIVEREF(__pyx_tuple__310);
-  __pyx_tuple__313 = PyTuple_Pack(2, __pyx_n_u__311, __pyx_n_u__312); if (unlikely(!__pyx_tuple__313)) __PYX_ERR(0, 44, __pyx_L1_error)
+  __pyx_tuple__313 = PyTuple_Pack(2, __pyx_n_u__311, __pyx_n_u__312); if (unlikely(!__pyx_tuple__313)) __PYX_ERR(0, 51, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__313);
   __Pyx_GIVEREF(__pyx_tuple__313);
 
-  /* "neologdn.pyx":45
+  /* "neologdn.pyx":52
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__316 = PyTuple_Pack(2, __pyx_n_u__314, __pyx_n_u__315); if (unlikely(!__pyx_tuple__316)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_tuple__316 = PyTuple_Pack(2, __pyx_n_u__314, __pyx_n_u__315); if (unlikely(!__pyx_tuple__316)) __PYX_ERR(0, 52, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__316);
   __Pyx_GIVEREF(__pyx_tuple__316);
-  __pyx_tuple__319 = PyTuple_Pack(2, __pyx_n_u__317, __pyx_n_u__318); if (unlikely(!__pyx_tuple__319)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_tuple__319 = PyTuple_Pack(2, __pyx_n_u__317, __pyx_n_u__318); if (unlikely(!__pyx_tuple__319)) __PYX_ERR(0, 52, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__319);
   __Pyx_GIVEREF(__pyx_tuple__319);
-  __pyx_tuple__322 = PyTuple_Pack(2, __pyx_n_u__320, __pyx_n_u__321); if (unlikely(!__pyx_tuple__322)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_tuple__322 = PyTuple_Pack(2, __pyx_n_u__320, __pyx_n_u__321); if (unlikely(!__pyx_tuple__322)) __PYX_ERR(0, 52, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__322);
   __Pyx_GIVEREF(__pyx_tuple__322);
-  __pyx_tuple__325 = PyTuple_Pack(2, __pyx_n_u__323, __pyx_n_u__324); if (unlikely(!__pyx_tuple__325)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_tuple__325 = PyTuple_Pack(2, __pyx_n_u__323, __pyx_n_u__324); if (unlikely(!__pyx_tuple__325)) __PYX_ERR(0, 52, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__325);
   __Pyx_GIVEREF(__pyx_tuple__325);
-  __pyx_tuple__328 = PyTuple_Pack(2, __pyx_n_u__326, __pyx_n_u__327); if (unlikely(!__pyx_tuple__328)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_tuple__328 = PyTuple_Pack(2, __pyx_n_u__326, __pyx_n_u__327); if (unlikely(!__pyx_tuple__328)) __PYX_ERR(0, 52, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__328);
   __Pyx_GIVEREF(__pyx_tuple__328);
 
-  /* "neologdn.pyx":46
+  /* "neologdn.pyx":53
  *     ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__331 = PyTuple_Pack(2, __pyx_n_u__329, __pyx_n_u__330); if (unlikely(!__pyx_tuple__331)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_tuple__331 = PyTuple_Pack(2, __pyx_n_u__329, __pyx_n_u__330); if (unlikely(!__pyx_tuple__331)) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__331);
   __Pyx_GIVEREF(__pyx_tuple__331);
-  __pyx_tuple__334 = PyTuple_Pack(2, __pyx_n_u__332, __pyx_n_u__333); if (unlikely(!__pyx_tuple__334)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_tuple__334 = PyTuple_Pack(2, __pyx_n_u__332, __pyx_n_u__333); if (unlikely(!__pyx_tuple__334)) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__334);
   __Pyx_GIVEREF(__pyx_tuple__334);
-  __pyx_tuple__337 = PyTuple_Pack(2, __pyx_n_u__335, __pyx_n_u__336); if (unlikely(!__pyx_tuple__337)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_tuple__337 = PyTuple_Pack(2, __pyx_n_u__335, __pyx_n_u__336); if (unlikely(!__pyx_tuple__337)) __PYX_ERR(0, 53, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__337);
   __Pyx_GIVEREF(__pyx_tuple__337);
 
-  /* "neologdn.pyx":47
+  /* "neologdn.pyx":54
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__340 = PyTuple_Pack(2, __pyx_n_u__338, __pyx_n_u__339); if (unlikely(!__pyx_tuple__340)) __PYX_ERR(0, 47, __pyx_L1_error)
+  __pyx_tuple__340 = PyTuple_Pack(2, __pyx_n_u__338, __pyx_n_u__339); if (unlikely(!__pyx_tuple__340)) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__340);
   __Pyx_GIVEREF(__pyx_tuple__340);
-  __pyx_tuple__343 = PyTuple_Pack(2, __pyx_n_u__341, __pyx_n_u__342); if (unlikely(!__pyx_tuple__343)) __PYX_ERR(0, 47, __pyx_L1_error)
+  __pyx_tuple__343 = PyTuple_Pack(2, __pyx_n_u__341, __pyx_n_u__342); if (unlikely(!__pyx_tuple__343)) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__343);
   __Pyx_GIVEREF(__pyx_tuple__343);
-  __pyx_tuple__346 = PyTuple_Pack(2, __pyx_n_u__344, __pyx_n_u__345); if (unlikely(!__pyx_tuple__346)) __PYX_ERR(0, 47, __pyx_L1_error)
+  __pyx_tuple__346 = PyTuple_Pack(2, __pyx_n_u__344, __pyx_n_u__345); if (unlikely(!__pyx_tuple__346)) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__346);
   __Pyx_GIVEREF(__pyx_tuple__346);
-  __pyx_tuple__349 = PyTuple_Pack(2, __pyx_n_u__347, __pyx_n_u__348); if (unlikely(!__pyx_tuple__349)) __PYX_ERR(0, 47, __pyx_L1_error)
+  __pyx_tuple__349 = PyTuple_Pack(2, __pyx_n_u__347, __pyx_n_u__348); if (unlikely(!__pyx_tuple__349)) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__349);
   __Pyx_GIVEREF(__pyx_tuple__349);
-  __pyx_tuple__352 = PyTuple_Pack(2, __pyx_n_u__350, __pyx_n_u__351); if (unlikely(!__pyx_tuple__352)) __PYX_ERR(0, 47, __pyx_L1_error)
+  __pyx_tuple__352 = PyTuple_Pack(2, __pyx_n_u__350, __pyx_n_u__351); if (unlikely(!__pyx_tuple__352)) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__352);
   __Pyx_GIVEREF(__pyx_tuple__352);
 
-  /* "neologdn.pyx":48
+  /* "neologdn.pyx":55
  *     ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', '')
  */
-  __pyx_tuple__355 = PyTuple_Pack(2, __pyx_n_u__353, __pyx_n_u__354); if (unlikely(!__pyx_tuple__355)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __pyx_tuple__355 = PyTuple_Pack(2, __pyx_n_u__353, __pyx_n_u__354); if (unlikely(!__pyx_tuple__355)) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__355);
   __Pyx_GIVEREF(__pyx_tuple__355);
-  __pyx_tuple__358 = PyTuple_Pack(2, __pyx_n_u__356, __pyx_n_u__357); if (unlikely(!__pyx_tuple__358)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __pyx_tuple__358 = PyTuple_Pack(2, __pyx_n_u__356, __pyx_n_u__357); if (unlikely(!__pyx_tuple__358)) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__358);
   __Pyx_GIVEREF(__pyx_tuple__358);
-  __pyx_tuple__361 = PyTuple_Pack(2, __pyx_n_u__359, __pyx_n_u__360); if (unlikely(!__pyx_tuple__361)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __pyx_tuple__361 = PyTuple_Pack(2, __pyx_n_u__359, __pyx_n_u__360); if (unlikely(!__pyx_tuple__361)) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__361);
   __Pyx_GIVEREF(__pyx_tuple__361);
-  __pyx_tuple__364 = PyTuple_Pack(2, __pyx_n_u__362, __pyx_n_u__363); if (unlikely(!__pyx_tuple__364)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __pyx_tuple__364 = PyTuple_Pack(2, __pyx_n_u__362, __pyx_n_u__363); if (unlikely(!__pyx_tuple__364)) __PYX_ERR(0, 55, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__364);
   __Pyx_GIVEREF(__pyx_tuple__364);
 
-  /* "neologdn.pyx":49
+  /* "neologdn.pyx":56
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', '')
  * )
  */
-  __pyx_tuple__367 = PyTuple_Pack(2, __pyx_kp_u__365, __pyx_kp_u__366); if (unlikely(!__pyx_tuple__367)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_tuple__367 = PyTuple_Pack(2, __pyx_kp_u__365, __pyx_kp_u__366); if (unlikely(!__pyx_tuple__367)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__367);
   __Pyx_GIVEREF(__pyx_tuple__367);
-  __pyx_tuple__370 = PyTuple_Pack(2, __pyx_kp_u__368, __pyx_kp_u__369); if (unlikely(!__pyx_tuple__370)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_tuple__370 = PyTuple_Pack(2, __pyx_kp_u__368, __pyx_kp_u__369); if (unlikely(!__pyx_tuple__370)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__370);
   __Pyx_GIVEREF(__pyx_tuple__370);
-  __pyx_tuple__373 = PyTuple_Pack(2, __pyx_kp_u__371, __pyx_kp_u__372); if (unlikely(!__pyx_tuple__373)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_tuple__373 = PyTuple_Pack(2, __pyx_kp_u__371, __pyx_kp_u__372); if (unlikely(!__pyx_tuple__373)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__373);
   __Pyx_GIVEREF(__pyx_tuple__373);
-  __pyx_tuple__376 = PyTuple_Pack(2, __pyx_kp_u__374, __pyx_n_u__375); if (unlikely(!__pyx_tuple__376)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_tuple__376 = PyTuple_Pack(2, __pyx_kp_u__374, __pyx_n_u__375); if (unlikely(!__pyx_tuple__376)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__376);
   __Pyx_GIVEREF(__pyx_tuple__376);
-  __pyx_tuple__379 = PyTuple_Pack(2, __pyx_kp_u__377, __pyx_n_u__378); if (unlikely(!__pyx_tuple__379)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __pyx_tuple__379 = PyTuple_Pack(2, __pyx_kp_u__377, __pyx_n_u__378); if (unlikely(!__pyx_tuple__379)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__379);
   __Pyx_GIVEREF(__pyx_tuple__379);
 
-  /* "neologdn.pyx":50
+  /* "neologdn.pyx":57
  *     ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', '')             # <<<<<<<<<<<<<<
  * )
  * DIGIT = (
  */
-  __pyx_tuple__382 = PyTuple_Pack(2, __pyx_kp_u__380, __pyx_kp_u__381); if (unlikely(!__pyx_tuple__382)) __PYX_ERR(0, 50, __pyx_L1_error)
+  __pyx_tuple__382 = PyTuple_Pack(2, __pyx_kp_u__380, __pyx_kp_u__381); if (unlikely(!__pyx_tuple__382)) __PYX_ERR(0, 57, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__382);
   __Pyx_GIVEREF(__pyx_tuple__382);
-  __pyx_tuple__385 = PyTuple_Pack(2, __pyx_kp_u__383, __pyx_kp_u__384); if (unlikely(!__pyx_tuple__385)) __PYX_ERR(0, 50, __pyx_L1_error)
+  __pyx_tuple__385 = PyTuple_Pack(2, __pyx_kp_u__383, __pyx_kp_u__384); if (unlikely(!__pyx_tuple__385)) __PYX_ERR(0, 57, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__385);
   __Pyx_GIVEREF(__pyx_tuple__385);
-  __pyx_tuple__388 = PyTuple_Pack(2, __pyx_n_u__386, __pyx_n_u__387); if (unlikely(!__pyx_tuple__388)) __PYX_ERR(0, 50, __pyx_L1_error)
+  __pyx_tuple__388 = PyTuple_Pack(2, __pyx_n_u__386, __pyx_n_u__387); if (unlikely(!__pyx_tuple__388)) __PYX_ERR(0, 57, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__388);
   __Pyx_GIVEREF(__pyx_tuple__388);
 
-  /* "neologdn.pyx":37
+  /* "neologdn.pyx":44
  * )
  * KANA = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__389 = PyTuple_Pack(63, __pyx_tuple__202, __pyx_tuple__205, __pyx_tuple__208, __pyx_tuple__211, __pyx_tuple__214, __pyx_tuple__217, __pyx_tuple__220, __pyx_tuple__223, __pyx_tuple__226, __pyx_tuple__229, __pyx_tuple__232, __pyx_tuple__235, __pyx_tuple__238, __pyx_tuple__241, __pyx_tuple__244, __pyx_tuple__247, __pyx_tuple__250, __pyx_tuple__253, __pyx_tuple__256, __pyx_tuple__259, __pyx_tuple__262, __pyx_tuple__265, __pyx_tuple__268, __pyx_tuple__271, __pyx_tuple__274, __pyx_tuple__277, __pyx_tuple__280, __pyx_tuple__283, __pyx_tuple__286, __pyx_tuple__289, __pyx_tuple__292, __pyx_tuple__295, __pyx_tuple__298, __pyx_tuple__301, __pyx_tuple__304, __pyx_tuple__307, __pyx_tuple__310, __pyx_tuple__313, __pyx_tuple__316, __pyx_tuple__319, __pyx_tuple__322, __pyx_tuple__325, __pyx_tuple__328, __pyx_tuple__331, __pyx_tuple__334, __pyx_tuple__337, __pyx_tuple__340, __pyx_tuple__343, __pyx_tuple__346, __pyx_tuple__349, __pyx_tuple__352, __pyx_tuple__355, __pyx_tuple__358, __pyx_tuple__361, __pyx_tuple__364, __pyx_tuple__367, __pyx_tuple__370, __pyx_tuple__373, __pyx_tuple__376, __pyx_tuple__379, __pyx_tuple__382, __pyx_tuple__385, __pyx_tuple__388); if (unlikely(!__pyx_tuple__389)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __pyx_tuple__389 = PyTuple_Pack(63, __pyx_tuple__202, __pyx_tuple__205, __pyx_tuple__208, __pyx_tuple__211, __pyx_tuple__214, __pyx_tuple__217, __pyx_tuple__220, __pyx_tuple__223, __pyx_tuple__226, __pyx_tuple__229, __pyx_tuple__232, __pyx_tuple__235, __pyx_tuple__238, __pyx_tuple__241, __pyx_tuple__244, __pyx_tuple__247, __pyx_tuple__250, __pyx_tuple__253, __pyx_tuple__256, __pyx_tuple__259, __pyx_tuple__262, __pyx_tuple__265, __pyx_tuple__268, __pyx_tuple__271, __pyx_tuple__274, __pyx_tuple__277, __pyx_tuple__280, __pyx_tuple__283, __pyx_tuple__286, __pyx_tuple__289, __pyx_tuple__292, __pyx_tuple__295, __pyx_tuple__298, __pyx_tuple__301, __pyx_tuple__304, __pyx_tuple__307, __pyx_tuple__310, __pyx_tuple__313, __pyx_tuple__316, __pyx_tuple__319, __pyx_tuple__322, __pyx_tuple__325, __pyx_tuple__328, __pyx_tuple__331, __pyx_tuple__334, __pyx_tuple__337, __pyx_tuple__340, __pyx_tuple__343, __pyx_tuple__346, __pyx_tuple__349, __pyx_tuple__352, __pyx_tuple__355, __pyx_tuple__358, __pyx_tuple__361, __pyx_tuple__364, __pyx_tuple__367, __pyx_tuple__370, __pyx_tuple__373, __pyx_tuple__376, __pyx_tuple__379, __pyx_tuple__382, __pyx_tuple__385, __pyx_tuple__388); if (unlikely(!__pyx_tuple__389)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__389);
   __Pyx_GIVEREF(__pyx_tuple__389);
 
-  /* "neologdn.pyx":53
+  /* "neologdn.pyx":60
  * )
  * DIGIT = (
  *     ('', '0'), ('', '1'), ('', '2'), ('', '3'), ('', '4'),             # <<<<<<<<<<<<<<
  *     ('', '5'), ('', '6'), ('', '7'), ('', '8'), ('', '9')
  * )
  */
-  __pyx_tuple__391 = PyTuple_Pack(2, __pyx_n_u__390, __pyx_kp_u_0); if (unlikely(!__pyx_tuple__391)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_tuple__391 = PyTuple_Pack(2, __pyx_n_u__390, __pyx_kp_u_0); if (unlikely(!__pyx_tuple__391)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__391);
   __Pyx_GIVEREF(__pyx_tuple__391);
-  __pyx_tuple__393 = PyTuple_Pack(2, __pyx_n_u__392, __pyx_kp_u_1); if (unlikely(!__pyx_tuple__393)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_tuple__393 = PyTuple_Pack(2, __pyx_n_u__392, __pyx_kp_u_1); if (unlikely(!__pyx_tuple__393)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__393);
   __Pyx_GIVEREF(__pyx_tuple__393);
-  __pyx_tuple__395 = PyTuple_Pack(2, __pyx_n_u__394, __pyx_kp_u_2); if (unlikely(!__pyx_tuple__395)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_tuple__395 = PyTuple_Pack(2, __pyx_n_u__394, __pyx_kp_u_2); if (unlikely(!__pyx_tuple__395)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__395);
   __Pyx_GIVEREF(__pyx_tuple__395);
-  __pyx_tuple__397 = PyTuple_Pack(2, __pyx_n_u__396, __pyx_kp_u_3); if (unlikely(!__pyx_tuple__397)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_tuple__397 = PyTuple_Pack(2, __pyx_n_u__396, __pyx_kp_u_3); if (unlikely(!__pyx_tuple__397)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__397);
   __Pyx_GIVEREF(__pyx_tuple__397);
-  __pyx_tuple__399 = PyTuple_Pack(2, __pyx_n_u__398, __pyx_kp_u_4); if (unlikely(!__pyx_tuple__399)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_tuple__399 = PyTuple_Pack(2, __pyx_n_u__398, __pyx_kp_u_4); if (unlikely(!__pyx_tuple__399)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__399);
   __Pyx_GIVEREF(__pyx_tuple__399);
 
-  /* "neologdn.pyx":54
+  /* "neologdn.pyx":61
  * DIGIT = (
  *     ('', '0'), ('', '1'), ('', '2'), ('', '3'), ('', '4'),
  *     ('', '5'), ('', '6'), ('', '7'), ('', '8'), ('', '9')             # <<<<<<<<<<<<<<
  * )
  * KANA_TEN = (
  */
-  __pyx_tuple__401 = PyTuple_Pack(2, __pyx_n_u__400, __pyx_kp_u_5); if (unlikely(!__pyx_tuple__401)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __pyx_tuple__401 = PyTuple_Pack(2, __pyx_n_u__400, __pyx_kp_u_5); if (unlikely(!__pyx_tuple__401)) __PYX_ERR(0, 61, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__401);
   __Pyx_GIVEREF(__pyx_tuple__401);
-  __pyx_tuple__403 = PyTuple_Pack(2, __pyx_n_u__402, __pyx_kp_u_6); if (unlikely(!__pyx_tuple__403)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __pyx_tuple__403 = PyTuple_Pack(2, __pyx_n_u__402, __pyx_kp_u_6); if (unlikely(!__pyx_tuple__403)) __PYX_ERR(0, 61, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__403);
   __Pyx_GIVEREF(__pyx_tuple__403);
-  __pyx_tuple__405 = PyTuple_Pack(2, __pyx_n_u__404, __pyx_kp_u_7); if (unlikely(!__pyx_tuple__405)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __pyx_tuple__405 = PyTuple_Pack(2, __pyx_n_u__404, __pyx_kp_u_7); if (unlikely(!__pyx_tuple__405)) __PYX_ERR(0, 61, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__405);
   __Pyx_GIVEREF(__pyx_tuple__405);
-  __pyx_tuple__407 = PyTuple_Pack(2, __pyx_n_u__406, __pyx_kp_u_8); if (unlikely(!__pyx_tuple__407)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __pyx_tuple__407 = PyTuple_Pack(2, __pyx_n_u__406, __pyx_kp_u_8); if (unlikely(!__pyx_tuple__407)) __PYX_ERR(0, 61, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__407);
   __Pyx_GIVEREF(__pyx_tuple__407);
-  __pyx_tuple__409 = PyTuple_Pack(2, __pyx_n_u__408, __pyx_kp_u_9); if (unlikely(!__pyx_tuple__409)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __pyx_tuple__409 = PyTuple_Pack(2, __pyx_n_u__408, __pyx_kp_u_9); if (unlikely(!__pyx_tuple__409)) __PYX_ERR(0, 61, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__409);
   __Pyx_GIVEREF(__pyx_tuple__409);
 
-  /* "neologdn.pyx":53
+  /* "neologdn.pyx":60
  * )
  * DIGIT = (
  *     ('', '0'), ('', '1'), ('', '2'), ('', '3'), ('', '4'),             # <<<<<<<<<<<<<<
  *     ('', '5'), ('', '6'), ('', '7'), ('', '8'), ('', '9')
  * )
  */
-  __pyx_tuple__410 = PyTuple_Pack(10, __pyx_tuple__391, __pyx_tuple__393, __pyx_tuple__395, __pyx_tuple__397, __pyx_tuple__399, __pyx_tuple__401, __pyx_tuple__403, __pyx_tuple__405, __pyx_tuple__407, __pyx_tuple__409); if (unlikely(!__pyx_tuple__410)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_tuple__410 = PyTuple_Pack(10, __pyx_tuple__391, __pyx_tuple__393, __pyx_tuple__395, __pyx_tuple__397, __pyx_tuple__399, __pyx_tuple__401, __pyx_tuple__403, __pyx_tuple__405, __pyx_tuple__407, __pyx_tuple__409); if (unlikely(!__pyx_tuple__410)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__410);
   __Pyx_GIVEREF(__pyx_tuple__410);
 
-  /* "neologdn.pyx":57
+  /* "neologdn.pyx":64
  * )
  * KANA_TEN = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__412 = PyTuple_Pack(2, __pyx_n_u__216, __pyx_n_u__411); if (unlikely(!__pyx_tuple__412)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_tuple__412 = PyTuple_Pack(2, __pyx_n_u__216, __pyx_n_u__411); if (unlikely(!__pyx_tuple__412)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__412);
   __Pyx_GIVEREF(__pyx_tuple__412);
-  __pyx_tuple__414 = PyTuple_Pack(2, __pyx_n_u__219, __pyx_n_u__413); if (unlikely(!__pyx_tuple__414)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_tuple__414 = PyTuple_Pack(2, __pyx_n_u__219, __pyx_n_u__413); if (unlikely(!__pyx_tuple__414)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__414);
   __Pyx_GIVEREF(__pyx_tuple__414);
-  __pyx_tuple__416 = PyTuple_Pack(2, __pyx_n_u__222, __pyx_n_u__415); if (unlikely(!__pyx_tuple__416)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_tuple__416 = PyTuple_Pack(2, __pyx_n_u__222, __pyx_n_u__415); if (unlikely(!__pyx_tuple__416)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__416);
   __Pyx_GIVEREF(__pyx_tuple__416);
-  __pyx_tuple__418 = PyTuple_Pack(2, __pyx_n_u__225, __pyx_n_u__417); if (unlikely(!__pyx_tuple__418)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_tuple__418 = PyTuple_Pack(2, __pyx_n_u__225, __pyx_n_u__417); if (unlikely(!__pyx_tuple__418)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__418);
   __Pyx_GIVEREF(__pyx_tuple__418);
-  __pyx_tuple__420 = PyTuple_Pack(2, __pyx_n_u__228, __pyx_n_u__419); if (unlikely(!__pyx_tuple__420)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_tuple__420 = PyTuple_Pack(2, __pyx_n_u__228, __pyx_n_u__419); if (unlikely(!__pyx_tuple__420)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__420);
   __Pyx_GIVEREF(__pyx_tuple__420);
 
-  /* "neologdn.pyx":58
+  /* "neologdn.pyx":65
  * KANA_TEN = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__422 = PyTuple_Pack(2, __pyx_n_u__231, __pyx_n_u__421); if (unlikely(!__pyx_tuple__422)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __pyx_tuple__422 = PyTuple_Pack(2, __pyx_n_u__231, __pyx_n_u__421); if (unlikely(!__pyx_tuple__422)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__422);
   __Pyx_GIVEREF(__pyx_tuple__422);
-  __pyx_tuple__424 = PyTuple_Pack(2, __pyx_n_u__234, __pyx_n_u__423); if (unlikely(!__pyx_tuple__424)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __pyx_tuple__424 = PyTuple_Pack(2, __pyx_n_u__234, __pyx_n_u__423); if (unlikely(!__pyx_tuple__424)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__424);
   __Pyx_GIVEREF(__pyx_tuple__424);
-  __pyx_tuple__426 = PyTuple_Pack(2, __pyx_n_u__237, __pyx_n_u__425); if (unlikely(!__pyx_tuple__426)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __pyx_tuple__426 = PyTuple_Pack(2, __pyx_n_u__237, __pyx_n_u__425); if (unlikely(!__pyx_tuple__426)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__426);
   __Pyx_GIVEREF(__pyx_tuple__426);
-  __pyx_tuple__428 = PyTuple_Pack(2, __pyx_n_u__240, __pyx_n_u__427); if (unlikely(!__pyx_tuple__428)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __pyx_tuple__428 = PyTuple_Pack(2, __pyx_n_u__240, __pyx_n_u__427); if (unlikely(!__pyx_tuple__428)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__428);
   __Pyx_GIVEREF(__pyx_tuple__428);
-  __pyx_tuple__430 = PyTuple_Pack(2, __pyx_n_u__243, __pyx_n_u__429); if (unlikely(!__pyx_tuple__430)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __pyx_tuple__430 = PyTuple_Pack(2, __pyx_n_u__243, __pyx_n_u__429); if (unlikely(!__pyx_tuple__430)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__430);
   __Pyx_GIVEREF(__pyx_tuple__430);
 
-  /* "neologdn.pyx":59
+  /* "neologdn.pyx":66
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', '')
  */
-  __pyx_tuple__432 = PyTuple_Pack(2, __pyx_n_u__246, __pyx_n_u__431); if (unlikely(!__pyx_tuple__432)) __PYX_ERR(0, 59, __pyx_L1_error)
+  __pyx_tuple__432 = PyTuple_Pack(2, __pyx_n_u__246, __pyx_n_u__431); if (unlikely(!__pyx_tuple__432)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__432);
   __Pyx_GIVEREF(__pyx_tuple__432);
-  __pyx_tuple__434 = PyTuple_Pack(2, __pyx_n_u__249, __pyx_n_u__433); if (unlikely(!__pyx_tuple__434)) __PYX_ERR(0, 59, __pyx_L1_error)
+  __pyx_tuple__434 = PyTuple_Pack(2, __pyx_n_u__249, __pyx_n_u__433); if (unlikely(!__pyx_tuple__434)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__434);
   __Pyx_GIVEREF(__pyx_tuple__434);
-  __pyx_tuple__436 = PyTuple_Pack(2, __pyx_n_u__252, __pyx_n_u__435); if (unlikely(!__pyx_tuple__436)) __PYX_ERR(0, 59, __pyx_L1_error)
+  __pyx_tuple__436 = PyTuple_Pack(2, __pyx_n_u__252, __pyx_n_u__435); if (unlikely(!__pyx_tuple__436)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__436);
   __Pyx_GIVEREF(__pyx_tuple__436);
-  __pyx_tuple__438 = PyTuple_Pack(2, __pyx_n_u__255, __pyx_n_u__437); if (unlikely(!__pyx_tuple__438)) __PYX_ERR(0, 59, __pyx_L1_error)
+  __pyx_tuple__438 = PyTuple_Pack(2, __pyx_n_u__255, __pyx_n_u__437); if (unlikely(!__pyx_tuple__438)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__438);
   __Pyx_GIVEREF(__pyx_tuple__438);
-  __pyx_tuple__440 = PyTuple_Pack(2, __pyx_n_u__258, __pyx_n_u__439); if (unlikely(!__pyx_tuple__440)) __PYX_ERR(0, 59, __pyx_L1_error)
+  __pyx_tuple__440 = PyTuple_Pack(2, __pyx_n_u__258, __pyx_n_u__439); if (unlikely(!__pyx_tuple__440)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__440);
   __Pyx_GIVEREF(__pyx_tuple__440);
 
-  /* "neologdn.pyx":60
+  /* "neologdn.pyx":67
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', '')
  * )
  */
-  __pyx_tuple__442 = PyTuple_Pack(2, __pyx_n_u__276, __pyx_n_u__441); if (unlikely(!__pyx_tuple__442)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __pyx_tuple__442 = PyTuple_Pack(2, __pyx_n_u__276, __pyx_n_u__441); if (unlikely(!__pyx_tuple__442)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__442);
   __Pyx_GIVEREF(__pyx_tuple__442);
-  __pyx_tuple__444 = PyTuple_Pack(2, __pyx_n_u__279, __pyx_n_u__443); if (unlikely(!__pyx_tuple__444)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __pyx_tuple__444 = PyTuple_Pack(2, __pyx_n_u__279, __pyx_n_u__443); if (unlikely(!__pyx_tuple__444)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__444);
   __Pyx_GIVEREF(__pyx_tuple__444);
-  __pyx_tuple__446 = PyTuple_Pack(2, __pyx_n_u__282, __pyx_n_u__445); if (unlikely(!__pyx_tuple__446)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __pyx_tuple__446 = PyTuple_Pack(2, __pyx_n_u__282, __pyx_n_u__445); if (unlikely(!__pyx_tuple__446)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__446);
   __Pyx_GIVEREF(__pyx_tuple__446);
-  __pyx_tuple__448 = PyTuple_Pack(2, __pyx_n_u__285, __pyx_n_u__447); if (unlikely(!__pyx_tuple__448)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __pyx_tuple__448 = PyTuple_Pack(2, __pyx_n_u__285, __pyx_n_u__447); if (unlikely(!__pyx_tuple__448)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__448);
   __Pyx_GIVEREF(__pyx_tuple__448);
-  __pyx_tuple__450 = PyTuple_Pack(2, __pyx_n_u__288, __pyx_n_u__449); if (unlikely(!__pyx_tuple__450)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __pyx_tuple__450 = PyTuple_Pack(2, __pyx_n_u__288, __pyx_n_u__449); if (unlikely(!__pyx_tuple__450)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__450);
   __Pyx_GIVEREF(__pyx_tuple__450);
 
-  /* "neologdn.pyx":61
+  /* "neologdn.pyx":68
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', '')             # <<<<<<<<<<<<<<
  * )
  * KANA_MARU = (
  */
-  __pyx_tuple__452 = PyTuple_Pack(2, __pyx_n_u__207, __pyx_n_u__451); if (unlikely(!__pyx_tuple__452)) __PYX_ERR(0, 61, __pyx_L1_error)
+  __pyx_tuple__452 = PyTuple_Pack(2, __pyx_n_u__207, __pyx_n_u__451); if (unlikely(!__pyx_tuple__452)) __PYX_ERR(0, 68, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__452);
   __Pyx_GIVEREF(__pyx_tuple__452);
-  __pyx_tuple__455 = PyTuple_Pack(2, __pyx_n_u__453, __pyx_n_u__454); if (unlikely(!__pyx_tuple__455)) __PYX_ERR(0, 61, __pyx_L1_error)
+  __pyx_tuple__455 = PyTuple_Pack(2, __pyx_n_u__453, __pyx_n_u__454); if (unlikely(!__pyx_tuple__455)) __PYX_ERR(0, 68, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__455);
   __Pyx_GIVEREF(__pyx_tuple__455);
 
-  /* "neologdn.pyx":57
+  /* "neologdn.pyx":64
  * )
  * KANA_TEN = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  __pyx_tuple__456 = PyTuple_Pack(22, __pyx_tuple__412, __pyx_tuple__414, __pyx_tuple__416, __pyx_tuple__418, __pyx_tuple__420, __pyx_tuple__422, __pyx_tuple__424, __pyx_tuple__426, __pyx_tuple__428, __pyx_tuple__430, __pyx_tuple__432, __pyx_tuple__434, __pyx_tuple__436, __pyx_tuple__438, __pyx_tuple__440, __pyx_tuple__442, __pyx_tuple__444, __pyx_tuple__446, __pyx_tuple__448, __pyx_tuple__450, __pyx_tuple__452, __pyx_tuple__455); if (unlikely(!__pyx_tuple__456)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_tuple__456 = PyTuple_Pack(22, __pyx_tuple__412, __pyx_tuple__414, __pyx_tuple__416, __pyx_tuple__418, __pyx_tuple__420, __pyx_tuple__422, __pyx_tuple__424, __pyx_tuple__426, __pyx_tuple__428, __pyx_tuple__430, __pyx_tuple__432, __pyx_tuple__434, __pyx_tuple__436, __pyx_tuple__438, __pyx_tuple__440, __pyx_tuple__442, __pyx_tuple__444, __pyx_tuple__446, __pyx_tuple__448, __pyx_tuple__450, __pyx_tuple__452, __pyx_tuple__455); if (unlikely(!__pyx_tuple__456)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__456);
   __Pyx_GIVEREF(__pyx_tuple__456);
 
-  /* "neologdn.pyx":64
+  /* "neologdn.pyx":71
  * )
  * KANA_MARU = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', '')
  * )
  */
-  __pyx_tuple__458 = PyTuple_Pack(2, __pyx_n_u__276, __pyx_n_u__457); if (unlikely(!__pyx_tuple__458)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_tuple__458 = PyTuple_Pack(2, __pyx_n_u__276, __pyx_n_u__457); if (unlikely(!__pyx_tuple__458)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__458);
   __Pyx_GIVEREF(__pyx_tuple__458);
-  __pyx_tuple__460 = PyTuple_Pack(2, __pyx_n_u__279, __pyx_n_u__459); if (unlikely(!__pyx_tuple__460)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_tuple__460 = PyTuple_Pack(2, __pyx_n_u__279, __pyx_n_u__459); if (unlikely(!__pyx_tuple__460)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__460);
   __Pyx_GIVEREF(__pyx_tuple__460);
-  __pyx_tuple__462 = PyTuple_Pack(2, __pyx_n_u__282, __pyx_n_u__461); if (unlikely(!__pyx_tuple__462)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_tuple__462 = PyTuple_Pack(2, __pyx_n_u__282, __pyx_n_u__461); if (unlikely(!__pyx_tuple__462)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__462);
   __Pyx_GIVEREF(__pyx_tuple__462);
-  __pyx_tuple__464 = PyTuple_Pack(2, __pyx_n_u__285, __pyx_n_u__463); if (unlikely(!__pyx_tuple__464)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_tuple__464 = PyTuple_Pack(2, __pyx_n_u__285, __pyx_n_u__463); if (unlikely(!__pyx_tuple__464)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__464);
   __Pyx_GIVEREF(__pyx_tuple__464);
-  __pyx_tuple__466 = PyTuple_Pack(2, __pyx_n_u__288, __pyx_n_u__465); if (unlikely(!__pyx_tuple__466)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_tuple__466 = PyTuple_Pack(2, __pyx_n_u__288, __pyx_n_u__465); if (unlikely(!__pyx_tuple__466)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__466);
   __Pyx_GIVEREF(__pyx_tuple__466);
 
-  /* "neologdn.pyx":65
+  /* "neologdn.pyx":72
  * KANA_MARU = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', '')             # <<<<<<<<<<<<<<
  * )
  * 
  */
-  __pyx_tuple__469 = PyTuple_Pack(2, __pyx_n_u__467, __pyx_n_u__468); if (unlikely(!__pyx_tuple__469)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__469 = PyTuple_Pack(2, __pyx_n_u__467, __pyx_n_u__468); if (unlikely(!__pyx_tuple__469)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__469);
   __Pyx_GIVEREF(__pyx_tuple__469);
-  __pyx_tuple__472 = PyTuple_Pack(2, __pyx_n_u__470, __pyx_n_u__471); if (unlikely(!__pyx_tuple__472)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__472 = PyTuple_Pack(2, __pyx_n_u__470, __pyx_n_u__471); if (unlikely(!__pyx_tuple__472)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__472);
   __Pyx_GIVEREF(__pyx_tuple__472);
-  __pyx_tuple__475 = PyTuple_Pack(2, __pyx_n_u__473, __pyx_n_u__474); if (unlikely(!__pyx_tuple__475)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__475 = PyTuple_Pack(2, __pyx_n_u__473, __pyx_n_u__474); if (unlikely(!__pyx_tuple__475)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__475);
   __Pyx_GIVEREF(__pyx_tuple__475);
-  __pyx_tuple__478 = PyTuple_Pack(2, __pyx_n_u__476, __pyx_n_u__477); if (unlikely(!__pyx_tuple__478)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__478 = PyTuple_Pack(2, __pyx_n_u__476, __pyx_n_u__477); if (unlikely(!__pyx_tuple__478)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__478);
   __Pyx_GIVEREF(__pyx_tuple__478);
-  __pyx_tuple__481 = PyTuple_Pack(2, __pyx_n_u__479, __pyx_n_u__480); if (unlikely(!__pyx_tuple__481)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__481 = PyTuple_Pack(2, __pyx_n_u__479, __pyx_n_u__480); if (unlikely(!__pyx_tuple__481)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__481);
   __Pyx_GIVEREF(__pyx_tuple__481);
 
-  /* "neologdn.pyx":64
+  /* "neologdn.pyx":71
  * )
  * KANA_MARU = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', '')
  * )
  */
-  __pyx_tuple__482 = PyTuple_Pack(10, __pyx_tuple__458, __pyx_tuple__460, __pyx_tuple__462, __pyx_tuple__464, __pyx_tuple__466, __pyx_tuple__469, __pyx_tuple__472, __pyx_tuple__475, __pyx_tuple__478, __pyx_tuple__481); if (unlikely(!__pyx_tuple__482)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_tuple__482 = PyTuple_Pack(10, __pyx_tuple__458, __pyx_tuple__460, __pyx_tuple__462, __pyx_tuple__464, __pyx_tuple__466, __pyx_tuple__469, __pyx_tuple__472, __pyx_tuple__475, __pyx_tuple__478, __pyx_tuple__481); if (unlikely(!__pyx_tuple__482)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__482);
   __Pyx_GIVEREF(__pyx_tuple__482);
 
-  /* "neologdn.pyx":68
+  /* "neologdn.pyx":75
  * )
  * 
  * HIPHENS = ('', '', '', '', '', '', '', '', '', '')             # <<<<<<<<<<<<<<
  * CHOONPUS = ('', '', '', '', '', '', '', '')
  * TILDES = ('~', '', '', '', '', '')
  */
-  __pyx_tuple__492 = PyTuple_Pack(10, __pyx_kp_u__483, __pyx_kp_u__484, __pyx_kp_u__485, __pyx_kp_u__486, __pyx_kp_u__487, __pyx_kp_u__488, __pyx_kp_u__489, __pyx_kp_u__490, __pyx_kp_u__491, __pyx_kp_u__143); if (unlikely(!__pyx_tuple__492)) __PYX_ERR(0, 68, __pyx_L1_error)
+  __pyx_tuple__492 = PyTuple_Pack(10, __pyx_kp_u__483, __pyx_kp_u__484, __pyx_kp_u__485, __pyx_kp_u__486, __pyx_kp_u__487, __pyx_kp_u__488, __pyx_kp_u__489, __pyx_kp_u__490, __pyx_kp_u__491, __pyx_kp_u__143); if (unlikely(!__pyx_tuple__492)) __PYX_ERR(0, 75, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__492);
   __Pyx_GIVEREF(__pyx_tuple__492);
 
-  /* "neologdn.pyx":69
+  /* "neologdn.pyx":76
  * 
  * HIPHENS = ('', '', '', '', '', '', '', '', '', '')
  * CHOONPUS = ('', '', '', '', '', '', '', '')             # <<<<<<<<<<<<<<
  * TILDES = ('~', '', '', '', '', '')
  * 
  */
-  __pyx_tuple__499 = PyTuple_Pack(8, __pyx_kp_u__493, __pyx_kp_u__494, __pyx_n_u__386, __pyx_kp_u__495, __pyx_kp_u__496, __pyx_kp_u__497, __pyx_kp_u__498, __pyx_n_u__387); if (unlikely(!__pyx_tuple__499)) __PYX_ERR(0, 69, __pyx_L1_error)
+  __pyx_tuple__499 = PyTuple_Pack(8, __pyx_kp_u__493, __pyx_kp_u__494, __pyx_n_u__386, __pyx_kp_u__495, __pyx_kp_u__496, __pyx_kp_u__497, __pyx_kp_u__498, __pyx_n_u__387); if (unlikely(!__pyx_tuple__499)) __PYX_ERR(0, 76, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__499);
   __Pyx_GIVEREF(__pyx_tuple__499);
 
-  /* "neologdn.pyx":70
+  /* "neologdn.pyx":77
  * HIPHENS = ('', '', '', '', '', '', '', '', '', '')
  * CHOONPUS = ('', '', '', '', '', '', '', '')
  * TILDES = ('~', '', '', '', '', '')             # <<<<<<<<<<<<<<
  * 
  * SPACE = (' ', '')
  */
-  __pyx_tuple__506 = PyTuple_Pack(6, __pyx_kp_u__500, __pyx_kp_u__501, __pyx_kp_u__502, __pyx_kp_u__503, __pyx_kp_u__504, __pyx_kp_u__505); if (unlikely(!__pyx_tuple__506)) __PYX_ERR(0, 70, __pyx_L1_error)
+  __pyx_tuple__506 = PyTuple_Pack(6, __pyx_kp_u__500, __pyx_kp_u__501, __pyx_kp_u__502, __pyx_kp_u__503, __pyx_kp_u__504, __pyx_kp_u__505); if (unlikely(!__pyx_tuple__506)) __PYX_ERR(0, 77, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__506);
   __Pyx_GIVEREF(__pyx_tuple__506);
 
-  /* "neologdn.pyx":72
+  /* "neologdn.pyx":79
  * TILDES = ('~', '', '', '', '', '')
  * 
  * SPACE = (' ', '')             # <<<<<<<<<<<<<<
  * 
- * cdef unordered_map[Py_UNICODE, Py_UNICODE] conversion_map, kana_ten_map, kana_maru_map
+ * cdef unordered_map[Py_UCS4, Py_UCS4] conversion_map, kana_ten_map, kana_maru_map
  */
-  __pyx_tuple__509 = PyTuple_Pack(2, __pyx_kp_u__507, __pyx_kp_u__508); if (unlikely(!__pyx_tuple__509)) __PYX_ERR(0, 72, __pyx_L1_error)
+  __pyx_tuple__509 = PyTuple_Pack(2, __pyx_kp_u__507, __pyx_kp_u__508); if (unlikely(!__pyx_tuple__509)) __PYX_ERR(0, 79, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__509);
   __Pyx_GIVEREF(__pyx_tuple__509);
 
-  /* "neologdn.pyx":87
+  /* "neologdn.pyx":94
  * 
  * char_codes = itertools.chain(
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS             # <<<<<<<<<<<<<<
  *     range(12352, 12448),  # HIRAGANA
  *     range(12448, 12544),  # KATAKANA
  */
-  __pyx_tuple__510 = PyTuple_Pack(2, __pyx_int_19968, __pyx_int_40960); if (unlikely(!__pyx_tuple__510)) __PYX_ERR(0, 87, __pyx_L1_error)
+  __pyx_tuple__510 = PyTuple_Pack(2, __pyx_int_19968, __pyx_int_40960); if (unlikely(!__pyx_tuple__510)) __PYX_ERR(0, 94, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__510);
   __Pyx_GIVEREF(__pyx_tuple__510);
 
-  /* "neologdn.pyx":88
+  /* "neologdn.pyx":95
  * char_codes = itertools.chain(
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS
  *     range(12352, 12448),  # HIRAGANA             # <<<<<<<<<<<<<<
  *     range(12448, 12544),  # KATAKANA
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION
  */
-  __pyx_tuple__511 = PyTuple_Pack(2, __pyx_int_12352, __pyx_int_12448); if (unlikely(!__pyx_tuple__511)) __PYX_ERR(0, 88, __pyx_L1_error)
+  __pyx_tuple__511 = PyTuple_Pack(2, __pyx_int_12352, __pyx_int_12448); if (unlikely(!__pyx_tuple__511)) __PYX_ERR(0, 95, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__511);
   __Pyx_GIVEREF(__pyx_tuple__511);
 
-  /* "neologdn.pyx":89
+  /* "neologdn.pyx":96
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS
  *     range(12352, 12448),  # HIRAGANA
  *     range(12448, 12544),  # KATAKANA             # <<<<<<<<<<<<<<
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS
  */
-  __pyx_tuple__512 = PyTuple_Pack(2, __pyx_int_12448, __pyx_int_12544); if (unlikely(!__pyx_tuple__512)) __PYX_ERR(0, 89, __pyx_L1_error)
+  __pyx_tuple__512 = PyTuple_Pack(2, __pyx_int_12448, __pyx_int_12544); if (unlikely(!__pyx_tuple__512)) __PYX_ERR(0, 96, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__512);
   __Pyx_GIVEREF(__pyx_tuple__512);
 
-  /* "neologdn.pyx":90
+  /* "neologdn.pyx":97
  *     range(12352, 12448),  # HIRAGANA
  *     range(12448, 12544),  # KATAKANA
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION             # <<<<<<<<<<<<<<
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS
  * )
  */
-  __pyx_tuple__513 = PyTuple_Pack(2, __pyx_int_12289, __pyx_int_12352); if (unlikely(!__pyx_tuple__513)) __PYX_ERR(0, 90, __pyx_L1_error)
+  __pyx_tuple__513 = PyTuple_Pack(2, __pyx_int_12289, __pyx_int_12352); if (unlikely(!__pyx_tuple__513)) __PYX_ERR(0, 97, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__513);
   __Pyx_GIVEREF(__pyx_tuple__513);
 
-  /* "neologdn.pyx":91
+  /* "neologdn.pyx":98
  *     range(12448, 12544),  # KATAKANA
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS             # <<<<<<<<<<<<<<
  * )
  * for c in map(chr, char_codes):
  */
-  __pyx_tuple__514 = PyTuple_Pack(2, __pyx_int_65280, __pyx_int_65520); if (unlikely(!__pyx_tuple__514)) __PYX_ERR(0, 91, __pyx_L1_error)
+  __pyx_tuple__514 = PyTuple_Pack(2, __pyx_int_65280, __pyx_int_65520); if (unlikely(!__pyx_tuple__514)) __PYX_ERR(0, 98, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__514);
   __Pyx_GIVEREF(__pyx_tuple__514);
 
-  /* "neologdn.pyx":96
- *     blocks.insert(c)
+  /* "neologdn.pyx":104
+ * 
  * 
  * for c in map(chr, range(128)):             # <<<<<<<<<<<<<<
  *     basic_latin.insert(c)
  * 
  */
-  __pyx_tuple__515 = PyTuple_Pack(1, __pyx_int_128); if (unlikely(!__pyx_tuple__515)) __PYX_ERR(0, 96, __pyx_L1_error)
+  __pyx_tuple__515 = PyTuple_Pack(1, __pyx_int_128); if (unlikely(!__pyx_tuple__515)) __PYX_ERR(0, 104, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__515);
   __Pyx_GIVEREF(__pyx_tuple__515);
 
-  /* "neologdn.pyx":102
+  /* "neologdn.pyx":110
  * 
  * 
  * cpdef unicode shorten_repeat(unicode text, int repeat_threshould, int max_repeat_substr_length=8):             # <<<<<<<<<<<<<<
  *     cdef int text_length, i, repeat_length, right_start, right_end, num_repeat_substrs
  *     cdef int upper_repeat_substr_length
  */
-  __pyx_tuple__516 = PyTuple_Pack(3, __pyx_n_s_text, __pyx_n_s_repeat_threshould, __pyx_n_s_max_repeat_substr_length); if (unlikely(!__pyx_tuple__516)) __PYX_ERR(0, 102, __pyx_L1_error)
+  __pyx_tuple__516 = PyTuple_Pack(3, __pyx_n_s_text, __pyx_n_s_repeat_threshould, __pyx_n_s_max_repeat_substr_length); if (unlikely(!__pyx_tuple__516)) __PYX_ERR(0, 110, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__516);
   __Pyx_GIVEREF(__pyx_tuple__516);
-  __pyx_codeobj__517 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__516, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_neologdn_pyx, __pyx_n_s_shorten_repeat, 102, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__517)) __PYX_ERR(0, 102, __pyx_L1_error)
-  __pyx_tuple__518 = PyTuple_Pack(1, __pyx_int_8); if (unlikely(!__pyx_tuple__518)) __PYX_ERR(0, 102, __pyx_L1_error)
+  __pyx_codeobj__517 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__516, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_neologdn_pyx, __pyx_n_s_shorten_repeat, 110, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__517)) __PYX_ERR(0, 110, __pyx_L1_error)
+  __pyx_tuple__518 = PyTuple_Pack(1, __pyx_int_8); if (unlikely(!__pyx_tuple__518)) __PYX_ERR(0, 110, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__518);
   __Pyx_GIVEREF(__pyx_tuple__518);
 
-  /* "neologdn.pyx":132
+  /* "neologdn.pyx":140
  * 
  * 
  * cpdef unicode normalize(unicode text, int repeat=0, bint remove_space=True,             # <<<<<<<<<<<<<<
  *                         int max_repeat_substr_length=8, unicode tilde='remove'):
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))
  */
-  __pyx_tuple__519 = PyTuple_Pack(5, __pyx_n_s_text, __pyx_n_s_repeat, __pyx_n_s_remove_space, __pyx_n_s_max_repeat_substr_length, __pyx_n_s_tilde); if (unlikely(!__pyx_tuple__519)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_tuple__519 = PyTuple_Pack(5, __pyx_n_s_text, __pyx_n_s_repeat, __pyx_n_s_remove_space, __pyx_n_s_max_repeat_substr_length, __pyx_n_s_tilde); if (unlikely(!__pyx_tuple__519)) __PYX_ERR(0, 140, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__519);
   __Pyx_GIVEREF(__pyx_tuple__519);
-  __pyx_codeobj__520 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__519, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_neologdn_pyx, __pyx_n_s_normalize, 132, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__520)) __PYX_ERR(0, 132, __pyx_L1_error)
-  __pyx_tuple__521 = PyTuple_Pack(4, __pyx_int_0, Py_True, __pyx_int_8, __pyx_n_u_remove); if (unlikely(!__pyx_tuple__521)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_codeobj__520 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__519, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_neologdn_pyx, __pyx_n_s_normalize, 140, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__520)) __PYX_ERR(0, 140, __pyx_L1_error)
+  __pyx_tuple__521 = PyTuple_Pack(4, __pyx_int_0, Py_True, __pyx_int_8, __pyx_n_u_remove); if (unlikely(!__pyx_tuple__521)) __PYX_ERR(0, 140, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__521);
   __Pyx_GIVEREF(__pyx_tuple__521);
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
   if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
   __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_2 = PyInt_FromLong(2); if (unlikely(!__pyx_int_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_3 = PyInt_FromLong(3); if (unlikely(!__pyx_int_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_5 = PyInt_FromLong(5); if (unlikely(!__pyx_int_5)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_8 = PyInt_FromLong(8); if (unlikely(!__pyx_int_8)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_128 = PyInt_FromLong(128); if (unlikely(!__pyx_int_128)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_12289 = PyInt_FromLong(12289L); if (unlikely(!__pyx_int_12289)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_12352 = PyInt_FromLong(12352L); if (unlikely(!__pyx_int_12352)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_12448 = PyInt_FromLong(12448L); if (unlikely(!__pyx_int_12448)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_int_12544 = PyInt_FromLong(12544L); if (unlikely(!__pyx_int_12544)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -8533,16 +8821,16 @@
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   Py_ssize_t __pyx_t_5;
   PyObject *(*__pyx_t_6)(PyObject *);
   PyObject *__pyx_t_7 = NULL;
   PyObject *__pyx_t_8 = NULL;
   PyObject *(*__pyx_t_9)(PyObject *);
-  Py_UNICODE __pyx_t_10;
-  Py_UNICODE __pyx_t_11;
+  Py_UCS4 __pyx_t_10;
+  Py_UCS4 __pyx_t_11;
   PyObject *__pyx_t_12 = NULL;
   PyObject *__pyx_t_13 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
@@ -8562,42 +8850,40 @@
   #if PY_MAJOR_VERSION < 3
   __pyx_m = Py_InitModule4("neologdn", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to neologdn pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to "neologdn" pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #endif
   CYTHON_UNUSED_VAR(__pyx_t_1);
   __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 1, __pyx_L1_error)
   Py_INCREF(__pyx_d);
-  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
-  Py_INCREF(__pyx_b);
-  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
-  Py_INCREF(__pyx_cython_runtime);
+  __pyx_b = __Pyx_PyImport_AddModuleRef(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_cython_runtime = __Pyx_PyImport_AddModuleRef((const char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
   if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if CYTHON_REFNANNY
 __Pyx_RefNanny = __Pyx_RefNannyImportAPI("refnanny");
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
   __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_neologdn(void)", 0);
-  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_check_binary_version(__PYX_LIMITED_VERSION_HEX, __Pyx_get_runtime_version(), CYTHON_COMPILING_IN_LIMITED_API) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pyx_CyFunction_USED
@@ -8654,854 +8940,919 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "neologdn.pyx":6
+  /* "neologdn.pyx":5
+ * # -*- coding: utf-8 -*-
  * 
- * from __future__ import unicode_literals
  * import itertools             # <<<<<<<<<<<<<<
  * from sys import version_info
  * from libc.stdlib cimport malloc, free
  */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_itertools, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_itertools, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_itertools, __pyx_t_2) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_itertools, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "neologdn.pyx":7
- * from __future__ import unicode_literals
+  /* "neologdn.pyx":6
+ * 
  * import itertools
  * from sys import version_info             # <<<<<<<<<<<<<<
  * from libc.stdlib cimport malloc, free
  * from libcpp.unordered_map cimport unordered_map
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_version_info);
   __Pyx_GIVEREF(__pyx_n_s_version_info);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_version_info);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_sys, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L1_error)
+  if (__Pyx_PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_version_info)) __PYX_ERR(0, 6, __pyx_L1_error);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_sys, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_version_info); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_version_info); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_version_info, __pyx_t_2) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_version_info, __pyx_t_2) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "neologdn.pyx":12
+  /* "neologdn.pyx":11
  * from libcpp.unordered_set cimport unordered_set
  * 
- * VERSION = (0, 5, 2)             # <<<<<<<<<<<<<<
- * __version__ = '0.5.2'
+ * VERSION = (0, 5, 3)             # <<<<<<<<<<<<<<
+ * __version__ = '0.5.3'
  * 
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_VERSION, __pyx_tuple__3) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_VERSION, __pyx_tuple__3) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
 
-  /* "neologdn.pyx":13
+  /* "neologdn.pyx":12
  * 
- * VERSION = (0, 5, 2)
- * __version__ = '0.5.2'             # <<<<<<<<<<<<<<
+ * VERSION = (0, 5, 3)
+ * __version__ = '0.5.3'             # <<<<<<<<<<<<<<
  * 
- * ASCII = (
+ * cdef extern from "Python.h":
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_version, __pyx_kp_u_0_5_2) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_version, __pyx_kp_u_0_5_3) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
 
-  /* "neologdn.pyx":16
+  /* "neologdn.pyx":23
  * 
  * ASCII = (
  *     ('', 'a'), ('', 'b'), ('', 'c'), ('', 'd'), ('', 'e'),             # <<<<<<<<<<<<<<
  *     ('', 'f'), ('', 'g'), ('', 'h'), ('', 'i'), ('', 'j'),
  *     ('', 'k'), ('', 'l'), ('', 'm'), ('', 'n'), ('', 'o'),
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ASCII, __pyx_tuple__199) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ASCII, __pyx_tuple__199) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
 
-  /* "neologdn.pyx":37
+  /* "neologdn.pyx":44
  * )
  * KANA = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_KANA, __pyx_tuple__389) < 0) __PYX_ERR(0, 36, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_KANA, __pyx_tuple__389) < 0) __PYX_ERR(0, 43, __pyx_L1_error)
 
-  /* "neologdn.pyx":53
+  /* "neologdn.pyx":60
  * )
  * DIGIT = (
  *     ('', '0'), ('', '1'), ('', '2'), ('', '3'), ('', '4'),             # <<<<<<<<<<<<<<
  *     ('', '5'), ('', '6'), ('', '7'), ('', '8'), ('', '9')
  * )
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DIGIT, __pyx_tuple__410) < 0) __PYX_ERR(0, 52, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DIGIT, __pyx_tuple__410) < 0) __PYX_ERR(0, 59, __pyx_L1_error)
 
-  /* "neologdn.pyx":57
+  /* "neologdn.pyx":64
  * )
  * KANA_TEN = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_KANA_TEN, __pyx_tuple__456) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_KANA_TEN, __pyx_tuple__456) < 0) __PYX_ERR(0, 63, __pyx_L1_error)
 
-  /* "neologdn.pyx":64
+  /* "neologdn.pyx":71
  * )
  * KANA_MARU = (
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', ''),             # <<<<<<<<<<<<<<
  *     ('', ''), ('', ''), ('', ''), ('', ''), ('', '')
  * )
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_KANA_MARU, __pyx_tuple__482) < 0) __PYX_ERR(0, 63, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_KANA_MARU, __pyx_tuple__482) < 0) __PYX_ERR(0, 70, __pyx_L1_error)
 
-  /* "neologdn.pyx":68
+  /* "neologdn.pyx":75
  * )
  * 
  * HIPHENS = ('', '', '', '', '', '', '', '', '', '')             # <<<<<<<<<<<<<<
  * CHOONPUS = ('', '', '', '', '', '', '', '')
  * TILDES = ('~', '', '', '', '', '')
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_HIPHENS, __pyx_tuple__492) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_HIPHENS, __pyx_tuple__492) < 0) __PYX_ERR(0, 75, __pyx_L1_error)
 
-  /* "neologdn.pyx":69
+  /* "neologdn.pyx":76
  * 
  * HIPHENS = ('', '', '', '', '', '', '', '', '', '')
  * CHOONPUS = ('', '', '', '', '', '', '', '')             # <<<<<<<<<<<<<<
  * TILDES = ('~', '', '', '', '', '')
  * 
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_CHOONPUS, __pyx_tuple__499) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_CHOONPUS, __pyx_tuple__499) < 0) __PYX_ERR(0, 76, __pyx_L1_error)
 
-  /* "neologdn.pyx":70
+  /* "neologdn.pyx":77
  * HIPHENS = ('', '', '', '', '', '', '', '', '', '')
  * CHOONPUS = ('', '', '', '', '', '', '', '')
  * TILDES = ('~', '', '', '', '', '')             # <<<<<<<<<<<<<<
  * 
  * SPACE = (' ', '')
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_TILDES, __pyx_tuple__506) < 0) __PYX_ERR(0, 70, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_TILDES, __pyx_tuple__506) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
 
-  /* "neologdn.pyx":72
+  /* "neologdn.pyx":79
  * TILDES = ('~', '', '', '', '', '')
  * 
  * SPACE = (' ', '')             # <<<<<<<<<<<<<<
  * 
- * cdef unordered_map[Py_UNICODE, Py_UNICODE] conversion_map, kana_ten_map, kana_maru_map
+ * cdef unordered_map[Py_UCS4, Py_UCS4] conversion_map, kana_ten_map, kana_maru_map
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SPACE, __pyx_tuple__509) < 0) __PYX_ERR(0, 72, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SPACE, __pyx_tuple__509) < 0) __PYX_ERR(0, 79, __pyx_L1_error)
 
-  /* "neologdn.pyx":77
- * cdef unordered_set[Py_UNICODE] blocks, basic_latin
+  /* "neologdn.pyx":84
+ * cdef unordered_set[Py_UCS4] blocks, basic_latin
  * 
  * for (before, after) in (ASCII + DIGIT + KANA):             # <<<<<<<<<<<<<<
  *     conversion_map[before] = after
  * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_ASCII); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_ASCII); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_DIGIT); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_DIGIT); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 84, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_KANA); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_KANA); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = PyNumber_Add(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __pyx_t_3 = PyNumber_Add(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
-    __pyx_t_2 = __pyx_t_3; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
+    __pyx_t_2 = __pyx_t_3; __Pyx_INCREF(__pyx_t_2);
+    __pyx_t_5 = 0;
     __pyx_t_6 = NULL;
   } else {
-    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 77, __pyx_L1_error)
+    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 77, __pyx_L1_error)
+    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 84, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   for (;;) {
     if (likely(!__pyx_t_6)) {
       if (likely(PyList_CheckExact(__pyx_t_2))) {
-        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_2);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 84, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 77, __pyx_L1_error)
+        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 84, __pyx_L1_error)
         #else
-        __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 77, __pyx_L1_error)
+        __pyx_t_3 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_3);
         #endif
       } else {
-        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_2);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 84, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 77, __pyx_L1_error)
+        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 84, __pyx_L1_error)
         #else
-        __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 77, __pyx_L1_error)
+        __pyx_t_3 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_3);
         #endif
       }
     } else {
       __pyx_t_3 = __pyx_t_6(__pyx_t_2);
       if (unlikely(!__pyx_t_3)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 77, __pyx_L1_error)
+          else __PYX_ERR(0, 84, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_3);
     }
     if ((likely(PyTuple_CheckExact(__pyx_t_3))) || (PyList_CheckExact(__pyx_t_3))) {
       PyObject* sequence = __pyx_t_3;
       Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
       if (unlikely(size != 2)) {
         if (size > 2) __Pyx_RaiseTooManyValuesError(2);
         else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-        __PYX_ERR(0, 77, __pyx_L1_error)
+        __PYX_ERR(0, 84, __pyx_L1_error)
       }
       #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
       if (likely(PyTuple_CheckExact(sequence))) {
         __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
         __pyx_t_7 = PyTuple_GET_ITEM(sequence, 1); 
       } else {
         __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
         __pyx_t_7 = PyList_GET_ITEM(sequence, 1); 
       }
       __Pyx_INCREF(__pyx_t_4);
       __Pyx_INCREF(__pyx_t_7);
       #else
-      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 77, __pyx_L1_error)
+      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 84, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_7 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 77, __pyx_L1_error)
+      __pyx_t_7 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 84, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
       #endif
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     } else {
       Py_ssize_t index = -1;
-      __pyx_t_8 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 77, __pyx_L1_error)
+      __pyx_t_8 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 84, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8);
       index = 0; __pyx_t_4 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_4)) goto __pyx_L4_unpacking_failed;
       __Pyx_GOTREF(__pyx_t_4);
       index = 1; __pyx_t_7 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_7)) goto __pyx_L4_unpacking_failed;
       __Pyx_GOTREF(__pyx_t_7);
-      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 2) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 2) < 0) __PYX_ERR(0, 84, __pyx_L1_error)
       __pyx_t_9 = NULL;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       goto __pyx_L5_unpacking_done;
       __pyx_L4_unpacking_failed:;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       __pyx_t_9 = NULL;
       if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-      __PYX_ERR(0, 77, __pyx_L1_error)
+      __PYX_ERR(0, 84, __pyx_L1_error)
       __pyx_L5_unpacking_done:;
     }
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_before, __pyx_t_4) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_before, __pyx_t_4) < 0) __PYX_ERR(0, 84, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_after, __pyx_t_7) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_after, __pyx_t_7) < 0) __PYX_ERR(0, 84, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-    /* "neologdn.pyx":78
+    /* "neologdn.pyx":85
  * 
  * for (before, after) in (ASCII + DIGIT + KANA):
  *     conversion_map[before] = after             # <<<<<<<<<<<<<<
  * 
  * for (before, after) in KANA_TEN:
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_after); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_after); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 85, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_10 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_3); if (unlikely((__pyx_t_10 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 78, __pyx_L1_error)
+    __pyx_t_10 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_3); if (unlikely((__pyx_t_10 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 85, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_before); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_before); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 85, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_11 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_3); if (unlikely((__pyx_t_11 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 78, __pyx_L1_error)
+    __pyx_t_11 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_3); if (unlikely((__pyx_t_11 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 85, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     (__pyx_v_8neologdn_conversion_map[__pyx_t_11]) = __pyx_t_10;
 
-    /* "neologdn.pyx":77
- * cdef unordered_set[Py_UNICODE] blocks, basic_latin
+    /* "neologdn.pyx":84
+ * cdef unordered_set[Py_UCS4] blocks, basic_latin
  * 
  * for (before, after) in (ASCII + DIGIT + KANA):             # <<<<<<<<<<<<<<
  *     conversion_map[before] = after
  * 
  */
   }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "neologdn.pyx":80
+  /* "neologdn.pyx":87
  *     conversion_map[before] = after
  * 
  * for (before, after) in KANA_TEN:             # <<<<<<<<<<<<<<
  *     kana_ten_map[before] = after
  * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_KANA_TEN); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_KANA_TEN); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
-    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3); __pyx_t_5 = 0;
+    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3);
+    __pyx_t_5 = 0;
     __pyx_t_6 = NULL;
   } else {
-    __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 80, __pyx_L1_error)
+    __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 87, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 80, __pyx_L1_error)
+    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 87, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   for (;;) {
     if (likely(!__pyx_t_6)) {
       if (likely(PyList_CheckExact(__pyx_t_3))) {
-        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_3)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_3);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 87, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 80, __pyx_L1_error)
+        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 87, __pyx_L1_error)
         #else
-        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 80, __pyx_L1_error)
+        __pyx_t_2 = __Pyx_PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         #endif
       } else {
-        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_3);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 87, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 80, __pyx_L1_error)
+        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 87, __pyx_L1_error)
         #else
-        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 80, __pyx_L1_error)
+        __pyx_t_2 = __Pyx_PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         #endif
       }
     } else {
       __pyx_t_2 = __pyx_t_6(__pyx_t_3);
       if (unlikely(!__pyx_t_2)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 80, __pyx_L1_error)
+          else __PYX_ERR(0, 87, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_2);
     }
     if ((likely(PyTuple_CheckExact(__pyx_t_2))) || (PyList_CheckExact(__pyx_t_2))) {
       PyObject* sequence = __pyx_t_2;
       Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
       if (unlikely(size != 2)) {
         if (size > 2) __Pyx_RaiseTooManyValuesError(2);
         else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-        __PYX_ERR(0, 80, __pyx_L1_error)
+        __PYX_ERR(0, 87, __pyx_L1_error)
       }
       #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
       if (likely(PyTuple_CheckExact(sequence))) {
         __pyx_t_7 = PyTuple_GET_ITEM(sequence, 0); 
         __pyx_t_4 = PyTuple_GET_ITEM(sequence, 1); 
       } else {
         __pyx_t_7 = PyList_GET_ITEM(sequence, 0); 
         __pyx_t_4 = PyList_GET_ITEM(sequence, 1); 
       }
       __Pyx_INCREF(__pyx_t_7);
       __Pyx_INCREF(__pyx_t_4);
       #else
-      __pyx_t_7 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 80, __pyx_L1_error)
+      __pyx_t_7 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 87, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
-      __pyx_t_4 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 80, __pyx_L1_error)
+      __pyx_t_4 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 87, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_4);
       #endif
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     } else {
       Py_ssize_t index = -1;
-      __pyx_t_8 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 80, __pyx_L1_error)
+      __pyx_t_8 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 87, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8);
       index = 0; __pyx_t_7 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_7)) goto __pyx_L9_unpacking_failed;
       __Pyx_GOTREF(__pyx_t_7);
       index = 1; __pyx_t_4 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_4)) goto __pyx_L9_unpacking_failed;
       __Pyx_GOTREF(__pyx_t_4);
-      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 2) < 0) __PYX_ERR(0, 80, __pyx_L1_error)
+      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 2) < 0) __PYX_ERR(0, 87, __pyx_L1_error)
       __pyx_t_9 = NULL;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       goto __pyx_L10_unpacking_done;
       __pyx_L9_unpacking_failed:;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       __pyx_t_9 = NULL;
       if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-      __PYX_ERR(0, 80, __pyx_L1_error)
+      __PYX_ERR(0, 87, __pyx_L1_error)
       __pyx_L10_unpacking_done:;
     }
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_before, __pyx_t_7) < 0) __PYX_ERR(0, 80, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_before, __pyx_t_7) < 0) __PYX_ERR(0, 87, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_after, __pyx_t_4) < 0) __PYX_ERR(0, 80, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_after, __pyx_t_4) < 0) __PYX_ERR(0, 87, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-    /* "neologdn.pyx":81
+    /* "neologdn.pyx":88
  * 
  * for (before, after) in KANA_TEN:
  *     kana_ten_map[before] = after             # <<<<<<<<<<<<<<
  * 
  * for (before, after) in KANA_MARU:
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_after); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 81, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_after); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_10 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_2); if (unlikely((__pyx_t_10 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 81, __pyx_L1_error)
+    __pyx_t_10 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_2); if (unlikely((__pyx_t_10 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 88, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_before); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 81, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_before); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_11 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_2); if (unlikely((__pyx_t_11 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 81, __pyx_L1_error)
+    __pyx_t_11 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_2); if (unlikely((__pyx_t_11 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 88, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     (__pyx_v_8neologdn_kana_ten_map[__pyx_t_11]) = __pyx_t_10;
 
-    /* "neologdn.pyx":80
+    /* "neologdn.pyx":87
  *     conversion_map[before] = after
  * 
  * for (before, after) in KANA_TEN:             # <<<<<<<<<<<<<<
  *     kana_ten_map[before] = after
  * 
  */
   }
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "neologdn.pyx":83
+  /* "neologdn.pyx":90
  *     kana_ten_map[before] = after
  * 
  * for (before, after) in KANA_MARU:             # <<<<<<<<<<<<<<
  *     kana_maru_map[before] = after
  * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_KANA_MARU); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 83, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_KANA_MARU); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
-    __pyx_t_2 = __pyx_t_3; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
+    __pyx_t_2 = __pyx_t_3; __Pyx_INCREF(__pyx_t_2);
+    __pyx_t_5 = 0;
     __pyx_t_6 = NULL;
   } else {
-    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 83, __pyx_L1_error)
+    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 90, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 83, __pyx_L1_error)
+    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 90, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   for (;;) {
     if (likely(!__pyx_t_6)) {
       if (likely(PyList_CheckExact(__pyx_t_2))) {
-        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_2);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 90, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 83, __pyx_L1_error)
+        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 90, __pyx_L1_error)
         #else
-        __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 83, __pyx_L1_error)
+        __pyx_t_3 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_3);
         #endif
       } else {
-        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_2);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 90, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 83, __pyx_L1_error)
+        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 90, __pyx_L1_error)
         #else
-        __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 83, __pyx_L1_error)
+        __pyx_t_3 = __Pyx_PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_3);
         #endif
       }
     } else {
       __pyx_t_3 = __pyx_t_6(__pyx_t_2);
       if (unlikely(!__pyx_t_3)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 83, __pyx_L1_error)
+          else __PYX_ERR(0, 90, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_3);
     }
     if ((likely(PyTuple_CheckExact(__pyx_t_3))) || (PyList_CheckExact(__pyx_t_3))) {
       PyObject* sequence = __pyx_t_3;
       Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
       if (unlikely(size != 2)) {
         if (size > 2) __Pyx_RaiseTooManyValuesError(2);
         else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-        __PYX_ERR(0, 83, __pyx_L1_error)
+        __PYX_ERR(0, 90, __pyx_L1_error)
       }
       #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
       if (likely(PyTuple_CheckExact(sequence))) {
         __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
         __pyx_t_7 = PyTuple_GET_ITEM(sequence, 1); 
       } else {
         __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
         __pyx_t_7 = PyList_GET_ITEM(sequence, 1); 
       }
       __Pyx_INCREF(__pyx_t_4);
       __Pyx_INCREF(__pyx_t_7);
       #else
-      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 83, __pyx_L1_error)
+      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 90, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_7 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 83, __pyx_L1_error)
+      __pyx_t_7 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 90, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
       #endif
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     } else {
       Py_ssize_t index = -1;
-      __pyx_t_8 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 83, __pyx_L1_error)
+      __pyx_t_8 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 90, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8);
       index = 0; __pyx_t_4 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_4)) goto __pyx_L14_unpacking_failed;
       __Pyx_GOTREF(__pyx_t_4);
       index = 1; __pyx_t_7 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_7)) goto __pyx_L14_unpacking_failed;
       __Pyx_GOTREF(__pyx_t_7);
-      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 2) < 0) __PYX_ERR(0, 83, __pyx_L1_error)
+      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 2) < 0) __PYX_ERR(0, 90, __pyx_L1_error)
       __pyx_t_9 = NULL;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       goto __pyx_L15_unpacking_done;
       __pyx_L14_unpacking_failed:;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       __pyx_t_9 = NULL;
       if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-      __PYX_ERR(0, 83, __pyx_L1_error)
+      __PYX_ERR(0, 90, __pyx_L1_error)
       __pyx_L15_unpacking_done:;
     }
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_before, __pyx_t_4) < 0) __PYX_ERR(0, 83, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_before, __pyx_t_4) < 0) __PYX_ERR(0, 90, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_after, __pyx_t_7) < 0) __PYX_ERR(0, 83, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_after, __pyx_t_7) < 0) __PYX_ERR(0, 90, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-    /* "neologdn.pyx":84
+    /* "neologdn.pyx":91
  * 
  * for (before, after) in KANA_MARU:
  *     kana_maru_map[before] = after             # <<<<<<<<<<<<<<
  * 
  * char_codes = itertools.chain(
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_after); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_after); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 91, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_10 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_3); if (unlikely((__pyx_t_10 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 84, __pyx_L1_error)
+    __pyx_t_10 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_3); if (unlikely((__pyx_t_10 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 91, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_before); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_before); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 91, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_11 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_3); if (unlikely((__pyx_t_11 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 84, __pyx_L1_error)
+    __pyx_t_11 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_3); if (unlikely((__pyx_t_11 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 91, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     (__pyx_v_8neologdn_kana_maru_map[__pyx_t_11]) = __pyx_t_10;
 
-    /* "neologdn.pyx":83
+    /* "neologdn.pyx":90
  *     kana_ten_map[before] = after
  * 
  * for (before, after) in KANA_MARU:             # <<<<<<<<<<<<<<
  *     kana_maru_map[before] = after
  * 
  */
   }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "neologdn.pyx":86
+  /* "neologdn.pyx":93
  *     kana_maru_map[before] = after
  * 
  * char_codes = itertools.chain(             # <<<<<<<<<<<<<<
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS
  *     range(12352, 12448),  # HIRAGANA
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_itertools); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_itertools); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_chain); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_chain); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "neologdn.pyx":87
+  /* "neologdn.pyx":94
  * 
  * char_codes = itertools.chain(
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS             # <<<<<<<<<<<<<<
  *     range(12352, 12448),  # HIRAGANA
  *     range(12448, 12544),  # KATAKANA
  */
-  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__510, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__510, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 94, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
 
-  /* "neologdn.pyx":88
+  /* "neologdn.pyx":95
  * char_codes = itertools.chain(
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS
  *     range(12352, 12448),  # HIRAGANA             # <<<<<<<<<<<<<<
  *     range(12448, 12544),  # KATAKANA
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION
  */
-  __pyx_t_7 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__511, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 88, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__511, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 95, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
 
-  /* "neologdn.pyx":89
+  /* "neologdn.pyx":96
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS
  *     range(12352, 12448),  # HIRAGANA
  *     range(12448, 12544),  # KATAKANA             # <<<<<<<<<<<<<<
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS
  */
-  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__512, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 89, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__512, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 96, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
 
-  /* "neologdn.pyx":90
+  /* "neologdn.pyx":97
  *     range(12352, 12448),  # HIRAGANA
  *     range(12448, 12544),  # KATAKANA
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION             # <<<<<<<<<<<<<<
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS
  * )
  */
-  __pyx_t_8 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__513, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 90, __pyx_L1_error)
+  __pyx_t_8 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__513, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 97, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_8);
 
-  /* "neologdn.pyx":91
+  /* "neologdn.pyx":98
  *     range(12448, 12544),  # KATAKANA
  *     range(12289, 12352),  # CJK SYMBOLS AND PUNCTUATION
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS             # <<<<<<<<<<<<<<
  * )
  * for c in map(chr, char_codes):
  */
-  __pyx_t_12 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__514, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 91, __pyx_L1_error)
+  __pyx_t_12 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__514, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 98, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
 
-  /* "neologdn.pyx":86
+  /* "neologdn.pyx":93
  *     kana_maru_map[before] = after
  * 
  * char_codes = itertools.chain(             # <<<<<<<<<<<<<<
  *     range(19968, 40960),  # CJK UNIFIED IDEOGRAPHS
  *     range(12352, 12448),  # HIRAGANA
  */
-  __pyx_t_13 = PyTuple_New(5); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_13 = PyTuple_New(5); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_13);
   __Pyx_GIVEREF(__pyx_t_2);
-  PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_2);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_2)) __PYX_ERR(0, 93, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_7);
-  PyTuple_SET_ITEM(__pyx_t_13, 1, __pyx_t_7);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 1, __pyx_t_7)) __PYX_ERR(0, 93, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_4);
-  PyTuple_SET_ITEM(__pyx_t_13, 2, __pyx_t_4);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 2, __pyx_t_4)) __PYX_ERR(0, 93, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_8);
-  PyTuple_SET_ITEM(__pyx_t_13, 3, __pyx_t_8);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 3, __pyx_t_8)) __PYX_ERR(0, 93, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_12);
-  PyTuple_SET_ITEM(__pyx_t_13, 4, __pyx_t_12);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 4, __pyx_t_12)) __PYX_ERR(0, 93, __pyx_L1_error);
   __pyx_t_2 = 0;
   __pyx_t_7 = 0;
   __pyx_t_4 = 0;
   __pyx_t_8 = 0;
   __pyx_t_12 = 0;
-  __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_13, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_13, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_char_codes, __pyx_t_12) < 0) __PYX_ERR(0, 86, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_char_codes, __pyx_t_12) < 0) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
-  /* "neologdn.pyx":93
+  /* "neologdn.pyx":100
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS
  * )
  * for c in map(chr, char_codes):             # <<<<<<<<<<<<<<
  *     blocks.insert(c)
  * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_12, __pyx_n_s_char_codes); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 93, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_12, __pyx_n_s_char_codes); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 100, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
-  __pyx_t_13 = PyTuple_New(2); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 93, __pyx_L1_error)
+  __pyx_t_13 = PyTuple_New(2); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 100, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_13);
   __Pyx_INCREF(__pyx_builtin_chr);
   __Pyx_GIVEREF(__pyx_builtin_chr);
-  PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_builtin_chr);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_builtin_chr)) __PYX_ERR(0, 100, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_12);
-  PyTuple_SET_ITEM(__pyx_t_13, 1, __pyx_t_12);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_13, 1, __pyx_t_12)) __PYX_ERR(0, 100, __pyx_L1_error);
   __pyx_t_12 = 0;
-  __pyx_t_12 = __Pyx_PyObject_Call(__pyx_builtin_map, __pyx_t_13, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 93, __pyx_L1_error)
+  __pyx_t_12 = __Pyx_PyObject_Call(__pyx_builtin_map, __pyx_t_13, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 100, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
   __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
   if (likely(PyList_CheckExact(__pyx_t_12)) || PyTuple_CheckExact(__pyx_t_12)) {
-    __pyx_t_13 = __pyx_t_12; __Pyx_INCREF(__pyx_t_13); __pyx_t_5 = 0;
+    __pyx_t_13 = __pyx_t_12; __Pyx_INCREF(__pyx_t_13);
+    __pyx_t_5 = 0;
     __pyx_t_6 = NULL;
   } else {
-    __pyx_t_5 = -1; __pyx_t_13 = PyObject_GetIter(__pyx_t_12); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 93, __pyx_L1_error)
+    __pyx_t_5 = -1; __pyx_t_13 = PyObject_GetIter(__pyx_t_12); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 100, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_13);
-    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_13); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 93, __pyx_L1_error)
+    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_13); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 100, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
   for (;;) {
     if (likely(!__pyx_t_6)) {
       if (likely(PyList_CheckExact(__pyx_t_13))) {
-        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_13)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_13);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 100, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_12 = PyList_GET_ITEM(__pyx_t_13, __pyx_t_5); __Pyx_INCREF(__pyx_t_12); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 93, __pyx_L1_error)
+        __pyx_t_12 = PyList_GET_ITEM(__pyx_t_13, __pyx_t_5); __Pyx_INCREF(__pyx_t_12); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 100, __pyx_L1_error)
         #else
-        __pyx_t_12 = PySequence_ITEM(__pyx_t_13, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 93, __pyx_L1_error)
+        __pyx_t_12 = __Pyx_PySequence_ITEM(__pyx_t_13, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 100, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_12);
         #endif
       } else {
-        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_13)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_13);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 100, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_12 = PyTuple_GET_ITEM(__pyx_t_13, __pyx_t_5); __Pyx_INCREF(__pyx_t_12); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 93, __pyx_L1_error)
+        __pyx_t_12 = PyTuple_GET_ITEM(__pyx_t_13, __pyx_t_5); __Pyx_INCREF(__pyx_t_12); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 100, __pyx_L1_error)
         #else
-        __pyx_t_12 = PySequence_ITEM(__pyx_t_13, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 93, __pyx_L1_error)
+        __pyx_t_12 = __Pyx_PySequence_ITEM(__pyx_t_13, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 100, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_12);
         #endif
       }
     } else {
       __pyx_t_12 = __pyx_t_6(__pyx_t_13);
       if (unlikely(!__pyx_t_12)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 93, __pyx_L1_error)
+          else __PYX_ERR(0, 100, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_12);
     }
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_c, __pyx_t_12) < 0) __PYX_ERR(0, 93, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_c, __pyx_t_12) < 0) __PYX_ERR(0, 100, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
-    /* "neologdn.pyx":94
+    /* "neologdn.pyx":101
  * )
  * for c in map(chr, char_codes):
  *     blocks.insert(c)             # <<<<<<<<<<<<<<
  * 
- * for c in map(chr, range(128)):
+ * 
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_12, __pyx_n_s_c); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 94, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_12, __pyx_n_s_c); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 101, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_12);
-    __pyx_t_10 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_12); if (unlikely((__pyx_t_10 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 94, __pyx_L1_error)
+    __pyx_t_10 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_12); if (unlikely((__pyx_t_10 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 101, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
     try {
       __pyx_v_8neologdn_blocks.insert(__pyx_t_10);
     } catch(...) {
       __Pyx_CppExn2PyErr();
-      __PYX_ERR(0, 94, __pyx_L1_error)
+      __PYX_ERR(0, 101, __pyx_L1_error)
     }
 
-    /* "neologdn.pyx":93
+    /* "neologdn.pyx":100
  *     range(65280, 65520)   # HALFWIDTH AND FULLWIDTH FORMS
  * )
  * for c in map(chr, char_codes):             # <<<<<<<<<<<<<<
  *     blocks.insert(c)
  * 
  */
   }
   __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
 
-  /* "neologdn.pyx":96
- *     blocks.insert(c)
+  /* "neologdn.pyx":104
+ * 
  * 
  * for c in map(chr, range(128)):             # <<<<<<<<<<<<<<
  *     basic_latin.insert(c)
  * 
  */
-  __pyx_t_13 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__515, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 96, __pyx_L1_error)
+  __pyx_t_13 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_tuple__515, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 104, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_13);
-  __pyx_t_12 = PyTuple_New(2); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 96, __pyx_L1_error)
+  __pyx_t_12 = PyTuple_New(2); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 104, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
   __Pyx_INCREF(__pyx_builtin_chr);
   __Pyx_GIVEREF(__pyx_builtin_chr);
-  PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_builtin_chr);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_builtin_chr)) __PYX_ERR(0, 104, __pyx_L1_error);
   __Pyx_GIVEREF(__pyx_t_13);
-  PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_t_13);
+  if (__Pyx_PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_t_13)) __PYX_ERR(0, 104, __pyx_L1_error);
   __pyx_t_13 = 0;
-  __pyx_t_13 = __Pyx_PyObject_Call(__pyx_builtin_map, __pyx_t_12, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 96, __pyx_L1_error)
+  __pyx_t_13 = __Pyx_PyObject_Call(__pyx_builtin_map, __pyx_t_12, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 104, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_13);
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
   if (likely(PyList_CheckExact(__pyx_t_13)) || PyTuple_CheckExact(__pyx_t_13)) {
-    __pyx_t_12 = __pyx_t_13; __Pyx_INCREF(__pyx_t_12); __pyx_t_5 = 0;
+    __pyx_t_12 = __pyx_t_13; __Pyx_INCREF(__pyx_t_12);
+    __pyx_t_5 = 0;
     __pyx_t_6 = NULL;
   } else {
-    __pyx_t_5 = -1; __pyx_t_12 = PyObject_GetIter(__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 96, __pyx_L1_error)
+    __pyx_t_5 = -1; __pyx_t_12 = PyObject_GetIter(__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 104, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_12);
-    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 96, __pyx_L1_error)
+    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 104, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
   for (;;) {
     if (likely(!__pyx_t_6)) {
       if (likely(PyList_CheckExact(__pyx_t_12))) {
-        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_12)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyList_GET_SIZE(__pyx_t_12);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 104, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_13 = PyList_GET_ITEM(__pyx_t_12, __pyx_t_5); __Pyx_INCREF(__pyx_t_13); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 96, __pyx_L1_error)
+        __pyx_t_13 = PyList_GET_ITEM(__pyx_t_12, __pyx_t_5); __Pyx_INCREF(__pyx_t_13); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 104, __pyx_L1_error)
         #else
-        __pyx_t_13 = PySequence_ITEM(__pyx_t_12, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 96, __pyx_L1_error)
+        __pyx_t_13 = __Pyx_PySequence_ITEM(__pyx_t_12, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 104, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_13);
         #endif
       } else {
-        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_12)) break;
+        {
+          Py_ssize_t __pyx_temp = __Pyx_PyTuple_GET_SIZE(__pyx_t_12);
+          #if !CYTHON_ASSUME_SAFE_MACROS
+          if (unlikely((__pyx_temp < 0))) __PYX_ERR(0, 104, __pyx_L1_error)
+          #endif
+          if (__pyx_t_5 >= __pyx_temp) break;
+        }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_13 = PyTuple_GET_ITEM(__pyx_t_12, __pyx_t_5); __Pyx_INCREF(__pyx_t_13); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 96, __pyx_L1_error)
+        __pyx_t_13 = PyTuple_GET_ITEM(__pyx_t_12, __pyx_t_5); __Pyx_INCREF(__pyx_t_13); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 104, __pyx_L1_error)
         #else
-        __pyx_t_13 = PySequence_ITEM(__pyx_t_12, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 96, __pyx_L1_error)
+        __pyx_t_13 = __Pyx_PySequence_ITEM(__pyx_t_12, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 104, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_13);
         #endif
       }
     } else {
       __pyx_t_13 = __pyx_t_6(__pyx_t_12);
       if (unlikely(!__pyx_t_13)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 96, __pyx_L1_error)
+          else __PYX_ERR(0, 104, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_13);
     }
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_c, __pyx_t_13) < 0) __PYX_ERR(0, 96, __pyx_L1_error)
+    if (PyDict_SetItem(__pyx_d, __pyx_n_s_c, __pyx_t_13) < 0) __PYX_ERR(0, 104, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
 
-    /* "neologdn.pyx":97
+    /* "neologdn.pyx":105
  * 
  * for c in map(chr, range(128)):
  *     basic_latin.insert(c)             # <<<<<<<<<<<<<<
  * 
  * del ASCII, KANA, DIGIT, KANA_TEN, KANA_MARU, char_codes, version_info
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_c); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 97, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_c); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 105, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_13);
-    __pyx_t_10 = __Pyx_PyObject_AsPy_UNICODE(__pyx_t_13); if (unlikely((__pyx_t_10 == (Py_UNICODE)-1) && PyErr_Occurred())) __PYX_ERR(0, 97, __pyx_L1_error)
+    __pyx_t_10 = __Pyx_PyObject_AsPy_UCS4(__pyx_t_13); if (unlikely((__pyx_t_10 == (Py_UCS4)-1) && PyErr_Occurred())) __PYX_ERR(0, 105, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
     try {
       __pyx_v_8neologdn_basic_latin.insert(__pyx_t_10);
     } catch(...) {
       __Pyx_CppExn2PyErr();
-      __PYX_ERR(0, 97, __pyx_L1_error)
+      __PYX_ERR(0, 105, __pyx_L1_error)
     }
 
-    /* "neologdn.pyx":96
- *     blocks.insert(c)
+    /* "neologdn.pyx":104
+ * 
  * 
  * for c in map(chr, range(128)):             # <<<<<<<<<<<<<<
  *     basic_latin.insert(c)
  * 
  */
   }
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
-  /* "neologdn.pyx":99
+  /* "neologdn.pyx":107
  *     basic_latin.insert(c)
  * 
  * del ASCII, KANA, DIGIT, KANA_TEN, KANA_MARU, char_codes, version_info             # <<<<<<<<<<<<<<
  * 
  * 
  */
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_ASCII) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_KANA) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_DIGIT) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_KANA_TEN) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_KANA_MARU) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_char_codes) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
-  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_version_info) < 0) __PYX_ERR(0, 99, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_ASCII) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_KANA) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_DIGIT) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_KANA_TEN) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_KANA_MARU) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_char_codes) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
+  if (__Pyx_PyObject_DelAttrStr(__pyx_m, __pyx_n_s_version_info) < 0) __PYX_ERR(0, 107, __pyx_L1_error)
 
-  /* "neologdn.pyx":102
+  /* "neologdn.pyx":110
  * 
  * 
  * cpdef unicode shorten_repeat(unicode text, int repeat_threshould, int max_repeat_substr_length=8):             # <<<<<<<<<<<<<<
  *     cdef int text_length, i, repeat_length, right_start, right_end, num_repeat_substrs
  *     cdef int upper_repeat_substr_length
  */
-  __pyx_t_12 = __Pyx_CyFunction_New(&__pyx_mdef_8neologdn_1shorten_repeat, 0, __pyx_n_s_shorten_repeat, NULL, __pyx_n_s_neologdn, __pyx_d, ((PyObject *)__pyx_codeobj__517)); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 102, __pyx_L1_error)
+  __pyx_t_12 = __Pyx_CyFunction_New(&__pyx_mdef_8neologdn_1shorten_repeat, 0, __pyx_n_s_shorten_repeat, NULL, __pyx_n_s_neologdn, __pyx_d, ((PyObject *)__pyx_codeobj__517)); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 110, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_12, __pyx_tuple__518);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_shorten_repeat, __pyx_t_12) < 0) __PYX_ERR(0, 102, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_shorten_repeat, __pyx_t_12) < 0) __PYX_ERR(0, 110, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
-  /* "neologdn.pyx":132
+  /* "neologdn.pyx":140
  * 
  * 
  * cpdef unicode normalize(unicode text, int repeat=0, bint remove_space=True,             # <<<<<<<<<<<<<<
  *                         int max_repeat_substr_length=8, unicode tilde='remove'):
- *     cdef Py_UNICODE *buf = <Py_UNICODE *>malloc(sizeof(Py_UNICODE) * (len(text) + 1))
+ *     cdef Py_UCS4 *buf = <Py_UCS4 *>malloc(sizeof(Py_UCS4) * (len(text) + 1))
  */
-  __pyx_t_12 = __Pyx_CyFunction_New(&__pyx_mdef_8neologdn_3normalize, 0, __pyx_n_s_normalize, NULL, __pyx_n_s_neologdn, __pyx_d, ((PyObject *)__pyx_codeobj__520)); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_t_12 = __Pyx_CyFunction_New(&__pyx_mdef_8neologdn_3normalize, 0, __pyx_n_s_normalize, NULL, __pyx_n_s_neologdn, __pyx_d, ((PyObject *)__pyx_codeobj__520)); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 140, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_12);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_12, __pyx_tuple__521);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_normalize, __pyx_t_12) < 0) __PYX_ERR(0, 132, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_normalize, __pyx_t_12) < 0) __PYX_ERR(0, 140, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
   /* "neologdn.pyx":1
  * # distutils: language=c++             # <<<<<<<<<<<<<<
  * # cython: language_level=3
  * # -*- coding: utf-8 -*-
  */
@@ -9638,14 +9989,16 @@
         if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
         #endif
             PyException_SetTraceback(value, tb);
     }
     tmp_value = tstate->current_exception;
     tstate->current_exception = value;
     Py_XDECREF(tmp_value);
+    Py_XDECREF(type);
+    Py_XDECREF(tb);
 #else
     PyObject *tmp_type, *tmp_value, *tmp_tb;
     tmp_type = tstate->curexc_type;
     tmp_value = tstate->curexc_value;
     tmp_tb = tstate->curexc_traceback;
     tstate->curexc_type = type;
     tstate->curexc_value = value;
@@ -9695,33 +10048,40 @@
         return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
 #endif
     return PyObject_GetAttr(obj, attr_name);
 }
 #endif
 
 /* PyObjectGetAttrStrNoError */
+#if __PYX_LIMITED_VERSION_HEX < 0x030d00A1
 static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
     __Pyx_PyThreadState_declare
     __Pyx_PyThreadState_assign
     if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
         __Pyx_PyErr_Clear();
 }
+#endif
 static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
     PyObject *result;
+#if __PYX_LIMITED_VERSION_HEX >= 0x030d00A1
+    (void) PyObject_GetOptionalAttr(obj, attr_name, &result);
+    return result;
+#else
 #if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
     PyTypeObject* tp = Py_TYPE(obj);
     if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
         return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
     }
 #endif
     result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
     if (unlikely(!result)) {
         __Pyx_PyObject_GetAttrStr_ClearAttributeError();
     }
     return result;
+#endif
 }
 
 /* GetBuiltinName */
 static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
     PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
     if (unlikely(!result) && !PyErr_Occurred()) {
         PyErr_Format(PyExc_NameError,
@@ -9958,21 +10318,27 @@
         return NULL;
     }
     new_len = left_len + right_len;
     if (__Pyx_unicode_modifiable(left)
             && PyUnicode_CheckExact(right)
             && PyUnicode_KIND(right) <= PyUnicode_KIND(left)
             && !(PyUnicode_IS_ASCII(left) && !PyUnicode_IS_ASCII(right))) {
+        int ret;
         __Pyx_GIVEREF(*p_left);
-        if (unlikely(PyUnicode_Resize(p_left, new_len) != 0)) {
-            __Pyx_GOTREF(*p_left);
+        ret = PyUnicode_Resize(p_left, new_len);
+        __Pyx_GOTREF(*p_left);
+        if (unlikely(ret != 0))
             return NULL;
-        }
-        __Pyx_INCREF(*p_left);
+        #if PY_VERSION_HEX >= 0x030d0000
+        if (unlikely(PyUnicode_CopyCharacters(*p_left, left_len, right, 0, right_len) < 0)) return NULL;
+        #else
         _PyUnicode_FastCopyCharacters(*p_left, left_len, right, 0, right_len);
+        #endif
+        __Pyx_INCREF(*p_left);
+        __Pyx_GIVEREF(*p_left);
         return *p_left;
     } else {
         return __Pyx_PyUnicode_Concat(left, right);
     }
   }
 #endif
 
@@ -10022,21 +10388,39 @@
     {
         if (s == PyTuple_GET_ITEM(kwnames, i)) return kwvalues[i];
     }
     for (i = 0; i < n; i++)
     {
         int eq = __Pyx_PyUnicode_Equals(s, PyTuple_GET_ITEM(kwnames, i), Py_EQ);
         if (unlikely(eq != 0)) {
-            if (unlikely(eq < 0)) return NULL;  // error
+            if (unlikely(eq < 0)) return NULL;
             return kwvalues[i];
         }
     }
-    return NULL;  // not found (no exception set)
+    return NULL;
+}
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030d0000
+CYTHON_UNUSED static PyObject *__Pyx_KwargsAsDict_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues) {
+    Py_ssize_t i, nkwargs = PyTuple_GET_SIZE(kwnames);
+    PyObject *dict;
+    dict = PyDict_New();
+    if (unlikely(!dict))
+        return NULL;
+    for (i=0; i<nkwargs; i++) {
+        PyObject *key = PyTuple_GET_ITEM(kwnames, i);
+        if (unlikely(PyDict_SetItem(dict, key, kwvalues[i]) < 0))
+            goto bad;
+    }
+    return dict;
+bad:
+    Py_DECREF(dict);
+    return NULL;
 }
 #endif
+#endif
 
 /* RaiseArgTupleInvalid */
 static void __Pyx_RaiseArgtupleInvalid(
     const char* func_name,
     int exact,
     Py_ssize_t num_min,
     Py_ssize_t num_max,
@@ -10086,37 +10470,70 @@
 {
     PyObject *key = 0, *value = 0;
     Py_ssize_t pos = 0;
     PyObject*** name;
     PyObject*** first_kw_arg = argnames + num_pos_args;
     int kwds_is_tuple = CYTHON_METH_FASTCALL && likely(PyTuple_Check(kwds));
     while (1) {
+        Py_XDECREF(key); key = NULL;
+        Py_XDECREF(value); value = NULL;
         if (kwds_is_tuple) {
-            if (pos >= PyTuple_GET_SIZE(kwds)) break;
+            Py_ssize_t size;
+#if CYTHON_ASSUME_SAFE_MACROS
+            size = PyTuple_GET_SIZE(kwds);
+#else
+            size = PyTuple_Size(kwds);
+            if (size < 0) goto bad;
+#endif
+            if (pos >= size) break;
+#if CYTHON_AVOID_BORROWED_REFS
+            key = __Pyx_PySequence_ITEM(kwds, pos);
+            if (!key) goto bad;
+#elif CYTHON_ASSUME_SAFE_MACROS
             key = PyTuple_GET_ITEM(kwds, pos);
+#else
+            key = PyTuple_GetItem(kwds, pos);
+            if (!key) goto bad;
+#endif
             value = kwvalues[pos];
             pos++;
         }
         else
         {
             if (!PyDict_Next(kwds, &pos, &key, &value)) break;
+#if CYTHON_AVOID_BORROWED_REFS
+            Py_INCREF(key);
+#endif
         }
         name = first_kw_arg;
         while (*name && (**name != key)) name++;
         if (*name) {
             values[name-argnames] = value;
+#if CYTHON_AVOID_BORROWED_REFS
+            Py_INCREF(value);
+            Py_DECREF(key);
+#endif
+            key = NULL;
+            value = NULL;
             continue;
         }
+#if !CYTHON_AVOID_BORROWED_REFS
+        Py_INCREF(key);
+#endif
+        Py_INCREF(value);
         name = first_kw_arg;
         #if PY_MAJOR_VERSION < 3
         if (likely(PyString_Check(key))) {
             while (*name) {
                 if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
                         && _PyString_Eq(**name, key)) {
                     values[name-argnames] = value;
+#if CYTHON_AVOID_BORROWED_REFS
+                    value = NULL;
+#endif
                     break;
                 }
                 name++;
             }
             if (*name) continue;
             else {
                 PyObject*** argname = argnames;
@@ -10138,14 +10555,17 @@
                     (__Pyx_PyUnicode_GET_LENGTH(**name) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
                 #endif
                     PyUnicode_Compare(**name, key)
                 );
                 if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                 if (cmp == 0) {
                     values[name-argnames] = value;
+#if CYTHON_AVOID_BORROWED_REFS
+                    value = NULL;
+#endif
                     break;
                 }
                 name++;
             }
             if (*name) continue;
             else {
                 PyObject*** argname = argnames;
@@ -10164,14 +10584,16 @@
             goto invalid_keyword_type;
         if (kwds2) {
             if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
         } else {
             goto invalid_keyword;
         }
     }
+    Py_XDECREF(key);
+    Py_XDECREF(value);
     return 0;
 arg_passed_twice:
     __Pyx_RaiseDoubleKeywordsError(function_name, key);
     goto bad;
 invalid_keyword_type:
     PyErr_Format(PyExc_TypeError,
         "%.200s() keywords must be strings", function_name);
@@ -10183,14 +10605,16 @@
         function_name, PyString_AsString(key));
     #else
     PyErr_Format(PyExc_TypeError,
         "%s() got an unexpected keyword argument '%U'",
         function_name, key);
     #endif
 bad:
+    Py_XDECREF(key);
+    Py_XDECREF(value);
     return -1;
 }
 
 /* ArgTypeTest */
 static int __Pyx__ArgTypeTest(PyObject *obj, PyTypeObject *type, const char *name, int exact)
 {
     __Pyx_TypeName type_name;
@@ -10268,15 +10692,15 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
 #else
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
 #endif
 {
     PyObject *result;
 #if !CYTHON_AVOID_BORROWED_REFS
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1 && PY_VERSION_HEX < 0x030d0000
     result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
     __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
     if (likely(result)) {
         return __Pyx_NewRef(result);
     } else if (unlikely(PyErr_Occurred())) {
         return NULL;
     }
@@ -10336,22 +10760,17 @@
     #endif
     empty_dict = PyDict_New();
     if (unlikely(!empty_dict))
         goto bad;
     {
         #if PY_MAJOR_VERSION >= 3
         if (level == -1) {
-            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
-                #if CYTHON_COMPILING_IN_LIMITED_API
-                module = PyImport_ImportModuleLevelObject(
-                    name, empty_dict, empty_dict, from_list, 1);
-                #else
+            if (strchr(__Pyx_MODULE_NAME, '.') != NULL) {
                 module = PyImport_ImportModuleLevelObject(
                     name, __pyx_d, empty_dict, from_list, 1);
-                #endif
                 if (unlikely(!module)) {
                     if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
                         goto bad;
                     PyErr_Clear();
                 }
             }
             level = 0;
@@ -10362,22 +10781,17 @@
             PyObject *py_level = PyInt_FromLong(level);
             if (unlikely(!py_level))
                 goto bad;
             module = PyObject_CallFunctionObjArgs(py_import,
                 name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
             Py_DECREF(py_level);
             #else
-            #if CYTHON_COMPILING_IN_LIMITED_API
-            module = PyImport_ImportModuleLevelObject(
-                name, empty_dict, empty_dict, from_list, level);
-            #else
             module = PyImport_ImportModuleLevelObject(
                 name, __pyx_d, empty_dict, from_list, level);
             #endif
-            #endif
         }
     }
 bad:
     Py_XDECREF(empty_dict);
     Py_XDECREF(empty_list);
     #if PY_MAJOR_VERSION < 3
     Py_XDECREF(py_import);
@@ -10567,17 +10981,18 @@
     PyErr_Format(PyExc_ValueError,
                  "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
                  index, (index == 1) ? "" : "s");
 }
 
 /* IterFinish */
 static CYTHON_INLINE int __Pyx_IterFinish(void) {
+    PyObject* exc_type;
     __Pyx_PyThreadState_declare
     __Pyx_PyThreadState_assign
-    PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+    exc_type = __Pyx_PyErr_CurrentExceptionType();
     if (unlikely(exc_type)) {
         if (unlikely(!__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)))
             return -1;
         __Pyx_PyErr_Clear();
         return 0;
     }
     return 0;
@@ -10596,16 +11011,21 @@
 /* PyObjectCall */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
     PyObject *result;
     ternaryfunc call = Py_TYPE(func)->tp_call;
     if (unlikely(!call))
         return PyObject_Call(func, arg, kw);
+    #if PY_MAJOR_VERSION < 3
     if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
         return NULL;
+    #else
+    if (unlikely(Py_EnterRecursiveCall(" while calling a Python object")))
+        return NULL;
+    #endif
     result = (*call)(func, arg, kw);
     Py_LeaveRecursiveCall();
     if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
         PyErr_SetString(
             PyExc_SystemError,
             "NULL result without error in PyObject_Call");
     }
@@ -10698,18 +11118,15 @@
 #endif
     return 0;
 }
 #endif
 
 /* FetchSharedCythonModule */
 static PyObject *__Pyx_FetchSharedCythonABIModule(void) {
-    PyObject *abi_module = PyImport_AddModule((char*) __PYX_ABI_MODULE_NAME);
-    if (unlikely(!abi_module)) return NULL;
-    Py_INCREF(abi_module);
-    return abi_module;
+    return __Pyx_PyImport_AddModuleRef((char*) __PYX_ABI_MODULE_NAME);
 }
 
 /* FetchCommonType */
 static int __Pyx_VerifyCachedType(PyObject *cached_type,
                                const char *name,
                                Py_ssize_t basicsize,
                                Py_ssize_t expected_basicsize) {
@@ -10862,42 +11279,61 @@
         return vc(func, args, nargs, NULL);
     }
     return __Pyx_PyVectorcall_FastCallDict_kw(func, vc, args, nargs, kw);
 }
 #endif
 
 /* CythonFunctionShared */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static CYTHON_INLINE int __Pyx__IsSameCyOrCFunction(PyObject *func, void *cfunc) {
+    if (__Pyx_CyFunction_Check(func)) {
+        return PyCFunction_GetFunction(((__pyx_CyFunctionObject*)func)->func) == (PyCFunction) cfunc;
+    } else if (PyCFunction_Check(func)) {
+        return PyCFunction_GetFunction(func) == (PyCFunction) cfunc;
+    }
+    return 0;
+}
+#else
+static CYTHON_INLINE int __Pyx__IsSameCyOrCFunction(PyObject *func, void *cfunc) {
+    return __Pyx_CyOrPyCFunction_Check(func) && __Pyx_CyOrPyCFunction_GET_FUNCTION(func) == (PyCFunction) cfunc;
+}
+#endif
 static CYTHON_INLINE void __Pyx__CyFunction_SetClassObj(__pyx_CyFunctionObject* f, PyObject* classobj) {
-#if PY_VERSION_HEX < 0x030900B1
+#if PY_VERSION_HEX < 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     __Pyx_Py_XDECREF_SET(
         __Pyx_CyFunction_GetClassObj(f),
             ((classobj) ? __Pyx_NewRef(classobj) : NULL));
 #else
     __Pyx_Py_XDECREF_SET(
         ((PyCMethodObject *) (f))->mm_class,
         (PyTypeObject*)((classobj) ? __Pyx_NewRef(classobj) : NULL));
 #endif
 }
 static PyObject *
 __Pyx_CyFunction_get_doc(__pyx_CyFunctionObject *op, void *closure)
 {
     CYTHON_UNUSED_VAR(closure);
     if (unlikely(op->func_doc == NULL)) {
+#if CYTHON_COMPILING_IN_LIMITED_API
+        op->func_doc = PyObject_GetAttrString(op->func, "__doc__");
+        if (unlikely(!op->func_doc)) return NULL;
+#else
         if (((PyCFunctionObject*)op)->m_ml->ml_doc) {
 #if PY_MAJOR_VERSION >= 3
             op->func_doc = PyUnicode_FromString(((PyCFunctionObject*)op)->m_ml->ml_doc);
 #else
             op->func_doc = PyString_FromString(((PyCFunctionObject*)op)->m_ml->ml_doc);
 #endif
             if (unlikely(op->func_doc == NULL))
                 return NULL;
         } else {
             Py_INCREF(Py_None);
             return Py_None;
         }
+#endif
     }
     Py_INCREF(op->func_doc);
     return op->func_doc;
 }
 static int
 __Pyx_CyFunction_set_doc(__pyx_CyFunctionObject *op, PyObject *value, void *context)
 {
@@ -10910,15 +11346,17 @@
     return 0;
 }
 static PyObject *
 __Pyx_CyFunction_get_name(__pyx_CyFunctionObject *op, void *context)
 {
     CYTHON_UNUSED_VAR(context);
     if (unlikely(op->func_name == NULL)) {
-#if PY_MAJOR_VERSION >= 3
+#if CYTHON_COMPILING_IN_LIMITED_API
+        op->func_name = PyObject_GetAttrString(op->func, "__name__");
+#elif PY_MAJOR_VERSION >= 3
         op->func_name = PyUnicode_InternFromString(((PyCFunctionObject*)op)->m_ml->ml_name);
 #else
         op->func_name = PyString_InternFromString(((PyCFunctionObject*)op)->m_ml->ml_name);
 #endif
         if (unlikely(op->func_name == NULL))
             return NULL;
     }
@@ -11029,18 +11467,18 @@
         return -1;
     #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
     op->defaults_tuple = PyTuple_GET_ITEM(res, 0);
     Py_INCREF(op->defaults_tuple);
     op->defaults_kwdict = PyTuple_GET_ITEM(res, 1);
     Py_INCREF(op->defaults_kwdict);
     #else
-    op->defaults_tuple = PySequence_ITEM(res, 0);
+    op->defaults_tuple = __Pyx_PySequence_ITEM(res, 0);
     if (unlikely(!op->defaults_tuple)) result = -1;
     else {
-        op->defaults_kwdict = PySequence_ITEM(res, 1);
+        op->defaults_kwdict = __Pyx_PySequence_ITEM(res, 1);
         if (unlikely(!op->defaults_kwdict)) result = -1;
     }
     #endif
     Py_DECREF(res);
     return result;
 }
 static int
@@ -11141,15 +11579,23 @@
     is_coroutine = op->flags & __Pyx_CYFUNCTION_COROUTINE;
 #if PY_VERSION_HEX >= 0x03050000
     if (is_coroutine) {
         PyObject *module, *fromlist, *marker = __pyx_n_s_is_coroutine;
         fromlist = PyList_New(1);
         if (unlikely(!fromlist)) return NULL;
         Py_INCREF(marker);
+#if CYTHON_ASSUME_SAFE_MACROS
         PyList_SET_ITEM(fromlist, 0, marker);
+#else
+        if (unlikely(PyList_SetItem(fromlist, 0, marker) < 0)) {
+            Py_DECREF(marker);
+            Py_DECREF(fromlist);
+            return NULL;
+        }
+#endif
         module = PyImport_ImportModuleLevelObject(__pyx_n_s_asyncio_coroutines, NULL, NULL, fromlist, 0);
         Py_DECREF(fromlist);
         if (unlikely(!module)) goto ignore;
         op->func_is_coroutine = __Pyx_PyObject_GetAttrStr(module, marker);
         Py_DECREF(module);
         if (likely(op->func_is_coroutine)) {
             return __Pyx_NewRef(op->func_is_coroutine);
@@ -11157,14 +11603,26 @@
 ignore:
         PyErr_Clear();
     }
 #endif
     op->func_is_coroutine = __Pyx_PyBool_FromLong(is_coroutine);
     return __Pyx_NewRef(op->func_is_coroutine);
 }
+#if CYTHON_COMPILING_IN_LIMITED_API
+static PyObject *
+__Pyx_CyFunction_get_module(__pyx_CyFunctionObject *op, void *context) {
+    CYTHON_UNUSED_VAR(context);
+    return PyObject_GetAttrString(op->func, "__module__");
+}
+static int
+__Pyx_CyFunction_set_module(__pyx_CyFunctionObject *op, PyObject* value, void *context) {
+    CYTHON_UNUSED_VAR(context);
+    return PyObject_SetAttrString(op->func, "__module__", value);
+}
+#endif
 static PyGetSetDef __pyx_CyFunction_getsets[] = {
     {(char *) "func_doc", (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
     {(char *) "__doc__",  (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
     {(char *) "func_name", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
     {(char *) "__name__", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
     {(char *) "__qualname__", (getter)__Pyx_CyFunction_get_qualname, (setter)__Pyx_CyFunction_set_qualname, 0, 0},
     {(char *) "func_dict", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
@@ -11176,28 +11634,35 @@
     {(char *) "func_code", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
     {(char *) "__code__", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
     {(char *) "func_defaults", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
     {(char *) "__defaults__", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
     {(char *) "__kwdefaults__", (getter)__Pyx_CyFunction_get_kwdefaults, (setter)__Pyx_CyFunction_set_kwdefaults, 0, 0},
     {(char *) "__annotations__", (getter)__Pyx_CyFunction_get_annotations, (setter)__Pyx_CyFunction_set_annotations, 0, 0},
     {(char *) "_is_coroutine", (getter)__Pyx_CyFunction_get_is_coroutine, 0, 0, 0},
+#if CYTHON_COMPILING_IN_LIMITED_API
+    {"__module__", (getter)__Pyx_CyFunction_get_module, (setter)__Pyx_CyFunction_set_module, 0, 0},
+#endif
     {0, 0, 0, 0, 0}
 };
 static PyMemberDef __pyx_CyFunction_members[] = {
+#if !CYTHON_COMPILING_IN_LIMITED_API
     {(char *) "__module__", T_OBJECT, offsetof(PyCFunctionObject, m_module), 0, 0},
+#endif
 #if CYTHON_USE_TYPE_SPECS
     {(char *) "__dictoffset__", T_PYSSIZET, offsetof(__pyx_CyFunctionObject, func_dict), READONLY, 0},
 #if CYTHON_METH_FASTCALL
 #if CYTHON_BACKPORT_VECTORCALL
     {(char *) "__vectorcalloffset__", T_PYSSIZET, offsetof(__pyx_CyFunctionObject, func_vectorcall), READONLY, 0},
 #else
+#if !CYTHON_COMPILING_IN_LIMITED_API
     {(char *) "__vectorcalloffset__", T_PYSSIZET, offsetof(PyCFunctionObject, vectorcall), READONLY, 0},
 #endif
 #endif
-#if PY_VERSION_HEX < 0x030500A0
+#endif
+#if PY_VERSION_HEX < 0x030500A0 || CYTHON_COMPILING_IN_LIMITED_API
     {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(__pyx_CyFunctionObject, func_weakreflist), READONLY, 0},
 #else
     {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(PyCFunctionObject, m_weakreflist), READONLY, 0},
 #endif
 #endif
     {0, 0, 0,  0, 0}
 };
@@ -11212,38 +11677,48 @@
     return PyString_FromString(((PyCFunctionObject*)m)->m_ml->ml_name);
 #endif
 }
 static PyMethodDef __pyx_CyFunction_methods[] = {
     {"__reduce__", (PyCFunction)__Pyx_CyFunction_reduce, METH_VARARGS, 0},
     {0, 0, 0, 0}
 };
-#if PY_VERSION_HEX < 0x030500A0
+#if PY_VERSION_HEX < 0x030500A0 || CYTHON_COMPILING_IN_LIMITED_API
 #define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func_weakreflist)
 #else
 #define __Pyx_CyFunction_weakreflist(cyfunc) (((PyCFunctionObject*)cyfunc)->m_weakreflist)
 #endif
 static PyObject *__Pyx_CyFunction_Init(__pyx_CyFunctionObject *op, PyMethodDef *ml, int flags, PyObject* qualname,
                                        PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
+#if !CYTHON_COMPILING_IN_LIMITED_API
     PyCFunctionObject *cf = (PyCFunctionObject*) op;
+#endif
     if (unlikely(op == NULL))
         return NULL;
+#if CYTHON_COMPILING_IN_LIMITED_API
+    op->func = PyCFunction_NewEx(ml, (PyObject*)op, module);
+    if (unlikely(!op->func)) return NULL;
+#endif
     op->flags = flags;
     __Pyx_CyFunction_weakreflist(op) = NULL;
+#if !CYTHON_COMPILING_IN_LIMITED_API
     cf->m_ml = ml;
     cf->m_self = (PyObject *) op;
+#endif
     Py_XINCREF(closure);
     op->func_closure = closure;
+#if !CYTHON_COMPILING_IN_LIMITED_API
     Py_XINCREF(module);
     cf->m_module = module;
+#endif
     op->func_dict = NULL;
     op->func_name = NULL;
     Py_INCREF(qualname);
     op->func_qualname = qualname;
     op->func_doc = NULL;
-#if PY_VERSION_HEX < 0x030900B1
+#if PY_VERSION_HEX < 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     op->func_classobj = NULL;
 #else
     ((PyCMethodObject*)op)->mm_class = NULL;
 #endif
     op->func_globals = globals;
     Py_INCREF(op->func_globals);
     Py_XINCREF(code);
@@ -11281,30 +11756,36 @@
 #endif
     return (PyObject *) op;
 }
 static int
 __Pyx_CyFunction_clear(__pyx_CyFunctionObject *m)
 {
     Py_CLEAR(m->func_closure);
+#if CYTHON_COMPILING_IN_LIMITED_API
+    Py_CLEAR(m->func);
+#else
     Py_CLEAR(((PyCFunctionObject*)m)->m_module);
+#endif
     Py_CLEAR(m->func_dict);
     Py_CLEAR(m->func_name);
     Py_CLEAR(m->func_qualname);
     Py_CLEAR(m->func_doc);
     Py_CLEAR(m->func_globals);
     Py_CLEAR(m->func_code);
+#if !CYTHON_COMPILING_IN_LIMITED_API
 #if PY_VERSION_HEX < 0x030900B1
     Py_CLEAR(__Pyx_CyFunction_GetClassObj(m));
 #else
     {
         PyObject *cls = (PyObject*) ((PyCMethodObject *) (m))->mm_class;
         ((PyCMethodObject *) (m))->mm_class = NULL;
         Py_XDECREF(cls);
     }
 #endif
+#endif
     Py_CLEAR(m->defaults_tuple);
     Py_CLEAR(m->defaults_kwdict);
     Py_CLEAR(m->func_annotations);
     Py_CLEAR(m->func_is_coroutine);
     if (m->defaults) {
         PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
         int i;
@@ -11326,22 +11807,28 @@
 {
     PyObject_GC_UnTrack(m);
     __Pyx__CyFunction_dealloc(m);
 }
 static int __Pyx_CyFunction_traverse(__pyx_CyFunctionObject *m, visitproc visit, void *arg)
 {
     Py_VISIT(m->func_closure);
+#if CYTHON_COMPILING_IN_LIMITED_API
+    Py_VISIT(m->func);
+#else
     Py_VISIT(((PyCFunctionObject*)m)->m_module);
+#endif
     Py_VISIT(m->func_dict);
     Py_VISIT(m->func_name);
     Py_VISIT(m->func_qualname);
     Py_VISIT(m->func_doc);
     Py_VISIT(m->func_globals);
     Py_VISIT(m->func_code);
+#if !CYTHON_COMPILING_IN_LIMITED_API
     Py_VISIT(__Pyx_CyFunction_GetClassObj(m));
+#endif
     Py_VISIT(m->defaults_tuple);
     Py_VISIT(m->defaults_kwdict);
     Py_VISIT(m->func_is_coroutine);
     if (m->defaults) {
         PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
         int i;
         for (i = 0; i < m->defaults_pyobjects; i++)
@@ -11357,67 +11844,123 @@
                                 op->func_qualname, (void *)op);
 #else
     return PyString_FromFormat("<cyfunction %s at %p>",
                                PyString_AsString(op->func_qualname), (void *)op);
 #endif
 }
 static PyObject * __Pyx_CyFunction_CallMethod(PyObject *func, PyObject *self, PyObject *arg, PyObject *kw) {
+#if CYTHON_COMPILING_IN_LIMITED_API
+    PyObject *f = ((__pyx_CyFunctionObject*)func)->func;
+    PyObject *py_name = NULL;
+    PyCFunction meth;
+    int flags;
+    meth = PyCFunction_GetFunction(f);
+    if (unlikely(!meth)) return NULL;
+    flags = PyCFunction_GetFlags(f);
+    if (unlikely(flags < 0)) return NULL;
+#else
     PyCFunctionObject* f = (PyCFunctionObject*)func;
     PyCFunction meth = f->m_ml->ml_meth;
+    int flags = f->m_ml->ml_flags;
+#endif
     Py_ssize_t size;
-    switch (f->m_ml->ml_flags & (METH_VARARGS | METH_KEYWORDS | METH_NOARGS | METH_O)) {
+    switch (flags & (METH_VARARGS | METH_KEYWORDS | METH_NOARGS | METH_O)) {
     case METH_VARARGS:
         if (likely(kw == NULL || PyDict_Size(kw) == 0))
             return (*meth)(self, arg);
         break;
     case METH_VARARGS | METH_KEYWORDS:
         return (*(PyCFunctionWithKeywords)(void*)meth)(self, arg, kw);
     case METH_NOARGS:
         if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
+#if CYTHON_ASSUME_SAFE_MACROS
             size = PyTuple_GET_SIZE(arg);
+#else
+            size = PyTuple_Size(arg);
+            if (unlikely(size < 0)) return NULL;
+#endif
             if (likely(size == 0))
                 return (*meth)(self, NULL);
+#if CYTHON_COMPILING_IN_LIMITED_API
+            py_name = __Pyx_CyFunction_get_name((__pyx_CyFunctionObject*)func, NULL);
+            if (!py_name) return NULL;
+            PyErr_Format(PyExc_TypeError,
+                "%.200S() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
+                py_name, size);
+            Py_DECREF(py_name);
+#else
             PyErr_Format(PyExc_TypeError,
                 "%.200s() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
                 f->m_ml->ml_name, size);
+#endif
             return NULL;
         }
         break;
     case METH_O:
         if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
+#if CYTHON_ASSUME_SAFE_MACROS
             size = PyTuple_GET_SIZE(arg);
+#else
+            size = PyTuple_Size(arg);
+            if (unlikely(size < 0)) return NULL;
+#endif
             if (likely(size == 1)) {
                 PyObject *result, *arg0;
                 #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
                 arg0 = PyTuple_GET_ITEM(arg, 0);
                 #else
-                arg0 = PySequence_ITEM(arg, 0); if (unlikely(!arg0)) return NULL;
+                arg0 = __Pyx_PySequence_ITEM(arg, 0); if (unlikely(!arg0)) return NULL;
                 #endif
                 result = (*meth)(self, arg0);
                 #if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
                 Py_DECREF(arg0);
                 #endif
                 return result;
             }
+#if CYTHON_COMPILING_IN_LIMITED_API
+            py_name = __Pyx_CyFunction_get_name((__pyx_CyFunctionObject*)func, NULL);
+            if (!py_name) return NULL;
+            PyErr_Format(PyExc_TypeError,
+                "%.200S() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
+                py_name, size);
+            Py_DECREF(py_name);
+#else
             PyErr_Format(PyExc_TypeError,
                 "%.200s() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
                 f->m_ml->ml_name, size);
+#endif
             return NULL;
         }
         break;
     default:
         PyErr_SetString(PyExc_SystemError, "Bad call flags for CyFunction");
         return NULL;
     }
+#if CYTHON_COMPILING_IN_LIMITED_API
+    py_name = __Pyx_CyFunction_get_name((__pyx_CyFunctionObject*)func, NULL);
+    if (!py_name) return NULL;
+    PyErr_Format(PyExc_TypeError, "%.200S() takes no keyword arguments",
+                 py_name);
+    Py_DECREF(py_name);
+#else
     PyErr_Format(PyExc_TypeError, "%.200s() takes no keyword arguments",
                  f->m_ml->ml_name);
+#endif
     return NULL;
 }
 static CYTHON_INLINE PyObject *__Pyx_CyFunction_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    return __Pyx_CyFunction_CallMethod(func, ((PyCFunctionObject*)func)->m_self, arg, kw);
+    PyObject *self, *result;
+#if CYTHON_COMPILING_IN_LIMITED_API
+    self = PyCFunction_GetSelf(((__pyx_CyFunctionObject*)func)->func);
+    if (unlikely(!self) && PyErr_Occurred()) return NULL;
+#else
+    self = ((PyCFunctionObject*)func)->m_self;
+#endif
+    result = __Pyx_CyFunction_CallMethod(func, self, arg, kw);
+    return result;
 }
 static PyObject *__Pyx_CyFunction_CallAsMethod(PyObject *func, PyObject *args, PyObject *kw) {
     PyObject *result;
     __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *) func;
 #if CYTHON_METH_FASTCALL
      __pyx_vectorcallfunc vc = __Pyx_CyFunction_func_vectorcall(cyfunc);
     if (vc) {
@@ -11429,15 +11972,20 @@
 #endif
     }
 #endif
     if ((cyfunc->flags & __Pyx_CYFUNCTION_CCLASS) && !(cyfunc->flags & __Pyx_CYFUNCTION_STATICMETHOD)) {
         Py_ssize_t argc;
         PyObject *new_args;
         PyObject *self;
+#if CYTHON_ASSUME_SAFE_MACROS
         argc = PyTuple_GET_SIZE(args);
+#else
+        argc = PyTuple_Size(args);
+        if (unlikely(!argc) < 0) return NULL;
+#endif
         new_args = PyTuple_GetSlice(args, 1, argc);
         if (unlikely(!new_args))
             return NULL;
         self = PyTuple_GetItem(args, 0);
         if (unlikely(!self)) {
             Py_DECREF(new_args);
 #if PY_MAJOR_VERSION > 2
@@ -11554,15 +12102,15 @@
         break;
     case 0:
         self = ((PyCFunctionObject*)cyfunc)->m_self;
         break;
     default:
         return NULL;
     }
-    return ((_PyCFunctionFastWithKeywords)(void(*)(void))def->ml_meth)(self, args, nargs, kwnames);
+    return ((__Pyx_PyCFunctionFastWithKeywords)(void(*)(void))def->ml_meth)(self, args, nargs, kwnames);
 }
 static PyObject * __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS_METHOD(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames)
 {
     __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *)func;
     PyMethodDef* def = ((PyCFunctionObject*)cyfunc)->m_ml;
     PyTypeObject *cls = (PyTypeObject *) __Pyx_CyFunction_GetClassObj(cyfunc);
 #if CYTHON_BACKPORT_VECTORCALL
@@ -11642,15 +12190,15 @@
     0,
     0,
     0,
     0,
 #ifdef Py_TPFLAGS_METHOD_DESCRIPTOR
     Py_TPFLAGS_METHOD_DESCRIPTOR |
 #endif
-#ifdef _Py_TPFLAGS_HAVE_VECTORCALL
+#if defined(_Py_TPFLAGS_HAVE_VECTORCALL) && CYTHON_METH_FASTCALL
     _Py_TPFLAGS_HAVE_VECTORCALL |
 #endif
     Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_BASETYPE,
     0,
     (traverseproc) __Pyx_CyFunction_traverse,
     (inquiry) __Pyx_CyFunction_clear,
     0,
@@ -11874,28 +12422,101 @@
 }
 #endif
 
 /* AddTraceback */
 #include "compile.h"
 #include "frameobject.h"
 #include "traceback.h"
-#if PY_VERSION_HEX >= 0x030b00a6
+#if PY_VERSION_HEX >= 0x030b00a6 && !CYTHON_COMPILING_IN_LIMITED_API
   #ifndef Py_BUILD_CORE
     #define Py_BUILD_CORE 1
   #endif
   #include "internal/pycore_frame.h"
 #endif
 #if CYTHON_COMPILING_IN_LIMITED_API
+static PyObject *__Pyx_PyCode_Replace_For_AddTraceback(PyObject *code, PyObject *scratch_dict,
+                                                       PyObject *firstlineno, PyObject *name) {
+    PyObject *replace = NULL;
+    if (unlikely(PyDict_SetItemString(scratch_dict, "co_firstlineno", firstlineno))) return NULL;
+    if (unlikely(PyDict_SetItemString(scratch_dict, "co_name", name))) return NULL;
+    replace = PyObject_GetAttrString(code, "replace");
+    if (likely(replace)) {
+        PyObject *result;
+        result = PyObject_Call(replace, __pyx_empty_tuple, scratch_dict);
+        Py_DECREF(replace);
+        return result;
+    }
+    PyErr_Clear();
+    #if __PYX_LIMITED_VERSION_HEX < 0x030780000
+    {
+        PyObject *compiled = NULL, *result = NULL;
+        if (unlikely(PyDict_SetItemString(scratch_dict, "code", code))) return NULL;
+        if (unlikely(PyDict_SetItemString(scratch_dict, "type", (PyObject*)(&PyType_Type)))) return NULL;
+        compiled = Py_CompileString(
+            "out = type(code)(\n"
+            "  code.co_argcount, code.co_kwonlyargcount, code.co_nlocals, code.co_stacksize,\n"
+            "  code.co_flags, code.co_code, code.co_consts, code.co_names,\n"
+            "  code.co_varnames, code.co_filename, co_name, co_firstlineno,\n"
+            "  code.co_lnotab)\n", "<dummy>", Py_file_input);
+        if (!compiled) return NULL;
+        result = PyEval_EvalCode(compiled, scratch_dict, scratch_dict);
+        Py_DECREF(compiled);
+        if (!result) PyErr_Print();
+        Py_DECREF(result);
+        result = PyDict_GetItemString(scratch_dict, "out");
+        if (result) Py_INCREF(result);
+        return result;
+    }
+    #else
+    return NULL;
+    #endif
+}
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename) {
+    PyObject *code_object = NULL, *py_py_line = NULL, *py_funcname = NULL, *dict = NULL;
+    PyObject *replace = NULL, *getframe = NULL, *frame = NULL;
+    PyObject *exc_type, *exc_value, *exc_traceback;
+    int success = 0;
     if (c_line) {
         (void) __pyx_cfilenm;
         (void) __Pyx_CLineForTraceback(__Pyx_PyThreadState_Current, c_line);
     }
-    _PyTraceback_Add(funcname, filename, py_line);
+    PyErr_Fetch(&exc_type, &exc_value, &exc_traceback);
+    code_object = Py_CompileString("_getframe()", filename, Py_eval_input);
+    if (unlikely(!code_object)) goto bad;
+    py_py_line = PyLong_FromLong(py_line);
+    if (unlikely(!py_py_line)) goto bad;
+    py_funcname = PyUnicode_FromString(funcname);
+    if (unlikely(!py_funcname)) goto bad;
+    dict = PyDict_New();
+    if (unlikely(!dict)) goto bad;
+    {
+        PyObject *old_code_object = code_object;
+        code_object = __Pyx_PyCode_Replace_For_AddTraceback(code_object, dict, py_py_line, py_funcname);
+        Py_DECREF(old_code_object);
+    }
+    if (unlikely(!code_object)) goto bad;
+    getframe = PySys_GetObject("_getframe");
+    if (unlikely(!getframe)) goto bad;
+    if (unlikely(PyDict_SetItemString(dict, "_getframe", getframe))) goto bad;
+    frame = PyEval_EvalCode(code_object, dict, dict);
+    if (unlikely(!frame) || frame == Py_None) goto bad;
+    success = 1;
+  bad:
+    PyErr_Restore(exc_type, exc_value, exc_traceback);
+    Py_XDECREF(code_object);
+    Py_XDECREF(py_py_line);
+    Py_XDECREF(py_funcname);
+    Py_XDECREF(dict);
+    Py_XDECREF(replace);
+    if (success) {
+        PyTraceBack_Here(
+            (struct _frame*)frame);
+    }
+    Py_XDECREF(frame);
 }
 #else
 static PyCodeObject* __Pyx_CreateCodeObjectForTraceback(
             const char *funcname, int c_line,
             int py_line, const char *filename) {
     PyCodeObject *py_code = NULL;
     PyObject *py_funcname = NULL;
@@ -11940,15 +12561,15 @@
         py_line,
         __pyx_empty_bytes  /*PyObject *lnotab*/
     );
     Py_DECREF(py_srcfile);
     #else
     py_code = PyCode_NewEmpty(filename, funcname, py_line);
     #endif
-    Py_XDECREF(py_funcname);  // XDECREF since it's only set on Py3 if cline
+    Py_XDECREF(py_funcname);
     return py_code;
 bad:
     Py_XDECREF(py_funcname);
     #if PY_MAJOR_VERSION < 3
     Py_XDECREF(py_srcfile);
     #endif
     return NULL;
@@ -11989,58 +12610,43 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
-/* ObjectAsPyUnicode */
-static CYTHON_INLINE Py_UNICODE __Pyx_PyObject_AsPy_UNICODE(PyObject* x) {
-    long ival;
-    #if CYTHON_PEP393_ENABLED
-    #if Py_UNICODE_SIZE > 2
-    const long maxval = 1114111;
-    #else
-    const long maxval = 65535;
-    #endif
-    #else
-    static long maxval = 0;
-    #endif
-    if (PyUnicode_Check(x)) {
-        if (unlikely(__Pyx_PyUnicode_GET_LENGTH(x) != 1)) {
-            PyErr_Format(PyExc_ValueError,
-                         "only single character unicode strings can be converted to Py_UNICODE, "
-                         "got length %" CYTHON_FORMAT_SSIZE_T "d", __Pyx_PyUnicode_GET_LENGTH(x));
-            return (Py_UNICODE)-1;
-        }
-        #if CYTHON_PEP393_ENABLED
-        ival = PyUnicode_READ_CHAR(x, 0);
-        #else
-        return PyUnicode_AS_UNICODE(x)[0];
-        #endif
-    } else {
-        #if !CYTHON_PEP393_ENABLED
-        if (unlikely(!maxval))
-            maxval = (long)PyUnicode_GetMax();
-        #endif
-        ival = __Pyx_PyInt_As_long(x);
-    }
-    if (unlikely(!__Pyx_is_valid_index(ival, maxval + 1))) {
-        if (ival < 0) {
-            if (!PyErr_Occurred())
-                PyErr_SetString(PyExc_OverflowError,
-                                "cannot convert negative value to Py_UNICODE");
-            return (Py_UNICODE)-1;
-        } else {
-            PyErr_SetString(PyExc_OverflowError,
-                            "value too large to convert to Py_UNICODE");
-        }
-        return (Py_UNICODE)-1;
-    }
-    return (Py_UNICODE)ival;
+/* UnicodeAsUCS4 */
+static CYTHON_INLINE Py_UCS4 __Pyx_PyUnicode_AsPy_UCS4(PyObject* x) {
+   Py_ssize_t length;
+   #if CYTHON_PEP393_ENABLED
+   length = PyUnicode_GET_LENGTH(x);
+   if (likely(length == 1)) {
+       return PyUnicode_READ_CHAR(x, 0);
+   }
+   #else
+   length = PyUnicode_GET_SIZE(x);
+   if (likely(length == 1)) {
+       return PyUnicode_AS_UNICODE(x)[0];
+   }
+   #if Py_UNICODE_SIZE == 2
+   else if (PyUnicode_GET_SIZE(x) == 2) {
+       Py_UCS4 high_val = PyUnicode_AS_UNICODE(x)[0];
+       if (high_val >= 0xD800 && high_val <= 0xDBFF) {
+           Py_UCS4 low_val = PyUnicode_AS_UNICODE(x)[1];
+           if (low_val >= 0xDC00 && low_val <= 0xDFFF) {
+               return 0x10000 + (((high_val & ((1<<10)-1)) << 10) | (low_val & ((1<<10)-1)));
+           }
+       }
+   }
+   #endif
+   #endif
+   PyErr_Format(PyExc_ValueError,
+                "only single character unicode strings can be converted to Py_UCS4, "
+                "got length %" CYTHON_FORMAT_SSIZE_T "d", length);
+   return (Py_UCS4)-1;
 }
 
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
@@ -12057,14 +12663,35 @@
                 else\
                     goto raise_overflow;\
             }\
         }\
         return (target_type) value;\
     }
 
+/* ObjectAsUCS4 */
+static Py_UCS4 __Pyx__PyObject_AsPy_UCS4_raise_error(long ival) {
+   if (ival < 0) {
+       if (!PyErr_Occurred())
+           PyErr_SetString(PyExc_OverflowError,
+                           "cannot convert negative value to Py_UCS4");
+   } else {
+       PyErr_SetString(PyExc_OverflowError,
+                       "value too large to convert to Py_UCS4");
+   }
+   return (Py_UCS4)-1;
+}
+static Py_UCS4 __Pyx__PyObject_AsPy_UCS4(PyObject* x) {
+   long ival;
+   ival = __Pyx_PyInt_As_long(x);
+   if (unlikely(!__Pyx_is_valid_index(ival, 1114111 + 1))) {
+       return __Pyx__PyObject_AsPy_UCS4_raise_error(ival);
+   }
+   return (Py_UCS4)ival;
+}
+
 /* CIntFromPy */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *x) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const int neg_one = (int) -1, const_zero = (int) 0;
@@ -12227,15 +12854,15 @@
                 PyObject *tmp = v;
                 v = PyNumber_Long(tmp);
                 Py_DECREF(tmp);
             }
 #endif
             if (likely(v)) {
                 int ret = -1;
-#if !(CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_LIMITED_API) || defined(_PyLong_AsByteArray)
+#if PY_VERSION_HEX < 0x030d0000 && !(CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_LIMITED_API) || defined(_PyLong_AsByteArray)
                 int one = 1; int is_little = (int)*(unsigned char *)&one;
                 unsigned char *bytes = (unsigned char *)&val;
                 ret = _PyLong_AsByteArray((PyLongObject *)v,
                                            bytes, sizeof(val),
                                            is_little, !is_unsigned);
 #else
                 PyObject *stepval = NULL, *mask = NULL, *shift = NULL;
@@ -12363,29 +12990,56 @@
             return PyLong_FromLongLong((PY_LONG_LONG) value);
 #endif
         }
     }
     {
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
+#if !CYTHON_COMPILING_IN_LIMITED_API && PY_VERSION_HEX < 0x030d0000
         return _PyLong_FromByteArray(bytes, sizeof(int),
                                      little, !is_unsigned);
+#else
+        PyObject *from_bytes, *result = NULL;
+        PyObject *py_bytes = NULL, *arg_tuple = NULL, *kwds = NULL, *order_str = NULL;
+        from_bytes = PyObject_GetAttrString((PyObject*)&PyLong_Type, "from_bytes");
+        if (!from_bytes) return NULL;
+        py_bytes = PyBytes_FromStringAndSize((char*)bytes, sizeof(int));
+        if (!py_bytes) goto limited_bad;
+        order_str = PyUnicode_FromString(little ? "little" : "big");
+        if (!order_str) goto limited_bad;
+        arg_tuple = PyTuple_Pack(2, py_bytes, order_str);
+        if (!arg_tuple) goto limited_bad;
+        if (!is_unsigned) {
+            kwds = PyDict_New();
+            if (!kwds) goto limited_bad;
+            if (PyDict_SetItemString(kwds, "signed", __Pyx_NewRef(Py_True))) goto limited_bad;
+        }
+        result = PyObject_Call(from_bytes, arg_tuple, kwds);
+        limited_bad:
+        Py_XDECREF(kwds);
+        Py_XDECREF(arg_tuple);
+        Py_XDECREF(order_str);
+        Py_XDECREF(py_bytes);
+        Py_XDECREF(from_bytes);
+        return result;
+#endif
     }
 }
 
 /* FormatTypeName */
 #if CYTHON_COMPILING_IN_LIMITED_API
 static __Pyx_TypeName
 __Pyx_PyType_GetName(PyTypeObject* tp)
 {
     PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
                                                __pyx_n_s_name);
     if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
         PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__167));
+        Py_XDECREF(name);
+        name = __Pyx_NewRef(__pyx_n_s__167);
     }
     return name;
 }
 #endif
 
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
@@ -12416,16 +13070,42 @@
             return PyLong_FromLongLong((PY_LONG_LONG) value);
 #endif
         }
     }
     {
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
+#if !CYTHON_COMPILING_IN_LIMITED_API && PY_VERSION_HEX < 0x030d0000
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
+#else
+        PyObject *from_bytes, *result = NULL;
+        PyObject *py_bytes = NULL, *arg_tuple = NULL, *kwds = NULL, *order_str = NULL;
+        from_bytes = PyObject_GetAttrString((PyObject*)&PyLong_Type, "from_bytes");
+        if (!from_bytes) return NULL;
+        py_bytes = PyBytes_FromStringAndSize((char*)bytes, sizeof(long));
+        if (!py_bytes) goto limited_bad;
+        order_str = PyUnicode_FromString(little ? "little" : "big");
+        if (!order_str) goto limited_bad;
+        arg_tuple = PyTuple_Pack(2, py_bytes, order_str);
+        if (!arg_tuple) goto limited_bad;
+        if (!is_unsigned) {
+            kwds = PyDict_New();
+            if (!kwds) goto limited_bad;
+            if (PyDict_SetItemString(kwds, "signed", __Pyx_NewRef(Py_True))) goto limited_bad;
+        }
+        result = PyObject_Call(from_bytes, arg_tuple, kwds);
+        limited_bad:
+        Py_XDECREF(kwds);
+        Py_XDECREF(arg_tuple);
+        Py_XDECREF(order_str);
+        Py_XDECREF(py_bytes);
+        Py_XDECREF(from_bytes);
+        return result;
+#endif
     }
 }
 
 /* CIntFromPy */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *x) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
@@ -12591,15 +13271,15 @@
                 PyObject *tmp = v;
                 v = PyNumber_Long(tmp);
                 Py_DECREF(tmp);
             }
 #endif
             if (likely(v)) {
                 int ret = -1;
-#if !(CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_LIMITED_API) || defined(_PyLong_AsByteArray)
+#if PY_VERSION_HEX < 0x030d0000 && !(CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_LIMITED_API) || defined(_PyLong_AsByteArray)
                 int one = 1; int is_little = (int)*(unsigned char *)&one;
                 unsigned char *bytes = (unsigned char *)&val;
                 ret = _PyLong_AsByteArray((PyLongObject *)v,
                                            bytes, sizeof(val),
                                            is_little, !is_unsigned);
 #else
                 PyObject *stepval = NULL, *mask = NULL, *shift = NULL;
@@ -12811,49 +13491,58 @@
         return __Pyx_inner_PyErr_GivenExceptionMatches2(err, exc_type1, exc_type2);
     }
     return (PyErr_GivenExceptionMatches(err, exc_type1) || PyErr_GivenExceptionMatches(err, exc_type2));
 }
 #endif
 
 /* CheckBinaryVersion */
-static int __Pyx_check_binary_version(void) {
-    char ctversion[5];
-    int same=1, i, found_dot;
-    const char* rt_from_call = Py_GetVersion();
-    PyOS_snprintf(ctversion, 5, "%d.%d", PY_MAJOR_VERSION, PY_MINOR_VERSION);
-    found_dot = 0;
-    for (i = 0; i < 4; i++) {
-        if (!ctversion[i]) {
-            same = (rt_from_call[i] < '0' || rt_from_call[i] > '9');
-            break;
+static unsigned long __Pyx_get_runtime_version(void) {
+#if __PYX_LIMITED_VERSION_HEX >= 0x030B00A4
+    return Py_Version & ~0xFFUL;
+#else
+    const char* rt_version = Py_GetVersion();
+    unsigned long version = 0;
+    unsigned long factor = 0x01000000UL;
+    unsigned int digit = 0;
+    int i = 0;
+    while (factor) {
+        while ('0' <= rt_version[i] && rt_version[i] <= '9') {
+            digit = digit * 10 + (unsigned int) (rt_version[i] - '0');
+            ++i;
         }
-        if (rt_from_call[i] != ctversion[i]) {
-            same = 0;
+        version += factor * digit;
+        if (rt_version[i] != '.')
             break;
-        }
+        digit = 0;
+        factor >>= 8;
+        ++i;
     }
-    if (!same) {
-        char rtversion[5] = {'\0'};
+    return version;
+#endif
+}
+static int __Pyx_check_binary_version(unsigned long ct_version, unsigned long rt_version, int allow_newer) {
+    const unsigned long MAJOR_MINOR = 0xFFFF0000UL;
+    if ((rt_version & MAJOR_MINOR) == (ct_version & MAJOR_MINOR))
+        return 0;
+    if (likely(allow_newer && (rt_version & MAJOR_MINOR) > (ct_version & MAJOR_MINOR)))
+        return 1;
+    {
         char message[200];
-        for (i=0; i<4; ++i) {
-            if (rt_from_call[i] == '.') {
-                if (found_dot) break;
-                found_dot = 1;
-            } else if (rt_from_call[i] < '0' || rt_from_call[i] > '9') {
-                break;
-            }
-            rtversion[i] = rt_from_call[i];
-        }
         PyOS_snprintf(message, sizeof(message),
-                      "compile time version %s of module '%.100s' "
-                      "does not match runtime version %s",
-                      ctversion, __Pyx_MODULE_NAME, rtversion);
+                      "compile time Python version %d.%d "
+                      "of module '%.100s' "
+                      "%s "
+                      "runtime version %d.%d",
+                       (int) (ct_version >> 24), (int) ((ct_version >> 16) & 0xFF),
+                       __Pyx_MODULE_NAME,
+                       (allow_newer) ? "was newer than" : "does not match",
+                       (int) (rt_version >> 24), (int) ((rt_version >> 16) & 0xFF)
+       );
         return PyErr_WarnEx(NULL, message, 1);
     }
-    return 0;
 }
 
 /* InitStrings */
 #if PY_MAJOR_VERSION >= 3
 static int __Pyx_InitString(__Pyx_StringTabEntry t, PyObject **str) {
     if (t.is_unicode | t.is_str) {
         if (t.intern) {
@@ -12891,16 +13580,32 @@
             return -1;
         #endif
         ++t;
     }
     return 0;
 }
 
+#include <string.h>
+static CYTHON_INLINE Py_ssize_t __Pyx_ssize_strlen(const char *s) {
+    size_t len = strlen(s);
+    if (unlikely(len > (size_t) PY_SSIZE_T_MAX)) {
+        PyErr_SetString(PyExc_OverflowError, "byte string is too long");
+        return -1;
+    }
+    return (Py_ssize_t) len;
+}
 static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char* c_str) {
-    return __Pyx_PyUnicode_FromStringAndSize(c_str, (Py_ssize_t)strlen(c_str));
+    Py_ssize_t len = __Pyx_ssize_strlen(c_str);
+    if (unlikely(len < 0)) return NULL;
+    return __Pyx_PyUnicode_FromStringAndSize(c_str, len);
+}
+static CYTHON_INLINE PyObject* __Pyx_PyByteArray_FromString(const char* c_str) {
+    Py_ssize_t len = __Pyx_ssize_strlen(c_str);
+    if (unlikely(len < 0)) return NULL;
+    return PyByteArray_FromStringAndSize(c_str, len);
 }
 static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject* o) {
     Py_ssize_t ignore;
     return __Pyx_PyObject_AsStringAndSize(o, &ignore);
 }
 #if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
 #if !CYTHON_PEP393_ENABLED
```

### Comparing `neologdn-0.5.2/setup.py` & `neologdn-0.5.3/setup.py`

 * *Files 0% similar despite different names*

```diff
@@ -27,20 +27,20 @@
       keywords=['japanese', 'MeCab'],
       classifiers=[
           'Development Status :: 3 - Alpha', 'Intended Audience :: Developers',
           'Natural Language :: Japanese',
           'License :: OSI Approved :: Apache Software License',
           'Programming Language :: Cython', 'Programming Language :: Python',
           'Programming Language :: Python :: 3',
-          'Programming Language :: Python :: 3.6',
           'Programming Language :: Python :: 3.7',
           'Programming Language :: Python :: 3.8',
           'Programming Language :: Python :: 3.9',
           'Programming Language :: Python :: 3.10',
           'Programming Language :: Python :: 3.11',
+          'Programming Language :: Python :: 3.12',
           'Topic :: Text Processing :: Linguistic'
       ],
       description='Japanese text normalizer for mecab-neologd',
       long_description='%s\n\n%s' %
       (open('README.rst', 'r', encoding='utf8').read(),
        open('CHANGES.rst', 'r', encoding='utf8').read()),
       long_description_content_type='text/x-rst')
```

