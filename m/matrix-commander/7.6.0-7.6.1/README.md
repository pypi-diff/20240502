# Comparing `tmp/matrix-commander-7.6.0.tar.gz` & `tmp/matrix_commander-7.6.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "matrix-commander-7.6.0.tar", last modified: Mon Oct 16 13:45:33 2023, max compression
+gzip compressed data, was "matrix_commander-7.6.1.tar", last modified: Thu May  2 12:04:12 2024, max compression
```

## Comparing `matrix-commander-7.6.0.tar` & `matrix_commander-7.6.1.tar`

### file list

```diff
@@ -1,21 +1,21 @@
-drwxr-xr-x   0 user      (1000) user      (1000)        0 2023-10-16 13:45:33.145000 matrix-commander-7.6.0/
--rw-rw-r--   0 user      (1000) user      (1000)    35149 2022-05-22 12:47:05.000000 matrix-commander-7.6.0/LICENSE
--rw-rw-r--   0 user      (1000) user      (1000)       29 2022-05-29 22:34:19.000000 matrix-commander-7.6.0/MANIFEST.in
--rw-r--r--   0 user      (1000) user      (1000)   130993 2023-10-16 13:45:33.145000 matrix-commander-7.6.0/PKG-INFO
--rw-rw-r--   0 user      (1000) user      (1000)     2397 2022-12-11 20:36:11.000000 matrix-commander-7.6.0/PyPi-Instructions.md
--rw-r--r--   0 user      (1000) user      (1000)   127269 2023-10-16 13:41:56.000000 matrix-commander-7.6.0/README.md
-drwxr-xr-x   0 user      (1000) user      (1000)        0 2023-10-16 13:45:33.139000 matrix-commander-7.6.0/matrix_commander/
--rw-rw-r--   0 user      (1000) user      (1000)       35 2022-05-26 15:24:28.000000 matrix-commander-7.6.0/matrix_commander/__init__.py
--rwxr-xr-x   0 user      (1000) user      (1000)     1409 2022-12-12 12:36:26.000000 matrix-commander-7.6.0/matrix_commander/matrix-commander-tui
--rwxr-xr-x   0 user      (1000) user      (1000)   379675 2023-10-16 13:45:02.000000 matrix-commander-7.6.0/matrix_commander/matrix_commander.py
-drwxr-xr-x   0 user      (1000) user      (1000)        0 2023-10-16 13:45:33.142000 matrix-commander-7.6.0/matrix_commander.egg-info/
--rw-r--r--   0 user      (1000) user      (1000)   130993 2023-10-16 13:45:33.000000 matrix-commander-7.6.0/matrix_commander.egg-info/PKG-INFO
--rw-rw-r--   0 user      (1000) user      (1000)      440 2023-10-16 13:45:33.000000 matrix-commander-7.6.0/matrix_commander.egg-info/SOURCES.txt
--rw-rw-r--   0 user      (1000) user      (1000)        1 2023-10-16 13:45:33.000000 matrix-commander-7.6.0/matrix_commander.egg-info/dependency_links.txt
--rw-rw-r--   0 user      (1000) user      (1000)       59 2023-10-16 13:45:33.000000 matrix-commander-7.6.0/matrix_commander.egg-info/entry_points.txt
--rw-rw-r--   0 user      (1000) user      (1000)      128 2023-10-16 13:45:33.000000 matrix-commander-7.6.0/matrix_commander.egg-info/requires.txt
--rw-rw-r--   0 user      (1000) user      (1000)       17 2023-10-16 13:45:33.000000 matrix-commander-7.6.0/matrix_commander.egg-info/top_level.txt
--rw-rw-r--   0 user      (1000) user      (1000)       85 2022-05-26 08:19:14.000000 matrix-commander-7.6.0/pyproject.toml
--rw-r--r--   0 user      (1000) user      (1000)     1379 2023-10-16 13:45:33.146000 matrix-commander-7.6.0/setup.cfg
-drwxr-xr-x   0 user      (1000) user      (1000)        0 2023-10-16 13:45:33.142000 matrix-commander-7.6.0/tests/
--rwxrwxr-x   0 user      (1000) user      (1000)     2068 2022-10-15 11:32:09.000000 matrix-commander-7.6.0/tests/test-send.py
+drwxr-xr-x   0 user      (1000) user      (1000)        0 2024-05-02 12:04:12.383805 matrix_commander-7.6.1/
+-rw-rw-r--   0 user      (1000) user      (1000)    35149 2022-05-22 12:47:05.000000 matrix_commander-7.6.1/LICENSE
+-rw-rw-r--   0 user      (1000) user      (1000)       29 2022-05-29 22:34:19.000000 matrix_commander-7.6.1/MANIFEST.in
+-rw-r--r--   0 user      (1000) user      (1000)   130871 2024-05-02 12:04:12.383805 matrix_commander-7.6.1/PKG-INFO
+-rw-rw-r--   0 user      (1000) user      (1000)     2397 2022-12-11 20:36:11.000000 matrix_commander-7.6.1/PyPi-Instructions.md
+-rw-r--r--   0 user      (1000) user      (1000)   127269 2023-10-16 13:41:56.000000 matrix_commander-7.6.1/README.md
+drwxr-xr-x   0 user      (1000) user      (1000)        0 2024-05-02 12:04:12.375805 matrix_commander-7.6.1/matrix_commander/
+-rw-rw-r--   0 user      (1000) user      (1000)       35 2022-05-26 15:24:28.000000 matrix_commander-7.6.1/matrix_commander/__init__.py
+-rwxr-xr-x   0 user      (1000) user      (1000)     1409 2022-12-12 12:36:26.000000 matrix_commander-7.6.1/matrix_commander/matrix-commander-tui
+-rwxr-xr-x   0 user      (1000) user      (1000)   379676 2024-05-02 11:54:15.000000 matrix_commander-7.6.1/matrix_commander/matrix_commander.py
+drwxr-xr-x   0 user      (1000) user      (1000)        0 2024-05-02 12:04:12.381805 matrix_commander-7.6.1/matrix_commander.egg-info/
+-rw-r--r--   0 user      (1000) user      (1000)   130871 2024-05-02 12:04:12.000000 matrix_commander-7.6.1/matrix_commander.egg-info/PKG-INFO
+-rw-rw-r--   0 user      (1000) user      (1000)      440 2024-05-02 12:04:12.000000 matrix_commander-7.6.1/matrix_commander.egg-info/SOURCES.txt
+-rw-rw-r--   0 user      (1000) user      (1000)        1 2024-05-02 12:04:12.000000 matrix_commander-7.6.1/matrix_commander.egg-info/dependency_links.txt
+-rw-rw-r--   0 user      (1000) user      (1000)       59 2024-05-02 12:04:12.000000 matrix_commander-7.6.1/matrix_commander.egg-info/entry_points.txt
+-rw-rw-r--   0 user      (1000) user      (1000)      142 2024-05-02 12:04:12.000000 matrix_commander-7.6.1/matrix_commander.egg-info/requires.txt
+-rw-rw-r--   0 user      (1000) user      (1000)       17 2024-05-02 12:04:12.000000 matrix_commander-7.6.1/matrix_commander.egg-info/top_level.txt
+-rw-rw-r--   0 user      (1000) user      (1000)       85 2022-05-26 08:19:14.000000 matrix_commander-7.6.1/pyproject.toml
+-rw-r--r--   0 user      (1000) user      (1000)     1292 2024-05-02 12:04:12.384805 matrix_commander-7.6.1/setup.cfg
+drwxr-xr-x   0 user      (1000) user      (1000)        0 2024-05-02 12:04:12.377805 matrix_commander-7.6.1/tests/
+-rwxrwxr-x   0 user      (1000) user      (1000)     2068 2022-10-15 11:32:09.000000 matrix_commander-7.6.1/tests/test-send.py
```

### Comparing `matrix-commander-7.6.0/LICENSE` & `matrix_commander-7.6.1/LICENSE`

 * *Files identical despite different names*

### Comparing `matrix-commander-7.6.0/PKG-INFO` & `matrix_commander-7.6.1/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,19 +1,16 @@
 Metadata-Version: 2.1
 Name: matrix-commander
-Version: 7.6.0
+Version: 7.6.1
 Summary: A simple command-line Matrix client
 Home-page: https://github.com/8go/matrix-commander
 Author: 8go
 Project-URL: Bug Tracker, https://github.com/8go/matrix-commander/issues
 Project-URL: repository, https://github.com/8go/matrix-commander
 Keywords: Matrix,chat,messaging
-Classifier: Programming Language :: Python :: 3.8
-Classifier: Programming Language :: Python :: 3.9
-Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3.12
 Classifier: License :: OSI Approved :: GNU Lesser General Public License v3 or later (LGPLv3+)
 Classifier: Operating System :: OS Independent
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Natural Language :: English
@@ -21,14 +18,15 @@
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: aiohttp
 Requires-Dist: aiofiles>=0.6.0
 Requires-Dist: argparse
 Requires-Dist: asyncio
+Requires-Dist: async-timeout
 Requires-Dist: datetime
 Requires-Dist: emoji
 Requires-Dist: markdown
 Requires-Dist: matrix-nio[e2e]>=0.14.1
 Requires-Dist: notify2
 Requires-Dist: Pillow
 Requires-Dist: python_magic
```

### Comparing `matrix-commander-7.6.0/PyPi-Instructions.md` & `matrix_commander-7.6.1/PyPi-Instructions.md`

 * *Files identical despite different names*

### Comparing `matrix-commander-7.6.0/README.md` & `matrix_commander-7.6.1/README.md`

 * *Files identical despite different names*

### Comparing `matrix-commander-7.6.0/matrix_commander/matrix-commander-tui` & `matrix_commander-7.6.1/matrix_commander/matrix-commander-tui`

 * *Files identical despite different names*

### Comparing `matrix-commander-7.6.0/matrix_commander/matrix_commander.py` & `matrix_commander-7.6.1/matrix_commander/matrix_commander.py`

 * *Files 0% similar despite different names*

```diff
@@ -205,17 +205,17 @@
 00000cc0: 706f 7274 2047 6574 4f70 656e 4944 546f  port GetOpenIDTo
 00000cd0: 6b65 6e45 7272 6f72 0a0a 2020 2020 4841  kenError..    HA
 00000ce0: 5645 5f4f 5045 4e49 4420 3d20 5472 7565  VE_OPENID = True
 00000cf0: 0a65 7863 6570 7420 496d 706f 7274 4572  .except ImportEr
 00000d00: 726f 723a 0a20 2020 2048 4156 455f 4f50  ror:.    HAVE_OP
 00000d10: 454e 4944 203d 2046 616c 7365 0a0a 2320  ENID = False..# 
 00000d20: 7665 7273 696f 6e20 6e75 6d62 6572 0a56  version number.V
-00000d30: 4552 5349 4f4e 203d 2022 3230 3233 2d31  ERSION = "2023-1
-00000d40: 302d 3136 220a 5645 5253 494f 4e4e 5220  0-16".VERSIONNR 
-00000d50: 3d20 2237 2e36 2e30 220a 2320 6d61 7472  = "7.6.0".# matr
+00000d30: 4552 5349 4f4e 203d 2022 3230 3234 2d30  ERSION = "2024-0
+00000d40: 352d 3032 220a 5645 5253 494f 4e4e 5220  5-02".VERSIONNR 
+00000d50: 3d20 2237 2e36 2e31 220a 2320 6d61 7472  = "7.6.1".# matr
 00000d60: 6978 2d63 6f6d 6d61 6e64 6572 3b20 666f  ix-commander; fo
 00000d70: 7220 6261 636b 7761 7264 7320 636f 6d70  r backwards comp
 00000d80: 6974 6162 696c 6974 7920 7265 706c 6163  itability replac
 00000d90: 6520 5f20 7769 7468 202d 0a50 524f 475f  e _ with -.PROG_
 00000da0: 5749 5448 4f55 545f 4558 5420 3d20 6f73  WITHOUT_EXT = os
 00000db0: 2e70 6174 682e 7370 6c69 7465 7874 286f  .path.splitext(o
 00000dc0: 732e 7061 7468 2e62 6173 656e 616d 6528  s.path.basename(
@@ -15200,8531 +15200,8531 @@
 0003b5f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
 0003b600: 7261 6973 6520 4d61 7472 6978 436f 6d6d  raise MatrixComm
 0003b610: 616e 6465 7245 7272 6f72 280a 2020 2020  anderError(.    
 0003b620: 2020 2020 2020 2020 2245 3232 363a 2022          "E226: "
 0003b630: 0a20 2020 2020 2020 2020 2020 2022 2d2d  .            "--
 0003b640: 6c6f 6769 6e20 7370 6563 6966 6965 7320  login specifies 
 0003b650: 696e 7661 6c69 6420 6175 7468 656e 7469  invalid authenti
-0003b660: 6361 7469 6e20 6d65 7468 6f64 2022 0a20  catin method ". 
-0003b670: 2020 2020 2020 2020 2020 2066 2227 7b6d             f"'{m
-0003b680: 6574 686f 647d 272e 204f 6e6c 7920 2770  ethod}'. Only 'p
-0003b690: 6173 7377 6f72 6427 2061 6e64 2027 7373  assword' and 'ss
-0003b6a0: 6f27 2061 6c6c 6f77 6564 2e22 0a20 2020  o' allowed.".   
-0003b6b0: 2020 2020 2029 2066 726f 6d20 4e6f 6e65       ) from None
-0003b6c0: 0a20 2020 2069 6620 6773 2e70 612e 686f  .    if gs.pa.ho
-0003b6d0: 6d65 7365 7276 6572 3a0a 2020 2020 2020  meserver:.      
-0003b6e0: 2020 686f 6d65 7365 7276 6572 203d 2067    homeserver = g
-0003b6f0: 732e 7061 2e68 6f6d 6573 6572 7665 720a  s.pa.homeserver.
-0003b700: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003b710: 2020 696e 7465 7261 6374 6976 6520 3d20    interactive = 
-0003b720: 5472 7565 0a20 2020 2020 2020 2068 6f6d  True.        hom
-0003b730: 6573 6572 7665 7220 3d20 2268 7474 7073  eserver = "https
-0003b740: 3a2f 2f6d 6174 7269 782e 6578 616d 706c  ://matrix.exampl
-0003b750: 652e 6f72 6722 0a20 2020 2020 2020 2068  e.org".        h
-0003b760: 6f6d 6573 6572 7665 7220 3d20 696e 7075  omeserver = inpu
-0003b770: 7428 6622 456e 7465 7220 5552 4c20 6f66  t(f"Enter URL of
-0003b780: 2079 6f75 7220 686f 6d65 7365 7276 6572   your homeserver
-0003b790: 3a20 5b7b 686f 6d65 7365 7276 6572 7d5d  : [{homeserver}]
-0003b7a0: 2022 290a 2020 2020 2020 2020 6966 206e   ").        if n
-0003b7b0: 6f74 2068 6f6d 6573 6572 7665 723a 0a20  ot homeserver:. 
-0003b7c0: 2020 2020 2020 2020 2020 2068 6f6d 6573             homes
-0003b7d0: 6572 7665 7220 3d20 2268 7474 7073 3a2f  erver = "https:/
-0003b7e0: 2f6d 6174 7269 782e 6f72 6722 2020 2320  /matrix.org"  # 
-0003b7f0: 6265 7474 6572 2065 7272 6f72 206d 7367  better error msg
-0003b800: 206c 6174 6572 0a20 2020 2069 6620 6e6f   later.    if no
-0003b810: 7420 280a 2020 2020 2020 2020 686f 6d65  t (.        home
-0003b820: 7365 7276 6572 2e73 7461 7274 7377 6974  server.startswit
-0003b830: 6828 2268 7474 7073 3a2f 2f22 2920 6f72  h("https://") or
-0003b840: 2068 6f6d 6573 6572 7665 722e 7374 6172   homeserver.star
-0003b850: 7473 7769 7468 2822 6874 7470 3a2f 2f22  tswith("http://"
-0003b860: 290a 2020 2020 293a 0a20 2020 2020 2020  ).    ):.       
-0003b870: 2068 6f6d 6573 6572 7665 7220 3d20 2268   homeserver = "h
-0003b880: 7474 7073 3a2f 2f22 202b 2068 6f6d 6573  ttps://" + homes
-0003b890: 6572 7665 720a 2020 2020 686f 6d65 7365  erver.    homese
-0003b8a0: 7276 6572 5f73 686f 7274 203d 2075 726c  rver_short = url
-0003b8b0: 7061 7273 6528 686f 6d65 7365 7276 6572  parse(homeserver
-0003b8c0: 292e 686f 7374 6e61 6d65 2020 2320 6d61  ).hostname  # ma
-0003b8d0: 7472 6978 2e65 7861 6d70 6c65 2e6f 7267  trix.example.org
-0003b8e0: 0a0a 2020 2020 2320 466f 7220 5353 4f20  ..    # For SSO 
-0003b8f0: 6c6f 6769 6e2c 2075 7365 725f 6964 2069  login, user_id i
-0003b900: 7320 6e6f 7420 6e65 6564 6564 2e20 4275  s not needed. Bu
-0003b910: 7420 6d61 7472 6978 2d63 6f6d 6d61 6e64  t matrix-command
-0003b920: 6572 206e 6565 6473 0a20 2020 2023 2075  er needs.    # u
-0003b930: 7365 725f 6964 2066 6f72 2063 7265 6465  ser_id for crede
-0003b940: 6e74 6961 6c73 2066 6f72 2061 7267 756d  ntials for argum
-0003b950: 656e 7473 206c 696b 6520 2d2d 7768 6f61  ents like --whoa
-0003b960: 6d69 2e0a 2020 2020 2320 466f 7220 5353  mi..    # For SS
-0003b970: 4f2c 2077 6520 6765 7420 7468 6520 7573  O, we get the us
-0003b980: 6572 5f69 6420 6672 6f6d 206c 6f67 696e  er_id from login
-0003b990: 2829 2041 5049 2063 616c 6c2c 2069 2e65  () API call, i.e
-0003b9a0: 2e20 6672 6f6d 2073 6572 7665 722e 0a20  . from server.. 
-0003b9b0: 2020 2069 6620 6773 2e70 612e 7573 6572     if gs.pa.user
-0003b9c0: 5f6c 6f67 696e 3a0a 2020 2020 2020 2020  _login:.        
-0003b9d0: 7573 6572 5f69 6420 3d20 6773 2e70 612e  user_id = gs.pa.
-0003b9e0: 7573 6572 5f6c 6f67 696e 0a20 2020 2065  user_login.    e
-0003b9f0: 6c73 653a 0a20 2020 2020 2020 2075 7365  lse:.        use
-0003ba00: 725f 6964 203d 204e 6f6e 650a 2020 2020  r_id = None.    
-0003ba10: 6966 206d 6574 686f 6420 3d3d 2022 7061  if method == "pa
-0003ba20: 7373 776f 7264 2220 616e 6420 6e6f 7420  ssword" and not 
-0003ba30: 7573 6572 5f69 643a 0a20 2020 2020 2020  user_id:.       
-0003ba40: 2069 6e74 6572 6163 7469 7665 203d 2054   interactive = T
-0003ba50: 7275 650a 2020 2020 2020 2020 7573 6572  rue.        user
-0003ba60: 5f69 6420 3d20 2240 6a6f 686e 3a65 7861  _id = "@john:exa
-0003ba70: 6d70 6c65 2e6f 7267 220a 2020 2020 2020  mple.org".      
-0003ba80: 2020 7573 6572 5f69 6432 203d 2022 406a    user_id2 = "@j
-0003ba90: 6f68 6e3a 2220 2b20 686f 6d65 7365 7276  ohn:" + homeserv
-0003baa0: 6572 5f73 686f 7274 0a20 2020 2020 2020  er_short.       
-0003bab0: 2075 7365 725f 6964 203d 2069 6e70 7574   user_id = input
-0003bac0: 280a 2020 2020 2020 2020 2020 2020 6622  (.            f"
-0003bad0: 456e 7465 7220 796f 7572 2075 7365 7220  Enter your user 
-0003bae0: 4944 3a20 205b 7b75 7365 725f 6964 7d5d  ID:  [{user_id}]
-0003baf0: 2020 6f72 2020 5b6a 6f68 6e5d 2066 6f72    or  [john] for
-0003bb00: 207b 7573 6572 5f69 6432 7d20 3a20 220a   {user_id2} : ".
-0003bb10: 2020 2020 2020 2020 292e 7374 7269 7028          ).strip(
-0003bb20: 290a 2020 2020 6966 206d 6574 686f 6420  ).    if method 
-0003bb30: 3d3d 2022 7061 7373 776f 7264 223a 0a20  == "password":. 
-0003bb40: 2020 2020 2020 2069 6620 6773 2e70 612e         if gs.pa.
-0003bb50: 7061 7373 776f 7264 3a0a 2020 2020 2020  password:.      
-0003bb60: 2020 2020 2020 7061 7373 776f 7264 203d        password =
-0003bb70: 2067 732e 7061 2e70 6173 7377 6f72 640a   gs.pa.password.
-0003bb80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003bb90: 2020 2020 2020 2020 2020 696e 7465 7261            intera
-0003bba0: 6374 6976 6520 3d20 5472 7565 0a20 2020  ctive = True.   
-0003bbb0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-0003bbc0: 506c 6561 7365 2070 726f 7669 6465 2079  Please provide y
-0003bbd0: 6f75 7220 4d61 7472 6978 2061 6363 6f75  our Matrix accou
-0003bbe0: 6e74 2070 6173 7377 6f72 642e 2229 0a20  nt password."). 
-0003bbf0: 2020 2020 2020 2020 2020 2070 6173 7377             passw
-0003bc00: 6f72 6420 3d20 6765 7470 6173 732e 6765  ord = getpass.ge
-0003bc10: 7470 6173 7328 290a 2020 2020 656c 6966  tpass().    elif
-0003bc20: 206d 6574 686f 6420 3d3d 2022 7373 6f22   method == "sso"
-0003bc30: 3a0a 2020 2020 2020 2020 7061 7373 776f  :.        passwo
-0003bc40: 7264 203d 204e 6f6e 650a 2020 2020 6966  rd = None.    if
-0003bc50: 2067 732e 7061 2e64 6576 6963 6520 6973   gs.pa.device is
-0003bc60: 206e 6f74 204e 6f6e 653a 2020 2320 736f   not None:  # so
-0003bc70: 6d65 7468 696e 6720 7761 7320 7370 6563  mething was spec
-0003bc80: 6966 6965 640a 2020 2020 2020 2020 6465  ified.        de
-0003bc90: 7669 6365 5f6e 616d 6520 3d20 6773 2e70  vice_name = gs.p
-0003bca0: 612e 6465 7669 6365 2e73 7472 6970 2829  a.device.strip()
-0003bcb0: 0a20 2020 2020 2020 2069 6620 6465 7669  .        if devi
-0003bcc0: 6365 5f6e 616d 6520 3d3d 2022 223a 0a20  ce_name == "":. 
-0003bcd0: 2020 2020 2020 2020 2020 2064 6576 6963             devic
-0003bce0: 655f 6e61 6d65 203d 2050 524f 475f 5749  e_name = PROG_WI
-0003bcf0: 5448 4f55 545f 4558 5420 2023 2064 6566  THOUT_EXT  # def
-0003bd00: 6175 6c74 0a20 2020 2065 6c73 653a 0a20  ault.    else:. 
-0003bd10: 2020 2020 2020 2069 6e74 6572 6163 7469         interacti
-0003bd20: 7665 203d 2054 7275 650a 2020 2020 2020  ve = True.      
-0003bd30: 2020 6465 7669 6365 5f6e 616d 6520 3d20    device_name = 
-0003bd40: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
-0003bd50: 0a20 2020 2020 2020 2064 6576 6963 655f  .        device_
-0003bd60: 6e61 6d65 203d 2069 6e70 7574 280a 2020  name = input(.  
-0003bd70: 2020 2020 2020 2020 2020 6622 4368 6f6f            f"Choo
-0003bd80: 7365 2061 206e 616d 6520 666f 7220 7468  se a name for th
-0003bd90: 6973 2064 6576 6963 653a 205b 7b64 6576  is device: [{dev
-0003bda0: 6963 655f 6e61 6d65 7d5d 2022 0a20 2020  ice_name}] ".   
-0003bdb0: 2020 2020 2029 2e73 7472 6970 2829 0a20       ).strip(). 
-0003bdc0: 2020 2020 2020 2069 6620 6465 7669 6365         if device
-0003bdd0: 5f6e 616d 6520 3d3d 2022 223a 0a20 2020  _name == "":.   
-0003bde0: 2020 2020 2020 2020 2064 6576 6963 655f           device_
-0003bdf0: 6e61 6d65 203d 2050 524f 475f 5749 5448  name = PROG_WITH
-0003be00: 4f55 545f 4558 5420 2023 2064 6566 6175  OUT_EXT  # defau
-0003be10: 6c74 0a20 2020 2069 6620 6773 2e70 612e  lt.    if gs.pa.
-0003be20: 726f 6f6d 5f64 6566 6175 6c74 2069 7320  room_default is 
-0003be30: 6e6f 7420 4e6f 6e65 3a20 2023 2073 6f6d  not None:  # som
-0003be40: 6574 6869 6e67 2077 6173 2073 7065 6369  ething was speci
-0003be50: 6669 6564 0a20 2020 2020 2020 2072 6f6f  fied.        roo
-0003be60: 6d5f 6964 203d 2067 732e 7061 2e72 6f6f  m_id = gs.pa.roo
-0003be70: 6d5f 6465 6661 756c 742e 7374 7269 7028  m_default.strip(
-0003be80: 290a 2020 2020 2020 2020 726f 6f6d 5f69  ).        room_i
-0003be90: 6420 3d20 726f 6f6d 5f69 642e 7265 706c  d = room_id.repl
-0003bea0: 6163 6528 7222 5c21 222c 2022 2122 2920  ace(r"\!", "!") 
-0003beb0: 2023 2072 656d 6f76 6520 706f 7373 6962   # remove possib
-0003bec0: 6c65 2065 7363 6170 650a 2020 2020 656c  le escape.    el
-0003bed0: 7365 3a0a 2020 2020 2020 2020 696e 7465  se:.        inte
-0003bee0: 7261 6374 6976 6520 3d20 5472 7565 0a20  ractive = True. 
-0003bef0: 2020 2020 2020 2072 6f6f 6d5f 6964 203d         room_id =
-0003bf00: 2022 2153 6f6d 6552 6f6f 6d49 6453 7472   "!SomeRoomIdStr
-0003bf10: 696e 673a 6578 616d 706c 652e 6f72 6722  ing:example.org"
-0003bf20: 0a20 2020 2020 2020 2072 6f6f 6d5f 6964  .        room_id
-0003bf30: 3220 3d20 2223 616c 6961 733a 2220 2b20  2 = "#alias:" + 
-0003bf40: 686f 6d65 7365 7276 6572 5f73 686f 7274  homeserver_short
-0003bf50: 0a20 2020 2020 2020 2072 6f6f 6d5f 6964  .        room_id
-0003bf60: 203d 2069 6e70 7574 280a 2020 2020 2020   = input(.      
-0003bf70: 2020 2020 2020 6622 456e 7465 7220 726f        f"Enter ro
-0003bf80: 6f6d 2049 4420 666f 7220 6465 6661 756c  om ID for defaul
-0003bf90: 7420 726f 6f6d 3a20 205b 7b72 6f6f 6d5f  t room:  [{room_
-0003bfa0: 6964 7d5d 2020 220a 2020 2020 2020 2020  id}]  ".        
-0003bfb0: 2020 2020 6622 6f72 2020 5b61 6c69 6173      f"or  [alias
-0003bfc0: 5d20 666f 7220 7b72 6f6f 6d5f 6964 327d  ] for {room_id2}
-0003bfd0: 203a 2022 0a20 2020 2020 2020 2029 2e73   : ".        ).s
-0003bfe0: 7472 6970 2829 0a20 2020 2069 6620 7573  trip().    if us
-0003bff0: 6572 5f69 6420 6973 206e 6f74 204e 6f6e  er_id is not Non
-0003c000: 653a 0a20 2020 2020 2020 2069 6620 6973  e:.        if is
-0003c010: 5f70 6172 7469 616c 5f75 7365 725f 6964  _partial_user_id
-0003c020: 2875 7365 725f 6964 293a 0a20 2020 2020  (user_id):.     
-0003c030: 2020 2020 2020 2075 7365 725f 6964 203d         user_id =
-0003c040: 2075 7365 725f 6964 202b 2022 3a22 202b   user_id + ":" +
-0003c050: 2068 6f6d 6573 6572 7665 725f 7368 6f72   homeserver_shor
-0003c060: 7420 2023 2064 6f6e 7420 7573 6520 666e  t  # dont use fn
-0003c070: 0a20 2020 2020 2020 2069 6620 6973 5f73  .        if is_s
-0003c080: 686f 7274 5f75 7365 725f 6964 2875 7365  hort_user_id(use
-0003c090: 725f 6964 293a 0a20 2020 2020 2020 2020  r_id):.         
-0003c0a0: 2020 2075 7365 725f 6964 203d 2022 4022     user_id = "@"
-0003c0b0: 202b 2075 7365 725f 6964 202b 2022 3a22   + user_id + ":"
-0003c0c0: 202b 2068 6f6d 6573 6572 7665 725f 7368   + homeserver_sh
-0003c0d0: 6f72 7420 2023 2064 6f6e 7420 7573 6520  ort  # dont use 
-0003c0e0: 666e 0a20 2020 2020 2020 2069 6620 6e6f  fn.        if no
-0003c0f0: 7420 6973 5f75 7365 725f 6964 2875 7365  t is_user_id(use
-0003c100: 725f 6964 293a 0a20 2020 2020 2020 2020  r_id):.         
-0003c110: 2020 2072 6169 7365 204d 6174 7269 7843     raise MatrixC
-0003c120: 6f6d 6d61 6e64 6572 4572 726f 7228 0a20  ommanderError(. 
-0003c130: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003c140: 4532 3237 3a20 220a 2020 2020 2020 2020  E227: ".        
-0003c150: 2020 2020 2020 2020 6622 5573 6572 2069          f"User i
-0003c160: 6420 277b 7573 6572 5f69 647d 2720 666f  d '{user_id}' fo
-0003c170: 7220 2d2d 6c6f 6769 6e20 6973 2069 6e76  r --login is inv
-0003c180: 616c 6964 2e20 220a 2020 2020 2020 2020  alid. ".        
-0003c190: 2020 2020 2020 2020 2253 7065 6369 6679          "Specify
-0003c1a0: 2063 6f72 7265 6374 2075 7365 7220 6964   correct user id
-0003c1b0: 2e22 0a20 2020 2020 2020 2020 2020 2029  .".            )
-0003c1c0: 2066 726f 6d20 4e6f 6e65 0a20 2020 2069   from None.    i
-0003c1d0: 6620 6973 5f73 686f 7274 5f72 6f6f 6d5f  f is_short_room_
-0003c1e0: 616c 6961 7328 726f 6f6d 5f69 6429 3a0a  alias(room_id):.
-0003c1f0: 2020 2020 2020 2020 6966 2072 6f6f 6d5f          if room_
-0003c200: 6964 5b30 5d20 213d 2022 2322 3a0a 2020  id[0] != "#":.  
-0003c210: 2020 2020 2020 2020 2020 726f 6f6d 5f69            room_i
-0003c220: 6420 3d20 2223 2220 2b20 726f 6f6d 5f69  d = "#" + room_i
-0003c230: 640a 2020 2020 2020 2020 726f 6f6d 5f69  d.        room_i
-0003c240: 6420 3d20 726f 6f6d 5f69 6420 2b20 223a  d = room_id + ":
-0003c250: 2220 2b20 686f 6d65 7365 7276 6572 5f73  " + homeserver_s
-0003c260: 686f 7274 2020 2320 646f 6e74 2075 7365  hort  # dont use
-0003c270: 2066 6e0a 2020 2020 6966 206e 6f74 2069   fn.    if not i
-0003c280: 735f 726f 6f6d 2872 6f6f 6d5f 6964 293a  s_room(room_id):
-0003c290: 0a20 2020 2020 2020 2072 6169 7365 204d  .        raise M
-0003c2a0: 6174 7269 7843 6f6d 6d61 6e64 6572 4572  atrixCommanderEr
-0003c2b0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-0003c2c0: 2022 4532 3238 3a20 220a 2020 2020 2020   "E228: ".      
-0003c2d0: 2020 2020 2020 6622 526f 6f6d 2069 6420        f"Room id 
-0003c2e0: 277b 726f 6f6d 5f69 647d 2720 666f 7220  '{room_id}' for 
-0003c2f0: 2d2d 6c6f 6769 6e20 6973 2069 6e76 616c  --login is inval
-0003c300: 6964 2e20 220a 2020 2020 2020 2020 2020  id. ".          
-0003c310: 2020 2253 7065 6369 6679 2063 6f72 7265    "Specify corre
-0003c320: 6374 2072 6f6f 6d20 6964 2e22 0a20 2020  ct room id.".   
-0003c330: 2020 2020 2029 2066 726f 6d20 4e6f 6e65       ) from None
-0003c340: 0a0a 2020 2020 6773 2e6c 6f67 2e69 6e66  ..    gs.log.inf
-0003c350: 6f28 6622 5468 6520 7072 6f76 6964 6564  o(f"The provided
-0003c360: 206c 6f67 696e 2064 6174 6120 6973 3a20   login data is: 
-0003c370: 686f 6d65 7365 7276 6572 3d27 7b68 6f6d  homeserver='{hom
-0003c380: 6573 6572 7665 727d 2722 290a 2020 2020  eserver}'").    
-0003c390: 6773 2e6c 6f67 2e69 6e66 6f28 6622 2020  gs.log.info(f"  
+0003b660: 6361 7469 6f6e 206d 6574 686f 6420 220a  cation method ".
+0003b670: 2020 2020 2020 2020 2020 2020 6622 277b              f"'{
+0003b680: 6d65 7468 6f64 7d27 2e20 4f6e 6c79 2027  method}'. Only '
+0003b690: 7061 7373 776f 7264 2720 616e 6420 2773  password' and 's
+0003b6a0: 736f 2720 616c 6c6f 7765 642e 220a 2020  so' allowed.".  
+0003b6b0: 2020 2020 2020 2920 6672 6f6d 204e 6f6e        ) from Non
+0003b6c0: 650a 2020 2020 6966 2067 732e 7061 2e68  e.    if gs.pa.h
+0003b6d0: 6f6d 6573 6572 7665 723a 0a20 2020 2020  omeserver:.     
+0003b6e0: 2020 2068 6f6d 6573 6572 7665 7220 3d20     homeserver = 
+0003b6f0: 6773 2e70 612e 686f 6d65 7365 7276 6572  gs.pa.homeserver
+0003b700: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0003b710: 2020 2069 6e74 6572 6163 7469 7665 203d     interactive =
+0003b720: 2054 7275 650a 2020 2020 2020 2020 686f   True.        ho
+0003b730: 6d65 7365 7276 6572 203d 2022 6874 7470  meserver = "http
+0003b740: 733a 2f2f 6d61 7472 6978 2e65 7861 6d70  s://matrix.examp
+0003b750: 6c65 2e6f 7267 220a 2020 2020 2020 2020  le.org".        
+0003b760: 686f 6d65 7365 7276 6572 203d 2069 6e70  homeserver = inp
+0003b770: 7574 2866 2245 6e74 6572 2055 524c 206f  ut(f"Enter URL o
+0003b780: 6620 796f 7572 2068 6f6d 6573 6572 7665  f your homeserve
+0003b790: 723a 205b 7b68 6f6d 6573 6572 7665 727d  r: [{homeserver}
+0003b7a0: 5d20 2229 0a20 2020 2020 2020 2069 6620  ] ").        if 
+0003b7b0: 6e6f 7420 686f 6d65 7365 7276 6572 3a0a  not homeserver:.
+0003b7c0: 2020 2020 2020 2020 2020 2020 686f 6d65              home
+0003b7d0: 7365 7276 6572 203d 2022 6874 7470 733a  server = "https:
+0003b7e0: 2f2f 6d61 7472 6978 2e6f 7267 2220 2023  //matrix.org"  #
+0003b7f0: 2062 6574 7465 7220 6572 726f 7220 6d73   better error ms
+0003b800: 6720 6c61 7465 720a 2020 2020 6966 206e  g later.    if n
+0003b810: 6f74 2028 0a20 2020 2020 2020 2068 6f6d  ot (.        hom
+0003b820: 6573 6572 7665 722e 7374 6172 7473 7769  eserver.startswi
+0003b830: 7468 2822 6874 7470 733a 2f2f 2229 206f  th("https://") o
+0003b840: 7220 686f 6d65 7365 7276 6572 2e73 7461  r homeserver.sta
+0003b850: 7274 7377 6974 6828 2268 7474 703a 2f2f  rtswith("http://
+0003b860: 2229 0a20 2020 2029 3a0a 2020 2020 2020  ").    ):.      
+0003b870: 2020 686f 6d65 7365 7276 6572 203d 2022    homeserver = "
+0003b880: 6874 7470 733a 2f2f 2220 2b20 686f 6d65  https://" + home
+0003b890: 7365 7276 6572 0a20 2020 2068 6f6d 6573  server.    homes
+0003b8a0: 6572 7665 725f 7368 6f72 7420 3d20 7572  erver_short = ur
+0003b8b0: 6c70 6172 7365 2868 6f6d 6573 6572 7665  lparse(homeserve
+0003b8c0: 7229 2e68 6f73 746e 616d 6520 2023 206d  r).hostname  # m
+0003b8d0: 6174 7269 782e 6578 616d 706c 652e 6f72  atrix.example.or
+0003b8e0: 670a 0a20 2020 2023 2046 6f72 2053 534f  g..    # For SSO
+0003b8f0: 206c 6f67 696e 2c20 7573 6572 5f69 6420   login, user_id 
+0003b900: 6973 206e 6f74 206e 6565 6465 642e 2042  is not needed. B
+0003b910: 7574 206d 6174 7269 782d 636f 6d6d 616e  ut matrix-comman
+0003b920: 6465 7220 6e65 6564 730a 2020 2020 2320  der needs.    # 
+0003b930: 7573 6572 5f69 6420 666f 7220 6372 6564  user_id for cred
+0003b940: 656e 7469 616c 7320 666f 7220 6172 6775  entials for argu
+0003b950: 6d65 6e74 7320 6c69 6b65 202d 2d77 686f  ments like --who
+0003b960: 616d 692e 0a20 2020 2023 2046 6f72 2053  ami..    # For S
+0003b970: 534f 2c20 7765 2067 6574 2074 6865 2075  SO, we get the u
+0003b980: 7365 725f 6964 2066 726f 6d20 6c6f 6769  ser_id from logi
+0003b990: 6e28 2920 4150 4920 6361 6c6c 2c20 692e  n() API call, i.
+0003b9a0: 652e 2066 726f 6d20 7365 7276 6572 2e0a  e. from server..
+0003b9b0: 2020 2020 6966 2067 732e 7061 2e75 7365      if gs.pa.use
+0003b9c0: 725f 6c6f 6769 6e3a 0a20 2020 2020 2020  r_login:.       
+0003b9d0: 2075 7365 725f 6964 203d 2067 732e 7061   user_id = gs.pa
+0003b9e0: 2e75 7365 725f 6c6f 6769 6e0a 2020 2020  .user_login.    
+0003b9f0: 656c 7365 3a0a 2020 2020 2020 2020 7573  else:.        us
+0003ba00: 6572 5f69 6420 3d20 4e6f 6e65 0a20 2020  er_id = None.   
+0003ba10: 2069 6620 6d65 7468 6f64 203d 3d20 2270   if method == "p
+0003ba20: 6173 7377 6f72 6422 2061 6e64 206e 6f74  assword" and not
+0003ba30: 2075 7365 725f 6964 3a0a 2020 2020 2020   user_id:.      
+0003ba40: 2020 696e 7465 7261 6374 6976 6520 3d20    interactive = 
+0003ba50: 5472 7565 0a20 2020 2020 2020 2075 7365  True.        use
+0003ba60: 725f 6964 203d 2022 406a 6f68 6e3a 6578  r_id = "@john:ex
+0003ba70: 616d 706c 652e 6f72 6722 0a20 2020 2020  ample.org".     
+0003ba80: 2020 2075 7365 725f 6964 3220 3d20 2240     user_id2 = "@
+0003ba90: 6a6f 686e 3a22 202b 2068 6f6d 6573 6572  john:" + homeser
+0003baa0: 7665 725f 7368 6f72 740a 2020 2020 2020  ver_short.      
+0003bab0: 2020 7573 6572 5f69 6420 3d20 696e 7075    user_id = inpu
+0003bac0: 7428 0a20 2020 2020 2020 2020 2020 2066  t(.            f
+0003bad0: 2245 6e74 6572 2079 6f75 7220 7573 6572  "Enter your user
+0003bae0: 2049 443a 2020 5b7b 7573 6572 5f69 647d   ID:  [{user_id}
+0003baf0: 5d20 206f 7220 205b 6a6f 686e 5d20 666f  ]  or  [john] fo
+0003bb00: 7220 7b75 7365 725f 6964 327d 203a 2022  r {user_id2} : "
+0003bb10: 0a20 2020 2020 2020 2029 2e73 7472 6970  .        ).strip
+0003bb20: 2829 0a20 2020 2069 6620 6d65 7468 6f64  ().    if method
+0003bb30: 203d 3d20 2270 6173 7377 6f72 6422 3a0a   == "password":.
+0003bb40: 2020 2020 2020 2020 6966 2067 732e 7061          if gs.pa
+0003bb50: 2e70 6173 7377 6f72 643a 0a20 2020 2020  .password:.     
+0003bb60: 2020 2020 2020 2070 6173 7377 6f72 6420         password 
+0003bb70: 3d20 6773 2e70 612e 7061 7373 776f 7264  = gs.pa.password
+0003bb80: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0003bb90: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
+0003bba0: 6163 7469 7665 203d 2054 7275 650a 2020  active = True.  
+0003bbb0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0003bbc0: 2250 6c65 6173 6520 7072 6f76 6964 6520  "Please provide 
+0003bbd0: 796f 7572 204d 6174 7269 7820 6163 636f  your Matrix acco
+0003bbe0: 756e 7420 7061 7373 776f 7264 2e22 290a  unt password.").
+0003bbf0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+0003bc00: 776f 7264 203d 2067 6574 7061 7373 2e67  word = getpass.g
+0003bc10: 6574 7061 7373 2829 0a20 2020 2065 6c69  etpass().    eli
+0003bc20: 6620 6d65 7468 6f64 203d 3d20 2273 736f  f method == "sso
+0003bc30: 223a 0a20 2020 2020 2020 2070 6173 7377  ":.        passw
+0003bc40: 6f72 6420 3d20 4e6f 6e65 0a20 2020 2069  ord = None.    i
+0003bc50: 6620 6773 2e70 612e 6465 7669 6365 2069  f gs.pa.device i
+0003bc60: 7320 6e6f 7420 4e6f 6e65 3a20 2023 2073  s not None:  # s
+0003bc70: 6f6d 6574 6869 6e67 2077 6173 2073 7065  omething was spe
+0003bc80: 6369 6669 6564 0a20 2020 2020 2020 2064  cified.        d
+0003bc90: 6576 6963 655f 6e61 6d65 203d 2067 732e  evice_name = gs.
+0003bca0: 7061 2e64 6576 6963 652e 7374 7269 7028  pa.device.strip(
+0003bcb0: 290a 2020 2020 2020 2020 6966 2064 6576  ).        if dev
+0003bcc0: 6963 655f 6e61 6d65 203d 3d20 2222 3a0a  ice_name == "":.
+0003bcd0: 2020 2020 2020 2020 2020 2020 6465 7669              devi
+0003bce0: 6365 5f6e 616d 6520 3d20 5052 4f47 5f57  ce_name = PROG_W
+0003bcf0: 4954 484f 5554 5f45 5854 2020 2320 6465  ITHOUT_EXT  # de
+0003bd00: 6661 756c 740a 2020 2020 656c 7365 3a0a  fault.    else:.
+0003bd10: 2020 2020 2020 2020 696e 7465 7261 6374          interact
+0003bd20: 6976 6520 3d20 5472 7565 0a20 2020 2020  ive = True.     
+0003bd30: 2020 2064 6576 6963 655f 6e61 6d65 203d     device_name =
+0003bd40: 2050 524f 475f 5749 5448 4f55 545f 4558   PROG_WITHOUT_EX
+0003bd50: 540a 2020 2020 2020 2020 6465 7669 6365  T.        device
+0003bd60: 5f6e 616d 6520 3d20 696e 7075 7428 0a20  _name = input(. 
+0003bd70: 2020 2020 2020 2020 2020 2066 2243 686f             f"Cho
+0003bd80: 6f73 6520 6120 6e61 6d65 2066 6f72 2074  ose a name for t
+0003bd90: 6869 7320 6465 7669 6365 3a20 5b7b 6465  his device: [{de
+0003bda0: 7669 6365 5f6e 616d 657d 5d20 220a 2020  vice_name}] ".  
+0003bdb0: 2020 2020 2020 292e 7374 7269 7028 290a        ).strip().
+0003bdc0: 2020 2020 2020 2020 6966 2064 6576 6963          if devic
+0003bdd0: 655f 6e61 6d65 203d 3d20 2222 3a0a 2020  e_name == "":.  
+0003bde0: 2020 2020 2020 2020 2020 6465 7669 6365            device
+0003bdf0: 5f6e 616d 6520 3d20 5052 4f47 5f57 4954  _name = PROG_WIT
+0003be00: 484f 5554 5f45 5854 2020 2320 6465 6661  HOUT_EXT  # defa
+0003be10: 756c 740a 2020 2020 6966 2067 732e 7061  ult.    if gs.pa
+0003be20: 2e72 6f6f 6d5f 6465 6661 756c 7420 6973  .room_default is
+0003be30: 206e 6f74 204e 6f6e 653a 2020 2320 736f   not None:  # so
+0003be40: 6d65 7468 696e 6720 7761 7320 7370 6563  mething was spec
+0003be50: 6966 6965 640a 2020 2020 2020 2020 726f  ified.        ro
+0003be60: 6f6d 5f69 6420 3d20 6773 2e70 612e 726f  om_id = gs.pa.ro
+0003be70: 6f6d 5f64 6566 6175 6c74 2e73 7472 6970  om_default.strip
+0003be80: 2829 0a20 2020 2020 2020 2072 6f6f 6d5f  ().        room_
+0003be90: 6964 203d 2072 6f6f 6d5f 6964 2e72 6570  id = room_id.rep
+0003bea0: 6c61 6365 2872 225c 2122 2c20 2221 2229  lace(r"\!", "!")
+0003beb0: 2020 2320 7265 6d6f 7665 2070 6f73 7369    # remove possi
+0003bec0: 626c 6520 6573 6361 7065 0a20 2020 2065  ble escape.    e
+0003bed0: 6c73 653a 0a20 2020 2020 2020 2069 6e74  lse:.        int
+0003bee0: 6572 6163 7469 7665 203d 2054 7275 650a  eractive = True.
+0003bef0: 2020 2020 2020 2020 726f 6f6d 5f69 6420          room_id 
+0003bf00: 3d20 2221 536f 6d65 526f 6f6d 4964 5374  = "!SomeRoomIdSt
+0003bf10: 7269 6e67 3a65 7861 6d70 6c65 2e6f 7267  ring:example.org
+0003bf20: 220a 2020 2020 2020 2020 726f 6f6d 5f69  ".        room_i
+0003bf30: 6432 203d 2022 2361 6c69 6173 3a22 202b  d2 = "#alias:" +
+0003bf40: 2068 6f6d 6573 6572 7665 725f 7368 6f72   homeserver_shor
+0003bf50: 740a 2020 2020 2020 2020 726f 6f6d 5f69  t.        room_i
+0003bf60: 6420 3d20 696e 7075 7428 0a20 2020 2020  d = input(.     
+0003bf70: 2020 2020 2020 2066 2245 6e74 6572 2072         f"Enter r
+0003bf80: 6f6f 6d20 4944 2066 6f72 2064 6566 6175  oom ID for defau
+0003bf90: 6c74 2072 6f6f 6d3a 2020 5b7b 726f 6f6d  lt room:  [{room
+0003bfa0: 5f69 647d 5d20 2022 0a20 2020 2020 2020  _id}]  ".       
+0003bfb0: 2020 2020 2066 226f 7220 205b 616c 6961       f"or  [alia
+0003bfc0: 735d 2066 6f72 207b 726f 6f6d 5f69 6432  s] for {room_id2
+0003bfd0: 7d20 3a20 220a 2020 2020 2020 2020 292e  } : ".        ).
+0003bfe0: 7374 7269 7028 290a 2020 2020 6966 2075  strip().    if u
+0003bff0: 7365 725f 6964 2069 7320 6e6f 7420 4e6f  ser_id is not No
+0003c000: 6e65 3a0a 2020 2020 2020 2020 6966 2069  ne:.        if i
+0003c010: 735f 7061 7274 6961 6c5f 7573 6572 5f69  s_partial_user_i
+0003c020: 6428 7573 6572 5f69 6429 3a0a 2020 2020  d(user_id):.    
+0003c030: 2020 2020 2020 2020 7573 6572 5f69 6420          user_id 
+0003c040: 3d20 7573 6572 5f69 6420 2b20 223a 2220  = user_id + ":" 
+0003c050: 2b20 686f 6d65 7365 7276 6572 5f73 686f  + homeserver_sho
+0003c060: 7274 2020 2320 646f 6e74 2075 7365 2066  rt  # dont use f
+0003c070: 6e0a 2020 2020 2020 2020 6966 2069 735f  n.        if is_
+0003c080: 7368 6f72 745f 7573 6572 5f69 6428 7573  short_user_id(us
+0003c090: 6572 5f69 6429 3a0a 2020 2020 2020 2020  er_id):.        
+0003c0a0: 2020 2020 7573 6572 5f69 6420 3d20 2240      user_id = "@
+0003c0b0: 2220 2b20 7573 6572 5f69 6420 2b20 223a  " + user_id + ":
+0003c0c0: 2220 2b20 686f 6d65 7365 7276 6572 5f73  " + homeserver_s
+0003c0d0: 686f 7274 2020 2320 646f 6e74 2075 7365  hort  # dont use
+0003c0e0: 2066 6e0a 2020 2020 2020 2020 6966 206e   fn.        if n
+0003c0f0: 6f74 2069 735f 7573 6572 5f69 6428 7573  ot is_user_id(us
+0003c100: 6572 5f69 6429 3a0a 2020 2020 2020 2020  er_id):.        
+0003c110: 2020 2020 7261 6973 6520 4d61 7472 6978      raise Matrix
+0003c120: 436f 6d6d 616e 6465 7245 7272 6f72 280a  CommanderError(.
+0003c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c140: 2245 3232 373a 2022 0a20 2020 2020 2020  "E227: ".       
+0003c150: 2020 2020 2020 2020 2066 2255 7365 7220           f"User 
+0003c160: 6964 2027 7b75 7365 725f 6964 7d27 2066  id '{user_id}' f
+0003c170: 6f72 202d 2d6c 6f67 696e 2069 7320 696e  or --login is in
+0003c180: 7661 6c69 642e 2022 0a20 2020 2020 2020  valid. ".       
+0003c190: 2020 2020 2020 2020 2022 5370 6563 6966           "Specif
+0003c1a0: 7920 636f 7272 6563 7420 7573 6572 2069  y correct user i
+0003c1b0: 642e 220a 2020 2020 2020 2020 2020 2020  d.".            
+0003c1c0: 2920 6672 6f6d 204e 6f6e 650a 2020 2020  ) from None.    
+0003c1d0: 6966 2069 735f 7368 6f72 745f 726f 6f6d  if is_short_room
+0003c1e0: 5f61 6c69 6173 2872 6f6f 6d5f 6964 293a  _alias(room_id):
+0003c1f0: 0a20 2020 2020 2020 2069 6620 726f 6f6d  .        if room
+0003c200: 5f69 645b 305d 2021 3d20 2223 223a 0a20  _id[0] != "#":. 
+0003c210: 2020 2020 2020 2020 2020 2072 6f6f 6d5f             room_
+0003c220: 6964 203d 2022 2322 202b 2072 6f6f 6d5f  id = "#" + room_
+0003c230: 6964 0a20 2020 2020 2020 2072 6f6f 6d5f  id.        room_
+0003c240: 6964 203d 2072 6f6f 6d5f 6964 202b 2022  id = room_id + "
+0003c250: 3a22 202b 2068 6f6d 6573 6572 7665 725f  :" + homeserver_
+0003c260: 7368 6f72 7420 2023 2064 6f6e 7420 7573  short  # dont us
+0003c270: 6520 666e 0a20 2020 2069 6620 6e6f 7420  e fn.    if not 
+0003c280: 6973 5f72 6f6f 6d28 726f 6f6d 5f69 6429  is_room(room_id)
+0003c290: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0003c2a0: 4d61 7472 6978 436f 6d6d 616e 6465 7245  MatrixCommanderE
+0003c2b0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+0003c2c0: 2020 2245 3232 383a 2022 0a20 2020 2020    "E228: ".     
+0003c2d0: 2020 2020 2020 2066 2252 6f6f 6d20 6964         f"Room id
+0003c2e0: 2027 7b72 6f6f 6d5f 6964 7d27 2066 6f72   '{room_id}' for
+0003c2f0: 202d 2d6c 6f67 696e 2069 7320 696e 7661   --login is inva
+0003c300: 6c69 642e 2022 0a20 2020 2020 2020 2020  lid. ".         
+0003c310: 2020 2022 5370 6563 6966 7920 636f 7272     "Specify corr
+0003c320: 6563 7420 726f 6f6d 2069 642e 220a 2020  ect room id.".  
+0003c330: 2020 2020 2020 2920 6672 6f6d 204e 6f6e        ) from Non
+0003c340: 650a 0a20 2020 2067 732e 6c6f 672e 696e  e..    gs.log.in
+0003c350: 666f 2866 2254 6865 2070 726f 7669 6465  fo(f"The provide
+0003c360: 6420 6c6f 6769 6e20 6461 7461 2069 733a  d login data is:
+0003c370: 2068 6f6d 6573 6572 7665 723d 277b 686f   homeserver='{ho
+0003c380: 6d65 7365 7276 6572 7d27 2229 0a20 2020  meserver}'").   
+0003c390: 2067 732e 6c6f 672e 696e 666f 2866 2220   gs.log.info(f" 
 0003c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c3b0: 2020 2020 2020 2020 2020 7573 6572 2069            user i
-0003c3c0: 643d 277b 7573 6572 5f69 647d 2722 290a  d='{user_id}'").
-0003c3d0: 2020 2020 2320 6773 2e6c 6f67 2e69 6e66      # gs.log.inf
-0003c3e0: 6f28 6622 2020 2020 2020 2020 2020 2020  o(f"            
+0003c3b0: 2020 2020 2020 2020 2020 2075 7365 7220             user 
+0003c3c0: 6964 3d27 7b75 7365 725f 6964 7d27 2229  id='{user_id}'")
+0003c3d0: 0a20 2020 2023 2067 732e 6c6f 672e 696e  .    # gs.log.in
+0003c3e0: 666f 2866 2220 2020 2020 2020 2020 2020  fo(f"           
 0003c3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c400: 7061 7373 776f 7264 3d27 7b70 6173 7377  password='{passw
-0003c410: 6f72 647d 2722 290a 2020 2020 6773 2e6c  ord}'").    gs.l
-0003c420: 6f67 2e69 6e66 6f28 6622 2020 2020 2020  og.info(f"      
+0003c400: 2070 6173 7377 6f72 643d 277b 7061 7373   password='{pass
+0003c410: 776f 7264 7d27 2229 0a20 2020 2067 732e  word}'").    gs.
+0003c420: 6c6f 672e 696e 666f 2866 2220 2020 2020  log.info(f"     
 0003c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c440: 2020 2020 2020 6465 7669 6365 206e 616d        device nam
-0003c450: 653d 277b 6465 7669 6365 5f6e 616d 657d  e='{device_name}
-0003c460: 2722 290a 2020 2020 6773 2e6c 6f67 2e69  '").    gs.log.i
-0003c470: 6e66 6f28 6622 2020 2020 2020 2020 2020  nfo(f"          
+0003c440: 2020 2020 2020 2064 6576 6963 6520 6e61         device na
+0003c450: 6d65 3d27 7b64 6576 6963 655f 6e61 6d65  me='{device_name
+0003c460: 7d27 2229 0a20 2020 2067 732e 6c6f 672e  }'").    gs.log.
+0003c470: 696e 666f 2866 2220 2020 2020 2020 2020  info(f"         
 0003c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c490: 2020 726f 6f6d 2069 643d 277b 726f 6f6d    room id='{room
-0003c4a0: 5f69 647d 2722 290a 2020 2020 6966 2069  _id}'").    if i
-0003c4b0: 6e74 6572 6163 7469 7665 3a0a 2020 2020  nteractive:.    
-0003c4c0: 2020 2020 7072 696e 7428 6622 5468 6520      print(f"The 
-0003c4d0: 7072 6f76 6964 6564 206c 6f67 696e 2064  provided login d
-0003c4e0: 6174 6120 6973 3a20 686f 6d65 7365 7276  ata is: homeserv
-0003c4f0: 6572 3d27 7b68 6f6d 6573 6572 7665 727d  er='{homeserver}
-0003c500: 2722 290a 2020 2020 2020 2020 7072 696e  '").        prin
-0003c510: 7428 6622 2020 2020 2020 2020 2020 2020  t(f"            
+0003c490: 2020 2072 6f6f 6d20 6964 3d27 7b72 6f6f     room id='{roo
+0003c4a0: 6d5f 6964 7d27 2229 0a20 2020 2069 6620  m_id}'").    if 
+0003c4b0: 696e 7465 7261 6374 6976 653a 0a20 2020  interactive:.   
+0003c4c0: 2020 2020 2070 7269 6e74 2866 2254 6865       print(f"The
+0003c4d0: 2070 726f 7669 6465 6420 6c6f 6769 6e20   provided login 
+0003c4e0: 6461 7461 2069 733a 2068 6f6d 6573 6572  data is: homeser
+0003c4f0: 7665 723d 277b 686f 6d65 7365 7276 6572  ver='{homeserver
+0003c500: 7d27 2229 0a20 2020 2020 2020 2070 7269  }'").        pri
+0003c510: 6e74 2866 2220 2020 2020 2020 2020 2020  nt(f"           
 0003c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c530: 7573 6572 2069 643d 277b 7573 6572 5f69  user id='{user_i
-0003c540: 647d 2722 290a 2020 2020 2020 2020 2320  d}'").        # 
-0003c550: 7072 696e 7428 6622 2020 2020 2020 2020  print(f"        
+0003c530: 2075 7365 7220 6964 3d27 7b75 7365 725f   user id='{user_
+0003c540: 6964 7d27 2229 0a20 2020 2020 2020 2023  id}'").        #
+0003c550: 2070 7269 6e74 2866 2220 2020 2020 2020   print(f"       
 0003c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c570: 2020 2020 7061 7373 776f 7264 3d27 7b70      password='{p
-0003c580: 6173 7377 6f72 647d 2722 290a 2020 2020  assword}'").    
-0003c590: 2020 2020 7072 696e 7428 2220 2020 2020      print("     
+0003c570: 2020 2020 2070 6173 7377 6f72 643d 277b       password='{
+0003c580: 7061 7373 776f 7264 7d27 2229 0a20 2020  password}'").   
+0003c590: 2020 2020 2070 7269 6e74 2822 2020 2020       print("    
 0003c5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c5b0: 2020 2020 2020 2070 6173 7377 6f72 643d         password=
-0003c5c0: 272a 2a2a 2722 290a 2020 2020 2020 2020  '***'").        
-0003c5d0: 7072 696e 7428 6622 2020 2020 2020 2020  print(f"        
+0003c5b0: 2020 2020 2020 2020 7061 7373 776f 7264          password
+0003c5c0: 3d27 2a2a 2a27 2229 0a20 2020 2020 2020  ='***'").       
+0003c5d0: 2070 7269 6e74 2866 2220 2020 2020 2020   print(f"       
 0003c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c5f0: 2020 2020 6465 7669 6365 206e 616d 653d      device name=
-0003c600: 277b 6465 7669 6365 5f6e 616d 657d 2722  '{device_name}'"
-0003c610: 290a 2020 2020 2020 2020 7072 696e 7428  ).        print(
-0003c620: 0a20 2020 2020 2020 2020 2020 2066 2220  .            f" 
+0003c5f0: 2020 2020 2064 6576 6963 6520 6e61 6d65       device name
+0003c600: 3d27 7b64 6576 6963 655f 6e61 6d65 7d27  ='{device_name}'
+0003c610: 2229 0a20 2020 2020 2020 2070 7269 6e74  ").        print
+0003c620: 280a 2020 2020 2020 2020 2020 2020 6622  (.            f"
 0003c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c640: 2020 2020 2020 2020 2020 2072 6f6f 6d20             room 
-0003c650: 6964 3d27 7b72 6f6f 6d5f 6964 7d27 222c  id='{room_id}'",
-0003c660: 0a20 2020 2020 2020 2020 2020 2066 6c75  .            flu
-0003c670: 7368 3d54 7275 652c 0a20 2020 2020 2020  sh=True,.       
-0003c680: 2029 0a20 2020 2020 2020 2063 6f6e 6669   ).        confi
-0003c690: 726d 203d 2069 6e70 7574 2822 436f 7272  rm = input("Corr
-0003c6a0: 6563 743f 2028 5965 7320 6f72 2043 7472  ect? (Yes or Ctr
-0003c6b0: 6c2d 4320 746f 2061 626f 7274 2920 2229  l-C to abort) ")
-0003c6c0: 0a20 2020 2020 2020 2069 6620 636f 6e66  .        if conf
-0003c6d0: 6972 6d2e 6c6f 7765 7228 2920 213d 2022  irm.lower() != "
-0003c6e0: 7965 7322 2061 6e64 2063 6f6e 6669 726d  yes" and confirm
-0003c6f0: 2e6c 6f77 6572 2829 2021 3d20 2279 223a  .lower() != "y":
-0003c700: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-0003c710: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-0003c720: 2020 2020 2222 2c0a 2020 2020 2020 2020      "",.        
-0003c730: 2020 2020 2020 2020 666c 7573 683d 5472          flush=Tr
-0003c740: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-0003c750: 2920 2023 2061 6464 206e 6577 6c69 6e65  )  # add newline
-0003c760: 2074 6f20 7374 646f 7574 2074 6f20 7365   to stdout to se
-0003c770: 7061 7261 7465 2061 6e79 206c 6f67 2069  parate any log i
-0003c780: 6e66 6f0a 2020 2020 2020 2020 2020 2020  nfo.            
-0003c790: 6773 2e6c 6f67 2e69 6e66 6f28 2241 626f  gs.log.info("Abo
-0003c7a0: 7274 696e 6720 6475 6520 746f 2075 7365  rting due to use
-0003c7b0: 7220 7265 7175 6573 742e 2229 0a20 2020  r request.").   
-0003c7c0: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-0003c7d0: 0a20 2020 2023 2061 6c6c 2074 6865 2069  .    # all the i
-0003c7e0: 6e70 7574 2072 6571 7569 7265 6420 666f  nput required fo
-0003c7f0: 7220 6c6f 6769 6e20 6973 2063 6f6c 6c65  r login is colle
-0003c800: 6374 6564 2c0a 2020 2020 2320 6c61 7465  cted,.    # late
-0003c810: 7220 7765 2067 6574 2075 7365 725f 6964  r we get user_id
-0003c820: 2066 6f72 2053 534f 2028 7265 7475 726e   for SSO (return
-0003c830: 6564 2061 7420 6c6f 6769 6e20 4150 4920  ed at login API 
-0003c840: 6361 6c6c 290a 0a20 2020 2069 6620 6773  call)..    if gs
-0003c850: 2e70 612e 7072 6f78 793a 0a20 2020 2020  .pa.proxy:.     
-0003c860: 2020 2067 732e 6c6f 672e 696e 666f 2866     gs.log.info(f
-0003c870: 2250 726f 7879 207b 6773 2e70 612e 7072  "Proxy {gs.pa.pr
-0003c880: 6f78 797d 2077 696c 6c20 6265 2075 7365  oxy} will be use
-0003c890: 642e 2229 0a0a 2020 2020 2320 6368 6563  d.")..    # chec
-0003c8a0: 6b20 666f 7220 7061 7373 776f 7264 2f53  k for password/S
-0003c8b0: 534f 0a20 2020 2063 6f6e 6e65 6374 6f72  SO.    connector
-0003c8c0: 203d 2054 4350 436f 6e6e 6563 746f 7228   = TCPConnector(
-0003c8d0: 7373 6c3d 6773 2e73 736c 2920 2023 2073  ssl=gs.ssl)  # s
-0003c8e0: 6574 7469 6e67 2073 736c 636f 6e74 6578  etting sslcontex
-0003c8f0: 740a 2020 2020 6173 796e 6320 7769 7468  t.    async with
-0003c900: 2043 6c69 656e 7453 6573 7369 6f6e 2863   ClientSession(c
-0003c910: 6f6e 6e65 6374 6f72 3d63 6f6e 6e65 6374  onnector=connect
-0003c920: 6f72 2920 6173 2073 6573 7369 6f6e 3a20  or) as session: 
-0003c930: 2023 2061 696f 6874 7470 0a20 2020 2020   # aiohttp.     
-0003c940: 2020 2061 7379 6e63 2077 6974 6820 7365     async with se
-0003c950: 7373 696f 6e2e 6765 7428 0a20 2020 2020  ssion.get(.     
-0003c960: 2020 2020 2020 2066 227b 686f 6d65 7365         f"{homese
-0003c970: 7276 6572 7d2f 5f6d 6174 7269 782f 636c  rver}/_matrix/cl
-0003c980: 6965 6e74 2f72 302f 6c6f 6769 6e22 2c0a  ient/r0/login",.
-0003c990: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0003c9a0: 655f 666f 725f 7374 6174 7573 3d54 7275  e_for_status=Tru
-0003c9b0: 652c 0a20 2020 2020 2020 2020 2020 2070  e,.            p
-0003c9c0: 726f 7879 3d67 732e 7061 2e70 726f 7879  roxy=gs.pa.proxy
-0003c9d0: 2c0a 2020 2020 2020 2020 2920 6173 2072  ,.        ) as r
-0003c9e0: 6573 706f 6e73 653a 0a20 2020 2020 2020  esponse:.       
-0003c9f0: 2020 2020 2066 6c6f 775f 7479 7065 7320       flow_types 
-0003ca00: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0003ca10: 2020 2020 785b 2274 7970 6522 5d20 666f      x["type"] fo
-0003ca20: 7220 7820 696e 2028 6177 6169 7420 7265  r x in (await re
-0003ca30: 7370 6f6e 7365 2e6a 736f 6e28 2929 2e67  sponse.json()).g
-0003ca40: 6574 2822 666c 6f77 7322 2c20 5b5d 290a  et("flows", []).
-0003ca50: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0003ca60: 2020 2020 2020 2020 2020 6773 2e6c 6f67            gs.log
-0003ca70: 2e64 6562 7567 2822 5375 7070 6f72 7465  .debug("Supporte
-0003ca80: 6420 6c6f 6769 6e20 666c 6f77 733a 2025  d login flows: %
-0003ca90: 7222 2c20 666c 6f77 5f74 7970 6573 290a  r", flow_types).
-0003caa0: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
-0003cab0: 6f6b 656e 5f61 7661 696c 6162 6c65 203d  oken_available =
-0003cac0: 2022 6d2e 6c6f 6769 6e2e 746f 6b65 6e22   "m.login.token"
-0003cad0: 2069 6e20 666c 6f77 5f74 7970 6573 0a20   in flow_types. 
-0003cae0: 2020 2020 2020 2020 2020 2023 206d 2e6c             # m.l
-0003caf0: 6f67 696e 2e74 6f6b 656e 2064 6f65 7320  ogin.token does 
-0003cb00: 6e6f 7420 7265 6665 7220 746f 2073 7464  not refer to std
-0003cb10: 2061 6363 6573 732d 746f 6b65 6e20 6c6f   access-token lo
-0003cb20: 6769 6e0a 2020 2020 2020 2020 2020 2020  gin.            
-0003cb30: 7061 7373 776f 7264 5f61 7661 696c 6162  password_availab
-0003cb40: 6c65 203d 2022 6d2e 6c6f 6769 6e2e 7061  le = "m.login.pa
-0003cb50: 7373 776f 7264 2220 696e 2066 6c6f 775f  ssword" in flow_
-0003cb60: 7479 7065 730a 2020 2020 2020 2020 2020  types.          
-0003cb70: 2020 7373 6f5f 6176 6169 6c61 626c 6520    sso_available 
-0003cb80: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-0003cb90: 2020 2020 226d 2e6c 6f67 696e 2e73 736f      "m.login.sso
-0003cba0: 2220 696e 2066 6c6f 775f 7479 7065 7320  " in flow_types 
-0003cbb0: 616e 6420 226d 2e6c 6f67 696e 2e74 6f6b  and "m.login.tok
-0003cbc0: 656e 2220 696e 2066 6c6f 775f 7479 7065  en" in flow_type
-0003cbd0: 730a 2020 2020 2020 2020 2020 2020 290a  s.            ).
-0003cbe0: 0a20 2020 2069 6620 6d65 7468 6f64 203d  .    if method =
-0003cbf0: 3d20 2273 736f 2220 616e 6420 6e6f 7420  = "sso" and not 
-0003cc00: 7373 6f5f 6176 6169 6c61 626c 653a 0a20  sso_available:. 
-0003cc10: 2020 2020 2020 2072 6169 7365 204d 6174         raise Mat
-0003cc20: 7269 7843 6f6d 6d61 6e64 6572 4572 726f  rixCommanderErro
-0003cc30: 7228 0a20 2020 2020 2020 2020 2020 2022  r(.            "
-0003cc40: 4532 3239 3a20 220a 2020 2020 2020 2020  E229: ".        
-0003cc50: 2020 2020 224d 6574 686f 6420 2773 736f      "Method 'sso
-0003cc60: 2720 7761 7320 7365 6c65 6374 6564 2066  ' was selected f
-0003cc70: 6f72 202d 2d6c 6f67 696e 2062 7574 204d  or --login but M
-0003cc80: 6174 7269 7820 7365 7276 6572 2064 6f65  atrix server doe
-0003cc90: 7320 220a 2020 2020 2020 2020 2020 2020  s ".            
-0003cca0: 226e 6f74 2073 7570 706f 7274 2053 696e  "not support Sin
-0003ccb0: 676c 6520 5369 676e 2d4f 6e2e 2054 7279  gle Sign-On. Try
-0003ccc0: 202d 2d6c 6f67 696e 2077 6974 6820 6d65   --login with me
-0003ccd0: 7468 6f64 2027 7061 7373 776f 7264 272e  thod 'password'.
-0003cce0: 220a 2020 2020 2020 2020 2920 6672 6f6d  ".        ) from
-0003ccf0: 204e 6f6e 650a 2020 2020 6966 206d 6574   None.    if met
-0003cd00: 686f 6420 3d3d 2022 7061 7373 776f 7264  hod == "password
-0003cd10: 2220 616e 6420 6e6f 7420 7061 7373 776f  " and not passwo
-0003cd20: 7264 5f61 7661 696c 6162 6c65 3a0a 2020  rd_available:.  
-0003cd30: 2020 2020 2020 7261 6973 6520 4d61 7472        raise Matr
-0003cd40: 6978 436f 6d6d 616e 6465 7245 7272 6f72  ixCommanderError
-0003cd50: 280a 2020 2020 2020 2020 2020 2020 2245  (.            "E
-0003cd60: 3233 303a 2022 0a20 2020 2020 2020 2020  230: ".         
-0003cd70: 2020 2022 4d65 7468 6f64 2027 7061 7373     "Method 'pass
-0003cd80: 776f 7264 2720 7761 7320 7365 6c65 6374  word' was select
-0003cd90: 6564 2066 6f72 202d 2d6c 6f67 696e 2062  ed for --login b
-0003cda0: 7574 204d 6174 7269 7820 7365 7276 6572  ut Matrix server
-0003cdb0: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
-0003cdc0: 646f 6573 206e 6f74 2073 7570 706f 7274  does not support
-0003cdd0: 2070 6173 7377 6f72 6420 6c6f 6769 6e2e   password login.
-0003cde0: 2054 7279 202d 2d6c 6f67 696e 2077 6974   Try --login wit
-0003cdf0: 6820 6d65 7468 6f64 2027 7373 6f27 2e22  h method 'sso'."
-0003ce00: 0a20 2020 2020 2020 2029 2066 726f 6d20  .        ) from 
-0003ce10: 4e6f 6e65 0a0a 2020 2020 2320 5353 4f3a  None..    # SSO:
-0003ce20: 2053 696e 676c 6520 5369 676e 2d4f 6e3a   Single Sign-On:
-0003ce30: 0a20 2020 2023 2073 6565 2068 7474 7073  .    # see https
-0003ce40: 3a2f 2f6d 6174 7269 782e 6f72 672f 646f  ://matrix.org/do
-0003ce50: 6373 2f67 7569 6465 732f 7373 6f2d 666f  cs/guides/sso-fo
-0003ce60: 722d 636c 6965 6e74 2d64 6576 656c 6f70  r-client-develop
-0003ce70: 6572 730a 2020 2020 6966 2073 736f 5f61  ers.    if sso_a
-0003ce80: 7661 696c 6162 6c65 3a0a 2020 2020 2020  vailable:.      
-0003ce90: 2020 6773 2e6c 6f67 2e64 6562 7567 2822    gs.log.debug("
-0003cea0: 5365 7276 6572 2073 7570 706f 7274 7320  Server supports 
-0003ceb0: 5353 4f20 666f 7220 6c6f 6769 6e2e 2229  SSO for login.")
-0003cec0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0003ced0: 2020 2067 732e 6c6f 672e 6465 6275 6728     gs.log.debug(
-0003cee0: 2253 6572 7665 7220 646f 6573 206e 6f74  "Server does not
-0003cef0: 2073 7570 706f 7274 2053 534f 2066 6f72   support SSO for
-0003cf00: 206c 6f67 696e 2e22 290a 0a20 2020 2069   login.")..    i
-0003cf10: 6620 6d65 7468 6f64 203d 3d20 2273 736f  f method == "sso
-0003cf20: 223a 0a20 2020 2020 2020 2023 2073 7461  ":.        # sta
-0003cf30: 7274 7570 2073 6572 7665 7220 746f 2068  rtup server to h
-0003cf40: 616e 646c 6520 7265 7370 6f6e 7365 0a20  andle response. 
-0003cf50: 2020 2020 2020 2073 746f 705f 7365 7276         stop_serv
-0003cf60: 6572 5f65 7674 203d 2061 7379 6e63 696f  er_evt = asyncio
-0003cf70: 2e45 7665 6e74 2829 0a20 2020 2020 2020  .Event().       
-0003cf80: 206c 6f67 696e 5f74 6f6b 656e 203d 204e   login_token = N
-0003cf90: 6f6e 650a 0a20 2020 2020 2020 2061 7379  one..        asy
-0003cfa0: 6e63 2064 6566 2068 616e 646c 6528 7265  nc def handle(re
-0003cfb0: 7175 6573 7429 3a0a 2020 2020 2020 2020  quest):.        
-0003cfc0: 2020 2020 6e6f 6e6c 6f63 616c 206c 6f67      nonlocal log
-0003cfd0: 696e 5f74 6f6b 656e 0a20 2020 2020 2020  in_token.       
-0003cfe0: 2020 2020 206c 6f67 696e 5f74 6f6b 656e       login_token
-0003cff0: 203d 2072 6571 7565 7374 2e71 7565 7279   = request.query
-0003d000: 2e67 6574 2822 6c6f 6769 6e54 6f6b 656e  .get("loginToken
-0003d010: 2229 0a20 2020 2020 2020 2020 2020 2073  ").            s
-0003d020: 746f 705f 7365 7276 6572 5f65 7674 2e73  top_server_evt.s
-0003d030: 6574 2829 0a20 2020 2020 2020 2020 2020  et().           
-0003d040: 2072 6574 7572 6e20 7765 622e 5265 7370   return web.Resp
-0003d050: 6f6e 7365 280a 2020 2020 2020 2020 2020  onse(.          
-0003d060: 2020 2020 2020 626f 6479 3d22 4c6f 6769        body="Logi
-0003d070: 6e20 636f 6d70 6c65 7465 2e20 596f 7520  n complete. You 
-0003d080: 6361 6e20 6e6f 7720 636c 6f73 6520 7468  can now close th
-0003d090: 6973 2070 6167 652e 220a 2020 2020 2020  is page.".      
-0003d0a0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0003d0b0: 2061 7070 203d 2077 6562 2e41 7070 6c69   app = web.Appli
-0003d0c0: 6361 7469 6f6e 2829 0a20 2020 2020 2020  cation().       
-0003d0d0: 2061 7070 2e61 6464 5f72 6f75 7465 7328   app.add_routes(
-0003d0e0: 5b77 6562 2e67 6574 2822 2f22 2c20 6861  [web.get("/", ha
-0003d0f0: 6e64 6c65 295d 290a 0a20 2020 2020 2020  ndle)])..       
-0003d100: 206c 6f67 6769 6e67 2e67 6574 4c6f 6767   logging.getLogg
-0003d110: 6572 2822 6169 6f68 7474 702e 6163 6365  er("aiohttp.acce
-0003d120: 7373 2229 2e73 6574 4c65 7665 6c28 6c6f  ss").setLevel(lo
-0003d130: 6767 696e 672e 5741 524e 494e 4729 0a20  gging.WARNING). 
-0003d140: 2020 2020 2020 2072 756e 6e65 7220 3d20         runner = 
-0003d150: 7765 622e 4170 7052 756e 6e65 7228 6170  web.AppRunner(ap
-0003d160: 7029 0a20 2020 2020 2020 2061 7761 6974  p).        await
-0003d170: 2072 756e 6e65 722e 7365 7475 7028 290a   runner.setup().
-0003d180: 2020 2020 2020 2020 7369 7465 203d 2077          site = w
-0003d190: 6562 2e54 4350 5369 7465 2872 756e 6e65  eb.TCPSite(runne
-0003d1a0: 722c 2022 6c6f 6361 6c68 6f73 7422 2c20  r, "localhost", 
-0003d1b0: 3338 3038 3029 0a20 2020 2020 2020 2061  38080).        a
-0003d1c0: 7761 6974 2073 6974 652e 7374 6172 7428  wait site.start(
-0003d1d0: 290a 0a20 2020 2020 2020 2074 7279 3a0a  )..        try:.
-0003d1e0: 2020 2020 2020 2020 2020 2020 6773 2e6c              gs.l
-0003d1f0: 6f67 2e69 6e66 6f28 224c 6175 6e63 6869  og.info("Launchi
-0003d200: 6e67 2062 726f 7773 6572 2074 6f20 636f  ng browser to co
-0003d210: 6d70 6c65 7465 2053 534f 206c 6f67 696e  mplete SSO login
-0003d220: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
-0003d230: 6966 2067 732e 7061 2e70 726f 7879 3a0a  if gs.pa.proxy:.
-0003d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d250: 6773 2e6c 6f67 2e77 6172 6e69 6e67 280a  gs.log.warning(.
-0003d260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d270: 2020 2020 2257 3131 303a 2022 0a20 2020      "W110: ".   
+0003c640: 2020 2020 2020 2020 2020 2020 726f 6f6d              room
+0003c650: 2069 643d 277b 726f 6f6d 5f69 647d 2722   id='{room_id}'"
+0003c660: 2c0a 2020 2020 2020 2020 2020 2020 666c  ,.            fl
+0003c670: 7573 683d 5472 7565 2c0a 2020 2020 2020  ush=True,.      
+0003c680: 2020 290a 2020 2020 2020 2020 636f 6e66    ).        conf
+0003c690: 6972 6d20 3d20 696e 7075 7428 2243 6f72  irm = input("Cor
+0003c6a0: 7265 6374 3f20 2859 6573 206f 7220 4374  rect? (Yes or Ct
+0003c6b0: 726c 2d43 2074 6f20 6162 6f72 7429 2022  rl-C to abort) "
+0003c6c0: 290a 2020 2020 2020 2020 6966 2063 6f6e  ).        if con
+0003c6d0: 6669 726d 2e6c 6f77 6572 2829 2021 3d20  firm.lower() != 
+0003c6e0: 2279 6573 2220 616e 6420 636f 6e66 6972  "yes" and confir
+0003c6f0: 6d2e 6c6f 7765 7228 2920 213d 2022 7922  m.lower() != "y"
+0003c700: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+0003c710: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
+0003c720: 2020 2020 2022 222c 0a20 2020 2020 2020       "",.       
+0003c730: 2020 2020 2020 2020 2066 6c75 7368 3d54           flush=T
+0003c740: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+0003c750: 2029 2020 2320 6164 6420 6e65 776c 696e   )  # add newlin
+0003c760: 6520 746f 2073 7464 6f75 7420 746f 2073  e to stdout to s
+0003c770: 6570 6172 6174 6520 616e 7920 6c6f 6720  eparate any log 
+0003c780: 696e 666f 0a20 2020 2020 2020 2020 2020  info.           
+0003c790: 2067 732e 6c6f 672e 696e 666f 2822 4162   gs.log.info("Ab
+0003c7a0: 6f72 7469 6e67 2064 7565 2074 6f20 7573  orting due to us
+0003c7b0: 6572 2072 6571 7565 7374 2e22 290a 2020  er request.").  
+0003c7c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003c7d0: 0a0a 2020 2020 2320 616c 6c20 7468 6520  ..    # all the 
+0003c7e0: 696e 7075 7420 7265 7175 6972 6564 2066  input required f
+0003c7f0: 6f72 206c 6f67 696e 2069 7320 636f 6c6c  or login is coll
+0003c800: 6563 7465 642c 0a20 2020 2023 206c 6174  ected,.    # lat
+0003c810: 6572 2077 6520 6765 7420 7573 6572 5f69  er we get user_i
+0003c820: 6420 666f 7220 5353 4f20 2872 6574 7572  d for SSO (retur
+0003c830: 6e65 6420 6174 206c 6f67 696e 2041 5049  ned at login API
+0003c840: 2063 616c 6c29 0a0a 2020 2020 6966 2067   call)..    if g
+0003c850: 732e 7061 2e70 726f 7879 3a0a 2020 2020  s.pa.proxy:.    
+0003c860: 2020 2020 6773 2e6c 6f67 2e69 6e66 6f28      gs.log.info(
+0003c870: 6622 5072 6f78 7920 7b67 732e 7061 2e70  f"Proxy {gs.pa.p
+0003c880: 726f 7879 7d20 7769 6c6c 2062 6520 7573  roxy} will be us
+0003c890: 6564 2e22 290a 0a20 2020 2023 2063 6865  ed.")..    # che
+0003c8a0: 636b 2066 6f72 2070 6173 7377 6f72 642f  ck for password/
+0003c8b0: 5353 4f0a 2020 2020 636f 6e6e 6563 746f  SSO.    connecto
+0003c8c0: 7220 3d20 5443 5043 6f6e 6e65 6374 6f72  r = TCPConnector
+0003c8d0: 2873 736c 3d67 732e 7373 6c29 2020 2320  (ssl=gs.ssl)  # 
+0003c8e0: 7365 7474 696e 6720 7373 6c63 6f6e 7465  setting sslconte
+0003c8f0: 7874 0a20 2020 2061 7379 6e63 2077 6974  xt.    async wit
+0003c900: 6820 436c 6965 6e74 5365 7373 696f 6e28  h ClientSession(
+0003c910: 636f 6e6e 6563 746f 723d 636f 6e6e 6563  connector=connec
+0003c920: 746f 7229 2061 7320 7365 7373 696f 6e3a  tor) as session:
+0003c930: 2020 2320 6169 6f68 7474 700a 2020 2020    # aiohttp.    
+0003c940: 2020 2020 6173 796e 6320 7769 7468 2073      async with s
+0003c950: 6573 7369 6f6e 2e67 6574 280a 2020 2020  ession.get(.    
+0003c960: 2020 2020 2020 2020 6622 7b68 6f6d 6573          f"{homes
+0003c970: 6572 7665 727d 2f5f 6d61 7472 6978 2f63  erver}/_matrix/c
+0003c980: 6c69 656e 742f 7230 2f6c 6f67 696e 222c  lient/r0/login",
+0003c990: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0003c9a0: 7365 5f66 6f72 5f73 7461 7475 733d 5472  se_for_status=Tr
+0003c9b0: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+0003c9c0: 7072 6f78 793d 6773 2e70 612e 7072 6f78  proxy=gs.pa.prox
+0003c9d0: 792c 0a20 2020 2020 2020 2029 2061 7320  y,.        ) as 
+0003c9e0: 7265 7370 6f6e 7365 3a0a 2020 2020 2020  response:.      
+0003c9f0: 2020 2020 2020 666c 6f77 5f74 7970 6573        flow_types
+0003ca00: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0003ca10: 2020 2020 2078 5b22 7479 7065 225d 2066       x["type"] f
+0003ca20: 6f72 2078 2069 6e20 2861 7761 6974 2072  or x in (await r
+0003ca30: 6573 706f 6e73 652e 6a73 6f6e 2829 292e  esponse.json()).
+0003ca40: 6765 7428 2266 6c6f 7773 222c 205b 5d29  get("flows", [])
+0003ca50: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+0003ca60: 2020 2020 2020 2020 2020 2067 732e 6c6f             gs.lo
+0003ca70: 672e 6465 6275 6728 2253 7570 706f 7274  g.debug("Support
+0003ca80: 6564 206c 6f67 696e 2066 6c6f 7773 3a20  ed login flows: 
+0003ca90: 2572 222c 2066 6c6f 775f 7479 7065 7329  %r", flow_types)
+0003caa0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0003cab0: 746f 6b65 6e5f 6176 6169 6c61 626c 6520  token_available 
+0003cac0: 3d20 226d 2e6c 6f67 696e 2e74 6f6b 656e  = "m.login.token
+0003cad0: 2220 696e 2066 6c6f 775f 7479 7065 730a  " in flow_types.
+0003cae0: 2020 2020 2020 2020 2020 2020 2320 6d2e              # m.
+0003caf0: 6c6f 6769 6e2e 746f 6b65 6e20 646f 6573  login.token does
+0003cb00: 206e 6f74 2072 6566 6572 2074 6f20 7374   not refer to st
+0003cb10: 6420 6163 6365 7373 2d74 6f6b 656e 206c  d access-token l
+0003cb20: 6f67 696e 0a20 2020 2020 2020 2020 2020  ogin.           
+0003cb30: 2070 6173 7377 6f72 645f 6176 6169 6c61   password_availa
+0003cb40: 626c 6520 3d20 226d 2e6c 6f67 696e 2e70  ble = "m.login.p
+0003cb50: 6173 7377 6f72 6422 2069 6e20 666c 6f77  assword" in flow
+0003cb60: 5f74 7970 6573 0a20 2020 2020 2020 2020  _types.         
+0003cb70: 2020 2073 736f 5f61 7661 696c 6162 6c65     sso_available
+0003cb80: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+0003cb90: 2020 2020 2022 6d2e 6c6f 6769 6e2e 7373       "m.login.ss
+0003cba0: 6f22 2069 6e20 666c 6f77 5f74 7970 6573  o" in flow_types
+0003cbb0: 2061 6e64 2022 6d2e 6c6f 6769 6e2e 746f   and "m.login.to
+0003cbc0: 6b65 6e22 2069 6e20 666c 6f77 5f74 7970  ken" in flow_typ
+0003cbd0: 6573 0a20 2020 2020 2020 2020 2020 2029  es.            )
+0003cbe0: 0a0a 2020 2020 6966 206d 6574 686f 6420  ..    if method 
+0003cbf0: 3d3d 2022 7373 6f22 2061 6e64 206e 6f74  == "sso" and not
+0003cc00: 2073 736f 5f61 7661 696c 6162 6c65 3a0a   sso_available:.
+0003cc10: 2020 2020 2020 2020 7261 6973 6520 4d61          raise Ma
+0003cc20: 7472 6978 436f 6d6d 616e 6465 7245 7272  trixCommanderErr
+0003cc30: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+0003cc40: 2245 3232 393a 2022 0a20 2020 2020 2020  "E229: ".       
+0003cc50: 2020 2020 2022 4d65 7468 6f64 2027 7373       "Method 'ss
+0003cc60: 6f27 2077 6173 2073 656c 6563 7465 6420  o' was selected 
+0003cc70: 666f 7220 2d2d 6c6f 6769 6e20 6275 7420  for --login but 
+0003cc80: 4d61 7472 6978 2073 6572 7665 7220 646f  Matrix server do
+0003cc90: 6573 2022 0a20 2020 2020 2020 2020 2020  es ".           
+0003cca0: 2022 6e6f 7420 7375 7070 6f72 7420 5369   "not support Si
+0003ccb0: 6e67 6c65 2053 6967 6e2d 4f6e 2e20 5472  ngle Sign-On. Tr
+0003ccc0: 7920 2d2d 6c6f 6769 6e20 7769 7468 206d  y --login with m
+0003ccd0: 6574 686f 6420 2770 6173 7377 6f72 6427  ethod 'password'
+0003cce0: 2e22 0a20 2020 2020 2020 2029 2066 726f  .".        ) fro
+0003ccf0: 6d20 4e6f 6e65 0a20 2020 2069 6620 6d65  m None.    if me
+0003cd00: 7468 6f64 203d 3d20 2270 6173 7377 6f72  thod == "passwor
+0003cd10: 6422 2061 6e64 206e 6f74 2070 6173 7377  d" and not passw
+0003cd20: 6f72 645f 6176 6169 6c61 626c 653a 0a20  ord_available:. 
+0003cd30: 2020 2020 2020 2072 6169 7365 204d 6174         raise Mat
+0003cd40: 7269 7843 6f6d 6d61 6e64 6572 4572 726f  rixCommanderErro
+0003cd50: 7228 0a20 2020 2020 2020 2020 2020 2022  r(.            "
+0003cd60: 4532 3330 3a20 220a 2020 2020 2020 2020  E230: ".        
+0003cd70: 2020 2020 224d 6574 686f 6420 2770 6173      "Method 'pas
+0003cd80: 7377 6f72 6427 2077 6173 2073 656c 6563  sword' was selec
+0003cd90: 7465 6420 666f 7220 2d2d 6c6f 6769 6e20  ted for --login 
+0003cda0: 6275 7420 4d61 7472 6978 2073 6572 7665  but Matrix serve
+0003cdb0: 7220 220a 2020 2020 2020 2020 2020 2020  r ".            
+0003cdc0: 2264 6f65 7320 6e6f 7420 7375 7070 6f72  "does not suppor
+0003cdd0: 7420 7061 7373 776f 7264 206c 6f67 696e  t password login
+0003cde0: 2e20 5472 7920 2d2d 6c6f 6769 6e20 7769  . Try --login wi
+0003cdf0: 7468 206d 6574 686f 6420 2773 736f 272e  th method 'sso'.
+0003ce00: 220a 2020 2020 2020 2020 2920 6672 6f6d  ".        ) from
+0003ce10: 204e 6f6e 650a 0a20 2020 2023 2053 534f   None..    # SSO
+0003ce20: 3a20 5369 6e67 6c65 2053 6967 6e2d 4f6e  : Single Sign-On
+0003ce30: 3a0a 2020 2020 2320 7365 6520 6874 7470  :.    # see http
+0003ce40: 733a 2f2f 6d61 7472 6978 2e6f 7267 2f64  s://matrix.org/d
+0003ce50: 6f63 732f 6775 6964 6573 2f73 736f 2d66  ocs/guides/sso-f
+0003ce60: 6f72 2d63 6c69 656e 742d 6465 7665 6c6f  or-client-develo
+0003ce70: 7065 7273 0a20 2020 2069 6620 7373 6f5f  pers.    if sso_
+0003ce80: 6176 6169 6c61 626c 653a 0a20 2020 2020  available:.     
+0003ce90: 2020 2067 732e 6c6f 672e 6465 6275 6728     gs.log.debug(
+0003cea0: 2253 6572 7665 7220 7375 7070 6f72 7473  "Server supports
+0003ceb0: 2053 534f 2066 6f72 206c 6f67 696e 2e22   SSO for login."
+0003cec0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+0003ced0: 2020 2020 6773 2e6c 6f67 2e64 6562 7567      gs.log.debug
+0003cee0: 2822 5365 7276 6572 2064 6f65 7320 6e6f  ("Server does no
+0003cef0: 7420 7375 7070 6f72 7420 5353 4f20 666f  t support SSO fo
+0003cf00: 7220 6c6f 6769 6e2e 2229 0a0a 2020 2020  r login.")..    
+0003cf10: 6966 206d 6574 686f 6420 3d3d 2022 7373  if method == "ss
+0003cf20: 6f22 3a0a 2020 2020 2020 2020 2320 7374  o":.        # st
+0003cf30: 6172 7475 7020 7365 7276 6572 2074 6f20  artup server to 
+0003cf40: 6861 6e64 6c65 2072 6573 706f 6e73 650a  handle response.
+0003cf50: 2020 2020 2020 2020 7374 6f70 5f73 6572          stop_ser
+0003cf60: 7665 725f 6576 7420 3d20 6173 796e 6369  ver_evt = asynci
+0003cf70: 6f2e 4576 656e 7428 290a 2020 2020 2020  o.Event().      
+0003cf80: 2020 6c6f 6769 6e5f 746f 6b65 6e20 3d20    login_token = 
+0003cf90: 4e6f 6e65 0a0a 2020 2020 2020 2020 6173  None..        as
+0003cfa0: 796e 6320 6465 6620 6861 6e64 6c65 2872  ync def handle(r
+0003cfb0: 6571 7565 7374 293a 0a20 2020 2020 2020  equest):.       
+0003cfc0: 2020 2020 206e 6f6e 6c6f 6361 6c20 6c6f       nonlocal lo
+0003cfd0: 6769 6e5f 746f 6b65 6e0a 2020 2020 2020  gin_token.      
+0003cfe0: 2020 2020 2020 6c6f 6769 6e5f 746f 6b65        login_toke
+0003cff0: 6e20 3d20 7265 7175 6573 742e 7175 6572  n = request.quer
+0003d000: 792e 6765 7428 226c 6f67 696e 546f 6b65  y.get("loginToke
+0003d010: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+0003d020: 7374 6f70 5f73 6572 7665 725f 6576 742e  stop_server_evt.
+0003d030: 7365 7428 290a 2020 2020 2020 2020 2020  set().          
+0003d040: 2020 7265 7475 726e 2077 6562 2e52 6573    return web.Res
+0003d050: 706f 6e73 6528 0a20 2020 2020 2020 2020  ponse(.         
+0003d060: 2020 2020 2020 2062 6f64 793d 224c 6f67         body="Log
+0003d070: 696e 2063 6f6d 706c 6574 652e 2059 6f75  in complete. You
+0003d080: 2063 616e 206e 6f77 2063 6c6f 7365 2074   can now close t
+0003d090: 6869 7320 7061 6765 2e22 0a20 2020 2020  his page.".     
+0003d0a0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+0003d0b0: 2020 6170 7020 3d20 7765 622e 4170 706c    app = web.Appl
+0003d0c0: 6963 6174 696f 6e28 290a 2020 2020 2020  ication().      
+0003d0d0: 2020 6170 702e 6164 645f 726f 7574 6573    app.add_routes
+0003d0e0: 285b 7765 622e 6765 7428 222f 222c 2068  ([web.get("/", h
+0003d0f0: 616e 646c 6529 5d29 0a0a 2020 2020 2020  andle)])..      
+0003d100: 2020 6c6f 6767 696e 672e 6765 744c 6f67    logging.getLog
+0003d110: 6765 7228 2261 696f 6874 7470 2e61 6363  ger("aiohttp.acc
+0003d120: 6573 7322 292e 7365 744c 6576 656c 286c  ess").setLevel(l
+0003d130: 6f67 6769 6e67 2e57 4152 4e49 4e47 290a  ogging.WARNING).
+0003d140: 2020 2020 2020 2020 7275 6e6e 6572 203d          runner =
+0003d150: 2077 6562 2e41 7070 5275 6e6e 6572 2861   web.AppRunner(a
+0003d160: 7070 290a 2020 2020 2020 2020 6177 6169  pp).        awai
+0003d170: 7420 7275 6e6e 6572 2e73 6574 7570 2829  t runner.setup()
+0003d180: 0a20 2020 2020 2020 2073 6974 6520 3d20  .        site = 
+0003d190: 7765 622e 5443 5053 6974 6528 7275 6e6e  web.TCPSite(runn
+0003d1a0: 6572 2c20 226c 6f63 616c 686f 7374 222c  er, "localhost",
+0003d1b0: 2033 3830 3830 290a 2020 2020 2020 2020   38080).        
+0003d1c0: 6177 6169 7420 7369 7465 2e73 7461 7274  await site.start
+0003d1d0: 2829 0a0a 2020 2020 2020 2020 7472 793a  ()..        try:
+0003d1e0: 0a20 2020 2020 2020 2020 2020 2067 732e  .            gs.
+0003d1f0: 6c6f 672e 696e 666f 2822 4c61 756e 6368  log.info("Launch
+0003d200: 696e 6720 6272 6f77 7365 7220 746f 2063  ing browser to c
+0003d210: 6f6d 706c 6574 6520 5353 4f20 6c6f 6769  omplete SSO logi
+0003d220: 6e2e 2229 0a20 2020 2020 2020 2020 2020  n.").           
+0003d230: 2069 6620 6773 2e70 612e 7072 6f78 793a   if gs.pa.proxy:
+0003d240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d250: 2067 732e 6c6f 672e 7761 726e 696e 6728   gs.log.warning(
+0003d260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d270: 2020 2020 2022 5731 3130 3a20 220a 2020       "W110: ".  
 0003d280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d290: 2066 2253 7065 6369 6669 6564 2070 726f   f"Specified pro
-0003d2a0: 7879 207b 6773 2e70 612e 7072 6f78 797d  xy {gs.pa.proxy}
-0003d2b0: 2063 616e 6e6f 7420 220a 2020 2020 2020   cannot ".      
-0003d2c0: 2020 2020 2020 2020 2020 2020 2020 2262                "b
-0003d2d0: 6520 636f 6e66 6967 7572 6564 2066 6f72  e configured for
-0003d2e0: 2062 726f 7773 6572 2e22 0a20 2020 2020   browser.".     
-0003d2f0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0003d300: 2020 2020 2020 2020 2020 2020 2067 732e               gs.
-0003d310: 7761 726e 5f63 6f75 6e74 202b 3d20 310a  warn_count += 1.
-0003d320: 0a20 2020 2020 2020 2020 2020 2023 206c  .            # l
-0003d330: 6175 6e63 6820 7765 622d 6272 6f77 7365  aunch web-browse
-0003d340: 720a 2020 2020 2020 2020 2020 2020 6966  r.            if
-0003d350: 2073 7973 2e70 6c61 7466 6f72 6d2e 7374   sys.platform.st
-0003d360: 6172 7473 7769 7468 2822 6461 7277 696e  artswith("darwin
-0003d370: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-0003d380: 2020 2020 636d 6420 3d20 5b73 6875 7469      cmd = [shuti
-0003d390: 6c2e 7768 6963 6828 226f 7065 6e22 295d  l.which("open")]
-0003d3a0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0003d3b0: 6620 7379 732e 706c 6174 666f 726d 2e73  f sys.platform.s
-0003d3c0: 7461 7274 7377 6974 6828 2277 696e 2229  tartswith("win")
-0003d3d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003d3e0: 2020 636d 6420 3d20 5b22 7374 6172 7422    cmd = ["start"
-0003d3f0: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
-0003d400: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003d410: 2020 2020 636d 6420 3d20 5b73 6875 7469      cmd = [shuti
-0003d420: 6c2e 7768 6963 6828 2278 6467 2d6f 7065  l.which("xdg-ope
-0003d430: 6e22 295d 0a20 2020 2020 2020 2020 2020  n")].           
-0003d440: 2020 2020 2069 6620 636d 6420 3d3d 205b       if cmd == [
-0003d450: 4e6f 6e65 5d3a 0a20 2020 2020 2020 2020  None]:.         
-0003d460: 2020 2020 2020 2020 2020 2063 6d64 203d             cmd =
-0003d470: 205b 7368 7574 696c 2e77 6869 6368 2822   [shutil.which("
-0003d480: 782d 7777 772d 6272 6f77 7365 7222 295d  x-www-browser")]
-0003d490: 0a20 2020 2020 2020 2020 2020 2063 6d64  .            cmd
-0003d4a0: 2e61 7070 656e 6428 0a20 2020 2020 2020  .append(.       
-0003d4b0: 2020 2020 2020 2020 2066 227b 686f 6d65           f"{home
-0003d4c0: 7365 7276 6572 7d2f 5f6d 6174 7269 782f  server}/_matrix/
-0003d4d0: 636c 6965 6e74 2f72 302f 6c6f 6769 6e2f  client/r0/login/
-0003d4e0: 7373 6f2f 7265 6469 7265 6374 220a 2020  sso/redirect".  
-0003d4f0: 2020 2020 2020 2020 2020 2020 2020 223f                "?
-0003d500: 7265 6469 7265 6374 5572 6c3d 6874 7470  redirectUrl=http
-0003d510: 3a2f 2f6c 6f63 616c 686f 7374 3a33 3830  ://localhost:380
-0003d520: 3830 2f22 0a20 2020 2020 2020 2020 2020  80/".           
-0003d530: 2029 0a20 2020 2020 2020 2020 2020 2074   ).            t
-0003d540: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0003d550: 2020 2020 7375 6270 726f 6365 7373 2e63      subprocess.c
-0003d560: 6865 636b 5f6f 7574 7075 7428 636d 6429  heck_output(cmd)
-0003d570: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-0003d580: 6570 7420 4578 6365 7074 696f 6e3a 0a20  ept Exception:. 
-0003d590: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-0003d5a0: 732e 6c6f 672e 6572 726f 7228 0a20 2020  s.log.error(.   
+0003d290: 2020 6622 5370 6563 6966 6965 6420 7072    f"Specified pr
+0003d2a0: 6f78 7920 7b67 732e 7061 2e70 726f 7879  oxy {gs.pa.proxy
+0003d2b0: 7d20 6361 6e6e 6f74 2022 0a20 2020 2020  } cannot ".     
+0003d2c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003d2d0: 6265 2063 6f6e 6669 6775 7265 6420 666f  be configured fo
+0003d2e0: 7220 6272 6f77 7365 722e 220a 2020 2020  r browser.".    
+0003d2f0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0003d300: 2020 2020 2020 2020 2020 2020 2020 6773                gs
+0003d310: 2e77 6172 6e5f 636f 756e 7420 2b3d 2031  .warn_count += 1
+0003d320: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0003d330: 6c61 756e 6368 2077 6562 2d62 726f 7773  launch web-brows
+0003d340: 6572 0a20 2020 2020 2020 2020 2020 2069  er.            i
+0003d350: 6620 7379 732e 706c 6174 666f 726d 2e73  f sys.platform.s
+0003d360: 7461 7274 7377 6974 6828 2264 6172 7769  tartswith("darwi
+0003d370: 6e22 293a 0a20 2020 2020 2020 2020 2020  n"):.           
+0003d380: 2020 2020 2063 6d64 203d 205b 7368 7574       cmd = [shut
+0003d390: 696c 2e77 6869 6368 2822 6f70 656e 2229  il.which("open")
+0003d3a0: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
+0003d3b0: 6966 2073 7973 2e70 6c61 7466 6f72 6d2e  if sys.platform.
+0003d3c0: 7374 6172 7473 7769 7468 2822 7769 6e22  startswith("win"
+0003d3d0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0003d3e0: 2020 2063 6d64 203d 205b 2273 7461 7274     cmd = ["start
+0003d3f0: 225d 0a20 2020 2020 2020 2020 2020 2065  "].            e
+0003d400: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003d410: 2020 2020 2063 6d64 203d 205b 7368 7574       cmd = [shut
+0003d420: 696c 2e77 6869 6368 2822 7864 672d 6f70  il.which("xdg-op
+0003d430: 656e 2229 5d0a 2020 2020 2020 2020 2020  en")].          
+0003d440: 2020 2020 2020 6966 2063 6d64 203d 3d20        if cmd == 
+0003d450: 5b4e 6f6e 655d 3a0a 2020 2020 2020 2020  [None]:.        
+0003d460: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
+0003d470: 3d20 5b73 6875 7469 6c2e 7768 6963 6828  = [shutil.which(
+0003d480: 2278 2d77 7777 2d62 726f 7773 6572 2229  "x-www-browser")
+0003d490: 5d0a 2020 2020 2020 2020 2020 2020 636d  ].            cm
+0003d4a0: 642e 6170 7065 6e64 280a 2020 2020 2020  d.append(.      
+0003d4b0: 2020 2020 2020 2020 2020 6622 7b68 6f6d            f"{hom
+0003d4c0: 6573 6572 7665 727d 2f5f 6d61 7472 6978  eserver}/_matrix
+0003d4d0: 2f63 6c69 656e 742f 7230 2f6c 6f67 696e  /client/r0/login
+0003d4e0: 2f73 736f 2f72 6564 6972 6563 7422 0a20  /sso/redirect". 
+0003d4f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003d500: 3f72 6564 6972 6563 7455 726c 3d68 7474  ?redirectUrl=htt
+0003d510: 703a 2f2f 6c6f 6361 6c68 6f73 743a 3338  p://localhost:38
+0003d520: 3038 302f 220a 2020 2020 2020 2020 2020  080/".          
+0003d530: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0003d540: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0003d550: 2020 2020 2073 7562 7072 6f63 6573 732e       subprocess.
+0003d560: 6368 6563 6b5f 6f75 7470 7574 2863 6d64  check_output(cmd
+0003d570: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
+0003d580: 6365 7074 2045 7863 6570 7469 6f6e 3a0a  cept Exception:.
+0003d590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d5a0: 6773 2e6c 6f67 2e65 7272 6f72 280a 2020  gs.log.error(.  
 0003d5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d5c0: 2022 4532 3331 3a20 220a 2020 2020 2020   "E231: ".      
-0003d5d0: 2020 2020 2020 2020 2020 2020 2020 2242                "B
-0003d5e0: 726f 7773 6572 2063 6f75 6c64 206e 6f74  rowser could not
-0003d5f0: 2062 6520 6c61 756e 6368 6564 2e20 220a   be launched. ".
-0003d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d610: 2020 2020 2248 656e 6365 2053 534f 2028      "Hence SSO (
-0003d620: 5369 6e67 6c65 2053 6967 6e2d 4f6e 2920  Single Sign-On) 
-0003d630: 6c6f 6769 6e20 636f 756c 6420 6e6f 7420  login could not 
-0003d640: 6265 2022 0a20 2020 2020 2020 2020 2020  be ".           
-0003d650: 2020 2020 2020 2020 2022 636f 6d70 6c65           "comple
-0003d660: 7465 642e 2053 6f72 7279 2e20 4966 2079  ted. Sorry. If y
-0003d670: 6f75 2074 6869 6e6b 2074 6865 2062 726f  ou think the bro
-0003d680: 7773 6572 2061 6e64 2022 0a20 2020 2020  wser and ".     
-0003d690: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003d6a0: 5353 4f20 7368 6f75 6c64 2077 6f72 6b20  SSO should work 
-0003d6b0: 7468 656e 2074 7279 2061 6761 696e 2e20  then try again. 
-0003d6c0: 4966 2079 6f75 2064 6f20 6e6f 7420 6861  If you do not ha
-0003d6d0: 7665 2022 0a20 2020 2020 2020 2020 2020  ve ".           
-0003d6e0: 2020 2020 2020 2020 2022 6120 6272 6f77           "a brow
-0003d6f0: 7365 7220 6f72 2064 6f6e 2774 2077 616e  ser or don't wan
-0003d700: 7420 5353 4f20 6f72 2077 616e 7420 746f  t SSO or want to
-0003d710: 206c 6f67 696e 2077 6974 6820 6120 220a   login with a ".
-0003d720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d730: 2020 2020 2270 6173 7377 6f72 6420 696e      "password in
-0003d740: 7374 6561 642c 2074 6865 6e20 7573 6520  stead, then use 
-0003d750: 272d 2d6c 6f67 696e 2070 6173 7377 6f72  '--login passwor
-0003d760: 6427 2069 6e20 220a 2020 2020 2020 2020  d' in ".        
-0003d770: 2020 2020 2020 2020 2020 2020 2274 6865              "the
-0003d780: 2063 6f6d 6d61 6e64 206c 696e 652e 220a   command line.".
-0003d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d7a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003d7b0: 2020 7261 6973 650a 0a20 2020 2020 2020    raise..       
-0003d7c0: 2020 2020 2023 2077 6169 7420 616e 6420       # wait and 
-0003d7d0: 7368 7574 646f 776e 2073 6572 7665 720a  shutdown server.
-0003d7e0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0003d7f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d800: 2061 7761 6974 2061 7379 6e63 696f 2e77   await asyncio.w
-0003d810: 6169 745f 666f 7228 7374 6f70 5f73 6572  ait_for(stop_ser
-0003d820: 7665 725f 6576 742e 7761 6974 2829 2c20  ver_evt.wait(), 
-0003d830: 3520 2a20 3630 290a 2020 2020 2020 2020  5 * 60).        
-0003d840: 2020 2020 6578 6365 7074 2061 7379 6e63      except async
-0003d850: 696f 2e54 696d 656f 7574 4572 726f 723a  io.TimeoutError:
-0003d860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d870: 2067 732e 6c6f 672e 6572 726f 7228 0a20   gs.log.error(. 
+0003d5c0: 2020 2245 3233 313a 2022 0a20 2020 2020    "E231: ".     
+0003d5d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003d5e0: 4272 6f77 7365 7220 636f 756c 6420 6e6f  Browser could no
+0003d5f0: 7420 6265 206c 6175 6e63 6865 642e 2022  t be launched. "
+0003d600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d610: 2020 2020 2022 4865 6e63 6520 5353 4f20       "Hence SSO 
+0003d620: 2853 696e 676c 6520 5369 676e 2d4f 6e29  (Single Sign-On)
+0003d630: 206c 6f67 696e 2063 6f75 6c64 206e 6f74   login could not
+0003d640: 2062 6520 220a 2020 2020 2020 2020 2020   be ".          
+0003d650: 2020 2020 2020 2020 2020 2263 6f6d 706c            "compl
+0003d660: 6574 6564 2e20 536f 7272 792e 2049 6620  eted. Sorry. If 
+0003d670: 796f 7520 7468 696e 6b20 7468 6520 6272  you think the br
+0003d680: 6f77 7365 7220 616e 6420 220a 2020 2020  owser and ".    
+0003d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d6a0: 2253 534f 2073 686f 756c 6420 776f 726b  "SSO should work
+0003d6b0: 2074 6865 6e20 7472 7920 6167 6169 6e2e   then try again.
+0003d6c0: 2049 6620 796f 7520 646f 206e 6f74 2068   If you do not h
+0003d6d0: 6176 6520 220a 2020 2020 2020 2020 2020  ave ".          
+0003d6e0: 2020 2020 2020 2020 2020 2261 2062 726f            "a bro
+0003d6f0: 7773 6572 206f 7220 646f 6e27 7420 7761  wser or don't wa
+0003d700: 6e74 2053 534f 206f 7220 7761 6e74 2074  nt SSO or want t
+0003d710: 6f20 6c6f 6769 6e20 7769 7468 2061 2022  o login with a "
+0003d720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d730: 2020 2020 2022 7061 7373 776f 7264 2069       "password i
+0003d740: 6e73 7465 6164 2c20 7468 656e 2075 7365  nstead, then use
+0003d750: 2027 2d2d 6c6f 6769 6e20 7061 7373 776f   '--login passwo
+0003d760: 7264 2720 696e 2022 0a20 2020 2020 2020  rd' in ".       
+0003d770: 2020 2020 2020 2020 2020 2020 2022 7468               "th
+0003d780: 6520 636f 6d6d 616e 6420 6c69 6e65 2e22  e command line."
+0003d790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d7a0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0003d7b0: 2020 2072 6169 7365 0a0a 2020 2020 2020     raise..      
+0003d7c0: 2020 2020 2020 2320 7761 6974 2061 6e64        # wait and
+0003d7d0: 2073 6875 7464 6f77 6e20 7365 7276 6572   shutdown server
+0003d7e0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+0003d7f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d800: 2020 6177 6169 7420 6173 796e 6369 6f2e    await asyncio.
+0003d810: 7761 6974 5f66 6f72 2873 746f 705f 7365  wait_for(stop_se
+0003d820: 7276 6572 5f65 7674 2e77 6169 7428 292c  rver_evt.wait(),
+0003d830: 2035 202a 2036 3029 0a20 2020 2020 2020   5 * 60).       
+0003d840: 2020 2020 2065 7863 6570 7420 6173 796e       except asyn
+0003d850: 6369 6f2e 5469 6d65 6f75 7445 7272 6f72  cio.TimeoutError
+0003d860: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d870: 2020 6773 2e6c 6f67 2e65 7272 6f72 280a    gs.log.error(.
 0003d880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d890: 2020 2022 4532 3332 3a20 220a 2020 2020     "E232: ".    
+0003d890: 2020 2020 2245 3233 323a 2022 0a20 2020      "E232: ".   
 0003d8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d8b0: 6622 5468 6520 7072 6f67 7261 6d20 7b50  f"The program {P
-0003d8c0: 524f 475f 5749 5448 5f45 5854 7d20 6661  ROG_WITH_EXT} fa
-0003d8d0: 696c 6564 2e20 220a 2020 2020 2020 2020  iled. ".        
-0003d8e0: 2020 2020 2020 2020 2020 2020 224e 6f20              "No 
-0003d8f0: 7265 7370 6f6e 7365 2077 6173 2072 6563  response was rec
-0003d900: 6569 7665 6420 6672 6f6d 2053 534f 2070  eived from SSO p
-0003d910: 726f 7669 6465 722e 2022 0a20 2020 2020  rovider. ".     
-0003d920: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003d930: 5468 6572 6520 7761 7320 6120 7469 6d65  There was a time
-0003d940: 6f75 742e 2053 6f72 7279 2e22 0a20 2020  out. Sorry.".   
-0003d950: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0003d960: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003d970: 6169 7365 0a20 2020 2020 2020 2066 696e  aise.        fin
-0003d980: 616c 6c79 3a0a 2020 2020 2020 2020 2020  ally:.          
-0003d990: 2020 6177 6169 7420 7275 6e6e 6572 2e63    await runner.c
-0003d9a0: 6c65 616e 7570 2829 0a0a 2020 2020 2320  leanup()..    # 
-0003d9b0: 436f 6e66 6967 7572 6174 696f 6e20 6f70  Configuration op
-0003d9c0: 7469 6f6e 7320 666f 7220 7468 6520 4173  tions for the As
-0003d9d0: 796e 6343 6c69 656e 740a 2020 2020 636c  yncClient.    cl
-0003d9e0: 6965 6e74 5f63 6f6e 6669 6720 3d20 4173  ient_config = As
-0003d9f0: 796e 6343 6c69 656e 7443 6f6e 6669 6728  yncClientConfig(
-0003da00: 0a20 2020 2020 2020 206d 6178 5f6c 696d  .        max_lim
-0003da10: 6974 5f65 7863 6565 6465 643d 302c 0a20  it_exceeded=0,. 
-0003da20: 2020 2020 2020 206d 6178 5f74 696d 656f         max_timeo
-0003da30: 7574 733d 302c 0a20 2020 2020 2020 2073  uts=0,.        s
-0003da40: 746f 7265 5f73 796e 635f 746f 6b65 6e73  tore_sync_tokens
-0003da50: 3d54 7275 652c 0a20 2020 2020 2020 2065  =True,.        e
-0003da60: 6e63 7279 7074 696f 6e5f 656e 6162 6c65  ncryption_enable
-0003da70: 643d 5472 7565 2c0a 2020 2020 290a 0a20  d=True,.    ).. 
-0003da80: 2020 2073 746f 7265 5f63 7265 6174 6528     store_create(
-0003da90: 7374 6f72 655f 6469 7229 0a0a 2020 2020  store_dir)..    
-0003daa0: 2320 496e 6974 6961 6c69 7a65 2074 6865  # Initialize the
-0003dab0: 206d 6174 7269 7820 636c 6965 6e74 0a20   matrix client. 
-0003dac0: 2020 2063 6c69 656e 7420 3d20 4173 796e     client = Asyn
-0003dad0: 6343 6c69 656e 7428 0a20 2020 2020 2020  cClient(.       
-0003dae0: 2068 6f6d 6573 6572 7665 722c 0a20 2020   homeserver,.   
-0003daf0: 2020 2020 2022 2220 6966 206e 6f74 2075       "" if not u
-0003db00: 7365 725f 6964 2065 6c73 6520 7573 6572  ser_id else user
-0003db10: 5f69 642c 0a20 2020 2020 2020 2073 746f  _id,.        sto
-0003db20: 7265 5f70 6174 683d 7374 6f72 655f 6469  re_path=store_di
-0003db30: 722c 0a20 2020 2020 2020 2063 6f6e 6669  r,.        confi
-0003db40: 673d 636c 6965 6e74 5f63 6f6e 6669 672c  g=client_config,
-0003db50: 0a20 2020 2020 2020 2073 736c 3d67 732e  .        ssl=gs.
-0003db60: 7373 6c2c 0a20 2020 2020 2020 2070 726f  ssl,.        pro
-0003db70: 7879 3d67 732e 7061 2e70 726f 7879 2c0a  xy=gs.pa.proxy,.
-0003db80: 2020 2020 290a 2020 2020 7472 793a 0a20      ).    try:. 
-0003db90: 2020 2020 2020 2069 6620 6d65 7468 6f64         if method
-0003dba0: 203d 3d20 2273 736f 223a 0a20 2020 2020   == "sso":.     
-0003dbb0: 2020 2020 2020 2072 6573 7020 3d20 6177         resp = aw
-0003dbc0: 6169 7420 636c 6965 6e74 2e6c 6f67 696e  ait client.login
-0003dbd0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0003dbe0: 2020 746f 6b65 6e3d 6c6f 6769 6e5f 746f    token=login_to
-0003dbf0: 6b65 6e2c 2064 6576 6963 655f 6e61 6d65  ken, device_name
-0003dc00: 3d64 6576 6963 655f 6e61 6d65 0a20 2020  =device_name.   
-0003dc10: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0003dc20: 2020 2065 6c69 6620 6d65 7468 6f64 203d     elif method =
-0003dc30: 3d20 2270 6173 7377 6f72 6422 3a0a 2020  = "password":.  
-0003dc40: 2020 2020 2020 2020 2020 7265 7370 203d            resp =
-0003dc50: 2061 7761 6974 2063 6c69 656e 742e 6c6f   await client.lo
-0003dc60: 6769 6e28 7061 7373 776f 7264 2c20 6465  gin(password, de
-0003dc70: 7669 6365 5f6e 616d 653d 6465 7669 6365  vice_name=device
-0003dc80: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
-0003dc90: 2320 6368 6563 6b20 7468 6174 2077 6520  # check that we 
-0003dca0: 6c6f 6767 6564 2069 6e20 7375 6363 6573  logged in succes
-0003dcb0: 6675 6c6c 790a 2020 2020 2020 2020 6966  fully.        if
-0003dcc0: 2069 7369 6e73 7461 6e63 6528 7265 7370   isinstance(resp
-0003dcd0: 2c20 4c6f 6769 6e52 6573 706f 6e73 6529  , LoginResponse)
-0003dce0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-0003dcf0: 7768 656e 2077 7269 7469 6e67 2c20 616c  when writing, al
-0003dd00: 7761 7973 2077 7269 7465 2074 6f20 7072  ways write to pr
-0003dd10: 696d 6172 7920 6c6f 6361 7469 6f6e 2028  imary location (
-0003dd20: 652e 672e 202e 290a 2020 2020 2020 2020  e.g. .).        
-0003dd30: 2020 2020 7772 6974 655f 6372 6564 656e      write_creden
-0003dd40: 7469 616c 735f 746f 5f64 6973 6b28 0a20  tials_to_disk(. 
-0003dd50: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-0003dd60: 6f6d 6573 6572 7665 722c 0a20 2020 2020  omeserver,.     
-0003dd70: 2020 2020 2020 2020 2020 2072 6573 702e             resp.
-0003dd80: 7573 6572 5f69 642c 0a20 2020 2020 2020  user_id,.       
-0003dd90: 2020 2020 2020 2020 2072 6573 702e 6465           resp.de
-0003dda0: 7669 6365 5f69 642c 2020 2320 6e6f 7465  vice_id,  # note
-0003ddb0: 2074 6869 7320 6973 2061 6e20 6964 2c20   this is an id, 
-0003ddc0: 6e6f 7420 6120 6e61 6d65 210a 2020 2020  not a name!.    
-0003ddd0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-0003dde0: 2e61 6363 6573 735f 746f 6b65 6e2c 0a20  .access_token,. 
-0003ddf0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003de00: 6f6f 6d5f 6964 2c0a 2020 2020 2020 2020  oom_id,.        
-0003de10: 2020 2020 2020 2020 6773 2e70 612e 6372          gs.pa.cr
-0003de20: 6564 656e 7469 616c 732c 0a20 2020 2020  edentials,.     
-0003de30: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0003de40: 2020 2020 2067 732e 636c 6965 6e74 203d       gs.client =
-0003de50: 2063 6c69 656e 740a 2020 2020 2020 2020   client.        
-0003de60: 2020 2020 6773 2e63 7265 6465 6e74 6961      gs.credentia
-0003de70: 6c73 203d 2072 6561 645f 6372 6564 656e  ls = read_creden
-0003de80: 7469 616c 735f 6672 6f6d 5f64 6973 6b28  tials_from_disk(
-0003de90: 6372 6564 656e 7469 616c 735f 6669 6c65  credentials_file
-0003dea0: 290a 2020 2020 2020 2020 2020 2020 7478  ).            tx
-0003deb0: 7420 3d20 280a 2020 2020 2020 2020 2020  t = (.          
-0003dec0: 2020 2020 2020 2245 3233 333a 2022 0a20        "E233: ". 
-0003ded0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0003dee0: 224c 6f67 2069 6e20 7573 696e 6720 6d65  "Log in using me
-0003def0: 7468 6f64 2027 7b6d 6574 686f 647d 2720  thod '{method}' 
-0003df00: 7761 7320 7375 6363 6573 7366 756c 2e20  was successful. 
-0003df10: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0003df20: 2020 6622 4372 6564 656e 7469 616c 7320    f"Credentials 
-0003df30: 7765 7265 2073 746f 7265 6420 696e 2066  were stored in f
-0003df40: 696c 6520 277b 6773 2e70 612e 6372 6564  ile '{gs.pa.cred
-0003df50: 656e 7469 616c 737d 272e 2022 0a20 2020  entials}'. ".   
-0003df60: 2020 2020 2020 2020 2020 2020 2066 2246               f"F
-0003df70: 726f 6d20 6e6f 7720 6f6e 2079 6f75 2063  rom now on you c
-0003df80: 616e 2072 756e 2070 726f 6772 616d 2027  an run program '
-0003df90: 7b50 524f 475f 5749 5448 5f45 5854 7d27  {PROG_WITH_EXT}'
-0003dfa0: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-0003dfb0: 2020 2022 7769 7468 6f75 7420 6c6f 6720     "without log 
-0003dfc0: 696e 2c20 6173 2061 6e20 6163 6365 7373  in, as an access
-0003dfd0: 2074 6f6b 656e 2069 7320 7374 6f72 6564   token is stored
-0003dfe0: 2069 6e20 796f 7572 2022 0a20 2020 2020   in your ".     
-0003dff0: 2020 2020 2020 2020 2020 2022 6372 6564             "cred
-0003e000: 656e 7469 616c 7320 6669 6c65 2e20 220a  entials file. ".
-0003e010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e020: 2249 6620 796f 7520 706c 616e 206f 6e20  "If you plan on 
-0003e030: 6861 7669 6e67 206d 616e 7920 6372 6564  having many cred
-0003e040: 656e 7469 616c 2066 696c 6573 2c20 636f  ential files, co
-0003e050: 6e73 6964 6572 2022 0a20 2020 2020 2020  nsider ".       
-0003e060: 2020 2020 2020 2020 2066 226d 6f76 696e           f"movin
-0003e070: 6720 7468 656d 2074 6f20 6469 7265 6374  g them to direct
-0003e080: 6f72 7920 277b 4352 4544 454e 5449 414c  ory '{CREDENTIAL
-0003e090: 535f 4449 525f 4c41 5354 5245 534f 5254  S_DIR_LASTRESORT
-0003e0a0: 7d27 2e22 0a20 2020 2020 2020 2020 2020  }'.".           
-0003e0b0: 2029 0a20 2020 2020 2020 2020 2020 2067   ).            g
-0003e0c0: 732e 6c6f 672e 696e 666f 2874 7874 290a  s.log.info(txt).
-0003e0d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003e0e0: 2020 2020 2020 2020 2020 2320 6973 696e            # isin
-0003e0f0: 7374 616e 6365 2872 6573 702c 204c 6f67  stance(resp, Log
-0003e100: 696e 4572 726f 7229 203d 3d20 7472 7565  inError) == true
-0003e110: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
-0003e120: 6c65 616e 7570 0a20 2020 2020 2020 2020  leanup.         
-0003e130: 2020 2061 7761 6974 2063 6c69 656e 742e     await client.
-0003e140: 636c 6f73 6528 2920 2023 206e 6f74 2079  close()  # not y
-0003e150: 6574 2069 6e20 6773 2e0a 2020 2020 2020  et in gs..      
-0003e160: 2020 2020 2020 7374 6f72 655f 6465 6c65        store_dele
-0003e170: 7465 2873 746f 7265 5f64 6972 2920 2023  te(store_dir)  #
-0003e180: 2065 6d70 7479 2c20 6a75 7374 2063 7265   empty, just cre
-0003e190: 6174 6564 0a20 2020 2020 2020 2020 2020  ated.           
-0003e1a0: 2023 2072 6573 7020 646f 6573 206e 6f74   # resp does not
-0003e1b0: 2063 6f6e 7461 696e 2073 6563 7265 7473   contain secrets
-0003e1c0: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-0003e1d0: 6573 7020 6973 3a20 6d65 7373 6167 653d  esp is: message=
-0003e1e0: 2249 6e76 616c 6964 2075 7365 726e 616d  "Invalid usernam
-0003e1f0: 6520 6f72 2070 6173 7377 6f72 6422 2c20  e or password", 
-0003e200: 636f 6465 3d4d 5f46 4f52 4249 4444 454e  code=M_FORBIDDEN
-0003e210: 0a20 2020 2020 2020 2020 2020 2074 7874  .            txt
-0003e220: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-0003e230: 2020 2020 2022 4532 3334 3a20 220a 2020       "E234: ".  
-0003e240: 2020 2020 2020 2020 2020 2020 2020 224c                "L
-0003e250: 6f67 2069 6e20 6661 696c 6564 2e20 220a  og in failed. ".
-0003e260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e270: 224d 6f73 7420 6c69 6b65 6c79 2077 726f  "Most likely wro
-0003e280: 6e67 2063 7265 6465 6e74 6961 6c73 2077  ng credentials w
-0003e290: 6572 6520 656e 7465 7265 642e 2022 0a20  ere entered. ". 
-0003e2a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0003e2b0: 2268 6f6d 6573 6572 7665 723d 277b 686f  "homeserver='{ho
-0003e2c0: 6d65 7365 7276 6572 7d27 3b20 6465 7669  meserver}'; devi
-0003e2d0: 6365 206e 616d 653d 277b 6465 7669 6365  ce name='{device
-0003e2e0: 5f6e 616d 657d 273b 2022 0a20 2020 2020  _name}'; ".     
-0003e2f0: 2020 2020 2020 2020 2020 2066 2275 7365             f"use
-0003e300: 723d 277b 7573 6572 5f69 647d 273b 2072  r='{user_id}'; r
-0003e310: 6f6f 6d5f 6964 3d27 7b72 6f6f 6d5f 6964  oom_id='{room_id
-0003e320: 7d27 2e20 220a 2020 2020 2020 2020 2020  }'. ".          
-0003e330: 2020 2020 2020 6622 4661 696c 6564 2074        f"Failed t
-0003e340: 6f20 6c6f 6720 696e 3a20 7b72 6573 702e  o log in: {resp.
-0003e350: 6d65 7373 6167 657d 2c20 7b73 7472 2872  message}, {str(r
-0003e360: 6573 702e 7374 6174 7573 5f63 6f64 6529  esp.status_code)
-0003e370: 7d22 0a20 2020 2020 2020 2020 2020 2029  }".            )
-0003e380: 0a20 2020 2020 2020 2020 2020 2067 732e  .            gs.
-0003e390: 6572 725f 636f 756e 7420 2b3d 2031 0a20  err_count += 1. 
-0003e3a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0003e3b0: 204d 6174 7269 7843 6f6d 6d61 6e64 6572   MatrixCommander
-0003e3c0: 4572 726f 7228 7478 7429 0a20 2020 2065  Error(txt).    e
-0003e3d0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-0003e3e0: 6173 2065 3a0a 2020 2020 2020 2020 7478  as e:.        tx
-0003e3f0: 7420 3d20 280a 2020 2020 2020 2020 2020  t = (.          
-0003e400: 2020 2245 3233 353a 2022 0a20 2020 2020    "E235: ".     
-0003e410: 2020 2020 2020 2022 4c6f 6720 696e 2066         "Log in f
-0003e420: 6169 6c65 642e 2053 6f72 7279 2e22 0a20  ailed. Sorry.". 
-0003e430: 2020 2020 2020 2020 2020 2066 2268 6f6d             f"hom
-0003e440: 6573 6572 7665 723d 277b 686f 6d65 7365  eserver='{homese
-0003e450: 7276 6572 7d27 3b20 6465 7669 6365 206e  rver}'; device n
-0003e460: 616d 653d 277b 6465 7669 6365 5f6e 616d  ame='{device_nam
-0003e470: 657d 273b 2022 0a20 2020 2020 2020 2020  e}'; ".         
-0003e480: 2020 2066 2275 7365 723d 277b 7573 6572     f"user='{user
-0003e490: 5f69 647d 273b 2072 6f6f 6d5f 6964 3d27  _id}'; room_id='
-0003e4a0: 7b72 6f6f 6d5f 6964 7d27 2e20 220a 2020  {room_id}'. ".  
-0003e4b0: 2020 2020 2020 2020 2020 6622 4661 696c            f"Fail
-0003e4c0: 6564 2074 6f20 6c6f 6720 696e 3a20 7b65  ed to log in: {e
-0003e4d0: 7d22 0a20 2020 2020 2020 2029 0a20 2020  }".        ).   
-0003e4e0: 2020 2020 2023 2067 732e 6572 725f 636f       # gs.err_co
-0003e4f0: 756e 7420 2b3d 2031 2020 2320 646f 6e27  unt += 1  # don'
-0003e500: 7420 696e 6372 656d 656e 7420 7369 6e63  t increment sinc
-0003e510: 6520 6e6f 7420 4d61 7472 6978 436f 6d6d  e not MatrixComm
-0003e520: 616e 6465 7245 7272 6f72 0a20 2020 2020  anderError.     
-0003e530: 2020 2072 6169 7365 0a20 2020 2023 2077     raise.    # w
-0003e540: 6520 6172 6520 6e6f 7720 6175 7468 656e  e are now authen
-0003e550: 7469 6361 7465 642c 2077 6520 6172 6520  ticated, we are 
-0003e560: 6e6f 7720 6c6f 6767 6564 2069 6e0a 2020  now logged in.  
-0003e570: 2020 2320 6773 206e 6f77 2068 6173 2063    # gs now has c
-0003e580: 6c69 656e 7420 616e 6420 6372 6564 656e  lient and creden
-0003e590: 7469 616c 732c 206e 6565 6465 6420 6279  tials, needed by
-0003e5a0: 2066 7572 7468 6572 2061 6374 696f 6e73   further actions
-0003e5b0: 0a0a 0a61 7379 6e63 2064 6566 2069 6d70  ...async def imp
-0003e5c0: 6c69 6369 745f 6c6f 6769 6e28 2920 2d3e  licit_login() ->
-0003e5d0: 204e 6f6e 653a 0a20 2020 2022 2222 4c6f   None:.    """Lo
-0003e5e0: 6720 696e 2075 7369 6e67 2063 7265 6465  g in using crede
-0003e5f0: 6e74 6961 6c73 2066 696c 6520 616e 6420  ntials file and 
-0003e600: 7265 6d61 696e 206c 6f67 6765 6420 696e  remain logged in
-0003e610: 2e22 2222 0a20 2020 2063 6c69 656e 742c  .""".    client,
-0003e620: 2063 7265 6465 6e74 6961 6c73 203d 2061   credentials = a
-0003e630: 7761 6974 206c 6f67 696e 5f75 7369 6e67  wait login_using
-0003e640: 5f63 7265 6465 6e74 6961 6c73 5f66 696c  _credentials_fil
-0003e650: 6528 290a 2020 2020 6773 2e63 6c69 656e  e().    gs.clien
-0003e660: 7420 3d20 636c 6965 6e74 0a20 2020 2067  t = client.    g
-0003e670: 732e 6372 6564 656e 7469 616c 7320 3d20  s.credentials = 
-0003e680: 6372 6564 656e 7469 616c 730a 0a0a 6465  credentials...de
-0003e690: 6620 726f 6f6d 735f 746f 5f6c 6f6e 675f  f rooms_to_long_
-0003e6a0: 726f 6f6d 5f6e 616d 6573 2829 202d 3e20  room_names() -> 
-0003e6b0: 4e6f 6e65 3a0a 2020 2020 2222 2243 6f6e  None:.    """Con
-0003e6c0: 7665 7274 2066 6f6f 2074 6f20 2366 6f6f  vert foo to #foo
-0003e6d0: 3a65 7861 6d70 6c65 2e63 6f6d 2069 6e20  :example.com in 
-0003e6e0: 6773 2e70 612e 726f 6f6d 2077 6865 7265  gs.pa.room where
-0003e6f0: 206e 6563 6573 7361 7279 2e22 2222 0a20   necessary.""". 
-0003e700: 2020 2069 6620 6773 2e70 612e 726f 6f6d     if gs.pa.room
-0003e710: 3a0a 2020 2020 2020 2020 6c6f 6e67 5f72  :.        long_r
-0003e720: 6f6f 6d73 203d 205b 5d0a 2020 2020 2020  ooms = [].      
-0003e730: 2020 666f 7220 726f 6f6d 2069 6e20 6773    for room in gs
-0003e740: 2e70 612e 726f 6f6d 3a0a 2020 2020 2020  .pa.room:.      
-0003e750: 2020 2020 2020 6966 2069 735f 7368 6f72        if is_shor
-0003e760: 745f 726f 6f6d 5f61 6c69 6173 2872 6f6f  t_room_alias(roo
-0003e770: 6d29 3a0a 2020 2020 2020 2020 2020 2020  m):.            
-0003e780: 2020 2020 6c6f 6e67 5f72 6f6f 6d73 2e61      long_rooms.a
-0003e790: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
-0003e7a0: 2020 2020 2020 2020 2020 2073 686f 7274             short
-0003e7b0: 5f72 6f6f 6d5f 616c 6961 735f 746f 5f72  _room_alias_to_r
-0003e7c0: 6f6f 6d5f 616c 6961 7328 726f 6f6d 2c20  oom_alias(room, 
-0003e7d0: 6773 2e63 7265 6465 6e74 6961 6c73 290a  gs.credentials).
-0003e7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e7f0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0003e800: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003e810: 2020 2020 6c6f 6e67 5f72 6f6f 6d73 2e61      long_rooms.a
-0003e820: 7070 656e 6428 726f 6f6d 290a 2020 2020  ppend(room).    
-0003e830: 2020 2020 6773 2e70 612e 726f 6f6d 203d      gs.pa.room =
-0003e840: 206c 6f6e 675f 726f 6f6d 730a 0a0a 6173   long_rooms...as
-0003e850: 796e 6320 6465 6620 6173 796e 635f 6d61  ync def async_ma
-0003e860: 696e 2829 202d 3e20 4e6f 6e65 3a0a 2020  in() -> None:.  
-0003e870: 2020 2222 2252 756e 206d 6169 6e20 6675    """Run main fu
-0003e880: 6e63 7469 6f6e 7320 6265 696e 6720 696e  nctions being in
-0003e890: 7369 6465 2074 6865 2065 7665 6e74 206c  side the event l
-0003e8a0: 6f6f 702e 2222 220a 2020 2020 2320 6c6f  oop.""".    # lo
-0003e8b0: 6769 6e20 6578 706c 6963 6974 6c79 0a20  gin explicitly. 
-0003e8c0: 2020 2023 206c 6f67 696e 2069 6d70 6c69     # login impli
-0003e8d0: 6369 746c 790a 2020 2020 2320 7665 7269  citly.    # veri
-0003e8e0: 6679 0a20 2020 2023 2073 6574 2c20 6765  fy.    # set, ge
-0003e8f0: 742c 2072 6f6f 6d2c 0a20 2020 2023 2073  t, room,.    # s
-0003e900: 656e 640a 2020 2020 2320 6c69 7374 656e  end.    # listen
-0003e910: 0a20 2020 2023 206c 6f67 6f75 740a 2020  .    # logout.  
-0003e920: 2020 2320 636c 6f73 6520 636c 6965 6e74    # close client
-0003e930: 0a20 2020 2023 2073 7973 2e61 7267 7620  .    # sys.argv 
-0003e940: 6f72 6465 7269 6e67 3f20 2320 746f 646f  ordering? # todo
-0003e950: 0a20 2020 2074 7279 3a0a 2020 2020 2020  .    try:.      
-0003e960: 2020 6966 2067 732e 7061 2e6c 6f67 696e    if gs.pa.login
-0003e970: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
-0003e980: 6169 7420 6163 7469 6f6e 5f6c 6f67 696e  ait action_login
-0003e990: 2829 2020 2320 6578 706c 6963 6974 206c  ()  # explicit l
-0003e9a0: 6f67 696e 0a20 2020 2020 2020 2065 6c73  ogin.        els
-0003e9b0: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
-0003e9c0: 7761 6974 2069 6d70 6c69 6369 745f 6c6f  wait implicit_lo
-0003e9d0: 6769 6e28 290a 2020 2020 2020 2020 6966  gin().        if
-0003e9e0: 2067 732e 7061 2e76 6572 6966 793a 0a20   gs.pa.verify:. 
-0003e9f0: 2020 2020 2020 2020 2020 2061 7761 6974             await
-0003ea00: 2061 6374 696f 6e5f 7665 7269 6679 2829   action_verify()
-0003ea10: 0a20 2020 2020 2020 2020 2020 2067 732e  .            gs.
-0003ea20: 6c6f 672e 6465 6275 6728 0a20 2020 2020  log.debug(.     
-0003ea30: 2020 2020 2020 2020 2020 2022 4b65 7962             "Keyb
-0003ea40: 6f61 7264 2069 6e74 6572 7275 7074 2072  oard interrupt r
-0003ea50: 6563 6569 7665 6420 6166 7465 7220 456d  eceived after Em
-0003ea60: 6f6a 6920 7665 7269 6669 6361 7469 6f6e  oji verification
-0003ea70: 2e22 0a20 2020 2020 2020 2020 2020 2029  .".            )
-0003ea80: 0a20 2020 2020 2020 2072 6f6f 6d73 5f74  .        rooms_t
-0003ea90: 6f5f 6c6f 6e67 5f72 6f6f 6d5f 6e61 6d65  o_long_room_name
-0003eaa0: 7328 2920 2023 2063 6f6d 706c 6574 6520  s()  # complete 
-0003eab0: 726f 6f6d 206e 616d 6573 0a20 2020 2020  room names.     
-0003eac0: 2020 2069 6620 6773 2e72 6f6f 6d5f 6163     if gs.room_ac
-0003ead0: 7469 6f6e 206f 7220 6773 2e73 6574 6765  tion or gs.setge
-0003eae0: 745f 6163 7469 6f6e 3a0a 2020 2020 2020  t_action:.      
-0003eaf0: 2020 2020 2020 6177 6169 7420 6163 7469        await acti
-0003eb00: 6f6e 5f72 6f6f 6d73 6574 6765 7428 290a  on_roomsetget().
-0003eb10: 2020 2020 2020 2020 6966 2067 732e 7365          if gs.se
-0003eb20: 6e64 5f61 6374 696f 6e3a 0a20 2020 2020  nd_action:.     
-0003eb30: 2020 2020 2020 2061 7761 6974 2061 6374         await act
-0003eb40: 696f 6e5f 7365 6e64 2829 0a20 2020 2020  ion_send().     
-0003eb50: 2020 2069 6620 6773 2e70 612e 726f 6f6d     if gs.pa.room
-0003eb60: 5f69 6e76 6974 6573 2061 6e64 2067 732e  _invites and gs.
-0003eb70: 7061 2e6c 6973 7465 6e20 6e6f 7420 696e  pa.listen not in
-0003eb80: 2028 464f 5245 5645 522c 204f 4e43 4529   (FOREVER, ONCE)
-0003eb90: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
-0003eba0: 6169 7420 6c69 7374 656e 5f69 6e76 6974  ait listen_invit
-0003ebb0: 6573 5f6f 6e63 6528 6773 2e63 6c69 656e  es_once(gs.clien
-0003ebc0: 7429 0a20 2020 2020 2020 2069 6620 6773  t).        if gs
-0003ebd0: 2e6c 6973 7465 6e5f 6163 7469 6f6e 3a0a  .listen_action:.
-0003ebe0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0003ebf0: 7420 6163 7469 6f6e 5f6c 6973 7465 6e28  t action_listen(
-0003ec00: 290a 2020 2020 2020 2020 6966 2067 732e  ).        if gs.
-0003ec10: 7061 2e6c 6f67 6f75 743a 0a20 2020 2020  pa.logout:.     
-0003ec20: 2020 2020 2020 2061 7761 6974 2061 6374         await act
-0003ec30: 696f 6e5f 6c6f 676f 7574 2829 0a20 2020  ion_logout().   
-0003ec40: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0003ec50: 6e3a 0a20 2020 2020 2020 2072 6169 7365  n:.        raise
-0003ec60: 0a20 2020 2066 696e 616c 6c79 3a0a 2020  .    finally:.  
-0003ec70: 2020 2020 2020 6966 2067 732e 636c 6965        if gs.clie
-0003ec80: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
-0003ec90: 6177 6169 7420 6773 2e63 6c69 656e 742e  await gs.client.
-0003eca0: 636c 6f73 6528 290a 0a0a 6465 6620 6368  close()...def ch
-0003ecb0: 6563 6b5f 6172 675f 6669 6c65 735f 7265  eck_arg_files_re
-0003ecc0: 6164 6162 6c65 2829 202d 3e20 4e6f 6e65  adable() -> None
-0003ecd0: 3a0a 2020 2020 2222 2243 6865 636b 2069  :.    """Check i
-0003ece0: 6620 6669 6c65 7320 6672 6f6d 2063 6f6d  f files from com
-0003ecf0: 6d61 6e64 206c 696e 6520 6172 6520 7265  mand line are re
-0003ed00: 6164 6162 6c65 2e22 2222 0a20 2020 2061  adable.""".    a
-0003ed10: 7267 5f66 696c 6573 203d 2067 732e 7061  rg_files = gs.pa
-0003ed20: 2e69 6d61 6765 2069 6620 6773 2e70 612e  .image if gs.pa.
-0003ed30: 696d 6167 6520 656c 7365 205b 5d0a 2020  image else [].  
-0003ed40: 2020 6172 675f 6669 6c65 7320 2b3d 2067    arg_files += g
-0003ed50: 732e 7061 2e61 7564 696f 2069 6620 6773  s.pa.audio if gs
-0003ed60: 2e70 612e 6175 6469 6f20 656c 7365 205b  .pa.audio else [
-0003ed70: 5d0a 2020 2020 6172 675f 6669 6c65 7320  ].    arg_files 
-0003ed80: 2b3d 2067 732e 7061 2e66 696c 6520 6966  += gs.pa.file if
-0003ed90: 2067 732e 7061 2e66 696c 6520 656c 7365   gs.pa.file else
-0003eda0: 205b 5d0a 2020 2020 6172 675f 6669 6c65   [].    arg_file
-0003edb0: 7320 2b3d 2067 732e 7061 2e65 7665 6e74  s += gs.pa.event
-0003edc0: 2069 6620 6773 2e70 612e 6576 656e 7420   if gs.pa.event 
-0003edd0: 656c 7365 205b 5d0a 2020 2020 7220 3d20  else [].    r = 
-0003ede0: 5472 7565 0a20 2020 2065 7272 7478 7420  True.    errtxt 
-0003edf0: 3d20 280a 2020 2020 2020 2020 2245 3233  = (.        "E23
-0003ee00: 363a 2022 0a20 2020 2020 2020 2022 5468  6: ".        "Th
-0003ee10: 6573 6520 6669 6c65 7320 7370 6563 6966  ese files specif
-0003ee20: 6965 6420 696e 2074 6865 2063 6f6d 6d61  ied in the comma
-0003ee30: 6e64 206c 696e 6520 7765 7265 206e 6f74  nd line were not
-0003ee40: 2066 6f75 6e64 2022 0a20 2020 2020 2020   found ".       
-0003ee50: 2022 6f72 2061 7265 206e 6f74 2072 6561   "or are not rea
-0003ee60: 6461 626c 653a 2022 0a20 2020 2029 0a20  dable: ".    ). 
-0003ee70: 2020 2066 6f72 2066 6e20 696e 2061 7267     for fn in arg
-0003ee80: 5f66 696c 6573 3a0a 2020 2020 2020 2020  _files:.        
-0003ee90: 6966 2028 666e 2021 3d20 222d 2229 2061  if (fn != "-") a
-0003eea0: 6e64 206e 6f74 2028 6973 6669 6c65 2866  nd not (isfile(f
-0003eeb0: 6e29 2061 6e64 2061 6363 6573 7328 666e  n) and access(fn
-0003eec0: 2c20 525f 4f4b 2929 3a0a 2020 2020 2020  , R_OK)):.      
-0003eed0: 2020 2020 2020 6966 206e 6f74 2072 3a0a        if not r:.
-0003eee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003eef0: 6572 7274 7874 202b 3d20 222c 2022 0a20  errtxt += ", ". 
-0003ef00: 2020 2020 2020 2020 2020 2065 7272 7478             errtx
-0003ef10: 7420 2b3d 2066 2722 7b66 6e7d 2227 0a20  t += f'"{fn}"'. 
-0003ef20: 2020 2020 2020 2020 2020 2072 203d 2046             r = F
-0003ef30: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-0003ef40: 2065 7272 6669 6c65 203d 2066 6e0a 2020   errfile = fn.  
-0003ef50: 2020 6966 206e 6f74 2072 3a0a 2020 2020    if not r:.    
-0003ef60: 2020 2020 7261 6973 6520 4669 6c65 4e6f      raise FileNo
-0003ef70: 7446 6f75 6e64 4572 726f 7228 6572 726e  tFoundError(errn
-0003ef80: 6f2e 454e 4f45 4e54 2c20 6572 7274 7874  o.ENOENT, errtxt
-0003ef90: 2c20 6572 7266 696c 6529 0a0a 0a64 6566  , errfile)...def
-0003efa0: 2063 6865 636b 5f64 6f77 6e6c 6f61 645f   check_download_
-0003efb0: 6d65 6469 615f 6469 7228 2920 2d3e 204e  media_dir() -> N
-0003efc0: 6f6e 653a 0a20 2020 2022 2222 4368 6563  one:.    """Chec
-0003efd0: 6b20 6966 206d 6564 6961 2064 6f77 6e6c  k if media downl
-0003efe0: 6f61 6420 6469 7265 6374 6f72 7920 6973  oad directory is
-0003eff0: 2063 6f72 7265 6374 2e22 2222 0a20 2020   correct.""".   
-0003f000: 2069 6620 6e6f 7420 6773 2e70 612e 646f   if not gs.pa.do
-0003f010: 776e 6c6f 6164 5f6d 6564 6961 3a0a 2020  wnload_media:.  
-0003f020: 2020 2020 2020 7265 7475 726e 2020 2320        return  # 
-0003f030: 2222 3a20 7468 6174 206d 6561 6e73 206e  "": that means n
-0003f040: 6f20 646f 776e 6c6f 6164 206f 6620 6d65  o download of me
-0003f050: 6469 612c 2076 616c 6964 2076 616c 7565  dia, valid value
-0003f060: 0a20 2020 2023 206e 6f72 6d61 696c 7a65  .    # normailze
-0003f070: 6420 666f 7220 6875 6d61 6e73 0a20 2020  d for humans.   
-0003f080: 2064 6c20 3d20 6f73 2e70 6174 682e 6e6f   dl = os.path.no
-0003f090: 726d 7061 7468 2867 732e 7061 2e64 6f77  rmpath(gs.pa.dow
-0003f0a0: 6e6c 6f61 645f 6d65 6469 6129 0a20 2020  nload_media).   
-0003f0b0: 2067 732e 7061 2e64 6f77 6e6c 6f61 645f   gs.pa.download_
-0003f0c0: 6d65 6469 6120 3d20 646c 0a20 2020 2069  media = dl.    i
-0003f0d0: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
-0003f0e0: 2864 6c29 3a0a 2020 2020 2020 2020 7261  (dl):.        ra
-0003f0f0: 6973 6520 4e6f 7441 4469 7265 6374 6f72  ise NotADirector
-0003f100: 7945 7272 6f72 280a 2020 2020 2020 2020  yError(.        
-0003f110: 2020 2020 6572 726e 6f2e 454e 4f54 4449      errno.ENOTDI
-0003f120: 522c 0a20 2020 2020 2020 2020 2020 2022  R,.            "
-0003f130: 4532 3337 3a20 220a 2020 2020 2020 2020  E237: ".        
-0003f140: 2020 2020 6627 227b 646c 7d22 2063 616e      f'"{dl}" can
-0003f150: 6e6f 7420 6265 2075 7365 6420 6173 206d  not be used as m
-0003f160: 6564 6961 2064 6972 6563 746f 7279 2c20  edia directory, 
-0003f170: 6265 6361 7573 6520 270a 2020 2020 2020  because '.      
-0003f180: 2020 2020 2020 6627 227b 646c 7d22 2069        f'"{dl}" i
-0003f190: 7320 6120 6669 6c65 2e20 5370 6563 6966  s a file. Specif
-0003f1a0: 7920 6120 6469 6666 6572 656e 7420 6469  y a different di
-0003f1b0: 7265 6374 6f72 7920 666f 7220 646f 776e  rectory for down
-0003f1c0: 6c6f 6164 696e 6720 270a 2020 2020 2020  loading '.      
-0003f1d0: 2020 2020 2020 226d 6564 6961 2e22 2c0a        "media.",.
-0003f1e0: 2020 2020 2020 2020 2020 2020 646c 2c0a              dl,.
-0003f1f0: 2020 2020 2020 2020 290a 2020 2020 6966          ).    if
-0003f200: 206f 732e 7061 7468 2e69 7364 6972 2864   os.path.isdir(d
-0003f210: 6c29 3a0a 2020 2020 2020 2020 6966 206f  l):.        if o
-0003f220: 732e 6163 6365 7373 2864 6c2c 206f 732e  s.access(dl, os.
-0003f230: 575f 4f4b 293a 2020 2320 4368 6563 6b20  W_OK):  # Check 
-0003f240: 666f 7220 7772 6974 6520 6163 6365 7373  for write access
-0003f250: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003f260: 7572 6e20 2023 2061 6c6c 204f 4b0a 2020  urn  # all OK.  
-0003f270: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003f280: 2020 2020 2020 2020 7261 6973 6520 5065          raise Pe
-0003f290: 726d 6973 7369 6f6e 4572 726f 7228 0a20  rmissionError(. 
-0003f2a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003f2b0: 7272 6e6f 2e45 5045 524d 2c0a 2020 2020  rrno.EPERM,.    
-0003f2c0: 2020 2020 2020 2020 2020 2020 2245 3233              "E23
-0003f2d0: 383a 2022 0a20 2020 2020 2020 2020 2020  8: ".           
-0003f2e0: 2020 2020 2022 466f 756e 6420 616e 2065       "Found an e
-0003f2f0: 7869 7374 696e 6720 6d65 6469 6120 646f  xisting media do
-0003f300: 776e 6c6f 6164 2064 6972 6563 746f 7279  wnload directory
-0003f310: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-0003f320: 2020 2066 2722 7b64 6c7d 222e 2042 7574     f'"{dl}". But
-0003f330: 2074 6869 7320 6469 7265 6374 6f72 7920   this directory 
-0003f340: 6973 206c 6163 6b69 6e67 2077 7269 7465  is lacking write
-0003f350: 2027 0a20 2020 2020 2020 2020 2020 2020   '.             
-0003f360: 2020 2022 7065 726d 6973 7369 6f6e 732e     "permissions.
-0003f370: 2041 6464 2077 7269 7465 2070 6572 6d69   Add write permi
-0003f380: 7373 696f 6e73 2074 6f20 6974 2e22 2c0a  ssions to it.",.
-0003f390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003f3a0: 646c 2c0a 2020 2020 2020 2020 2020 2020  dl,.            
-0003f3b0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-0003f3c0: 2020 2020 2320 6e6f 7420 6120 6669 6c65      # not a file
-0003f3d0: 2c20 6e6f 7420 6120 6469 7265 6374 6f72  , not a director
-0003f3e0: 792c 2063 7265 6174 6520 6469 7265 6374  y, create direct
-0003f3f0: 6f72 790a 2020 2020 2020 2020 6d6f 6465  ory.        mode
-0003f400: 203d 2030 6f37 3737 0a20 2020 2020 2020   = 0o777.       
-0003f410: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0003f420: 2020 6f73 2e6d 6b64 6972 2864 6c2c 206d    os.mkdir(dl, m
-0003f430: 6f64 6529 0a20 2020 2020 2020 2065 7863  ode).        exc
-0003f440: 6570 7420 4f53 4572 726f 7220 6173 2065  ept OSError as e
-0003f450: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0003f460: 6973 6520 4f53 4572 726f 7228 0a20 2020  ise OSError(.   
-0003f470: 2020 2020 2020 2020 2020 2020 2065 2e65               e.e
-0003f480: 7272 6e6f 2c0a 2020 2020 2020 2020 2020  rrno,.          
-0003f490: 2020 2020 2020 2245 3233 393a 2022 0a20        "E239: ". 
-0003f4a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0003f4b0: 436f 756c 6420 6e6f 7420 6372 6561 7465  Could not create
-0003f4c0: 206d 6564 6961 2064 6f77 6e6c 6f61 6420   media download 
-0003f4d0: 6469 7265 6374 6f72 7920 220a 2020 2020  directory ".    
-0003f4e0: 2020 2020 2020 2020 2020 2020 6622 7b64              f"{d
-0003f4f0: 6c7d 2066 6f72 2079 6f75 2e20 287b 657d  l} for you. ({e}
-0003f500: 2922 2c0a 2020 2020 2020 2020 2020 2020  )",.            
-0003f510: 2020 2020 646c 2c0a 2020 2020 2020 2020      dl,.        
-0003f520: 2020 2020 290a 2020 2020 2020 2020 6773      ).        gs
-0003f530: 2e6c 6f67 2e64 6562 7567 2866 2743 7265  .log.debug(f'Cre
-0003f540: 6174 6564 206d 6564 6961 2064 6f77 6e6c  ated media downl
-0003f550: 6f61 6420 6469 7265 6374 6f72 7920 227b  oad directory "{
-0003f560: 646c 7d22 2066 6f72 2079 6f75 2e27 290a  dl}" for you.').
-0003f570: 0a0a 6465 6620 6368 6563 6b5f 7665 7273  ..def check_vers
-0003f580: 696f 6e28 2920 2d3e 204e 6f6e 653a 0a20  ion() -> None:. 
-0003f590: 2020 2022 2222 4368 6563 6b20 6966 206c     """Check if l
-0003f5a0: 6174 6573 7420 7665 7273 696f 6e2e 2222  atest version.""
-0003f5b0: 220a 2020 2020 706b 6720 3d20 5052 4f47  ".    pkg = PROG
-0003f5c0: 5f57 4954 484f 5554 5f45 5854 0a20 2020  _WITHOUT_EXT.   
-0003f5d0: 2076 6572 203d 2056 4552 5349 4f4e 4e52   ver = VERSIONNR
-0003f5e0: 2020 2320 6465 6661 756c 742c 2066 616c    # default, fal
-0003f5f0: 6c62 6163 6b0a 2020 2020 7472 793a 0a20  lback.    try:. 
-0003f600: 2020 2020 2020 2076 6572 203d 2070 6b67         ver = pkg
-0003f610: 5f72 6573 6f75 7263 6573 2e67 6574 5f64  _resources.get_d
-0003f620: 6973 7472 6962 7574 696f 6e28 706b 6729  istribution(pkg)
-0003f630: 2e76 6572 7369 6f6e 0a20 2020 2065 7863  .version.    exc
-0003f640: 6570 7420 4578 6365 7074 696f 6e3a 0a20  ept Exception:. 
-0003f650: 2020 2020 2020 2070 6173 7320 2023 2069         pass  # i
-0003f660: 6620 696e 7374 616c 6c65 6420 7669 6120  f installed via 
-0003f670: 6769 7420 636c 6f6e 652c 2070 6163 6b61  git clone, packa
-0003f680: 6765 2077 696c 6c20 6e6f 7420 6578 6973  ge will not exis
-0003f690: 7473 0a0a 2020 2020 696e 7374 616c 6c65  ts..    installe
-0003f6a0: 645f 7665 7273 696f 6e20 3d20 4c6f 6f73  d_version = Loos
-0003f6b0: 6556 6572 7369 6f6e 2876 6572 290a 2020  eVersion(ver).  
-0003f6c0: 2020 2320 6665 7463 6820 7061 636b 6167    # fetch packag
-0003f6d0: 6520 6d65 7461 6461 7461 2066 726f 6d20  e metadata from 
-0003f6e0: 5079 5049 0a20 2020 2070 7970 695f 7572  PyPI.    pypi_ur
-0003f6f0: 6c20 3d20 6622 6874 7470 733a 2f2f 7079  l = f"https://py
-0003f700: 7069 2e6f 7267 2f70 7970 692f 7b70 6b67  pi.org/pypi/{pkg
-0003f710: 7d2f 6a73 6f6e 220a 2020 2020 7265 7370  }/json".    resp
-0003f720: 6f6e 7365 203d 2075 726c 6c69 622e 7265  onse = urllib.re
-0003f730: 7175 6573 742e 7572 6c6f 7065 6e28 7079  quest.urlopen(py
-0003f740: 7069 5f75 726c 292e 7265 6164 2829 2e64  pi_url).read().d
-0003f750: 6563 6f64 6528 290a 2020 2020 6c61 7465  ecode().    late
-0003f760: 7374 5f76 6572 7369 6f6e 203d 206d 6178  st_version = max
-0003f770: 280a 2020 2020 2020 2020 4c6f 6f73 6556  (.        LooseV
-0003f780: 6572 7369 6f6e 2873 2920 666f 7220 7320  ersion(s) for s 
-0003f790: 696e 206a 736f 6e2e 6c6f 6164 7328 7265  in json.loads(re
-0003f7a0: 7370 6f6e 7365 295b 2272 656c 6561 7365  sponse)["release
-0003f7b0: 7322 5d2e 6b65 7973 2829 0a20 2020 2029  s"].keys().    )
-0003f7c0: 0a20 2020 2069 6620 696e 7374 616c 6c65  .    if installe
-0003f7d0: 645f 7665 7273 696f 6e20 3e3d 206c 6174  d_version >= lat
-0003f7e0: 6573 745f 7665 7273 696f 6e3a 0a20 2020  est_version:.   
-0003f7f0: 2020 2020 2075 7464 203d 2022 596f 7520       utd = "You 
-0003f800: 6172 6520 7570 2d74 6f2d 6461 7465 2122  are up-to-date!"
-0003f810: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0003f820: 2020 2075 7464 203d 2022 436f 6e73 6964     utd = "Consid
-0003f830: 6572 2075 7064 6174 696e 6721 220a 2020  er updating!".  
-0003f840: 2020 7665 7273 696f 6e5f 696e 666f 203d    version_info =
-0003f850: 2028 0a20 2020 2020 2020 2066 2270 6163   (.        f"pac
-0003f860: 6b61 6765 3a20 7b70 6b67 7d2c 2069 6e73  kage: {pkg}, ins
-0003f870: 7461 6c6c 6564 3a20 7b69 6e73 7461 6c6c  talled: {install
-0003f880: 6564 5f76 6572 7369 6f6e 7d2c 2022 0a20  ed_version}, ". 
-0003f890: 2020 2020 2020 2066 226c 6174 6573 743a         f"latest:
-0003f8a0: 207b 6c61 7465 7374 5f76 6572 7369 6f6e   {latest_version
-0003f8b0: 7d20 3d3d 3e20 7b75 7464 7d22 0a20 2020  } ==> {utd}".   
-0003f8c0: 2029 0a20 2020 2067 732e 6c6f 672e 6465   ).    gs.log.de
-0003f8d0: 6275 6728 7665 7273 696f 6e5f 696e 666f  bug(version_info
-0003f8e0: 290a 2020 2020 2320 6f75 7470 7574 2066  ).    # output f
-0003f8f0: 6f72 6d61 7420 636f 6e74 726f 6c6c 6564  ormat controlled
-0003f900: 2076 6961 202d 2d6f 7574 7075 7420 666c   via --output fl
-0003f910: 6167 0a20 2020 2074 6578 7420 3d20 7665  ag.    text = ve
-0003f920: 7273 696f 6e5f 696e 666f 0a20 2020 206a  rsion_info.    j
-0003f930: 736f 6e5f 6d61 7820 3d20 7b0a 2020 2020  son_max = {.    
-0003f940: 2020 2020 2270 6163 6b61 6765 223a 2066      "package": f
-0003f950: 227b 706b 677d 222c 0a20 2020 2020 2020  "{pkg}",.       
-0003f960: 2022 7665 7273 696f 6e5f 696e 7374 616c   "version_instal
-0003f970: 6c65 6422 3a20 6622 7b69 6e73 7461 6c6c  led": f"{install
-0003f980: 6564 5f76 6572 7369 6f6e 7d22 2c0a 2020  ed_version}",.  
-0003f990: 2020 2020 2020 2276 6572 7369 6f6e 5f6c        "version_l
-0003f9a0: 6174 6573 7422 3a20 6622 7b6c 6174 6573  atest": f"{lates
-0003f9b0: 745f 7665 7273 696f 6e7d 222c 0a20 2020  t_version}",.   
-0003f9c0: 2020 2020 2022 636f 6d6d 656e 7422 3a20       "comment": 
-0003f9d0: 6622 7b75 7464 7d22 2c0a 2020 2020 7d0a  f"{utd}",.    }.
-0003f9e0: 2020 2020 2320 6a73 6f6e 5f6d 6178 2e75      # json_max.u
-0003f9f0: 7064 6174 6528 7b22 6b65 7922 3a20 7661  pdate({"key": va
-0003fa00: 6c75 657d 2920 2023 2061 6464 2064 6963  lue})  # add dic
-0003fa10: 7420 6974 656d 730a 2020 2020 6a73 6f6e  t items.    json
-0003fa20: 5f20 3d20 6a73 6f6e 5f6d 6178 2e63 6f70  _ = json_max.cop
-0003fa30: 7928 290a 2020 2020 2320 6a73 6f6e 5f2e  y().    # json_.
-0003fa40: 706f 7028 226b 6579 2229 0a20 2020 206a  pop("key").    j
-0003fa50: 736f 6e5f 7370 6563 203d 204e 6f6e 650a  son_spec = None.
-0003fa60: 2020 2020 7072 696e 745f 6f75 7470 7574      print_output
-0003fa70: 280a 2020 2020 2020 2020 6773 2e70 612e  (.        gs.pa.
-0003fa80: 6f75 7470 7574 2c0a 2020 2020 2020 2020  output,.        
-0003fa90: 7465 7874 3d74 6578 742c 0a20 2020 2020  text=text,.     
-0003faa0: 2020 206a 736f 6e5f 3d6a 736f 6e5f 2c0a     json_=json_,.
-0003fab0: 2020 2020 2020 2020 6a73 6f6e 5f6d 6178          json_max
-0003fac0: 3d6a 736f 6e5f 6d61 782c 0a20 2020 2020  =json_max,.     
-0003fad0: 2020 206a 736f 6e5f 7370 6563 3d6a 736f     json_spec=jso
-0003fae0: 6e5f 7370 6563 2c0a 2020 2020 290a 0a0a  n_spec,.    )...
-0003faf0: 6465 6620 7665 7273 696f 6e28 2920 2d3e  def version() ->
-0003fb00: 204e 6f6e 653a 0a20 2020 2022 2222 5072   None:.    """Pr
-0003fb10: 696e 7420 7665 7273 696f 6e20 696e 666f  int version info
-0003fb20: 2e22 2222 0a20 2020 206e 696f 5f76 6572  .""".    nio_ver
-0003fb30: 7369 6f6e 203d 2070 6b67 5f72 6573 6f75  sion = pkg_resou
-0003fb40: 7263 6573 2e67 6574 5f64 6973 7472 6962  rces.get_distrib
-0003fb50: 7574 696f 6e28 226d 6174 7269 782d 6e69  ution("matrix-ni
-0003fb60: 6f22 292e 7665 7273 696f 6e0a 2020 2020  o").version.    
-0003fb70: 7079 7468 6f6e 5f76 6572 7369 6f6e 203d  python_version =
-0003fb80: 2073 7973 2e76 6572 7369 6f6e 0a20 2020   sys.version.   
-0003fb90: 2070 7974 686f 6e5f 7665 7273 696f 6e5f   python_version_
-0003fba0: 6e72 203d 2028 0a20 2020 2020 2020 2073  nr = (.        s
-0003fbb0: 7472 2873 7973 2e76 6572 7369 6f6e 5f69  tr(sys.version_i
-0003fbc0: 6e66 6f2e 6d61 6a6f 7229 0a20 2020 2020  nfo.major).     
-0003fbd0: 2020 202b 2022 2e22 0a20 2020 2020 2020     + ".".       
-0003fbe0: 202b 2073 7472 2873 7973 2e76 6572 7369   + str(sys.versi
-0003fbf0: 6f6e 5f69 6e66 6f2e 6d69 6e6f 7229 0a20  on_info.minor). 
-0003fc00: 2020 2020 2020 202b 2022 2e22 0a20 2020         + ".".   
-0003fc10: 2020 2020 202b 2073 7472 2873 7973 2e76       + str(sys.v
-0003fc20: 6572 7369 6f6e 5f69 6e66 6f2e 6d69 6372  ersion_info.micr
-0003fc30: 6f29 0a20 2020 2029 0a20 2020 2076 6572  o).    ).    ver
-0003fc40: 7369 6f6e 5f69 6e66 6f20 3d20 280a 2020  sion_info = (.  
-0003fc50: 2020 2020 2020 225c 6e22 0a20 2020 2020        "\n".     
-0003fc60: 2020 2066 2220 205f 7c20 2020 2020 205f     f"  _|      _
-0003fc70: 7c20 2020 2020 205f 7c5f 7c5f 7c20 2020  |      _|_|_|   
-0003fc80: 205f 7c20 2020 2020 2020 7b50 524f 475f   _|       {PROG_
-0003fc90: 5749 5448 4f55 545f 4558 547d 3a20 220a  WITHOUT_EXT}: ".
-0003fca0: 2020 2020 2020 2020 6622 7b56 4552 5349          f"{VERSI
-0003fcb0: 4f4e 4e52 7d20 7b56 4552 5349 4f4e 7d5c  ONNR} {VERSION}\
-0003fcc0: 6e22 0a20 2020 2020 2020 2022 2020 5f7c  n".        "  _|
-0003fcd0: 5f7c 2020 5f7c 5f7c 2020 2020 5f7c 2020  _|  _|_|    _|  
-0003fce0: 2020 2020 2020 2020 2020 5f7c 2020 2020            _|    
-0003fcf0: 2061 204d 6174 7269 7820 434c 4920 636c   a Matrix CLI cl
-0003fd00: 6965 6e74 5c6e 220a 2020 2020 2020 2020  ient\n".        
-0003fd10: 2220 205f 7c20 205f 7c20 205f 7c20 2020  "  _|  _|  _|   
-0003fd20: 205f 7c20 2020 2020 2020 2020 2020 2020   _|             
-0003fd30: 205f 7c20 2020 656e 6a6f 7920 616e 6420   _|   enjoy and 
-0003fd40: 7375 626d 6974 2050 5273 5c6e 220a 2020  submit PRs\n".  
-0003fd50: 2020 2020 2020 6622 2020 5f7c 2020 2020        f"  _|    
-0003fd60: 2020 5f7c 2020 2020 5f7c 2020 2020 2020    _|    _|      
-0003fd70: 2020 2020 2020 5f7c 2020 2020 206d 6174        _|     mat
-0003fd80: 7269 782d 6e69 6f3a 207b 6e69 6f5f 7665  rix-nio: {nio_ve
-0003fd90: 7273 696f 6e7d 5c6e 220a 2020 2020 2020  rsion}\n".      
-0003fda0: 2020 6622 2020 5f7c 2020 2020 2020 5f7c    f"  _|      _|
-0003fdb0: 2020 2020 2020 5f7c 5f7c 5f7c 2020 2020        _|_|_|    
-0003fdc0: 5f7c 2020 2020 2020 2050 7974 686f 6e3a  _|       Python:
-0003fdd0: 207b 7079 7468 6f6e 5f76 6572 7369 6f6e   {python_version
-0003fde0: 5f6e 727d 5c6e 220a 2020 2020 2020 2020  _nr}\n".        
-0003fdf0: 225c 6e22 0a20 2020 2029 0a20 2020 2067  "\n".    ).    g
-0003fe00: 732e 6c6f 672e 6465 6275 6728 7665 7273  s.log.debug(vers
-0003fe10: 696f 6e5f 696e 666f 290a 2020 2020 2320  ion_info).    # 
-0003fe20: 6f75 7470 7574 2066 6f72 6d61 7420 636f  output format co
-0003fe30: 6e74 726f 6c6c 6564 2076 6961 202d 2d6f  ntrolled via --o
-0003fe40: 7574 7075 7420 666c 6167 0a20 2020 2074  utput flag.    t
-0003fe50: 6578 7420 3d20 7665 7273 696f 6e5f 696e  ext = version_in
-0003fe60: 666f 0a20 2020 206a 736f 6e5f 6d61 7820  fo.    json_max 
-0003fe70: 3d20 7b0a 2020 2020 2020 2020 6622 7b50  = {.        f"{P
-0003fe80: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
-0003fe90: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
-0003fea0: 2022 7665 7273 696f 6e22 3a20 6622 7b56   "version": f"{V
-0003feb0: 4552 5349 4f4e 4e52 7d22 2c0a 2020 2020  ERSIONNR}",.    
-0003fec0: 2020 2020 2020 2020 2264 6174 6522 3a20          "date": 
-0003fed0: 6622 7b56 4552 5349 4f4e 7d22 2c0a 2020  f"{VERSION}",.  
-0003fee0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-0003fef0: 2022 6d61 7472 6978 2d6e 696f 223a 207b   "matrix-nio": {
-0003ff00: 0a20 2020 2020 2020 2020 2020 2022 7665  .            "ve
-0003ff10: 7273 696f 6e22 3a20 6622 7b6e 696f 5f76  rsion": f"{nio_v
-0003ff20: 6572 7369 6f6e 7d22 2c0a 2020 2020 2020  ersion}",.      
-0003ff30: 2020 7d2c 0a20 2020 2020 2020 2022 7079    },.        "py
-0003ff40: 7468 6f6e 223a 207b 0a20 2020 2020 2020  thon": {.       
-0003ff50: 2020 2020 2022 7665 7273 696f 6e22 3a20       "version": 
-0003ff60: 6622 7b70 7974 686f 6e5f 7665 7273 696f  f"{python_versio
-0003ff70: 6e5f 6e72 7d22 2c0a 2020 2020 2020 2020  n_nr}",.        
-0003ff80: 2020 2020 2269 6e66 6f22 3a20 6622 7b70      "info": f"{p
-0003ff90: 7974 686f 6e5f 7665 7273 696f 6e7d 222c  ython_version}",
-0003ffa0: 0a20 2020 2020 2020 207d 2c0a 2020 2020  .        },.    
-0003ffb0: 7d0a 2020 2020 2320 6a73 6f6e 5f6d 6178  }.    # json_max
-0003ffc0: 2e75 7064 6174 6528 7b22 6b65 7922 3a20  .update({"key": 
-0003ffd0: 7661 6c75 657d 2920 2023 2061 6464 2064  value})  # add d
-0003ffe0: 6963 7420 6974 656d 730a 2020 2020 6a73  ict items.    js
-0003fff0: 6f6e 5f20 3d20 6a73 6f6e 5f6d 6178 2e63  on_ = json_max.c
-00040000: 6f70 7928 290a 2020 2020 2320 6a73 6f6e  opy().    # json
-00040010: 5f2e 706f 7028 226b 6579 2229 0a20 2020  _.pop("key").   
-00040020: 206a 736f 6e5f 7370 6563 203d 204e 6f6e   json_spec = Non
-00040030: 650a 2020 2020 7072 696e 745f 6f75 7470  e.    print_outp
-00040040: 7574 280a 2020 2020 2020 2020 6773 2e70  ut(.        gs.p
-00040050: 612e 6f75 7470 7574 2c0a 2020 2020 2020  a.output,.      
-00040060: 2020 7465 7874 3d74 6578 742c 0a20 2020    text=text,.   
-00040070: 2020 2020 206a 736f 6e5f 3d6a 736f 6e5f       json_=json_
-00040080: 2c0a 2020 2020 2020 2020 6a73 6f6e 5f6d  ,.        json_m
-00040090: 6178 3d6a 736f 6e5f 6d61 782c 0a20 2020  ax=json_max,.   
-000400a0: 2020 2020 206a 736f 6e5f 7370 6563 3d6a       json_spec=j
-000400b0: 736f 6e5f 7370 6563 2c0a 2020 2020 290a  son_spec,.    ).
-000400c0: 0a0a 6465 6620 696e 6974 6961 6c5f 6368  ..def initial_ch
-000400d0: 6563 6b5f 6f66 5f6c 6f67 5f61 7267 7328  eck_of_log_args(
-000400e0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
-000400f0: 2222 4368 6563 6b20 6c6f 6767 696e 6720  ""Check logging 
-00040100: 7265 6c61 7465 6420 6172 6775 6d65 6e74  related argument
-00040110: 732e 0a0a 2020 2020 4172 6775 6d65 6e74  s...    Argument
-00040120: 733a 0a20 2020 202d 2d2d 2d2d 2d2d 2d2d  s:.    ---------
-00040130: 0a20 2020 204e 6f6e 650a 0a20 2020 2052  .    None..    R
-00040140: 6574 7572 6e73 3a20 4e6f 6e65 0a0a 2020  eturns: None..  
-00040150: 2020 5261 6973 6573 2065 7863 6570 7469    Raises excepti
-00040160: 6f6e 206f 6e20 6572 726f 722e 0a20 2020  on on error..   
-00040170: 2022 2222 0a20 2020 2069 6620 6e6f 7420   """.    if not 
-00040180: 6773 2e70 612e 6c6f 675f 6c65 7665 6c3a  gs.pa.log_level:
-00040190: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000401a0: 2023 2061 6c6c 204f 4b0a 2020 2020 666f   # all OK.    fo
-000401b0: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
-000401c0: 2867 732e 7061 2e6c 6f67 5f6c 6576 656c  (gs.pa.log_level
-000401d0: 2929 3a0a 2020 2020 2020 2020 7570 203d  )):.        up =
-000401e0: 2067 732e 7061 2e6c 6f67 5f6c 6576 656c   gs.pa.log_level
-000401f0: 5b69 5d2e 7570 7065 7228 290a 2020 2020  [i].upper().    
-00040200: 2020 2020 6773 2e70 612e 6c6f 675f 6c65      gs.pa.log_le
-00040210: 7665 6c5b 695d 203d 2075 700a 2020 2020  vel[i] = up.    
-00040220: 2020 2020 6966 2075 7020 6e6f 7420 696e      if up not in
-00040230: 205b 2244 4542 5547 222c 2022 494e 464f   ["DEBUG", "INFO
-00040240: 222c 2022 5741 524e 494e 4722 2c20 2245  ", "WARNING", "E
-00040250: 5252 4f52 222c 2022 4352 4954 4943 414c  RROR", "CRITICAL
-00040260: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
-00040270: 2320 6773 2e65 7272 5f63 6f75 6e74 202b  # gs.err_count +
-00040280: 3d20 3120 2023 2077 726f 6e67 0a20 2020  = 1  # wrong.   
-00040290: 2020 2020 2020 2020 2072 6169 7365 204d           raise M
-000402a0: 6174 7269 7843 6f6d 6d61 6e64 6572 4572  atrixCommanderEr
-000402b0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-000402c0: 2020 2020 2022 4532 3431 3a20 220a 2020       "E241: ".  
-000402d0: 2020 2020 2020 2020 2020 2020 2020 272d                '-
-000402e0: 2d6c 6f67 2d6c 6576 656c 206f 6e6c 7920  -log-level only 
-000402f0: 616c 6c6f 7773 2076 616c 7565 7320 2244  allows values "D
-00040300: 4542 5547 222c 2022 494e 464f 222c 2022  EBUG", "INFO", "
-00040310: 5741 524e 494e 4722 2c20 270a 2020 2020  WARNING", '.    
-00040320: 2020 2020 2020 2020 2020 2020 2722 4552              '"ER
-00040330: 524f 5222 2c20 6f72 2022 4352 4954 4943  ROR", or "CRITIC
-00040340: 414c 222e 202d 2d6c 6f67 2d6c 6576 656c  AL". --log-level
-00040350: 2061 7267 756d 656e 7420 696e 636f 7272   argument incorr
-00040360: 6563 742e 2027 0a20 2020 2020 2020 2020  ect. '.         
-00040370: 2020 2020 2020 2066 2228 7b75 707d 2922         f"({up})"
-00040380: 0a20 2020 2020 2020 2020 2020 2029 2066  .            ) f
-00040390: 726f 6d20 4e6f 6e65 0a0a 0a23 2061 6363  rom None...# acc
-000403a0: 6f72 6469 6e67 2074 6f20 7079 6c61 6d61  ording to pylama
-000403b0: 3a20 6675 6e63 7469 6f6e 2074 6f6f 2063  : function too c
-000403c0: 6f6d 706c 6578 3a20 4339 3031 2023 206e  omplex: C901 # n
-000403d0: 6f71 613a 2043 3930 310a 6465 6620 696e  oqa: C901.def in
-000403e0: 6974 6961 6c5f 6368 6563 6b5f 6f66 5f61  itial_check_of_a
-000403f0: 7267 7328 2920 2d3e 204e 6f6e 653a 2020  rgs() -> None:  
-00040400: 2320 6e6f 7161 3a20 4339 3031 0a20 2020  # noqa: C901.   
-00040410: 2022 2222 4368 6563 6b20 6172 6775 6d65   """Check argume
-00040420: 6e74 732e 2222 220a 2020 2020 2320 4669  nts.""".    # Fi
-00040430: 7273 742c 2074 6865 2061 646a 7573 746d  rst, the adjustm
-00040440: 656e 7473 0a20 2020 2069 6620 6e6f 7420  ents.    if not 
-00040450: 6773 2e70 612e 656e 6372 7970 7465 643a  gs.pa.encrypted:
-00040460: 0a20 2020 2020 2020 2067 732e 7061 2e65  .        gs.pa.e
-00040470: 6e63 7279 7074 6564 203d 2054 7275 6520  ncrypted = True 
-00040480: 2023 2066 6f72 6365 2069 7420 6f6e 0a20   # force it on. 
-00040490: 2020 2020 2020 2067 732e 6c6f 672e 6465         gs.log.de
-000404a0: 6275 6728 0a20 2020 2020 2020 2020 2020  bug(.           
-000404b0: 2022 456e 6372 7970 7469 6f6e 2069 7320   "Encryption is 
-000404c0: 616c 7761 7973 2065 6e61 626c 6564 2e20  always enabled. 
-000404d0: 4974 2063 616e 6e6f 7420 6265 2074 7572  It cannot be tur
-000404e0: 6e65 6420 6f66 662e 2022 0a20 2020 2020  ned off. ".     
-000404f0: 2020 2020 2020 2022 5573 6520 2d2d 7461         "Use --ta
-00040500: 696c 2074 6f20 6469 7361 626c 6520 6974  il to disable it
-00040510: 2066 6f72 2073 7065 6369 6669 6320 7573   for specific us
-00040520: 6520 6361 7365 732e 220a 2020 2020 2020  e cases.".      
-00040530: 2020 290a 2020 2020 6966 206e 6f74 2067    ).    if not g
-00040540: 732e 7061 2e65 6e63 7279 7074 6564 3a20  s.pa.encrypted: 
-00040550: 2023 206a 7573 7420 696e 2063 6173 6520   # just in case 
-00040560: 7765 2065 7665 7220 676f 2062 6163 6b20  we ever go back 
-00040570: 6469 7361 626c 696e 6720 6532 650a 2020  disabling e2e.  
-00040580: 2020 2020 2020 6773 2e70 612e 7374 6f72        gs.pa.stor
-00040590: 6520 3d20 4e6f 6e65 0a20 2020 2069 6620  e = None.    if 
-000405a0: 6773 2e70 612e 6c69 7374 656e 3a0a 2020  gs.pa.listen:.  
-000405b0: 2020 2020 2020 6773 2e70 612e 6c69 7374        gs.pa.list
-000405c0: 656e 203d 2067 732e 7061 2e6c 6973 7465  en = gs.pa.liste
-000405d0: 6e2e 6c6f 7765 7228 290a 2020 2020 6966  n.lower().    if
-000405e0: 2067 732e 7061 2e6c 6973 7465 6e20 3d3d   gs.pa.listen ==
-000405f0: 204e 4556 4552 2061 6e64 2067 732e 7061   NEVER and gs.pa
-00040600: 2e74 6169 6c20 213d 2030 3a0a 2020 2020  .tail != 0:.    
-00040610: 2020 2020 6773 2e70 612e 6c69 7374 656e      gs.pa.listen
-00040620: 203d 2054 4149 4c20 2023 202d 2d74 6169   = TAIL  # --tai
-00040630: 6c20 7475 726e 7320 6f6e 202d 2d6c 6973  l turns on --lis
-00040640: 7465 6e20 5441 494c 0a20 2020 2020 2020  ten TAIL.       
-00040650: 2067 732e 6c6f 672e 6465 6275 6728 272d   gs.log.debug('-
-00040660: 2d6c 6973 7465 6e20 7365 7420 746f 2022  -listen set to "
-00040670: 7461 696c 2220 6265 6361 7573 6520 222d  tail" because "-
-00040680: 2d74 6169 6c22 2069 7320 7573 6564 2e27  -tail" is used.'
-00040690: 290a 2020 2020 6966 2067 732e 7061 2e73  ).    if gs.pa.s
-000406a0: 796e 6320 6973 206e 6f74 204e 6f6e 653a  ync is not None:
-000406b0: 0a20 2020 2020 2020 2067 732e 7061 2e73  .        gs.pa.s
-000406c0: 796e 6320 3d20 6773 2e70 612e 7379 6e63  ync = gs.pa.sync
-000406d0: 2e6c 6f77 6572 2829 0a20 2020 2069 6620  .lower().    if 
-000406e0: 6773 2e70 612e 6f75 7470 7574 2069 7320  gs.pa.output is 
-000406f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00040700: 2020 6773 2e70 612e 6f75 7470 7574 203d    gs.pa.output =
-00040710: 2067 732e 7061 2e6f 7574 7075 742e 6c6f   gs.pa.output.lo
-00040720: 7765 7228 290a 2020 2020 6966 2067 732e  wer().    if gs.
-00040730: 7061 2e64 6f77 6e6c 6f61 645f 6d65 6469  pa.download_medi
-00040740: 615f 6e61 6d65 2069 7320 6e6f 7420 4e6f  a_name is not No
-00040750: 6e65 3a0a 2020 2020 2020 2020 6773 2e70  ne:.        gs.p
-00040760: 612e 646f 776e 6c6f 6164 5f6d 6564 6961  a.download_media
-00040770: 5f6e 616d 6520 3d20 6773 2e70 612e 646f  _name = gs.pa.do
-00040780: 776e 6c6f 6164 5f6d 6564 6961 5f6e 616d  wnload_media_nam
-00040790: 652e 6c6f 7765 7228 290a 2020 2020 6966  e.lower().    if
-000407a0: 2067 732e 7061 2e72 6f6f 6d5f 696e 7669   gs.pa.room_invi
-000407b0: 7465 733a 0a20 2020 2020 2020 2067 732e  tes:.        gs.
-000407c0: 7061 2e72 6f6f 6d5f 696e 7669 7465 7320  pa.room_invites 
-000407d0: 3d20 6773 2e70 612e 726f 6f6d 5f69 6e76  = gs.pa.room_inv
-000407e0: 6974 6573 2e6c 6f77 6572 2829 0a0a 2020  ites.lower()..  
-000407f0: 2020 6966 2028 0a20 2020 2020 2020 2067    if (.        g
-00040800: 732e 7061 2e6d 6573 7361 6765 0a20 2020  s.pa.message.   
-00040810: 2020 2020 206f 7220 6773 2e70 612e 696d       or gs.pa.im
-00040820: 6167 650a 2020 2020 2020 2020 6f72 2067  age.        or g
-00040830: 732e 7061 2e61 7564 696f 0a20 2020 2020  s.pa.audio.     
-00040840: 2020 206f 7220 6773 2e70 612e 6669 6c65     or gs.pa.file
-00040850: 0a20 2020 2020 2020 206f 7220 6773 2e70  .        or gs.p
-00040860: 612e 6576 656e 740a 2020 2020 293a 0a20  a.event.    ):. 
-00040870: 2020 2020 2020 2067 732e 7365 6e64 5f61         gs.send_a
-00040880: 6374 696f 6e20 3d20 5472 7565 0a20 2020  ction = True.   
-00040890: 2065 6c73 653a 0a20 2020 2020 2020 2067   else:.        g
-000408a0: 732e 7365 6e64 5f61 6374 696f 6e20 3d20  s.send_action = 
-000408b0: 4661 6c73 650a 0a20 2020 2069 6620 6773  False..    if gs
-000408c0: 2e70 612e 6c69 7374 656e 2069 6e20 2846  .pa.listen in (F
-000408d0: 4f52 4556 4552 2c20 4f4e 4345 2c20 5441  OREVER, ONCE, TA
-000408e0: 494c 2c20 414c 4c29 3a0a 2020 2020 2020  IL, ALL):.      
-000408f0: 2020 6773 2e6c 6973 7465 6e5f 6163 7469    gs.listen_acti
-00040900: 6f6e 203d 2054 7275 650a 2020 2020 656c  on = True.    el
-00040910: 7365 3a0a 2020 2020 2020 2020 6773 2e6c  se:.        gs.l
-00040920: 6973 7465 6e5f 6163 7469 6f6e 203d 2046  isten_action = F
-00040930: 616c 7365 0a0a 2020 2020 6966 2028 0a20  alse..    if (. 
-00040940: 2020 2020 2020 2023 2072 6f6f 6d20 7365         # room se
-00040950: 740a 2020 2020 2020 2020 6773 2e70 612e  t.        gs.pa.
-00040960: 726f 6f6d 5f63 7265 6174 650a 2020 2020  room_create.    
-00040970: 2020 2020 6f72 2067 732e 7061 2e72 6f6f      or gs.pa.roo
-00040980: 6d5f 646d 5f63 7265 6174 650a 2020 2020  m_dm_create.    
-00040990: 2020 2020 6f72 2067 732e 7061 2e72 6f6f      or gs.pa.roo
-000409a0: 6d5f 6a6f 696e 0a20 2020 2020 2020 206f  m_join.        o
-000409b0: 7220 6773 2e70 612e 726f 6f6d 5f6c 6561  r gs.pa.room_lea
-000409c0: 7665 0a20 2020 2020 2020 206f 7220 6773  ve.        or gs
-000409d0: 2e70 612e 726f 6f6d 5f66 6f72 6765 740a  .pa.room_forget.
-000409e0: 2020 2020 2020 2020 6f72 2067 732e 7061          or gs.pa
-000409f0: 2e72 6f6f 6d5f 696e 7669 7465 0a20 2020  .room_invite.   
-00040a00: 2020 2020 206f 7220 6773 2e70 612e 726f       or gs.pa.ro
-00040a10: 6f6d 5f62 616e 0a20 2020 2020 2020 206f  om_ban.        o
-00040a20: 7220 6773 2e70 612e 726f 6f6d 5f75 6e62  r gs.pa.room_unb
-00040a30: 616e 0a20 2020 2020 2020 206f 7220 6773  an.        or gs
-00040a40: 2e70 612e 726f 6f6d 5f6b 6963 6b0a 2020  .pa.room_kick.  
-00040a50: 2020 2020 2020 6f72 2067 732e 7061 2e72        or gs.pa.r
-00040a60: 6f6f 6d5f 7265 6461 6374 0a20 2020 2020  oom_redact.     
-00040a70: 2020 206f 7220 6773 2e70 612e 726f 6f6d     or gs.pa.room
-00040a80: 5f73 6574 5f61 6c69 6173 0a20 2020 2020  _set_alias.     
-00040a90: 2020 206f 7220 6773 2e70 612e 726f 6f6d     or gs.pa.room
-00040aa0: 5f64 656c 6574 655f 616c 6961 730a 2020  _delete_alias.  
-00040ab0: 2020 2020 2020 2320 726f 6f6d 2067 6574        # room get
-00040ac0: 0a20 2020 2020 2020 206f 7220 6773 2e70  .        or gs.p
-00040ad0: 612e 726f 6f6d 5f67 6574 5f76 6973 6962  a.room_get_visib
-00040ae0: 696c 6974 7920 6973 206e 6f74 204e 6f6e  ility is not Non
-00040af0: 6520 2023 2065 6d70 7479 206c 6973 7420  e  # empty list 
-00040b00: 6d75 7374 2069 6e76 6f6b 6520 6675 6e63  must invoke func
-00040b10: 0a20 2020 2020 2020 206f 7220 6773 2e70  .        or gs.p
-00040b20: 612e 726f 6f6d 5f67 6574 5f73 7461 7465  a.room_get_state
-00040b30: 2069 7320 6e6f 7420 4e6f 6e65 2020 2320   is not None  # 
-00040b40: 656d 7074 7920 6c69 7374 206d 7573 7420  empty list must 
-00040b50: 696e 766f 6b65 2066 756e 630a 2020 2020  invoke func.    
-00040b60: 2020 2020 6f72 2067 732e 7061 2e72 6f6f      or gs.pa.roo
-00040b70: 6d5f 7265 736f 6c76 655f 616c 6961 730a  m_resolve_alias.
-00040b80: 2020 2020 293a 0a20 2020 2020 2020 2067      ):.        g
-00040b90: 732e 726f 6f6d 5f61 6374 696f 6e20 3d20  s.room_action = 
-00040ba0: 5472 7565 0a20 2020 2065 6c73 653a 0a20  True.    else:. 
-00040bb0: 2020 2020 2020 2067 732e 726f 6f6d 5f61         gs.room_a
-00040bc0: 6374 696f 6e20 3d20 4661 6c73 650a 0a20  ction = False.. 
-00040bd0: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
-00040be0: 6773 2e70 612e 7365 745f 6465 7669 6365  gs.pa.set_device
-00040bf0: 5f6e 616d 6520 2023 2073 6574 0a20 2020  _name  # set.   
-00040c00: 2020 2020 206f 7220 6773 2e70 612e 7365       or gs.pa.se
-00040c10: 745f 6469 7370 6c61 795f 6e61 6d65 0a20  t_display_name. 
-00040c20: 2020 2020 2020 206f 7220 6773 2e70 612e         or gs.pa.
-00040c30: 7365 745f 7072 6573 656e 6365 0a20 2020  set_presence.   
-00040c40: 2020 2020 206f 7220 6773 2e70 612e 7570       or gs.pa.up
-00040c50: 6c6f 6164 0a20 2020 2020 2020 206f 7220  load.        or 
-00040c60: 6773 2e70 612e 6465 6c65 7465 5f6d 7863  gs.pa.delete_mxc
-00040c70: 0a20 2020 2020 2020 206f 7220 6773 2e70  .        or gs.p
-00040c80: 612e 6465 6c65 7465 5f6d 7863 5f62 6566  a.delete_mxc_bef
-00040c90: 6f72 650a 2020 2020 2020 2020 6f72 2067  ore.        or g
-00040ca0: 732e 7061 2e72 6573 740a 2020 2020 2020  s.pa.rest.      
-00040cb0: 2020 6f72 2067 732e 7061 2e73 6574 5f61    or gs.pa.set_a
-00040cc0: 7661 7461 720a 2020 2020 2020 2020 6f72  vatar.        or
-00040cd0: 2067 732e 7061 2e69 6d70 6f72 745f 6b65   gs.pa.import_ke
-00040ce0: 7973 0a20 2020 2020 2020 206f 7220 6773  ys.        or gs
-00040cf0: 2e70 612e 6465 6c65 7465 5f64 6576 6963  .pa.delete_devic
-00040d00: 650a 2020 2020 293a 0a20 2020 2020 2020  e.    ):.       
-00040d10: 2067 732e 7365 745f 6163 7469 6f6e 203d   gs.set_action =
-00040d20: 2054 7275 650a 2020 2020 656c 7365 3a0a   True.    else:.
-00040d30: 2020 2020 2020 2020 6773 2e73 6574 5f61          gs.set_a
-00040d40: 6374 696f 6e20 3d20 4661 6c73 650a 0a20  ction = False.. 
-00040d50: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
-00040d60: 6773 2e70 612e 6765 745f 6469 7370 6c61  gs.pa.get_displa
-00040d70: 795f 6e61 6d65 2020 2320 6765 740a 2020  y_name  # get.  
-00040d80: 2020 2020 2020 6f72 2067 732e 7061 2e67        or gs.pa.g
-00040d90: 6574 5f70 7265 7365 6e63 650a 2020 2020  et_presence.    
-00040da0: 2020 2020 6f72 2067 732e 7061 2e64 6f77      or gs.pa.dow
-00040db0: 6e6c 6f61 640a 2020 2020 2020 2020 6f72  nload.        or
-00040dc0: 2067 732e 7061 2e6a 6f69 6e65 645f 726f   gs.pa.joined_ro
-00040dd0: 6f6d 730a 2020 2020 2020 2020 6f72 2067  oms.        or g
-00040de0: 732e 7061 2e6a 6f69 6e65 645f 6d65 6d62  s.pa.joined_memb
-00040df0: 6572 730a 2020 2020 2020 2020 6f72 2067  ers.        or g
-00040e00: 732e 7061 2e6a 6f69 6e65 645f 646d 5f72  s.pa.joined_dm_r
-00040e10: 6f6f 6d73 0a20 2020 2020 2020 206f 7220  ooms.        or 
-00040e20: 6773 2e70 612e 6d78 635f 746f 5f68 7474  gs.pa.mxc_to_htt
-00040e30: 700a 2020 2020 2020 2020 6f72 2067 732e  p.        or gs.
-00040e40: 7061 2e64 6576 6963 6573 0a20 2020 2020  pa.devices.     
-00040e50: 2020 206f 7220 6773 2e70 612e 6469 7363     or gs.pa.disc
-00040e60: 6f76 6572 795f 696e 666f 0a20 2020 2020  overy_info.     
-00040e70: 2020 206f 7220 6773 2e70 612e 6c6f 6769     or gs.pa.logi
-00040e80: 6e5f 696e 666f 0a20 2020 2020 2020 206f  n_info.        o
-00040e90: 7220 6773 2e70 612e 636f 6e74 656e 745f  r gs.pa.content_
-00040ea0: 7265 706f 7369 746f 7279 5f63 6f6e 6669  repository_confi
-00040eb0: 670a 2020 2020 2020 2020 6f72 2067 732e  g.        or gs.
-00040ec0: 7061 2e67 6574 5f61 7661 7461 7220 6973  pa.get_avatar is
-00040ed0: 206e 6f74 204e 6f6e 6520 2023 2065 6d70   not None  # emp
-00040ee0: 7479 206c 6973 7420 6d75 7374 2069 6e76  ty list must inv
-00040ef0: 6f6b 6520 6675 6e63 7469 6f6e 0a20 2020  oke function.   
-00040f00: 2020 2020 206f 7220 6773 2e70 612e 6765       or gs.pa.ge
-00040f10: 745f 7072 6f66 696c 6520 6973 206e 6f74  t_profile is not
-00040f20: 204e 6f6e 6520 2023 2065 6d70 7479 206c   None  # empty l
-00040f30: 6973 7420 6d75 7374 2069 6e76 6f6b 6520  ist must invoke 
-00040f40: 6675 6e63 7469 6f6e 0a20 2020 2020 2020  function.       
-00040f50: 206f 7220 6773 2e70 612e 6765 745f 726f   or gs.pa.get_ro
-00040f60: 6f6d 5f69 6e66 6f20 6973 206e 6f74 204e  om_info is not N
-00040f70: 6f6e 6520 2023 2065 6d70 7479 206c 6973  one  # empty lis
-00040f80: 7420 6d75 7374 2069 6e76 6f6b 6520 6675  t must invoke fu
-00040f90: 6e63 7469 6f6e 0a20 2020 2020 2020 206f  nction.        o
-00040fa0: 7220 6773 2e70 612e 6765 745f 636c 6965  r gs.pa.get_clie
-00040fb0: 6e74 5f69 6e66 6f0a 2020 2020 2020 2020  nt_info.        
-00040fc0: 6f72 2067 732e 7061 2e68 6173 5f70 6572  or gs.pa.has_per
-00040fd0: 6d69 7373 696f 6e0a 2020 2020 2020 2020  mission.        
-00040fe0: 6f72 2067 732e 7061 2e65 7870 6f72 745f  or gs.pa.export_
-00040ff0: 6b65 7973 0a20 2020 2020 2020 206f 7220  keys.        or 
-00041000: 6773 2e70 612e 6765 745f 6f70 656e 6964  gs.pa.get_openid
-00041010: 5f74 6f6b 656e 2069 7320 6e6f 7420 4e6f  _token is not No
-00041020: 6e65 2020 2320 656d 7074 7920 6c69 7374  ne  # empty list
-00041030: 206d 7573 7420 696e 766f 6b65 2066 756e   must invoke fun
-00041040: 630a 2020 2020 2020 2020 6f72 2067 732e  c.        or gs.
-00041050: 7061 2e77 686f 616d 690a 2020 2020 293a  pa.whoami.    ):
-00041060: 0a20 2020 2020 2020 2067 732e 6765 745f  .        gs.get_
-00041070: 6163 7469 6f6e 203d 2054 7275 650a 2020  action = True.  
-00041080: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00041090: 6773 2e67 6574 5f61 6374 696f 6e20 3d20  gs.get_action = 
-000410a0: 4661 6c73 650a 0a20 2020 2069 6620 6773  False..    if gs
-000410b0: 2e73 6574 5f61 6374 696f 6e20 6f72 2067  .set_action or g
-000410c0: 732e 6765 745f 6163 7469 6f6e 3a0a 2020  s.get_action:.  
-000410d0: 2020 2020 2020 6773 2e73 6574 6765 745f        gs.setget_
-000410e0: 6163 7469 6f6e 203d 2054 7275 650a 2020  action = True.  
-000410f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00041100: 6773 2e73 6574 6765 745f 6163 7469 6f6e  gs.setget_action
-00041110: 203d 2046 616c 7365 0a0a 2020 2020 2320   = False..    # 
-00041120: 6f6e 6c79 2032 2053 534c 2073 7461 7465  only 2 SSL state
-00041130: 7320 616c 6c6f 7765 643a 204e 6f6e 6520  s allowed: None 
-00041140: 2853 534c 2064 6566 6175 6c74 206f 6e29  (SSL default on)
-00041150: 2c20 4661 6c73 6520 2853 534c 206f 6666  , False (SSL off
-00041160: 290a 2020 2020 6966 2067 732e 7061 2e6e  ).    if gs.pa.n
-00041170: 6f5f 7373 6c20 6973 206e 6f74 2054 7275  o_ssl is not Tru
-00041180: 653a 0a20 2020 2020 2020 2067 732e 7061  e:.        gs.pa
-00041190: 2e6e 6f5f 7373 6c20 3d20 4e6f 6e65 0a20  .no_ssl = None. 
-000411a0: 2020 2069 6620 6773 2e70 612e 7072 6f78     if gs.pa.prox
-000411b0: 7920 3d3d 2022 223a 0a20 2020 2020 2020  y == "":.       
-000411c0: 2067 732e 7061 2e70 726f 7879 203d 204e   gs.pa.proxy = N
-000411d0: 6f6e 650a 0a20 2020 2023 2068 6f77 206f  one..    # how o
-000411e0: 6674 656e 2069 7320 222d 2220 7573 6564  ften is "-" used
-000411f0: 2074 6f20 7265 7072 6573 656e 7420 7374   to represent st
-00041200: 6469 6e0a 2020 2020 2320 6d75 7374 2062  din.    # must b
-00041210: 6520 3020 6f72 2031 3b20 6361 6e6e 6f74  e 0 or 1; cannot
-00041220: 2062 6520 7573 6564 2074 7769 6365 206f   be used twice o
-00041230: 7220 6d6f 7265 0a20 2020 2053 5444 494e  r more.    STDIN
-00041240: 5f4d 4553 5341 4745 203d 2030 0a20 2020  _MESSAGE = 0.   
-00041250: 2053 5444 494e 5f49 4d41 4745 203d 2030   STDIN_IMAGE = 0
-00041260: 0a20 2020 2053 5444 494e 5f41 5544 494f  .    STDIN_AUDIO
-00041270: 203d 2030 0a20 2020 2053 5444 494e 5f46   = 0.    STDIN_F
-00041280: 494c 4520 3d20 300a 2020 2020 5354 4449  ILE = 0.    STDI
-00041290: 4e5f 4556 454e 5420 3d20 300a 2020 2020  N_EVENT = 0.    
-000412a0: 5354 4449 4e5f 544f 5441 4c20 3d20 300a  STDIN_TOTAL = 0.
-000412b0: 2020 2020 6966 2067 732e 7061 2e69 6d61      if gs.pa.ima
-000412c0: 6765 3a0a 2020 2020 2020 2020 666f 7220  ge:.        for 
-000412d0: 696d 6167 6520 696e 2067 732e 7061 2e69  image in gs.pa.i
-000412e0: 6d61 6765 3a0a 2020 2020 2020 2020 2020  mage:.          
-000412f0: 2020 6966 2069 6d61 6765 203d 3d20 222d    if image == "-
-00041300: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-00041310: 2020 2053 5444 494e 5f49 4d41 4745 202b     STDIN_IMAGE +
-00041320: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
-00041330: 2020 2020 6773 2e73 7464 696e 5f75 7365      gs.stdin_use
-00041340: 203d 2022 696d 6167 6522 0a20 2020 2069   = "image".    i
-00041350: 6620 6773 2e70 612e 6175 6469 6f3a 0a20  f gs.pa.audio:. 
-00041360: 2020 2020 2020 2066 6f72 2061 7564 696f         for audio
-00041370: 2069 6e20 6773 2e70 612e 6175 6469 6f3a   in gs.pa.audio:
-00041380: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00041390: 6175 6469 6f20 3d3d 2022 2d22 3a0a 2020  audio == "-":.  
-000413a0: 2020 2020 2020 2020 2020 2020 2020 5354                ST
-000413b0: 4449 4e5f 4155 4449 4f20 2b3d 2031 0a20  DIN_AUDIO += 1. 
-000413c0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-000413d0: 732e 7374 6469 6e5f 7573 6520 3d20 2261  s.stdin_use = "a
-000413e0: 7564 696f 220a 2020 2020 6966 2067 732e  udio".    if gs.
-000413f0: 7061 2e66 696c 653a 0a20 2020 2020 2020  pa.file:.       
-00041400: 2066 6f72 2066 696c 6520 696e 2067 732e   for file in gs.
-00041410: 7061 2e66 696c 653a 0a20 2020 2020 2020  pa.file:.       
-00041420: 2020 2020 2069 6620 6669 6c65 203d 3d20       if file == 
-00041430: 222d 223a 0a20 2020 2020 2020 2020 2020  "-":.           
-00041440: 2020 2020 2053 5444 494e 5f46 494c 4520       STDIN_FILE 
-00041450: 2b3d 2031 0a20 2020 2020 2020 2020 2020  += 1.           
-00041460: 2020 2020 2067 732e 7374 6469 6e5f 7573       gs.stdin_us
-00041470: 6520 3d20 2266 696c 6522 0a20 2020 2069  e = "file".    i
-00041480: 6620 6773 2e70 612e 6576 656e 743a 0a20  f gs.pa.event:. 
-00041490: 2020 2020 2020 2066 6f72 2065 7665 6e74         for event
-000414a0: 2069 6e20 6773 2e70 612e 6576 656e 743a   in gs.pa.event:
-000414b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000414c0: 6576 656e 7420 3d3d 2022 2d22 3a0a 2020  event == "-":.  
-000414d0: 2020 2020 2020 2020 2020 2020 2020 5354                ST
-000414e0: 4449 4e5f 4556 454e 5420 2b3d 2031 0a20  DIN_EVENT += 1. 
-000414f0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00041500: 732e 7374 6469 6e5f 7573 6520 3d20 2265  s.stdin_use = "e
-00041510: 7665 6e74 220a 2020 2020 6966 2067 732e  vent".    if gs.
-00041520: 7061 2e6d 6573 7361 6765 3a0a 2020 2020  pa.message:.    
-00041530: 2020 2020 666f 7220 6d65 7373 6167 6520      for message 
-00041540: 696e 2067 732e 7061 2e6d 6573 7361 6765  in gs.pa.message
-00041550: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00041560: 206d 6573 7361 6765 203d 3d20 222d 2220   message == "-" 
-00041570: 6f72 206d 6573 7361 6765 203d 3d20 225f  or message == "_
-00041580: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-00041590: 2020 2053 5444 494e 5f4d 4553 5341 4745     STDIN_MESSAGE
-000415a0: 202b 3d20 310a 2020 2020 2020 2020 2020   += 1.          
-000415b0: 2020 2020 2020 6773 2e73 7464 696e 5f75        gs.stdin_u
-000415c0: 7365 203d 2022 6d65 7373 6167 6522 0a20  se = "message". 
-000415d0: 2020 2053 5444 494e 5f54 4f54 414c 203d     STDIN_TOTAL =
-000415e0: 2028 0a20 2020 2020 2020 2053 5444 494e   (.        STDIN
-000415f0: 5f4d 4553 5341 4745 202b 2053 5444 494e  _MESSAGE + STDIN
-00041600: 5f49 4d41 4745 202b 2053 5444 494e 5f41  _IMAGE + STDIN_A
-00041610: 5544 494f 202b 2053 5444 494e 5f46 494c  UDIO + STDIN_FIL
-00041620: 4520 2b20 5354 4449 4e5f 4556 454e 540a  E + STDIN_EVENT.
-00041630: 2020 2020 290a 0a20 2020 2069 6620 6773      )..    if gs
-00041640: 2e70 612e 646f 776e 6c6f 6164 5f6d 6564  .pa.download_med
-00041650: 6961 5f6e 616d 6520 3d3d 2022 2220 616e  ia_name == "" an
-00041660: 6420 6773 2e70 612e 646f 776e 6c6f 6164  d gs.pa.download
-00041670: 5f6d 6564 6961 3a0a 2020 2020 2020 2020  _media:.        
-00041680: 6773 2e70 612e 646f 776e 6c6f 6164 5f6d  gs.pa.download_m
-00041690: 6564 6961 5f6e 616d 6520 3d20 4d45 4449  edia_name = MEDI
-000416a0: 415f 4e41 4d45 5f44 4546 4155 4c54 0a0a  A_NAME_DEFAULT..
-000416b0: 2020 2020 2320 5365 636f 6e64 6c79 2c20      # Secondly, 
-000416c0: 7468 6520 6368 6563 6b73 0a20 2020 2069  the checks.    i
-000416d0: 6620 6773 2e70 612e 636f 6e66 6967 3a0a  f gs.pa.config:.
-000416e0: 2020 2020 2020 2020 7420 3d20 280a 2020          t = (.  
-000416f0: 2020 2020 2020 2020 2020 2254 6869 7320            "This 
-00041700: 6665 6174 7572 6520 6973 206e 6f74 2069  feature is not i
-00041710: 6d70 6c65 6d65 6e74 6564 2079 6574 2061  mplemented yet a
-00041720: 6e64 2077 696c 6c20 6d6f 7374 206c 696b  nd will most lik
-00041730: 656c 7920 220a 2020 2020 2020 2020 2020  ely ".          
-00041740: 2020 226e 6f74 2062 6520 696d 706c 656d    "not be implem
-00041750: 656e 7465 642e 2053 6565 2049 7373 7565  ented. See Issue
-00041760: 2023 3334 206f 6e20 4769 7468 7562 2e22   #34 on Github."
-00041770: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
-00041780: 6c69 6620 6773 2e70 612e 6c69 7374 656e  lif gs.pa.listen
-00041790: 2069 6e20 2846 4f52 4556 4552 2c20 4f4e   in (FOREVER, ON
-000417a0: 4345 2c20 414c 4c29 2061 6e64 2067 732e  CE, ALL) and gs.
-000417b0: 7061 2e74 6169 6c20 213d 2030 3a0a 2020  pa.tail != 0:.  
-000417c0: 2020 2020 2020 7420 3d20 280a 2020 2020        t = (.    
-000417d0: 2020 2020 2020 2020 2244 6f6e 2774 2075          "Don't u
-000417e0: 7365 202d 2d6c 6973 7465 6e20 666f 7265  se --listen fore
-000417f0: 7665 722c 202d 2d6c 6973 7465 6e20 6f6e  ver, --listen on
-00041800: 6365 206f 7220 2d2d 6c69 7374 656e 2061  ce or --listen a
-00041810: 6c6c 2022 0a20 2020 2020 2020 2020 2020  ll ".           
-00041820: 2022 746f 6765 7468 6572 2077 6974 6820   "together with 
-00041830: 2d2d 7461 696c 2e20 4974 2773 206f 6e65  --tail. It's one
-00041840: 206f 7220 7468 6520 6f74 6865 722e 220a   or the other.".
-00041850: 2020 2020 2020 2020 290a 2020 2020 2320          ).    # 
-00041860: 7468 6973 2069 7320 7365 7420 6279 2064  this is set by d
-00041870: 6566 6175 6c74 2061 6e79 7761 792c 206a  efault anyway, j
-00041880: 7573 7420 6465 6665 6e73 6976 6520 7072  ust defensive pr
-00041890: 6f67 7261 6d6d 696e 670a 2020 2020 656c  ogramming.    el
-000418a0: 6966 2067 732e 7061 2e65 6e63 7279 7074  if gs.pa.encrypt
-000418b0: 6564 2061 6e64 2067 732e 7061 2e73 746f  ed and gs.pa.sto
-000418c0: 7265 2069 6e20 284e 6f6e 652c 2022 2229  re in (None, "")
-000418d0: 3a0a 2020 2020 2020 2020 7420 3d20 280a  :.        t = (.
-000418e0: 2020 2020 2020 2020 2020 2020 2249 6620              "If 
-000418f0: 2d2d 656e 6372 7970 7465 6420 6973 2075  --encrypted is u
-00041900: 7365 6420 2d2d 7374 6f72 6520 6d75 7374  sed --store must
-00041910: 2062 6520 7365 7420 746f 6f2e 2022 0a20   be set too. ". 
-00041920: 2020 2020 2020 2020 2020 2022 5370 6563             "Spec
-00041930: 6966 7920 2d2d 7374 6f72 6520 616e 6420  ify --store and 
-00041940: 7275 6e20 7072 6f67 7261 6d20 6167 6169  run program agai
-00041950: 6e2e 220a 2020 2020 2020 2020 290a 2020  n.".        ).  
-00041960: 2020 656c 6966 2067 732e 7061 2e76 6572    elif gs.pa.ver
-00041970: 6966 7920 616e 6420 2867 732e 7061 2e76  ify and (gs.pa.v
-00041980: 6572 6966 792e 6c6f 7765 7228 2920 213d  erify.lower() !=
-00041990: 2045 4d4f 4a49 293a 0a20 2020 2020 2020   EMOJI):.       
-000419a0: 2074 203d 2066 2746 6f72 202d 2d76 6572   t = f'For --ver
-000419b0: 6966 7920 6375 7272 656e 746c 7920 6f6e  ify currently on
-000419c0: 6c79 2022 7b45 4d4f 4a49 7d22 2069 7320  ly "{EMOJI}" is 
-000419d0: 616c 6c6f 7765 6420 6173 206b 6579 776f  allowed as keywo
-000419e0: 7264 2e27 0a20 2020 2065 6c69 6620 6773  rd.'.    elif gs
-000419f0: 2e70 612e 7665 7273 696f 6e20 616e 6420  .pa.version and 
-00041a00: 280a 2020 2020 2020 2020 6773 2e70 612e  (.        gs.pa.
-00041a10: 7665 7273 696f 6e2e 6c6f 7765 7228 2920  version.lower() 
-00041a20: 213d 2050 5249 4e54 2061 6e64 2067 732e  != PRINT and gs.
-00041a30: 7061 2e76 6572 7369 6f6e 2e6c 6f77 6572  pa.version.lower
-00041a40: 2829 2021 3d20 4348 4543 4b0a 2020 2020  () != CHECK.    
-00041a50: 293a 0a20 2020 2020 2020 2074 203d 2028  ):.        t = (
-00041a60: 0a20 2020 2020 2020 2020 2020 2066 2746  .            f'F
-00041a70: 6f72 202d 2d76 6572 7369 6f6e 2063 7572  or --version cur
-00041a80: 7265 6e74 6c79 206f 6e6c 7920 227b 5052  rently only "{PR
-00041a90: 494e 547d 2220 270a 2020 2020 2020 2020  INT}" '.        
-00041aa0: 2020 2020 6627 6f72 2022 7b43 4845 434b      f'or "{CHECK
-00041ab0: 7d22 2069 7320 616c 6c6f 7765 6420 6173  }" is allowed as
-00041ac0: 206b 6579 776f 7264 2e27 0a20 2020 2020   keyword.'.     
-00041ad0: 2020 2029 0a20 2020 2065 6c69 6620 6773     ).    elif gs
-00041ae0: 2e70 612e 726f 6f6d 5f69 6e76 6974 6573  .pa.room_invites
-00041af0: 2061 6e64 2028 0a20 2020 2020 2020 2067   and (.        g
-00041b00: 732e 7061 2e72 6f6f 6d5f 696e 7669 7465  s.pa.room_invite
-00041b10: 7320 213d 2049 4e56 4954 4553 5f4c 4953  s != INVITES_LIS
-00041b20: 540a 2020 2020 2020 2020 616e 6420 6773  T.        and gs
-00041b30: 2e70 612e 726f 6f6d 5f69 6e76 6974 6573  .pa.room_invites
-00041b40: 2021 3d20 494e 5649 5445 535f 4a4f 494e   != INVITES_JOIN
-00041b50: 0a20 2020 2020 2020 2061 6e64 2067 732e  .        and gs.
-00041b60: 7061 2e72 6f6f 6d5f 696e 7669 7465 7320  pa.room_invites 
-00041b70: 213d 2049 4e56 4954 4553 5f4c 4953 545f  != INVITES_LIST_
-00041b80: 4a4f 494e 0a20 2020 2029 3a0a 2020 2020  JOIN.    ):.    
-00041b90: 2020 2020 7420 3d20 280a 2020 2020 2020      t = (.      
-00041ba0: 2020 2020 2020 6627 466f 7220 2d2d 726f        f'For --ro
-00041bb0: 6f6d 2d69 6e76 6974 6573 2063 7572 7265  om-invites curre
-00041bc0: 6e74 6c79 206f 6e6c 7920 227b 494e 5649  ntly only "{INVI
-00041bd0: 5445 535f 4c49 5354 7d22 2c20 270a 2020  TES_LIST}", '.  
-00041be0: 2020 2020 2020 2020 2020 6627 227b 494e            f'"{IN
-00041bf0: 5649 5445 535f 4a4f 494e 7d22 206f 7220  VITES_JOIN}" or 
-00041c00: 227b 494e 5649 5445 535f 4c49 5354 5f4a  "{INVITES_LIST_J
-00041c10: 4f49 4e7d 2220 6172 6520 616c 6c6f 7765  OIN}" are allowe
-00041c20: 6420 6173 2027 0a20 2020 2020 2020 2020  d as '.         
-00041c30: 2020 2022 6b65 7977 6f72 6473 2e22 0a20     "keywords.". 
-00041c40: 2020 2020 2020 2029 0a20 2020 2023 2065         ).    # e
-00041c50: 6c69 6620 6773 2e70 612e 726f 6f6d 5f69  lif gs.pa.room_i
-00041c60: 6e76 6974 6573 2061 6e64 2067 732e 7061  nvites and gs.pa
-00041c70: 2e6c 6973 7465 6e20 6e6f 7420 696e 2028  .listen not in (
-00041c80: 464f 5245 5645 522c 204f 4e43 4529 3a0a  FOREVER, ONCE):.
-00041c90: 2020 2020 2320 2020 2020 7420 3d20 280a      #     t = (.
-00041ca0: 2020 2020 2320 2020 2020 2020 2020 2246      #         "F
-00041cb0: 6f72 202d 2d72 6f6f 6d2d 696e 7669 7465  or --room-invite
-00041cc0: 7320 746f 2077 6f72 6b20 796f 7520 6d75  s to work you mu
-00041cd0: 7374 2061 6c73 6f20 6265 206c 6973 7465  st also be liste
-00041ce0: 6e69 6e67 2e20 220a 2020 2020 2320 2020  ning. ".    #   
-00041cf0: 2020 2020 2020 2755 7365 2022 2d2d 6c69        'Use "--li
-00041d00: 7374 656e 206f 6e63 6522 206f 7220 222d  sten once" or "-
-00041d10: 2d6c 6973 7465 6e20 666f 7265 7665 7222  -listen forever"
-00041d20: 2e27 0a20 2020 2023 2020 2020 2029 0a20  .'.    #     ). 
-00041d30: 2020 2023 2061 6c6c 6f77 2076 6572 6966     # allow verif
-00041d40: 7920 7769 7468 2065 7665 7279 7468 696e  y with everythin
-00041d50: 670a 2020 2020 2320 616c 6c6f 7720 7365  g.    # allow se
-00041d60: 6e64 2077 6974 6820 6576 6572 7974 6869  nd with everythi
-00041d70: 6e67 0a20 2020 2023 2061 6c6c 6f77 206c  ng.    # allow l
-00041d80: 6973 7465 6e20 7769 7468 2065 7665 7279  isten with every
-00041d90: 7468 696e 670a 2020 2020 656c 6966 2067  thing.    elif g
-00041da0: 732e 7061 2e73 6574 5f64 6576 6963 655f  s.pa.set_device_
-00041db0: 6e61 6d65 2061 6e64 2028 6773 2e70 612e  name and (gs.pa.
-00041dc0: 7365 745f 6465 7669 6365 5f6e 616d 652e  set_device_name.
-00041dd0: 7374 7269 7028 2920 3d3d 2022 2229 3a0a  strip() == ""):.
-00041de0: 2020 2020 2020 2020 7420 3d20 2244 6f6e          t = "Don
-00041df0: 2774 2075 7365 2061 6e20 656d 7074 7920  't use an empty 
-00041e00: 6e61 6d65 2066 6f72 202d 2d73 6574 2d64  name for --set-d
-00041e10: 6576 6963 652d 6e61 6d65 2e22 0a20 2020  evice-name.".   
-00041e20: 2065 6c69 6620 6773 2e70 612e 7365 745f   elif gs.pa.set_
-00041e30: 6469 7370 6c61 795f 6e61 6d65 2061 6e64  display_name and
-00041e40: 2028 6773 2e70 612e 7365 745f 6469 7370   (gs.pa.set_disp
-00041e50: 6c61 795f 6e61 6d65 2e73 7472 6970 2829  lay_name.strip()
-00041e60: 203d 3d20 2222 293a 0a20 2020 2020 2020   == ""):.       
-00041e70: 2074 203d 2022 446f 6e27 7420 7573 6520   t = "Don't use 
-00041e80: 616e 2065 6d70 7479 206e 616d 6520 666f  an empty name fo
-00041e90: 7220 2d2d 7365 742d 6469 7370 6c61 792d  r --set-display-
-00041ea0: 6e61 6d65 2e22 0a20 2020 2065 6c69 6620  name.".    elif 
-00041eb0: 2867 732e 7061 2e75 7365 7229 2061 6e64  (gs.pa.user) and
-00041ec0: 206e 6f74 2028 0a20 2020 2020 2020 2067   not (.        g
-00041ed0: 732e 7365 6e64 5f61 6374 696f 6e0a 2020  s.send_action.  
-00041ee0: 2020 2020 2020 6f72 2067 732e 726f 6f6d        or gs.room
-00041ef0: 5f61 6374 696f 6e0a 2020 2020 2020 2020  _action.        
-00041f00: 6f72 2067 732e 7061 2e67 6574 5f64 6973  or gs.pa.get_dis
-00041f10: 706c 6179 5f6e 616d 650a 2020 2020 2020  play_name.      
-00041f20: 2020 6f72 2067 732e 7061 2e67 6574 5f70    or gs.pa.get_p
-00041f30: 7265 7365 6e63 650a 2020 2020 2020 2020  resence.        
-00041f40: 6f72 2067 732e 7061 2e64 656c 6574 655f  or gs.pa.delete_
-00041f50: 6465 7669 6365 0a20 2020 2029 3a0a 2020  device.    ):.  
-00041f60: 2020 2020 2020 7420 3d20 280a 2020 2020        t = (.    
-00041f70: 2020 2020 2020 2020 2249 6620 2d2d 7573          "If --us
-00041f80: 6572 2069 7320 7370 6563 6966 6965 642c  er is specified,
-00041f90: 206f 6e6c 7920 6120 7365 6e64 2061 6374   only a send act
-00041fa0: 696f 6e2c 2061 2072 6f6f 6d20 6163 7469  ion, a room acti
-00041fb0: 6f6e 2c20 220a 2020 2020 2020 2020 2020  on, ".          
-00041fc0: 2020 222d 2d67 6574 2d64 6973 706c 6179    "--get-display
-00041fd0: 2d6e 616d 652c 202d 2d67 6574 2d70 7265  -name, --get-pre
-00041fe0: 7365 6e63 652c 206f 7220 2d2d 6465 6c65  sence, or --dele
-00041ff0: 7465 2d64 6576 6963 6520 6361 6e20 6265  te-device can be
-00042000: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
-00042010: 646f 6e65 2e20 4164 6a75 7374 2079 6f75  done. Adjust you
-00042020: 7220 6172 6775 6d65 6e74 7320 6163 636f  r arguments acco
-00042030: 7264 696e 676c 792e 220a 2020 2020 2020  rdingly.".      
-00042040: 2020 290a 2020 2020 656c 6966 2028 6773    ).    elif (gs
-00042050: 2e70 612e 7379 6e63 2069 7320 6e6f 7420  .pa.sync is not 
-00042060: 4e6f 6e65 2920 616e 6420 6e6f 7420 2867  None) and not (g
-00042070: 732e 7365 6e64 5f61 6374 696f 6e29 3a0a  s.send_action):.
-00042080: 2020 2020 2020 2020 7420 3d20 280a 2020          t = (.  
-00042090: 2020 2020 2020 2020 2020 224f 6e6c 7920            "Only 
-000420a0: 6966 2061 2073 656e 6420 6163 7469 6f6e  if a send action
-000420b0: 2069 7320 7072 6f76 6964 6564 2069 7420   is provided it 
-000420c0: 6973 206d 6561 6e69 6e67 6675 6c20 746f  is meaningful to
-000420d0: 2073 7065 6369 6679 2022 0a20 2020 2020   specify ".     
-000420e0: 2020 2020 2020 2022 2d2d 7379 6e63 2e20         "--sync. 
-000420f0: 5265 6d6f 7665 202d 2d73 796e 6320 6f72  Remove --sync or
-00042100: 2061 6464 2061 2073 656e 6420 6163 7469   add a send acti
-00042110: 6f6e 2e20 220a 2020 2020 2020 2020 2020  on. ".          
-00042120: 2020 2241 646a 7573 7420 796f 7572 2061    "Adjust your a
-00042130: 7267 756d 656e 7473 2061 6363 6f72 6469  rguments accordi
-00042140: 6e67 6c79 2e22 0a20 2020 2020 2020 2029  ngly.".        )
-00042150: 0a20 2020 2065 6c69 6620 2867 732e 7061  .    elif (gs.pa
-00042160: 2e73 796e 6320 6973 206e 6f74 204e 6f6e  .sync is not Non
-00042170: 6529 2061 6e64 2067 732e 7061 2e73 796e  e) and gs.pa.syn
-00042180: 6320 6e6f 7420 696e 2028 5359 4e43 5f46  c not in (SYNC_F
-00042190: 554c 4c2c 2053 594e 435f 4f46 4629 3a0a  ULL, SYNC_OFF):.
-000421a0: 2020 2020 2020 2020 7420 3d20 280a 2020          t = (.  
-000421b0: 2020 2020 2020 2020 2020 2249 6e63 6f72            "Incor
-000421c0: 7265 6374 2076 616c 7565 2067 6976 656e  rect value given
-000421d0: 2066 6f72 202d 2d73 796e 632e 2022 0a20   for --sync. ". 
-000421e0: 2020 2020 2020 2020 2020 2066 224f 6e6c             f"Onl
-000421f0: 7920 277b 5359 4e43 5f46 554c 4c7d 2720  y '{SYNC_FULL}' 
-00042200: 616e 6420 277b 5359 4e43 5f4f 4646 7d27  and '{SYNC_OFF}'
-00042210: 2061 7265 2061 6c6c 6f77 6564 2e22 0a20   are allowed.". 
-00042220: 2020 2020 2020 2029 0a20 2020 2065 6c69         ).    eli
-00042230: 6620 6773 2e70 612e 6f75 7470 7574 206e  f gs.pa.output n
-00042240: 6f74 2069 6e20 280a 2020 2020 2020 2020  ot in (.        
-00042250: 4f55 5450 5554 5f54 4558 542c 0a20 2020  OUTPUT_TEXT,.   
-00042260: 2020 2020 204f 5554 5055 545f 4a53 4f4e       OUTPUT_JSON
-00042270: 2c0a 2020 2020 2020 2020 4f55 5450 5554  ,.        OUTPUT
-00042280: 5f4a 534f 4e5f 5350 4543 2c0a 2020 2020  _JSON_SPEC,.    
-00042290: 2020 2020 4f55 5450 5554 5f4a 534f 4e5f      OUTPUT_JSON_
-000422a0: 4d41 582c 0a20 2020 2029 3a0a 2020 2020  MAX,.    ):.    
-000422b0: 2020 2020 7420 3d20 280a 2020 2020 2020      t = (.      
-000422c0: 2020 2020 2020 2249 6e63 6f72 7265 6374        "Incorrect
-000422d0: 2076 616c 7565 2067 6976 656e 2066 6f72   value given for
-000422e0: 202d 2d6f 7574 7075 742e 2022 0a20 2020   --output. ".   
-000422f0: 2020 2020 2020 2020 2066 224f 6e6c 7920           f"Only 
-00042300: 277b 4f55 5450 5554 5f54 4558 547d 272c  '{OUTPUT_TEXT}',
-00042310: 2027 7b4f 5554 5055 545f 4a53 4f4e 7d27   '{OUTPUT_JSON}'
-00042320: 2c20 220a 2020 2020 2020 2020 2020 2020  , ".            
-00042330: 6622 277b 4f55 5450 5554 5f4a 534f 4e5f  f"'{OUTPUT_JSON_
-00042340: 5350 4543 7d27 2061 6e64 2027 7b4f 5554  SPEC}' and '{OUT
-00042350: 5055 545f 4a53 4f4e 5f4d 4158 7d27 2061  PUT_JSON_MAX}' a
-00042360: 7265 2061 6c6c 6f77 6564 2e22 0a20 2020  re allowed.".   
-00042370: 2020 2020 2029 0a20 2020 2065 6c69 6620       ).    elif 
-00042380: 6e6f 7420 6773 2e70 612e 7573 6572 2061  not gs.pa.user a
-00042390: 6e64 2028 0a20 2020 2020 2020 2067 732e  nd (.        gs.
-000423a0: 7061 2e72 6f6f 6d5f 696e 7669 7465 0a20  pa.room_invite. 
-000423b0: 2020 2020 2020 206f 7220 6773 2e70 612e         or gs.pa.
-000423c0: 726f 6f6d 5f62 616e 0a20 2020 2020 2020  room_ban.       
-000423d0: 206f 7220 6773 2e70 612e 726f 6f6d 5f75   or gs.pa.room_u
-000423e0: 6e62 616e 0a20 2020 2020 2020 206f 7220  nban.        or 
-000423f0: 6773 2e70 612e 726f 6f6d 5f6b 6963 6b0a  gs.pa.room_kick.
-00042400: 2020 2020 293a 0a20 2020 2020 2020 2074      ):.        t
-00042410: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-00042420: 2022 5573 6572 206e 6f74 2073 7065 6369   "User not speci
-00042430: 6669 6564 2066 6f72 2072 6f6f 6d20 6163  fied for room ac
-00042440: 7469 6f6e 2e20 220a 2020 2020 2020 2020  tion. ".        
-00042450: 2020 2020 2255 7365 202d 2d75 7365 7220      "Use --user 
-00042460: 6f70 7469 6f6e 2074 6f20 7370 6563 6966  option to specif
-00042470: 7920 7573 6572 2873 2920 666f 7220 6769  y user(s) for gi
-00042480: 7665 6e20 726f 6f6d 2061 6374 696f 6e2e  ven room action.
-00042490: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
-000424a0: 656c 6966 2067 732e 7061 2e6c 6973 7465  elif gs.pa.liste
-000424b0: 6e20 696e 2028 4f4e 4345 2c20 464f 5245  n in (ONCE, FORE
-000424c0: 5645 5229 2061 6e64 2067 732e 7061 2e72  VER) and gs.pa.r
-000424d0: 6f6f 6d3a 0a20 2020 2020 2020 2074 203d  oom:.        t =
-000424e0: 2028 0a20 2020 2020 2020 2020 2020 2022   (.            "
-000424f0: 4966 202d 2d6c 6973 7465 6e20 6f6e 6365  If --listen once
-00042500: 206f 7220 2d2d 6c69 7374 656e 2066 6f72   or --listen for
-00042510: 6576 6572 2061 7265 2073 7065 6369 6669  ever are specifi
-00042520: 6564 2c20 220a 2020 2020 2020 2020 2020  ed, ".          
-00042530: 2020 222d 2d72 6f6f 6d20 6d75 7374 206e    "--room must n
-00042540: 6f74 2062 6520 7370 6563 6966 6965 6420  ot be specified 
-00042550: 6265 6361 7573 6520 220a 2020 2020 2020  because ".      
-00042560: 2020 2020 2020 2274 6865 7365 206f 7074        "these opt
-00042570: 696f 6e73 206c 6973 7465 6e20 696e 2041  ions listen in A
-00042580: 4c4c 2072 6f6f 6d73 2e22 0a20 2020 2020  LL rooms.".     
-00042590: 2020 2029 0a20 2020 2065 6c69 6620 6773     ).    elif gs
-000425a0: 2e70 612e 6c69 7374 656e 206e 6f74 2069  .pa.listen not i
-000425b0: 6e20 284e 4556 4552 2c20 464f 5245 5645  n (NEVER, FOREVE
-000425c0: 522c 204f 4e43 452c 2054 4149 4c2c 2041  R, ONCE, TAIL, A
-000425d0: 4c4c 293a 0a20 2020 2020 2020 2074 203d  LL):.        t =
-000425e0: 2028 0a20 2020 2020 2020 2020 2020 2022   (.            "
-000425f0: 4966 202d 2d6c 6973 7465 6e20 6973 2073  If --listen is s
-00042600: 7065 6369 6669 6564 2c20 6f6e 6c79 2074  pecified, only t
-00042610: 6865 7365 2063 686f 6963 6573 2061 7265  hese choices are
-00042620: 2022 0a20 2020 2020 2020 2020 2020 2066   ".            f
-00042630: 2270 6f73 7369 626c 653a 207b 4f4e 4345  "possible: {ONCE
-00042640: 7d2c 207b 4e45 5645 527d 2c20 7b46 4f52  }, {NEVER}, {FOR
-00042650: 4556 4552 7d2c 207b 5441 494c 7d20 6f72  EVER}, {TAIL} or
-00042660: 207b 414c 4c7d 2e20 220a 2020 2020 2020   {ALL}. ".      
-00042670: 2020 2020 2020 6627 466f 756e 6420 227b        f'Found "{
-00042680: 6773 2e70 612e 6c69 7374 656e 7d22 2e27  gs.pa.listen}".'
-00042690: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
-000426a0: 6c69 6620 6773 2e70 612e 6c69 7374 656e  lif gs.pa.listen
-000426b0: 203d 3d20 4e45 5645 5220 616e 6420 6773   == NEVER and gs
-000426c0: 2e70 612e 6c69 7374 656e 5f73 656c 663a  .pa.listen_self:
-000426d0: 0a20 2020 2020 2020 2074 203d 2028 0a20  .        t = (. 
-000426e0: 2020 2020 2020 2020 2020 2022 4966 206e             "If n
-000426f0: 6569 7468 6572 202d 2d6c 6973 7465 6e20  either --listen 
-00042700: 6e6f 7220 2d2d 7461 696c 2061 7265 2075  nor --tail are u
-00042710: 7365 642c 2022 0a20 2020 2020 2020 2020  sed, ".         
-00042720: 2020 2022 7468 656e 202d 2d6c 6973 7465     "then --liste
-00042730: 6e2d 7365 6c66 206d 7573 7420 6e6f 7420  n-self must not 
-00042740: 6265 2075 7365 6420 220a 2020 2020 2020  be used ".      
-00042750: 2020 2020 2020 2265 6974 6865 722e 2053        "either. S
-00042760: 7065 6369 6679 202d 2d6c 6973 7465 6e20  pecify --listen 
-00042770: 6f72 202d 2d74 6169 6c20 220a 2020 2020  or --tail ".    
-00042780: 2020 2020 2020 2020 2261 6e64 2072 756e          "and run
-00042790: 2070 726f 6772 616d 2061 6761 696e 2e22   program again."
-000427a0: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
-000427b0: 6c69 6620 6773 2e70 612e 6c69 7374 656e  lif gs.pa.listen
-000427c0: 203d 3d20 4e45 5645 5220 616e 6420 2867   == NEVER and (g
-000427d0: 732e 7061 2e64 6f77 6e6c 6f61 645f 6d65  s.pa.download_me
-000427e0: 6469 6120 213d 2022 2229 3a0a 2020 2020  dia != ""):.    
-000427f0: 2020 2020 7420 3d20 280a 2020 2020 2020      t = (.      
-00042800: 2020 2020 2020 2249 6620 6e65 6974 6865        "If neithe
-00042810: 7220 2d2d 6c69 7374 656e 206e 6f72 202d  r --listen nor -
-00042820: 2d74 6169 6c20 6172 6520 7573 6564 2c20  -tail are used, 
-00042830: 220a 2020 2020 2020 2020 2020 2020 2274  ".            "t
-00042840: 6865 6e20 2d2d 646f 776e 6c6f 6164 2d6d  hen --download-m
-00042850: 6564 6961 206d 7573 7420 6e6f 7420 6265  edia must not be
-00042860: 2075 7365 6420 220a 2020 2020 2020 2020   used ".        
-00042870: 2020 2020 2265 6974 6865 722e 2053 7065      "either. Spe
-00042880: 6369 6679 202d 2d6c 6973 7465 6e20 6f72  cify --listen or
-00042890: 202d 2d74 6169 6c20 220a 2020 2020 2020   --tail ".      
-000428a0: 2020 2020 2020 6622 616e 6420 7275 6e20        f"and run 
-000428b0: 7072 6f67 7261 6d20 6167 6169 6e2e 2028  program again. (
-000428c0: 7b67 732e 7061 2e64 6f77 6e6c 6f61 645f  {gs.pa.download_
-000428d0: 6d65 6469 617d 2922 0a20 2020 2020 2020  media})".       
-000428e0: 2029 0a20 2020 2065 6c69 6620 6773 2e70   ).    elif gs.p
-000428f0: 612e 646f 776e 6c6f 6164 5f6d 6564 6961  a.download_media
-00042900: 5f6e 616d 6520 213d 2022 2220 616e 6420  _name != "" and 
-00042910: 286e 6f74 2067 732e 7061 2e64 6f77 6e6c  (not gs.pa.downl
-00042920: 6f61 645f 6d65 6469 6129 3a0a 2020 2020  oad_media):.    
-00042930: 2020 2020 7420 3d20 280a 2020 2020 2020      t = (.      
-00042940: 2020 2020 2020 2249 6620 2d2d 646f 776e        "If --down
-00042950: 6c6f 6164 2d6d 6564 6961 2069 7320 6e6f  load-media is no
-00042960: 7420 7573 6564 2c20 220a 2020 2020 2020  t used, ".      
-00042970: 2020 2020 2020 2274 6865 6e20 2d2d 646f        "then --do
-00042980: 776e 6c6f 6164 2d6d 6564 6961 2d6e 616d  wnload-media-nam
-00042990: 6520 6d75 7374 206e 6f74 2062 6520 7573  e must not be us
-000429a0: 6564 2022 0a20 2020 2020 2020 2020 2020  ed ".           
-000429b0: 2022 6569 7468 6572 2e20 5370 6563 6966   "either. Specif
-000429c0: 7920 2d2d 646f 776e 6c6f 6164 2d6d 6564  y --download-med
-000429d0: 6961 2022 0a20 2020 2020 2020 2020 2020  ia ".           
-000429e0: 2066 2261 6e64 2072 756e 2070 726f 6772   f"and run progr
-000429f0: 616d 2061 6761 696e 2e20 287b 6773 2e70  am again. ({gs.p
-00042a00: 612e 646f 776e 6c6f 6164 5f6d 6564 6961  a.download_media
-00042a10: 5f6e 616d 657d 2922 0a20 2020 2020 2020  _name})".       
-00042a20: 2029 0a20 2020 2065 6c69 6620 6773 2e70   ).    elif gs.p
-00042a30: 612e 646f 776e 6c6f 6164 5f6d 6564 6961  a.download_media
-00042a40: 2061 6e64 2067 732e 7061 2e64 6f77 6e6c   and gs.pa.downl
-00042a50: 6f61 645f 6d65 6469 615f 6e61 6d65 206e  oad_media_name n
-00042a60: 6f74 2069 6e20 280a 2020 2020 2020 2020  ot in (.        
-00042a70: 4d45 4449 415f 4e41 4d45 5f53 4f55 5243  MEDIA_NAME_SOURC
-00042a80: 452c 0a20 2020 2020 2020 204d 4544 4941  E,.        MEDIA
-00042a90: 5f4e 414d 455f 434c 4541 4e2c 0a20 2020  _NAME_CLEAN,.   
-00042aa0: 2020 2020 204d 4544 4941 5f4e 414d 455f       MEDIA_NAME_
-00042ab0: 4556 454e 5449 442c 0a20 2020 2020 2020  EVENTID,.       
-00042ac0: 204d 4544 4941 5f4e 414d 455f 5449 4d45   MEDIA_NAME_TIME
-00042ad0: 2c0a 2020 2020 293a 0a20 2020 2020 2020  ,.    ):.       
-00042ae0: 2074 203d 2028 0a20 2020 2020 2020 2020   t = (.         
-00042af0: 2020 2022 496e 636f 7272 6563 7420 7661     "Incorrect va
-00042b00: 6c75 6520 6769 7665 6e20 666f 7220 2d2d  lue given for --
-00042b10: 646f 776e 6c6f 6164 2d6d 6564 6961 2d6e  download-media-n
-00042b20: 616d 652e 2022 0a20 2020 2020 2020 2020  ame. ".         
-00042b30: 2020 2066 224f 6e6c 7920 277b 4d45 4449     f"Only '{MEDI
-00042b40: 415f 4e41 4d45 5f53 4f55 5243 457d 272c  A_NAME_SOURCE}',
-00042b50: 2027 7b4d 4544 4941 5f4e 414d 455f 434c   '{MEDIA_NAME_CL
-00042b60: 4541 4e7d 272c 2022 0a20 2020 2020 2020  EAN}', ".       
-00042b70: 2020 2020 2066 2227 7b4d 4544 4941 5f4e       f"'{MEDIA_N
-00042b80: 414d 455f 4556 454e 5449 447d 272c 2027  AME_EVENTID}', '
-00042b90: 7b4d 4544 4941 5f4e 414d 455f 5449 4d45  {MEDIA_NAME_TIME
-00042ba0: 7d27 2061 7265 2061 6c6c 6f77 6564 2e22  }' are allowed."
-00042bb0: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
-00042bc0: 6c69 6620 6773 2e70 612e 6c69 7374 656e  lif gs.pa.listen
-00042bd0: 203d 3d20 5441 494c 2061 6e64 2028 6773   == TAIL and (gs
-00042be0: 2e70 612e 7461 696c 203c 3d20 3029 3a0a  .pa.tail <= 0):.
-00042bf0: 2020 2020 2020 2020 7420 3d20 280a 2020          t = (.  
-00042c00: 2020 2020 2020 2020 2020 2241 6e20 696e            "An in
-00042c10: 7465 6765 7220 3120 6f72 206c 6172 6765  teger 1 or large
-00042c20: 7220 6d75 7374 2062 6520 7370 6563 6966  r must be specif
-00042c30: 6965 6420 7769 7468 202d 2d74 6169 6c20  ied with --tail 
-00042c40: 220a 2020 2020 2020 2020 2020 2020 6622  ".            f"
-00042c50: 287b 6773 2e70 612e 7461 696c 7d29 2e22  ({gs.pa.tail})."
-00042c60: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
-00042c70: 6c69 6620 6773 2e70 612e 7072 6f78 7920  lif gs.pa.proxy 
-00042c80: 616e 6420 6e6f 7420 280a 2020 2020 2020  and not (.      
-00042c90: 2020 6773 2e70 612e 7072 6f78 792e 7374    gs.pa.proxy.st
-00042ca0: 6172 7473 7769 7468 2822 6874 7470 3a2f  artswith("http:/
-00042cb0: 2f22 290a 2020 2020 2020 2020 6f72 2067  /").        or g
-00042cc0: 732e 7061 2e70 726f 7879 2e73 7461 7274  s.pa.proxy.start
-00042cd0: 7377 6974 6828 2273 6f63 6b73 343a 2f2f  swith("socks4://
-00042ce0: 2229 0a20 2020 2020 2020 206f 7220 6773  ").        or gs
-00042cf0: 2e70 612e 7072 6f78 792e 7374 6172 7473  .pa.proxy.starts
-00042d00: 7769 7468 2822 736f 636b 7335 3a2f 2f22  with("socks5://"
-00042d10: 290a 2020 2020 293a 0a20 2020 2020 2020  ).    ):.       
-00042d20: 2074 203d 2028 0a20 2020 2020 2020 2020   t = (.         
-00042d30: 2020 2022 5072 6f78 7920 6973 206e 6f74     "Proxy is not
-00042d40: 2063 6f72 7265 6374 2e20 5072 6f78 7920   correct. Proxy 
-00042d50: 7368 6f75 6c64 2073 7461 7274 2077 6974  should start wit
-00042d60: 6820 220a 2020 2020 2020 2020 2020 2020  h ".            
-00042d70: 2722 6874 7470 3a2f 2f22 2c20 2273 6f63  '"http://", "soc
-00042d80: 6b73 343a 2f2f 2220 6f72 2022 736f 636b  ks4://" or "sock
-00042d90: 7335 3a2f 2f22 2e20 270a 2020 2020 2020  s5://". '.      
-00042da0: 2020 2020 2020 6627 2059 6f75 7220 7072        f' Your pr
-00042db0: 6f78 7920 6973 2073 6574 2074 6f20 227b  oxy is set to "{
-00042dc0: 6773 2e70 612e 7072 6f78 797d 222e 270a  gs.pa.proxy}".'.
-00042dd0: 2020 2020 2020 2020 290a 2020 2020 656c          ).    el
-00042de0: 6966 2053 5444 494e 5f54 4f54 414c 203e  if STDIN_TOTAL >
-00042df0: 2031 3a0a 2020 2020 2020 2020 7420 3d20   1:.        t = 
-00042e00: 280a 2020 2020 2020 2020 2020 2020 2754  (.            'T
-00042e10: 6865 2063 6861 7261 6374 6572 2022 2d22  he character "-"
-00042e20: 2069 7320 7573 6564 206d 6f72 6520 7468   is used more th
-00042e30: 616e 206f 6e63 6520 270a 2020 2020 2020  an once '.      
-00042e40: 2020 2020 2020 2774 6f20 7265 7072 6573        'to repres
-00042e50: 656e 7420 2273 7464 696e 2220 666f 7220  ent "stdin" for 
-00042e60: 7069 7069 6e67 2069 6e66 6f72 6d61 7469  piping informati
-00042e70: 6f6e 2027 0a20 2020 2020 2020 2020 2020  on '.           
-00042e80: 2066 2769 6e74 6f20 227b 5052 4f47 5f57   f'into "{PROG_W
-00042e90: 4954 484f 5554 5f45 5854 7d22 2e20 5374  ITHOUT_EXT}". St
-00042ea0: 6469 6e20 7069 7065 2063 616e 2027 0a20  din pipe can '. 
-00042eb0: 2020 2020 2020 2020 2020 2022 6265 2075             "be u
-00042ec0: 7365 6420 6174 206d 6f73 7420 6f6e 6365  sed at most once
-00042ed0: 2e22 0a20 2020 2020 2020 2029 0a20 2020  .".        ).   
-00042ee0: 2065 6c69 6620 6773 2e70 612e 6e6f 5f73   elif gs.pa.no_s
-00042ef0: 736c 2061 6e64 2067 732e 7061 2e73 736c  sl and gs.pa.ssl
-00042f00: 5f63 6572 7469 6669 6361 7465 2021 3d20  _certificate != 
-00042f10: 5353 4c5f 4345 5254 4946 4943 4154 455f  SSL_CERTIFICATE_
-00042f20: 4445 4641 554c 543a 0a20 2020 2020 2020  DEFAULT:.       
-00042f30: 2074 203d 2028 0a20 2020 2020 2020 2020   t = (.         
-00042f40: 2020 2022 4f70 7469 6f6e 7320 2d2d 6e6f     "Options --no
-00042f50: 2d73 736c 2061 6e64 202d 2d73 736c 2d63  -ssl and --ssl-c
-00042f60: 6572 7469 6669 6361 7465 2063 616e 6e6f  ertificate canno
-00042f70: 7420 6265 2075 7365 6420 220a 2020 2020  t be used ".    
-00042f80: 2020 2020 2020 2020 2274 6f67 6574 6865          "togethe
-00042f90: 722e 2055 7365 206f 6e65 206f 7220 7468  r. Use one or th
-00042fa0: 6520 6f74 6865 722e 220a 2020 2020 2020  e other.".      
-00042fb0: 2020 290a 2020 2020 656c 7365 3a0a 2020    ).    else:.  
-00042fc0: 2020 2020 2020 6966 2067 732e 7061 2e73        if gs.pa.s
-00042fd0: 796e 6320 6973 204e 6f6e 653a 0a20 2020  ync is None:.   
-00042fe0: 2020 2020 2020 2020 2067 732e 7061 2e73           gs.pa.s
-00042ff0: 796e 6320 3d20 5359 4e43 5f44 4546 4155  ync = SYNC_DEFAU
-00043000: 4c54 0a20 2020 2020 2020 2067 732e 6c6f  LT.        gs.lo
-00043010: 672e 6465 6275 6728 6622 4f70 7469 6f6e  g.debug(f"Option
-00043020: 202d 2d73 796e 6320 6973 2073 6574 2074   --sync is set t
-00043030: 6f20 7b67 732e 7061 2e73 796e 637d 2e22  o {gs.pa.sync}."
-00043040: 290a 2020 2020 2020 2020 6773 2e6c 6f67  ).        gs.log
-00043050: 2e64 6562 7567 2822 416c 6c20 6172 6775  .debug("All argu
-00043060: 6d65 6e74 7320 6172 6520 7661 6c69 642e  ments are valid.
-00043070: 2041 6c6c 2063 6865 636b 7320 7061 7373   All checks pass
-00043080: 6564 2e22 290a 2020 2020 2020 2020 7265  ed.").        re
-00043090: 7475 726e 2020 2320 616c 6c20 4f4b 0a20  turn  # all OK. 
-000430a0: 2020 2023 2067 732e 6572 725f 636f 756e     # gs.err_coun
-000430b0: 7420 2b3d 2031 2023 2064 6f20 6e6f 7420  t += 1 # do not 
-000430c0: 696e 6372 656d 656e 7420 666f 7220 4d61  increment for Ma
-000430d0: 7472 6978 436f 6d6d 616e 6465 7245 7272  trixCommanderErr
-000430e0: 6f72 0a20 2020 2072 6169 7365 204d 6174  or.    raise Mat
-000430f0: 7269 7843 6f6d 6d61 6e64 6572 4572 726f  rixCommanderErro
-00043100: 7228 2245 3234 303a 2022 202b 2074 2920  r("E240: " + t) 
-00043110: 6672 6f6d 204e 6f6e 650a 0a0a 636c 6173  from None...clas
-00043120: 7320 636f 6c6f 7273 3a0a 2020 2020 2222  s colors:.    ""
-00043130: 2243 6f6c 6f72 7320 636c 6173 732e 0a0a  "Colors class...
-00043140: 2020 2020 7265 7365 7420 616c 6c20 636f      reset all co
-00043150: 6c6f 7273 2077 6974 6820 636f 6c6f 7273  lors with colors
-00043160: 2e72 6573 6574 2e0a 2020 2020 3220 7375  .reset..    2 su
-00043170: 6220 636c 6173 7365 733a 2066 6720 666f  b classes: fg fo
-00043180: 7220 666f 7265 6772 6f75 6e64 2061 6e64  r foreground and
-00043190: 2062 6720 666f 7220 6261 636b 6772 6f75   bg for backgrou
-000431a0: 6e64 3b0a 2020 2020 7573 6520 6173 2063  nd;.    use as c
-000431b0: 6f6c 6f72 732e 7375 6263 6c61 7373 2e63  olors.subclass.c
-000431c0: 6f6c 6f72 6e61 6d65 2e0a 2020 2020 692e  olorname..    i.
-000431d0: 652e 2063 6f6c 6f72 732e 6667 2e72 6564  e. colors.fg.red
-000431e0: 206f 7220 636f 6c6f 7273 2e62 672e 6772   or colors.bg.gr
-000431f0: 6565 6e0a 2020 2020 616c 736f 2c20 7468  een.    also, th
-00043200: 6520 6765 6e65 7269 6320 626f 6c64 2c20  e generic bold, 
-00043210: 6469 7361 626c 652c 2075 6e64 6572 6c69  disable, underli
-00043220: 6e65 2c20 7265 7665 7273 652c 2073 7472  ne, reverse, str
-00043230: 696b 6520 7468 726f 7567 682c 0a20 2020  ike through,.   
-00043240: 2061 6e64 2069 6e76 6973 6962 6c65 2077   and invisible w
-00043250: 6f72 6b20 7769 7468 2074 6865 206d 6169  ork with the mai
-00043260: 6e20 636c 6173 7320 692e 652e 2063 6f6c  n class i.e. col
-00043270: 6f72 732e 626f 6c64 0a0a 2020 2020 7573  ors.bold..    us
-00043280: 6520 6c69 6b65 2074 6869 733a 0a20 2020  e like this:.   
-00043290: 2070 7269 6e74 2863 6f6c 6f72 732e 6267   print(colors.bg
-000432a0: 2e67 7265 656e 2c20 2253 4b6b 222c 2063  .green, "SKk", c
-000432b0: 6f6c 6f72 732e 6667 2e72 6564 2c20 2241  olors.fg.red, "A
-000432c0: 6d61 7274 7961 2229 0a20 2020 2070 7269  martya").    pri
-000432d0: 6e74 2863 6f6c 6f72 732e 6267 2e6c 6967  nt(colors.bg.lig
-000432e0: 6874 6772 6579 2c20 2253 4b6b 222c 2063  htgrey, "SKk", c
-000432f0: 6f6c 6f72 732e 6667 2e72 6564 2c20 2241  olors.fg.red, "A
-00043300: 6d61 7274 7961 2229 0a20 2020 2022 2222  martya").    """
-00043310: 0a0a 2020 2020 7265 7365 7420 3d20 225c  ..    reset = "\
-00043320: 3033 335b 306d 220a 2020 2020 626f 6c64  033[0m".    bold
-00043330: 203d 2022 5c30 3333 5b30 316d 220a 2020   = "\033[01m".  
-00043340: 2020 6469 7361 626c 6520 3d20 225c 3033    disable = "\03
-00043350: 335b 3032 6d22 0a20 2020 2069 6e76 6572  3[02m".    inver
-00043360: 7365 203d 2022 5c30 3333 5b30 336d 220a  se = "\033[03m".
-00043370: 2020 2020 756e 6465 726c 696e 6520 3d20      underline = 
-00043380: 225c 3033 335b 3034 6d22 0a20 2020 2062  "\033[04m".    b
-00043390: 6c69 6e6b 203d 2022 5c30 3333 5b30 356d  link = "\033[05m
-000433a0: 220a 2020 2020 626c 696e 6b32 203d 2022  ".    blink2 = "
-000433b0: 5c30 3333 5b30 366d 220a 2020 2020 7265  \033[06m".    re
-000433c0: 7665 7273 6520 3d20 225c 3033 335b 3037  verse = "\033[07
-000433d0: 6d22 0a20 2020 2069 6e76 6973 6962 6c65  m".    invisible
-000433e0: 203d 2022 5c30 3333 5b30 386d 220a 2020   = "\033[08m".  
-000433f0: 2020 7374 7269 6b65 7468 726f 7567 6820    strikethrough 
-00043400: 3d20 225c 3033 335b 3039 6d22 0a0a 2020  = "\033[09m"..  
-00043410: 2020 636c 6173 7320 6667 3a0a 2020 2020    class fg:.    
-00043420: 2020 2020 626c 6163 6b20 3d20 225c 3033      black = "\03
-00043430: 335b 3330 6d22 0a20 2020 2020 2020 2072  3[30m".        r
-00043440: 6564 203d 2022 5c30 3333 5b33 316d 220a  ed = "\033[31m".
-00043450: 2020 2020 2020 2020 6772 6565 6e20 3d20          green = 
-00043460: 225c 3033 335b 3332 6d22 0a20 2020 2020  "\033[32m".     
-00043470: 2020 206f 7261 6e67 6520 3d20 225c 3033     orange = "\03
-00043480: 335b 3333 6d22 0a20 2020 2020 2020 2062  3[33m".        b
-00043490: 6c75 6520 3d20 225c 3033 335b 3334 6d22  lue = "\033[34m"
-000434a0: 0a20 2020 2020 2020 2070 7572 706c 6520  .        purple 
-000434b0: 3d20 225c 3033 335b 3335 6d22 0a20 2020  = "\033[35m".   
-000434c0: 2020 2020 2063 7961 6e20 3d20 225c 3033       cyan = "\03
-000434d0: 335b 3336 6d22 0a20 2020 2020 2020 206c  3[36m".        l
-000434e0: 6967 6874 6772 6579 203d 2022 5c30 3333  ightgrey = "\033
-000434f0: 5b33 376d 220a 2020 2020 2020 2020 6461  [37m".        da
-00043500: 726b 6772 6579 203d 2022 5c30 3333 5b39  rkgrey = "\033[9
-00043510: 306d 220a 2020 2020 2020 2020 6c69 6768  0m".        ligh
-00043520: 7472 6564 203d 2022 5c30 3333 5b39 316d  tred = "\033[91m
-00043530: 220a 2020 2020 2020 2020 6c69 6768 7467  ".        lightg
-00043540: 7265 656e 203d 2022 5c30 3333 5b39 326d  reen = "\033[92m
-00043550: 220a 2020 2020 2020 2020 7965 6c6c 6f77  ".        yellow
-00043560: 203d 2022 5c30 3333 5b39 336d 220a 2020   = "\033[93m".  
-00043570: 2020 2020 2020 6c69 6768 7462 6c75 6520        lightblue 
-00043580: 3d20 225c 3033 335b 3934 6d22 0a20 2020  = "\033[94m".   
-00043590: 2020 2020 2070 696e 6b20 3d20 225c 3033       pink = "\03
-000435a0: 335b 3935 6d22 0a20 2020 2020 2020 206c  3[95m".        l
-000435b0: 6967 6874 6379 616e 203d 2022 5c30 3333  ightcyan = "\033
-000435c0: 5b39 366d 220a 0a20 2020 2063 6c61 7373  [96m"..    class
-000435d0: 2062 673a 0a20 2020 2020 2020 2062 6c61   bg:.        bla
-000435e0: 636b 203d 2022 5c30 3333 5b34 306d 220a  ck = "\033[40m".
-000435f0: 2020 2020 2020 2020 7265 6420 3d20 225c          red = "\
-00043600: 3033 335b 3431 6d22 0a20 2020 2020 2020  033[41m".       
-00043610: 2067 7265 656e 203d 2022 5c30 3333 5b34   green = "\033[4
-00043620: 326d 220a 2020 2020 2020 2020 6f72 616e  2m".        oran
-00043630: 6765 203d 2022 5c30 3333 5b34 336d 220a  ge = "\033[43m".
-00043640: 2020 2020 2020 2020 626c 7565 203d 2022          blue = "
-00043650: 5c30 3333 5b34 346d 220a 2020 2020 2020  \033[44m".      
-00043660: 2020 7075 7270 6c65 203d 2022 5c30 3333    purple = "\033
-00043670: 5b34 356d 220a 2020 2020 2020 2020 6379  [45m".        cy
-00043680: 616e 203d 2022 5c30 3333 5b34 366d 220a  an = "\033[46m".
-00043690: 2020 2020 2020 2020 6c69 6768 7467 7265          lightgre
-000436a0: 7920 3d20 225c 3033 335b 3437 6d22 0a0a  y = "\033[47m"..
-000436b0: 0a23 2061 6363 6f72 6469 6e67 2074 6f20  .# according to 
-000436c0: 6c69 6e74 6572 3a20 6675 6e63 7469 6f6e  linter: function
-000436d0: 2069 7320 746f 6f20 636f 6d70 6c65 782c   is too complex,
-000436e0: 2043 3930 310a 6465 6620 6d61 696e 5f69   C901.def main_i
-000436f0: 6e6e 6572 280a 2020 2020 6172 6776 3a20  nner(.    argv: 
-00043700: 556e 696f 6e5b 4e6f 6e65 2c20 6c69 7374  Union[None, list
-00043710: 5d20 3d20 4e6f 6e65 0a29 202d 3e20 4e6f  ] = None.) -> No
-00043720: 6e65 3a20 2023 206e 6f71 613a 2043 3930  ne:  # noqa: C90
-00043730: 3120 2320 6967 6e6f 7265 206d 6363 6162  1 # ignore mccab
-00043740: 6520 6966 2d74 6f6f 2d63 6f6d 706c 6578  e if-too-complex
-00043750: 0a20 2020 2022 2222 5275 6e20 7468 6520  .    """Run the 
-00043760: 7072 6f67 7261 6d2e 0a0a 2020 2020 4675  program...    Fu
-00043770: 6e63 7469 6f6e 2073 6967 6e61 7475 7265  nction signature
-00043780: 2069 6465 6e74 6963 616c 2074 6f20 6d61   identical to ma
-00043790: 696e 2829 2e0a 2020 2020 506c 6561 7365  in()..    Please
-000437a0: 2073 6565 206d 6169 6e28 292e 0a0a 2020   see main()...  
-000437b0: 2020 5265 7475 726e 7320 4e6f 6e65 2e20    Returns None. 
-000437c0: 5265 7475 726e 7320 6e6f 7468 696e 672e  Returns nothing.
-000437d0: 0a0a 2020 2020 5261 6973 6573 2065 7863  ..    Raises exc
-000437e0: 6570 7469 6f6e 2069 6620 616e 2065 7272  eption if an err
-000437f0: 6f72 2069 7320 6465 7465 6374 6564 2e20  or is detected. 
-00043800: 4d61 6e79 2065 7863 6570 7469 6f6e 7320  Many exceptions 
-00043810: 6172 650a 2020 2020 2020 2020 706f 7373  are.        poss
-00043820: 6962 6c65 2e20 4f6e 6520 6f66 2074 6865  ible. One of the
-00043830: 6d20 6973 3a20 4d61 7472 6978 436f 6d6d  m is: MatrixComm
-00043840: 616e 6465 7245 7272 6f72 2e0a 2020 2020  anderError..    
-00043850: 2020 2020 5365 7473 2067 6c6f 6261 6c20      Sets global 
-00043860: 7374 6174 6520 746f 2063 6f6d 6d75 6e69  state to communi
-00043870: 6361 7465 2065 7272 6f72 732e 0a0a 2020  cate errors...  
-00043880: 2020 2222 220a 2020 2020 6966 2061 7267    """.    if arg
-00043890: 763a 0a20 2020 2020 2020 2073 7973 2e61  v:.        sys.a
-000438a0: 7267 7620 3d20 6172 6776 0a20 2020 2023  rgv = argv.    #
-000438b0: 2070 7265 7061 7265 2074 6865 2067 6c6f   prepare the glo
-000438c0: 6261 6c20 7374 6174 650a 2020 2020 676c  bal state.    gl
-000438d0: 6f62 616c 2067 730a 2020 2020 6773 203d  obal gs.    gs =
-000438e0: 2047 6c6f 6261 6c53 7461 7465 2829 0a20   GlobalState(). 
-000438f0: 2020 2067 6c6f 6261 6c20 5345 500a 2020     global SEP.  
-00043900: 2020 2320 436f 6e73 7472 7563 7420 7468    # Construct th
-00043910: 6520 6172 6775 6d65 6e74 2070 6172 7365  e argument parse
-00043920: 720a 2020 2020 6170 203d 2061 7267 7061  r.    ap = argpa
-00043930: 7273 652e 4172 6775 6d65 6e74 5061 7273  rse.ArgumentPars
-00043940: 6572 280a 2020 2020 2020 2020 6164 645f  er(.        add_
-00043950: 6865 6c70 3d46 616c 7365 2c0a 2020 2020  help=False,.    
-00043960: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
-00043970: 2866 2257 656c 636f 6d65 2074 6f20 7b50  (f"Welcome to {P
-00043980: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
-00043990: 2c20 6120 4d61 7472 6978 2043 4c49 2063  , a Matrix CLI c
-000439a0: 6c69 656e 742e 2022 292c 0a20 2020 2020  lient. "),.     
-000439b0: 2020 2065 7069 6c6f 673d 2259 6f75 2061     epilog="You a
-000439c0: 7265 2072 756e 6e69 6e67 2022 0a20 2020  re running ".   
-000439d0: 2020 2020 2066 2276 6572 7369 6f6e 207b       f"version {
-000439e0: 5645 5253 494f 4e4e 527d 207b 5645 5253  VERSIONNR} {VERS
-000439f0: 494f 4e7d 2e20 456e 6a6f 792c 2073 7461  ION}. Enjoy, sta
-00043a00: 7220 6f6e 2047 6974 6875 6220 616e 6420  r on Github and 
-00043a10: 220a 2020 2020 2020 2020 2263 6f6e 7472  ".        "contr
-00043a20: 6962 7574 6520 6279 2073 7562 6d69 7474  ibute by submitt
-00043a30: 696e 6720 6120 5075 6c6c 2052 6571 7565  ing a Pull Reque
-00043a40: 7374 2e20 220a 2020 2020 2020 2020 6622  st. ".        f"
-00043a50: 416c 736f 2068 6176 6520 6120 6c6f 6f6b  Also have a look
-00043a60: 2061 7420 7b50 524f 475f 5749 5448 4f55   at {PROG_WITHOU
-00043a70: 545f 4558 547d 2d74 7569 2e20 222c 0a20  T_EXT}-tui. ",. 
-00043a80: 2020 2029 0a20 2020 2023 202d 682c 2073     ).    # -h, s
-00043a90: 6565 2061 6464 5f68 656c 703d 4661 6c73  ee add_help=Fals
-00043aa0: 650a 2020 2020 6170 2e61 6464 5f61 7267  e.    ap.add_arg
-00043ab0: 756d 656e 7428 0a20 2020 2020 2020 2023  ument(.        #
-00043ac0: 2073 6565 2073 6372 6970 7420 6372 6561   see script crea
-00043ad0: 7465 2068 656c 702e 6865 6c70 2e74 7874  te help.help.txt
-00043ae0: 0a20 2020 2020 2020 2023 2068 656c 7020  .        # help 
-00043af0: 7374 7269 6e67 2075 7020 746f 2062 7574  string up to but
-00043b00: 2065 7863 6c75 6469 6e67 2022 4465 7461   excluding "Deta
-00043b10: 696c 733a 3a22 2069 7320 7573 6564 2066  ils::" is used f
-00043b20: 6f72 0a20 2020 2020 2020 2023 2028 7368  or.        # (sh
-00043b30: 6f72 7429 2060 2d2d 6865 6c70 602e 2054  ort) `--help`. T
-00043b40: 6865 2066 756c 6c20 7465 7874 2077 696c  he full text wil
-00043b50: 6c20 6265 2075 7365 6420 666f 7220 6c6f  l be used for lo
-00043b60: 6e67 2060 2d2d 6d61 6e75 616c 602e 0a20  ng `--manual`.. 
-00043b70: 2020 2020 2020 2022 2d2d 7573 6167 6522         "--usage"
-00043b80: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
-00043b90: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
-00043ba0: 2020 6163 7469 6f6e 3d22 7374 6f72 655f    action="store_
-00043bb0: 7472 7565 222c 0a20 2020 2020 2020 2068  true",.        h
-00043bc0: 656c 703d 2250 7269 6e74 2075 7361 6765  elp="Print usage
-00043bd0: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-00043be0: 6169 6c73 3a3a 2053 6565 2061 6c73 6f20  ails:: See also 
-00043bf0: 2d2d 6865 6c70 2066 6f72 2070 7269 6e74  --help for print
-00043c00: 696e 6720 6120 6269 7420 6d6f 7265 2061  ing a bit more a
-00043c10: 6e64 202d 2d6d 616e 7561 6c20 220a 2020  nd --manual ".  
-00043c20: 2020 2020 2020 2266 6f72 2070 7269 6e74        "for print
-00043c30: 696e 6720 6120 6c6f 7420 6d6f 7265 2064  ing a lot more d
-00043c40: 6574 6169 6c65 6420 696e 666f 726d 6174  etailed informat
-00043c50: 696f 6e2e 222c 0a20 2020 2029 0a20 2020  ion.",.    ).   
-00043c60: 2023 202d 682c 2073 6565 2061 6464 5f68   # -h, see add_h
-00043c70: 656c 703d 4661 6c73 650a 2020 2020 6170  elp=False.    ap
-00043c80: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
-00043c90: 2020 2020 2020 2022 2d68 222c 0a20 2020         "-h",.   
-00043ca0: 2020 2020 2022 2d2d 6865 6c70 222c 0a20       "--help",. 
-00043cb0: 2020 2020 2020 2072 6571 7569 7265 643d         required=
-00043cc0: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
-00043cd0: 6374 696f 6e3d 2273 746f 7265 5f74 7275  ction="store_tru
-00043ce0: 6522 2c0a 2020 2020 2020 2020 6865 6c70  e",.        help
-00043cf0: 3d22 5072 696e 7420 6865 6c70 2e20 220a  ="Print help. ".
-00043d00: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
-00043d10: 3a3a 2053 6565 2061 6c73 6f20 2d2d 7573  :: See also --us
-00043d20: 6167 6520 666f 7220 7072 696e 7469 6e67  age for printing
-00043d30: 2065 7665 6e20 6c65 7373 2069 6e66 6f72   even less infor
-00043d40: 6d61 7469 6f6e 2c20 220a 2020 2020 2020  mation, ".      
-00043d50: 2020 2261 6e64 202d 2d6d 616e 7561 6c20    "and --manual 
-00043d60: 666f 7220 7072 696e 7469 6e67 206d 6f72  for printing mor
-00043d70: 6520 6465 7461 696c 6564 2069 6e66 6f72  e detailed infor
-00043d80: 6d61 7469 6f6e 2e22 2c0a 2020 2020 290a  mation.",.    ).
-00043d90: 2020 2020 2320 7365 6520 2d68 2c20 7365      # see -h, se
-00043da0: 6520 6164 645f 6865 6c70 3d46 616c 7365  e add_help=False
-00043db0: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
-00043dc0: 6d65 6e74 280a 2020 2020 2020 2020 222d  ment(.        "-
-00043dd0: 2d6d 616e 7561 6c22 2c0a 2020 2020 2020  -manual",.      
-00043de0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-00043df0: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
-00043e00: 3d22 7374 6f72 655f 7472 7565 222c 0a20  ="store_true",. 
-00043e10: 2020 2020 2020 2068 656c 703d 2250 7269         help="Pri
-00043e20: 6e74 206d 616e 7561 6c2e 2022 0a20 2020  nt manual. ".   
-00043e30: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-00043e40: 5365 6520 616c 736f 202d 2d75 7361 6765  See also --usage
-00043e50: 2066 6f72 2070 7269 6e74 696e 6720 7468   for printing th
-00043e60: 6520 6162 736f 6c75 7465 206d 696e 696d  e absolute minim
-00043e70: 756d 2c20 220a 2020 2020 2020 2020 2261  um, ".        "a
-00043e80: 6e64 202d 2d68 656c 7020 666f 7220 7072  nd --help for pr
-00043e90: 696e 7469 6e67 206c 6573 732e 222c 0a20  inting less.",. 
-00043ea0: 2020 2029 0a20 2020 2023 2073 6565 202d     ).    # see -
-00043eb0: 682c 2073 6565 2061 6464 5f68 656c 703d  h, see add_help=
-00043ec0: 4661 6c73 650a 2020 2020 6170 2e61 6464  False.    ap.add
-00043ed0: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-00043ee0: 2020 2022 2d2d 7265 6164 6d65 222c 0a20     "--readme",. 
-00043ef0: 2020 2020 2020 2072 6571 7569 7265 643d         required=
-00043f00: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
-00043f10: 6374 696f 6e3d 2273 746f 7265 5f74 7275  ction="store_tru
-00043f20: 6522 2c0a 2020 2020 2020 2020 6865 6c70  e",.        help
-00043f30: 3d22 5072 696e 7420 5245 4144 4d45 2e6d  ="Print README.m
-00043f40: 6420 6669 6c65 2e20 220a 2020 2020 2020  d file. ".      
-00043f50: 2020 2244 6574 6169 6c73 3a3a 2054 7269    "Details:: Tri
-00043f60: 6573 2074 6f20 7072 696e 7420 7468 6520  es to print the 
-00043f70: 6c6f 6361 6c20 5245 4144 4d45 2e6d 6420  local README.md 
-00043f80: 6669 6c65 2066 726f 6d20 696e 7374 616c  file from instal
-00043f90: 6c61 7469 6f6e 2e20 220a 2020 2020 2020  lation. ".      
-00043fa0: 2020 2249 6620 6e6f 7420 666f 756e 6420    "If not found 
-00043fb0: 6974 2077 696c 6c20 6765 7420 7468 6520  it will get the 
-00043fc0: 5245 4144 4d45 2e6d 6420 6669 6c65 2066  README.md file f
-00043fd0: 726f 6d20 6769 7468 7562 2e63 6f6d 2061  rom github.com a
-00043fe0: 6e64 2022 0a20 2020 2020 2020 2022 7072  nd ".        "pr
-00043ff0: 696e 7420 6974 2e20 5365 6520 616c 736f  int it. See also
-00044000: 202d 2d75 7361 6765 2c20 2d2d 6865 6c70   --usage, --help
-00044010: 2c20 616e 6420 2d2d 6d61 6e75 616c 2e22  , and --manual."
-00044020: 2c0a 2020 2020 290a 2020 2020 2320 4164  ,.    ).    # Ad
-00044030: 6420 7468 6520 6172 6775 6d65 6e74 7320  d the arguments 
-00044040: 746f 2074 6865 2070 6172 7365 720a 2020  to the parser.  
-00044050: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
-00044060: 7428 0a20 2020 2020 2020 2022 2d64 222c  t(.        "-d",
-00044070: 0a20 2020 2020 2020 2022 2d2d 6465 6275  .        "--debu
-00044080: 6722 2c0a 2020 2020 2020 2020 6163 7469  g",.        acti
-00044090: 6f6e 3d22 636f 756e 7422 2c0a 2020 2020  on="count",.    
-000440a0: 2020 2020 6465 6661 756c 743d 302c 0a20      default=0,. 
-000440b0: 2020 2020 2020 2068 656c 703d 2250 7269         help="Pri
-000440c0: 6e74 2064 6562 7567 2069 6e66 6f72 6d61  nt debug informa
-000440d0: 7469 6f6e 2e20 220a 2020 2020 2020 2020  tion. ".        
-000440e0: 2244 6574 6169 6c73 3a3a 2049 6620 7573  "Details:: If us
-000440f0: 6564 206f 6e63 652c 206f 6e6c 7920 7468  ed once, only th
-00044100: 6520 6c6f 6720 6c65 7665 6c20 6f66 2022  e log level of "
-00044110: 0a20 2020 2020 2020 2066 227b 5052 4f47  .        f"{PROG
-00044120: 5f57 4954 484f 5554 5f45 5854 7d20 6973  _WITHOUT_EXT} is
-00044130: 2073 6574 2074 6f20 4445 4255 472e 2022   set to DEBUG. "
-00044140: 0a20 2020 2020 2020 2027 4966 2075 7365  .        'If use
-00044150: 6420 7477 6963 6520 2822 2d64 202d 6422  d twice ("-d -d"
-00044160: 206f 7220 222d 6464 2229 2074 6865 6e20   or "-dd") then 
-00044170: 270a 2020 2020 2020 2020 6622 6c6f 6720  '.        f"log 
-00044180: 6c65 7665 6c73 206f 6620 626f 7468 207b  levels of both {
-00044190: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
-000441a0: 7d20 616e 6420 756e 6465 726c 7969 6e67  } and underlying
-000441b0: 206d 6f64 756c 6573 2061 7265 2022 0a20   modules are ". 
-000441c0: 2020 2020 2020 2027 7365 7420 746f 2044         'set to D
-000441d0: 4542 5547 2e20 222d 6422 2069 7320 6120  EBUG. "-d" is a 
-000441e0: 7368 6f72 7463 7574 2066 6f72 2022 2d2d  shortcut for "--
-000441f0: 6c6f 672d 6c65 7665 6c20 4445 4255 4722  log-level DEBUG"
-00044200: 2e20 270a 2020 2020 2020 2020 2753 6565  . '.        'See
-00044210: 2061 6c73 6f20 2d2d 6c6f 672d 6c65 7665   also --log-leve
-00044220: 6c2e 2022 2d64 2220 7461 6b65 7320 7072  l. "-d" takes pr
-00044230: 6563 6564 656e 6365 206f 7665 7220 222d  ecedence over "-
-00044240: 2d6c 6f67 2d6c 6576 656c 222e 2027 0a20  -log-level". '. 
-00044250: 2020 2020 2020 2027 4164 6469 7469 6f6e         'Addition
-00044260: 616c 6c79 2c20 6861 7665 2061 206c 6f6f  ally, have a loo
-00044270: 6b20 616c 736f 2061 7420 7468 6520 6f70  k also at the op
-00044280: 7469 6f6e 2022 2d2d 7665 7262 6f73 6522  tion "--verbose"
-00044290: 2e20 272c 0a20 2020 2029 0a20 2020 2061  . ',.    ).    a
-000442a0: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
-000442b0: 2020 2020 2020 2020 222d 2d6c 6f67 2d6c          "--log-l
-000442c0: 6576 656c 222c 0a20 2020 2020 2020 2072  evel",.        r
-000442d0: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
-000442e0: 2020 2020 2020 2061 6374 696f 6e3d 2265         action="e
-000442f0: 7874 656e 6422 2c0a 2020 2020 2020 2020  xtend",.        
-00044300: 6e61 7267 733d 222b 222c 0a20 2020 2020  nargs="+",.     
-00044310: 2020 2074 7970 653d 7374 722c 0a20 2020     type=str,.   
-00044320: 2020 2020 206d 6574 6176 6172 3d28 2244       metavar=("D
-00044330: 4542 5547 7c49 4e46 4f7c 5741 524e 494e  EBUG|INFO|WARNIN
-00044340: 477c 4552 524f 527c 4352 4954 4943 414c  G|ERROR|CRITICAL
-00044350: 2229 2c0a 2020 2020 2020 2020 6865 6c70  "),.        help
-00044360: 3d22 5365 7420 7468 6520 6c6f 6720 6c65  ="Set the log le
-00044370: 7665 6c28 7329 2e20 220a 2020 2020 2020  vel(s). ".      
-00044380: 2020 2244 6574 6169 6c73 3a3a 2050 6f73    "Details:: Pos
-00044390: 7369 626c 6520 7661 6c75 6573 2061 7265  sible values are
-000443a0: 2022 0a20 2020 2020 2020 2027 2244 4542   ".        '"DEB
-000443b0: 5547 222c 2022 494e 464f 222c 2022 5741  UG", "INFO", "WA
-000443c0: 524e 494e 4722 2c20 2245 5252 4f52 222c  RNING", "ERROR",
-000443d0: 2061 6e64 2022 4352 4954 4943 414c 222e   and "CRITICAL".
-000443e0: 2027 0a20 2020 2020 2020 2022 4966 202d   '.        "If -
-000443f0: 2d6c 6f67 5f6c 6576 656c 2069 7320 7573  -log_level is us
-00044400: 6564 2077 6974 6820 6f6e 6520 6c65 7665  ed with one leve
-00044410: 6c20 6172 6775 6d65 6e74 2c20 6f6e 6c79  l argument, only
-00044420: 2074 6865 206c 6f67 206c 6576 656c 2022   the log level "
-00044430: 0a20 2020 2020 2020 2066 226f 6620 7b50  .        f"of {P
-00044440: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
-00044450: 2069 7320 7365 7420 746f 2074 6865 2073   is set to the s
-00044460: 7065 6369 6669 6564 2076 616c 7565 2e20  pecified value. 
-00044470: 220a 2020 2020 2020 2020 2249 6620 2d2d  ".        "If --
-00044480: 6c6f 675f 6c65 7665 6c20 6973 2075 7365  log_level is use
-00044490: 6420 7769 7468 2074 776f 206c 6576 656c  d with two level
-000444a0: 2061 7267 756d 656e 7420 220a 2020 2020   argument ".    
-000444b0: 2020 2020 2728 652e 672e 2022 2d2d 6c6f      '(e.g. "--lo
-000444c0: 672d 6c65 7665 6c20 5741 524e 494e 4720  g-level WARNING 
-000444d0: 4552 524f 5222 2920 7468 656e 2027 0a20  ERROR") then '. 
-000444e0: 2020 2020 2020 2066 226c 6f67 206c 6576         f"log lev
-000444f0: 656c 7320 6f66 2062 6f74 6820 7b50 524f  els of both {PRO
-00044500: 475f 5749 5448 4f55 545f 4558 547d 2061  G_WITHOUT_EXT} a
-00044510: 6e64 2075 6e64 6572 6c79 696e 6720 6d6f  nd underlying mo
-00044520: 6475 6c65 7320 6172 6520 220a 2020 2020  dules are ".    
-00044530: 2020 2020 2273 6574 2074 6f20 7468 6520      "set to the 
-00044540: 7370 6563 6966 6965 6420 7661 6c75 6573  specified values
-00044550: 2e20 220a 2020 2020 2020 2020 2253 6565  . ".        "See
-00044560: 2061 6c73 6f20 2d2d 6465 6275 672e 222c   also --debug.",
-00044570: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-00044580: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-00044590: 2020 2020 222d 2d76 6572 626f 7365 222c      "--verbose",
-000445a0: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
-000445b0: 2263 6f75 6e74 222c 0a20 2020 2020 2020  "count",.       
-000445c0: 2064 6566 6175 6c74 3d30 2c0a 2020 2020   default=0,.    
-000445d0: 2020 2020 6865 6c70 3d22 5365 7420 7468      help="Set th
-000445e0: 6520 7665 7262 6f73 6974 7920 6c65 7665  e verbosity leve
-000445f0: 6c2e 2022 0a20 2020 2020 2020 2022 4465  l. ".        "De
-00044600: 7461 696c 733a 3a20 4966 206e 6f74 2075  tails:: If not u
-00044610: 7365 642c 2074 6865 6e20 7665 7262 6f73  sed, then verbos
-00044620: 6974 7920 7769 6c6c 2062 6520 220a 2020  ity will be ".  
-00044630: 2020 2020 2020 2273 6574 2074 6f20 6c6f        "set to lo
-00044640: 772e 2049 6620 7573 6564 206f 6e63 652c  w. If used once,
-00044650: 2076 6572 626f 7369 7479 2077 696c 6c20   verbosity will 
-00044660: 6265 2068 6967 682e 2022 0a20 2020 2020  be high. ".     
-00044670: 2020 2022 4966 2075 7365 6420 6d6f 7265     "If used more
-00044680: 2074 6861 6e20 6f6e 6365 2c20 7665 7262   than once, verb
-00044690: 6f73 6974 7920 7769 6c6c 2062 6520 7665  osity will be ve
-000446a0: 7279 2068 6967 682e 2022 0a20 2020 2020  ry high. ".     
-000446b0: 2020 2022 5665 7262 6f73 6974 7920 6f6e     "Verbosity on
-000446c0: 6c79 2061 6666 6563 7473 2074 6865 2064  ly affects the d
-000446d0: 6562 7567 2069 6e66 6f72 6d61 7469 6f6e  ebug information
-000446e0: 2e20 220a 2020 2020 2020 2020 2253 6f2c  . ".        "So,
-000446f0: 2069 6620 272d 2d64 6562 7567 2720 6973   if '--debug' is
-00044700: 206e 6f74 2075 7365 6420 7468 656e 2027   not used then '
-00044710: 2d2d 7665 7262 6f73 6527 2077 696c 6c20  --verbose' will 
-00044720: 6265 2069 676e 6f72 6564 2e22 2c0a 2020  be ignored.",.  
-00044730: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
-00044740: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-00044750: 2022 2d2d 6c6f 6769 6e22 2c0a 2020 2020   "--login",.    
-00044760: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-00044770: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
-00044780: 3d73 7472 2c20 2023 206c 6f67 696e 206d  =str,  # login m
-00044790: 6574 686f 643a 2070 6173 7377 6f72 642c  ethod: password,
-000447a0: 2073 736f 2c20 2861 6363 6573 732d 746f   sso, (access-to
-000447b0: 6b65 6e29 0a20 2020 2020 2020 206d 6574  ken).        met
-000447c0: 6176 6172 3d22 5041 5353 574f 5244 7c53  avar="PASSWORD|S
-000447d0: 534f 222c 0a20 2020 2020 2020 2068 656c  SO",.        hel
-000447e0: 703d 224c 6f67 696e 2074 6f20 616e 6420  p="Login to and 
-000447f0: 6175 7468 656e 7469 6361 7465 2077 6974  authenticate wit
-00044800: 6820 7468 6520 4d61 7472 6978 2068 6f6d  h the Matrix hom
-00044810: 6573 6572 7665 722e 2022 0a20 2020 2020  eserver. ".     
-00044820: 2020 2022 4465 7461 696c 733a 3a20 5468     "Details:: Th
-00044830: 6973 2072 6571 7569 7265 7320 6578 6163  is requires exac
-00044840: 746c 7920 6f6e 6520 6172 6775 6d65 6e74  tly one argument
-00044850: 2c20 7468 6520 6c6f 6769 6e20 6d65 7468  , the login meth
-00044860: 6f64 2e20 220a 2020 2020 2020 2020 2243  od. ".        "C
-00044870: 7572 7265 6e74 6c79 2074 776f 2063 686f  urrently two cho
-00044880: 6963 6573 2061 7265 206f 6666 6572 6564  ices are offered
-00044890: 3a20 2770 6173 7377 6f72 6427 2061 6e64  : 'password' and
-000448a0: 2027 7373 6f27 2e20 220a 2020 2020 2020   'sso'. ".      
-000448b0: 2020 2250 726f 7669 6465 206f 6e65 206f    "Provide one o
-000448c0: 6620 7468 6573 6520 6d65 7468 6f64 732e  f these methods.
-000448d0: 2022 0a20 2020 2020 2020 2022 4966 2079   ".        "If y
-000448e0: 6f75 2068 6176 6520 6368 6f73 656e 2027  ou have chosen '
-000448f0: 7061 7373 776f 7264 272c 2022 0a20 2020  password', ".   
-00044900: 2020 2020 2022 796f 7520 7769 6c6c 2061       "you will a
-00044910: 7574 6865 6e74 6963 6174 6520 7468 726f  uthenticate thro
-00044920: 7567 6820 796f 7572 2061 6363 6f75 6e74  ugh your account
-00044930: 2070 6173 7377 6f72 642e 2059 6f75 2063   password. You c
-00044940: 616e 2022 0a20 2020 2020 2020 2022 6f70  an ".        "op
-00044950: 7469 6f6e 616c 6c79 2070 726f 7669 6465  tionally provide
-00044960: 2074 6865 7365 2061 6464 6974 696f 6e61   these additiona
-00044970: 6c20 6172 6775 6d65 6e74 733a 2022 0a20  l arguments: ". 
-00044980: 2020 2020 2020 2022 2d2d 686f 6d65 7365         "--homese
-00044990: 7276 6572 2074 6f20 7370 6563 6966 7920  rver to specify 
-000449a0: 7468 6520 4d61 7472 6978 2068 6f6d 6573  the Matrix homes
-000449b0: 6572 7665 722c 2022 0a20 2020 2020 2020  erver, ".       
-000449c0: 2022 2d2d 7573 6572 2d6c 6f67 696e 2074   "--user-login t
-000449d0: 6f20 7370 6563 6966 7920 7468 6520 6c6f  o specify the lo
-000449e0: 6720 696e 2075 7365 7220 6964 2c20 220a  g in user id, ".
-000449f0: 2020 2020 2020 2020 222d 2d70 6173 7377          "--passw
-00044a00: 6f72 6420 746f 2073 7065 6369 6679 2074  ord to specify t
-00044a10: 6865 2070 6173 7377 6f72 642c 2022 0a20  he password, ". 
-00044a20: 2020 2020 2020 2022 2d2d 6465 7669 6365         "--device
-00044a30: 2074 6f20 7370 6563 6966 7920 6120 6465   to specify a de
-00044a40: 7669 6365 206e 616d 652c 2022 0a20 2020  vice name, ".   
-00044a50: 2020 2020 2022 2d2d 726f 6f6d 2d64 6566       "--room-def
-00044a60: 6175 6c74 2074 6f20 7370 6563 6966 7920  ault to specify 
-00044a70: 6120 6465 6661 756c 7420 726f 6f6d 2066  a default room f
-00044a80: 6f72 2073 656e 6469 6e67 2f6c 6973 7465  or sending/liste
-00044a90: 6e69 6e67 2e20 220a 2020 2020 2020 2020  ning. ".        
-00044aa0: 2249 6620 796f 7520 6861 7665 2063 686f  "If you have cho
-00044ab0: 7365 6e20 2773 736f 272c 2022 0a20 2020  sen 'sso', ".   
-00044ac0: 2020 2020 2022 796f 7520 7769 6c6c 2061       "you will a
-00044ad0: 7574 6865 6e74 6963 6174 6520 7468 726f  uthenticate thro
-00044ae0: 7567 6820 5369 6e67 6c65 2053 6967 6e2d  ugh Single Sign-
-00044af0: 4f6e 2e20 4120 7765 622d 6272 6f77 7365  On. A web-browse
-00044b00: 7220 7769 6c6c 2022 0a20 2020 2020 2020  r will ".       
-00044b10: 2022 6265 2073 7461 7274 6564 2061 6e64   "be started and
-00044b20: 2079 6f75 2061 7574 6865 6e74 6963 6174   you authenticat
-00044b30: 6520 6f6e 2074 6865 2077 6562 7061 6765  e on the webpage
-00044b40: 2e20 596f 7520 6361 6e20 220a 2020 2020  . You can ".    
-00044b50: 2020 2020 226f 7074 696f 6e61 6c6c 7920      "optionally 
-00044b60: 7072 6f76 6964 6520 7468 6573 6520 6164  provide these ad
-00044b70: 6469 7469 6f6e 616c 2061 7267 756d 656e  ditional argumen
-00044b80: 7473 3a20 220a 2020 2020 2020 2020 222d  ts: ".        "-
-00044b90: 2d68 6f6d 6573 6572 7665 7220 746f 2073  -homeserver to s
-00044ba0: 7065 6369 6679 2074 6865 204d 6174 7269  pecify the Matri
-00044bb0: 7820 686f 6d65 7365 7276 6572 2c20 220a  x homeserver, ".
-00044bc0: 2020 2020 2020 2020 222d 2d75 7365 722d          "--user-
-00044bd0: 6c6f 6769 6e20 746f 2073 7065 6369 6679  login to specify
-00044be0: 2074 6865 206c 6f67 2069 6e20 7573 6572   the log in user
-00044bf0: 2069 642c 2022 0a20 2020 2020 2020 2022   id, ".        "
-00044c00: 2d2d 6465 7669 6365 2074 6f20 7370 6563  --device to spec
-00044c10: 6966 7920 6120 6465 7669 6365 206e 616d  ify a device nam
-00044c20: 652c 2022 0a20 2020 2020 2020 2022 2d2d  e, ".        "--
-00044c30: 726f 6f6d 2d64 6566 6175 6c74 2074 6f20  room-default to 
-00044c40: 7370 6563 6966 7920 6120 6465 6661 756c  specify a defaul
-00044c50: 7420 726f 6f6d 2066 6f72 2073 656e 6469  t room for sendi
-00044c60: 6e67 2f6c 6973 7465 6e69 6e67 2e20 220a  ng/listening. ".
-00044c70: 2020 2020 2020 2020 2253 6565 2061 6c6c          "See all
-00044c80: 2074 6865 2065 7874 7261 2061 7267 756d   the extra argum
-00044c90: 656e 7473 2066 6f72 2066 7572 7468 6572  ents for further
-00044ca0: 2065 7870 6c61 6e61 7469 6f6e 732e 202d   explanations. -
-00044cb0: 2d2d 2d2d 2022 0a20 2020 2020 2020 2022  ---- ".        "
-00044cc0: 5353 4f20 2853 696e 676c 6520 5369 676e  SSO (Single Sign
-00044cd0: 2d4f 6e29 2073 7461 7274 7320 6120 7765  -On) starts a we
-00044ce0: 6220 220a 2020 2020 2020 2020 2262 726f  b ".        "bro
-00044cf0: 7773 6572 2061 6e64 2063 6f6e 6e65 6374  wser and connect
-00044d00: 7320 7468 6520 7573 6572 2074 6f20 6120  s the user to a 
-00044d10: 7765 6220 7061 6765 206f 6e20 7468 6520  web page on the 
-00044d20: 220a 2020 2020 2020 2020 2273 6572 7665  ".        "serve
-00044d30: 7220 666f 7220 6c6f 6769 6e2e 2053 534f  r for login. SSO
-00044d40: 2077 696c 6c20 6f6e 6c79 2077 6f72 6b20   will only work 
-00044d50: 6966 2074 6865 2073 6572 7665 7220 220a  if the server ".
-00044d60: 2020 2020 2020 2020 2273 7570 706f 7274          "support
-00044d70: 7320 6974 2061 6e64 2069 6620 7468 6572  s it and if ther
-00044d80: 6520 6973 2061 6363 6573 7320 746f 2061  e is access to a
-00044d90: 2062 726f 7773 6572 2e20 536f 2c20 646f   browser. So, do
-00044da0: 6e27 7420 7573 6520 5353 4f20 220a 2020  n't use SSO ".  
-00044db0: 2020 2020 2020 226f 6e20 6865 6164 6c65        "on headle
-00044dc0: 7373 2068 6f6d 6573 6572 7665 7273 2077  ss homeservers w
-00044dd0: 6865 7265 2074 6865 7265 2069 7320 6e6f  here there is no
-00044de0: 2022 0a20 2020 2020 2020 2022 6272 6f77   ".        "brow
-00044df0: 7365 7220 696e 7374 616c 6c65 6420 6f72  ser installed or
-00044e00: 2061 6363 6573 7369 626c 652e 222c 0a20   accessible.",. 
-00044e10: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
-00044e20: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-00044e30: 2020 2320 222d 7622 2c20 2323 2069 6e63    # "-v", ## inc
-00044e40: 6f6d 7061 7469 626c 6520 6368 616e 6765  ompatible change
-00044e50: 2c20 2d76 206d 6f76 6564 2074 6f20 2d2d  , -v moved to --
-00044e60: 7665 7273 696f 6e0a 2020 2020 2020 2020  version.        
-00044e70: 222d 2d76 6572 6966 7922 2c0a 2020 2020  "--verify",.    
-00044e80: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-00044e90: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
-00044ea0: 3d73 7472 2c0a 2020 2020 2020 2020 6465  =str,.        de
-00044eb0: 6661 756c 743d 5645 5249 4659 5f55 4e55  fault=VERIFY_UNU
-00044ec0: 5345 445f 4445 4641 554c 542c 2020 2320  SED_DEFAULT,  # 
-00044ed0: 7768 656e 202d 7420 6973 206e 6f74 2075  when -t is not u
-00044ee0: 7365 640a 2020 2020 2020 2020 6e61 7267  sed.        narg
-00044ef0: 733d 223f 222c 2020 2320 6d61 6b65 7320  s="?",  # makes 
-00044f00: 7468 6520 776f 7264 206f 7074 696f 6e61  the word optiona
-00044f10: 6c0a 2020 2020 2020 2020 2320 7768 656e  l.        # when
-00044f20: 202d 7620 6973 2075 7365 642c 2062 7574   -v is used, but
-00044f30: 2074 6578 7420 6973 206e 6f74 2061 6464   text is not add
-00044f40: 6564 0a20 2020 2020 2020 2063 6f6e 7374  ed.        const
-00044f50: 3d56 4552 4946 595f 5553 4544 5f44 4546  =VERIFY_USED_DEF
-00044f60: 4155 4c54 2c0a 2020 2020 2020 2020 6d65  AULT,.        me
-00044f70: 7461 7661 723d 2245 4d4f 4a49 222c 0a20  tavar="EMOJI",. 
-00044f80: 2020 2020 2020 2068 656c 703d 2250 6572         help="Per
-00044f90: 666f 726d 2076 6572 6966 6963 6174 696f  form verificatio
-00044fa0: 6e2e 2022 0a20 2020 2020 2020 2022 4465  n. ".        "De
-00044fb0: 7461 696c 733a 3a20 4279 2064 6566 6175  tails:: By defau
-00044fc0: 6c74 2c20 6e6f 2022 0a20 2020 2020 2020  lt, no ".       
-00044fd0: 2022 7665 7269 6669 6361 7469 6f6e 2069   "verification i
-00044fe0: 7320 7065 7266 6f72 6d65 642e 2022 0a20  s performed. ". 
-00044ff0: 2020 2020 2020 2066 2750 6f73 7369 626c         f'Possibl
-00045000: 6520 7661 6c75 6573 2061 7265 3a20 227b  e values are: "{
-00045010: 454d 4f4a 497d 222e 2027 0a20 2020 2020  EMOJI}". '.     
-00045020: 2020 2022 4966 2076 6572 6966 6963 6174     "If verificat
-00045030: 696f 6e20 6973 2064 6573 6972 6564 2c20  ion is desired, 
-00045040: 7275 6e20 7468 6973 2070 726f 6772 616d  run this program
-00045050: 2069 6e20 7468 6520 220a 2020 2020 2020   in the ".      
-00045060: 2020 2266 6f72 6567 726f 756e 6420 286e    "foreground (n
-00045070: 6f74 2061 7320 6120 7365 7276 6963 6529  ot as a service)
-00045080: 2061 6e64 2077 6974 686f 7574 2061 2070   and without a p
-00045090: 6970 652e 2022 0a20 2020 2020 2020 2022  ipe. ".        "
-000450a0: 5768 696c 6520 7665 7269 6669 6361 7469  While verificati
-000450b0: 6f6e 2069 7320 6f70 7469 6f6e 616c 2069  on is optional i
-000450c0: 7420 6973 2068 6967 686c 7920 7265 636f  t is highly reco
-000450d0: 6d6d 656e 6465 642c 2061 6e64 2069 7420  mmended, and it 
-000450e0: 220a 2020 2020 2020 2020 2269 7320 7265  ".        "is re
-000450f0: 636f 6d6d 656e 6465 6420 746f 2062 6520  commended to be 
-00045100: 646f 6e65 2072 6967 6874 2061 6674 6572  done right after
-00045110: 2028 6f72 2074 6f67 6574 6865 7220 7769   (or together wi
-00045120: 7468 2920 7468 6520 220a 2020 2020 2020  th) the ".      
-00045130: 2020 222d 2d6c 6f67 696e 2061 6374 696f    "--login actio
-00045140: 6e2e 2056 6572 6966 6963 6174 696f 6e20  n. Verification 
-00045150: 6973 2061 6c77 6179 7320 696e 7465 7261  is always intera
-00045160: 6374 6976 652c 2069 2e65 2e20 6974 2022  ctive, i.e. it "
-00045170: 0a20 2020 2020 2020 2022 7265 7175 6972  .        "requir
-00045180: 6564 206b 6579 626f 6172 6420 696e 7075  ed keyboard inpu
-00045190: 742e 2022 0a20 2020 2020 2020 2022 5665  t. ".        "Ve
-000451a0: 7269 6669 6361 7469 6f6e 2071 7565 7374  rification quest
-000451b0: 696f 6e73 2022 0a20 2020 2020 2020 2022  ions ".        "
-000451c0: 7769 6c6c 2062 6520 7072 696e 7465 6420  will be printed 
-000451d0: 6f6e 2073 7464 6f75 7420 616e 6420 7468  on stdout and th
-000451e0: 6520 7573 6572 2068 6173 2074 6f20 7265  e user has to re
-000451f0: 7370 6f6e 6420 220a 2020 2020 2020 2020  spond ".        
-00045200: 2276 6961 2074 6865 206b 6579 626f 6172  "via the keyboar
-00045210: 6420 746f 2061 6363 6570 7420 6f72 2072  d to accept or r
-00045220: 656a 6563 7420 7665 7269 6669 6361 7469  eject verificati
-00045230: 6f6e 2e20 220a 2020 2020 2020 2020 224f  on. ".        "O
-00045240: 6e63 6520 7665 7269 6669 6361 7469 6f6e  nce verification
-00045250: 2069 7320 636f 6d70 6c65 7465 2c20 7468   is complete, th
-00045260: 6520 7072 6f67 7261 6d20 6d61 7920 6265  e program may be
-00045270: 2022 0a20 2020 2020 2020 2022 7275 6e20   ".        "run 
-00045280: 6173 2061 2073 6572 7669 6365 2e20 5665  as a service. Ve
-00045290: 7269 6669 6361 7469 6f6e 2069 7320 6265  rification is be
-000452a0: 7374 2064 6f6e 6520 6173 2066 6f6c 6c6f  st done as follo
-000452b0: 7773 3a20 220a 2020 2020 2020 2020 2250  ws: ".        "P
-000452c0: 6572 666f 726d 2061 2063 726f 7373 2d64  erform a cross-d
-000452d0: 6576 6963 6520 7665 7269 6669 6361 7469  evice verificati
-000452e0: 6f6e 2c20 7468 6174 206d 6561 6e73 2c20  on, that means, 
-000452f0: 7065 7266 6f72 6d20 6120 220a 2020 2020  perform a ".    
-00045300: 2020 2020 2276 6572 6966 6963 6174 696f      "verificatio
-00045310: 6e20 6265 7477 6565 6e20 7477 6f20 6465  n between two de
-00045320: 7669 6365 7320 6f66 2074 6865 202a 7361  vices of the *sa
-00045330: 6d65 2a20 7573 6572 2e20 466f 7220 7468  me* user. For th
-00045340: 6174 2c20 220a 2020 2020 2020 2020 226f  at, ".        "o
-00045350: 7065 6e20 2865 2e67 2e29 2045 6c65 6d65  pen (e.g.) Eleme
-00045360: 6e74 2069 6e20 6120 6272 6f77 7365 722c  nt in a browser,
-00045370: 206d 616b 6520 7375 7265 2045 6c65 6d65   make sure Eleme
-00045380: 6e74 2069 7320 7573 696e 6720 7468 6520  nt is using the 
-00045390: 220a 2020 2020 2020 2020 6622 7361 6d65  ".        f"same
-000453a0: 2075 7365 7220 6163 636f 756e 7420 6173   user account as
-000453b0: 2074 6865 207b 5052 4f47 5f57 4954 484f   the {PROG_WITHO
-000453c0: 5554 5f45 5854 7d20 7573 6572 2028 7370  UT_EXT} user (sp
-000453d0: 6563 6966 6965 6420 7769 7468 2022 0a20  ecified with ". 
-000453e0: 2020 2020 2020 2022 2d2d 7573 6572 2d6c         "--user-l
-000453f0: 6f67 696e 2061 7420 2d2d 6c6f 6769 6e29  ogin at --login)
-00045400: 2e20 4e6f 7720 696e 2074 6865 2045 6c65  . Now in the Ele
-00045410: 6d65 6e74 2077 6562 7061 6765 2067 6f20  ment webpage go 
-00045420: 746f 2074 6865 2072 6f6f 6d20 220a 2020  to the room ".  
-00045430: 2020 2020 2020 6622 7468 6174 2069 7320        f"that is 
-00045440: 7468 6520 7b50 524f 475f 5749 5448 4f55  the {PROG_WITHOU
-00045450: 545f 4558 547d 2064 6566 6175 6c74 2072  T_EXT} default r
-00045460: 6f6f 6d20 2873 7065 6369 6669 6564 2077  oom (specified w
-00045470: 6974 6820 220a 2020 2020 2020 2020 222d  ith ".        "-
-00045480: 2d72 6f6f 6d2d 6465 6661 756c 7420 6174  -room-default at
-00045490: 202d 2d6c 6f67 696e 292e 204f 4b2c 2069   --login). OK, i
-000454a0: 6e20 7468 6520 7765 622d 6272 6f77 7365  n the web-browse
-000454b0: 7220 796f 7520 6172 6520 6e6f 7720 7468  r you are now th
-000454c0: 6520 220a 2020 2020 2020 2020 6622 7361  e ".        f"sa
-000454d0: 6d65 2075 7365 7220 616e 6420 696e 2074  me user and in t
-000454e0: 6865 2073 616d 6520 726f 6f6d 2061 7320  he same room as 
-000454f0: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
-00045500: 547d 2e20 220a 2020 2020 2020 2020 224e  T}. ".        "N
-00045510: 6f77 2063 6c69 636b 2074 6865 2072 6f75  ow click the rou
-00045520: 6e64 2027 6927 2027 526f 6f6d 2049 6e66  nd 'i' 'Room Inf
-00045530: 6f27 2069 636f 6e2c 2074 6865 6e20 636c  o' icon, then cl
-00045540: 6963 6b20 2750 656f 706c 6527 2c20 220a  ick 'People', ".
-00045550: 2020 2020 2020 2020 6622 636c 6963 6b20          f"click 
-00045560: 7468 6520 6170 7072 6f70 7269 6174 6520  the appropriate 
-00045570: 7573 6572 2028 7468 6520 7b50 524f 475f  user (the {PROG_
-00045580: 5749 5448 4f55 545f 4558 547d 2075 7365  WITHOUT_EXT} use
-00045590: 7229 2c20 220a 2020 2020 2020 2020 2263  r), ".        "c
-000455a0: 6c69 636b 2072 6564 2027 4e6f 7420 5472  lick red 'Not Tr
-000455b0: 7573 7465 6427 2074 6578 7420 220a 2020  usted' text ".  
-000455c0: 2020 2020 2020 2277 6869 6368 2069 6e64        "which ind
-000455d0: 6963 6174 6564 2061 6e20 756e 7472 7573  icated an untrus
-000455e0: 7465 6420 6465 7669 6365 2c20 7468 656e  ted device, then
-000455f0: 2063 6c69 636b 2074 6865 2073 7175 6172   click the squar
-00045600: 6520 220a 2020 2020 2020 2020 2227 496e  e ".        "'In
-00045610: 7465 7261 6374 6976 656c 7920 7665 7269  teractively veri
-00045620: 6679 2062 7920 456d 6f6a 6927 2062 7574  fy by Emoji' but
-00045630: 746f 6e20 286f 6e65 206f 6620 3320 6275  ton (one of 3 bu
-00045640: 7474 6f6e 2063 686f 6963 6573 292e 2022  tton choices). "
-00045650: 0a20 2020 2020 2020 2066 2241 7420 7468  .        f"At th
-00045660: 6973 2070 6f69 6e74 2062 6f74 6820 7765  is point both we
-00045670: 622d 7061 6765 2061 6e64 207b 5052 4f47  b-page and {PROG
-00045680: 5f57 4954 484f 5554 5f45 5854 7d20 696e  _WITHOUT_EXT} in
-00045690: 2074 6572 6d69 6e61 6c20 220a 2020 2020   terminal ".    
-000456a0: 2020 2020 2273 686f 7720 6120 7365 7420      "show a set 
-000456b0: 6f66 2065 6d6f 6a69 2069 636f 6e73 2061  of emoji icons a
-000456c0: 6e64 206e 616d 6573 2e20 436f 6d70 6172  nd names. Compar
-000456d0: 6520 7468 656d 2076 6973 7561 6c6c 792e  e them visually.
-000456e0: 2022 0a20 2020 2020 2020 2022 436f 6e66   ".        "Conf
-000456f0: 6972 6d20 6f6e 2062 6f74 6820 7369 6465  irm on both side
-00045700: 7320 2859 6573 2c20 5468 6579 204d 6174  s (Yes, They Mat
-00045710: 6368 2c20 476f 7420 6974 292c 2066 696e  ch, Got it), fin
-00045720: 616c 6c79 2063 6c69 636b 204f 4b2e 2022  ally click OK. "
-00045730: 0a20 2020 2020 2020 2022 596f 7520 7368  .        "You sh
-00045740: 6f75 6c64 2073 6565 2061 2067 7265 656e  ould see a green
-00045750: 2073 6869 656c 6420 616e 6420 616c 736f   shield and also
-00045760: 2073 6565 2074 6861 7420 7468 6520 220a   see that the ".
-00045770: 2020 2020 2020 2020 6622 7b50 524f 475f          f"{PROG_
-00045780: 5749 5448 4f55 545f 4558 547d 2064 6576  WITHOUT_EXT} dev
-00045790: 6963 6520 6973 206e 6f77 2067 7265 656e  ice is now green
-000457a0: 2061 6e64 2076 6572 6966 6965 6420 696e   and verified in
-000457b0: 2074 6865 2077 6562 7061 6765 2e20 220a   the webpage. ".
-000457c0: 2020 2020 2020 2020 2249 6e20 7468 6520          "In the 
-000457d0: 7465 726d 696e 616c 2079 6f75 2073 686f  terminal you sho
-000457e0: 756c 6420 7365 6520 6120 7465 7874 206d  uld see a text m
-000457f0: 6573 7361 6765 2069 6e64 6963 6174 696e  essage indicatin
-00045800: 6720 7375 6363 6573 732e 2022 0a20 2020  g success. ".   
-00045810: 2020 2020 2022 596f 7520 7368 6f75 6c64       "You should
-00045820: 206e 6f77 2062 6520 7665 7269 6669 6564   now be verified
-00045830: 2061 6372 6f73 7320 616c 6c20 6465 7669   across all devi
-00045840: 6365 7320 616e 6420 6163 726f 7373 2061  ces and across a
-00045850: 6c6c 2075 7365 7273 2e22 2c0a 2020 2020  ll users.",.    
-00045860: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
-00045870: 756d 656e 7428 0a20 2020 2020 2020 2022  ument(.        "
-00045880: 2d2d 6c6f 676f 7574 222c 0a20 2020 2020  --logout",.     
-00045890: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-000458a0: 652c 0a20 2020 2020 2020 2074 7970 653d  e,.        type=
-000458b0: 7374 722c 2020 2320 6c6f 676f 7574 206f  str,  # logout o
-000458c0: 7074 696f 6e73 3a20 6d65 2061 6e64 2061  ptions: me and a
-000458d0: 6c6c 0a20 2020 2020 2020 206d 6574 6176  ll.        metav
-000458e0: 6172 3d22 4d45 7c41 4c4c 222c 0a20 2020  ar="ME|ALL",.   
-000458f0: 2020 2020 2068 656c 703d 224c 6f67 6f75       help="Logou
-00045900: 742e 2022 0a20 2020 2020 2020 2022 4465  t. ".        "De
-00045910: 7461 696c 733a 3a20 4c6f 676f 7574 2074  tails:: Logout t
-00045920: 6869 7320 6f72 2061 6c6c 2064 6576 6963  his or all devic
-00045930: 6573 2066 726f 6d20 7468 6520 4d61 7472  es from the Matr
-00045940: 6978 2068 6f6d 6573 6572 7665 722e 2022  ix homeserver. "
-00045950: 0a20 2020 2020 2020 2022 5468 6973 2072  .        "This r
-00045960: 6571 7569 7265 7320 6578 6163 746c 7920  equires exactly 
-00045970: 6f6e 6520 6172 6775 6d65 6e74 2e20 220a  one argument. ".
-00045980: 2020 2020 2020 2020 2254 776f 2063 686f          "Two cho
-00045990: 6963 6573 2061 7265 206f 6666 6572 6564  ices are offered
-000459a0: 3a20 276d 6527 2061 6e64 2027 616c 6c27  : 'me' and 'all'
-000459b0: 2e20 220a 2020 2020 2020 2020 2250 726f  . ".        "Pro
-000459c0: 7669 6465 206f 6e65 206f 6620 7468 6573  vide one of thes
-000459d0: 6520 6368 6f69 6365 732e 2022 0a20 2020  e choices. ".   
-000459e0: 2020 2020 2066 2249 6620 796f 7520 6368       f"If you ch
-000459f0: 6f6f 7365 2027 6d65 272c 206f 6e6c 7920  oose 'me', only 
-00045a00: 7468 6520 6f6e 6520 6465 7669 6365 207b  the one device {
-00045a10: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
-00045a20: 7d20 220a 2020 2020 2020 2020 2269 7320  } ".        "is 
-00045a30: 6375 7272 656e 746c 7920 7573 696e 6720  currently using 
-00045a40: 7769 6c6c 2062 6520 6c6f 6767 6564 206f  will be logged o
-00045a50: 7574 2e20 220a 2020 2020 2020 2020 2249  ut. ".        "I
-00045a60: 6620 796f 7520 6368 6f6f 7365 2027 616c  f you choose 'al
-00045a70: 6c27 2c20 616c 6c20 6465 7669 6365 7320  l', all devices 
-00045a80: 6f66 2074 6865 2075 7365 7220 7573 6564  of the user used
-00045a90: 2062 7920 220a 2020 2020 2020 2020 6622   by ".        f"
-00045aa0: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
-00045ab0: 547d 2077 696c 6c20 6265 206c 6f67 6765  T} will be logge
-00045ac0: 6420 6f75 742e 2022 0a20 2020 2020 2020  d out. ".       
-00045ad0: 2022 5768 696c 6520 2d2d 6c6f 676f 7574   "While --logout
-00045ae0: 206e 6569 7468 6572 2072 656d 6f76 6573   neither removes
-00045af0: 2074 6865 2063 7265 6465 6e74 6961 6c73   the credentials
-00045b00: 206e 6f72 2074 6865 2073 746f 7265 2c20   nor the store, 
-00045b10: 7468 6520 220a 2020 2020 2020 2020 226c  the ".        "l
-00045b20: 6f67 6f75 7420 6163 7469 6f6e 2072 656d  ogout action rem
-00045b30: 6f76 6573 2074 6865 2064 6576 6963 6520  oves the device 
-00045b40: 616e 6420 6d61 6b65 7320 7468 6520 6163  and makes the ac
-00045b50: 6365 7373 2d74 6f6b 656e 2073 746f 7265  cess-token store
-00045b60: 6420 220a 2020 2020 2020 2020 2269 6e20  d ".        "in 
-00045b70: 7468 6520 6372 6564 656e 7469 616c 7320  the credentials 
-00045b80: 696e 7661 6c69 642e 2048 656e 6365 2c20  invalid. Hence, 
-00045b90: 6166 7465 7220 6120 2d2d 6c6f 676f 7574  after a --logout
-00045ba0: 2c20 6f6e 6520 6d75 7374 2022 0a20 2020  , one must ".   
-00045bb0: 2020 2020 2022 6d61 6e75 616c 6c79 2072       "manually r
-00045bc0: 656d 6f76 6520 6372 6564 656e 7469 616c  emove credential
-00045bd0: 7320 616e 6420 7374 6f72 652c 2061 6e64  s and store, and
-00045be0: 2074 6865 6e20 7065 7266 6f72 6d20 6120   then perform a 
-00045bf0: 6e65 7720 220a 2020 2020 2020 2020 6622  new ".        f"
-00045c00: 2d2d 6c6f 6769 6e20 746f 2075 7365 207b  --login to use {
-00045c10: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
-00045c20: 7d20 6167 6169 6e2e 2022 0a20 2020 2020  } again. ".     
-00045c30: 2020 2022 596f 7520 6361 6e20 7065 7266     "You can perf
-00045c40: 6563 746c 7920 7573 6520 220a 2020 2020  ectly use ".    
-00045c50: 2020 2020 6622 7b50 524f 475f 5749 5448      f"{PROG_WITH
-00045c60: 4f55 545f 4558 547d 2077 6974 686f 7574  OUT_EXT} without
-00045c70: 2065 7665 7220 6c6f 6767 696e 6720 6f75   ever logging ou
-00045c80: 742e 202d 2d6c 6f67 6f75 7420 6973 2061  t. --logout is a
-00045c90: 2063 6c65 616e 7570 2022 0a20 2020 2020   cleanup ".     
-00045ca0: 2020 2022 6966 2079 6f75 2068 6176 6520     "if you have 
-00045cb0: 6465 6369 6465 6420 6e6f 7420 746f 2075  decided not to u
-00045cc0: 7365 2074 6869 7320 286f 7220 616c 6c29  se this (or all)
-00045cd0: 2064 6576 6963 6528 7329 2065 7665 7220   device(s) ever 
-00045ce0: 6167 6169 6e2e 222c 0a20 2020 2029 0a20  again.",.    ). 
-00045cf0: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
-00045d00: 6e74 280a 2020 2020 2020 2020 222d 6322  nt(.        "-c"
-00045d10: 2c0a 2020 2020 2020 2020 222d 2d63 7265  ,.        "--cre
-00045d20: 6465 6e74 6961 6c73 222c 0a20 2020 2020  dentials",.     
-00045d30: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-00045d40: 652c 0a20 2020 2020 2020 2074 7970 653d  e,.        type=
-00045d50: 7374 722c 0a20 2020 2020 2020 2064 6566  str,.        def
-00045d60: 6175 6c74 3d43 5245 4445 4e54 4941 4c53  ault=CREDENTIALS
-00045d70: 5f46 494c 455f 4445 4641 554c 542c 0a20  _FILE_DEFAULT,. 
-00045d80: 2020 2020 2020 206d 6574 6176 6172 3d22         metavar="
-00045d90: 4352 4544 454e 5449 414c 535f 4649 4c45  CREDENTIALS_FILE
-00045da0: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-00045db0: 2253 7065 6369 6679 206c 6f63 6174 696f  "Specify locatio
-00045dc0: 6e20 6f66 2063 7265 6465 6e74 6961 6c73  n of credentials
-00045dd0: 2066 696c 652e 2022 0a20 2020 2020 2020   file. ".       
-00045de0: 2022 4465 7461 696c 733a 3a20 4f6e 2066   "Details:: On f
-00045df0: 6972 7374 2072 756e 2c20 696e 666f 726d  irst run, inform
-00045e00: 6174 696f 6e20 6162 6f75 7420 686f 6d65  ation about home
-00045e10: 7365 7276 6572 2c20 220a 2020 2020 2020  server, ".      
-00045e20: 2020 2275 7365 722c 2072 6f6f 6d20 6964    "user, room id
-00045e30: 2c20 6574 632e 2077 696c 6c20 6265 2077  , etc. will be w
-00045e40: 7269 7474 656e 2074 6f20 6120 6372 6564  ritten to a cred
-00045e50: 656e 7469 616c 7320 220a 2020 2020 2020  entials ".      
-00045e60: 2020 2266 696c 652e 2042 7920 6465 6661    "file. By defa
-00045e70: 756c 742c 2074 6869 7320 6669 6c65 2022  ult, this file "
-00045e80: 0a20 2020 2020 2020 2066 2769 7320 227b  .        f'is "{
-00045e90: 4352 4544 454e 5449 414c 535f 4649 4c45  CREDENTIALS_FILE
-00045ea0: 5f44 4546 4155 4c54 7d22 2e20 270a 2020  _DEFAULT}". '.  
-00045eb0: 2020 2020 2020 224f 6e20 6675 7274 6865        "On furthe
-00045ec0: 7220 7275 6e73 2074 6865 2063 7265 6465  r runs the crede
-00045ed0: 6e74 6961 6c73 2066 696c 6520 6973 2072  ntials file is r
-00045ee0: 6561 6420 746f 2022 0a20 2020 2020 2020  ead to ".       
-00045ef0: 2022 7065 726d 6974 206c 6f67 6769 6e67   "permit logging
-00045f00: 2069 6e74 6f20 7468 6520 636f 7272 6563   into the correc
-00045f10: 7420 4d61 7472 6978 2061 6363 6f75 6e74  t Matrix account
-00045f20: 2022 0a20 2020 2020 2020 2022 616e 6420   ".        "and 
-00045f30: 7365 6e64 696e 6720 6d65 7373 6167 6573  sending messages
-00045f40: 2074 6f20 7468 6520 7072 6563 6f6e 6669   to the preconfi
-00045f50: 6775 7265 6420 726f 6f6d 2e20 220a 2020  gured room. ".  
-00045f60: 2020 2020 2020 2249 6620 7468 6973 206f        "If this o
-00045f70: 7074 696f 6e20 6973 2070 726f 7669 6465  ption is provide
-00045f80: 642c 2074 6865 2070 726f 7669 6465 6420  d, the provided 
-00045f90: 6669 6c65 206e 616d 6520 220a 2020 2020  file name ".    
-00045fa0: 2020 2020 2277 696c 6c20 6265 2075 7365      "will be use
-00045fb0: 6420 6173 2063 7265 6465 6e74 6961 6c73  d as credentials
-00045fc0: 2066 696c 6520 696e 7374 6561 6420 6f66   file instead of
-00045fd0: 2074 6865 2022 0a20 2020 2020 2020 2022   the ".        "
-00045fe0: 6465 6661 756c 7420 6f6e 652e 2022 2c0a  default one. ",.
-00045ff0: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
-00046000: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-00046010: 2020 2022 2d73 222c 0a20 2020 2020 2020     "-s",.       
-00046020: 2022 2d2d 7374 6f72 6522 2c0a 2020 2020   "--store",.    
-00046030: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-00046040: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
-00046050: 3d73 7472 2c0a 2020 2020 2020 2020 6465  =str,.        de
-00046060: 6661 756c 743d 5354 4f52 455f 4449 525f  fault=STORE_DIR_
-00046070: 4445 4641 554c 542c 0a20 2020 2020 2020  DEFAULT,.       
-00046080: 206d 6574 6176 6172 3d22 5354 4f52 455f   metavar="STORE_
-00046090: 4449 5245 4354 4f52 5922 2c0a 2020 2020  DIRECTORY",.    
-000460a0: 2020 2020 6865 6c70 3d22 5370 6563 6966      help="Specif
-000460b0: 7920 6c6f 6361 7469 6f6e 206f 6620 7374  y location of st
-000460c0: 6f72 6520 6469 7265 6374 6f72 792e 2022  ore directory. "
-000460d0: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
-000460e0: 733a 3a20 5061 7468 2074 6f20 6469 7265  s:: Path to dire
-000460f0: 6374 6f72 7920 746f 2062 6520 220a 2020  ctory to be ".  
-00046100: 2020 2020 2020 2775 7365 6420 6173 2022        'used as "
-00046110: 7374 6f72 6522 2066 6f72 2065 6e63 7279  store" for encry
-00046120: 7074 6564 206d 6573 7361 6769 6e67 2e20  pted messaging. 
-00046130: 270a 2020 2020 2020 2020 2242 7920 6465  '.        "By de
-00046140: 6661 756c 742c 2074 6869 7320 6469 7265  fault, this dire
-00046150: 6374 6f72 7920 220a 2020 2020 2020 2020  ctory ".        
-00046160: 6627 6973 2022 7b53 544f 5245 5f44 4952  f'is "{STORE_DIR
-00046170: 5f44 4546 4155 4c54 7d22 2e20 270a 2020  _DEFAULT}". '.  
-00046180: 2020 2020 2020 2253 696e 6365 2065 6e63        "Since enc
-00046190: 7279 7074 696f 6e20 6973 2061 6c77 6179  ryption is alway
-000461a0: 7320 656e 6162 6c65 642c 2061 2073 746f  s enabled, a sto
-000461b0: 7265 2069 7320 220a 2020 2020 2020 2020  re is ".        
-000461c0: 2261 6c77 6179 7320 6e65 6564 6564 2e20  "always needed. 
-000461d0: 220a 2020 2020 2020 2020 2254 6865 2070  ".        "The p
-000461e0: 726f 7669 6465 6420 6469 7265 6374 6f72  rovided director
-000461f0: 7920 6e61 6d65 2022 0a20 2020 2020 2020  y name ".       
-00046200: 2022 7769 6c6c 2062 6520 7573 6564 2061   "will be used a
-00046210: 7320 7065 7273 6973 7465 6e74 2073 746f  s persistent sto
-00046220: 7261 6765 2064 6972 6563 746f 7279 2069  rage directory i
-00046230: 6e73 7465 6164 206f 6620 220a 2020 2020  nstead of ".    
-00046240: 2020 2020 2274 6865 2064 6566 6175 6c74      "the default
-00046250: 206f 6e65 2e20 5072 6566 6572 6162 6c79   one. Preferably
-00046260: 2c20 666f 7220 6d75 6c74 6970 6c65 2065  , for multiple e
-00046270: 7865 6375 7469 6f6e 7320 220a 2020 2020  xecutions ".    
-00046280: 2020 2020 226f 6620 7468 6973 2070 726f      "of this pro
-00046290: 6772 616d 2075 7365 2074 6865 2073 616d  gram use the sam
-000462a0: 6520 7374 6f72 6520 666f 7220 7468 6520  e store for the 
-000462b0: 7361 6d65 2064 6576 6963 652e 2022 0a20  same device. ". 
-000462c0: 2020 2020 2020 2022 5468 6520 7374 6f72         "The stor
-000462d0: 6520 6469 7265 6374 6f72 7920 6361 6e20  e directory can 
-000462e0: 6265 2073 6861 7265 6420 6265 7477 6565  be shared betwee
-000462f0: 6e20 6d75 6c74 6970 6c65 2022 0a20 2020  n multiple ".   
-00046300: 2020 2020 2022 6469 6666 6572 656e 7420       "different 
-00046310: 6465 7669 6365 7320 616e 6420 7573 6572  devices and user
-00046320: 732e 222c 0a20 2020 2029 0a20 2020 2061  s.",.    ).    a
-00046330: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
-00046340: 2020 2020 2020 2020 222d 7222 2c0a 2020          "-r",.  
-00046350: 2020 2020 2020 222d 2d72 6f6f 6d22 2c0a        "--room",.
-00046360: 2020 2020 2020 2020 7265 7175 6972 6564          required
-00046370: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-00046380: 6163 7469 6f6e 3d22 6578 7465 6e64 222c  action="extend",
-00046390: 0a20 2020 2020 2020 206e 6172 6773 3d22  .        nargs="
-000463a0: 2b22 2c0a 2020 2020 2020 2020 7479 7065  +",.        type
-000463b0: 3d73 7472 2c0a 2020 2020 2020 2020 6d65  =str,.        me
-000463c0: 7461 7661 723d 2252 4f4f 4d22 2c0a 2020  tavar="ROOM",.  
-000463d0: 2020 2020 2020 6865 6c70 3d22 5370 6563        help="Spec
-000463e0: 6966 7920 6f6e 6520 6f72 206d 756c 7469  ify one or multi
-000463f0: 706c 6520 726f 6f6d 732e 2022 0a20 2020  ple rooms. ".   
-00046400: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-00046410: 4f70 7469 6f6e 616c 6c79 2073 7065 6369  Optionally speci
-00046420: 6679 206f 6e65 206f 7220 6d75 6c74 6970  fy one or multip
-00046430: 6c65 2072 6f6f 6d73 2076 6961 2072 6f6f  le rooms via roo
-00046440: 6d20 6964 7320 6f72 2022 0a20 2020 2020  m ids or ".     
-00046450: 2020 2022 726f 6f6d 2061 6c69 6173 6573     "room aliases
-00046460: 2e20 2d2d 726f 6f6d 2069 7320 7573 6564  . --room is used
-00046470: 2062 7920 7661 7269 6f75 7320 7365 6e64   by various send
-00046480: 2061 6374 696f 6e73 2061 6e64 2022 0a20   actions and ". 
-00046490: 2020 2020 2020 2022 7661 7269 6f75 7320         "various 
-000464a0: 6c69 7374 656e 2061 6374 696f 6e73 2e20  listen actions. 
-000464b0: 220a 2020 2020 2020 2020 2254 6865 2064  ".        "The d
-000464c0: 6566 6175 6c74 2072 6f6f 6d20 6973 2070  efault room is p
-000464d0: 726f 7669 6465 6420 220a 2020 2020 2020  rovided ".      
-000464e0: 2020 2269 6e20 7468 6520 6372 6564 656e    "in the creden
-000464f0: 7469 616c 7320 6669 6c65 2028 7370 6563  tials file (spec
-00046500: 6966 6965 6420 6174 202d 2d6c 6f67 696e  ified at --login
-00046510: 2077 6974 6820 2d2d 726f 6f6d 2d64 6566   with --room-def
-00046520: 6175 6c74 292e 2022 0a20 2020 2020 2020  ault). ".       
-00046530: 2022 4966 2061 2072 6f6f 6d20 286f 7220   "If a room (or 
-00046540: 6d75 6c74 6970 6c65 206f 6e65 7329 2022  multiple ones) "
-00046550: 0a20 2020 2020 2020 2022 6973 2028 6f72  .        "is (or
-00046560: 2061 7265 2920 7072 6f76 6964 6564 2069   are) provided i
-00046570: 6e20 7468 6520 2d2d 726f 6f6d 2061 7267  n the --room arg
-00046580: 756d 656e 7473 2c20 7468 656e 2069 7420  uments, then it 
-00046590: 220a 2020 2020 2020 2020 2228 6f72 2074  ".        "(or t
-000465a0: 6865 7929 2077 696c 6c20 6265 2075 7365  hey) will be use
-000465b0: 6420 220a 2020 2020 2020 2020 2269 6e73  d ".        "ins
-000465c0: 7465 6164 206f 6620 7468 6520 6f6e 6520  tead of the one 
-000465d0: 6672 6f6d 2074 6865 2063 7265 6465 6e74  from the credent
-000465e0: 6961 6c73 2066 696c 652e 2022 0a20 2020  ials file. ".   
-000465f0: 2020 2020 2022 5468 6520 7573 6572 206d       "The user m
-00046600: 7573 7420 6861 7665 2061 6363 6573 7320  ust have access 
-00046610: 746f 2074 6865 2073 7065 6369 6669 6564  to the specified
-00046620: 2072 6f6f 6d20 220a 2020 2020 2020 2020   room ".        
-00046630: 2269 6e20 6f72 6465 7220 746f 2073 656e  "in order to sen
-00046640: 6420 6d65 7373 6167 6573 2074 6865 7265  d messages there
-00046650: 206f 7220 6c69 7374 656e 206f 6e20 7468   or listen on th
-00046660: 6520 726f 6f6d 2e20 220a 2020 2020 2020  e room. ".      
-00046670: 2020 224d 6573 7361 6765 7320 6361 6e6e    "Messages cann
-00046680: 6f74 2022 0a20 2020 2020 2020 2022 6265  ot ".        "be
-00046690: 2073 656e 7420 746f 2061 7262 6974 7261   sent to arbitra
-000466a0: 7279 2072 6f6f 6d73 2e20 5768 656e 2073  ry rooms. When s
-000466b0: 7065 6369 6679 696e 6720 7468 6520 220a  pecifying the ".
-000466c0: 2020 2020 2020 2020 2272 6f6f 6d20 6964          "room id
-000466d0: 2073 6f6d 6520 7368 656c 6c73 2072 6571   some shells req
-000466e0: 7569 7265 2074 6865 2065 7863 6c61 6d61  uire the exclama
-000466f0: 7469 6f6e 206d 6172 6b20 220a 2020 2020  tion mark ".    
-00046700: 2020 2020 2274 6f20 6265 2065 7363 6170      "to be escap
-00046710: 6564 2077 6974 6820 6120 6261 636b 736c  ed with a backsl
-00046720: 6173 682e 2022 0a20 2020 2020 2020 2022  ash. ".        "
-00046730: 4173 2061 6e20 616c 7465 726e 6174 6976  As an alternativ
-00046740: 6520 746f 2073 7065 6369 6679 696e 6720  e to specifying 
-00046750: 6120 726f 6f6d 2061 7320 6465 7374 696e  a room as destin
-00046760: 6174 696f 6e2c 2022 0a20 2020 2020 2020  ation, ".       
-00046770: 2022 6f6e 6520 6361 6e20 7370 6563 6966   "one can specif
-00046780: 7920 6120 7573 6572 2061 7320 6120 6465  y a user as a de
-00046790: 7374 696e 6174 696f 6e20 7769 7468 2074  stination with t
-000467a0: 6865 2027 2d2d 7573 6572 2720 220a 2020  he '--user' ".  
-000467b0: 2020 2020 2020 2261 7267 756d 656e 742e        "argument.
-000467c0: 2053 6565 2027 2d2d 7573 6572 2720 616e   See '--user' an
-000467d0: 6420 7468 6520 7465 726d 2027 444d 2028  d the term 'DM (
-000467e0: 6469 7265 6374 206d 6573 7361 6769 6e67  direct messaging
-000467f0: 2927 2022 0a20 2020 2020 2020 2022 666f  )' ".        "fo
-00046800: 7220 6465 7461 696c 732e 2053 7065 6369  r details. Speci
-00046810: 6679 696e 6720 6120 726f 6f6d 2069 7320  fying a room is 
-00046820: 616c 7761 7973 2066 6173 7465 7220 616e  always faster an
-00046830: 6420 6d6f 7265 2022 0a20 2020 2020 2020  d more ".       
-00046840: 2022 6566 6669 6369 656e 7420 7468 616e   "efficient than
-00046850: 2073 7065 6369 6679 696e 6720 6120 7573   specifying a us
-00046860: 6572 2e20 4e6f 7420 616c 6c20 6c69 7374  er. Not all list
-00046870: 656e 206f 7065 7261 7469 6f6e 7320 220a  en operations ".
-00046880: 2020 2020 2020 2020 2261 6c6c 6f77 2073          "allow s
-00046890: 6574 7469 6e67 2061 2072 6f6f 6d2e 2052  etting a room. R
-000468a0: 6561 6420 6d6f 7265 2075 6e64 6572 2074  ead more under t
-000468b0: 6865 202d 2d6c 6973 7465 6e20 6f70 7469  he --listen opti
-000468c0: 6f6e 7320 220a 2020 2020 2020 2020 2261  ons ".        "a
-000468d0: 6e64 2073 696d 696c 6172 2e20 4d6f 7374  nd similar. Most
-000468e0: 2061 6374 696f 6e73 2061 6c73 6f20 7375   actions also su
-000468f0: 7070 6f72 7420 726f 6f6d 2061 6c69 6173  pport room alias
-00046900: 6573 2069 6e73 7465 6164 206f 6620 220a  es instead of ".
-00046910: 2020 2020 2020 2020 2272 6f6f 6d20 6964          "room id
-00046920: 732e 2053 6f6d 6520 6576 656e 2073 686f  s. Some even sho
-00046930: 7274 2072 6f6f 6d20 616c 6961 7365 732e  rt room aliases.
-00046940: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
-00046950: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
-00046960: 2020 2020 2020 222d 2d72 6f6f 6d2d 6465        "--room-de
-00046970: 6661 756c 7422 2c0a 2020 2020 2020 2020  fault",.        
-00046980: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
-00046990: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
-000469a0: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
-000469b0: 723d 2244 4546 4155 4c54 5f52 4f4f 4d22  r="DEFAULT_ROOM"
-000469c0: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
-000469d0: 5370 6563 6966 7920 7468 6520 6465 6661  Specify the defa
-000469e0: 756c 7420 726f 6f6d 2061 7420 2d2d 6c6f  ult room at --lo
-000469f0: 6769 6e2e 2022 0a20 2020 2020 2020 2022  gin. ".        "
-00046a00: 4465 7461 696c 733a 3a20 4f70 7469 6f6e  Details:: Option
-00046a10: 616c 6c79 2073 7065 6369 6679 2061 2072  ally specify a r
-00046a20: 6f6f 6d20 6173 2074 6865 2022 0a20 2020  oom as the ".   
-00046a30: 2020 2020 2022 6465 6661 756c 7420 726f       "default ro
-00046a40: 6f6d 2066 6f72 2066 7574 7572 6520 6163  om for future ac
-00046a50: 7469 6f6e 732e 2049 6620 6e6f 7420 7370  tions. If not sp
-00046a60: 6563 6966 6965 6420 666f 7220 2d2d 6c6f  ecified for --lo
-00046a70: 6769 6e2c 2069 7420 220a 2020 2020 2020  gin, it ".      
-00046a80: 2020 2277 696c 6c20 6265 2071 7565 7269    "will be queri
-00046a90: 6564 2076 6961 2074 6865 206b 6579 626f  ed via the keybo
-00046aa0: 6172 642e 202d 2d6c 6f67 696e 2073 746f  ard. --login sto
-00046ab0: 7265 7320 7468 6520 7370 6563 6966 6965  res the specifie
-00046ac0: 6420 726f 6f6d 2022 0a20 2020 2020 2020  d room ".       
-00046ad0: 2022 6173 2064 6566 6175 6c74 2072 6f6f   "as default roo
-00046ae0: 6d20 696e 2079 6f75 7220 6372 6564 656e  m in your creden
-00046af0: 7469 616c 7320 6669 6c65 2e20 5468 6973  tials file. This
-00046b00: 206f 7074 696f 6e20 6973 206f 6e6c 7920   option is only 
-00046b10: 7573 6564 2022 0a20 2020 2020 2020 2022  used ".        "
-00046b20: 696e 2063 6f6d 6269 6e61 7469 6f6e 2077  in combination w
-00046b30: 6974 6820 2d2d 6c6f 6769 6e2e 2041 2064  ith --login. A d
-00046b40: 6566 6175 6c74 2072 6f6f 6d20 6973 206e  efault room is n
-00046b50: 6565 6465 642e 2053 7065 6369 6679 2061  eeded. Specify a
-00046b60: 2022 0a20 2020 2020 2020 2022 7661 6c69   ".        "vali
-00046b70: 6420 726f 6f6d 2065 6974 6865 7220 7769  d room either wi
-00046b80: 7468 202d 2d72 6f6f 6d2d 6465 6661 756c  th --room-defaul
-00046b90: 7420 6f72 2070 726f 7669 6465 2069 7420  t or provide it 
-00046ba0: 7669 6120 6b65 7962 6f61 7264 2e22 2c0a  via keyboard.",.
-00046bb0: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
-00046bc0: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-00046bd0: 2020 2022 2d2d 726f 6f6d 2d63 7265 6174     "--room-creat
-00046be0: 6522 2c0a 2020 2020 2020 2020 7265 7175  e",.        requ
-00046bf0: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
-00046c00: 2020 2020 6163 7469 6f6e 3d22 6578 7465      action="exte
-00046c10: 6e64 222c 0a20 2020 2020 2020 206e 6172  nd",.        nar
-00046c20: 6773 3d22 2b22 2c0a 2020 2020 2020 2020  gs="+",.        
-00046c30: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
-00046c40: 2020 6d65 7461 7661 723d 2252 4f4f 4d5f    metavar="ROOM_
-00046c50: 414c 4941 5322 2c0a 2020 2020 2020 2020  ALIAS",.        
-00046c60: 6865 6c70 3d22 4372 6561 7465 206f 6e65  help="Create one
-00046c70: 206f 7220 6d75 6c74 6970 6c65 2072 6f6f   or multiple roo
-00046c80: 6d73 2066 6f72 2067 6976 656e 2061 6c69  ms for given ali
-00046c90: 6173 2865 7329 2e20 220a 2020 2020 2020  as(es). ".      
-00046ca0: 2020 2244 6574 6169 6c73 3a3a 204f 6e65    "Details:: One
-00046cb0: 206f 7220 6d75 6c74 6970 6c65 2022 0a20   or multiple ". 
-00046cc0: 2020 2020 2020 2022 726f 6f6d 2061 6c69         "room ali
-00046cd0: 6173 6573 2063 616e 2062 6520 7370 6563  ases can be spec
-00046ce0: 6966 6965 642e 2022 0a20 2020 2020 2020  ified. ".       
-00046cf0: 2022 466f 7220 6561 6368 2061 6c69 6173   "For each alias
-00046d00: 2073 7065 6369 6669 6564 2061 2072 6f6f   specified a roo
-00046d10: 6d20 7769 6c6c 2062 6520 6372 6561 7465  m will be create
-00046d20: 642e 2022 0a20 2020 2020 2020 2022 466f  d. ".        "Fo
-00046d30: 7220 6561 6368 2063 7265 6174 6564 2072  r each created r
-00046d40: 6f6f 6d20 6f6e 6520 6c69 6e65 2077 6974  oom one line wit
-00046d50: 6820 726f 6f6d 2069 6420 616e 6420 616c  h room id and al
-00046d60: 6961 7320 220a 2020 2020 2020 2020 2277  ias ".        "w
-00046d70: 696c 6c20 6265 2070 7269 6e74 6564 2074  ill be printed t
-00046d80: 6f20 7374 646f 7574 2e20 220a 2020 2020  o stdout. ".    
-00046d90: 2020 2020 2249 6620 796f 7520 6172 6520      "If you are 
-00046da0: 6e6f 7420 696e 7465 7265 7374 6564 2069  not interested i
-00046db0: 6e20 616e 2022 0a20 2020 2020 2020 2027  n an ".        '
-00046dc0: 616c 6961 732c 2070 726f 7669 6465 2061  alias, provide a
-00046dd0: 6e20 656d 7074 7920 7374 7269 6e67 206c  n empty string l
-00046de0: 696b 6520 2222 2e20 270a 2020 2020 2020  ike "". '.      
-00046df0: 2020 2254 6865 2061 6c69 6173 2070 726f    "The alias pro
-00046e00: 7669 6465 6420 6d75 7374 2062 6520 696e  vided must be in
-00046e10: 2063 616e 6f6e 6963 616c 206c 6f63 616c   canonical local
-00046e20: 2066 6f72 6d2c 2069 2e65 2e20 220a 2020   form, i.e. ".  
-00046e30: 2020 2020 2020 2269 6620 796f 7520 7761        "if you wa
-00046e40: 6e74 2061 2066 696e 616c 2066 756c 6c20  nt a final full 
-00046e50: 616c 6961 7320 6c69 6b65 2022 0a20 2020  alias like ".   
-00046e60: 2020 2020 2027 2223 536f 6d65 526f 6f6d       '"#SomeRoom
-00046e70: 416c 6961 733a 6d61 7472 6978 2e65 7861  Alias:matrix.exa
-00046e80: 6d70 6c65 2e63 6f6d 2220 270a 2020 2020  mple.com" '.    
-00046e90: 2020 2020 2279 6f75 206d 7573 7420 7072      "you must pr
-00046ea0: 6f76 6964 6520 7468 6520 7374 7269 6e67  ovide the string
-00046eb0: 2027 536f 6d65 526f 6f6d 416c 6961 7327   'SomeRoomAlias'
-00046ec0: 2e20 220a 2020 2020 2020 2020 2254 6865  . ".        "The
-00046ed0: 2075 7365 7220 6d75 7374 2062 6520 7065   user must be pe
-00046ee0: 726d 6974 7465 6420 746f 2063 7265 6174  rmitted to creat
-00046ef0: 6520 726f 6f6d 732e 2022 0a20 2020 2020  e rooms. ".     
-00046f00: 2020 2022 436f 6d62 696e 6520 2d2d 726f     "Combine --ro
-00046f10: 6f6d 2d63 7265 6174 6520 7769 7468 202d  om-create with -
-00046f20: 2d6e 616d 6520 616e 6420 2d2d 746f 7069  -name and --topi
-00046f30: 6320 746f 2061 6464 2022 0a20 2020 2020  c to add ".     
-00046f40: 2020 2022 6e61 6d65 7320 616e 6420 746f     "names and to
-00046f50: 7069 6373 2074 6f20 7468 6520 726f 6f6d  pics to the room
-00046f60: 2873 2920 746f 2062 6520 6372 6561 7465  (s) to be create
-00046f70: 642e 2022 0a20 2020 2020 2020 2022 526f  d. ".        "Ro
-00046f80: 6f6d 7320 6172 6520 6279 2064 6566 6175  oms are by defau
-00046f90: 6c74 2063 7265 6174 6564 2065 6e63 7279  lt created encry
-00046fa0: 7074 6564 3b20 220a 2020 2020 2020 2020  pted; ".        
-00046fb0: 2274 6f20 6f76 6572 7772 6974 6520 7468  "to overwrite th
-00046fc0: 6174 2061 6e64 2074 6f20 6372 6561 7465  at and to create
-00046fd0: 2061 2072 6f6f 6d20 7769 7468 2065 6e63   a room with enc
-00046fe0: 7279 7074 696f 6e20 6469 7361 626c 6564  ryption disabled
-00046ff0: 2022 0a20 2020 2020 2020 2022 7573 6520   ".        "use 
-00047000: 272d 2d70 6c61 696e 272e 2022 0a20 2020  '--plain'. ".   
-00047010: 2020 2020 2022 526f 6f6d 2069 642c 2072       "Room id, r
-00047020: 6f6f 6d20 616c 6961 732c 2065 6e63 7279  oom alias, encry
-00047030: 7074 696f 6e20 616e 6420 6f74 6865 7220  ption and other 
-00047040: 6669 656c 6473 2022 0a20 2020 2020 2020  fields ".       
-00047050: 2022 6172 6520 7072 696e 7465 6420 6173   "are printed as
-00047060: 206f 7574 7075 742c 206f 6e65 206c 696e   output, one lin
-00047070: 6520 7065 7220 6372 6561 7465 6420 726f  e per created ro
-00047080: 6f6d 2e22 2c0a 2020 2020 290a 2020 2020  om.",.    ).    
-00047090: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-000470a0: 0a20 2020 2020 2020 2022 2d2d 726f 6f6d  .        "--room
-000470b0: 2d64 6d2d 6372 6561 7465 222c 0a20 2020  -dm-create",.   
-000470c0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-000470d0: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
-000470e0: 696f 6e3d 2265 7874 656e 6422 2c0a 2020  ion="extend",.  
-000470f0: 2020 2020 2020 6e61 7267 733d 222b 222c        nargs="+",
-00047100: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
-00047110: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
-00047120: 6172 3d22 5553 4552 222c 0a20 2020 2020  ar="USER",.     
-00047130: 2020 2068 656c 703d 2243 7265 6174 6520     help="Create 
-00047140: 6f6e 6520 6f72 206d 756c 7469 706c 6520  one or multiple 
-00047150: 444d 2072 6f6f 6d73 2077 6974 6820 7468  DM rooms with th
-00047160: 6520 7370 6563 6966 6965 6420 7573 6572  e specified user
-00047170: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
-00047180: 7461 696c 733a 3a20 466f 7220 6561 6368  tails:: For each
-00047190: 2075 7365 7220 7370 6563 6966 6965 6420   user specified 
-000471a0: 6120 444d 2072 6f6f 6d20 7769 6c6c 2062  a DM room will b
-000471b0: 6520 6372 6561 7465 6420 616e 6420 7468  e created and th
-000471c0: 6520 220a 2020 2020 2020 2020 2275 7365  e ".        "use
-000471d0: 7220 696e 7669 7465 6420 746f 2069 742e  r invited to it.
-000471e0: 2046 6f72 2065 6163 6820 6372 6561 7465   For each create
-000471f0: 6420 726f 6f6d 206f 6e65 206c 696e 6520  d room one line 
-00047200: 7769 7468 2022 0a20 2020 2020 2020 2022  with ".        "
-00047210: 726f 6f6d 2069 6420 616e 6420 616c 6961  room id and alia
-00047220: 7320 7769 6c6c 2062 6520 7072 696e 7465  s will be printe
-00047230: 6420 746f 2073 7464 6f75 742e 2054 6865  d to stdout. The
-00047240: 2075 7365 7220 220a 2020 2020 2020 2020   user ".        
-00047250: 226d 7573 7420 6265 2070 6572 6d69 7474  "must be permitt
-00047260: 6564 2074 6f20 6372 6561 7465 2072 6f6f  ed to create roo
-00047270: 6d73 2e20 436f 6d62 696e 6520 2d2d 726f  ms. Combine --ro
-00047280: 6f6d 2d64 6d2d 6372 6561 7465 2022 0a20  om-dm-create ". 
-00047290: 2020 2020 2020 2022 7769 7468 202d 2d6e         "with --n
-000472a0: 616d 652c 202d 2d74 6f70 6963 2c20 2d2d  ame, --topic, --
-000472b0: 616c 6961 7320 746f 2061 6464 206e 616d  alias to add nam
-000472c0: 6573 2c20 746f 7069 6373 2061 6e64 2022  es, topics and "
-000472d0: 0a20 2020 2020 2020 2022 616c 6961 7365  .        "aliase
-000472e0: 7320 746f 2074 6865 2072 6f6f 6d28 7329  s to the room(s)
-000472f0: 2074 6f20 6265 2063 7265 6174 6564 2e20   to be created. 
-00047300: 220a 2020 2020 2020 2020 2244 4d20 726f  ".        "DM ro
-00047310: 6f6d 7320 6172 6520 6279 2064 6566 6175  oms are by defau
-00047320: 6c74 2063 7265 6174 6564 2065 6e63 7279  lt created encry
-00047330: 7074 6564 3b20 220a 2020 2020 2020 2020  pted; ".        
-00047340: 2274 6f20 6f76 6572 7772 6974 6520 7468  "to overwrite th
-00047350: 6174 2061 6e64 2074 6f20 6372 6561 7465  at and to create
-00047360: 2061 2072 6f6f 6d20 7769 7468 2065 6e63   a room with enc
-00047370: 7279 7074 696f 6e20 6469 7361 626c 6564  ryption disabled
-00047380: 2022 0a20 2020 2020 2020 2022 7573 6520   ".        "use 
-00047390: 272d 2d70 6c61 696e 272e 2022 0a20 2020  '--plain'. ".   
-000473a0: 2020 2020 2022 5365 6520 6f70 7469 6f6e       "See option
-000473b0: 2027 2d2d 726f 6f6d 2d64 6d2d 6372 6561   '--room-dm-crea
-000473c0: 7465 2d61 6c6c 6f77 2d64 7570 6c69 6361  te-allow-duplica
-000473d0: 7465 7327 2e20 4966 206e 6f74 2075 7365  tes'. If not use
-000473e0: 642c 2022 0a20 2020 2020 2020 2022 7468  d, ".        "th
-000473f0: 656e 2061 6e20 696e 7669 7461 7469 6f6e  en an invitation
-00047400: 2d61 6363 6570 7465 6420 444d 2072 6f6f  -accepted DM roo
-00047410: 6d20 6973 2073 6561 7263 6865 642e 2049  m is searched. I
-00047420: 6620 616e 2065 7869 7374 696e 6720 220a  f an existing ".
-00047430: 2020 2020 2020 2020 2244 4d20 726f 6f6d          "DM room
-00047440: 2069 7320 666f 756e 642c 206e 6f20 6e65   is found, no ne
-00047450: 7720 444d 2072 6f6f 6d20 7769 6c6c 2062  w DM room will b
-00047460: 6520 6372 6561 7465 642e 2049 6620 6375  e created. If cu
-00047470: 7272 656e 746c 7920 220a 2020 2020 2020  rrently ".      
-00047480: 2020 226e 6f20 696e 7669 7461 7469 6f6e    "no invitation
-00047490: 2d61 6363 6570 7465 6420 444d 2072 6f6f  -accepted DM roo
-000474a0: 6d20 6578 6973 7473 206f 7220 220a 2020  m exists or ".  
-000474b0: 2020 2020 2020 222d 2d72 6f6f 6d2d 646d        "--room-dm
-000474c0: 2d63 7265 6174 652d 616c 6c6f 772d 6475  -create-allow-du
-000474d0: 706c 6963 6174 6573 2069 7320 7573 6564  plicates is used
-000474e0: 2c20 7468 656e 2061 206e 6577 2044 4d20  , then a new DM 
-000474f0: 7769 6c6c 2062 6520 220a 2020 2020 2020  will be ".      
-00047500: 2020 2263 7265 6174 6564 2e20 4e6f 7465    "created. Note
-00047510: 2c20 7468 6174 206f 6e65 2063 616e 2063  , that one can c
-00047520: 7265 6174 652f 6861 7665 2061 6e79 206e  reate/have any n
-00047530: 756d 6265 7220 6f66 2044 4d20 726f 6f6d  umber of DM room
-00047540: 7320 220a 2020 2020 2020 2020 2277 6974  s ".        "wit
-00047550: 6820 7468 6520 7361 6d65 2070 6572 736f  h the same perso
-00047560: 6e2e 2022 0a20 2020 2020 2020 2022 526f  n. ".        "Ro
-00047570: 6f6d 2069 642c 2072 6f6f 6d20 616c 6961  om id, room alia
-00047580: 732c 2065 6e63 7279 7074 696f 6e20 616e  s, encryption an
-00047590: 6420 6f74 6865 7220 6669 656c 6473 2022  d other fields "
-000475a0: 0a20 2020 2020 2020 2022 6172 6520 7072  .        "are pr
-000475b0: 696e 7465 6420 6173 206f 7574 7075 742c  inted as output,
-000475c0: 206f 6e65 206c 696e 6520 7065 7220 6372   one line per cr
-000475d0: 6561 7465 6420 726f 6f6d 2e20 220a 2020  eated room. ".  
-000475e0: 2020 2020 2020 2249 6620 6120 726f 6f6d        "If a room
-000475f0: 2069 7320 6e6f 7420 6372 6561 7465 6420   is not created 
-00047600: 6265 6361 7573 6520 6f6e 6520 616c 7265  because one alre
-00047610: 6164 7920 6578 6973 7473 2c20 220a 2020  ady exists, ".  
-00047620: 2020 2020 2020 2274 6865 6e20 7468 6520        "then the 
-00047630: 726f 6f6d 2069 6420 6f66 2074 6865 2066  room id of the f
-00047640: 6972 7374 2044 4d20 726f 6f6d 2066 6f75  irst DM room fou
-00047650: 6e64 2069 7320 7072 696e 7465 642c 2022  nd is printed, "
-00047660: 0a20 2020 2020 2020 2022 6275 7420 6e65  .        "but ne
-00047670: 6974 6865 7220 7468 6520 616c 6961 7320  ither the alias 
-00047680: 6e6f 7220 6f74 6865 7220 6669 656c 6473  nor other fields
-00047690: 2e22 2c0a 2020 2020 290a 2020 2020 6170  .",.    ).    ap
-000476a0: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
-000476b0: 2020 2020 2020 2022 2d2d 726f 6f6d 2d64         "--room-d
-000476c0: 6d2d 6372 6561 7465 2d61 6c6c 6f77 2d64  m-create-allow-d
-000476d0: 7570 6c69 6361 7465 7322 2c0a 2020 2020  uplicates",.    
-000476e0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-000476f0: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
-00047700: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
-00047710: 0a20 2020 2020 2020 2068 656c 703d 2241  .        help="A
-00047720: 6c6c 6f77 2063 7265 6174 696e 6720 6475  llow creating du
-00047730: 706c 6963 6174 6520 444d 2072 6f6f 6d73  plicate DM rooms
-00047740: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-00047750: 6169 6c73 3a3a 2042 7920 6465 6661 756c  ails:: By defaul
-00047760: 742c 2069 6620 7468 6973 206f 7074 696f  t, if this optio
-00047770: 6e20 6973 2062 6f74 2075 7365 6420 220a  n is bot used ".
-00047780: 2020 2020 2020 2020 2264 7570 6c69 6361          "duplica
-00047790: 7465 7320 6172 6520 6176 6f69 6465 642e  tes are avoided.
-000477a0: 2022 0a20 2020 2020 2020 2022 4163 7469   ".        "Acti
-000477b0: 6f6e 7320 7468 6174 2073 7570 706f 7274  ons that support
-000477c0: 2074 6869 7320 6f70 7469 6f6e 2061 7265   this option are
-000477d0: 3a20 2d2d 726f 6f6d 2d64 6d2d 6372 6561  : --room-dm-crea
-000477e0: 7465 2e20 220a 2020 2020 2020 2020 2254  te. ".        "T
-000477f0: 6f20 6f76 6572 7772 6974 6520 7468 6174  o overwrite that
-00047800: 2064 6566 6175 6c74 2061 6e64 2074 6f20   default and to 
-00047810: 616c 6c6f 7720 7468 6520 6372 6561 7469  allow the creati
-00047820: 6f6e 206f 6620 6120 444d 2072 6f6f 6d20  on of a DM room 
-00047830: 220a 2020 2020 2020 2020 2265 7665 6e20  ".        "even 
-00047840: 6966 2061 2044 4d20 726f 6f6d 2061 6c72  if a DM room alr
-00047850: 6561 6479 2065 7869 7374 732c 2022 0a20  eady exists, ". 
-00047860: 2020 2020 2020 2022 7573 6520 272d 2d72         "use '--r
-00047870: 6f6f 6d2d 646d 2d63 7265 6174 652d 616c  oom-dm-create-al
-00047880: 6c6f 772d 6475 706c 6963 6174 6573 272e  low-duplicates'.
-00047890: 2022 0a20 2020 2020 2020 2022 5365 6520   ".        "See 
-000478a0: 7468 6520 2d2d 726f 6f6d 2d64 6d2d 6372  the --room-dm-cr
-000478b0: 6561 7465 2063 6f6d 6d61 6e64 732e 222c  eate commands.",
-000478c0: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-000478d0: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-000478e0: 2020 2020 222d 2d72 6f6f 6d2d 6a6f 696e      "--room-join
-000478f0: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
-00047900: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
-00047910: 2020 2061 6374 696f 6e3d 2265 7874 656e     action="exten
-00047920: 6422 2c0a 2020 2020 2020 2020 6e61 7267  d",.        narg
-00047930: 733d 222b 222c 0a20 2020 2020 2020 2074  s="+",.        t
-00047940: 7970 653d 7374 722c 0a20 2020 2020 2020  ype=str,.       
-00047950: 206d 6574 6176 6172 3d22 524f 4f4d 222c   metavar="ROOM",
-00047960: 0a20 2020 2020 2020 2068 656c 703d 224a  .        help="J
-00047970: 6f69 6e20 6f6e 6520 726f 6f6d 206f 7220  oin one room or 
-00047980: 6d75 6c74 6970 6c65 2072 6f6f 6d73 2e20  multiple rooms. 
-00047990: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
-000479a0: 6c73 3a3a 204f 6e65 206f 7220 6d75 6c74  ls:: One or mult
-000479b0: 6970 6c65 2022 0a20 2020 2020 2020 2022  iple ".        "
-000479c0: 726f 6f6d 2061 6c69 6173 6573 2063 616e  room aliases can
-000479d0: 2062 6520 7370 6563 6966 6965 642e 2054   be specified. T
-000479e0: 6865 2072 6f6f 6d20 286f 7220 6d75 6c74  he room (or mult
-000479f0: 6970 6c65 2022 0a20 2020 2020 2020 2022  iple ".        "
-00047a00: 6f6e 6573 2920 7072 6f76 6964 6564 2069  ones) provided i
-00047a10: 6e20 7468 6520 6172 6775 6d65 6e74 7320  n the arguments 
-00047a20: 7769 6c6c 2062 6520 6a6f 696e 6564 2e20  will be joined. 
-00047a30: 220a 2020 2020 2020 2020 2254 6865 2075  ".        "The u
-00047a40: 7365 7220 6d75 7374 2068 6176 6520 7065  ser must have pe
-00047a50: 726d 6973 7369 6f6e 7320 746f 206a 6f69  rmissions to joi
-00047a60: 6e20 7468 6573 6520 726f 6f6d 732e 222c  n these rooms.",
-00047a70: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-00047a80: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-00047a90: 2020 2020 222d 2d72 6f6f 6d2d 6c65 6176      "--room-leav
-00047aa0: 6522 2c0a 2020 2020 2020 2020 7265 7175  e",.        requ
-00047ab0: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
-00047ac0: 2020 2020 6163 7469 6f6e 3d22 6578 7465      action="exte
-00047ad0: 6e64 222c 0a20 2020 2020 2020 206e 6172  nd",.        nar
-00047ae0: 6773 3d22 2b22 2c0a 2020 2020 2020 2020  gs="+",.        
-00047af0: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
-00047b00: 2020 6d65 7461 7661 723d 2252 4f4f 4d22    metavar="ROOM"
-00047b10: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
-00047b20: 4c65 6176 6520 6f6e 6520 726f 6f6d 206f  Leave one room o
-00047b30: 7220 6d75 6c74 6970 6c65 2072 6f6f 6d73  r multiple rooms
-00047b40: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-00047b50: 6169 6c73 3a3a 204f 6e65 206f 7220 6d75  ails:: One or mu
-00047b60: 6c74 6970 6c65 2022 0a20 2020 2020 2020  ltiple ".       
-00047b70: 2022 726f 6f6d 2061 6c69 6173 6573 2063   "room aliases c
-00047b80: 616e 2062 6520 7370 6563 6966 6965 642e  an be specified.
-00047b90: 2054 6865 2072 6f6f 6d20 286f 7220 6d75   The room (or mu
-00047ba0: 6c74 6970 6c65 2022 0a20 2020 2020 2020  ltiple ".       
-00047bb0: 2022 6f6e 6573 2920 7072 6f76 6964 6564   "ones) provided
-00047bc0: 2069 6e20 7468 6520 6172 6775 6d65 6e74   in the argument
-00047bd0: 7320 7769 6c6c 2062 6520 6c65 6674 2e20  s will be left. 
-00047be0: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
-00047bf0: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
-00047c00: 2020 2020 2020 222d 2d72 6f6f 6d2d 666f        "--room-fo
-00047c10: 7267 6574 222c 0a20 2020 2020 2020 2072  rget",.        r
-00047c20: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
-00047c30: 2020 2020 2020 2061 6374 696f 6e3d 2265         action="e
-00047c40: 7874 656e 6422 2c0a 2020 2020 2020 2020  xtend",.        
-00047c50: 6e61 7267 733d 222b 222c 0a20 2020 2020  nargs="+",.     
-00047c60: 2020 2074 7970 653d 7374 722c 0a20 2020     type=str,.   
-00047c70: 2020 2020 206d 6574 6176 6172 3d22 524f       metavar="RO
-00047c80: 4f4d 222c 0a20 2020 2020 2020 2068 656c  OM",.        hel
-00047c90: 703d 2246 6f72 6765 7420 6f6e 6520 726f  p="Forget one ro
-00047ca0: 6f6d 206f 7220 6d75 6c74 6970 6c65 2072  om or multiple r
-00047cb0: 6f6f 6d73 2e20 220a 2020 2020 2020 2020  ooms. ".        
-00047cc0: 2244 6574 6169 6c73 3a3a 2041 6674 6572  "Details:: After
-00047cd0: 206c 6561 7669 6e67 2061 2072 6f6f 6d20   leaving a room 
-00047ce0: 796f 7520 7368 6f75 6c64 2028 6d6f 7374  you should (most
-00047cf0: 206c 696b 656c 7929 2066 6f72 6765 7420   likely) forget 
-00047d00: 7468 6520 220a 2020 2020 2020 2020 2272  the ".        "r
-00047d10: 6f6f 6d2e 2046 6f72 6765 7474 696e 6720  oom. Forgetting 
-00047d20: 6120 726f 6f6d 2072 656d 6f76 6573 2074  a room removes t
-00047d30: 6865 2075 7365 7273 2720 726f 6f6d 2068  he users' room h
-00047d40: 6973 746f 7279 2e20 220a 2020 2020 2020  istory. ".      
-00047d50: 2020 224f 6e65 206f 7220 6d75 6c74 6970    "One or multip
-00047d60: 6c65 2022 0a20 2020 2020 2020 2022 726f  le ".        "ro
-00047d70: 6f6d 2061 6c69 6173 6573 2063 616e 2062  om aliases can b
-00047d80: 6520 7370 6563 6966 6965 642e 2054 6865  e specified. The
-00047d90: 2072 6f6f 6d20 286f 7220 6d75 6c74 6970   room (or multip
-00047da0: 6c65 2022 0a20 2020 2020 2020 2022 6f6e  le ".        "on
-00047db0: 6573 2920 7072 6f76 6964 6564 2069 6e20  es) provided in 
-00047dc0: 7468 6520 6172 6775 6d65 6e74 7320 7769  the arguments wi
-00047dd0: 6c6c 2062 6520 666f 7267 6f74 7465 6e2e  ll be forgotten.
-00047de0: 2022 0a20 2020 2020 2020 2022 4966 2061   ".        "If a
-00047df0: 6c6c 2075 7365 7273 2066 6f72 6765 7420  ll users forget 
-00047e00: 6120 726f 6f6d 2c20 7468 6520 726f 6f6d  a room, the room
-00047e10: 2063 616e 2065 7665 6e74 7561 6c6c 7920   can eventually 
-00047e20: 6265 2022 0a20 2020 2020 2020 2022 6465  be ".        "de
-00047e30: 6c65 7465 6420 6f6e 2074 6865 2073 6572  leted on the ser
-00047e40: 7665 722e 222c 0a20 2020 2029 0a20 2020  ver.",.    ).   
-00047e50: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-00047e60: 280a 2020 2020 2020 2020 222d 2d72 6f6f  (.        "--roo
-00047e70: 6d2d 696e 7669 7465 222c 0a20 2020 2020  m-invite",.     
-00047e80: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-00047e90: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
-00047ea0: 6e3d 2265 7874 656e 6422 2c0a 2020 2020  n="extend",.    
-00047eb0: 2020 2020 6e61 7267 733d 222b 222c 0a20      nargs="+",. 
-00047ec0: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
-00047ed0: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
-00047ee0: 3d22 524f 4f4d 222c 0a20 2020 2020 2020  ="ROOM",.       
-00047ef0: 2068 656c 703d 2249 6e76 6974 6520 6f6e   help="Invite on
-00047f00: 6520 6f72 6520 6d6f 7265 2075 7365 7273  e ore more users
-00047f10: 2074 6f20 6a6f 696e 206f 6e65 206f 7220   to join one or 
-00047f20: 6d6f 7265 2072 6f6f 6d73 2e20 220a 2020  more rooms. ".  
-00047f30: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
-00047f40: 2053 7065 6369 6679 2074 6865 2075 7365   Specify the use
-00047f50: 7228 7329 2061 7320 6172 6775 6d65 6e74  r(s) as argument
-00047f60: 7320 746f 202d 2d75 7365 722e 2022 0a20  s to --user. ". 
-00047f70: 2020 2020 2020 2022 5370 6563 6966 7920         "Specify 
-00047f80: 7468 6520 726f 6f6d 7320 6173 2061 7267  the rooms as arg
-00047f90: 756d 656e 7473 2074 6f20 7468 6973 206f  uments to this o
-00047fa0: 7074 696f 6e2c 2069 2e65 2e20 220a 2020  ption, i.e. ".  
-00047fb0: 2020 2020 2020 2261 7320 6172 6775 6d65        "as argume
-00047fc0: 6e74 7320 746f 202d 2d72 6f6f 6d2d 696e  nts to --room-in
-00047fd0: 7669 7465 2e20 220a 2020 2020 2020 2020  vite. ".        
-00047fe0: 2254 6865 2075 7365 7220 6d75 7374 2068  "The user must h
-00047ff0: 6176 6520 7065 726d 6973 7369 6f6e 7320  ave permissions 
-00048000: 746f 2069 6e76 6974 6520 7573 6572 732e  to invite users.
-00048010: 2022 0a20 2020 2020 2020 2022 446f 6e27   ".        "Don'
-00048020: 7420 636f 6e66 7573 6520 7468 6973 206f  t confuse this o
-00048030: 7074 696f 6e20 7769 7468 202d 2d72 6f6f  ption with --roo
-00048040: 6d2d 696e 7669 7465 732e 222c 0a20 2020  m-invites.",.   
-00048050: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-00048060: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-00048070: 222d 2d72 6f6f 6d2d 6261 6e22 2c0a 2020  "--room-ban",.  
-00048080: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-00048090: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-000480a0: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
-000480b0: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
-000480c0: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-000480d0: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
-000480e0: 7661 723d 2252 4f4f 4d22 2c0a 2020 2020  var="ROOM",.    
-000480f0: 2020 2020 6865 6c70 3d22 4261 6e20 6f6e      help="Ban on
-00048100: 6520 6f72 6520 6d6f 7265 2075 7365 7273  e ore more users
-00048110: 2066 726f 6d20 6f6e 6520 6f72 206d 6f72   from one or mor
-00048120: 6520 726f 6f6d 732e 2022 0a20 2020 2020  e rooms. ".     
-00048130: 2020 2022 4465 7461 696c 733a 3a20 5370     "Details:: Sp
-00048140: 6563 6966 7920 7468 6520 7573 6572 2873  ecify the user(s
-00048150: 2920 6173 2061 7267 756d 656e 7473 2074  ) as arguments t
-00048160: 6f20 2d2d 7573 6572 2e20 220a 2020 2020  o --user. ".    
-00048170: 2020 2020 2253 7065 6369 6679 2074 6865      "Specify the
-00048180: 2072 6f6f 6d73 2061 7320 6172 6775 6d65   rooms as argume
-00048190: 6e74 7320 746f 2074 6869 7320 6f70 7469  nts to this opti
-000481a0: 6f6e 2c20 692e 652e 2022 0a20 2020 2020  on, i.e. ".     
-000481b0: 2020 2022 6173 2061 7267 756d 656e 7473     "as arguments
-000481c0: 2074 6f20 2d2d 726f 6f6d 2d62 616e 2e20   to --room-ban. 
-000481d0: 220a 2020 2020 2020 2020 2254 6865 2075  ".        "The u
-000481e0: 7365 7220 6d75 7374 2068 6176 6520 7065  ser must have pe
-000481f0: 726d 6973 7369 6f6e 7320 746f 2062 616e  rmissions to ban
-00048200: 2075 7365 7273 2e22 2c0a 2020 2020 290a   users.",.    ).
-00048210: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
-00048220: 656e 7428 0a20 2020 2020 2020 2022 2d2d  ent(.        "--
-00048230: 726f 6f6d 2d75 6e62 616e 222c 0a20 2020  room-unban",.   
-00048240: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-00048250: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
-00048260: 696f 6e3d 2265 7874 656e 6422 2c0a 2020  ion="extend",.  
-00048270: 2020 2020 2020 6e61 7267 733d 222b 222c        nargs="+",
-00048280: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
-00048290: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
-000482a0: 6172 3d22 524f 4f4d 222c 0a20 2020 2020  ar="ROOM",.     
-000482b0: 2020 2068 656c 703d 2255 6e62 616e 206f     help="Unban o
-000482c0: 6e65 206f 7265 206d 6f72 6520 7573 6572  ne ore more user
-000482d0: 7320 6672 6f6d 206f 6e65 206f 7220 6d6f  s from one or mo
-000482e0: 7265 2072 6f6f 6d73 2e20 220a 2020 2020  re rooms. ".    
-000482f0: 2020 2020 2244 6574 6169 6c73 3a3a 2053      "Details:: S
-00048300: 7065 6369 6679 2074 6865 2075 7365 7228  pecify the user(
-00048310: 7329 2061 7320 6172 6775 6d65 6e74 7320  s) as arguments 
-00048320: 746f 202d 2d75 7365 722e 2022 0a20 2020  to --user. ".   
-00048330: 2020 2020 2022 5370 6563 6966 7920 7468       "Specify th
-00048340: 6520 726f 6f6d 7320 6173 2061 7267 756d  e rooms as argum
-00048350: 656e 7473 2074 6f20 7468 6973 206f 7074  ents to this opt
-00048360: 696f 6e2c 2069 2e65 2e20 220a 2020 2020  ion, i.e. ".    
-00048370: 2020 2020 2261 7320 6172 6775 6d65 6e74      "as argument
-00048380: 7320 746f 202d 2d72 6f6f 6d2d 756e 6261  s to --room-unba
-00048390: 6e2e 2022 0a20 2020 2020 2020 2022 5468  n. ".        "Th
-000483a0: 6520 7573 6572 206d 7573 7420 6861 7665  e user must have
-000483b0: 2070 6572 6d69 7373 696f 6e73 2074 6f20   permissions to 
-000483c0: 756e 6261 6e20 7573 6572 732e 222c 0a20  unban users.",. 
-000483d0: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
-000483e0: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-000483f0: 2020 222d 2d72 6f6f 6d2d 6b69 636b 222c    "--room-kick",
-00048400: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-00048410: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
-00048420: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
-00048430: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
-00048440: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
-00048450: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
-00048460: 6574 6176 6172 3d22 524f 4f4d 222c 0a20  etavar="ROOM",. 
-00048470: 2020 2020 2020 2068 656c 703d 224b 6963         help="Kic
-00048480: 6b20 6f6e 6520 6f72 6520 6d6f 7265 2075  k one ore more u
-00048490: 7365 7273 2066 726f 6d20 6f6e 6520 6f72  sers from one or
-000484a0: 206d 6f72 6520 726f 6f6d 732e 2022 0a20   more rooms. ". 
-000484b0: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-000484c0: 3a20 5370 6563 6966 7920 7468 6520 7573  : Specify the us
-000484d0: 6572 2873 2920 6173 2061 7267 756d 656e  er(s) as argumen
-000484e0: 7473 2074 6f20 2d2d 7573 6572 2e20 220a  ts to --user. ".
-000484f0: 2020 2020 2020 2020 2253 7065 6369 6679          "Specify
-00048500: 2074 6865 2072 6f6f 6d73 2061 7320 6172   the rooms as ar
-00048510: 6775 6d65 6e74 7320 746f 2074 6869 7320  guments to this 
-00048520: 6f70 7469 6f6e 2c20 692e 652e 2022 0a20  option, i.e. ". 
-00048530: 2020 2020 2020 2022 6173 2061 7267 756d         "as argum
-00048540: 656e 7473 2074 6f20 2d2d 726f 6f6d 2d6b  ents to --room-k
-00048550: 6963 6b2e 2022 0a20 2020 2020 2020 2022  ick. ".        "
-00048560: 5468 6520 7573 6572 206d 7573 7420 6861  The user must ha
-00048570: 7665 2070 6572 6d69 7373 696f 6e73 2074  ve permissions t
-00048580: 6f20 6b69 636b 2075 7365 7273 2e22 2c0a  o kick users.",.
-00048590: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
-000485a0: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-000485b0: 2020 2023 2073 7461 7274 696e 6720 7769     # starting wi
-000485c0: 7468 2076 6572 7369 6f6e 2032 2e31 3920  th version 2.19 
-000485d0: 222d 7522 2068 6173 2062 6565 6e20 6d6f  "-u" has been mo
-000485e0: 7665 6420 6672 6f6d 0a20 2020 2020 2020  ved from.       
-000485f0: 2023 202d 2d64 6f77 6e6c 6f61 642d 6d65   # --download-me
-00048600: 6469 6120 746f 202d 2d75 7365 7221 0a20  dia to --user!. 
-00048610: 2020 2020 2020 2022 2d75 222c 0a20 2020         "-u",.   
-00048620: 2020 2020 2022 2d2d 7573 6572 222c 0a20       "--user",. 
-00048630: 2020 2020 2020 2072 6571 7569 7265 643d         required=
-00048640: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
-00048650: 6374 696f 6e3d 2265 7874 656e 6422 2c0a  ction="extend",.
-00048660: 2020 2020 2020 2020 6e61 7267 733d 222b          nargs="+
-00048670: 222c 0a20 2020 2020 2020 2074 7970 653d  ",.        type=
-00048680: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
-00048690: 6176 6172 3d22 5553 4552 222c 0a20 2020  avar="USER",.   
-000486a0: 2020 2020 2068 656c 703d 2253 7065 6369       help="Speci
-000486b0: 6679 206f 6e65 206f 7220 6d75 6c74 6970  fy one or multip
-000486c0: 6c65 2075 7365 7273 2e20 220a 2020 2020  le users. ".    
-000486d0: 2020 2020 2244 6574 6169 6c73 3a3a 2054      "Details:: T
-000486e0: 6869 7320 6f70 7469 6f6e 2069 7320 6d65  his option is me
-000486f0: 616e 696e 6766 756c 2022 0a20 2020 2020  aningful ".     
-00048700: 2020 2022 696e 2063 6f6d 6269 6e61 7469     "in combinati
-00048710: 6f6e 2077 6974 6820 6129 2072 6f6f 6d20  on with a) room 
-00048720: 6163 7469 6f6e 7320 6c69 6b65 202d 2d72  actions like --r
-00048730: 6f6f 6d2d 696e 7669 7465 2c20 2d2d 726f  oom-invite, --ro
-00048740: 6f6d 2d62 616e 2c20 220a 2020 2020 2020  om-ban, ".      
-00048750: 2020 222d 2d72 6f6f 6d2d 756e 6261 6e2c    "--room-unban,
-00048760: 2065 7463 2e20 616e 6420 6229 2073 656e   etc. and b) sen
-00048770: 6420 6163 7469 6f6e 7320 6c69 6b65 202d  d actions like -
-00048780: 6d2c 202d 692c 202d 662c 2065 7463 2e20  m, -i, -f, etc. 
-00048790: 220a 2020 2020 2020 2020 2263 2920 736f  ".        "c) so
-000487a0: 6d65 206c 6973 7465 6e20 6163 7469 6f6e  me listen action
-000487b0: 7320 2d2d 6c69 7374 656e 2c20 6173 2077  s --listen, as w
-000487c0: 656c 6c20 6173 2064 2920 6163 7469 6f6e  ell as d) action
-000487d0: 7320 6c69 6b65 2022 0a20 2020 2020 2020  s like ".       
-000487e0: 2022 2d2d 6465 6c65 7465 2d64 6576 6963   "--delete-devic
-000487f0: 652e 2022 0a20 2020 2020 2020 2022 496e  e. ".        "In
-00048800: 2063 6173 6520 6f66 2061 2920 7468 6973   case of a) this
-00048810: 206f 7074 696f 6e20 2d2d 7573 6572 2073   option --user s
-00048820: 7065 6369 6669 6573 2074 6865 2075 7365  pecifies the use
-00048830: 7273 2022 0a20 2020 2020 2020 2022 746f  rs ".        "to
-00048840: 2062 6520 7573 6564 2077 6974 6820 726f   be used with ro
-00048850: 6f6d 2063 6f6d 6d61 6e64 7320 286c 696b  om commands (lik
-00048860: 6520 696e 7669 7465 2c20 6261 6e2c 2065  e invite, ban, e
-00048870: 7463 2e29 2e20 220a 2020 2020 2020 2020  tc.). ".        
-00048880: 2249 6e20 6361 7365 206f 6620 6229 2074  "In case of b) t
-00048890: 6865 206f 7074 696f 6e20 2d2d 7573 6572  he option --user
-000488a0: 2063 616e 2062 6520 7573 6564 2061 7320   can be used as 
-000488b0: 616e 2061 6c74 6572 6e61 7469 7665 2022  an alternative "
-000488c0: 0a20 2020 2020 2020 2022 746f 2073 7065  .        "to spe
-000488d0: 6369 6679 696e 6720 6120 726f 6f6d 2061  cifying a room a
-000488e0: 7320 6465 7374 696e 6174 696f 6e20 666f  s destination fo
-000488f0: 7220 7465 7874 2028 2d6d 292c 2069 6d61  r text (-m), ima
-00048900: 6765 7320 282d 6929 2c20 220a 2020 2020  ges (-i), ".    
-00048910: 2020 2020 2265 7463 2e20 466f 7220 7365      "etc. For se
-00048920: 6e64 2061 6374 696f 6e73 2027 2d2d 7573  nd actions '--us
-00048930: 6572 2720 6973 2070 726f 7669 6469 6e67  er' is providing
-00048940: 2074 6865 2066 756e 6374 696f 6e61 6c69   the functionali
-00048950: 7479 206f 6620 220a 2020 2020 2020 2020  ty of ".        
-00048960: 2227 444d 2028 6469 7265 6374 206d 6573  "'DM (direct mes
-00048970: 7361 6769 6e67 2927 2e20 466f 7220 6329  saging)'. For c)
-00048980: 2074 6869 7320 6f70 7469 6f6e 2061 6c6c   this option all
-00048990: 6f77 7320 616e 2061 6c74 6572 6e61 7469  ows an alternati
-000489a0: 7665 2022 0a20 2020 2020 2020 2022 746f  ve ".        "to
-000489b0: 2073 7065 6369 6679 696e 6720 6120 726f   specifying a ro
-000489c0: 6f6d 2061 7320 6465 7374 696e 6174 696f  om as destinatio
-000489d0: 6e20 666f 7220 736f 6d65 202d 2d6c 6973  n for some --lis
-000489e0: 7465 6e20 6163 7469 6f6e 732e 2022 0a20  ten actions. ". 
-000489f0: 2020 2020 2020 2022 466f 7220 6429 2074         "For d) t
-00048a00: 6869 7320 6769 7665 7320 7468 6520 6f70  his gives the op
-00048a10: 7469 6f6e 2074 6f20 6465 6c65 7465 2074  tion to delete t
-00048a20: 6865 2064 6576 6963 6520 6f66 2061 2064  he device of a d
-00048a30: 6966 6665 7265 6e74 2022 0a20 2020 2020  ifferent ".     
-00048a40: 2020 2022 7573 6572 2e20 220a 2020 2020     "user. ".    
-00048a50: 2020 2020 6622 2d2d 2d2d 2d20 5768 6174      f"----- What
-00048a60: 2069 7320 6120 444d 3f20 7b50 524f 475f   is a DM? {PROG_
-00048a70: 5749 5448 4f55 545f 4558 547d 2074 7269  WITHOUT_EXT} tri
-00048a80: 6573 2074 6f20 6669 6e64 2061 2022 0a20  es to find a ". 
-00048a90: 2020 2020 2020 2022 726f 6f6d 2074 6861         "room tha
-00048aa0: 7420 636f 6e74 6169 6e73 206f 6e6c 7920  t contains only 
-00048ab0: 7468 6520 7365 6e64 6572 2061 6e64 2074  the sender and t
-00048ac0: 6865 2072 6563 6569 7665 722c 2068 656e  he receiver, hen
-00048ad0: 6365 2044 4d2e 2022 0a20 2020 2020 2020  ce DM. ".       
-00048ae0: 2022 5468 6573 6520 726f 6f6d 7320 6861   "These rooms ha
-00048af0: 7665 206e 6f74 6869 6e67 2073 7065 6369  ve nothing speci
-00048b00: 616c 206f 7468 6572 2074 6865 2066 6163  al other the fac
-00048b10: 7420 7468 6174 2074 6865 7920 6f6e 6c79  t that they only
-00048b20: 2068 6176 6520 220a 2020 2020 2020 2020   have ".        
-00048b30: 2232 206d 656d 6265 7273 2061 6e64 2074  "2 members and t
-00048b40: 6865 6d20 6265 696e 6720 7468 6520 7365  hem being the se
-00048b50: 6e64 6572 2061 6e64 2072 6563 6970 6965  nder and recipie
-00048b60: 6e74 2072 6573 7065 6374 6976 656c 792e  nt respectively.
-00048b70: 2022 0a20 2020 2020 2020 2022 4966 2073   ".        "If s
-00048b80: 7563 6820 6120 726f 6f6d 2069 7320 666f  uch a room is fo
-00048b90: 756e 642c 2074 6865 2066 6972 7374 206f  und, the first o
-00048ba0: 6e65 2066 6f75 6e64 2077 696c 6c20 6265  ne found will be
-00048bb0: 2075 7365 6420 6173 2022 0a20 2020 2020   used as ".     
-00048bc0: 2020 2022 6465 7374 696e 6174 696f 6e2e     "destination.
-00048bd0: 2049 6620 6e6f 2073 7563 6820 726f 6f6d   If no such room
-00048be0: 2069 7320 666f 756e 642c 2074 6865 2073   is found, the s
-00048bf0: 656e 6420 6661 696c 7320 616e 6420 7468  end fails and th
-00048c00: 6520 7573 6572 2022 0a20 2020 2020 2020  e user ".       
-00048c10: 2022 7368 6f75 6c64 2064 6f20 6120 2d2d   "should do a --
-00048c20: 726f 6f6d 2d63 7265 6174 6520 616e 6420  room-create and 
-00048c30: 2d2d 726f 6f6d 2d69 6e76 6974 6520 6669  --room-invite fi
-00048c40: 7273 742e 2049 6620 6d75 6c74 6970 6c65  rst. If multiple
-00048c50: 2022 0a20 2020 2020 2020 2022 7375 6368   ".        "such
-00048c60: 2072 6f6f 6d73 2065 7869 7374 2c20 6f6e   rooms exist, on
-00048c70: 6520 6f66 2074 6865 6d20 7769 6c6c 2062  e of them will b
-00048c80: 6520 7573 6564 2028 6172 6269 7472 6172  e used (arbitrar
-00048c90: 696c 7929 2e20 220a 2020 2020 2020 2020  ily). ".        
-00048ca0: 2246 6f72 2073 656e 6469 6e67 2061 6e64  "For sending and
-00048cb0: 206c 6973 7465 6e69 6e67 2c20 7370 6563   listening, spec
-00048cc0: 6966 7969 6e67 2061 2072 6f6f 6d20 6469  ifying a room di
-00048cd0: 7265 6374 6c79 2069 7320 616c 7761 7973  rectly is always
-00048ce0: 2022 0a20 2020 2020 2020 2022 6661 7374   ".        "fast
-00048cf0: 6572 2061 6e64 206d 6f72 6520 6566 6669  er and more effi
-00048d00: 6369 656e 7420 7468 616e 2073 7065 6369  cient than speci
-00048d10: 6679 696e 6720 6120 7573 6572 2e20 536f  fying a user. So
-00048d20: 2c20 6966 2079 6f75 206b 6e6f 7720 220a  , if you know ".
-00048d30: 2020 2020 2020 2020 2274 6865 2072 6f6f          "the roo
-00048d40: 6d2c 2069 7420 6973 2070 7265 6665 7272  m, it is preferr
-00048d50: 6564 2074 6f20 7573 6520 2d2d 726f 6f6d  ed to use --room
-00048d60: 2069 6e73 7465 6164 206f 6620 2d2d 7573   instead of --us
-00048d70: 6572 2e20 220a 2020 2020 2020 2020 2246  er. ".        "F
-00048d80: 6f72 2062 2920 616e 6420 6329 202d 2d75  or b) and c) --u
-00048d90: 7365 7220 6361 6e20 6265 2073 7065 6369  ser can be speci
-00048da0: 6669 6564 2069 6e20 3320 7761 7973 3a20  fied in 3 ways: 
-00048db0: 3129 2066 756c 6c20 7573 6572 2069 6420  1) full user id 
-00048dc0: 220a 2020 2020 2020 2020 2261 7320 696e  ".        "as in
-00048dd0: 2027 406a 6f68 6e3a 6578 616d 706c 652e   '@john:example.
-00048de0: 6f72 6727 2c20 3229 2070 6172 7469 616c  org', 2) partial
-00048df0: 2075 7365 7220 6964 2061 7320 696e 2027   user id as in '
-00048e00: 406a 6f68 6e27 2077 6865 6e20 220a 2020  @john' when ".  
-00048e10: 2020 2020 2020 2274 6865 2075 7365 7220        "the user 
-00048e20: 6973 206f 6e20 7468 6520 7361 6d65 2068  is on the same h
-00048e30: 6f6d 6573 6572 7665 7220 2865 7861 6d70  omeserver (examp
-00048e40: 6c65 2e6f 7267 2077 696c 6c20 6265 2022  le.org will be "
-00048e50: 0a20 2020 2020 2020 2022 6175 746f 6d61  .        "automa
-00048e60: 7469 6361 6c6c 7920 6170 7065 6e64 6564  tically appended
-00048e70: 292c 206f 7220 3329 2061 2064 6973 706c  ), or 3) a displ
-00048e80: 6179 206e 616d 6520 6173 2069 6e20 276a  ay name as in 'j
-00048e90: 6f68 6e27 2e20 220a 2020 2020 2020 2020  ohn'. ".        
-00048ea0: 2242 6520 6361 7265 6675 6c2c 2077 6865  "Be careful, whe
-00048eb0: 6e20 220a 2020 2020 2020 2020 2275 7369  n ".        "usi
-00048ec0: 6e67 2064 6973 706c 6179 206e 616d 6573  ng display names
-00048ed0: 2061 7320 7468 6579 206d 6967 6874 206e   as they might n
-00048ee0: 6f74 2062 6520 756e 6971 7565 2c20 616e  ot be unique, an
-00048ef0: 6420 796f 7520 636f 756c 6420 220a 2020  d you could ".  
-00048f00: 2020 2020 2020 2262 6520 7365 6e64 696e        "be sendin
-00048f10: 6720 746f 2074 6865 2077 726f 6e67 2070  g to the wrong p
-00048f20: 6572 736f 6e2e 2054 6f20 7365 6520 706f  erson. To see po
-00048f30: 7373 6962 6c65 2064 6973 706c 6179 206e  ssible display n
-00048f40: 616d 6573 2075 7365 2022 0a20 2020 2020  ames use ".     
-00048f50: 2020 2022 7468 6520 2d2d 6a6f 696e 6564     "the --joined
-00048f60: 2d6d 656d 6265 7273 2027 2a27 206f 7074  -members '*' opt
-00048f70: 696f 6e20 7768 6963 6820 7769 6c6c 2073  ion which will s
-00048f80: 686f 7720 796f 7520 7468 6520 6469 7370  how you the disp
-00048f90: 6c61 7920 220a 2020 2020 2020 2020 226e  lay ".        "n
-00048fa0: 616d 6573 2069 6e20 7468 6520 6d69 6464  ames in the midd
-00048fb0: 6c65 2063 6f6c 756d 6e2e 222c 0a20 2020  le column.",.   
-00048fc0: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-00048fd0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-00048fe0: 222d 2d75 7365 722d 6c6f 6769 6e22 2c0a  "--user-login",.
-00048ff0: 2020 2020 2020 2020 7265 7175 6972 6564          required
-00049000: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-00049010: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
-00049020: 2020 2320 406a 6f68 6e3a 6578 616d 706c    # @john:exampl
-00049030: 652e 636f 6d20 616e 6420 406a 6f68 6e20  e.com and @john 
-00049040: 616e 6420 6a6f 686e 2061 6363 6570 7465  and john accepte
-00049050: 640a 2020 2020 2020 2020 6d65 7461 7661  d.        metava
-00049060: 723d 2255 5345 5222 2c0a 2020 2020 2020  r="USER",.      
-00049070: 2020 6865 6c70 3d22 5370 6563 6966 7920    help="Specify 
-00049080: 7573 6572 2066 6f72 202d 2d6c 6f67 696e  user for --login
-00049090: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-000490a0: 6169 6c73 3a3a 204f 7074 696f 6e61 6c20  ails:: Optional 
-000490b0: 6172 6775 6d65 6e74 2074 6f20 7370 6563  argument to spec
-000490c0: 6966 7920 7468 6520 7573 6572 2066 6f72  ify the user for
-000490d0: 202d 2d6c 6f67 696e 2e20 220a 2020 2020   --login. ".    
-000490e0: 2020 2020 2254 6869 7320 6769 7665 7320      "This gives 
-000490f0: 7468 6520 6f70 7469 6f6e 2074 6f20 7370  the option to sp
-00049100: 6563 6966 7920 7468 6520 7573 6572 2069  ecify the user i
-00049110: 6420 666f 7220 6c6f 6769 6e2e 2022 0a20  d for login. ". 
-00049120: 2020 2020 2020 2022 466f 7220 272d 2d6c         "For '--l
-00049130: 6f67 696e 2073 736f 2720 7468 6520 2d2d  ogin sso' the --
-00049140: 7573 6572 2d6c 6f67 696e 2069 7320 6e6f  user-login is no
-00049150: 7420 6e65 6564 6564 2061 7320 7573 6572  t needed as user
-00049160: 2069 6420 6361 6e20 6265 2022 0a20 2020   id can be ".   
-00049170: 2020 2020 2022 6f62 7461 696e 6564 2066       "obtained f
-00049180: 726f 6d20 7365 7276 6572 2076 6961 2053  rom server via S
-00049190: 534f 2e20 466f 7220 272d 2d6c 6f67 696e  SO. For '--login
-000491a0: 2070 6173 7377 6f72 6427 2c20 6966 206e   password', if n
-000491b0: 6f74 2022 0a20 2020 2020 2020 2022 7072  ot ".        "pr
-000491c0: 6f76 6964 6564 2069 7420 7769 6c6c 2062  ovided it will b
-000491d0: 6520 7175 6572 6965 6420 7669 6120 6b65  e queried via ke
-000491e0: 7962 6f61 7264 2e20 4120 6675 6c6c 2075  yboard. A full u
-000491f0: 7365 7220 6964 206c 696b 6520 220a 2020  ser id like ".  
-00049200: 2020 2020 2020 2227 406a 6f68 6e3a 6578        "'@john:ex
-00049210: 616d 706c 652e 636f 6d27 2c20 6120 7061  ample.com', a pa
-00049220: 7274 6961 6c20 7573 6572 206e 616d 6520  rtial user name 
-00049230: 6c69 6b65 2027 406a 6f68 6e27 2c20 616e  like '@john', an
-00049240: 6420 220a 2020 2020 2020 2020 2261 2073  d ".        "a s
-00049250: 686f 7274 2075 7365 7220 6e61 6d65 206c  hort user name l
-00049260: 696b 6520 276a 6f68 6e27 2063 616e 2062  ike 'john' can b
-00049270: 6520 6769 7665 6e2e 2022 0a20 2020 2020  e given. ".     
-00049280: 2020 2022 2d2d 7573 6572 2d6c 6f67 696e     "--user-login
-00049290: 2069 7320 6f6e 6c79 2075 7365 6420 6279   is only used by
-000492a0: 202d 2d6c 6f67 696e 2061 6e64 2069 676e   --login and ign
-000492b0: 6f72 6564 2062 7920 616c 6c20 6f74 6865  ored by all othe
-000492c0: 7220 220a 2020 2020 2020 2020 2261 6374  r ".        "act
-000492d0: 696f 6e73 2e22 2c0a 2020 2020 290a 2020  ions.",.    ).  
-000492e0: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
-000492f0: 7428 0a20 2020 2020 2020 2022 2d2d 6e61  t(.        "--na
-00049300: 6d65 222c 0a20 2020 2020 2020 2072 6571  me",.        req
-00049310: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-00049320: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
-00049330: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
-00049340: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
-00049350: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
-00049360: 2020 206d 6574 6176 6172 3d22 524f 4f4d     metavar="ROOM
-00049370: 5f4e 414d 4522 2c0a 2020 2020 2020 2020  _NAME",.        
-00049380: 6865 6c70 3d22 5370 6563 6966 7920 6f6e  help="Specify on
-00049390: 6520 6f72 206d 756c 7469 706c 6520 726f  e or multiple ro
-000493a0: 6f6d 206e 616d 6573 2e20 220a 2020 2020  om names. ".    
-000493b0: 2020 2020 2244 6574 6169 6c73 3a3a 2054      "Details:: T
-000493c0: 6869 7320 6f70 7469 6f6e 2069 7320 6f6e  his option is on
-000493d0: 6c79 206d 6561 6e69 6e67 6675 6c20 220a  ly meaningful ".
-000493e0: 2020 2020 2020 2020 2269 6e20 636f 6d62          "in comb
-000493f0: 696e 6174 696f 6e20 7769 7468 206f 7074  ination with opt
-00049400: 696f 6e20 2d2d 726f 6f6d 2d63 7265 6174  ion --room-creat
-00049410: 652e 2022 0a20 2020 2020 2020 2022 5468  e. ".        "Th
-00049420: 6973 206f 7074 696f 6e20 2d2d 6e61 6d65  is option --name
-00049430: 2073 7065 6369 6669 6573 2074 6865 206e   specifies the n
-00049440: 616d 6573 2022 0a20 2020 2020 2020 2022  ames ".        "
-00049450: 746f 2062 6520 7573 6564 2077 6974 6820  to be used with 
-00049460: 7468 6520 636f 6d6d 616e 6420 2d2d 726f  the command --ro
-00049470: 6f6d 2d63 7265 6174 652e 222c 0a20 2020  om-create.",.   
-00049480: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-00049490: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-000494a0: 222d 2d74 6f70 6963 222c 0a20 2020 2020  "--topic",.     
-000494b0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-000494c0: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
-000494d0: 6e3d 2265 7874 656e 6422 2c0a 2020 2020  n="extend",.    
-000494e0: 2020 2020 6e61 7267 733d 222b 222c 0a20      nargs="+",. 
-000494f0: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
-00049500: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
-00049510: 3d22 524f 4f4d 5f54 4f50 4943 222c 0a20  ="ROOM_TOPIC",. 
-00049520: 2020 2020 2020 2068 656c 703d 2253 7065         help="Spe
-00049530: 6369 6679 206f 6e65 206f 7220 6d75 6c74  cify one or mult
-00049540: 6970 6c65 2072 6f6f 6d20 746f 7069 6373  iple room topics
-00049550: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-00049560: 6169 6c73 3a3a 2054 6869 7320 6f70 7469  ails:: This opti
-00049570: 6f6e 2069 7320 6f6e 6c79 206d 6561 6e69  on is only meani
-00049580: 6e67 6675 6c20 220a 2020 2020 2020 2020  ngful ".        
-00049590: 2269 6e20 636f 6d62 696e 6174 696f 6e20  "in combination 
-000495a0: 7769 7468 206f 7074 696f 6e20 2d2d 726f  with option --ro
-000495b0: 6f6d 2d63 7265 6174 652e 2022 0a20 2020  om-create. ".   
-000495c0: 2020 2020 2022 5468 6973 206f 7074 696f       "This optio
-000495d0: 6e20 2d2d 746f 7069 6320 7370 6563 6966  n --topic specif
-000495e0: 6965 7320 7468 6520 746f 7069 6373 2022  ies the topics "
-000495f0: 0a20 2020 2020 2020 2022 746f 2062 6520  .        "to be 
-00049600: 7573 6564 2077 6974 6820 7468 6520 636f  used with the co
-00049610: 6d6d 616e 6420 2d2d 726f 6f6d 2d63 7265  mmand --room-cre
-00049620: 6174 652e 222c 0a20 2020 2029 0a20 2020  ate.",.    ).   
-00049630: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-00049640: 280a 2020 2020 2020 2020 222d 2d61 6c69  (.        "--ali
-00049650: 6173 222c 0a20 2020 2020 2020 2072 6571  as",.        req
-00049660: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-00049670: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
-00049680: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
-00049690: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
-000496a0: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
-000496b0: 2020 206d 6574 6176 6172 3d22 524f 4f4d     metavar="ROOM
-000496c0: 5f41 4c49 4153 222c 0a20 2020 2020 2020  _ALIAS",.       
-000496d0: 2068 656c 703d 2253 7065 6369 6679 206f   help="Specify o
-000496e0: 6e65 206f 7220 6d75 6c74 6970 6c65 2072  ne or multiple r
-000496f0: 6f6f 6d20 616c 6961 7365 732e 2022 0a20  oom aliases. ". 
-00049700: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-00049710: 3a20 5468 6973 206f 7074 696f 6e20 6973  : This option is
-00049720: 206f 6e6c 7920 220a 2020 2020 2020 2020   only ".        
-00049730: 226d 6561 6e69 6e67 6675 6c20 696e 2063  "meaningful in c
-00049740: 6f6d 6269 6e61 7469 6f6e 2077 6974 6820  ombination with 
-00049750: 6f70 7469 6f6e 202d 2d72 6f6f 6d2d 646d  option --room-dm
-00049760: 2d63 7265 6174 652e 2022 0a20 2020 2020  -create. ".     
-00049770: 2020 2022 5468 6973 206f 7074 696f 6e20     "This option 
-00049780: 2d2d 616c 6961 7320 7370 6563 6966 6965  --alias specifie
-00049790: 7320 7468 6520 616c 6961 7365 7320 746f  s the aliases to
-000497a0: 2062 6520 7573 6564 2022 0a20 2020 2020   be used ".     
-000497b0: 2020 2022 7769 7468 2074 6865 2063 6f6d     "with the com
-000497c0: 6d61 6e64 202d 2d72 6f6f 6d2d 646d 2d63  mand --room-dm-c
-000497d0: 7265 6174 652e 222c 0a20 2020 2029 0a20  reate.",.    ). 
-000497e0: 2020 2023 2061 6c6c 6f77 206d 756c 7469     # allow multi
-000497f0: 706c 6520 6d65 7373 6167 6573 202c 2065  ple messages , e
-00049800: 2e67 2e20 2d6d 2022 6d31 2220 226d 3222  .g. -m "m1" "m2"
-00049810: 206f 7220 2d6d 2022 6d31 2220 2d6d 2022   or -m "m1" -m "
-00049820: 6d32 220a 2020 2020 2320 6d65 7373 6167  m2".    # messag
-00049830: 6520 6973 2067 6f69 6e67 2074 6f20 6265  e is going to be
-00049840: 2061 206c 6973 7420 6f66 2073 7472 696e   a list of strin
-00049850: 6773 0a20 2020 2023 2065 2e67 2e20 6d65  gs.    # e.g. me
-00049860: 7373 6167 653d 5b20 276d 3127 2c20 276d  ssage=[ 'm1', 'm
-00049870: 3227 205d 0a20 2020 2061 702e 6164 645f  2' ].    ap.add_
-00049880: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-00049890: 2020 222d 6d22 2c0a 2020 2020 2020 2020    "-m",.        
-000498a0: 222d 2d6d 6573 7361 6765 222c 0a20 2020  "--message",.   
-000498b0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-000498c0: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
-000498d0: 696f 6e3d 2265 7874 656e 6422 2c0a 2020  ion="extend",.  
-000498e0: 2020 2020 2020 6e61 7267 733d 222b 222c        nargs="+",
-000498f0: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
-00049900: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
-00049910: 6172 3d22 5445 5854 222c 0a20 2020 2020  ar="TEXT",.     
-00049920: 2020 2068 656c 703d 2253 656e 6420 6f6e     help="Send on
-00049930: 6520 6f72 206d 756c 7469 706c 6520 7465  e or multiple te
-00049940: 7874 206d 6573 7361 6765 732e 2022 0a20  xt messages. ". 
-00049950: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-00049960: 3a20 4d65 7373 6167 6520 6461 7461 206d  : Message data m
-00049970: 7573 7420 6e6f 7420 6265 2062 696e 6172  ust not be binar
-00049980: 7920 6461 7461 2c20 6974 2022 0a20 2020  y data, it ".   
-00049990: 2020 2020 2022 6d75 7374 2062 6520 7465       "must be te
-000499a0: 7874 2e20 4966 206e 6f20 272d 6d27 2069  xt. If no '-m' i
-000499b0: 7320 7573 6564 2061 6e64 206e 6f20 6f74  s used and no ot
-000499c0: 6865 7220 636f 6e66 6c69 6374 696e 6720  her conflicting 
-000499d0: 220a 2020 2020 2020 2020 2261 7267 756d  ".        "argum
-000499e0: 656e 7473 2061 7265 2070 726f 7669 6465  ents are provide
-000499f0: 642c 2061 6e64 2069 6e66 6f72 6d61 7469  d, and informati
-00049a00: 6f6e 2069 7320 7069 7065 6420 696e 746f  on is piped into
-00049a10: 2074 6865 2070 726f 6772 616d 2c20 220a   the program, ".
-00049a20: 2020 2020 2020 2020 2274 6865 6e20 7468          "then th
-00049a30: 6520 7069 7065 6420 6461 7461 2077 696c  e piped data wil
-00049a40: 6c20 6265 2075 7365 6420 6173 206d 6573  l be used as mes
-00049a50: 7361 6765 2e20 220a 2020 2020 2020 2020  sage. ".        
-00049a60: 2246 696e 616c 6c79 2c20 6966 2074 6865  "Finally, if the
-00049a70: 7265 2061 7265 206e 6f20 6f70 6572 6174  re are no operat
-00049a80: 696f 6e73 2061 7420 616c 6c20 696e 2074  ions at all in t
-00049a90: 6865 2061 7267 756d 656e 7473 2c20 7468  he arguments, th
-00049aa0: 656e 2022 0a20 2020 2020 2020 2022 6120  en ".        "a 
-00049ab0: 6d65 7373 6167 6520 7769 6c6c 2062 6520  message will be 
-00049ac0: 7265 6164 2066 726f 6d20 7374 6469 6e2c  read from stdin,
-00049ad0: 2069 2e65 2e20 6672 6f6d 2074 6865 206b   i.e. from the k
-00049ae0: 6579 626f 6172 642e 2022 0a20 2020 2020  eyboard. ".     
-00049af0: 2020 2022 5468 6973 206f 7074 696f 6e20     "This option 
-00049b00: 6361 6e20 6265 2075 7365 6420 6d75 6c74  can be used mult
-00049b10: 6970 6c65 2074 696d 6573 2074 6f20 7365  iple times to se
-00049b20: 6e64 2022 0a20 2020 2020 2020 2022 6d75  nd ".        "mu
-00049b30: 6c74 6970 6c65 206d 6573 7361 6765 732e  ltiple messages.
-00049b40: 2049 6620 7468 6572 6520 6973 2064 6174   If there is dat
-00049b50: 6120 7069 7065 6420 220a 2020 2020 2020  a piped ".      
-00049b60: 2020 2269 6e74 6f20 7468 6973 2070 726f    "into this pro
-00049b70: 6772 616d 2c20 7468 656e 2066 6972 7374  gram, then first
-00049b80: 2064 6174 6120 6672 6f6d 2074 6865 2022   data from the "
-00049b90: 0a20 2020 2020 2020 2022 7069 7065 2069  .        "pipe i
-00049ba0: 7320 7075 626c 6973 6865 642c 2074 6865  s published, the
-00049bb0: 6e20 6d65 7373 6167 6573 2066 726f 6d20  n messages from 
-00049bc0: 7468 6973 2022 0a20 2020 2020 2020 2022  this ".        "
-00049bd0: 6f70 7469 6f6e 2061 7265 2070 7562 6c69  option are publi
-00049be0: 7368 6564 2e20 4d65 7373 6167 6573 2077  shed. Messages w
-00049bf0: 696c 6c20 6265 2073 656e 7420 6c61 7374  ill be sent last
-00049c00: 2c20 220a 2020 2020 2020 2020 2269 2e65  , ".        "i.e
-00049c10: 2e20 6166 7465 7220 6f62 6a65 6374 7320  . after objects 
-00049c20: 6c69 6b65 2069 6d61 6765 732c 2061 7564  like images, aud
-00049c30: 696f 2c20 6669 6c65 732c 2065 7665 6e74  io, files, event
-00049c40: 732c 2065 7463 2e20 220a 2020 2020 2020  s, etc. ".      
-00049c50: 2020 2249 6e70 7574 2070 6970 6564 2076    "Input piped v
-00049c60: 6961 2073 7464 696e 2063 616e 2061 6464  ia stdin can add
-00049c70: 6974 696f 6e61 6c6c 7920 6265 2073 7065  itionally be spe
-00049c80: 6369 6669 6564 2077 6974 6820 7468 6520  cified with the 
-00049c90: 220a 2020 2020 2020 2020 2273 7065 6369  ".        "speci
-00049ca0: 616c 2063 6861 7261 6374 6572 2027 2d27  al character '-'
-00049cb0: 2e20 220a 2020 2020 2020 2020 6622 4966  . ".        f"If
-00049cc0: 2079 6f75 2077 616e 7420 746f 2066 6565   you want to fee
-00049cd0: 6420 6120 7465 7874 206d 6573 7361 6765  d a text message
-00049ce0: 2069 6e74 6f20 7b50 524f 475f 5749 5448   into {PROG_WITH
-00049cf0: 4f55 545f 4558 547d 2022 0a20 2020 2020  OUT_EXT} ".     
-00049d00: 2020 2022 7669 6120 6120 7069 7065 2c20     "via a pipe, 
-00049d10: 7669 6120 7374 6469 6e2c 2074 6865 6e20  via stdin, then 
-00049d20: 7370 6563 6966 7920 7468 6520 7370 6563  specify the spec
-00049d30: 6961 6c20 220a 2020 2020 2020 2020 2263  ial ".        "c
-00049d40: 6861 7261 6374 6572 2027 2d27 2e20 4966  haracter '-'. If
-00049d50: 2027 2d27 2069 7320 7370 6563 6966 6965   '-' is specifie
-00049d60: 6420 6173 206d 6573 7361 6765 2c20 220a  d as message, ".
-00049d70: 2020 2020 2020 2020 2274 6865 6e20 7468          "then th
-00049d80: 6520 7072 6f67 7261 6d20 7769 6c6c 2072  e program will r
-00049d90: 6561 6420 7468 6520 6d65 7373 6167 6520  ead the message 
-00049da0: 6672 6f6d 2073 7464 696e 2e20 220a 2020  from stdin. ".  
-00049db0: 2020 2020 2020 2257 6974 6820 272d 2720        "With '-' 
-00049dc0: 7468 6520 7768 6f6c 6520 6d65 7373 6167  the whole messag
-00049dd0: 652c 2061 6c6c 206c 696e 6573 2c20 7769  e, all lines, wi
-00049de0: 6c6c 2062 6520 636f 6e73 6964 6572 6564  ll be considered
-00049df0: 2022 0a20 2020 2020 2020 2022 6120 7369   ".        "a si
-00049e00: 6e67 6c65 206d 6573 7361 6765 2061 6e64  ngle message and
-00049e10: 2073 656e 7420 6173 206f 6e65 206d 6573   sent as one mes
-00049e20: 7361 6765 2e20 220a 2020 2020 2020 2020  sage. ".        
-00049e30: 2249 6620 796f 7572 206d 6573 7361 6765  "If your message
-00049e40: 2069 7320 6c69 7465 7261 6c6c 7920 272d   is literally '-
-00049e50: 2720 7468 656e 2075 7365 2027 5c5c 2d27  ' then use '\\-'
-00049e60: 2022 0a20 2020 2020 2020 2022 6173 206d   ".        "as m
-00049e70: 6573 7361 6765 2069 6e20 7468 6520 6172  essage in the ar
-00049e80: 6775 6d65 6e74 2e20 220a 2020 2020 2020  gument. ".      
-00049e90: 2020 2227 2d27 206d 6179 2061 7070 6561    "'-' may appea
-00049ea0: 7220 696e 2061 6e79 2070 6f73 6974 696f  r in any positio
-00049eb0: 6e2c 2069 2e65 2e20 272d 6d20 5c22 7374  n, i.e. '-m \"st
-00049ec0: 6172 745c 2220 2d20 5c22 656e 645c 2227  art\" - \"end\"'
-00049ed0: 2022 0a20 2020 2020 2020 2022 7769 6c6c   ".        "will
-00049ee0: 2073 656e 6420 3320 6d65 7373 6167 6573   send 3 messages
-00049ef0: 206f 7574 206f 6620 7768 6963 6820 7468   out of which th
-00049f00: 6520 7365 636f 6e64 206f 6e65 2069 7320  e second one is 
-00049f10: 7265 6164 2066 726f 6d20 7374 6469 6e2e  read from stdin.
-00049f20: 2022 0a20 2020 2020 2020 2022 272d 2720   ".        "'-' 
-00049f30: 6d61 7920 6170 7065 6172 206f 6e6c 7920  may appear only 
-00049f40: 6f6e 6365 206f 7665 7261 6c6c 2069 6e20  once overall in 
-00049f50: 616c 6c20 6172 6775 6d65 6e74 732e 2022  all arguments. "
-00049f60: 0a20 2020 2020 2020 2022 5369 6d69 6c61  .        "Simila
-00049f70: 7220 746f 2027 2d27 2c20 616e 6f74 6865  r to '-', anothe
-00049f80: 7220 7368 6f72 7463 7574 2063 6861 7261  r shortcut chara
-00049f90: 6374 6572 2069 7320 275f 272e 2054 6865  cter is '_'. The
-00049fa0: 2022 0a20 2020 2020 2020 2022 7370 6563   ".        "spec
-00049fb0: 6961 6c20 6368 6172 6163 7465 7220 275f  ial character '_
-00049fc0: 2720 6973 2075 7365 6420 666f 7220 7374  ' is used for st
-00049fd0: 7265 616d 696e 6720 6461 7461 2076 6961  reaming data via
-00049fe0: 2022 0a20 2020 2020 2020 2022 6120 7069   ".        "a pi
-00049ff0: 7065 206f 6e20 7374 6469 6e2e 2057 6974  pe on stdin. Wit
-0004a000: 6820 275f 2720 7468 6520 7374 6469 6e20  h '_' the stdin 
-0004a010: 7069 7065 2069 7320 7265 6164 206c 696e  pipe is read lin
-0004a020: 652d 6279 2d6c 696e 6520 220a 2020 2020  e-by-line ".    
-0004a030: 2020 2020 2261 6e64 2065 6163 6820 6c69      "and each li
-0004a040: 6e65 2069 7320 7472 6561 7465 6420 6173  ne is treated as
-0004a050: 2061 2073 6570 6172 6174 6520 6d65 7373   a separate mess
-0004a060: 6167 6520 616e 6420 7365 6e74 2072 6967  age and sent rig
-0004a070: 6874 2022 0a20 2020 2020 2020 2022 6177  ht ".        "aw
-0004a080: 6179 2e20 5468 6520 7072 6f67 7261 6d20  ay. The program 
-0004a090: 7761 6974 7320 666f 7220 7069 7065 2069  waits for pipe i
-0004a0a0: 6e70 7574 2075 6e74 696c 2074 6865 2070  nput until the p
-0004a0b0: 6970 6520 6973 2022 0a20 2020 2020 2020  ipe is ".       
-0004a0c0: 2022 636c 6f73 6564 2e20 452e 672e 2049   "closed. E.g. I
-0004a0d0: 6d61 6769 6e65 2061 2074 6f6f 6c20 7468  magine a tool th
-0004a0e0: 6174 2067 656e 6572 6174 6573 206f 7574  at generates out
-0004a0f0: 7075 7420 7370 6f72 6164 6963 616c 6c79  put sporadically
-0004a100: 2022 0a20 2020 2020 2020 2066 2232 3478   ".        f"24x
-0004a110: 372e 2049 7420 6361 6e20 6265 2070 6970  7. It can be pip
-0004a120: 6564 2c20 692e 652e 2073 7472 6561 6d65  ed, i.e. streame
-0004a130: 642c 2069 6e74 6f20 7b50 524f 475f 5749  d, into {PROG_WI
-0004a140: 5448 4f55 545f 4558 547d 2c20 616e 6420  THOUT_EXT}, and 
-0004a150: 220a 2020 2020 2020 2020 6622 7b50 524f  ".        f"{PRO
-0004a160: 475f 5749 5448 4f55 545f 4558 547d 2073  G_WITHOUT_EXT} s
-0004a170: 7461 7973 2061 6374 6976 652c 2073 656e  tays active, sen
-0004a180: 6469 6e67 2061 6c6c 2069 6e70 7574 2069  ding all input i
-0004a190: 6e73 7461 6e74 6c79 2e20 220a 2020 2020  nstantly. ".    
-0004a1a0: 2020 2020 2249 6620 796f 7520 7761 6e74      "If you want
-0004a1b0: 2074 6f20 7365 6e64 2074 6865 206c 6974   to send the lit
-0004a1c0: 6572 616c 206c 6574 7465 7220 275f 2720  eral letter '_' 
-0004a1d0: 7468 656e 2065 7363 6170 6520 6974 2022  then escape it "
-0004a1e0: 0a20 2020 2020 2020 2022 616e 6420 7365  .        "and se
-0004a1f0: 6e64 2027 5c5c 5f27 2e20 220a 2020 2020  nd '\\_'. ".    
-0004a200: 2020 2020 2227 5f27 2063 616e 2062 6520      "'_' can be 
-0004a210: 7573 6564 206f 6e6c 7920 6f6e 6365 2e20  used only once. 
-0004a220: 416e 6420 6569 7468 6572 2027 2d27 206f  And either '-' o
-0004a230: 7220 275f 2720 6361 6e20 6265 2075 7365  r '_' can be use
-0004a240: 642e 2022 2c0a 2020 2020 290a 2020 2020  d. ",.    ).    
-0004a250: 2320 616c 6c6f 7720 6d75 6c74 6970 6c65  # allow multiple
-0004a260: 206d 6573 7361 6765 7320 2c20 652e 672e   messages , e.g.
-0004a270: 202d 6920 2269 312e 6a70 6722 2022 6932   -i "i1.jpg" "i2
-0004a280: 2e67 6966 220a 2020 2020 2320 6f72 202d  .gif".    # or -
-0004a290: 6920 2269 312e 706e 6722 202d 6920 2269  i "i1.png" -i "i
-0004a2a0: 322e 6a70 6567 220a 2020 2020 2320 696d  2.jpeg".    # im
-0004a2b0: 6167 6520 6973 2067 6f69 6e67 2074 6f20  age is going to 
-0004a2c0: 6265 2061 206c 6973 7420 6f66 2073 7472  be a list of str
-0004a2d0: 696e 6773 0a20 2020 2023 2065 2e67 2e20  ings.    # e.g. 
-0004a2e0: 696d 6167 653d 5b20 2769 312e 6a70 6727  image=[ 'i1.jpg'
-0004a2f0: 2c20 2769 322e 706e 6727 205d 0a20 2020  , 'i2.png' ].   
-0004a300: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-0004a310: 280a 2020 2020 2020 2020 222d 6922 2c0a  (.        "-i",.
-0004a320: 2020 2020 2020 2020 222d 2d69 6d61 6765          "--image
-0004a330: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
-0004a340: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
-0004a350: 2020 2061 6374 696f 6e3d 2265 7874 656e     action="exten
-0004a360: 6422 2c0a 2020 2020 2020 2020 6e61 7267  d",.        narg
-0004a370: 733d 222b 222c 0a20 2020 2020 2020 2074  s="+",.        t
-0004a380: 7970 653d 7374 722c 0a20 2020 2020 2020  ype=str,.       
-0004a390: 206d 6574 6176 6172 3d22 494d 4147 455f   metavar="IMAGE_
-0004a3a0: 4649 4c45 222c 0a20 2020 2020 2020 2068  FILE",.        h
-0004a3b0: 656c 703d 2253 656e 6420 6f6e 6520 6f72  elp="Send one or
-0004a3c0: 206d 756c 7469 706c 6520 696d 6167 6520   multiple image 
-0004a3d0: 6669 6c65 732e 2022 0a20 2020 2020 2020  files. ".       
-0004a3e0: 2022 4465 7461 696c 733a 3a20 5468 6973   "Details:: This
-0004a3f0: 206f 7074 696f 6e20 6361 6e20 6265 2075   option can be u
-0004a400: 7365 6420 6d75 6c74 6970 6c65 2074 696d  sed multiple tim
-0004a410: 6573 2074 6f20 7365 6e64 2022 0a20 2020  es to send ".   
-0004a420: 2020 2020 2022 6d75 6c74 6970 6c65 2069       "multiple i
-0004a430: 6d61 6765 732e 2046 6972 7374 2069 6d61  mages. First ima
-0004a440: 6765 7320 6172 6520 7365 6e74 2c20 220a  ges are sent, ".
-0004a450: 2020 2020 2020 2020 2274 6865 6e20 7465          "then te
-0004a460: 7874 206d 6573 7361 6765 7320 6172 6520  xt messages are 
-0004a470: 7365 6e74 2e20 220a 2020 2020 2020 2020  sent. ".        
-0004a480: 6622 4966 2079 6f75 2077 616e 7420 746f  f"If you want to
-0004a490: 2066 6565 6420 616e 2069 6d61 6765 2069   feed an image i
-0004a4a0: 6e74 6f20 7b50 524f 475f 5749 5448 4f55  nto {PROG_WITHOU
-0004a4b0: 545f 4558 547d 2022 0a20 2020 2020 2020  T_EXT} ".       
-0004a4c0: 2022 7669 6120 6120 7069 7065 2c20 7669   "via a pipe, vi
-0004a4d0: 6120 7374 6469 6e2c 2074 6865 6e20 7370  a stdin, then sp
-0004a4e0: 6563 6966 7920 7468 6520 7370 6563 6961  ecify the specia
-0004a4f0: 6c20 220a 2020 2020 2020 2020 2263 6861  l ".        "cha
-0004a500: 7261 6374 6572 2027 2d27 2e20 4966 2027  racter '-'. If '
-0004a510: 2d27 2069 7320 7370 6563 6966 6965 6420  -' is specified 
-0004a520: 6173 2069 6d61 6765 2066 696c 6520 6e61  as image file na
-0004a530: 6d65 2c20 220a 2020 2020 2020 2020 2274  me, ".        "t
-0004a540: 6865 6e20 7468 6520 7072 6f67 7261 6d20  hen the program 
-0004a550: 7769 6c6c 2072 6561 6420 7468 6520 696d  will read the im
-0004a560: 6167 6520 6461 7461 2066 726f 6d20 7374  age data from st
-0004a570: 6469 6e2e 2022 0a20 2020 2020 2020 2022  din. ".        "
-0004a580: 4966 2079 6f75 7220 696d 6167 6520 6669  If your image fi
-0004a590: 6c65 2069 7320 6c69 7465 7261 6c6c 7920  le is literally 
-0004a5a0: 6e61 6d65 6420 272d 2720 7468 656e 2075  named '-' then u
-0004a5b0: 7365 2027 5c5c 2d27 2022 0a20 2020 2020  se '\\-' ".     
-0004a5c0: 2020 2022 6173 2066 696c 6520 6e61 6d65     "as file name
-0004a5d0: 2069 6e20 7468 6520 6172 6775 6d65 6e74   in the argument
-0004a5e0: 2e20 220a 2020 2020 2020 2020 2227 2d27  . ".        "'-'
-0004a5f0: 206d 6179 2061 7070 6561 7220 696e 2061   may appear in a
-0004a600: 6e79 2070 6f73 6974 696f 6e2c 2069 2e65  ny position, i.e
-0004a610: 2e20 272d 6920 696d 6167 6531 2e6a 7067  . '-i image1.jpg
-0004a620: 202d 2069 6d61 6765 332e 706e 6727 2022   - image3.png' "
-0004a630: 0a20 2020 2020 2020 2022 7769 6c6c 2073  .        "will s
-0004a640: 656e 6420 3320 696d 6167 6573 206f 7574  end 3 images out
-0004a650: 206f 6620 7768 6963 6820 7468 6520 7365   of which the se
-0004a660: 636f 6e64 206f 6e65 2069 7320 7265 6164  cond one is read
-0004a670: 2066 726f 6d20 7374 6469 6e2e 2022 0a20   from stdin. ". 
-0004a680: 2020 2020 2020 2022 272d 2720 6d61 7920         "'-' may 
-0004a690: 6170 7065 6172 206f 6e6c 7920 6f6e 6365  appear only once
-0004a6a0: 206f 7665 7261 6c6c 2069 6e20 616c 6c20   overall in all 
-0004a6b0: 6172 6775 6d65 6e74 732e 2022 0a20 2020  arguments. ".   
-0004a6c0: 2020 2020 2022 4966 2074 6865 2066 696c       "If the fil
-0004a6d0: 6520 6578 6973 7473 2061 6c72 6561 6479  e exists already
-0004a6e0: 2c20 6974 2069 7320 6d6f 7265 2065 6666  , it is more eff
-0004a6f0: 6963 6965 6e74 2074 6f20 7370 6563 6966  icient to specif
-0004a700: 7920 7468 6520 220a 2020 2020 2020 2020  y the ".        
-0004a710: 2266 696c 6520 6e61 6d65 2074 6861 6e20  "file name than 
-0004a720: 746f 2070 6970 6520 7468 6520 6669 6c65  to pipe the file
-0004a730: 2074 6872 6f75 6768 2073 7464 696e 2e22   through stdin."
-0004a740: 2c0a 2020 2020 290a 2020 2020 2320 616c  ,.    ).    # al
-0004a750: 6c6f 7720 6d75 6c74 6970 6c65 2061 7564  low multiple aud
-0004a760: 696f 2066 696c 6573 202c 2065 2e67 2e20  io files , e.g. 
-0004a770: 2d69 2022 6131 2e6d 7033 2220 2261 322e  -i "a1.mp3" "a2.
-0004a780: 7761 7622 0a20 2020 2023 206f 7220 2d69  wav".    # or -i
-0004a790: 2022 6131 2e6d 7033 2220 2d69 2022 6132   "a1.mp3" -i "a2
-0004a7a0: 2e6d 3461 220a 2020 2020 2320 6175 6469  .m4a".    # audi
-0004a7b0: 6f20 6973 2067 6f69 6e67 2074 6f20 6265  o is going to be
-0004a7c0: 2061 206c 6973 7420 6f66 2073 7472 696e   a list of strin
-0004a7d0: 6773 0a20 2020 2023 2065 2e67 2e20 6175  gs.    # e.g. au
-0004a7e0: 6469 6f3d 5b20 2761 312e 6d70 3327 2c20  dio=[ 'a1.mp3', 
-0004a7f0: 2761 322e 6d34 6127 205d 0a20 2020 2061  'a2.m4a' ].    a
-0004a800: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
-0004a810: 2020 2020 2020 2020 222d 6122 2c0a 2020          "-a",.  
-0004a820: 2020 2020 2020 222d 2d61 7564 696f 222c        "--audio",
-0004a830: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-0004a840: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
-0004a850: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
-0004a860: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
-0004a870: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
-0004a880: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
-0004a890: 6574 6176 6172 3d22 4155 4449 4f5f 4649  etavar="AUDIO_FI
-0004a8a0: 4c45 222c 0a20 2020 2020 2020 2068 656c  LE",.        hel
-0004a8b0: 703d 2253 656e 6420 6f6e 6520 6f72 206d  p="Send one or m
-0004a8c0: 756c 7469 706c 6520 6175 6469 6f20 6669  ultiple audio fi
-0004a8d0: 6c65 732e 2022 0a20 2020 2020 2020 2022  les. ".        "
-0004a8e0: 4465 7461 696c 733a 3a20 5468 6973 206f  Details:: This o
-0004a8f0: 7074 696f 6e20 6361 6e20 6265 2075 7365  ption can be use
-0004a900: 6420 6d75 6c74 6970 6c65 2074 696d 6573  d multiple times
-0004a910: 2074 6f20 7365 6e64 2022 0a20 2020 2020   to send ".     
-0004a920: 2020 2022 6d75 6c74 6970 6c65 2061 7564     "multiple aud
-0004a930: 696f 2066 696c 6573 2e20 4669 7273 7420  io files. First 
-0004a940: 6175 6469 6f73 2061 7265 2073 656e 742c  audios are sent,
-0004a950: 2022 0a20 2020 2020 2020 2022 7468 656e   ".        "then
-0004a960: 2074 6578 7420 6d65 7373 6167 6573 2061   text messages a
-0004a970: 7265 2073 656e 742e 2022 0a20 2020 2020  re sent. ".     
-0004a980: 2020 2066 2249 6620 796f 7520 7761 6e74     f"If you want
-0004a990: 2074 6f20 6665 6564 2061 6e20 6175 6469   to feed an audi
-0004a9a0: 6f20 696e 746f 207b 5052 4f47 5f57 4954  o into {PROG_WIT
-0004a9b0: 484f 5554 5f45 5854 7d20 220a 2020 2020  HOUT_EXT} ".    
-0004a9c0: 2020 2020 2276 6961 2061 2070 6970 652c      "via a pipe,
-0004a9d0: 2076 6961 2073 7464 696e 2c20 7468 656e   via stdin, then
-0004a9e0: 2073 7065 6369 6679 2074 6865 2073 7065   specify the spe
-0004a9f0: 6369 616c 2022 0a20 2020 2020 2020 2022  cial ".        "
-0004aa00: 6368 6172 6163 7465 7220 272d 272e 2053  character '-'. S
-0004aa10: 6565 2064 6573 6372 6970 7469 6f6e 206f  ee description o
-0004aa20: 6620 272d 6927 2074 6f20 7365 6520 686f  f '-i' to see ho
-0004aa30: 7720 272d 2720 6973 2068 616e 646c 6564  w '-' is handled
-0004aa40: 2e22 2c0a 2020 2020 290a 2020 2020 2320  .",.    ).    # 
-0004aa50: 616c 6c6f 7720 6d75 6c74 6970 6c65 2066  allow multiple f
-0004aa60: 696c 6573 202c 2065 2e67 2e20 2d66 2022  iles , e.g. -f "
-0004aa70: 6131 2e70 6466 2220 2261 322e 646f 6322  a1.pdf" "a2.doc"
-0004aa80: 0a20 2020 2023 206f 7220 2d66 2022 6131  .    # or -f "a1
-0004aa90: 2e70 6466 2220 2d66 2022 6132 2e64 6f63  .pdf" -f "a2.doc
-0004aaa0: 220a 2020 2020 2320 6669 6c65 2069 7320  ".    # file is 
-0004aab0: 676f 696e 6720 746f 2062 6520 6120 6c69  going to be a li
-0004aac0: 7374 206f 6620 7374 7269 6e67 730a 2020  st of strings.  
-0004aad0: 2020 2320 652e 672e 2066 696c 653d 5b20    # e.g. file=[ 
-0004aae0: 2761 312e 7064 6627 2c20 2761 322e 646f  'a1.pdf', 'a2.do
-0004aaf0: 6327 205d 0a20 2020 2061 702e 6164 645f  c' ].    ap.add_
-0004ab00: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-0004ab10: 2020 222d 6622 2c0a 2020 2020 2020 2020    "-f",.        
-0004ab20: 222d 2d66 696c 6522 2c0a 2020 2020 2020  "--file",.      
-0004ab30: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-0004ab40: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
-0004ab50: 3d22 6578 7465 6e64 222c 0a20 2020 2020  ="extend",.     
-0004ab60: 2020 206e 6172 6773 3d22 2b22 2c0a 2020     nargs="+",.  
-0004ab70: 2020 2020 2020 7479 7065 3d73 7472 2c0a        type=str,.
-0004ab80: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
-0004ab90: 2246 494c 4522 2c0a 2020 2020 2020 2020  "FILE",.        
-0004aba0: 6865 6c70 3d22 5365 6e64 206f 6e65 206f  help="Send one o
-0004abb0: 7220 6d75 6c74 6970 6c65 2066 696c 6573  r multiple files
-0004abc0: 2028 652e 672e 2050 4446 2c20 444f 432c   (e.g. PDF, DOC,
-0004abd0: 204d 5034 292e 2022 0a20 2020 2020 2020   MP4). ".       
-0004abe0: 2022 4465 7461 696c 733a 3a20 5468 6973   "Details:: This
-0004abf0: 206f 7074 696f 6e20 6361 6e20 6265 2075   option can be u
-0004ac00: 7365 6420 6d75 6c74 6970 6c65 2074 696d  sed multiple tim
-0004ac10: 6573 2074 6f20 7365 6e64 2022 0a20 2020  es to send ".   
-0004ac20: 2020 2020 2022 6d75 6c74 6970 6c65 2066       "multiple f
-0004ac30: 696c 6573 2e20 4669 7273 7420 6669 6c65  iles. First file
-0004ac40: 7320 6172 6520 7365 6e74 2c20 220a 2020  s are sent, ".  
-0004ac50: 2020 2020 2020 2274 6865 6e20 7465 7874        "then text
-0004ac60: 206d 6573 7361 6765 7320 6172 6520 7365   messages are se
-0004ac70: 6e74 2e20 220a 2020 2020 2020 2020 6622  nt. ".        f"
-0004ac80: 4966 2079 6f75 2077 616e 7420 746f 2066  If you want to f
-0004ac90: 6565 6420 6120 6669 6c65 2069 6e74 6f20  eed a file into 
-0004aca0: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
-0004acb0: 547d 2022 0a20 2020 2020 2020 2022 7669  T} ".        "vi
-0004acc0: 6120 6120 7069 7065 2c20 7669 6120 7374  a a pipe, via st
-0004acd0: 6469 6e2c 2074 6865 6e20 7370 6563 6966  din, then specif
-0004ace0: 7920 7468 6520 7370 6563 6961 6c20 220a  y the special ".
-0004acf0: 2020 2020 2020 2020 2263 6861 7261 6374          "charact
-0004ad00: 6572 2027 2d27 2e20 5365 6520 6465 7363  er '-'. See desc
-0004ad10: 7269 7074 696f 6e20 6f66 2027 2d69 2720  ription of '-i' 
-0004ad20: 746f 2073 6565 2068 6f77 2027 2d27 2069  to see how '-' i
-0004ad30: 7320 6861 6e64 6c65 642e 222c 0a20 2020  s handled.",.   
-0004ad40: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-0004ad50: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-0004ad60: 222d 6522 2c0a 2020 2020 2020 2020 222d  "-e",.        "-
-0004ad70: 2d65 7665 6e74 222c 0a20 2020 2020 2020  -event",.       
-0004ad80: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
-0004ad90: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
-0004ada0: 2265 7874 656e 6422 2c0a 2020 2020 2020  "extend",.      
-0004adb0: 2020 6e61 7267 733d 222b 222c 0a20 2020    nargs="+",.   
-0004adc0: 2020 2020 2074 7970 653d 7374 722c 0a20       type=str,. 
-0004add0: 2020 2020 2020 206d 6574 6176 6172 3d22         metavar="
-0004ade0: 4d41 5452 4958 5f4a 534f 4e5f 4f42 4a45  MATRIX_JSON_OBJE
-0004adf0: 4354 222c 0a20 2020 2020 2020 2068 656c  CT",.        hel
-0004ae00: 703d 2253 656e 6420 6120 4d61 7472 6978  p="Send a Matrix
-0004ae10: 204a 534f 4e20 6576 656e 742e 2022 0a20   JSON event. ". 
-0004ae20: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-0004ae30: 3a20 5365 6e64 2061 6e20 6576 656e 7420  : Send an event 
-0004ae40: 7468 6174 2069 7320 666f 726d 6174 7465  that is formatte
-0004ae50: 6420 6173 2061 204a 534f 4e20 6f62 6a65  d as a JSON obje
-0004ae60: 6374 2061 7320 220a 2020 2020 2020 2020  ct as ".        
-0004ae70: 2273 7065 6369 6669 6564 2062 7920 7468  "specified by th
-0004ae80: 6520 4d61 7472 6978 2070 726f 746f 636f  e Matrix protoco
-0004ae90: 6c2e 2054 6869 7320 616c 6c6f 7773 2074  l. This allows t
-0004aea0: 6865 2061 6476 616e 6365 6420 220a 2020  he advanced ".  
-0004aeb0: 2020 2020 2020 2275 7365 7220 746f 2073        "user to s
-0004aec0: 656e 6420 6164 6469 7469 6f6e 616c 2074  end additional t
-0004aed0: 7970 6573 206f 6620 6576 656e 7473 2073  ypes of events s
-0004aee0: 7563 6820 6173 2072 6561 6374 696f 6e73  uch as reactions
-0004aef0: 2c20 220a 2020 2020 2020 2020 2273 656e  , ".        "sen
-0004af00: 6420 7265 706c 6965 7320 746f 2070 7265  d replies to pre
-0004af10: 7669 6f75 7320 6576 656e 7473 2c20 6f72  vious events, or
-0004af20: 2065 6469 7420 7072 6576 696f 7573 206d   edit previous m
-0004af30: 6573 7361 6765 732e 2022 0a20 2020 2020  essages. ".     
-0004af40: 2020 2022 5370 6563 6966 6963 6174 696f     "Specificatio
-0004af50: 6e73 2066 6f72 2065 7665 6e74 7320 6361  ns for events ca
-0004af60: 6e20 6265 2066 6f75 6e64 2022 0a20 2020  n be found ".   
-0004af70: 2020 2020 2022 6174 2068 7474 7073 3a2f       "at https:/
-0004af80: 2f73 7065 632e 6d61 7472 6978 2e6f 7267  /spec.matrix.org
-0004af90: 2f75 6e73 7461 626c 652f 7072 6f70 6f73  /unstable/propos
-0004afa0: 616c 732f 2e20 220a 2020 2020 2020 2020  als/. ".        
-0004afb0: 2254 6869 7320 6f70 7469 6f6e 2063 616e  "This option can
-0004afc0: 2062 6520 7573 6564 206d 756c 7469 706c   be used multipl
-0004afd0: 6520 7469 6d65 7320 746f 2073 656e 6420  e times to send 
-0004afe0: 220a 2020 2020 2020 2020 226d 756c 7469  ".        "multi
-0004aff0: 706c 6520 6576 656e 7473 2e20 4669 7273  ple events. Firs
-0004b000: 7420 6576 656e 7473 2061 7265 2073 656e  t events are sen
-0004b010: 742c 2022 0a20 2020 2020 2020 2022 7468  t, ".        "th
-0004b020: 656e 2074 6578 7420 6d65 7373 6167 6573  en text messages
-0004b030: 2061 7265 2073 656e 742e 2022 0a20 2020   are sent. ".   
-0004b040: 2020 2020 2066 2249 6620 796f 7520 7761       f"If you wa
-0004b050: 6e74 2074 6f20 6665 6564 2061 6e20 6576  nt to feed an ev
-0004b060: 656e 7420 696e 746f 207b 5052 4f47 5f57  ent into {PROG_W
-0004b070: 4954 484f 5554 5f45 5854 7d20 220a 2020  ITHOUT_EXT} ".  
-0004b080: 2020 2020 2020 2276 6961 2061 2070 6970        "via a pip
-0004b090: 652c 2076 6961 2073 7464 696e 2c20 7468  e, via stdin, th
-0004b0a0: 656e 2073 7065 6369 6679 2074 6865 2073  en specify the s
-0004b0b0: 7065 6369 616c 2022 0a20 2020 2020 2020  pecial ".       
-0004b0c0: 2022 6368 6172 6163 7465 7220 272d 272e   "character '-'.
-0004b0d0: 2053 6565 2064 6573 6372 6970 7469 6f6e   See description
-0004b0e0: 206f 6620 272d 6927 2074 6f20 7365 6520   of '-i' to see 
-0004b0f0: 686f 7720 272d 2720 6973 2068 616e 646c  how '-' is handl
-0004b100: 6564 2e20 220a 2020 2020 2020 2020 2253  ed. ".        "S
-0004b110: 6565 2074 6573 7473 2f74 6573 742d 6576  ee tests/test-ev
-0004b120: 656e 742e 7368 2066 6f72 2065 7861 6d70  ent.sh for examp
-0004b130: 6c65 732e 222c 0a20 2020 2029 0a20 2020  les.",.    ).   
-0004b140: 2023 202d 6820 616c 7265 6164 7920 7573   # -h already us
-0004b150: 6564 2066 6f72 202d 2d68 656c 702c 202d  ed for --help, -
-0004b160: 7720 666f 7220 2277 6562 220a 2020 2020  w for "web".    
-0004b170: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-0004b180: 0a20 2020 2020 2020 2022 2d77 222c 0a20  .        "-w",. 
-0004b190: 2020 2020 2020 2022 2d2d 6874 6d6c 222c         "--html",
-0004b1a0: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-0004b1b0: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
-0004b1c0: 2061 6374 696f 6e3d 2273 746f 7265 5f74   action="store_t
-0004b1d0: 7275 6522 2c0a 2020 2020 2020 2020 6865  rue",.        he
-0004b1e0: 6c70 3d27 5365 6e64 206d 6573 7361 6765  lp='Send message
-0004b1f0: 2061 7320 666f 726d 6174 2022 4854 4d4c   as format "HTML
-0004b200: 222e 2027 0a20 2020 2020 2020 2022 4465  ". '.        "De
-0004b210: 7461 696c 733a 3a20 4966 206e 6f74 2073  tails:: If not s
-0004b220: 7065 6369 6669 6564 2c20 6d65 7373 6167  pecified, messag
-0004b230: 6520 7769 6c6c 2062 6520 7365 6e74 2022  e will be sent "
-0004b240: 0a20 2020 2020 2020 2027 6173 2066 6f72  .        'as for
-0004b250: 6d61 7420 2254 4558 5422 2e20 452e 672e  mat "TEXT". E.g.
-0004b260: 2074 6861 7420 616c 6c6f 7773 2073 6f6d   that allows som
-0004b270: 6520 7465 7874 2027 0a20 2020 2020 2020  e text '.       
-0004b280: 2022 746f 2062 6520 626f 6c64 2c20 6574   "to be bold, et
-0004b290: 632e 204f 6e6c 7920 6120 7375 6273 6574  c. Only a subset
-0004b2a0: 206f 6620 4854 4d4c 2074 6167 7320 6172   of HTML tags ar
-0004b2b0: 6520 220a 2020 2020 2020 2020 2261 6363  e ".        "acc
-0004b2c0: 6570 7465 6420 6279 204d 6174 7269 782e  epted by Matrix.
-0004b2d0: 222c 0a20 2020 2029 0a20 2020 2023 202d  ",.    ).    # -
-0004b2e0: 6d20 616c 7265 6164 7920 7573 6564 2066  m already used f
-0004b2f0: 6f72 202d 2d6d 6573 7361 6765 2c20 2d7a  or --message, -z
-0004b300: 2062 6563 6175 7365 2074 6865 7265 2077   because there w
-0004b310: 6572 6520 6e6f 206c 6574 7465 7273 206c  ere no letters l
-0004b320: 6566 740a 2020 2020 6170 2e61 6464 5f61  eft.    ap.add_a
-0004b330: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-0004b340: 2022 2d7a 222c 0a20 2020 2020 2020 2022   "-z",.        "
-0004b350: 2d2d 6d61 726b 646f 776e 222c 0a20 2020  --markdown",.   
-0004b360: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-0004b370: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
-0004b380: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
-0004b390: 2c0a 2020 2020 2020 2020 6865 6c70 3d27  ,.        help='
-0004b3a0: 5365 6e64 206d 6573 7361 6765 2061 7320  Send message as 
-0004b3b0: 666f 726d 6174 2022 4d41 524b 444f 574e  format "MARKDOWN
-0004b3c0: 222e 2027 0a20 2020 2020 2020 2022 4465  ". '.        "De
-0004b3d0: 7461 696c 733a 3a20 4966 206e 6f74 2073  tails:: If not s
-0004b3e0: 7065 6369 6669 6564 2c20 6d65 7373 6167  pecified, messag
-0004b3f0: 6520 7769 6c6c 2062 6520 7365 6e74 2022  e will be sent "
-0004b400: 0a20 2020 2020 2020 2027 6173 2066 6f72  .        'as for
-0004b410: 6d61 7420 2254 4558 5422 2e20 452e 672e  mat "TEXT". E.g.
-0004b420: 2074 6861 7420 616c 6c6f 7773 2073 656e   that allows sen
-0004b430: 6469 6e67 206f 6620 7465 7874 2027 0a20  ding of text '. 
-0004b440: 2020 2020 2020 2022 666f 726d 6174 7465         "formatte
-0004b450: 6420 696e 204d 6172 6b44 6f77 6e20 6c61  d in MarkDown la
-0004b460: 6e67 7561 6765 2e22 2c0a 2020 2020 290a  nguage.",.    ).
-0004b470: 2020 2020 2320 202d 6320 6973 2061 6c72      #  -c is alr
-0004b480: 6561 6479 2075 7365 6420 666f 7220 2d2d  eady used for --
-0004b490: 6372 6564 656e 7469 616c 732c 202d 6b20  credentials, -k 
-0004b4a0: 6173 2069 7420 736f 756e 6473 206c 696b  as it sounds lik
-0004b4b0: 6520 630a 2020 2020 6170 2e61 6464 5f61  e c.    ap.add_a
-0004b4c0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-0004b4d0: 2022 2d6b 222c 0a20 2020 2020 2020 2022   "-k",.        "
-0004b4e0: 2d2d 636f 6465 222c 0a20 2020 2020 2020  --code",.       
-0004b4f0: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
-0004b500: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
-0004b510: 2273 746f 7265 5f74 7275 6522 2c0a 2020  "store_true",.  
-0004b520: 2020 2020 2020 6865 6c70 3d27 5365 6e64        help='Send
-0004b530: 206d 6573 7361 6765 2061 7320 666f 726d   message as form
-0004b540: 6174 2022 434f 4445 222e 2027 0a20 2020  at "CODE". '.   
-0004b550: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-0004b560: 4966 206e 6f74 2073 7065 6369 6669 6564  If not specified
-0004b570: 2c20 6d65 7373 6167 6520 7769 6c6c 2062  , message will b
-0004b580: 6520 7365 6e74 2022 0a20 2020 2020 2020  e sent ".       
-0004b590: 2027 6173 2066 6f72 6d61 7420 2254 4558   'as format "TEX
-0004b5a0: 5422 2e20 4966 2062 6f74 6820 2d2d 6874  T". If both --ht
-0004b5b0: 6d6c 2061 6e64 202d 2d63 6f64 6520 6172  ml and --code ar
-0004b5c0: 6520 270a 2020 2020 2020 2020 2273 7065  e '.        "spe
-0004b5d0: 6369 6669 6564 2074 6865 6e20 2d2d 636f  cified then --co
-0004b5e0: 6465 2074 616b 6573 2070 7269 6f72 6974  de takes priorit
-0004b5f0: 792e 2054 6869 7320 6973 2022 0a20 2020  y. This is ".   
-0004b600: 2020 2020 2022 7573 6566 756c 2066 6f72       "useful for
-0004b610: 2073 656e 6469 6e67 2041 5343 4949 2d61   sending ASCII-a
-0004b620: 7274 206f 7220 7461 6262 6564 206f 7574  rt or tabbed out
-0004b630: 7075 7420 220a 2020 2020 2020 2020 226c  put ".        "l
-0004b640: 696b 6520 7461 626c 6573 2061 7320 6120  ike tables as a 
-0004b650: 6669 7865 642d 7369 7a65 6420 666f 6e74  fixed-sized font
-0004b660: 2077 696c 6c20 6265 2075 7365 6420 220a   will be used ".
-0004b670: 2020 2020 2020 2020 2266 6f72 2064 6973          "for dis
-0004b680: 706c 6179 2e22 2c0a 2020 2020 290a 2020  play.",.    ).  
-0004b690: 2020 2320 202d 6a20 666f 7220 656d 6f4a    #  -j for emoJ
-0004b6a0: 697a 650a 2020 2020 6170 2e61 6464 5f61  ize.    ap.add_a
-0004b6b0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-0004b6c0: 2022 2d6a 222c 0a20 2020 2020 2020 2022   "-j",.        "
-0004b6d0: 2d2d 656d 6f6a 697a 6522 2c0a 2020 2020  --emojize",.    
-0004b6e0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-0004b6f0: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
-0004b700: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
-0004b710: 0a20 2020 2020 2020 2068 656c 703d 2253  .        help="S
-0004b720: 656e 6420 6d65 7373 6167 6520 6166 7465  end message afte
-0004b730: 7220 656d 6f6a 697a 696e 672e 2022 0a20  r emojizing. ". 
-0004b740: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-0004b750: 3a20 4966 206e 6f74 2073 7065 6369 6669  : If not specifi
-0004b760: 6564 2c20 6d65 7373 6167 6520 7769 6c6c  ed, message will
-0004b770: 2062 6520 7365 6e74 2022 0a20 2020 2020   be sent ".     
-0004b780: 2020 2027 6173 2066 6f72 6d61 7420 2254     'as format "T
-0004b790: 4558 5422 2e20 4966 2062 6f74 6820 2d2d  EXT". If both --
-0004b7a0: 636f 6465 2061 6e64 202d 2d65 6d6f 6a69  code and --emoji
-0004b7b0: 7a65 2061 7265 2027 0a20 2020 2020 2020  ze are '.       
-0004b7c0: 2022 7370 6563 6966 6965 6420 7468 656e   "specified then
-0004b7d0: 202d 2d63 6f64 6520 7461 6b65 7320 7072   --code takes pr
-0004b7e0: 696f 7269 7479 2e20 5468 6973 2069 7320  iority. This is 
-0004b7f0: 220a 2020 2020 2020 2020 2275 7365 6675  ".        "usefu
-0004b800: 6c20 666f 7220 7365 6e64 696e 6720 656d  l for sending em
-0004b810: 6f6a 6973 2069 6e20 7368 6f72 7463 6f64  ojis in shortcod
-0004b820: 6520 666f 726d 203a 636f 6c6c 6973 696f  e form :collisio
-0004b830: 6e3a 2e22 2c0a 2020 2020 290a 0a20 2020  n:.",.    )..   
-0004b840: 2023 202d 7320 6973 2061 6c72 6561 6479   # -s is already
-0004b850: 2075 7365 6420 666f 7220 2d2d 7374 6f72   used for --stor
-0004b860: 652c 202d 6920 666f 7220 7350 6c69 740a  e, -i for sPlit.
-0004b870: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
-0004b880: 656e 7428 0a20 2020 2020 2020 2022 2d70  ent(.        "-p
-0004b890: 222c 0a20 2020 2020 2020 2022 2d2d 7370  ",.        "--sp
-0004b8a0: 6c69 7422 2c0a 2020 2020 2020 2020 7265  lit",.        re
-0004b8b0: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
-0004b8c0: 2020 2020 2020 7479 7065 3d73 7472 2c0a        type=str,.
-0004b8d0: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
-0004b8e0: 2253 4550 4152 4154 4f52 222c 0a20 2020  "SEPARATOR",.   
-0004b8f0: 2020 2020 2068 656c 703d 2253 706c 6974       help="Split
-0004b900: 206d 6573 7361 6765 2074 6578 7420 696e   message text in
-0004b910: 746f 206d 756c 7469 706c 6520 4d61 7472  to multiple Matr
-0004b920: 6978 206d 6573 7361 6765 732e 2022 0a20  ix messages. ". 
-0004b930: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-0004b940: 3a20 4966 2073 6574 2c20 7370 6c69 7420  : If set, split 
-0004b950: 7468 6520 6d65 7373 6167 6528 7329 2069  the message(s) i
-0004b960: 6e74 6f20 6d75 6c74 6970 6c65 206d 6573  nto multiple mes
-0004b970: 7361 6765 7320 220a 2020 2020 2020 2020  sages ".        
-0004b980: 2277 6865 7265 7665 7220 7468 6520 7374  "wherever the st
-0004b990: 7269 6e67 2073 7065 6369 6669 6564 2077  ring specified w
-0004b9a0: 6974 6820 2d2d 7370 6c69 7420 6f63 6375  ith --split occu
-0004b9b0: 7273 2e20 220a 2020 2020 2020 2020 2245  rs. ".        "E
-0004b9c0: 2e67 2e20 4f6e 6520 7069 7065 7320 6120  .g. One pipes a 
-0004b9d0: 7374 7265 616d 206f 6620 5253 5320 6172  stream of RSS ar
-0004b9e0: 7469 636c 6573 2069 6e74 6f20 7468 6520  ticles into the 
-0004b9f0: 220a 2020 2020 2020 2020 2270 726f 6772  ".        "progr
-0004ba00: 616d 2061 6e64 2074 6865 2061 7274 6963  am and the artic
-0004ba10: 6c65 7320 6172 6520 7365 7061 7261 7465  les are separate
-0004ba20: 6420 6279 2074 6872 6565 2022 0a20 2020  d by three ".   
-0004ba30: 2020 2020 2022 6e65 776c 696e 6573 2e20       "newlines. 
-0004ba40: 220a 2020 2020 2020 2020 2754 6865 6e20  ".        'Then 
-0004ba50: 7769 7468 202d 2d73 706c 6974 2073 6574  with --split set
-0004ba60: 2074 6f20 225c 5c6e 5c5c 6e5c 5c6e 2220   to "\\n\\n\\n" 
-0004ba70: 6561 6368 2061 7274 6963 6c65 2027 0a20  each article '. 
-0004ba80: 2020 2020 2020 2022 7769 6c6c 2062 6520         "will be 
-0004ba90: 7072 696e 7465 6420 696e 2061 2073 6570  printed in a sep
-0004baa0: 6172 6174 6520 6d65 7373 6167 652e 2022  arate message. "
-0004bab0: 0a20 2020 2020 2020 2022 4279 2064 6566  .        "By def
-0004bac0: 6175 6c74 2c20 692e 652e 2069 6620 6e6f  ault, i.e. if no
-0004bad0: 7420 7365 742c 206e 6f20 6d65 7373 6167  t set, no messag
-0004bae0: 6573 2077 696c 6c20 6265 2073 706c 6974  es will be split
-0004baf0: 2e22 2c0a 2020 2020 290a 2020 2020 2320  .",.    ).    # 
-0004bb00: 2d63 2069 7320 616c 7265 6164 7920 7573  -c is already us
-0004bb10: 6564 2066 6f72 202d 2d63 7265 6465 6e74  ed for --credent
-0004bb20: 6961 6c73 0a20 2020 2061 702e 6164 645f  ials.    ap.add_
-0004bb30: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-0004bb40: 2020 222d 2d63 6f6e 6669 6722 2c0a 2020    "--config",.  
-0004bb50: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-0004bb60: 616c 7365 2c0a 2020 2020 2020 2020 7479  alse,.        ty
-0004bb70: 7065 3d73 7472 2c0a 2020 2020 2020 2020  pe=str,.        
-0004bb80: 6d65 7461 7661 723d 2243 4f4e 4649 475f  metavar="CONFIG_
-0004bb90: 4649 4c45 222c 0a20 2020 2020 2020 2068  FILE",.        h
-0004bba0: 656c 703d 2253 7065 6369 6679 2074 6865  elp="Specify the
-0004bbb0: 206c 6f63 6174 696f 6e20 6f66 2061 2063   location of a c
-0004bbc0: 6f6e 6669 6720 6669 6c65 2e20 220a 2020  onfig file. ".  
-0004bbd0: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
-0004bbe0: 2042 7920 6465 6661 756c 742c 206e 6f20   By default, no 
-0004bbf0: 220a 2020 2020 2020 2020 2263 6f6e 6669  ".        "confi
-0004bc00: 6720 6669 6c65 2069 7320 7573 6564 2e20  g file is used. 
-0004bc10: 220a 2020 2020 2020 2020 2249 6620 7468  ".        "If th
-0004bc20: 6973 206f 7074 696f 6e20 6973 2070 726f  is option is pro
-0004bc30: 7669 6465 642c 2074 6865 2070 726f 7669  vided, the provi
-0004bc40: 6465 6420 6669 6c65 206e 616d 6520 220a  ded file name ".
-0004bc50: 2020 2020 2020 2020 2277 696c 6c20 6265          "will be
-0004bc60: 2075 7365 6420 746f 2072 6561 6420 636f   used to read co
-0004bc70: 6e66 6967 7572 6174 696f 6e20 6672 6f6d  nfiguration from
-0004bc80: 2e20 4e6f 7420 696d 706c 656d 656e 7465  . Not implemente
-0004bc90: 642e 222c 0a20 2020 2029 0a20 2020 2023  d.",.    ).    #
-0004bca0: 202d 7020 6973 2061 6c72 6561 6479 2075   -p is already u
-0004bcb0: 7365 6420 666f 7220 2d2d 7370 6c69 740a  sed for --split.
-0004bcc0: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
-0004bcd0: 656e 7428 0a20 2020 2020 2020 2022 2d2d  ent(.        "--
-0004bce0: 7072 6f78 7922 2c0a 2020 2020 2020 2020  proxy",.        
-0004bcf0: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
-0004bd00: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
-0004bd10: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
-0004bd20: 723d 2250 524f 5859 222c 0a20 2020 2020  r="PROXY",.     
-0004bd30: 2020 2068 656c 703d 2253 7065 6369 6679     help="Specify
-0004bd40: 2061 2070 726f 7879 2066 6f72 2063 6f6e   a proxy for con
-0004bd50: 6e65 6374 6976 6974 792e 2022 0a20 2020  nectivity. ".   
-0004bd60: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-0004bd70: 4279 2064 6566 6175 6c74 2c20 220a 2020  By default, ".  
-0004bd80: 2020 2020 2020 2269 2e65 2e20 6966 2074        "i.e. if t
-0004bd90: 6869 7320 6f70 7469 6f6e 2069 7320 6e6f  his option is no
-0004bda0: 7420 7365 742c 206e 6f20 7072 6f78 7920  t set, no proxy 
-0004bdb0: 6973 2075 7365 642e 2022 0a20 2020 2020  is used. ".     
-0004bdc0: 2020 2022 4966 2074 6869 7320 6f70 7469     "If this opti
-0004bdd0: 6f6e 2069 7320 7573 6564 2061 2070 726f  on is used a pro
-0004bde0: 7879 2055 524c 206d 7573 7420 6265 2070  xy URL must be p
-0004bdf0: 726f 7669 6465 642e 2022 0a20 2020 2020  rovided. ".     
-0004be00: 2020 2022 5468 6520 7072 6f76 6964 6564     "The provided
-0004be10: 2070 726f 7879 2055 524c 2022 0a20 2020   proxy URL ".   
-0004be20: 2020 2020 2022 7769 6c6c 2062 6520 7573       "will be us
-0004be30: 6564 2066 6f72 2074 6865 2048 5454 5020  ed for the HTTP 
-0004be40: 636f 6e6e 6563 7469 6f6e 2074 6f20 7468  connection to th
-0004be50: 6520 7365 7276 6572 2e20 220a 2020 2020  e server. ".    
-0004be60: 2020 2020 2254 6865 2070 726f 7879 2073      "The proxy s
-0004be70: 7570 706f 7274 7320 534f 434b 5334 2861  upports SOCKS4(a
-0004be80: 292c 2053 4f43 4b53 352c 2061 6e64 2048  ), SOCKS5, and H
-0004be90: 5454 5020 2874 756e 6e65 6c69 6e67 292e  TTP (tunneling).
-0004bea0: 2022 0a20 2020 2020 2020 2027 4578 616d   ".        'Exam
-0004beb0: 706c 6573 206f 6620 7661 6c69 6420 5552  ples of valid UR
-0004bec0: 4c73 2061 7265 2022 6874 7470 3a2f 2f31  Ls are "http://1
-0004bed0: 302e 3130 2e31 302e 3130 3a38 3131 3822  0.10.10.10:8118"
-0004bee0: 2027 0a20 2020 2020 2020 2027 6f72 2022   '.        'or "
-0004bef0: 736f 636b 7335 3a2f 2f75 7365 723a 7061  socks5://user:pa
-0004bf00: 7373 776f 7264 4031 3237 2e30 2e30 2e31  ssword@127.0.0.1
-0004bf10: 3a31 3038 3022 2e20 270a 2020 2020 2020  :1080". '.      
-0004bf20: 2020 2755 524c 7320 7769 7468 2022 6874    'URLs with "ht
-0004bf30: 7470 7322 206f 7220 2273 6f63 6b73 3461  tps" or "socks4a
-0004bf40: 2220 6172 6520 6e6f 7420 7661 6c69 642e  " are not valid.
-0004bf50: 204f 6e6c 7920 270a 2020 2020 2020 2020   Only '.        
-0004bf60: 2722 6874 7470 222c 2022 736f 636b 7334  '"http", "socks4
-0004bf70: 2220 616e 6420 2273 6f63 6b73 3522 2061  " and "socks5" a
-0004bf80: 7265 2076 616c 6964 2e27 2c0a 2020 2020  re valid.',.    
-0004bf90: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
-0004bfa0: 756d 656e 7428 0a20 2020 2020 2020 2022  ument(.        "
-0004bfb0: 2d6e 222c 0a20 2020 2020 2020 2022 2d2d  -n",.        "--
-0004bfc0: 6e6f 7469 6365 222c 0a20 2020 2020 2020  notice",.       
-0004bfd0: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
-0004bfe0: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
-0004bff0: 2273 746f 7265 5f74 7275 6522 2c0a 2020  "store_true",.  
-0004c000: 2020 2020 2020 6865 6c70 3d22 5365 6e64        help="Send
-0004c010: 206d 6573 7361 6765 2061 7320 6e6f 7469   message as noti
-0004c020: 6365 2e20 220a 2020 2020 2020 2020 2244  ce. ".        "D
-0004c030: 6574 6169 6c73 3a3a 2049 6620 6e6f 7420  etails:: If not 
-0004c040: 7370 6563 6966 6965 642c 206d 6573 7361  specified, messa
-0004c050: 6765 2077 696c 6c20 6265 2073 656e 7420  ge will be sent 
-0004c060: 6173 2074 6578 742e 222c 0a20 2020 2029  as text.",.    )
-0004c070: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
-0004c080: 6d65 6e74 280a 2020 2020 2020 2020 2320  ment(.        # 
-0004c090: 6e6f 2073 696e 676c 6520 6368 6172 2066  no single char f
-0004c0a0: 6c61 670a 2020 2020 2020 2020 222d 2d65  lag.        "--e
-0004c0b0: 6e63 7279 7074 6564 222c 0a20 2020 2020  ncrypted",.     
-0004c0c0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-0004c0d0: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
-0004c0e0: 6e3d 2273 746f 7265 5f74 7275 6522 2c0a  n="store_true",.
-0004c0f0: 2020 2020 2020 2020 6865 6c70 3d22 5365          help="Se
-0004c100: 6e64 206d 6573 7361 6765 2065 6e64 2d74  nd message end-t
-0004c110: 6f2d 656e 6420 656e 6372 7970 7465 642e  o-end encrypted.
-0004c120: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
-0004c130: 696c 733a 3a20 456e 6372 7970 7469 6f6e  ils:: Encryption
-0004c140: 2069 7320 616c 7761 7973 2074 7572 6e65   is always turne
-0004c150: 6420 6f6e 2061 6e64 2022 0a20 2020 2020  d on and ".     
-0004c160: 2020 2022 7769 6c6c 2061 6c77 6179 7320     "will always 
-0004c170: 6265 2075 7365 6420 7768 6572 6520 706f  be used where po
-0004c180: 7373 6962 6c65 2e20 220a 2020 2020 2020  ssible. ".      
-0004c190: 2020 2249 7420 6361 6e6e 6f74 2062 6520    "It cannot be 
-0004c1a0: 7475 726e 6564 206f 6666 2e20 5468 6973  turned off. This
-0004c1b0: 2066 6c61 6720 646f 6573 206e 6f74 6869   flag does nothi
-0004c1c0: 6e67 2022 0a20 2020 2020 2020 2022 6173  ng ".        "as
-0004c1d0: 2065 6e63 7279 7074 696f 6e20 6973 2074   encryption is t
-0004c1e0: 7572 6e65 6420 6f6e 2077 6974 6820 6f72  urned on with or
-0004c1f0: 2077 6974 686f 7574 2074 6869 7320 220a   without this ".
-0004c200: 2020 2020 2020 2020 2261 7267 756d 656e          "argumen
-0004c210: 742e 2054 6869 7320 666c 6167 2065 7869  t. This flag exi
-0004c220: 7374 7320 6f6e 6c79 2066 6f72 2068 6973  sts only for his
-0004c230: 746f 7269 6320 7265 6173 6f6e 732e 2022  toric reasons. "
-0004c240: 0a20 2020 2020 2020 2022 496e 2073 6f6d  .        "In som
-0004c250: 6520 7370 6563 6966 6963 2063 6173 6520  e specific case 
-0004c260: 656e 6372 7970 7469 6f6e 2022 0a20 2020  encryption ".   
-0004c270: 2020 2020 2022 6361 6e20 6265 2064 6973       "can be dis
-0004c280: 6162 6c65 642c 2070 6c65 6173 6520 7365  abled, please se
-0004c290: 6520 2d2d 706c 6169 6e2e 222c 0a20 2020  e --plain.",.   
-0004c2a0: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-0004c2b0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-0004c2c0: 222d 6c22 2c0a 2020 2020 2020 2020 222d  "-l",.        "-
-0004c2d0: 2d6c 6973 7465 6e22 2c0a 2020 2020 2020  -listen",.      
-0004c2e0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-0004c2f0: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-0004c300: 7472 2c0a 2020 2020 2020 2020 6465 6661  tr,.        defa
-0004c310: 756c 743d 4c49 5354 454e 5f44 4546 4155  ult=LISTEN_DEFAU
-0004c320: 4c54 2c20 2023 2077 6865 6e20 2d6c 2069  LT,  # when -l i
-0004c330: 7320 6e6f 7420 7573 6564 0a20 2020 2020  s not used.     
-0004c340: 2020 206e 6172 6773 3d22 3f22 2c20 2023     nargs="?",  #
-0004c350: 206d 616b 6573 2074 6865 2077 6f72 6420   makes the word 
-0004c360: 6f70 7469 6f6e 616c 0a20 2020 2020 2020  optional.       
-0004c370: 2063 6f6e 7374 3d46 4f52 4556 4552 2c20   const=FOREVER, 
-0004c380: 2023 2077 6865 6e20 2d6c 2069 7320 7573   # when -l is us
-0004c390: 6564 2c20 6275 7420 464f 5245 5645 5220  ed, but FOREVER 
-0004c3a0: 6973 206e 6f74 2061 6464 6564 0a20 2020  is not added.   
-0004c3b0: 2020 2020 206d 6574 6176 6172 3d22 4e45       metavar="NE
-0004c3c0: 5645 527c 4f4e 4345 7c46 4f52 4556 4552  VER|ONCE|FOREVER
-0004c3d0: 7c54 4149 4c7c 414c 4c22 2c0a 2020 2020  |TAIL|ALL",.    
-0004c3e0: 2020 2020 6865 6c70 3d22 5072 696e 7420      help="Print 
-0004c3f0: 7265 6365 6976 6564 206d 6573 7361 6765  received message
-0004c400: 7320 616e 6420 6c69 7374 656e 2074 6f20  s and listen to 
-0004c410: 6d65 7373 6167 6573 2e20 220a 2020 2020  messages. ".    
-0004c420: 2020 2020 2244 6574 6169 6c73 3a3a 2054      "Details:: T
-0004c430: 6865 202d 2d6c 6973 7465 6e20 6f70 7469  he --listen opti
-0004c440: 6f6e 2074 616b 6573 206f 6e65 2061 7267  on takes one arg
-0004c450: 756d 656e 742e 2054 6865 7265 2022 0a20  ument. There ". 
-0004c460: 2020 2020 2020 2066 2761 7265 2073 6576         f'are sev
-0004c470: 6572 616c 2063 686f 6963 6573 3a20 227b  eral choices: "{
-0004c480: 4e45 5645 527d 222c 2022 7b4f 4e43 457d  NEVER}", "{ONCE}
-0004c490: 222c 2027 0a20 2020 2020 2020 2066 2722  ", '.        f'"
-0004c4a0: 7b46 4f52 4556 4552 7d22 2c20 227b 5441  {FOREVER}", "{TA
-0004c4b0: 494c 7d22 2c20 616e 6420 227b 414c 4c7d  IL}", and "{ALL}
-0004c4c0: 222e 2027 0a20 2020 2020 2020 2066 2742  ". '.        f'B
-0004c4d0: 7920 6465 6661 756c 742c 202d 2d6c 6973  y default, --lis
-0004c4e0: 7465 6e20 6973 2073 6574 2074 6f20 227b  ten is set to "{
-0004c4f0: 4e45 5645 527d 222e 2020 536f 2c20 6279  NEVER}".  So, by
-0004c500: 2027 0a20 2020 2020 2020 2022 6465 6661   '.        "defa
-0004c510: 756c 7420 6e6f 206c 6973 7465 6e69 6e67  ult no listening
-0004c520: 2077 696c 6c20 6265 2064 6f6e 652e 2053   will be done. S
-0004c530: 6574 2069 7420 746f 2022 0a20 2020 2020  et it to ".     
-0004c540: 2020 2066 2722 7b46 4f52 4556 4552 7d22     f'"{FOREVER}"
-0004c550: 2074 6f20 6c69 7374 656e 2066 6f72 2061   to listen for a
-0004c560: 6e64 2070 7269 6e74 2069 6e63 6f6d 696e  nd print incomin
-0004c570: 6720 6d65 7373 6167 6573 2027 0a20 2020  g messages '.   
-0004c580: 2020 2020 2022 746f 2073 7464 6f75 742e       "to stdout.
-0004c590: 2022 0a20 2020 2020 2020 2066 2722 2d2d   ".        f'"--
-0004c5a0: 6c69 7374 656e 207b 464f 5245 5645 527d  listen {FOREVER}
-0004c5b0: 2220 7769 6c6c 206c 6973 7465 6e20 746f  " will listen to
-0004c5c0: 2061 6c6c 206d 6573 7361 6765 7320 6f6e   all messages on
-0004c5d0: 2027 0a20 2020 2020 2020 2022 616c 6c20   '.        "all 
-0004c5e0: 726f 6f6d 7320 666f 7265 7665 722e 2022  rooms forever. "
-0004c5f0: 0a20 2020 2020 2020 2066 2754 6f20 7374  .        f'To st
-0004c600: 6f70 206c 6973 7465 6e69 6e67 2022 7b46  op listening "{F
-0004c610: 4f52 4556 4552 7d22 2c20 7573 6520 436f  OREVER}", use Co
-0004c620: 6e74 726f 6c2d 4320 6f6e 2027 0a20 2020  ntrol-C on '.   
-0004c630: 2020 2020 2022 7468 6520 6b65 7962 6f61       "the keyboa
-0004c640: 7264 206f 7220 7365 6e64 2061 2073 6967  rd or send a sig
-0004c650: 6e61 6c20 746f 2074 6865 2070 726f 6365  nal to the proce
-0004c660: 7373 206f 7220 7365 7276 6963 652e 2022  ss or service. "
-0004c670: 0a20 2020 2020 2020 2022 5468 6520 5049  .        "The PI
-0004c680: 4420 666f 7220 7369 676e 616c 696e 6720  D for signaling 
-0004c690: 6361 6e20 6265 2066 6f75 6e64 2069 6e20  can be found in 
-0004c6a0: 6120 5049 4420 6669 6c65 2069 6e20 220a  a PID file in ".
-0004c6b0: 2020 2020 2020 2020 6627 6469 7265 6374          f'direct
-0004c6c0: 6f72 7920 227b 5049 445f 4449 525f 4445  ory "{PID_DIR_DE
-0004c6d0: 4641 554c 547d 222e 2027 0a20 2020 2020  FAULT}". '.     
-0004c6e0: 2020 2066 2722 2d2d 6c69 7374 656e 207b     f'"--listen {
-0004c6f0: 4f4e 4345 7d22 2077 696c 6c20 6765 7420  ONCE}" will get 
-0004c700: 616c 6c20 7468 6520 6d65 7373 6167 6573  all the messages
-0004c710: 2066 726f 6d20 270a 2020 2020 2020 2020   from '.        
-0004c720: 2261 6c6c 2072 6f6f 6d73 2074 6861 7420  "all rooms that 
-0004c730: 6172 6520 6375 7272 656e 746c 7920 7175  are currently qu
-0004c740: 6575 6564 2075 702e 2053 6f2c 2077 6974  eued up. So, wit
-0004c750: 6820 220a 2020 2020 2020 2020 6627 227b  h ".        f'"{
-0004c760: 4f4e 4345 7d22 2074 6865 2070 726f 6772  ONCE}" the progr
-0004c770: 616d 2077 696c 6c20 7374 6172 742c 2070  am will start, p
-0004c780: 7269 6e74 2077 6169 7469 6e67 2027 0a20  rint waiting '. 
-0004c790: 2020 2020 2020 2022 6d65 7373 6167 6573         "messages
-0004c7a0: 2028 6966 2061 6e79 2920 616e 6420 7468   (if any) and th
-0004c7b0: 656e 2073 746f 702e 2054 6865 2074 696d  en stop. The tim
-0004c7c0: 656f 7574 2066 6f72 2022 0a20 2020 2020  eout for ".     
-0004c7d0: 2020 2066 2722 7b4f 4e43 457d 2220 6973     f'"{ONCE}" is
-0004c7e0: 2073 6574 2074 6f20 3130 2073 6563 6f6e   set to 10 secon
-0004c7f0: 6473 2e20 536f 2c20 6265 2070 6174 6965  ds. So, be patie
-0004c800: 6e74 2c20 6974 2027 0a20 2020 2020 2020  nt, it '.       
-0004c810: 2022 6d69 6768 7420 7461 6b65 2075 7020   "might take up 
-0004c820: 746f 2074 6861 7420 616d 6f75 6e74 206f  to that amount o
-0004c830: 6620 7469 6d65 2e20 220a 2020 2020 2020  f time. ".      
-0004c840: 2020 6627 227b 5441 494c 7d22 2072 6561    f'"{TAIL}" rea
-0004c850: 6473 2061 6e64 2070 7269 6e74 7320 7468  ds and prints th
-0004c860: 6520 6c61 7374 204e 2027 0a20 2020 2020  e last N '.     
-0004c870: 2020 2022 6d65 7373 6167 6573 2066 726f     "messages fro
-0004c880: 6d20 7468 6520 7370 6563 6966 6965 6420  m the specified 
-0004c890: 726f 6f6d 732c 2074 6865 6e20 7175 6974  rooms, then quit
-0004c8a0: 732e 2054 6865 2022 0a20 2020 2020 2020  s. The ".       
-0004c8b0: 2022 6e75 6d62 6572 204e 2063 616e 2062   "number N can b
-0004c8c0: 6520 7365 7420 7769 7468 2074 6865 202d  e set with the -
-0004c8d0: 2d74 6169 6c20 6f70 7469 6f6e 2e20 5769  -tail option. Wi
-0004c8e0: 7468 2022 0a20 2020 2020 2020 2066 2722  th ".        f'"
-0004c8f0: 7b54 4149 4c7d 2220 736f 6d65 206d 6573  {TAIL}" some mes
-0004c900: 7361 6765 7320 7265 6164 206d 6967 6874  sages read might
-0004c910: 2062 6520 6f6c 642c 2027 0a20 2020 2020   be old, '.     
-0004c920: 2020 2022 692e 652e 2061 6c72 6561 6479     "i.e. already
-0004c930: 2072 6561 6420 6265 666f 7265 2c20 736f   read before, so
-0004c940: 6d65 206d 6967 6874 2062 6520 6e65 772c  me might be new,
-0004c950: 2022 0a20 2020 2020 2020 2022 692e 652e   ".        "i.e.
-0004c960: 206e 6576 6572 2072 6561 6420 6265 666f   never read befo
-0004c970: 7265 2e20 4974 2070 7269 6e74 7320 7468  re. It prints th
-0004c980: 6520 6d65 7373 6167 6573 2061 6e64 2074  e messages and t
-0004c990: 6865 6e20 220a 2020 2020 2020 2020 6622  hen ".        f"
-0004c9a0: 7468 6520 7072 6f67 7261 6d20 7374 6f70  the program stop
-0004c9b0: 732e 2022 0a20 2020 2020 2020 2022 4d65  s. ".        "Me
-0004c9c0: 7373 6167 6573 2061 7265 2073 6f72 7465  ssages are sorte
-0004c9d0: 642c 206c 6173 742d 6669 7273 742e 2022  d, last-first. "
-0004c9e0: 0a20 2020 2020 2020 2022 4c6f 6f6b 2061  .        "Look a
-0004c9f0: 7420 2d2d 7461 696c 2061 7320 7468 6174  t --tail as that
-0004ca00: 206f 7074 696f 6e20 6973 2072 656c 6174   option is relat
-0004ca10: 6564 2022 0a20 2020 2020 2020 2022 746f  ed ".        "to
-0004ca20: 202d 2d6c 6973 7465 6e20 7461 696c 2e20   --listen tail. 
-0004ca30: 220a 2020 2020 2020 2020 6627 5468 6520  ".        f'The 
-0004ca40: 6f70 7469 6f6e 2022 7b41 4c4c 7d22 2067  option "{ALL}" g
-0004ca50: 6574 7320 616c 6c20 6d65 7373 6167 6573  ets all messages
-0004ca60: 2061 7661 696c 6162 6c65 2c20 270a 2020   available, '.  
-0004ca70: 2020 2020 2020 226f 6c64 2061 6e64 206e        "old and n
-0004ca80: 6577 2e20 220a 2020 2020 2020 2020 6627  ew. ".        f'
-0004ca90: 556e 6c69 6b65 2022 7b4f 4e43 457d 2220  Unlike "{ONCE}" 
-0004caa0: 616e 6420 270a 2020 2020 2020 2020 6627  and '.        f'
-0004cab0: 227b 464f 5245 5645 527d 2220 7468 6174  "{FOREVER}" that
-0004cac0: 206c 6973 7465 6e20 696e 2041 4c4c 2072   listen in ALL r
-0004cad0: 6f6f 6d73 2c20 227b 5441 494c 7d22 2027  ooms, "{TAIL}" '
-0004cae0: 0a20 2020 2020 2020 2066 2761 6e64 2022  .        f'and "
-0004caf0: 7b41 4c4c 7d22 206c 6973 7465 6e20 270a  {ALL}" listen '.
-0004cb00: 2020 2020 2020 2020 226f 6e6c 7920 746f          "only to
-0004cb10: 2074 6865 2072 6f6f 6d20 7370 6563 6966   the room specif
-0004cb20: 6965 6420 696e 2074 6865 2063 7265 6465  ied in the crede
-0004cb30: 6e74 6961 6c73 2022 0a20 2020 2020 2020  ntials ".       
-0004cb40: 2022 6669 6c65 206f 7220 7468 6520 2d2d   "file or the --
-0004cb50: 726f 6f6d 206f 7074 696f 6e73 2e20 222c  room options. ",
-0004cb60: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-0004cb70: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-0004cb80: 2020 2020 222d 7422 2c0a 2020 2020 2020      "-t",.      
-0004cb90: 2020 222d 2d74 6169 6c22 2c0a 2020 2020    "--tail",.    
-0004cba0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-0004cbb0: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
-0004cbc0: 3d69 6e74 2c0a 2020 2020 2020 2020 6465  =int,.        de
-0004cbd0: 6661 756c 743d 5441 494c 5f55 4e55 5345  fault=TAIL_UNUSE
-0004cbe0: 445f 4445 4641 554c 542c 2020 2320 7768  D_DEFAULT,  # wh
-0004cbf0: 656e 202d 7420 6973 206e 6f74 2075 7365  en -t is not use
-0004cc00: 640a 2020 2020 2020 2020 6e61 7267 733d  d.        nargs=
-0004cc10: 223f 222c 2020 2320 6d61 6b65 7320 7468  "?",  # makes th
-0004cc20: 6520 776f 7264 206f 7074 696f 6e61 6c0a  e word optional.
-0004cc30: 2020 2020 2020 2020 2320 7768 656e 202d          # when -
-0004cc40: 7420 6973 2075 7365 642c 2062 7574 206e  t is used, but n
-0004cc50: 756d 6265 7220 6973 206e 6f74 2061 6464  umber is not add
-0004cc60: 6564 0a20 2020 2020 2020 2063 6f6e 7374  ed.        const
-0004cc70: 3d54 4149 4c5f 5553 4544 5f44 4546 4155  =TAIL_USED_DEFAU
-0004cc80: 4c54 2c0a 2020 2020 2020 2020 6d65 7461  LT,.        meta
-0004cc90: 7661 723d 224e 554d 4245 5222 2c0a 2020  var="NUMBER",.  
-0004cca0: 2020 2020 2020 6865 6c70 3d22 5072 696e        help="Prin
-0004ccb0: 7420 6c61 7374 206d 6573 7361 6765 732e  t last messages.
-0004ccc0: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
-0004ccd0: 696c 733a 3a20 5468 6520 2d2d 7461 696c  ils:: The --tail
-0004cce0: 206f 7074 696f 6e20 7265 6164 7320 616e   option reads an
-0004ccf0: 6420 7072 696e 7473 2075 7020 746f 2074  d prints up to t
-0004cd00: 6865 206c 6173 7420 4e20 220a 2020 2020  he last N ".    
-0004cd10: 2020 2020 226d 6573 7361 6765 7320 6672      "messages fr
-0004cd20: 6f6d 2074 6865 2073 7065 6369 6669 6564  om the specified
-0004cd30: 2072 6f6f 6d73 2c20 7468 656e 2071 7569   rooms, then qui
-0004cd40: 7473 2e20 220a 2020 2020 2020 2020 2249  ts. ".        "I
-0004cd50: 7420 7461 6b65 7320 6f6e 6520 220a 2020  t takes one ".  
-0004cd60: 2020 2020 2020 2261 7267 756d 656e 742c        "argument,
-0004cd70: 2061 6e20 696e 7465 6765 722c 2022 0a20   an integer, ". 
-0004cd80: 2020 2020 2020 2022 7768 6963 6820 7765         "which we
-0004cd90: 2063 616c 6c20 4e20 6865 7265 2e20 4966   call N here. If
-0004cda0: 2074 6865 7265 2061 7265 2066 6577 6572   there are fewer
-0004cdb0: 2074 6861 6e20 4e20 6d65 7373 6167 6573   than N messages
-0004cdc0: 2022 0a20 2020 2020 2020 2022 696e 2061   ".        "in a
-0004cdd0: 2072 6f6f 6d2c 2069 7420 7265 6164 7320   room, it reads 
-0004cde0: 616e 6420 7072 696e 7473 2075 7020 746f  and prints up to
-0004cdf0: 204e 206d 6573 7361 6765 732e 2022 0a20   N messages. ". 
-0004ce00: 2020 2020 2020 2022 4974 2067 6574 7320         "It gets 
-0004ce10: 7468 6520 6c61 7374 204e 206d 6573 7361  the last N messa
-0004ce20: 6765 7320 696e 2072 6576 6572 7365 206f  ges in reverse o
-0004ce30: 7264 6572 2e20 220a 2020 2020 2020 2020  rder. ".        
-0004ce40: 2249 7420 7072 696e 7420 7468 6520 6e65  "It print the ne
-0004ce50: 7765 7374 206d 6573 7361 6765 2066 6972  west message fir
-0004ce60: 7374 2c20 616e 6420 7468 6520 220a 2020  st, and the ".  
-0004ce70: 2020 2020 2020 226f 6c64 6573 7420 6d65        "oldest me
-0004ce80: 7373 6167 6520 6c61 7374 2e20 220a 2020  ssage last. ".  
-0004ce90: 2020 2020 2020 2249 6620 2d2d 6c69 7374        "If --list
-0004cea0: 656e 2d73 656c 6620 6973 206e 6f74 2073  en-self is not s
-0004ceb0: 6574 2069 7420 7769 6c6c 2070 7269 6e74  et it will print
-0004cec0: 206c 6573 7320 7468 616e 2022 0a20 2020   less than ".   
-0004ced0: 2020 2020 2022 4e20 6d65 7373 6167 6573       "N messages
-0004cee0: 2069 6e20 6d61 6e79 2063 6173 6573 2062   in many cases b
-0004cef0: 6563 6175 7365 204e 206d 6573 7361 6765  ecause N message
-0004cf00: 7320 6172 6520 220a 2020 2020 2020 2020  s are ".        
-0004cf10: 226f 6274 6169 6e65 642c 2062 7574 2073  "obtained, but s
-0004cf20: 6f6d 6520 6f66 2074 6865 6d20 6172 6520  ome of them are 
-0004cf30: 6469 7363 6172 6465 6420 6279 2064 6566  discarded by def
-0004cf40: 6175 6c74 2069 6620 220a 2020 2020 2020  ault if ".      
-0004cf50: 2020 2274 6865 7920 6172 6520 6672 6f6d    "they are from
-0004cf60: 2074 6865 2075 7365 7220 6974 7365 6c66   the user itself
-0004cf70: 2e20 220a 2020 2020 2020 2020 224c 6f6f  . ".        "Loo
-0004cf80: 6b20 6174 202d 2d6c 6973 7465 6e20 6173  k at --listen as
-0004cf90: 2074 6869 7320 6f70 7469 6f6e 2069 7320   this option is 
-0004cfa0: 7265 6c61 7465 6420 746f 202d 2d74 6169  related to --tai
-0004cfb0: 6c2e 222c 0a20 2020 2029 0a20 2020 2061  l.",.    ).    a
-0004cfc0: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
-0004cfd0: 2020 2020 2020 2020 222d 7922 2c0a 2020          "-y",.  
-0004cfe0: 2020 2020 2020 222d 2d6c 6973 7465 6e2d        "--listen-
-0004cff0: 7365 6c66 222c 0a20 2020 2020 2020 2072  self",.        r
-0004d000: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
-0004d010: 2020 2020 2020 2061 6374 696f 6e3d 2273         action="s
-0004d020: 746f 7265 5f74 7275 6522 2c0a 2020 2020  tore_true",.    
-0004d030: 2020 2020 6865 6c70 3d22 5072 696e 7420      help="Print 
-0004d040: 796f 7572 206f 776e 206d 6573 7361 6765  your own message
-0004d050: 7320 6173 2077 656c 6c2e 2022 0a20 2020  s as well. ".   
-0004d060: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-0004d070: 4966 2073 6574 2061 6e64 206c 6973 7465  If set and liste
-0004d080: 6e69 6e67 2c20 220a 2020 2020 2020 2020  ning, ".        
-0004d090: 2274 6865 6e20 7072 6f67 7261 6d20 7769  "then program wi
-0004d0a0: 6c6c 206c 6973 7465 6e20 746f 2061 6e64  ll listen to and
-0004d0b0: 2070 7269 6e74 2061 6c73 6f20 220a 2020   print also ".  
-0004d0c0: 2020 2020 2020 2274 6865 206d 6573 7361        "the messa
-0004d0d0: 6765 7320 7365 6e74 2062 7920 6974 7320  ges sent by its 
-0004d0e0: 6f77 6e20 7573 6572 2e20 220a 2020 2020  own user. ".    
-0004d0f0: 2020 2020 2242 7920 6465 6661 756c 7420      "By default 
-0004d100: 6d65 7373 6167 6573 2066 726f 6d20 6f6e  messages from on
-0004d110: 6573 656c 6620 6172 6520 6e6f 7420 7072  eself are not pr
-0004d120: 696e 7465 642e 222c 0a20 2020 2029 0a20  inted.",.    ). 
-0004d130: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
-0004d140: 6e74 280a 2020 2020 2020 2020 2320 6e6f  nt(.        # no
-0004d150: 2073 696e 676c 6520 6368 6172 2066 6c61   single char fla
-0004d160: 670a 2020 2020 2020 2020 222d 2d70 7269  g.        "--pri
-0004d170: 6e74 2d65 7665 6e74 2d69 6422 2c0a 2020  nt-event-id",.  
-0004d180: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-0004d190: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-0004d1a0: 7469 6f6e 3d22 7374 6f72 655f 7472 7565  tion="store_true
-0004d1b0: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-0004d1c0: 2250 7269 6e74 2065 7665 6e74 2069 6473  "Print event ids
-0004d1d0: 206f 6620 7265 6365 6976 6564 206d 6573   of received mes
-0004d1e0: 7361 6765 732e 2022 0a20 2020 2020 2020  sages. ".       
-0004d1f0: 2022 4465 7461 696c 733a 3a20 4966 2073   "Details:: If s
-0004d200: 6574 2061 6e64 206c 6973 7465 6e69 6e67  et and listening
-0004d210: 2c20 220a 2020 2020 2020 2020 6622 7468  , ".        f"th
-0004d220: 656e 2027 7b50 524f 475f 5749 5448 4f55  en '{PROG_WITHOU
-0004d230: 545f 4558 547d 2720 7769 6c6c 2070 7269  T_EXT}' will pri
-0004d240: 6e74 2061 6c73 6f20 7468 6520 6576 656e  nt also the even
-0004d250: 7420 6964 2066 6f72 2022 0a20 2020 2020  t id for ".     
-0004d260: 2020 2022 6561 6368 2072 6563 6569 7665     "each receive
-0004d270: 6420 6d65 7373 6167 6520 6f72 206f 7468  d message or oth
-0004d280: 6572 2072 6563 6569 7665 6420 6576 656e  er received even
-0004d290: 742e 2049 6620 7365 7420 616e 6420 220a  t. If set and ".
-0004d2a0: 2020 2020 2020 2020 6622 7365 6e64 696e          f"sendin
-0004d2b0: 672c 2074 6865 6e20 277b 5052 4f47 5f57  g, then '{PROG_W
-0004d2c0: 4954 484f 5554 5f45 5854 7d27 2077 696c  ITHOUT_EXT}' wil
-0004d2d0: 6c20 7072 696e 7420 7468 6520 6576 656e  l print the even
-0004d2e0: 7420 6964 2022 0a20 2020 2020 2020 2022  t id ".        "
-0004d2f0: 6f66 2074 6865 2073 656e 7420 6d65 7373  of the sent mess
-0004d300: 6167 6520 6f72 2074 6865 2073 656e 7420  age or the sent 
-0004d310: 6f62 6a65 6374 2028 6175 6469 6f2c 2066  object (audio, f
-0004d320: 696c 652c 2065 7665 6e74 2920 746f 2022  ile, event) to "
-0004d330: 0a20 2020 2020 2020 2022 7374 646f 7574  .        "stdout
-0004d340: 2e20 4f74 6865 7220 696e 666f 726d 6174  . Other informat
-0004d350: 696f 6e20 6c69 6b65 2072 6f6f 6d20 6964  ion like room id
-0004d360: 2061 6e64 2072 6566 6572 656e 6365 2074   and reference t
-0004d370: 6f20 7768 6174 2077 6173 2022 0a20 2020  o what was ".   
-0004d380: 2020 2020 2022 7365 6e74 2077 696c 6c20       "sent will 
-0004d390: 6265 2070 7269 6e74 6564 2074 6f6f 2e20  be printed too. 
-0004d3a0: 466f 7220 7365 6e64 696e 6720 7468 6973  For sending this
-0004d3b0: 2069 7320 7573 6566 756c 2c20 220a 2020   is useful, ".  
-0004d3c0: 2020 2020 2020 2269 6620 6166 7465 7220        "if after 
-0004d3d0: 7365 6e64 696e 6720 7468 6520 7573 6572  sending the user
-0004d3e0: 2022 0a20 2020 2020 2020 2022 7769 7368   ".        "wish
-0004d3f0: 6573 2074 6f20 7065 7266 6f72 6d20 6675  es to perform fu
-0004d400: 7274 6865 7220 6f70 6572 6174 696f 6e73  rther operations
-0004d410: 206f 6e20 7468 6520 7365 6e74 206f 626a   on the sent obj
-0004d420: 6563 742c 2022 0a20 2020 2020 2020 2022  ect, ".        "
-0004d430: 652e 672e 2072 6564 6163 7469 6e67 2f64  e.g. redacting/d
-0004d440: 656c 6574 696e 6720 6974 2061 6674 6572  eleting it after
-0004d450: 2061 6e20 6578 7069 7261 7469 6f6e 2074   an expiration t
-0004d460: 696d 652c 2065 7463 2e22 2c0a 2020 2020  ime, etc.",.    
-0004d470: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
-0004d480: 756d 656e 7428 0a20 2020 2020 2020 2023  ument(.        #
-0004d490: 2073 7461 7274 696e 6720 7769 7468 2076   starting with v
-0004d4a0: 6572 7369 6f6e 2032 2e31 3920 222d 7522  ersion 2.19 "-u"
-0004d4b0: 2068 6173 2062 6565 6e20 6d6f 7665 6420   has been moved 
-0004d4c0: 746f 202d 2d75 7365 7221 0a20 2020 2020  to --user!.     
-0004d4d0: 2020 2022 2d2d 646f 776e 6c6f 6164 2d6d     "--download-m
-0004d4e0: 6564 6961 222c 0a20 2020 2020 2020 2074  edia",.        t
-0004d4f0: 7970 653d 7374 722c 0a20 2020 2020 2020  ype=str,.       
-0004d500: 2064 6566 6175 6c74 3d22 222c 2020 2320   default="",  # 
-0004d510: 6966 202d 2d64 6f77 6e6c 6f61 642d 6d65  if --download-me
-0004d520: 6469 6120 6973 206e 6f74 2075 7365 640a  dia is not used.
-0004d530: 2020 2020 2020 2020 6163 7469 6f6e 3d22          action="
-0004d540: 7374 6f72 6522 2c0a 2020 2020 2020 2020  store",.        
-0004d550: 6e61 7267 733d 223f 222c 2020 2320 6d61  nargs="?",  # ma
-0004d560: 6b65 7320 7468 6520 776f 7264 206f 7074  kes the word opt
-0004d570: 696f 6e61 6c0a 2020 2020 2020 2020 636f  ional.        co
-0004d580: 6e73 743d 4d45 4449 415f 4449 525f 4445  nst=MEDIA_DIR_DE
-0004d590: 4641 554c 542c 2020 2320 7768 656e 206f  FAULT,  # when o
-0004d5a0: 7074 696f 6e20 6973 2075 7365 642c 2062  ption is used, b
-0004d5b0: 7574 206e 6f20 6469 7220 6164 6465 640a  ut no dir added.
-0004d5c0: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
-0004d5d0: 2244 4f57 4e4c 4f41 445f 4449 5245 4354  "DOWNLOAD_DIRECT
-0004d5e0: 4f52 5922 2c0a 2020 2020 2020 2020 6865  ORY",.        he
-0004d5f0: 6c70 3d22 446f 776e 6c6f 6164 206d 6564  lp="Download med
-0004d600: 6961 2066 696c 6573 2077 6869 6c65 206c  ia files while l
-0004d610: 6973 7465 6e69 6e67 2e20 220a 2020 2020  istening. ".    
-0004d620: 2020 2020 2244 6574 6169 6c73 3a3a 2049      "Details:: I
-0004d630: 6620 7365 7420 616e 6420 6c69 7374 656e  f set and listen
-0004d640: 696e 672c 2022 0a20 2020 2020 2020 2022  ing, ".        "
-0004d650: 7468 656e 2070 726f 6772 616d 2077 696c  then program wil
-0004d660: 6c20 646f 776e 6c6f 6164 2022 0a20 2020  l download ".   
-0004d670: 2020 2020 2022 7265 6365 6976 6564 206d       "received m
-0004d680: 6564 6961 2066 696c 6573 2028 652e 672e  edia files (e.g.
-0004d690: 2069 6d61 6765 2c20 6175 6469 6f2c 2076   image, audio, v
-0004d6a0: 6964 656f 2c20 7465 7874 2c20 5044 4620  ideo, text, PDF 
-0004d6b0: 6669 6c65 7329 2e20 220a 2020 2020 2020  files). ".      
-0004d6c0: 2020 2242 7920 6465 6661 756c 742c 206d    "By default, m
-0004d6d0: 6564 6961 2077 696c 6c20 6265 2064 6f77  edia will be dow
-0004d6e0: 6e6c 6f61 6465 6420 746f 2074 6869 7320  nloaded to this 
-0004d6f0: 6469 7265 6374 6f72 793a 2022 0a20 2020  directory: ".   
-0004d700: 2020 2020 2066 2722 7b4d 4544 4941 5f44       f'"{MEDIA_D
-0004d710: 4952 5f44 4546 4155 4c54 7d22 2e20 270a  IR_DEFAULT}". '.
-0004d720: 2020 2020 2020 2020 2259 6f75 2063 616e          "You can
-0004d730: 206f 7665 7277 7269 7465 2064 6566 6175   overwrite defau
-0004d740: 6c74 2077 6974 6820 796f 7572 2070 7265  lt with your pre
-0004d750: 6665 7272 6564 2064 6972 6563 746f 7279  ferred directory
-0004d760: 2e20 220a 2020 2020 2020 2020 2249 6620  . ".        "If 
-0004d770: 796f 7520 7072 6f76 6964 6520 6120 7265  you provide a re
-0004d780: 6c61 7469 7665 2070 6174 682c 2074 6865  lative path, the
-0004d790: 2072 656c 6174 6976 6520 7061 7468 2077   relative path w
-0004d7a0: 696c 6c20 6265 2072 656c 6174 6976 6520  ill be relative 
-0004d7b0: 220a 2020 2020 2020 2020 2274 6f20 7468  ".        "to th
-0004d7c0: 6520 6c6f 6361 6c20 6469 7265 6374 6f72  e local director
-0004d7d0: 792e 2066 6f6f 2077 696c 6c20 6265 636f  y. foo will beco
-0004d7e0: 6d65 202e 2f66 6f6f 2e20 220a 2020 2020  me ./foo. ".    
-0004d7f0: 2020 2020 2266 6f6f 2f66 6f6f 2077 696c      "foo/foo wil
-0004d800: 6c20 6265 636f 6d65 202e 2f66 6f6f 2f66  l become ./foo/f
-0004d810: 6f6f 2061 6e64 206f 6e6c 7920 776f 726b  oo and only work
-0004d820: 7320 6966 202e 2f66 6f6f 2061 6c72 6561  s if ./foo alrea
-0004d830: 6479 2022 0a20 2020 2020 2020 2022 6578  dy ".        "ex
-0004d840: 6973 7473 2e20 220a 2020 2020 2020 2020  ists. ".        
-0004d850: 2241 6273 6f6c 7574 6520 7061 7468 7320  "Absolute paths 
-0004d860: 7769 6c6c 2072 656d 6569 6e20 756e 6368  will remein unch
-0004d870: 616e 6765 642e 202f 746d 7020 7769 6c6c  anged. /tmp will
-0004d880: 2072 656d 6169 6e20 2f74 6d70 2e20 220a   remain /tmp. ".
-0004d890: 2020 2020 2020 2020 222f 746d 702f 666f          "/tmp/fo
-0004d8a0: 6f20 7769 6c6c 2062 6520 2f74 6d70 2f66  o will be /tmp/f
-0004d8b0: 6f6f 2e20 220a 2020 2020 2020 2020 2249  oo. ".        "I
-0004d8c0: 6620 6d65 6469 6120 6973 2065 6e63 7279  f media is encry
-0004d8d0: 7074 6564 2069 7420 7769 6c6c 2062 6520  pted it will be 
-0004d8e0: 6465 6372 7970 7465 6420 616e 6420 7374  decrypted and st
-0004d8f0: 6f72 6564 2064 6563 7279 7074 6564 2e20  ored decrypted. 
-0004d900: 220a 2020 2020 2020 2020 2242 7920 6465  ".        "By de
-0004d910: 6661 756c 7420 6d65 6469 6120 6669 6c65  fault media file
-0004d920: 7320 7769 6c6c 206e 6f74 2062 6520 646f  s will not be do
-0004d930: 776e 6c6f 6164 6564 2e22 2c0a 2020 2020  wnloaded.",.    
-0004d940: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
-0004d950: 756d 656e 7428 0a20 2020 2020 2020 2022  ument(.        "
-0004d960: 2d2d 646f 776e 6c6f 6164 2d6d 6564 6961  --download-media
-0004d970: 2d6e 616d 6522 2c0a 2020 2020 2020 2020  -name",.        
-0004d980: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
-0004d990: 2020 2020 2020 2020 6465 6661 756c 743d          default=
-0004d9a0: 2222 2c20 2023 2069 6620 2d2d 646f 776e  "",  # if --down
-0004d9b0: 6c6f 6164 2d6d 6564 6961 2d6e 616d 6520  load-media-name 
-0004d9c0: 6973 206e 6f74 2075 7365 640a 2020 2020  is not used.    
-0004d9d0: 2020 2020 7479 7065 3d73 7472 2c20 2023      type=str,  #
-0004d9e0: 206d 6574 686f 6420 746f 2064 6572 6976   method to deriv
-0004d9f0: 6520 6669 6c65 6e61 6d65 0a20 2020 2020  e filename.     
-0004da00: 2020 206d 6574 6176 6172 3d22 534f 5552     metavar="SOUR
-0004da10: 4345 7c43 4c45 414e 7c45 5645 4e54 4944  CE|CLEAN|EVENTID
-0004da20: 7c54 494d 4522 2c0a 2020 2020 2020 2020  |TIME",.        
-0004da30: 6865 6c70 3d22 5370 6563 6966 7920 7468  help="Specify th
-0004da40: 6520 6d65 7468 6f64 2074 6f20 6465 7269  e method to deri
-0004da50: 7665 2074 6865 206d 6564 6961 2066 696c  ve the media fil
-0004da60: 656e 616d 652e 2022 0a20 2020 2020 2020  ename. ".       
-0004da70: 2022 4465 7461 696c 733a 3a20 5468 6973   "Details:: This
-0004da80: 2061 7267 756d 656e 7420 6973 206f 7074   argument is opt
-0004da90: 696f 6e61 6c2e 2022 0a20 2020 2020 2020  ional. ".       
-0004daa0: 2022 4375 7272 656e 746c 7920 666f 7572   "Currently four
-0004dab0: 2063 686f 6963 6573 2061 7265 206f 6666   choices are off
-0004dac0: 6572 6564 3a20 2773 6f75 7263 6527 2c20  ered: 'source', 
-0004dad0: 2763 6c65 616e 272c 2022 0a20 2020 2020  'clean', ".     
-0004dae0: 2020 2022 2765 7665 6e74 6964 272c 2061     "'eventid', a
-0004daf0: 6e64 2027 7469 6d65 272e 2022 0a20 2020  nd 'time'. ".   
-0004db00: 2020 2020 2022 2773 6f75 7263 6527 206d       "'source' m
-0004db10: 6561 6e73 2074 6865 2076 616c 7565 2073  eans the value s
-0004db20: 7065 6369 6669 6564 2062 7920 7468 6520  pecified by the 
-0004db30: 736f 7572 6365 2028 7365 6e64 6572 2920  source (sender) 
-0004db40: 220a 2020 2020 2020 2020 2277 696c 6c20  ".        "will 
-0004db50: 6265 2075 7365 642e 2049 6620 7468 6520  be used. If the 
-0004db60: 7365 6e64 6572 2c20 692e 652e 2073 6f75  sender, i.e. sou
-0004db70: 7263 652c 2073 7065 6369 6669 6573 2061  rce, specifies a
-0004db80: 2076 616c 7565 2022 0a20 2020 2020 2020   value ".       
-0004db90: 2022 7468 6174 2069 7320 6e6f 7420 6120   "that is not a 
-0004dba0: 7661 6c69 6420 6669 6c65 6e61 6d65 2c20  valid filename, 
-0004dbb0: 7468 656e 2061 2066 6169 6c75 7265 2077  then a failure w
-0004dbc0: 696c 6c20 6f63 6375 7220 616e 6420 220a  ill occur and ".
-0004dbd0: 2020 2020 2020 2020 2274 6865 206d 6564          "the med
-0004dbe0: 6961 2066 696c 6520 7769 6c6c 206e 6f74  ia file will not
-0004dbf0: 2062 6520 7361 7665 642e 2022 0a20 2020   be saved. ".   
-0004dc00: 2020 2020 2022 2763 6c65 616e 2720 6d65       "'clean' me
-0004dc10: 616e 7320 7468 6174 2061 6c6c 2075 6e75  ans that all unu
-0004dc20: 7375 616c 2063 6861 7261 6374 6572 7320  sual characters 
-0004dc30: 696e 2074 6865 206e 616d 6520 220a 2020  in the name ".  
-0004dc40: 2020 2020 2020 2270 726f 7669 6465 6420        "provided 
-0004dc50: 6279 2074 6865 2073 6f75 7263 6520 7769  by the source wi
-0004dc60: 6c6c 2062 6520 7265 706c 6163 6564 2022  ll be replaced "
-0004dc70: 0a20 2020 2020 2020 2022 6279 2061 6e20  .        "by an 
-0004dc80: 756e 6465 7273 636f 7265 2074 6f20 6372  underscore to cr
-0004dc90: 6561 7465 2061 2076 616c 6964 2066 696c  eate a valid fil
-0004dca0: 6520 6e61 6d65 2e20 220a 2020 2020 2020  e name. ".      
-0004dcb0: 2020 2227 6576 656e 7469 6427 206d 6561    "'eventid' mea
-0004dcc0: 6e73 2074 6861 7420 7468 6520 6e61 6d65  ns that the name
-0004dcd0: 2070 726f 7669 6465 6420 6279 2074 6865   provided by the
-0004dce0: 2073 6f75 7263 6520 7769 6c6c 2062 6520   source will be 
-0004dcf0: 220a 2020 2020 2020 2020 2269 676e 6f72  ".        "ignor
-0004dd00: 6564 2061 6e64 2074 6865 2065 7665 6e74  ed and the event
-0004dd10: 2d69 6420 7769 6c6c 2062 6520 7573 6564  -id will be used
-0004dd20: 2069 6e73 7465 6164 2e20 220a 2020 2020   instead. ".    
-0004dd30: 2020 2020 2227 7469 6d65 2720 6d65 616e      "'time' mean
-0004dd40: 7320 7468 6174 2074 6865 206e 616d 6520  s that the name 
-0004dd50: 7072 6f76 6964 6564 2062 7920 7468 6520  provided by the 
-0004dd60: 736f 7572 6365 2077 696c 6c20 6265 2022  source will be "
-0004dd70: 0a20 2020 2020 2020 2022 6967 6e6f 7265  .        "ignore
-0004dd80: 6420 616e 6420 7468 6520 6375 7272 656e  d and the curren
-0004dd90: 7420 7469 6d65 2061 7420 7468 6520 7265  t time at the re
-0004dda0: 6365 6976 6572 2077 696c 6c20 6265 2075  ceiver will be u
-0004ddb0: 7365 6420 696e 7374 6561 642e 2022 0a20  sed instead. ". 
-0004ddc0: 2020 2020 2020 2022 4173 2061 6e20 6578         "As an ex
-0004ddd0: 616d 706c 652c 2069 6620 7468 6520 736f  ample, if the so
-0004dde0: 7572 6365 2f73 656e 6465 7220 7072 6f76  urce/sender prov
-0004ddf0: 6964 6564 2027 696d 6167 6528 3129 212e  ided 'image(1)!.
-0004de00: 6a70 6727 2061 7320 220a 2020 2020 2020  jpg' as ".      
-0004de10: 2020 226e 616d 6520 666f 7220 6120 6769    "name for a gi
-0004de20: 7665 6e20 6d65 6469 6120 6669 6c65 2022  ven media file "
-0004de30: 0a20 2020 2020 2020 2022 7468 656e 2027  .        "then '
-0004de40: 736f 7572 6365 2720 7769 6c6c 2073 746f  source' will sto
-0004de50: 7265 2074 6865 206d 6564 6961 2075 7369  re the media usi
-0004de60: 6e67 2066 696c 656e 616d 6520 2769 6d61  ng filename 'ima
-0004de70: 6765 2831 2921 2e6a 7067 272c 2022 0a20  ge(1)!.jpg', ". 
-0004de80: 2020 2020 2020 2022 2763 6c65 616e 2720         "'clean' 
-0004de90: 7769 6c6c 2073 746f 7265 2069 7420 6173  will store it as
-0004dea0: 2027 696d 6167 655f 315f 5f2e 6a70 6727   'image_1__.jpg'
-0004deb0: 2c20 220a 2020 2020 2020 2020 2227 6576  , ".        "'ev
-0004dec0: 656e 7469 6427 2061 7320 736f 6d65 7468  entid' as someth
-0004ded0: 696e 6720 6c69 6b65 2022 0a20 2020 2020  ing like ".     
-0004dee0: 2020 2022 2724 7273 6164 3537 6461 6673     "'$rsad57dafs
-0004def0: 3537 6173 6661 6734 3567 7346 6a64 5458  57asfag45gsFjdTX
-0004df00: 5731 6473 6672 6f42 694f 3249 7369 644b  W1dsfroBiO2IsidK
-0004df10: 6b27 2c20 220a 2020 2020 2020 2020 2261  k', ".        "a
-0004df20: 6e64 2027 7469 6d65 2720 6173 2073 6f6d  nd 'time' as som
-0004df30: 6574 6869 6e67 206c 696b 6520 220a 2020  ething like ".  
-0004df40: 2020 2020 2020 2227 3230 3233 3130 3132        "'20231012
-0004df50: 5f31 3532 3233 345f 3236 3636 3030 2720  _152234_266600' 
-0004df60: 2859 5959 594d 4d44 445f 4848 4d4d 5353  (YYYYMMDD_HHMMSS
-0004df70: 5f4d 4943 524f 5345 434f 4e44 5329 2e20  _MICROSECONDS). 
-0004df80: 220a 2020 2020 2020 2020 6622 4966 206e  ".        f"If n
-0004df90: 6f74 2073 7065 6369 6669 6564 2074 6869  ot specified thi
-0004dfa0: 7320 7661 6c75 6520 6465 6661 756c 7473  s value defaults
-0004dfb0: 2074 6f20 277b 4d45 4449 415f 4e41 4d45   to '{MEDIA_NAME
-0004dfc0: 5f44 4546 4155 4c54 7d27 2e20 222c 0a20  _DEFAULT}'. ",. 
-0004dfd0: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
-0004dfe0: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-0004dff0: 2020 2320 222d 6f22 2c20 2320 696e 636f    # "-o", # inco
-0004e000: 6d70 6174 6962 6c65 2063 6861 6e67 6520  mpatible change 
-0004e010: 4465 6320 3230 3232 2c20 2d6f 206d 6f76  Dec 2022, -o mov
-0004e020: 6564 2074 6f20 2d2d 6f75 7470 7574 0a20  ed to --output. 
-0004e030: 2020 2020 2020 2022 2d2d 6f73 2d6e 6f74         "--os-not
-0004e040: 6966 7922 2c0a 2020 2020 2020 2020 7265  ify",.        re
-0004e050: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
-0004e060: 2020 2020 2020 6163 7469 6f6e 3d22 7374        action="st
-0004e070: 6f72 655f 7472 7565 222c 0a20 2020 2020  ore_true",.     
-0004e080: 2020 2068 656c 703d 224e 6f74 6966 7920     help="Notify 
-0004e090: 6d65 206f 6620 6172 7269 7669 6e67 206d  me of arriving m
-0004e0a0: 6573 7361 6765 732e 2022 0a20 2020 2020  essages. ".     
-0004e0b0: 2020 2022 4465 7461 696c 733a 3a20 4966     "Details:: If
-0004e0c0: 2073 6574 2061 6e64 206c 6973 7465 6e69   set and listeni
-0004e0d0: 6e67 2c20 220a 2020 2020 2020 2020 2274  ng, ".        "t
-0004e0e0: 6865 6e20 7072 6f67 7261 6d20 7769 6c6c  hen program will
-0004e0f0: 2061 7474 656d 7074 2074 6f20 7669 7375   attempt to visu
-0004e100: 616c 6c79 206e 6f74 6966 7920 6f66 2022  ally notify of "
-0004e110: 0a20 2020 2020 2020 2022 6172 7269 7669  .        "arrivi
-0004e120: 6e67 206d 6573 7361 6765 7320 7468 726f  ng messages thro
-0004e130: 7567 6820 7468 6520 6f70 6572 6174 696e  ugh the operatin
-0004e140: 6720 7379 7374 656d 2e20 220a 2020 2020  g system. ".    
-0004e150: 2020 2020 2242 7920 6465 6661 756c 7420      "By default 
-0004e160: 7468 6572 6520 6973 206e 6f20 6e6f 7469  there is no noti
-0004e170: 6669 6361 7469 6f6e 2076 6961 204f 532e  fication via OS.
-0004e180: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
-0004e190: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
-0004e1a0: 2020 2020 2020 2320 7265 6d6f 7665 6420        # removed 
-0004e1b0: 222d 7822 2c20 7374 6172 7469 6e67 2076  "-x", starting v
-0004e1c0: 322e 3231 202d 7820 6973 206e 6f20 6c6f  2.21 -x is no lo
-0004e1d0: 6e67 6572 2073 7570 706f 7274 6564 0a20  nger supported. 
-0004e1e0: 2020 2020 2020 2022 2d2d 7365 742d 6465         "--set-de
-0004e1f0: 7669 6365 2d6e 616d 6522 2c0a 2020 2020  vice-name",.    
-0004e200: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-0004e210: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
-0004e220: 3d73 7472 2c0a 2020 2020 2020 2020 6465  =str,.        de
-0004e230: 6661 756c 743d 5345 545f 4445 5649 4345  fault=SET_DEVICE
-0004e240: 5f4e 414d 455f 554e 5553 4544 5f44 4546  _NAME_UNUSED_DEF
-0004e250: 4155 4c54 2c20 2023 2077 6865 6e20 6f70  AULT,  # when op
-0004e260: 7469 6f6e 2069 736e 2774 2075 7365 640a  tion isn't used.
-0004e270: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
-0004e280: 2244 4556 4943 455f 4e41 4d45 222c 0a20  "DEVICE_NAME",. 
-0004e290: 2020 2020 2020 2068 656c 703d 2253 6574         help="Set
-0004e2a0: 206f 7220 7265 6e61 6d65 2074 6865 2063   or rename the c
-0004e2b0: 7572 7265 6e74 2064 6576 6963 652e 2022  urrent device. "
-0004e2c0: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
-0004e2d0: 733a 3a20 5365 7420 6f72 2072 656e 616d  s:: Set or renam
-0004e2e0: 6520 7468 6520 6375 7272 656e 7420 6465  e the current de
-0004e2f0: 7669 6365 2074 6f20 7468 6520 220a 2020  vice to the ".  
-0004e300: 2020 2020 2020 2264 6576 6963 6520 6e61        "device na
-0004e310: 6d65 2070 726f 7669 6465 642e 2022 0a20  me provided. ". 
-0004e320: 2020 2020 2020 2022 5365 6e64 2c20 6c69         "Send, li
-0004e330: 7374 656e 2061 6e64 2076 6572 6966 7920  sten and verify 
-0004e340: 6f70 6572 6174 696f 6e73 2061 7265 2061  operations are a
-0004e350: 6c6c 6f77 6564 2077 6865 6e20 220a 2020  llowed when ".  
-0004e360: 2020 2020 2020 2272 656e 616d 696e 6720        "renaming 
-0004e370: 7468 6520 6465 7669 6365 2e22 2c0a 2020  the device.",.  
-0004e380: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
-0004e390: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-0004e3a0: 2022 2d2d 7365 742d 6469 7370 6c61 792d   "--set-display-
-0004e3b0: 6e61 6d65 222c 0a20 2020 2020 2020 2072  name",.        r
-0004e3c0: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
-0004e3d0: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
-0004e3e0: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-0004e3f0: 3d53 4554 5f44 4953 504c 4159 5f4e 414d  =SET_DISPLAY_NAM
-0004e400: 455f 554e 5553 4544 5f44 4546 4155 4c54  E_UNUSED_DEFAULT
-0004e410: 2c20 2023 2077 6865 6e20 6f70 7469 6f6e  ,  # when option
-0004e420: 2069 736e 2774 2075 7365 640a 2020 2020   isn't used.    
-0004e430: 2020 2020 6d65 7461 7661 723d 2244 4953      metavar="DIS
-0004e440: 504c 4159 5f4e 414d 4522 2c0a 2020 2020  PLAY_NAME",.    
-0004e450: 2020 2020 6865 6c70 3d22 5365 7420 6f72      help="Set or
-0004e460: 2072 656e 616d 6520 7468 6520 6469 7370   rename the disp
-0004e470: 6c61 7920 6e61 6d65 2e20 220a 2020 2020  lay name. ".    
-0004e480: 2020 2020 2244 6574 6169 6c73 3a3a 2053      "Details:: S
-0004e490: 6574 206f 7220 7265 6e61 6d65 2074 6865  et or rename the
-0004e4a0: 2064 6973 706c 6179 206e 616d 6520 220a   display name ".
-0004e4b0: 2020 2020 2020 2020 2266 6f72 2074 6865          "for the
-0004e4c0: 2063 7572 7265 6e74 2075 7365 7220 746f   current user to
-0004e4d0: 2074 6865 2022 0a20 2020 2020 2020 2022   the ".        "
-0004e4e0: 6469 7370 6c61 7920 6e61 6d65 2070 726f  display name pro
-0004e4f0: 7669 6465 642e 2022 0a20 2020 2020 2020  vided. ".       
-0004e500: 2022 5365 6e64 2c20 6c69 7374 656e 2061   "Send, listen a
-0004e510: 6e64 2076 6572 6966 7920 6f70 6572 6174  nd verify operat
-0004e520: 696f 6e73 2061 7265 2061 6c6c 6f77 6564  ions are allowed
-0004e530: 2077 6865 6e20 220a 2020 2020 2020 2020   when ".        
-0004e540: 2273 6574 7469 6e67 2074 6865 2064 6973  "setting the dis
-0004e550: 706c 6179 206e 616d 652e 2022 0a20 2020  play name. ".   
-0004e560: 2020 2020 2022 446f 206e 6f74 2063 6f6e       "Do not con
-0004e570: 6675 7365 2074 6869 7320 6f70 7469 6f6e  fuse this option
-0004e580: 2077 6974 6820 7468 6520 6f70 7469 6f6e   with the option
-0004e590: 2027 2d2d 6765 742d 726f 6f6d 2d69 6e66   '--get-room-inf
-0004e5a0: 6f27 2022 0a20 2020 2020 2020 2022 7768  o' ".        "wh
-0004e5b0: 6963 6820 6765 7473 2074 6865 2072 6f6f  ich gets the roo
-0004e5c0: 6d20 6469 7370 6c61 7920 6e61 6d65 2c20  m display name, 
-0004e5d0: 6e6f 7420 7468 6520 7573 6572 2064 6973  not the user dis
-0004e5e0: 706c 6179 206e 616d 652e 222c 0a20 2020  play name.",.   
-0004e5f0: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-0004e600: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-0004e610: 222d 2d67 6574 2d64 6973 706c 6179 2d6e  "--get-display-n
-0004e620: 616d 6522 2c0a 2020 2020 2020 2020 7265  ame",.        re
-0004e630: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
-0004e640: 2020 2020 2020 6163 7469 6f6e 3d22 7374        action="st
-0004e650: 6f72 655f 7472 7565 222c 0a20 2020 2020  ore_true",.     
-0004e660: 2020 2068 656c 703d 2247 6574 2074 6865     help="Get the
-0004e670: 2064 6973 706c 6179 206e 616d 6520 6f66   display name of
-0004e680: 2079 6f75 7273 656c 662e 2022 0a20 2020   yourself. ".   
-0004e690: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-0004e6a0: 4765 7420 7468 6520 6469 7370 6c61 7920  Get the display 
-0004e6b0: 6e61 6d65 206f 6620 220a 2020 2020 2020  name of ".      
-0004e6c0: 2020 6622 7b50 524f 475f 5749 5448 4f55    f"{PROG_WITHOU
-0004e6d0: 545f 4558 547d 2028 6974 7365 6c66 292c  T_EXT} (itself),
-0004e6e0: 2022 0a20 2020 2020 2020 2022 6f72 206f   ".        "or o
-0004e6f0: 6620 6f6e 6520 6f72 206d 756c 7469 706c  f one or multipl
-0004e700: 6520 7573 6572 732e 2053 7065 6369 6679  e users. Specify
-0004e710: 2075 7365 7228 7329 2077 6974 6820 7468   user(s) with th
-0004e720: 6520 220a 2020 2020 2020 2020 222d 2d75  e ".        "--u
-0004e730: 7365 7220 6f70 7469 6f6e 2e20 4966 206e  ser option. If n
-0004e740: 6f20 7573 6572 2069 7320 7370 6563 6966  o user is specif
-0004e750: 6965 6420 6765 7420 7468 6520 6469 7370  ied get the disp
-0004e760: 6c61 7920 6e61 6d65 206f 6620 220a 2020  lay name of ".  
-0004e770: 2020 2020 2020 2269 7473 656c 662e 2022        "itself. "
-0004e780: 0a20 2020 2020 2020 2022 5365 6e64 2c20  .        "Send, 
-0004e790: 6c69 7374 656e 2061 6e64 2076 6572 6966  listen and verif
-0004e7a0: 7920 6f70 6572 6174 696f 6e73 2061 7265  y operations are
-0004e7b0: 2061 6c6c 6f77 6564 2077 6865 6e20 220a   allowed when ".
-0004e7c0: 2020 2020 2020 2020 2267 6574 7469 6e67          "getting
-0004e7d0: 2064 6973 706c 6179 206e 616d 6528 7329   display name(s)
-0004e7e0: 2e20 220a 2020 2020 2020 2020 2244 6f20  . ".        "Do 
-0004e7f0: 6e6f 7420 636f 6e66 7573 6520 7468 6973  not confuse this
-0004e800: 206f 7074 696f 6e20 7769 7468 2074 6865   option with the
-0004e810: 206f 7074 696f 6e20 272d 2d67 6574 2d72   option '--get-r
-0004e820: 6f6f 6d2d 696e 666f 2720 220a 2020 2020  oom-info' ".    
-0004e830: 2020 2020 2277 6869 6368 2067 6574 7320      "which gets 
-0004e840: 7468 6520 726f 6f6d 2064 6973 706c 6179  the room display
-0004e850: 206e 616d 652c 206e 6f74 2074 6865 2075   name, not the u
-0004e860: 7365 7220 6469 7370 6c61 7920 6e61 6d65  ser display name
-0004e870: 2e22 2c0a 2020 2020 290a 2020 2020 6170  .",.    ).    ap
-0004e880: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
-0004e890: 2020 2020 2020 2022 2d2d 7365 742d 7072         "--set-pr
-0004e8a0: 6573 656e 6365 222c 0a20 2020 2020 2020  esence",.       
-0004e8b0: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
-0004e8c0: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
-0004e8d0: 722c 0a20 2020 2020 2020 2023 2064 6566  r,.        # def
-0004e8e0: 6175 6c74 7320 746f 204e 6f6e 6520 6966  aults to None if
-0004e8f0: 206e 6f74 2075 7365 642c 2069 7320 7374   not used, is st
-0004e900: 7220 6966 2075 7365 640a 2020 2020 2020  r if used.      
-0004e910: 2020 6d65 7461 7661 723d 224f 4e4c 494e    metavar="ONLIN
-0004e920: 457c 4f46 464c 494e 457c 554e 4156 4149  E|OFFLINE|UNAVAI
-0004e930: 4c41 424c 4522 2c0a 2020 2020 2020 2020  LABLE",.        
-0004e940: 6865 6c70 3d22 5365 7420 796f 7572 2070  help="Set your p
-0004e950: 7265 7365 6e63 652e 2022 0a20 2020 2020  resence. ".     
-0004e960: 2020 2066 2244 6574 6169 6c73 3a3a 2053     f"Details:: S
-0004e970: 6574 2070 7265 7365 6e63 6520 6f66 207b  et presence of {
-0004e980: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
-0004e990: 7d20 746f 2074 6865 2067 6976 656e 2076  } to the given v
-0004e9a0: 616c 7565 2e20 220a 2020 2020 2020 2020  alue. ".        
-0004e9b0: 224d 7573 7420 6265 206f 6e65 206f 6620  "Must be one of 
-0004e9c0: 7468 6573 6520 7661 6c75 6573 3a20 e280  these values: ..
-0004e9d0: 9c6f 6e6c 696e 65e2 809d 2c20 e280 9c6f  .online..., ...o
-0004e9e0: 6666 6c69 6e65 e280 9d2c 20e2 809c 756e  ffline..., ...un
-0004e9f0: 6176 6169 6c61 626c 65e2 809d 2e20 220a  available.... ".
-0004ea00: 2020 2020 2020 2020 224f 7468 6572 7769          "Otherwi
-0004ea10: 7365 2061 6e20 6572 726f 7220 7769 6c6c  se an error will
-0004ea20: 2062 6520 7072 6f64 7563 6564 2e22 2c0a   be produced.",.
-0004ea30: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
-0004ea40: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-0004ea50: 2020 2022 2d2d 6765 742d 7072 6573 656e     "--get-presen
-0004ea60: 6365 222c 0a20 2020 2020 2020 2072 6571  ce",.        req
-0004ea70: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-0004ea80: 2020 2020 2061 6374 696f 6e3d 2273 746f       action="sto
-0004ea90: 7265 5f74 7275 6522 2c0a 2020 2020 2020  re_true",.      
-0004eaa0: 2020 2320 6465 6661 756c 7473 2074 6f20    # defaults to 
-0004eab0: 4661 6c73 6520 6966 206e 6f74 2075 7365  False if not use
-0004eac0: 640a 2020 2020 2020 2020 6865 6c70 3d22  d.        help="
-0004ead0: 4765 7420 796f 7572 2070 7265 7365 6e63  Get your presenc
-0004eae0: 652e 2022 0a20 2020 2020 2020 2066 2244  e. ".        f"D
-0004eaf0: 6574 6169 6c73 3a3a 2047 6574 2070 7265  etails:: Get pre
-0004eb00: 7365 6e63 6520 6f66 207b 5052 4f47 5f57  sence of {PROG_W
-0004eb10: 4954 484f 5554 5f45 5854 7d20 2869 7473  ITHOUT_EXT} (its
-0004eb20: 656c 6629 2c20 220a 2020 2020 2020 2020  elf), ".        
-0004eb30: 226f 7220 6f66 206f 6e65 206f 7220 6d75  "or of one or mu
-0004eb40: 6c74 6970 6c65 2075 7365 7273 2e20 5370  ltiple users. Sp
-0004eb50: 6563 6966 7920 7573 6572 2873 2920 7769  ecify user(s) wi
-0004eb60: 7468 2074 6865 2022 0a20 2020 2020 2020  th the ".       
-0004eb70: 2022 2d2d 7573 6572 206f 7074 696f 6e2e   "--user option.
-0004eb80: 2049 6620 6e6f 2075 7365 7220 6973 2073   If no user is s
-0004eb90: 7065 6369 6669 6564 2067 6574 2074 6865  pecified get the
-0004eba0: 2070 7265 7365 6e63 6520 6f66 2022 0a20   presence of ". 
-0004ebb0: 2020 2020 2020 2022 6974 7365 6c66 2e20         "itself. 
-0004ebc0: 220a 2020 2020 2020 2020 2253 656e 642c  ".        "Send,
-0004ebd0: 206c 6973 7465 6e20 616e 6420 7665 7269   listen and veri
-0004ebe0: 6679 206f 7065 7261 7469 6f6e 7320 6172  fy operations ar
-0004ebf0: 6520 616c 6c6f 7765 6420 7768 656e 2022  e allowed when "
-0004ec00: 0a20 2020 2020 2020 2022 6765 7474 696e  .        "gettin
-0004ec10: 6720 7072 6573 656e 6365 2873 292e 222c  g presence(s).",
-0004ec20: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-0004ec30: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-0004ec40: 2020 2020 222d 2d75 706c 6f61 6422 2c0a      "--upload",.
-0004ec50: 2020 2020 2020 2020 7265 7175 6972 6564          required
-0004ec60: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-0004ec70: 6163 7469 6f6e 3d22 6578 7465 6e64 222c  action="extend",
-0004ec80: 0a20 2020 2020 2020 206e 6172 6773 3d22  .        nargs="
-0004ec90: 2b22 2c0a 2020 2020 2020 2020 7479 7065  +",.        type
-0004eca0: 3d73 7472 2c0a 2020 2020 2020 2020 6d65  =str,.        me
-0004ecb0: 7461 7661 723d 2246 494c 4522 2c0a 2020  tavar="FILE",.  
-0004ecc0: 2020 2020 2020 6865 6c70 3d22 5570 6c6f        help="Uplo
-0004ecd0: 6164 206f 6e65 206f 7220 6d75 6c74 6970  ad one or multip
-0004ece0: 6c65 2066 696c 6573 2074 6f20 7468 6520  le files to the 
-0004ecf0: 636f 6e74 656e 7420 7265 706f 7369 746f  content reposito
-0004ed00: 7279 2e20 220a 2020 2020 2020 2020 2244  ry. ".        "D
-0004ed10: 6574 6169 6c73 3a3a 2022 0a20 2020 2020  etails:: ".     
-0004ed20: 2020 2022 5468 6520 6669 6c65 7320 7769     "The files wi
-0004ed30: 6c6c 2062 6520 6769 7665 6e20 6120 4d61  ll be given a Ma
-0004ed40: 7472 6978 2055 5249 2061 6e64 2022 0a20  trix URI and ". 
-0004ed50: 2020 2020 2020 2022 7374 6f72 6564 206f         "stored o
-0004ed60: 6e20 7468 6520 7365 7276 6572 2e20 2d2d  n the server. --
-0004ed70: 7570 6c6f 6164 2061 6c6c 6f77 7320 7468  upload allows th
-0004ed80: 6520 6f70 7469 6f6e 616c 2061 7267 756d  e optional argum
-0004ed90: 656e 7420 220a 2020 2020 2020 2020 222d  ent ".        "-
-0004eda0: 2d70 6c61 696e 2074 6f20 736b 6970 2065  -plain to skip e
-0004edb0: 6e63 7279 7074 696f 6e20 666f 7220 7570  ncryption for up
-0004edc0: 6c6f 6164 2e20 220a 2020 2020 2020 2020  load. ".        
-0004edd0: 2253 6565 2074 6573 7473 2f74 6573 742d  "See tests/test-
-0004ede0: 7570 6c6f 6164 2e73 6820 666f 7220 616e  upload.sh for an
-0004edf0: 2065 7861 6d70 6c65 2e22 2c0a 2020 2020   example.",.    
-0004ee00: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
-0004ee10: 756d 656e 7428 0a20 2020 2020 2020 2022  ument(.        "
-0004ee20: 2d2d 646f 776e 6c6f 6164 222c 0a20 2020  --download",.   
-0004ee30: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-0004ee40: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
-0004ee50: 696f 6e3d 2265 7874 656e 6422 2c0a 2020  ion="extend",.  
-0004ee60: 2020 2020 2020 6e61 7267 733d 222b 222c        nargs="+",
-0004ee70: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
-0004ee80: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
-0004ee90: 6172 3d22 4d58 435f 5552 4922 2c0a 2020  ar="MXC_URI",.  
-0004eea0: 2020 2020 2020 6865 6c70 3d22 446f 776e        help="Down
-0004eeb0: 6c6f 6164 206f 6e65 206f 7220 6d75 6c74  load one or mult
-0004eec0: 6970 6c65 2066 696c 6573 2066 726f 6d20  iple files from 
-0004eed0: 7468 6520 636f 6e74 656e 7420 7265 706f  the content repo
-0004eee0: 7369 746f 7279 2e20 220a 2020 2020 2020  sitory. ".      
-0004eef0: 2020 2244 6574 6169 6c73 3a3a 2022 0a20    "Details:: ". 
-0004ef00: 2020 2020 2020 2022 596f 7520 6d75 7374         "You must
-0004ef10: 2070 726f 7669 6465 206f 6e65 206f 7220   provide one or 
-0004ef20: 6d75 6c74 6970 6c65 204d 6174 7269 7820  multiple Matrix 
-0004ef30: 5552 4973 2028 4d58 4373 2920 7768 6963  URIs (MXCs) whic
-0004ef40: 6820 6172 6520 220a 2020 2020 2020 2020  h are ".        
-0004ef50: 2273 7472 696e 6773 206c 696b 6520 220a  "strings like ".
-0004ef60: 2020 2020 2020 2020 2274 6869 7320 276d          "this 'm
-0004ef70: 7863 3a2f 2f65 7861 6d70 6c65 2e63 6f6d  xc://example.com
-0004ef80: 2f53 6f6d 6553 7472 616e 6765 5572 694b  /SomeStrangeUriK
-0004ef90: 6579 272e 2049 6620 666f 756e 6420 7468  ey'. If found th
-0004efa0: 6579 2077 696c 6c20 220a 2020 2020 2020  ey will ".      
-0004efb0: 2020 2262 6520 646f 776e 6c6f 6164 6564    "be downloaded
-0004efc0: 2c20 6465 6372 7970 7465 642c 2061 6e64  , decrypted, and
-0004efd0: 2073 746f 7265 6420 696e 206c 6f63 616c   stored in local
-0004efe0: 2066 696c 6573 2e20 220a 2020 2020 2020   files. ".      
-0004eff0: 2020 2249 6620 6669 6c65 206e 616d 6573    "If file names
-0004f000: 2061 7265 2073 7065 6369 6669 6564 2077   are specified w
-0004f010: 6974 6820 2d2d 6669 6c65 2d6e 616d 6520  ith --file-name 
-0004f020: 7468 6520 646f 776e 6c6f 6164 7320 220a  the downloads ".
-0004f030: 2020 2020 2020 2020 2277 696c 6c20 6265          "will be
-0004f040: 2073 6176 6564 2077 6974 6820 7468 6573   saved with thes
-0004f050: 6520 6669 6c65 206e 616d 6573 2e20 4966  e file names. If
-0004f060: 202d 2d66 696c 652d 6e61 6d65 2069 7320   --file-name is 
-0004f070: 6e6f 7420 220a 2020 2020 2020 2020 2273  not ".        "s
-0004f080: 7065 6369 6669 6564 2074 6865 206f 7269  pecified the ori
-0004f090: 6769 6e61 6c20 6669 6c65 206e 616d 6520  ginal file name 
-0004f0a0: 6672 6f6d 2074 6865 2075 706c 6f61 6420  from the upload 
-0004f0b0: 7769 6c6c 2062 6520 7573 6564 2e20 220a  will be used. ".
-0004f0c0: 2020 2020 2020 2020 2249 6620 6e65 6974          "If neit
-0004f0d0: 6865 7220 7370 6563 6966 6965 6420 6e6f  her specified no
-0004f0e0: 7220 6176 6169 6c61 626c 6520 6f6e 2073  r available on s
-0004f0f0: 6572 7665 722c 2074 6865 6e20 7468 6520  erver, then the 
-0004f100: 6669 6c65 2022 0a20 2020 2020 2020 2066  file ".        f
-0004f110: 226e 616d 6520 6f66 206c 6173 7420 7265  "name of last re
-0004f120: 736f 7274 2027 6d78 632d 3c6d 7863 2d69  sort 'mxc-<mxc-i
-0004f130: 643e 2720 7769 6c6c 2062 6520 7573 6564  d>' will be used
-0004f140: 2e20 220a 2020 2020 2020 2020 6622 4966  . ".        f"If
-0004f150: 2061 2066 696c 6520 6e61 6d65 2069 6e20   a file name in 
-0004f160: 2d2d 6669 6c65 2d6e 616d 6520 636f 6e74  --file-name cont
-0004f170: 6169 6e73 2074 6865 2070 6c61 6365 686f  ains the placeho
-0004f180: 6c64 6572 2022 0a20 2020 2020 2020 2066  lder ".        f
-0004f190: 227b 4d58 435f 4944 5f50 4c41 4345 484f  "{MXC_ID_PLACEHO
-0004f1a0: 4c44 4552 7d2c 2069 7420 7769 6c6c 2062  LDER}, it will b
-0004f1b0: 6520 7265 706c 6163 6564 2077 6974 6820  e replaced with 
-0004f1c0: 7468 6520 6d78 632d 6964 2e20 220a 2020  the mxc-id. ".  
-0004f1d0: 2020 2020 2020 2249 6620 6120 6669 6c65        "If a file
-0004f1e0: 206e 616d 6520 6973 2073 7065 6369 6669   name is specifi
-0004f1f0: 6564 2061 7320 656d 7074 7920 7374 7269  ed as empty stri
-0004f200: 6e67 2069 6e20 2d2d 6669 6c65 2d6e 616d  ng in --file-nam
-0004f210: 652c 2074 6865 6e20 220a 2020 2020 2020  e, then ".      
-0004f220: 2020 2261 6c73 6f20 7468 6520 6e61 6d65    "also the name
-0004f230: 2027 6d78 632d 3c6d 7863 2d69 643e 2720   'mxc-<mxc-id>' 
-0004f240: 7769 6c6c 2062 6520 7573 6564 2e20 220a  will be used. ".
-0004f250: 2020 2020 2020 2020 2242 7920 6465 6661          "By defa
-0004f260: 756c 742c 2074 6865 2075 706c 6f61 6420  ult, the upload 
-0004f270: 7761 7320 656e 6372 7970 7465 6420 736f  was encrypted so
-0004f280: 2061 2064 6563 7279 7074 696f 6e20 6469   a decryption di
-0004f290: 6374 696f 6e61 7279 2022 0a20 2020 2020  ctionary ".     
-0004f2a0: 2020 2022 6d75 7374 2062 6520 7072 6f76     "must be prov
-0004f2b0: 6964 6564 2074 6f20 6465 6372 7970 7420  ided to decrypt 
-0004f2c0: 7468 6520 6461 7461 2e20 5370 6563 6966  the data. Specif
-0004f2d0: 7920 6f6e 6520 6f72 206d 756c 7469 706c  y one or multipl
-0004f2e0: 6520 220a 2020 2020 2020 2020 2264 6563  e ".        "dec
-0004f2f0: 7279 7074 696f 6e20 6b65 7973 2022 0a20  ryption keys ". 
-0004f300: 2020 2020 2020 2022 7769 7468 202d 2d6b         "with --k
-0004f310: 6579 2d64 6963 742e 2049 6620 2d2d 6b65  ey-dict. If --ke
-0004f320: 792d 6469 6374 2069 7320 6e6f 7420 7365  y-dict is not se
-0004f330: 742c 206e 6f74 2064 6563 7279 7074 696f  t, not decryptio
-0004f340: 6e20 6973 2022 0a20 2020 2020 2020 2022  n is ".        "
-0004f350: 6174 7465 6d70 7465 643b 2061 6e64 2074  attempted; and t
-0004f360: 6865 2064 6174 6120 6d69 6768 7420 6265  he data might be
-0004f370: 2073 746f 7265 6420 696e 2065 6e63 7279   stored in encry
-0004f380: 7074 6564 2066 6173 6869 6f6e 2c20 220a  pted fashion, ".
-0004f390: 2020 2020 2020 2020 226f 7220 6d69 6768          "or migh
-0004f3a0: 7420 6265 2070 6c61 696e 2d74 6578 7420  t be plain-text 
-0004f3b0: 6966 2074 6865 202d 2d75 706c 6f61 6420  if the --upload 
-0004f3c0: 736b 6970 7065 6420 656e 6372 7970 7469  skipped encrypti
-0004f3d0: 6f6e 2077 6974 6820 220a 2020 2020 2020  on with ".      
-0004f3e0: 2020 222d 2d70 6c61 696e 2e20 220a 2020    "--plain. ".  
-0004f3f0: 2020 2020 2020 2253 6565 2074 6573 7473        "See tests
-0004f400: 2f74 6573 742d 7570 6c6f 6164 2e73 6820  /test-upload.sh 
-0004f410: 666f 7220 616e 2065 7861 6d70 6c65 2e22  for an example."
-0004f420: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
-0004f430: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
-0004f440: 2020 2020 2022 2d2d 6465 6c65 7465 2d6d       "--delete-m
-0004f450: 7863 222c 0a20 2020 2020 2020 2072 6571  xc",.        req
-0004f460: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-0004f470: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
-0004f480: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
-0004f490: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
-0004f4a0: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
-0004f4b0: 2020 206d 6574 6176 6172 3d22 4d58 435f     metavar="MXC_
-0004f4c0: 5552 4922 2c0a 2020 2020 2020 2020 6865  URI",.        he
-0004f4d0: 6c70 3d22 4465 6c65 7465 206f 6e65 206f  lp="Delete one o
-0004f4e0: 7220 6d75 6c74 6970 6c65 206f 626a 6563  r multiple objec
-0004f4f0: 7473 2066 726f 6d20 7468 6520 636f 6e74  ts from the cont
-0004f500: 656e 7420 7265 706f 7369 746f 7279 2e20  ent repository. 
-0004f510: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
-0004f520: 6c73 3a3a 2059 6f75 206d 7573 7420 7072  ls:: You must pr
-0004f530: 6f76 6964 6520 6f6e 6520 6f72 206d 756c  ovide one or mul
-0004f540: 7469 706c 6520 4d61 7472 6978 2055 5249  tiple Matrix URI
-0004f550: 7320 284d 5843 2920 220a 2020 2020 2020  s (MXC) ".      
-0004f560: 2020 2277 6869 6368 2061 7265 2073 7472    "which are str
-0004f570: 696e 6773 206c 696b 6520 220a 2020 2020  ings like ".    
-0004f580: 2020 2020 2274 6869 7320 276d 7863 3a2f      "this 'mxc:/
-0004f590: 2f65 7861 6d70 6c65 2e63 6f6d 2f53 6f6d  /example.com/Som
-0004f5a0: 6553 7472 616e 6765 5572 694b 6579 272e  eStrangeUriKey'.
-0004f5b0: 2041 6c74 6572 6e61 7469 7665 6c79 2c20   Alternatively, 
-0004f5c0: 796f 7520 220a 2020 2020 2020 2020 2263  you ".        "c
-0004f5d0: 616e 206a 7573 7420 7072 6f76 6964 6520  an just provide 
-0004f5e0: 7468 6520 4d58 4320 6964 2c20 692e 652e  the MXC id, i.e.
-0004f5f0: 2074 6865 2070 6172 7420 6166 7465 7220   the part after 
-0004f600: 7468 6520 6c61 7374 2073 6c61 7368 2e20  the last slash. 
-0004f610: 220a 2020 2020 2020 2020 2249 6620 666f  ".        "If fo
-0004f620: 756e 6420 7468 6579 2028 692e 652e 2074  und they (i.e. t
-0004f630: 6865 2066 696c 6573 2074 6865 7920 7265  he files they re
-0004f640: 7072 6573 656e 7429 2077 696c 6c20 220a  present) will ".
-0004f650: 2020 2020 2020 2020 2262 6520 6465 6c65          "be dele
-0004f660: 7465 6420 6672 6f6d 2074 6865 2073 6572  ted from the ser
-0004f670: 7665 7220 6461 7461 6261 7365 2e20 496e  ver database. In
-0004f680: 206f 7264 6572 2074 6f20 6465 6c65 7465   order to delete
-0004f690: 206f 626a 6563 7473 2022 0a20 2020 2020   objects ".     
-0004f6a0: 2020 2022 6f6e 6520 6d75 7374 2068 6176     "one must hav
-0004f6b0: 6520 7365 7276 6572 2061 646d 696e 2070  e server admin p
-0004f6c0: 6572 6d69 7373 696f 6e73 2e20 4861 7669  ermissions. Havi
-0004f6d0: 6e67 206f 6e6c 7920 726f 6f6d 2061 646d  ng only room adm
-0004f6e0: 696e 2022 0a20 2020 2020 2020 2022 7065  in ".        "pe
-0004f6f0: 726d 6973 7369 6f6e 7320 6973 206e 6f74  rmissions is not
-0004f700: 2073 7566 6669 6369 656e 7420 616e 6420   sufficient and 
-0004f710: 6974 2077 696c 6c20 6661 696c 2e20 220a  it will fail. ".
-0004f720: 2020 2020 2020 2020 2252 6561 6420 220a          "Read ".
-0004f730: 2020 2020 2020 2020 2268 7474 7073 3a2f          "https:/
-0004f740: 2f6d 6174 7269 782d 6f72 672e 6769 7468  /matrix-org.gith
-0004f750: 7562 2e69 6f2f 7379 6e61 7073 652f 220a  ub.io/synapse/".
-0004f760: 2020 2020 2020 2020 226c 6174 6573 742f          "latest/
-0004f770: 7573 6167 652f 6164 6d69 6e69 7374 7261  usage/administra
-0004f780: 7469 6f6e 2f61 646d 696e 5f61 7069 2f20  tion/admin_api/ 
-0004f790: 220a 2020 2020 2020 2020 2266 6f72 206c  ".        "for l
-0004f7a0: 6561 726e 696e 6720 686f 7720 746f 2073  earning how to s
-0004f7b0: 6574 2073 6572 7665 7220 6164 6d69 6e20  et server admin 
-0004f7c0: 7065 726d 6973 7369 6f6e 7320 6f6e 2074  permissions on t
-0004f7d0: 6865 2022 0a20 2020 2020 2020 2022 7365  he ".        "se
-0004f7e0: 7276 6572 2e20 416c 7465 726e 6174 6976  rver. Alternativ
-0004f7f0: 656c 792c 2061 6e64 206f 7074 696f 6e61  ely, and optiona
-0004f800: 6c6c 792c 206f 6e65 2063 616e 2073 7065  lly, one can spe
-0004f810: 6369 6679 2022 0a20 2020 2020 2020 2022  cify ".        "
-0004f820: 616e 2061 6363 6573 7320 746f 6b65 6e20  an access token 
-0004f830: 7768 6963 6820 6861 7320 7365 7276 6572  which has server
-0004f840: 2061 646d 696e 2070 6572 6d69 7373 696f   admin permissio
-0004f850: 6e73 2077 6974 6820 7468 6520 220a 2020  ns with the ".  
-0004f860: 2020 2020 2020 222d 2d61 6363 6573 732d        "--access-
-0004f870: 746f 6b65 6e20 6172 6775 6d65 6e74 2e20  token argument. 
-0004f880: 220a 2020 2020 2020 2020 2253 6565 2074  ".        "See t
-0004f890: 6573 7473 2f74 6573 742d 7570 6c6f 6164  ests/test-upload
-0004f8a0: 2e73 6820 666f 7220 616e 2065 7861 6d70  .sh for an examp
-0004f8b0: 6c65 2e22 2c0a 2020 2020 290a 2020 2020  le.",.    ).    
-0004f8c0: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-0004f8d0: 0a20 2020 2020 2020 2022 2d2d 6465 6c65  .        "--dele
-0004f8e0: 7465 2d6d 7863 2d62 6566 6f72 6522 2c0a  te-mxc-before",.
-0004f8f0: 2020 2020 2020 2020 7265 7175 6972 6564          required
-0004f900: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-0004f910: 6163 7469 6f6e 3d22 6578 7465 6e64 222c  action="extend",
-0004f920: 0a20 2020 2020 2020 206e 6172 6773 3d22  .        nargs="
-0004f930: 2b22 2c0a 2020 2020 2020 2020 7479 7065  +",.        type
-0004f940: 3d73 7472 2c0a 2020 2020 2020 2020 6d65  =str,.        me
-0004f950: 7461 7661 723d 2254 494d 4553 5441 4d50  tavar="TIMESTAMP
-0004f960: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-0004f970: 2244 656c 6574 6520 6f6c 6420 6f62 6a65  "Delete old obje
-0004f980: 6374 7320 6672 6f6d 2074 6865 2063 6f6e  cts from the con
-0004f990: 7465 6e74 2072 6570 6f73 6974 6f72 7922  tent repository"
-0004f9a0: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
-0004f9b0: 733a 3a20 4465 6c65 7465 2066 696c 6573  s:: Delete files
-0004f9c0: 2066 726f 6d20 7468 6520 636f 6e74 656e   from the conten
-0004f9d0: 7420 7265 706f 7369 746f 7279 2022 0a20  t repository ". 
-0004f9e0: 2020 2020 2020 2022 7468 6174 2061 7265         "that are
-0004f9f0: 206f 6c64 6572 2074 6861 6e20 6120 6769   older than a gi
-0004fa00: 7665 6e20 7469 6d65 7374 616d 702e 2022  ven timestamp. "
-0004fa10: 0a20 2020 2020 2020 2022 4974 2069 7320  .        "It is 
-0004fa20: 7468 6520 7469 6d65 7374 616d 7020 6f66  the timestamp of
-0004fa30: 206c 6173 7420 6163 6365 7373 2c20 6e6f   last access, no
-0004fa40: 7420 7468 6520 7469 6d65 7374 616d 7020  t the timestamp 
-0004fa50: 7768 656e 2022 0a20 2020 2020 2020 2022  when ".        "
-0004fa60: 7468 6520 6669 6c65 2077 6173 2063 7265  the file was cre
-0004fa70: 6174 6564 2e20 220a 2020 2020 2020 2020  ated. ".        
-0004fa80: 2241 6464 6974 696f 6e61 6c6c 7920 796f  "Additionally yo
-0004fa90: 7520 6361 6e20 7370 6563 6966 7920 6120  u can specify a 
-0004faa0: 7369 7a65 2069 6e20 6279 7465 7320 746f  size in bytes to
-0004fab0: 2069 6e64 6963 6174 6520 220a 2020 2020   indicate ".    
-0004fac0: 2020 2020 2274 6861 7420 6f6e 6c79 2066      "that only f
-0004fad0: 696c 6573 206f 6c64 6572 2074 6861 6e20  iles older than 
-0004fae0: 7469 6d65 7374 616d 7020 616e 6420 6c61  timestamp and la
-0004faf0: 7267 6572 2074 6861 6e20 7369 7a65 2022  rger than size "
-0004fb00: 0a20 2020 2020 2020 2022 7769 6c6c 2062  .        "will b
-0004fb10: 6520 6465 6c65 7465 642e 2022 0a20 2020  e deleted. ".   
-0004fb20: 2020 2020 2022 596f 7520 6d75 7374 2070       "You must p
-0004fb30: 726f 7669 6465 2061 2074 696d 6573 7461  rovide a timesta
-0004fb40: 6d70 206f 6620 7468 6520 666f 6c6c 6f77  mp of the follow
-0004fb50: 696e 6720 666f 726d 6174 3a20 220a 2020  ing format: ".  
-0004fb60: 2020 2020 2020 2227 4444 2e4d 4d2e 5959        "'DD.MM.YY
-0004fb70: 5959 2048 483a 4d4d 3a53 5327 206c 696b  YY HH:MM:SS' lik
-0004fb80: 6520 2732 302e 3031 2e32 3032 3220 3139  e '20.01.2022 19
-0004fb90: 3a33 383a 3432 2720 666f 7220 4a61 6e75  :38:42' for Janu
-0004fba0: 6172 7920 3230 2c20 220a 2020 2020 2020  ary 20, ".      
-0004fbb0: 2020 2232 3032 322c 2037 706d 2033 386d    "2022, 7pm 38m
-0004fbc0: 696e 2034 3273 6563 2e20 220a 2020 2020  in 42sec. ".    
-0004fbd0: 2020 2020 2246 696c 6573 2074 6861 7420      "Files that 
-0004fbe0: 6172 6520 7374 696c 6c20 7573 6564 2069  are still used i
-0004fbf0: 6e20 696d 6167 6520 6461 7461 2028 652e  n image data (e.
-0004fc00: 6720 7573 6572 2070 726f 6669 6c65 2c20  g user profile, 
-0004fc10: 220a 2020 2020 2020 2020 2272 6f6f 6d20  ".        "room 
-0004fc20: 6176 6174 6172 2920 7769 6c6c 206e 6f74  avatar) will not
-0004fc30: 2062 6520 6465 6c65 7465 6420 6672 6f6d   be deleted from
-0004fc40: 2074 6865 2073 6572 7665 7220 6461 7461   the server data
-0004fc50: 6261 7365 2e20 220a 2020 2020 2020 2020  base. ".        
-0004fc60: 2249 6e20 6f72 6465 7220 746f 2064 656c  "In order to del
-0004fc70: 6574 6520 6f62 6a65 6374 7320 220a 2020  ete objects ".  
-0004fc80: 2020 2020 2020 226f 6e65 206d 7573 7420        "one must 
-0004fc90: 6861 7665 2073 6572 7665 7220 6164 6d69  have server admi
-0004fca0: 6e20 7065 726d 6973 7369 6f6e 732e 2048  n permissions. H
-0004fcb0: 6176 696e 6720 6f6e 6c79 2072 6f6f 6d20  aving only room 
-0004fcc0: 6164 6d69 6e20 220a 2020 2020 2020 2020  admin ".        
-0004fcd0: 2270 6572 6d69 7373 696f 6e73 2069 7320  "permissions is 
-0004fce0: 6e6f 7420 7375 6666 6963 6965 6e74 2061  not sufficient a
-0004fcf0: 6e64 2069 7420 7769 6c6c 2066 6169 6c2e  nd it will fail.
-0004fd00: 2022 0a20 2020 2020 2020 2022 5265 6164   ".        "Read
-0004fd10: 2022 0a20 2020 2020 2020 2022 6874 7470   ".        "http
-0004fd20: 733a 2f2f 6d61 7472 6978 2d6f 7267 2e67  s://matrix-org.g
-0004fd30: 6974 6875 622e 696f 2f73 796e 6170 7365  ithub.io/synapse
-0004fd40: 2f22 0a20 2020 2020 2020 2022 6c61 7465  /".        "late
-0004fd50: 7374 2f75 7361 6765 2f61 646d 696e 6973  st/usage/adminis
-0004fd60: 7472 6174 696f 6e2f 6164 6d69 6e5f 6170  tration/admin_ap
-0004fd70: 692f 2022 0a20 2020 2020 2020 2022 666f  i/ ".        "fo
-0004fd80: 7220 6c65 6172 6e69 6e67 2068 6f77 2074  r learning how t
-0004fd90: 6f20 7365 7420 7365 7276 6572 2061 646d  o set server adm
-0004fda0: 696e 2070 6572 6d69 7373 696f 6e73 206f  in permissions o
-0004fdb0: 6e20 7468 6520 220a 2020 2020 2020 2020  n the ".        
-0004fdc0: 2273 6572 7665 722e 2041 6c74 6572 6e61  "server. Alterna
-0004fdd0: 7469 7665 6c79 2c20 616e 6420 6f70 7469  tively, and opti
-0004fde0: 6f6e 616c 6c79 2c20 6f6e 6520 6361 6e20  onally, one can 
-0004fdf0: 7370 6563 6966 7920 220a 2020 2020 2020  specify ".      
-0004fe00: 2020 2261 6e20 6163 6365 7373 2074 6f6b    "an access tok
-0004fe10: 656e 2077 6869 6368 2068 6173 2073 6572  en which has ser
-0004fe20: 7665 7220 6164 6d69 6e20 7065 726d 6973  ver admin permis
-0004fe30: 7369 6f6e 7320 7769 7468 2074 6865 2022  sions with the "
-0004fe40: 0a20 2020 2020 2020 2022 2d2d 6163 6365  .        "--acce
-0004fe50: 7373 2d74 6f6b 656e 2061 7267 756d 656e  ss-token argumen
-0004fe60: 742e 2022 0a20 2020 2020 2020 2022 5365  t. ".        "Se
-0004fe70: 6520 7465 7374 732f 7465 7374 2d75 706c  e tests/test-upl
-0004fe80: 6f61 642e 7368 2066 6f72 2061 6e20 6578  oad.sh for an ex
-0004fe90: 616d 706c 652e 222c 0a20 2020 2029 0a20  ample.",.    ). 
-0004fea0: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
-0004feb0: 6e74 280a 2020 2020 2020 2020 2320 6e6f  nt(.        # no
-0004fec0: 2073 696e 676c 6520 6368 6172 2066 6c61   single char fla
-0004fed0: 670a 2020 2020 2020 2020 222d 2d6a 6f69  g.        "--joi
-0004fee0: 6e65 642d 726f 6f6d 7322 2c0a 2020 2020  ned-rooms",.    
-0004fef0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-0004ff00: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
-0004ff10: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
-0004ff20: 0a20 2020 2020 2020 2068 656c 703d 2250  .        help="P
-0004ff30: 7269 6e74 2074 6865 206c 6973 7420 6f66  rint the list of
-0004ff40: 206a 6f69 6e65 6420 726f 6f6d 732e 2022   joined rooms. "
-0004ff50: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
-0004ff60: 733a 3a20 416c 6c20 726f 6f6d 7320 7468  s:: All rooms th
-0004ff70: 6174 2079 6f75 2061 7265 2061 2022 0a20  at you are a ". 
-0004ff80: 2020 2020 2020 2022 6d65 6d62 6572 206f         "member o
-0004ff90: 6620 7769 6c6c 2062 6520 7072 696e 7465  f will be printe
-0004ffa0: 642c 206f 6e65 2072 6f6f 6d20 7065 7220  d, one room per 
-0004ffb0: 6c69 6e65 2e22 2c0a 2020 2020 290a 2020  line.",.    ).  
-0004ffc0: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
-0004ffd0: 7428 0a20 2020 2020 2020 2023 206e 6f20  t(.        # no 
-0004ffe0: 7369 6e67 6c65 2063 6861 7220 666c 6167  single char flag
-0004fff0: 0a20 2020 2020 2020 2022 2d2d 6a6f 696e  .        "--join
-00050000: 6564 2d6d 656d 6265 7273 222c 0a20 2020  ed-members",.   
-00050010: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-00050020: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
-00050030: 696f 6e3d 2265 7874 656e 6422 2c0a 2020  ion="extend",.  
-00050040: 2020 2020 2020 6e61 7267 733d 222b 222c        nargs="+",
-00050050: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
-00050060: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
-00050070: 6172 3d22 524f 4f4d 222c 0a20 2020 2020  ar="ROOM",.     
-00050080: 2020 2068 656c 703d 2250 7269 6e74 2074     help="Print t
-00050090: 6865 206c 6973 7420 6f66 206a 6f69 6e65  he list of joine
-000500a0: 6420 6d65 6d62 6572 7320 666f 7220 6f6e  d members for on
-000500b0: 6520 6f72 206d 756c 7469 706c 6520 726f  e or multiple ro
-000500c0: 6f6d 732e 2022 0a20 2020 2020 2020 2022  oms. ".        "
-000500d0: 4465 7461 696c 733a 3a20 4966 2079 6f75  Details:: If you
-000500e0: 2077 616e 7420 746f 2070 7269 6e74 2074   want to print t
-000500f0: 6865 206a 6f69 6e65 6420 6d65 6d62 6572  he joined member
-00050100: 7320 6f66 2061 6c6c 2072 6f6f 6d73 2074  s of all rooms t
-00050110: 6861 7420 220a 2020 2020 2020 2020 2279  hat ".        "y
-00050120: 6f75 2061 7265 206d 656d 6265 7220 6f66  ou are member of
-00050130: 2c20 7468 656e 2075 7365 2074 6865 2073  , then use the s
-00050140: 7065 6369 616c 2063 6861 7261 6374 6572  pecial character
-00050150: 2027 2a27 2e22 2c0a 2020 2020 290a 2020   '*'.",.    ).  
-00050160: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
-00050170: 7428 0a20 2020 2020 2020 2023 206e 6f20  t(.        # no 
-00050180: 7369 6e67 6c65 2063 6861 7220 666c 6167  single char flag
-00050190: 0a20 2020 2020 2020 2022 2d2d 6a6f 696e  .        "--join
-000501a0: 6564 2d64 6d2d 726f 6f6d 7322 2c0a 2020  ed-dm-rooms",.  
-000501b0: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-000501c0: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-000501d0: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
-000501e0: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
-000501f0: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-00050200: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
-00050210: 7661 723d 2255 5345 5222 2c0a 2020 2020  var="USER",.    
-00050220: 2020 2020 6865 6c70 3d22 5072 696e 7420      help="Print 
-00050230: 7468 6520 6c69 7374 206f 6620 6a6f 696e  the list of join
-00050240: 6564 2044 4d20 726f 6f6d 7320 666f 7220  ed DM rooms for 
-00050250: 6f6e 6520 6f72 206d 756c 7469 706c 6520  one or multiple 
-00050260: 7573 6572 732e 2022 0a20 2020 2020 2020  users. ".       
-00050270: 2022 4465 7461 696c 733a 3a20 466f 7220   "Details:: For 
-00050280: 6561 6368 2075 7365 7220 7370 6563 6966  each user specif
-00050290: 6965 642c 2069 7420 7072 696e 7473 2061  ied, it prints a
-000502a0: 6c6c 2044 4d20 726f 6f6d 7320 7468 6174  ll DM rooms that
-000502b0: 2079 6f75 2022 0a20 2020 2020 2020 2022   you ".        "
-000502c0: 7368 6172 6520 7769 7468 2074 6865 2073  share with the s
-000502d0: 7065 6369 6669 6564 2075 7365 722e 2054  pecified user. T
-000502e0: 6865 7265 206d 6967 6874 2062 6520 302c  here might be 0,
-000502f0: 2031 2c20 6f72 206d 756c 7469 706c 6520   1, or multiple 
-00050300: 220a 2020 2020 2020 2020 2244 4d20 726f  ".        "DM ro
-00050310: 6f6d 7320 666f 7220 6120 6769 7665 6e20  oms for a given 
-00050320: 7573 6572 2e20 220a 2020 2020 2020 2020  user. ".        
-00050330: 2253 686f 7274 2075 7365 7220 6e61 6d65  "Short user name
-00050340: 7320 6c69 6b65 2027 6a6f 686e 2720 6361  s like 'john' ca
-00050350: 6e20 6265 2061 6c73 6f20 6265 2067 6976  n be also be giv
-00050360: 656e 2e20 220a 2020 2020 2020 2020 2249  en. ".        "I
-00050370: 6620 796f 7520 7761 6e74 2074 6f20 7072  f you want to pr
-00050380: 696e 7420 616c 6c20 444d 2072 6f6f 6d73  int all DM rooms
-00050390: 2074 6861 7420 220a 2020 2020 2020 2020   that ".        
-000503a0: 2279 6f75 2061 7265 206d 656d 6265 7220  "you are member 
-000503b0: 6f66 2c20 7468 656e 2075 7365 2074 6865  of, then use the
-000503c0: 2073 7065 6369 616c 2063 6861 7261 6374   special charact
-000503d0: 6572 2027 2a27 2e20 220a 2020 2020 2020  er '*'. ".      
-000503e0: 2020 2246 6f72 2065 6163 6820 444d 2072    "For each DM r
-000503f0: 6f6f 6d20 666f 756e 6420 6120 7369 6e67  oom found a sing
-00050400: 6c65 206c 696e 6520 6f66 206f 7574 7075  le line of outpu
-00050410: 7420 6973 2070 7269 6e74 6564 2e20 222c  t is printed. ",
-00050420: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-00050430: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-00050440: 2020 2020 222d 2d6d 7863 2d74 6f2d 6874      "--mxc-to-ht
-00050450: 7470 222c 0a20 2020 2020 2020 2072 6571  tp",.        req
-00050460: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-00050470: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
-00050480: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
-00050490: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
-000504a0: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
-000504b0: 2020 206d 6574 6176 6172 3d22 4d58 435f     metavar="MXC_
-000504c0: 5552 4922 2c0a 2020 2020 2020 2020 6865  URI",.        he
-000504d0: 6c70 3d22 436f 6e76 6572 7420 4d58 4320  lp="Convert MXC 
-000504e0: 5552 4973 2074 6f20 4854 5450 2055 524c  URIs to HTTP URL
-000504f0: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
-00050500: 7461 696c 733a 3a20 436f 6e76 6572 7420  tails:: Convert 
-00050510: 6f6e 6520 6f72 206d 6f72 6520 6d61 7472  one or more matr
-00050520: 6978 2063 6f6e 7465 6e74 2055 5249 7320  ix content URIs 
-00050530: 746f 2074 6865 2022 0a20 2020 2020 2020  to the ".       
-00050540: 2022 636f 7272 6573 706f 6e64 696e 6720   "corresponding 
-00050550: 4854 5450 2055 524c 732e 2054 6865 204d  HTTP URLs. The M
-00050560: 5843 2055 5249 7320 220a 2020 2020 2020  XC URIs ".      
-00050570: 2020 2274 6f20 7072 6f76 6964 6520 6c6f    "to provide lo
-00050580: 6f6b 2073 6f6d 6574 6869 6e67 206c 696b  ok something lik
-00050590: 6520 7468 6973 2022 0a20 2020 2020 2020  e this ".       
-000505a0: 2022 276d 7863 3a2f 2f65 7861 6d70 6c65   "'mxc://example
-000505b0: 2e63 6f6d 2f53 6f6d 6553 7472 616e 6765  .com/SomeStrange
-000505c0: 5572 694b 6579 272e 2022 0a20 2020 2020  UriKey'. ".     
-000505d0: 2020 2022 5365 6520 7465 7374 732f 7465     "See tests/te
-000505e0: 7374 2d75 706c 6f61 642e 7368 2066 6f72  st-upload.sh for
-000505f0: 2061 6e20 6578 616d 706c 652e 222c 0a20   an example.",. 
-00050600: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
-00050610: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-00050620: 2020 2320 6e6f 2073 696e 676c 6520 6368    # no single ch
-00050630: 6172 2066 6c61 670a 2020 2020 2020 2020  ar flag.        
-00050640: 222d 2d64 6576 6963 6573 222c 0a20 2020  "--devices",.   
-00050650: 2020 2020 2022 2d2d 6765 742d 6465 7669       "--get-devi
-00050660: 6365 7322 2c20 2023 2061 6c69 6173 2c20  ces",  # alias, 
-00050670: 6361 7573 6520 2d2d 6465 7669 6365 6420  cause --deviced 
-00050680: 6973 2076 6572 7920 7369 6d69 6c61 7220  is very similar 
-00050690: 746f 202d 2d64 6576 6963 650a 2020 2020  to --device.    
-000506a0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-000506b0: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
-000506c0: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
-000506d0: 0a20 2020 2020 2020 2068 656c 703d 2250  .        help="P
-000506e0: 7269 6e74 2074 6865 206c 6973 7420 6f66  rint the list of
-000506f0: 2064 6576 6963 6573 2e20 220a 2020 2020   devices. ".    
-00050700: 2020 2020 2244 6574 6169 6c73 3a3a 2041      "Details:: A
-00050710: 6c6c 2064 6576 6963 6520 6f66 2074 6869  ll device of thi
-00050720: 7320 220a 2020 2020 2020 2020 2261 6363  s ".        "acc
-00050730: 6f75 6e74 2077 696c 6c20 6265 2070 7269  ount will be pri
-00050740: 6e74 6564 2c20 6f6e 6520 6465 7669 6365  nted, one device
-00050750: 2070 6572 206c 696e 652e 222c 0a20 2020   per line.",.   
-00050760: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-00050770: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-00050780: 2320 6e6f 2073 696e 676c 6520 6368 6172  # no single char
-00050790: 2066 6c61 670a 2020 2020 2020 2020 222d   flag.        "-
-000507a0: 2d64 6973 636f 7665 7279 2d69 6e66 6f22  -discovery-info"
-000507b0: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
-000507c0: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
-000507d0: 2020 6163 7469 6f6e 3d22 7374 6f72 655f    action="store_
-000507e0: 7472 7565 222c 0a20 2020 2020 2020 2068  true",.        h
-000507f0: 656c 703d 2250 7269 6e74 2064 6973 636f  elp="Print disco
-00050800: 7665 7279 2069 6e66 6f72 6d61 7469 6f6e  very information
-00050810: 2061 626f 7574 2063 7572 7265 6e74 2068   about current h
-00050820: 6f6d 6573 6572 7665 722e 2022 0a20 2020  omeserver. ".   
-00050830: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
-00050840: 4e6f 7465 2074 6861 7420 6e6f 7420 616c  Note that not al
-00050850: 6c20 686f 6d65 7365 7276 6572 7320 7375  l homeservers su
-00050860: 7070 6f72 7420 6469 7363 6f76 6572 7920  pport discovery 
-00050870: 616e 6420 616e 2022 0a20 2020 2020 2020  and an ".       
-00050880: 2022 6572 726f 7220 6d69 6768 7420 6265   "error might be
-00050890: 2072 6570 6f72 7465 642e 222c 0a20 2020   reported.",.   
-000508a0: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-000508b0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-000508c0: 2320 6e6f 2073 696e 676c 6520 6368 6172  # no single char
-000508d0: 2066 6c61 670a 2020 2020 2020 2020 222d   flag.        "-
-000508e0: 2d6c 6f67 696e 2d69 6e66 6f22 2c0a 2020  -login-info",.  
-000508f0: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-00050900: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-00050910: 7469 6f6e 3d22 7374 6f72 655f 7472 7565  tion="store_true
-00050920: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-00050930: 2250 7269 6e74 206c 6f67 696e 206d 6574  "Print login met
-00050940: 686f 6473 2073 7570 706f 7274 6564 2062  hods supported b
-00050950: 7920 7468 6520 686f 6d65 7365 7276 6572  y the homeserver
-00050960: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-00050970: 6169 6c73 3a3a 2049 7420 7072 696e 7473  ails:: It prints
-00050980: 206f 6e65 206c 6f67 696e 206d 6574 686f   one login metho
-00050990: 6420 7065 7220 6c69 6e65 2e22 2c0a 2020  d per line.",.  
-000509a0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
-000509b0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-000509c0: 2023 206e 6f20 7369 6e67 6c65 2063 6861   # no single cha
-000509d0: 7220 666c 6167 0a20 2020 2020 2020 2022  r flag.        "
-000509e0: 2d2d 636f 6e74 656e 742d 7265 706f 7369  --content-reposi
-000509f0: 746f 7279 2d63 6f6e 6669 6722 2c0a 2020  tory-config",.  
-00050a00: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-00050a10: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-00050a20: 7469 6f6e 3d22 7374 6f72 655f 7472 7565  tion="store_true
-00050a30: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-00050a40: 2250 7269 6e74 2074 6865 2063 6f6e 7465  "Print the conte
-00050a50: 6e74 2072 6570 6f73 6974 6f72 7920 636f  nt repository co
-00050a60: 6e66 6967 7572 6174 696f 6e2e 2022 0a20  nfiguration. ". 
-00050a70: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-00050a80: 3a20 5468 6973 2063 7572 7265 6e74 6c79  : This currently
-00050a90: 206a 7573 7420 7072 696e 7473 2022 0a20   just prints ". 
-00050aa0: 2020 2020 2020 2022 7468 6520 7570 6c6f         "the uplo
-00050ab0: 6164 2073 697a 6520 6c69 6d69 7420 696e  ad size limit in
-00050ac0: 2062 7974 6573 2e22 2c0a 2020 2020 290a   bytes.",.    ).
-00050ad0: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
-00050ae0: 656e 7428 0a20 2020 2020 2020 2023 206e  ent(.        # n
-00050af0: 6f20 7369 6e67 6c65 2063 6861 7220 666c  o single char fl
-00050b00: 6167 0a20 2020 2020 2020 2022 2d2d 7265  ag.        "--re
-00050b10: 7374 222c 0a20 2020 2020 2020 2072 6571  st",.        req
-00050b20: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-00050b30: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
-00050b40: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
-00050b50: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
-00050b60: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
-00050b70: 2020 206d 6574 6176 6172 3d22 5245 5354     metavar="REST
-00050b80: 5f4d 4554 484f 4420 4441 5441 2055 524c  _METHOD DATA URL
-00050b90: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-00050ba0: 2255 7365 2074 6865 204d 6174 7269 7820  "Use the Matrix 
-00050bb0: 436c 6965 6e74 2052 4553 5420 4150 492e  Client REST API.
-00050bc0: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
-00050bd0: 696c 733a 3a20 4d61 7472 6978 2068 6173  ils:: Matrix has
-00050be0: 2073 6576 6572 616c 2065 7874 656e 7369   several extensi
-00050bf0: 7665 2022 0a20 2020 2020 2020 2022 5245  ve ".        "RE
-00050c00: 5354 2041 5049 732e 2057 6974 6820 7468  ST APIs. With th
-00050c10: 6520 2d2d 7265 7374 2061 7267 756d 656e  e --rest argumen
-00050c20: 7420 796f 7520 6361 6e20 696e 766f 6b65  t you can invoke
-00050c30: 2061 204d 6174 7269 7820 5245 5354 2022   a Matrix REST "
-00050c40: 0a20 2020 2020 2020 2022 4150 4920 6361  .        "API ca
-00050c50: 6c6c 2e20 5468 6973 2061 6c6c 6f77 7320  ll. This allows 
-00050c60: 7468 6520 7573 6572 2074 6f20 646f 2070  the user to do p
-00050c70: 7265 7474 7920 6d75 6368 2061 6e79 7468  retty much anyth
-00050c80: 696e 672c 2061 7420 7468 6520 220a 2020  ing, at the ".  
-00050c90: 2020 2020 2020 2270 7269 6365 206f 6620        "price of 
-00050ca0: 6e6f 7420 6265 696e 6720 7665 7279 2063  not being very c
-00050cb0: 6f6e 7665 6e69 656e 742e 2054 6865 2041  onvenient. The A
-00050cc0: 5049 7320 6172 6520 6465 7363 7269 6265  PIs are describe
-00050cd0: 6420 696e 2022 0a20 2020 2020 2020 2022  d in ".        "
-00050ce0: 6874 7470 733a 2f2f 6d61 7472 6978 2e6f  https://matrix.o
-00050cf0: 7267 2f64 6f63 732f 6170 692f 2c20 220a  rg/docs/api/, ".
-00050d00: 2020 2020 2020 2020 2268 7474 7073 3a2f          "https:/
-00050d10: 2f73 7065 632e 6d61 7472 6978 2e6f 7267  /spec.matrix.org
-00050d20: 2f6c 6174 6573 742f 636c 6965 6e74 2d73  /latest/client-s
-00050d30: 6572 7665 722d 6170 692f 2c20 220a 2020  erver-api/, ".  
-00050d40: 2020 2020 2020 2268 7474 7073 3a2f 2f6d        "https://m
-00050d50: 6174 7269 782d 6f72 672e 6769 7468 7562  atrix-org.github
-00050d60: 2e69 6f2f 7379 6e61 7073 652f 6c61 7465  .io/synapse/late
-00050d70: 7374 2f75 7361 6765 2f61 646d 696e 6973  st/usage/adminis
-00050d80: 7472 6174 696f 6e2f 220a 2020 2020 2020  tration/".      
-00050d90: 2020 2261 646d 696e 5f61 7069 2f2c 2065    "admin_api/, e
-00050da0: 7463 2e20 220a 2020 2020 2020 2020 2245  tc. ".        "E
-00050db0: 6163 6820 5245 5354 2063 616c 6c20 7265  ach REST call re
-00050dc0: 7175 6972 6573 2065 7861 6374 6c79 2033  quires exactly 3
-00050dd0: 2061 7267 756d 656e 7473 2e20 220a 2020   arguments. ".  
-00050de0: 2020 2020 2020 2253 6f2c 2074 6865 2074        "So, the t
-00050df0: 6f74 616c 206e 756d 6265 7220 6f66 2061  otal number of a
-00050e00: 7267 756d 656e 7473 2075 7365 6420 7769  rguments used wi
-00050e10: 7468 202d 2d72 6573 7420 6d75 7374 2062  th --rest must b
-00050e20: 6520 6120 220a 2020 2020 2020 2020 226d  e a ".        "m
-00050e30: 756c 7469 706c 6520 6f66 2033 2e20 5468  ultiple of 3. Th
-00050e40: 6520 6172 6775 6d65 6e74 2074 7269 706c  e argument tripl
-00050e50: 6573 2061 7265 3a20 220a 2020 2020 2020  es are: ".      
-00050e60: 2020 2228 6129 2074 6865 206d 6574 686f    "(a) the metho
-00050e70: 642c 2061 2073 7472 696e 6720 6f66 2047  d, a string of G
-00050e80: 4554 2c20 504f 5354 2c20 5055 542c 2044  ET, POST, PUT, D
-00050e90: 454c 4554 452c 206f 7220 4f50 5449 4f4e  ELETE, or OPTION
-00050ea0: 532e 2022 0a20 2020 2020 2020 2022 2862  S. ".        "(b
-00050eb0: 2920 6120 7374 7269 6e67 2063 6f6e 7461  ) a string conta
-00050ec0: 696e 696e 6720 7468 6520 6461 7461 2028  ining the data (
-00050ed0: 6966 2061 6e79 2920 696e 204a 534f 4e20  if any) in JSON 
-00050ee0: 666f 726d 6174 2e20 220a 2020 2020 2020  format. ".      
-00050ef0: 2020 2228 6329 2061 2073 7472 696e 6720    "(c) a string 
-00050f00: 636f 6e74 6169 6e69 6e67 2074 6865 2055  containing the U
-00050f10: 524c 2e20 416c 6c20 7374 7269 6e67 7320  RL. All strings 
-00050f20: 6d75 7374 2062 6520 5554 462d 382e 2022  must be UTF-8. "
-00050f30: 0a20 2020 2020 2020 2022 5468 6572 6520  .        "There 
-00050f40: 6172 6520 6120 6665 7720 706c 6163 6568  are a few placeh
-00050f50: 6f6c 6465 7273 2e20 5468 6579 2061 7265  olders. They are
-00050f60: 3a20 220a 2020 2020 2020 2020 225f 5f68  : ".        "__h
-00050f70: 6f6d 6573 6572 7665 725f 5f20 286c 696b  omeserver__ (lik
-00050f80: 6520 6874 7470 733a 2f2f 6d61 7472 6978  e https://matrix
-00050f90: 2e65 7861 6d70 6c65 2e6f 7267 292c 2022  .example.org), "
-00050fa0: 0a20 2020 2020 2020 2022 5f5f 686f 7374  .        "__host
-00050fb0: 6e61 6d65 5f5f 2028 6c69 6b65 206d 6174  name__ (like mat
-00050fc0: 7269 782e 6578 616d 706c 652e 6f72 6729  rix.example.org)
-00050fd0: 2c20 220a 2020 2020 2020 2020 225f 5f61  , ".        "__a
-00050fe0: 6363 6573 735f 746f 6b65 6e5f 5f2c 205f  ccess_token__, _
-00050ff0: 5f75 7365 725f 6964 5f5f 2028 6c69 6b65  _user_id__ (like
-00051000: 2040 6d63 3a6d 6174 7269 782e 6578 616d   @mc:matrix.exam
-00051010: 706c 652e 636f 6d29 2c20 220a 2020 2020  ple.com), ".    
-00051020: 2020 2020 225f 5f64 6576 6963 655f 6964      "__device_id
-00051030: 5f5f 2c20 616e 6420 5f5f 726f 6f6d 5f69  __, and __room_i
-00051040: 645f 5f2e 2049 6620 6120 706c 6163 6568  d__. If a placeh
-00051050: 6f6c 6465 7220 6973 2066 6f75 6e64 2069  older is found i
-00051060: 7420 6973 2022 0a20 2020 2020 2020 2022  t is ".        "
-00051070: 7265 706c 6163 6564 2077 6974 6820 7468  replaced with th
-00051080: 6520 7661 6c75 6520 6672 6f6d 2074 6865  e value from the
-00051090: 206c 6f63 616c 2063 7265 6465 6e74 6961   local credentia
-000510a0: 6c73 2066 696c 652e 2022 0a20 2020 2020  ls file. ".     
-000510b0: 2020 2022 416e 2065 7861 6d70 6c65 2077     "An example w
-000510c0: 6f75 6c64 2062 653a 2022 0a20 2020 2020  ould be: ".     
-000510d0: 2020 2022 2d2d 7265 7374 2027 4745 5427     "--rest 'GET'
-000510e0: 2027 2720 275f 5f68 6f6d 6573 6572 7665   '' '__homeserve
-000510f0: 725f 5f2f 5f6d 6174 7269 782f 636c 6965  r__/_matrix/clie
-00051100: 6e74 2f76 6572 7369 6f6e 7327 2e20 220a  nt/versions'. ".
-00051110: 2020 2020 2020 2020 2249 6620 7468 6572          "If ther
-00051120: 6520 6973 206e 6f20 6461 7461 2c20 692e  e is no data, i.
-00051130: 652e 2064 6174 6120 2862 2920 6973 2065  e. data (b) is e
-00051140: 6d70 7479 2c20 7468 656e 2075 7365 2027  mpty, then use '
-00051150: 2720 666f 7220 6974 2e20 220a 2020 2020  ' for it. ".    
-00051160: 2020 2020 224f 7074 696f 6e61 6c6c 792c      "Optionally,
-00051170: 202d 2d61 6363 6573 732d 746f 6b65 6e20   --access-token 
-00051180: 6361 6e20 6265 2075 7365 6420 746f 206f  can be used to o
-00051190: 7665 7277 7269 7465 2074 6865 2022 0a20  verwrite the ". 
-000511a0: 2020 2020 2020 2022 6163 6365 7373 2074         "access t
-000511b0: 6f6b 656e 2066 726f 6d20 6372 6564 656e  oken from creden
-000511c0: 7469 616c 7320 2869 6620 6e65 6564 6564  tials (if needed
-000511d0: 292e 2022 0a20 2020 2020 2020 2022 5365  ). ".        "Se
-000511e0: 6520 7465 7374 732f 7465 7374 2d72 6573  e tests/test-res
-000511f0: 742e 7368 2066 6f72 2061 6e20 6578 616d  t.sh for an exam
-00051200: 706c 652e 222c 0a20 2020 2029 0a20 2020  ple.",.    ).   
-00051210: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-00051220: 280a 2020 2020 2020 2020 222d 2d73 6574  (.        "--set
-00051230: 2d61 7661 7461 7222 2c0a 2020 2020 2020  -avatar",.      
-00051240: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-00051250: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-00051260: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
-00051270: 7661 723d 2241 5641 5441 525f 4d58 435f  var="AVATAR_MXC_
-00051280: 5552 4922 2c0a 2020 2020 2020 2020 2320  URI",.        # 
-00051290: 6465 6661 756c 7473 2074 6f20 4e6f 6e65  defaults to None
-000512a0: 2069 6620 6e6f 7420 7573 6564 2c20 6973   if not used, is
-000512b0: 2073 7472 2069 6620 7573 6564 0a20 2020   str if used.   
-000512c0: 2020 2020 2068 656c 703d 2253 6574 2079       help="Set y
-000512d0: 6f75 7220 6176 6174 6172 2e20 220a 2020  our avatar. ".  
-000512e0: 2020 2020 2020 6622 4465 7461 696c 733a        f"Details:
-000512f0: 3a20 5365 7420 7468 6520 6176 6174 6172  : Set the avatar
-00051300: 204d 5843 2072 6573 6f75 7263 6520 7573   MXC resource us
-00051310: 6564 2062 7920 7b50 524f 475f 5749 5448  ed by {PROG_WITH
-00051320: 4f55 545f 4558 547d 2e20 220a 2020 2020  OUT_EXT}. ".    
-00051330: 2020 2020 2250 726f 7669 6465 206f 6e65      "Provide one
-00051340: 204d 5843 2055 5249 2074 6861 7420 6c6f   MXC URI that lo
-00051350: 6f6b 7320 6c69 6b65 2074 6869 7320 220a  oks like this ".
-00051360: 2020 2020 2020 2020 2227 6d78 633a 2f2f          "'mxc://
-00051370: 6578 616d 706c 652e 636f 6d2f 536f 6d65  example.com/Some
-00051380: 5374 7261 6e67 6555 7269 4b65 7927 2e22  StrangeUriKey'."
-00051390: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
-000513a0: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
-000513b0: 2020 2020 2022 2d2d 6765 742d 6176 6174       "--get-avat
-000513c0: 6172 222c 0a20 2020 2020 2020 2072 6571  ar",.        req
-000513d0: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
-000513e0: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
-000513f0: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
-00051400: 7267 733d 222a 222c 2020 2320 4e6f 6e65  rgs="*",  # None
-00051410: 2069 6620 6e6f 7420 7573 6564 2c20 5b5d   if not used, []
-00051420: 2069 7320 7573 6564 2077 6974 686f 7574   is used without
-00051430: 2065 7874 7261 2061 7267 730a 2020 2020   extra args.    
-00051440: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
-00051450: 2020 2020 2020 6d65 7461 7661 723d 2255        metavar="U
-00051460: 5345 5222 2c0a 2020 2020 2020 2020 6865  SER",.        he
-00051470: 6c70 3d22 4765 7420 616e 2061 7661 7461  lp="Get an avata
-00051480: 722e 2022 0a20 2020 2020 2020 2066 2244  r. ".        f"D
-00051490: 6574 6169 6c73 3a3a 2047 6574 2074 6865  etails:: Get the
-000514a0: 2061 7661 7461 7220 4d58 4320 7265 736f   avatar MXC reso
-000514b0: 7572 6365 2075 7365 6420 6279 207b 5052  urce used by {PR
-000514c0: 4f47 5f57 4954 484f 5554 5f45 5854 7d2c  OG_WITHOUT_EXT},
-000514d0: 2022 0a20 2020 2020 2020 2022 6f72 206f   ".        "or o
-000514e0: 6e65 206f 7220 6d75 6c74 6970 6c65 206f  ne or multiple o
-000514f0: 7468 6572 2075 7365 7273 2e20 5370 6563  ther users. Spec
-00051500: 6966 7920 7a65 726f 206f 7220 6d6f 7265  ify zero or more
-00051510: 2075 7365 7220 6964 732e 2022 0a20 2020   user ids. ".   
-00051520: 2020 2020 2066 2249 6620 6e6f 2075 7365       f"If no use
-00051530: 7220 6964 2069 7320 7370 6563 6966 6965  r id is specifie
-00051540: 642c 2074 6865 2061 7661 7461 7220 6f66  d, the avatar of
-00051550: 207b 5052 4f47 5f57 4954 484f 5554 5f45   {PROG_WITHOUT_E
-00051560: 5854 7d20 7769 6c6c 2022 0a20 2020 2020  XT} will ".     
-00051570: 2020 2022 6265 2066 6574 6368 6564 2e20     "be fetched. 
-00051580: 4966 206f 6e65 206f 7220 6d6f 7265 2075  If one or more u
-00051590: 7365 7220 6964 7320 6172 6520 6769 7665  ser ids are give
-000515a0: 6e2c 2074 6865 2061 7661 7461 7273 206f  n, the avatars o
-000515b0: 6620 220a 2020 2020 2020 2020 2274 6865  f ".        "the
-000515c0: 7365 2075 7365 7273 2077 696c 6c20 6265  se users will be
-000515d0: 2066 6574 6368 6564 2e20 4173 2072 6573   fetched. As res
-000515e0: 706f 6e73 6520 626f 7468 204d 5843 2055  ponse both MXC U
-000515f0: 5249 2061 7320 7765 6c6c 2061 7320 5552  RI as well as UR
-00051600: 4c20 220a 2020 2020 2020 2020 2277 696c  L ".        "wil
-00051610: 6c20 6265 2070 7269 6e74 6564 2e22 2c0a  l be printed.",.
-00051620: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
-00051630: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-00051640: 2020 2022 2d2d 6765 742d 7072 6f66 696c     "--get-profil
-00051650: 6522 2c0a 2020 2020 2020 2020 7265 7175  e",.        requ
-00051660: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
-00051670: 2020 2020 6163 7469 6f6e 3d22 6578 7465      action="exte
-00051680: 6e64 222c 0a20 2020 2020 2020 206e 6172  nd",.        nar
-00051690: 6773 3d22 2a22 2c20 2023 204e 6f6e 6520  gs="*",  # None 
-000516a0: 6966 206e 6f74 2075 7365 642c 205b 5d20  if not used, [] 
-000516b0: 6973 2075 7365 6420 7769 7468 6f75 7420  is used without 
-000516c0: 6578 7472 6120 6172 6773 0a20 2020 2020  extra args.     
-000516d0: 2020 2074 7970 653d 7374 722c 0a20 2020     type=str,.   
-000516e0: 2020 2020 206d 6574 6176 6172 3d22 5553       metavar="US
-000516f0: 4552 222c 0a20 2020 2020 2020 2068 656c  ER",.        hel
-00051700: 703d 2247 6574 2061 2075 7365 7220 7072  p="Get a user pr
-00051710: 6f66 696c 652e 2022 0a20 2020 2020 2020  ofile. ".       
-00051720: 2066 2244 6574 6169 6c73 3a3a 2047 6574   f"Details:: Get
-00051730: 2074 6865 2075 7365 7220 7072 6f66 696c   the user profil
-00051740: 6520 7573 6564 2062 7920 7b50 524f 475f  e used by {PROG_
-00051750: 5749 5448 4f55 545f 4558 547d 2c20 6f72  WITHOUT_EXT}, or
-00051760: 2022 0a20 2020 2020 2020 2022 6f6e 6520   ".        "one 
-00051770: 6f72 206d 756c 7469 706c 6520 6f74 6865  or multiple othe
-00051780: 7220 7573 6572 732e 2053 7065 6369 6679  r users. Specify
-00051790: 207a 6572 6f20 6f72 206d 6f72 6520 7573   zero or more us
-000517a0: 6572 2069 6473 2e20 220a 2020 2020 2020  er ids. ".      
-000517b0: 2020 6622 4966 206e 6f20 7573 6572 2069    f"If no user i
-000517c0: 6420 6973 2073 7065 6369 6669 6564 2c20  d is specified, 
-000517d0: 7468 6520 7573 6572 2070 726f 6669 6c65  the user profile
-000517e0: 206f 6620 7b50 524f 475f 5749 5448 4f55   of {PROG_WITHOU
-000517f0: 545f 4558 547d 2022 0a20 2020 2020 2020  T_EXT} ".       
-00051800: 2022 7769 6c6c 2062 6520 6665 7463 6865   "will be fetche
-00051810: 642e 2049 6620 6f6e 6520 6f72 206d 6f72  d. If one or mor
-00051820: 6520 7573 6572 2069 6473 2061 7265 2067  e user ids are g
-00051830: 6976 656e 2c20 7468 6520 7573 6572 2022  iven, the user "
-00051840: 0a20 2020 2020 2020 2022 7072 6f66 696c  .        "profil
-00051850: 6573 206f 6620 7468 6573 6520 7573 6572  es of these user
-00051860: 7320 7769 6c6c 2062 6520 6665 7463 6865  s will be fetche
-00051870: 642e 2041 7320 7265 7370 6f6e 7365 2022  d. As response "
-00051880: 0a20 2020 2020 2020 2022 6469 7370 6c61  .        "displa
-00051890: 7920 6e61 6d65 2061 6e64 2061 7661 7461  y name and avata
-000518a0: 7220 4d58 4320 5552 4920 6173 2077 656c  r MXC URI as wel
-000518b0: 6c20 6173 2070 6f73 7369 626c 6520 6164  l as possible ad
-000518c0: 6469 7469 6f6e 616c 2022 0a20 2020 2020  ditional ".     
-000518d0: 2020 2022 7072 6f66 696c 6520 696e 666f     "profile info
-000518e0: 726d 6174 696f 6e20 2869 6620 7072 6573  rmation (if pres
-000518f0: 656e 7429 2022 0a20 2020 2020 2020 2022  ent) ".        "
-00051900: 7769 6c6c 2062 6520 7072 696e 7465 642e  will be printed.
-00051910: 204f 6e65 206c 696e 6520 7065 7220 7573   One line per us
-00051920: 6572 2077 696c 6c20 6265 2070 7269 6e74  er will be print
-00051930: 6564 2e22 2c0a 2020 2020 290a 2020 2020  ed.",.    ).    
-00051940: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-00051950: 0a20 2020 2020 2020 2022 2d2d 6765 742d  .        "--get-
-00051960: 726f 6f6d 2d69 6e66 6f22 2c0a 2020 2020  room-info",.    
-00051970: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-00051980: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
-00051990: 6f6e 3d22 6578 7465 6e64 222c 0a20 2020  on="extend",.   
-000519a0: 2020 2020 206e 6172 6773 3d22 2a22 2c20       nargs="*", 
-000519b0: 2023 204e 6f6e 6520 6966 206e 6f74 2075   # None if not u
-000519c0: 7365 642c 205b 5d20 6973 2075 7365 6420  sed, [] is used 
-000519d0: 7769 7468 6f75 7420 6578 7472 6120 6172  without extra ar
-000519e0: 6773 0a20 2020 2020 2020 2074 7970 653d  gs.        type=
-000519f0: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
-00051a00: 6176 6172 3d22 524f 4f4d 222c 0a20 2020  avar="ROOM",.   
-00051a10: 2020 2020 2068 656c 703d 2247 6574 2074       help="Get t
-00051a20: 6865 2072 6f6f 6d20 696e 666f 726d 6174  he room informat
-00051a30: 696f 6e2e 2022 0a20 2020 2020 2020 2022  ion. ".        "
-00051a40: 4465 7461 696c 733a 3a20 4765 7420 7468  Details:: Get th
-00051a50: 6520 726f 6f6d 2069 6e66 6f72 6d61 7469  e room informati
-00051a60: 6f6e 2073 7563 6820 6173 2072 6f6f 6d20  on such as room 
-00051a70: 6469 7370 6c61 7920 6e61 6d65 2c20 220a  display name, ".
-00051a80: 2020 2020 2020 2020 2272 6f6f 6d20 616c          "room al
-00051a90: 6961 732c 2072 6f6f 6d20 6372 6561 746f  ias, room creato
-00051aa0: 722c 2065 7463 2e20 666f 7220 220a 2020  r, etc. for ".  
-00051ab0: 2020 2020 2020 226f 6e65 206f 7220 6d75        "one or mu
-00051ac0: 6c74 6970 6c65 2073 7065 6369 6669 6564  ltiple specified
-00051ad0: 2072 6f6f 6d73 2e20 5468 6520 696e 636c   rooms. The incl
-00051ae0: 7564 6564 2072 6f6f 6d20 2764 6973 706c  uded room 'displ
-00051af0: 6179 206e 616d 6527 2069 7320 220a 2020  ay name' is ".  
-00051b00: 2020 2020 2020 2261 6c73 6f20 7265 6665        "also refe
-00051b10: 7272 6564 2074 6f20 6173 2027 726f 6f6d  rred to as 'room
-00051b20: 206e 616d 6527 206f 7220 696e 636f 7272   name' or incorr
-00051b30: 6563 746c 7920 6576 656e 2061 7320 726f  ectly even as ro
-00051b40: 6f6d 2074 6974 6c65 2e20 220a 2020 2020  om title. ".    
-00051b50: 2020 2020 2249 6620 6f6e 6520 6f72 206d      "If one or m
-00051b60: 6f72 6520 726f 6f6d 2061 7265 2067 6976  ore room are giv
-00051b70: 656e 2c20 7468 6520 726f 6f6d 2022 0a20  en, the room ". 
-00051b80: 2020 2020 2020 2022 696e 666f 726d 6174         "informat
-00051b90: 696f 6e73 206f 6620 7468 6573 6520 726f  ions of these ro
-00051ba0: 6f6d 7320 7769 6c6c 2062 6520 6665 7463  oms will be fetc
-00051bb0: 6865 642e 2022 0a20 2020 2020 2020 2022  hed. ".        "
-00051bc0: 4966 206e 6f20 726f 6f6d 2069 7320 7370  If no room is sp
-00051bd0: 6563 6966 6965 642c 2074 6865 2072 6f6f  ecified, the roo
-00051be0: 6d20 696e 666f 726d 6174 696f 6e20 666f  m information fo
-00051bf0: 7220 7468 6520 220a 2020 2020 2020 2020  r the ".        
-00051c00: 6622 6465 6661 756c 7420 726f 6f6d 2063  f"default room c
-00051c10: 6f6e 6669 6775 7265 6420 666f 7220 7b50  onfigured for {P
-00051c20: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
-00051c30: 2069 7320 6665 7463 6865 642e 2022 0a20   is fetched. ". 
-00051c40: 2020 2020 2020 2022 526f 6f6d 7320 6361         "Rooms ca
-00051c50: 6e20 6265 2067 6976 656e 2076 6961 2022  n be given via "
-00051c60: 0a20 2020 2020 2020 2022 726f 6f6d 2069  .        "room i
-00051c70: 6420 2865 2e67 2e20 275c 5c21 536f 6d65  d (e.g. '\\!Some
-00051c80: 526f 6f6d 4964 3a6d 6174 7269 782e 6578  RoomId:matrix.ex
-00051c90: 616d 706c 652e 636f 6d27 292c 2022 0a20  ample.com'), ". 
-00051ca0: 2020 2020 2020 2022 6361 6e6f 6e69 6361         "canonica
-00051cb0: 6c20 2866 756c 6c29 2072 6f6f 6d20 616c  l (full) room al
-00051cc0: 6961 7320 220a 2020 2020 2020 2020 2228  ias ".        "(
-00051cd0: 652e 672e 2027 2353 6f6d 6552 6f6f 6d41  e.g. '#SomeRoomA
-00051ce0: 6c69 6173 3a6d 6174 7269 782e 6578 616d  lias:matrix.exam
-00051cf0: 706c 652e 636f 6d27 292c 2022 0a20 2020  ple.com'), ".   
-00051d00: 2020 2020 2022 6f72 2073 686f 7274 2061       "or short a
-00051d10: 6c69 6173 2028 652e 672e 2027 536f 6d65  lias (e.g. 'Some
-00051d20: 526f 6f6d 416c 6961 7327 206f 7220 2723  RoomAlias' or '#
-00051d30: 536f 6d65 526f 6f6d 416c 6961 7327 292e  SomeRoomAlias').
-00051d40: 2022 0a20 2020 2020 2020 2022 4173 2072   ".        "As r
-00051d50: 6573 706f 6e73 6520 220a 2020 2020 2020  esponse ".      
-00051d60: 2020 2272 6f6f 6d20 6964 2c20 726f 6f6d    "room id, room
-00051d70: 2064 6973 706c 6179 206e 616d 652c 2072   display name, r
-00051d80: 6f6f 6d20 6361 6e6f 6e69 6361 6c20 616c  oom canonical al
-00051d90: 6961 732c 2072 6f6f 6d20 746f 7069 632c  ias, room topic,
-00051da0: 2022 0a20 2020 2020 2020 2022 726f 6f6d   ".        "room
-00051db0: 2063 7265 6174 6f72 2c20 616e 6420 726f   creator, and ro
-00051dc0: 6f6d 2065 6e63 7279 7074 696f 6e20 220a  om encryption ".
-00051dd0: 2020 2020 2020 2020 2261 7265 2070 7269          "are pri
-00051de0: 6e74 6564 2e20 4f6e 6520 6c69 6e65 2070  nted. One line p
-00051df0: 6572 2072 6f6f 6d20 7769 6c6c 2062 6520  er room will be 
-00051e00: 7072 696e 7465 642e 2022 0a20 2020 2020  printed. ".     
-00051e10: 2020 2022 5369 6e63 6520 6569 7468 6572     "Since either
-00051e20: 2072 6f6f 6d20 6964 206f 7220 726f 6f6d   room id or room
-00051e30: 2061 6c69 6173 2061 7265 2061 6363 6570   alias are accep
-00051e40: 7465 6420 6173 2069 6e70 7574 2061 6e64  ted as input and
-00051e50: 2062 6f74 6820 220a 2020 2020 2020 2020   both ".        
-00051e60: 2272 6f6f 6d20 6964 2061 6e64 2072 6f6f  "room id and roo
-00051e70: 6d20 616c 6961 7320 6172 6520 6769 7665  m alias are give
-00051e80: 6e20 6173 206f 7574 7075 742c 206f 6e65  n as output, one
-00051e90: 2063 616e 2068 656e 6365 2075 7365 2074   can hence use t
-00051ea0: 6869 7320 220a 2020 2020 2020 2020 226f  his ".        "o
-00051eb0: 7074 696f 6e20 746f 206d 6170 2066 726f  ption to map fro
-00051ec0: 6d20 726f 6f6d 2069 6420 746f 2072 6f6f  m room id to roo
-00051ed0: 6d20 616c 6961 7320 220a 2020 2020 2020  m alias ".      
-00051ee0: 2020 2261 7320 7765 6c6c 2061 7320 7669    "as well as vi
-00051ef0: 6365 2076 6572 7361 2066 726f 6d20 726f  ce versa from ro
-00051f00: 6f6d 2061 6c69 6173 2074 6f20 726f 6f6d  om alias to room
-00051f10: 2069 642e 2022 0a20 2020 2020 2020 2022   id. ".        "
-00051f20: 446f 206e 6f74 2063 6f6e 6675 7365 2074  Do not confuse t
-00051f30: 6869 7320 6f70 7469 6f6e 2077 6974 6820  his option with 
-00051f40: 7468 6520 6f70 7469 6f6e 7320 272d 2d67  the options '--g
-00051f50: 6574 2d64 6973 706c 6179 2d6e 616d 6527  et-display-name'
-00051f60: 2022 0a20 2020 2020 2020 2022 616e 6420   ".        "and 
-00051f70: 272d 2d73 6574 2d64 6973 706c 6179 2d6e  '--set-display-n
-00051f80: 616d 6527 2c20 7768 6963 6820 6765 742f  ame', which get/
-00051f90: 7365 7420 7468 6520 7573 6572 2064 6973  set the user dis
-00051fa0: 706c 6179 206e 616d 652c 206e 6f74 2022  play name, not "
-00051fb0: 0a20 2020 2020 2020 2022 7468 6520 726f  .        "the ro
-00051fc0: 6f6d 2064 6973 706c 6179 206e 616d 652e  om display name.
-00051fd0: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
-00051fe0: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
-00051ff0: 2020 2020 2020 222d 2d67 6574 2d63 6c69        "--get-cli
-00052000: 656e 742d 696e 666f 222c 0a20 2020 2020  ent-info",.     
-00052010: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-00052020: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
-00052030: 6e3d 2273 746f 7265 5f74 7275 6522 2c0a  n="store_true",.
-00052040: 2020 2020 2020 2020 6865 6c70 3d22 5072          help="Pr
-00052050: 696e 7420 636c 6965 6e74 2069 6e66 6f72  int client infor
-00052060: 6d61 7469 6f6e 2e20 220a 2020 2020 2020  mation. ".      
-00052070: 2020 2244 6574 6169 6c73 3a3a 2050 7269    "Details:: Pri
-00052080: 6e74 2069 6e66 6f72 6d61 7469 6f6e 206b  nt information k
-00052090: 6570 7420 696e 2074 6865 2063 6c69 656e  ept in the clien
-000520a0: 742c 2069 2e65 2e20 220a 2020 2020 2020  t, i.e. ".      
-000520b0: 2020 6622 7b50 524f 475f 5749 5448 4f55    f"{PROG_WITHOU
-000520c0: 545f 4558 547d 2e20 220a 2020 2020 2020  T_EXT}. ".      
-000520d0: 2020 224f 7574 7075 7420 6973 2070 7269    "Output is pri
-000520e0: 6e74 6564 2069 6e20 4a53 4f4e 2066 6f72  nted in JSON for
-000520f0: 6d61 742e 222c 0a20 2020 2029 0a20 2020  mat.",.    ).   
-00052100: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-00052110: 280a 2020 2020 2020 2020 222d 2d68 6173  (.        "--has
-00052120: 2d70 6572 6d69 7373 696f 6e22 2c0a 2020  -permission",.  
-00052130: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-00052140: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-00052150: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
-00052160: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
-00052170: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-00052180: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
-00052190: 7661 723d 2252 4f4f 4d20 4241 4e7c 494e  var="ROOM BAN|IN
-000521a0: 5649 5445 7c4b 4943 4b7c 4e4f 5449 4649  VITE|KICK|NOTIFI
-000521b0: 4341 5449 4f4e 537c 5245 4441 4354 7c65  CATIONS|REDACT|e
-000521c0: 7463 222c 0a20 2020 2020 2020 2068 656c  tc",.        hel
-000521d0: 703d 2249 6e71 7569 7265 2061 626f 7574  p="Inquire about
-000521e0: 2070 6572 6d69 7373 696f 6e73 2e20 220a   permissions. ".
-000521f0: 2020 2020 2020 2020 6622 4465 7461 696c          f"Detail
-00052200: 733a 3a20 496e 7175 6972 6520 6966 2075  s:: Inquire if u
-00052210: 7365 7220 7573 6564 2062 7920 7b50 524f  ser used by {PRO
-00052220: 475f 5749 5448 4f55 545f 4558 547d 2068  G_WITHOUT_EXT} h
-00052230: 6173 2022 0a20 2020 2020 2020 2022 7065  as ".        "pe
-00052240: 726d 6973 7369 6f6e 2066 6f72 206f 6e65  rmission for one
-00052250: 206f 7220 6d75 6c74 6970 6c65 2061 6374   or multiple act
-00052260: 696f 6e73 2069 6e20 6f6e 6520 6f72 206d  ions in one or m
-00052270: 756c 7469 706c 6520 726f 6f6d 732e 2022  ultiple rooms. "
-00052280: 0a20 2020 2020 2020 2022 4561 6368 2069  .        "Each i
-00052290: 6e71 7569 7279 2072 6571 7569 7265 7320  nquiry requires 
-000522a0: 3220 7061 7261 6d65 7465 7273 3a20 7468  2 parameters: th
-000522b0: 6520 726f 6f6d 2069 6420 616e 6420 7468  e room id and th
-000522c0: 6520 7065 726d 6973 7369 6f6e 2022 0a20  e permission ". 
-000522d0: 2020 2020 2020 2022 7479 7065 2e20 4f6e         "type. On
-000522e0: 6520 6f72 206d 756c 7469 706c 6520 6f66  e or multiple of
-000522f0: 2074 6865 7365 2070 6172 616d 6574 6572   these parameter
-00052300: 2070 6169 7273 206d 6179 2062 6520 7370   pairs may be sp
-00052310: 6563 6966 6965 642e 2022 0a20 2020 2020  ecified. ".     
-00052320: 2020 2022 466f 7220 6561 6368 2070 6172     "For each par
-00052330: 616d 6574 6572 2070 6169 7220 7468 6572  ameter pair ther
-00052340: 6520 7769 6c6c 2062 6520 6f6e 6520 6c69  e will be one li
-00052350: 6e65 2070 7269 6e74 6564 2074 6f20 7374  ne printed to st
-00052360: 646f 7574 2e20 220a 2020 2020 2020 2020  dout. ".        
-00052370: 2256 616c 7565 7320 666f 7220 7468 6520  "Values for the 
-00052380: 7065 726d 6973 7369 6f6e 2074 7970 6520  permission type 
-00052390: 6172 6520 2762 616e 272c 2022 0a20 2020  are 'ban', ".   
-000523a0: 2020 2020 2022 2769 6e76 6974 6527 2c20       "'invite', 
-000523b0: 276b 6963 6b27 2c20 276e 6f74 6966 6963  'kick', 'notific
-000523c0: 6174 696f 6e73 272c 2027 7265 6461 6374  ations', 'redact
-000523d0: 272c 2065 7463 2e20 220a 2020 2020 2020  ', etc. ".      
-000523e0: 2020 2253 6565 2068 7474 7073 3a2f 2f73    "See https://s
-000523f0: 7065 632e 6d61 7472 6978 2e6f 7267 2f76  pec.matrix.org/v
-00052400: 312e 322f 636c 6965 6e74 2d73 6572 7665  1.2/client-serve
-00052410: 722d 6170 692f 236d 726f 6f6d 706f 7765  r-api/#mroompowe
-00052420: 725f 6c65 7665 6c73 220a 2020 2020 2020  r_levels".      
-00052430: 2020 222e 222c 0a20 2020 2020 2020 2023    ".",.        #
-00052440: 2027 6576 656e 7473 272c 2027 6576 656e   'events', 'even
-00052450: 7473 5f64 6566 6175 6c74 272c 2027 7374  ts_default', 'st
-00052460: 6174 655f 6465 6661 756c 7427 3a20 7661  ate_default': va
-00052470: 6c69 6420 7065 726d 6973 7369 6f6e 2074  lid permission t
-00052480: 7970 6573 3f0a 2020 2020 290a 2020 2020  ypes?.    ).    
-00052490: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-000524a0: 0a20 2020 2020 2020 2022 2d2d 696d 706f  .        "--impo
-000524b0: 7274 2d6b 6579 7322 2c0a 2020 2020 2020  rt-keys",.      
-000524c0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-000524d0: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
-000524e0: 3d22 6578 7465 6e64 222c 0a20 2020 2020  ="extend",.     
-000524f0: 2020 206e 6172 6773 3d32 2c20 2023 2066     nargs=2,  # f
-00052500: 696c 656e 616d 6520 666f 7220 696d 706f  ilename for impo
-00052510: 7274 2c20 7061 7373 7068 7261 7365 0a20  rt, passphrase. 
-00052520: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
-00052530: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
-00052540: 3d22 4649 4c45 2050 4153 5350 4852 4153  ="FILE PASSPHRAS
-00052550: 4522 2c0a 2020 2020 2020 2020 6865 6c70  E",.        help
-00052560: 3d22 496d 706f 7274 204d 6567 6f6c 6d20  ="Import Megolm 
-00052570: 6465 6372 7970 7469 6f6e 206b 6579 7320  decryption keys 
-00052580: 6672 6f6d 2061 2066 696c 652e 2022 0a20  from a file. ". 
-00052590: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-000525a0: 3a20 5468 6973 2069 7320 616e 206f 7074  : This is an opt
-000525b0: 696f 6e61 6c20 6172 6775 6d65 6e74 2e20  ional argument. 
-000525c0: 4966 2075 7365 6420 6974 206d 7573 7420  If used it must 
-000525d0: 6265 2066 6f6c 6c6f 7765 6420 220a 2020  be followed ".  
-000525e0: 2020 2020 2020 2262 7920 7477 6f20 7661        "by two va
-000525f0: 6c75 6573 2e20 2861 2920 6120 6669 6c65  lues. (a) a file
-00052600: 206e 616d 6520 6672 6f6d 2077 6869 6368   name from which
-00052610: 2074 6865 206b 6579 7320 7769 6c6c 2062   the keys will b
-00052620: 6520 7265 6164 2e20 220a 2020 2020 2020  e read. ".      
-00052630: 2020 2228 6229 2061 2070 6173 7370 6872    "(b) a passphr
-00052640: 6173 6520 7769 7468 2077 6869 6368 2074  ase with which t
-00052650: 6865 2066 696c 6520 6361 6e20 6265 2064  he file can be d
-00052660: 6563 7279 7074 6564 2077 6974 682e 2022  ecrypted with. "
-00052670: 0a20 2020 2020 2020 2022 5468 6520 6b65  .        "The ke
-00052680: 7973 2077 696c 6c20 6265 2061 6464 6564  ys will be added
-00052690: 2074 6f20 7468 6520 6375 7272 656e 7420   to the current 
-000526a0: 696e 7374 616e 6365 2061 7320 7765 6c6c  instance as well
-000526b0: 2061 7320 220a 2020 2020 2020 2020 2277   as ".        "w
-000526c0: 7269 7474 656e 2074 6f20 7468 6520 6461  ritten to the da
-000526d0: 7461 6261 7365 2e20 5365 6520 616c 736f  tabase. See also
-000526e0: 202d 2d65 7870 6f72 742d 6b65 7973 2e22   --export-keys."
-000526f0: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
-00052700: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
-00052710: 2020 2020 2022 2d2d 6578 706f 7274 2d6b       "--export-k
-00052720: 6579 7322 2c0a 2020 2020 2020 2020 7265  eys",.        re
-00052730: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
-00052740: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
-00052750: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
-00052760: 6172 6773 3d32 2c20 2023 2066 696c 656e  args=2,  # filen
-00052770: 616d 6520 666f 7220 6578 706f 7274 2c20  ame for export, 
-00052780: 7061 7373 7068 7261 7365 0a20 2020 2020  passphrase.     
-00052790: 2020 2074 7970 653d 7374 722c 0a20 2020     type=str,.   
-000527a0: 2020 2020 206d 6574 6176 6172 3d22 4649       metavar="FI
-000527b0: 4c45 2050 4153 5350 4852 4153 4522 2c0a  LE PASSPHRASE",.
-000527c0: 2020 2020 2020 2020 6865 6c70 3d22 4578          help="Ex
-000527d0: 706f 7274 2061 6c6c 2074 6865 204d 6567  port all the Meg
-000527e0: 6f6c 6d20 6465 6372 7970 7469 6f6e 206b  olm decryption k
-000527f0: 6579 7320 6f66 2074 6869 7320 6465 7669  eys of this devi
-00052800: 6365 2e20 220a 2020 2020 2020 2020 2244  ce. ".        "D
-00052810: 6574 6169 6c73 3a3a 2054 6869 7320 6973  etails:: This is
-00052820: 2061 6e20 6f70 7469 6f6e 616c 2061 7267   an optional arg
-00052830: 756d 656e 742e 2049 6620 7573 6564 2069  ument. If used i
-00052840: 7420 6d75 7374 2062 6520 666f 6c6c 6f77  t must be follow
-00052850: 6564 2022 0a20 2020 2020 2020 2022 6279  ed ".        "by
-00052860: 2074 776f 2076 616c 7565 732e 2028 6129   two values. (a)
-00052870: 2061 2066 696c 6520 6e61 6d65 2074 6f20   a file name to 
-00052880: 7768 6963 6820 7468 6520 6b65 7973 2077  which the keys w
-00052890: 696c 6c20 6265 2077 7269 7474 656e 2074  ill be written t
-000528a0: 6f2e 2022 0a20 2020 2020 2020 2022 2862  o. ".        "(b
-000528b0: 2920 6120 7061 7373 7068 7261 7365 2077  ) a passphrase w
-000528c0: 6974 6820 7768 6963 6820 7468 6520 6669  ith which the fi
-000528d0: 6c65 2077 696c 6c20 6265 2065 6e63 7279  le will be encry
-000528e0: 7074 6564 2077 6974 682e 2022 0a20 2020  pted with. ".   
-000528f0: 2020 2020 2022 4e6f 7465 2074 6861 7420       "Note that 
-00052900: 7468 6973 2064 6f65 7320 6e6f 7420 7361  this does not sa
-00052910: 7665 206f 7468 6572 2069 6e66 6f72 6d61  ve other informa
-00052920: 7469 6f6e 2073 7563 6820 6173 2074 6865  tion such as the
-00052930: 2070 7269 7661 7465 2022 0a20 2020 2020   private ".     
-00052940: 2020 2022 6964 656e 7469 7479 206b 6579     "identity key
-00052950: 7320 6f66 2074 6865 2064 6576 6963 652e  s of the device.
-00052960: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
-00052970: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
-00052980: 2020 2020 2020 222d 2d72 6f6f 6d2d 7365        "--room-se
-00052990: 742d 616c 6961 7322 2c0a 2020 2020 2020  t-alias",.      
-000529a0: 2020 222d 2d72 6f6f 6d2d 7075 742d 616c    "--room-put-al
-000529b0: 6961 7322 2c20 2023 206e 616d 6520 7573  ias",  # name us
-000529c0: 6564 2062 7920 6e69 6f0a 2020 2020 2020  ed by nio.      
-000529d0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-000529e0: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
-000529f0: 3d22 6578 7465 6e64 222c 0a20 2020 2020  ="extend",.     
-00052a00: 2020 206e 6172 6773 3d22 2b22 2c0a 2020     nargs="+",.  
-00052a10: 2020 2020 2020 7479 7065 3d73 7472 2c0a        type=str,.
-00052a20: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
-00052a30: 2252 4f4f 4d5f 414c 4941 5320 524f 4f4d  "ROOM_ALIAS ROOM
-00052a40: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-00052a50: 2241 6464 2061 6c69 6173 6573 2074 6f20  "Add aliases to 
-00052a60: 726f 6f6d 732e 2022 0a20 2020 2020 2020  rooms. ".       
-00052a70: 2022 4465 7461 696c 733a 3a20 4164 6420   "Details:: Add 
-00052a80: 616e 2061 6c69 6173 2074 6f20 6120 726f  an alias to a ro
-00052a90: 6f6d 2c20 6f72 2061 6c69 6173 6573 2074  om, or aliases t
-00052aa0: 6f20 6d75 6c74 6970 6c65 2072 6f6f 6d73  o multiple rooms
-00052ab0: 2e20 220a 2020 2020 2020 2020 2250 726f  . ".        "Pro
-00052ac0: 7669 6465 2070 6169 7273 206f 6620 6172  vide pairs of ar
-00052ad0: 6775 6d65 6e74 732e 2049 6e20 6561 6368  guments. In each
-00052ae0: 2070 6169 722c 2074 6865 2066 6972 7374   pair, the first
-00052af0: 2061 7267 756d 656e 7420 6d75 7374 2062   argument must b
-00052b00: 6520 220a 2020 2020 2020 2020 2274 6865  e ".        "the
-00052b10: 2061 6c69 6173 2079 6f75 2077 616e 7420   alias you want 
-00052b20: 746f 2061 7373 6967 6e20 746f 2074 6865  to assign to the
-00052b30: 2072 6f6f 6d20 6769 7665 6e20 7669 6120   room given via 
-00052b40: 726f 6f6d 2069 6420 696e 2074 6865 2022  room id in the "
-00052b50: 0a20 2020 2020 2020 2022 7365 636f 6e64  .        "second
-00052b60: 2061 7267 756d 656e 7420 6f66 2074 6865   argument of the
-00052b70: 2070 6169 722e 2045 2e67 2e20 7468 6520   pair. E.g. the 
-00052b80: 3420 6172 6775 6d65 6e74 7320 2761 3120  4 arguments 'a1 
-00052b90: 7231 2061 3220 7232 2720 220a 2020 2020  r1 a2 r2' ".    
-00052ba0: 2020 2020 2277 6f75 6c64 2061 7373 6967      "would assig
-00052bb0: 6e20 7468 6520 616c 6961 7320 2761 3127  n the alias 'a1'
-00052bc0: 2074 6f20 726f 6f6d 2027 7231 2720 616e   to room 'r1' an
-00052bd0: 6420 7468 6520 616c 6961 7320 2761 3227  d the alias 'a2'
-00052be0: 2074 6f20 726f 6f6d 2022 0a20 2020 2020   to room ".     
-00052bf0: 2020 2022 2772 3227 2e20 4966 2079 6f75     "'r2'. If you
-00052c00: 206a 7573 7420 6861 7665 206f 6e65 2073   just have one s
-00052c10: 696e 676c 6520 7061 6972 2074 6865 6e20  ingle pair then 
-00052c20: 7468 6520 7365 636f 6e64 2061 7267 756d  the second argum
-00052c30: 656e 7420 6973 2022 0a20 2020 2020 2020  ent is ".       
-00052c40: 2022 6f70 7469 6f6e 616c 2e20 4966 206a   "optional. If j
-00052c50: 7573 7420 6120 7369 6e67 6c65 2076 616c  ust a single val
-00052c60: 7565 2069 7320 6769 7665 6e20 2861 6e20  ue is given (an 
-00052c70: 616c 6961 7329 2074 6865 6e20 7468 6973  alias) then this
-00052c80: 2022 0a20 2020 2020 2020 2022 616c 6961   ".        "alia
-00052c90: 7320 6973 2061 7373 6967 6e65 6420 746f  s is assigned to
-00052ca0: 2074 6865 2064 6566 6175 6c74 2072 6f6f   the default roo
-00052cb0: 6d20 6f66 2022 0a20 2020 2020 2020 2066  m of ".        f
-00052cc0: 227b 5052 4f47 5f57 4954 484f 5554 5f45  "{PROG_WITHOUT_E
-00052cd0: 5854 7d20 2861 7320 666f 756e 6420 696e  XT} (as found in
-00052ce0: 2063 7265 6465 6e74 6961 6c73 2066 696c   credentials fil
-00052cf0: 6529 2e20 496e 2073 686f 7274 2c20 220a  e). In short, ".
-00052d00: 2020 2020 2020 2020 2279 6f75 2063 616e          "you can
-00052d10: 2068 6176 6520 6a75 7374 2061 2073 696e   have just a sin
-00052d20: 676c 6520 6172 6775 6d65 6e74 206f 7220  gle argument or 
-00052d30: 616e 2065 7665 6e20 6e75 6d62 6572 206f  an even number o
-00052d40: 6620 6172 6775 6d65 6e74 7320 220a 2020  f arguments ".  
-00052d50: 2020 2020 2020 2266 6f72 6d69 6e67 2070        "forming p
-00052d60: 6169 7273 2e20 596f 7520 6361 6e20 6861  airs. You can ha
-00052d70: 7665 206d 756c 7469 706c 6520 726f 6f6d  ve multiple room
-00052d80: 2061 6c69 6173 6573 2070 6572 2072 6f6f   aliases per roo
-00052d90: 6d2e 2053 6f2c 2022 0a20 2020 2020 2020  m. So, ".       
-00052da0: 2022 796f 7520 6d61 7920 6164 6420 6d75   "you may add mu
-00052db0: 6c74 6970 6c65 2061 6c69 6173 6573 2074  ltiple aliases t
-00052dc0: 6f20 7468 6520 7361 6d65 2072 6f6f 6d2e  o the same room.
-00052dd0: 2022 0a20 2020 2020 2020 2022 4120 726f   ".        "A ro
-00052de0: 6f6d 2061 6c69 6173 206c 6f6f 6b73 206c  om alias looks l
-00052df0: 696b 6520 7468 6973 3a20 220a 2020 2020  ike this: ".    
-00052e00: 2020 2020 2227 2373 6f6d 6552 6f6f 6d41      "'#someRoomA
-00052e10: 6c69 6173 3a6d 6174 7269 782e 6578 616d  lias:matrix.exam
-00052e20: 706c 652e 6f72 6727 2e20 5368 6f72 7420  ple.org'. Short 
-00052e30: 616c 6961 7365 7320 6c69 6b65 2022 0a20  aliases like ". 
-00052e40: 2020 2020 2020 2022 2773 6f6d 6552 6f6f         "'someRoo
-00052e50: 6d41 6c69 6173 2720 6f72 2027 2373 6f6d  mAlias' or '#som
-00052e60: 6552 6f6f 6d41 6c69 6173 2720 6172 6520  eRoomAlias' are 
-00052e70: 616c 736f 2061 6363 6570 7465 642e 2022  also accepted. "
-00052e80: 0a20 2020 2020 2020 2022 496e 2063 6173  .        "In cas
-00052e90: 6520 6f66 2061 2073 686f 7274 2061 6c69  e of a short ali
-00052ea0: 6173 2c20 220a 2020 2020 2020 2020 2269  as, ".        "i
-00052eb0: 7420 7769 6c6c 2062 6520 6175 746f 6d61  t will be automa
-00052ec0: 7469 6361 6c6c 7920 7072 6566 6978 6564  tically prefixed
-00052ed0: 2077 6974 6820 2723 2720 616e 6420 7468   with '#' and th
-00052ee0: 6520 220a 2020 2020 2020 2020 2268 6f6d  e ".        "hom
-00052ef0: 6573 6572 7665 7220 7769 6c6c 2062 6520  eserver will be 
-00052f00: 6175 746f 6d61 7469 6361 6c6c 7920 6170  automatically ap
-00052f10: 7065 6e64 6564 2e20 220a 2020 2020 2020  pended. ".      
-00052f20: 2020 2241 6464 696e 6720 7468 6520 7361    "Adding the sa
-00052f30: 6d65 2061 6c69 6173 2022 0a20 2020 2020  me alias ".     
-00052f40: 2020 2022 6d75 6c74 6970 6c65 2074 696d     "multiple tim
-00052f50: 6573 2074 6f20 7468 6520 7361 6d65 2072  es to the same r
-00052f60: 6f6f 6d20 7265 7375 6c74 7320 696e 2061  oom results in a
-00052f70: 6e20 6572 726f 722e 2022 0a20 2020 2020  n error. ".     
-00052f80: 2020 2022 2d2d 726f 6f6d 2d70 7574 2d61     "--room-put-a
-00052f90: 6c69 6173 2069 7320 6571 6976 616c 656e  lias is eqivalen
-00052fa0: 7420 746f 202d 2d72 6f6f 6d2d 7365 742d  t to --room-set-
-00052fb0: 616c 6961 732e 222c 0a20 2020 2029 0a20  alias.",.    ). 
-00052fc0: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
-00052fd0: 6e74 280a 2020 2020 2020 2020 222d 2d72  nt(.        "--r
-00052fe0: 6f6f 6d2d 7265 736f 6c76 652d 616c 6961  oom-resolve-alia
-00052ff0: 7322 2c0a 2020 2020 2020 2020 7265 7175  s",.        requ
-00053000: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
-00053010: 2020 2020 6163 7469 6f6e 3d22 6578 7465      action="exte
-00053020: 6e64 222c 0a20 2020 2020 2020 206e 6172  nd",.        nar
-00053030: 6773 3d22 2b22 2c0a 2020 2020 2020 2020  gs="+",.        
-00053040: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
-00053050: 2020 6d65 7461 7661 723d 2252 4f4f 4d5f    metavar="ROOM_
-00053060: 414c 4941 5322 2c0a 2020 2020 2020 2020  ALIAS",.        
-00053070: 6865 6c70 3d22 5368 6f77 2072 6f6f 6d20  help="Show room 
-00053080: 6964 7320 636f 7272 6573 706f 6e64 696e  ids correspondin
-00053090: 6720 746f 2072 6f6f 6d20 616c 6961 7365  g to room aliase
-000530a0: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
-000530b0: 7461 696c 733a 3a20 5265 736f 6c76 6573  tails:: Resolves
-000530c0: 2061 2072 6f6f 6d20 616c 6961 7320 746f   a room alias to
-000530d0: 2074 6865 2063 6f72 7265 7370 6f6e 6469   the correspondi
-000530e0: 6e67 2072 6f6f 6d20 6964 2c20 220a 2020  ng room id, ".  
-000530f0: 2020 2020 2020 226f 7220 6d75 6c74 6970        "or multip
-00053100: 6c65 2072 6f6f 6d20 616c 6961 7365 7320  le room aliases 
-00053110: 746f 2074 6865 6972 2063 6f72 7265 7370  to their corresp
-00053120: 6f6e 6469 6e67 2072 6f6f 6d20 6964 732e  onding room ids.
-00053130: 2022 0a20 2020 2020 2020 2022 5072 6f76   ".        "Prov
-00053140: 6964 6520 6f6e 6520 6f72 206d 756c 7469  ide one or multi
-00053150: 706c 6520 726f 6f6d 2061 6c69 6173 6573  ple room aliases
-00053160: 2e20 220a 2020 2020 2020 2020 2241 2072  . ".        "A r
-00053170: 6f6f 6d20 616c 6961 7320 6c6f 6f6b 7320  oom alias looks 
-00053180: 6c69 6b65 2074 6869 733a 2022 0a20 2020  like this: ".   
-00053190: 2020 2020 2022 2723 736f 6d65 526f 6f6d       "'#someRoom
-000531a0: 416c 6961 733a 6d61 7472 6978 2e65 7861  Alias:matrix.exa
-000531b0: 6d70 6c65 2e6f 7267 272e 2053 686f 7274  mple.org'. Short
-000531c0: 2061 6c69 6173 6573 206c 696b 6520 220a   aliases like ".
-000531d0: 2020 2020 2020 2020 2227 736f 6d65 526f          "'someRo
-000531e0: 6f6d 416c 6961 7327 206f 7220 2723 736f  omAlias' or '#so
-000531f0: 6d65 526f 6f6d 416c 6961 7327 2061 7265  meRoomAlias' are
-00053200: 2061 6c73 6f20 6163 6365 7074 6564 2e20   also accepted. 
-00053210: 220a 2020 2020 2020 2020 2249 6e20 6361  ".        "In ca
-00053220: 7365 206f 6620 6120 7368 6f72 7420 616c  se of a short al
-00053230: 6961 732c 2022 0a20 2020 2020 2020 2022  ias, ".        "
-00053240: 6974 2077 696c 6c20 6265 2061 7574 6f6d  it will be autom
-00053250: 6174 6963 616c 6c79 2070 7265 6669 7865  atically prefixe
-00053260: 6420 7769 7468 2027 2327 2061 6e64 2074  d with '#' and t
-00053270: 6865 2022 0a20 2020 2020 2020 2066 2268  he ".        f"h
-00053280: 6f6d 6573 6572 7665 7220 6672 6f6d 2074  omeserver from t
-00053290: 6865 2064 6566 6175 6c74 2072 6f6f 6d20  he default room 
-000532a0: 6f66 207b 5052 4f47 5f57 4954 484f 5554  of {PROG_WITHOUT
-000532b0: 5f45 5854 7d20 2861 7320 666f 756e 6420  _EXT} (as found 
-000532c0: 220a 2020 2020 2020 2020 2269 6e20 6372  ".        "in cr
-000532d0: 6564 656e 7469 616c 7320 6669 6c65 2920  edentials file) 
-000532e0: 7769 6c6c 2062 6520 6175 746f 6d61 7469  will be automati
-000532f0: 6361 6c6c 7920 6170 7065 6e64 6564 2e20  cally appended. 
-00053300: 220a 2020 2020 2020 2020 2252 6573 6f6c  ".        "Resol
-00053310: 7669 6e67 2061 6e20 616c 6961 7320 7468  ving an alias th
-00053320: 6174 2064 6f65 7320 6e6f 7420 6578 6973  at does not exis
-00053330: 7420 7265 7375 6c74 7320 696e 2061 6e20  t results in an 
-00053340: 6572 726f 722e 2022 0a20 2020 2020 2020  error. ".       
-00053350: 2022 466f 7220 6561 6368 2072 6f6f 6d20   "For each room 
-00053360: 616c 6961 7320 6f6e 6520 6c69 6e65 2077  alias one line w
-00053370: 696c 6c20 6265 2070 7269 6e74 6564 2074  ill be printed t
-00053380: 6f20 7374 646f 7574 2077 6974 6820 7468  o stdout with th
-00053390: 6520 220a 2020 2020 2020 2020 2272 6573  e ".        "res
-000533a0: 756c 742e 222c 0a20 2020 2029 0a20 2020  ult.",.    ).   
-000533b0: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-000533c0: 280a 2020 2020 2020 2020 222d 2d72 6f6f  (.        "--roo
-000533d0: 6d2d 6465 6c65 7465 2d61 6c69 6173 222c  m-delete-alias",
-000533e0: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-000533f0: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
-00053400: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
-00053410: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
-00053420: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
-00053430: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
-00053440: 6574 6176 6172 3d22 524f 4f4d 5f41 4c49  etavar="ROOM_ALI
-00053450: 4153 222c 0a20 2020 2020 2020 2068 656c  AS",.        hel
-00053460: 703d 2244 656c 6574 6520 6f6e 6520 6f72  p="Delete one or
-00053470: 206d 756c 7469 706c 6520 726f 6f6d 7320   multiple rooms 
-00053480: 616c 6961 7365 732e 2022 0a20 2020 2020  aliases. ".     
-00053490: 2020 2022 4465 7461 696c 733a 3a20 5072     "Details:: Pr
-000534a0: 6f76 6964 6520 6f6e 6520 6f72 206d 756c  ovide one or mul
-000534b0: 7469 706c 6520 726f 6f6d 2061 6c69 6173  tiple room alias
-000534c0: 6573 2e20 220a 2020 2020 2020 2020 2259  es. ".        "Y
-000534d0: 6f75 2063 616e 2068 6176 6520 6d75 6c74  ou can have mult
-000534e0: 6970 6c65 2072 6f6f 6d20 616c 6961 7365  iple room aliase
-000534f0: 7320 7065 7220 726f 6f6d 2e20 536f 2c20  s per room. So, 
-00053500: 220a 2020 2020 2020 2020 2279 6f75 206d  ".        "you m
-00053510: 6179 2064 656c 6574 6520 6d75 6c74 6970  ay delete multip
-00053520: 6c65 2061 6c69 6173 6573 2066 726f 6d20  le aliases from 
-00053530: 7468 6520 7361 6d65 2072 6f6f 6d20 6f72  the same room or
-00053540: 2066 726f 6d20 6469 6666 6572 656e 7420   from different 
-00053550: 220a 2020 2020 2020 2020 2272 6f6f 6d73  ".        "rooms
-00053560: 2e20 220a 2020 2020 2020 2020 2241 2072  . ".        "A r
-00053570: 6f6f 6d20 616c 6961 7320 6c6f 6f6b 7320  oom alias looks 
-00053580: 6c69 6b65 2074 6869 733a 2022 0a20 2020  like this: ".   
-00053590: 2020 2020 2022 2723 736f 6d65 526f 6f6d       "'#someRoom
-000535a0: 416c 6961 733a 6d61 7472 6978 2e65 7861  Alias:matrix.exa
-000535b0: 6d70 6c65 2e6f 7267 272e 2053 686f 7274  mple.org'. Short
-000535c0: 2061 6c69 6173 6573 206c 696b 6520 220a   aliases like ".
-000535d0: 2020 2020 2020 2020 2227 736f 6d65 526f          "'someRo
-000535e0: 6f6d 416c 6961 7327 206f 7220 2723 736f  omAlias' or '#so
-000535f0: 6d65 526f 6f6d 416c 6961 7327 2061 7265  meRoomAlias' are
-00053600: 2061 6c73 6f20 6163 6365 7074 6564 2e20   also accepted. 
-00053610: 220a 2020 2020 2020 2020 2249 6e20 6361  ".        "In ca
-00053620: 7365 206f 6620 6120 7368 6f72 7420 616c  se of a short al
-00053630: 6961 732c 2022 0a20 2020 2020 2020 2022  ias, ".        "
-00053640: 6974 2077 696c 6c20 6265 2061 7574 6f6d  it will be autom
-00053650: 6174 6963 616c 6c79 2070 7265 6669 7865  atically prefixe
-00053660: 6420 7769 7468 2027 2327 2061 6e64 2074  d with '#' and t
-00053670: 6865 2022 0a20 2020 2020 2020 2066 2268  he ".        f"h
-00053680: 6f6d 6573 6572 7665 7220 6672 6f6d 2074  omeserver from t
-00053690: 6865 2064 6566 6175 6c74 2072 6f6f 6d20  he default room 
-000536a0: 6f66 207b 5052 4f47 5f57 4954 484f 5554  of {PROG_WITHOUT
-000536b0: 5f45 5854 7d20 2861 7320 666f 756e 6420  _EXT} (as found 
-000536c0: 220a 2020 2020 2020 2020 2269 6e20 6372  ".        "in cr
-000536d0: 6564 656e 7469 616c 7320 6669 6c65 2920  edentials file) 
-000536e0: 7769 6c6c 2062 6520 6175 746f 6d61 7469  will be automati
-000536f0: 6361 6c6c 7920 6170 7065 6e64 6564 2e20  cally appended. 
-00053700: 220a 2020 2020 2020 2020 2244 656c 6574  ".        "Delet
-00053710: 696e 6720 616e 2061 6c69 6173 2074 6861  ing an alias tha
-00053720: 7420 646f 6573 206e 6f74 2065 7869 7374  t does not exist
-00053730: 2072 6573 756c 7473 2069 6e20 616e 2065   results in an e
-00053740: 7272 6f72 2e22 2c0a 2020 2020 290a 2020  rror.",.    ).  
-00053750: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
-00053760: 7428 0a20 2020 2020 2020 2022 2d2d 6765  t(.        "--ge
-00053770: 742d 6f70 656e 6964 2d74 6f6b 656e 222c  t-openid-token",
-00053780: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-00053790: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
-000537a0: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
-000537b0: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
-000537c0: 222a 222c 2020 2320 4e6f 6e65 2069 6620  "*",  # None if 
-000537d0: 6e6f 7420 7573 6564 2c20 5b5d 2069 7320  not used, [] is 
-000537e0: 7573 6564 2077 6974 686f 7574 2065 7874  used without ext
-000537f0: 7261 2061 7267 730a 2020 2020 2020 2020  ra args.        
-00053800: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
-00053810: 2020 6d65 7461 7661 723d 2255 5345 5222    metavar="USER"
-00053820: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
-00053830: 4765 7420 616e 204f 7065 6e49 4420 746f  Get an OpenID to
-00053840: 6b65 6e2e 2022 0a20 2020 2020 2020 2066  ken. ".        f
-00053850: 2244 6574 6169 6c73 3a3a 2047 6574 2061  "Details:: Get a
-00053860: 6e20 4f70 656e 4944 2074 6f6b 656e 2066  n OpenID token f
-00053870: 6f72 207b 5052 4f47 5f57 4954 484f 5554  or {PROG_WITHOUT
-00053880: 5f45 5854 7d2c 206f 7220 666f 7220 220a  _EXT}, or for ".
-00053890: 2020 2020 2020 2020 226f 6e65 206f 7220          "one or 
-000538a0: 6d75 6c74 6970 6c65 206f 7468 6572 2075  multiple other u
-000538b0: 7365 7273 2e20 4974 2070 7269 6e74 7320  sers. It prints 
-000538c0: 616e 204f 7065 6e49 4420 746f 6b65 6e20  an OpenID token 
-000538d0: 6f62 6a65 6374 2022 0a20 2020 2020 2020  object ".       
-000538e0: 2022 7468 6174 2074 6865 2072 6571 7565   "that the reque
-000538f0: 7374 6572 206d 6179 2073 7570 706c 7920  ster may supply 
-00053900: 746f 2061 6e6f 7468 6572 2073 6572 7669  to another servi
-00053910: 6365 2074 6f20 7665 7269 6679 2074 6865  ce to verify the
-00053920: 6972 2022 0a20 2020 2020 2020 2022 6964  ir ".        "id
-00053930: 656e 7469 7479 2069 6e20 4d61 7472 6978  entity in Matrix
-00053940: 2e20 5365 6520 6874 7470 3a2f 2f77 7777  . See http://www
-00053950: 2e6f 7065 6e69 642e 6e65 742f 2e20 220a  .openid.net/. ".
-00053960: 2020 2020 2020 2020 2253 7065 6369 6679          "Specify
-00053970: 207a 6572 6f20 6f72 206d 6f72 6520 7573   zero or more us
-00053980: 6572 2069 6473 2e20 220a 2020 2020 2020  er ids. ".      
-00053990: 2020 6622 4966 206e 6f20 7573 6572 2069    f"If no user i
-000539a0: 6420 6973 2073 7065 6369 6669 6564 2c20  d is specified, 
-000539b0: 616e 204f 7065 6e49 4420 666f 7220 7b50  an OpenID for {P
-000539c0: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
-000539d0: 2077 696c 6c20 220a 2020 2020 2020 2020   will ".        
-000539e0: 2262 6520 6665 7463 6865 642e 2049 6620  "be fetched. If 
-000539f0: 6f6e 6520 6f72 206d 6f72 6520 7573 6572  one or more user
-00053a00: 2069 6473 2061 7265 2067 6976 656e 2c20   ids are given, 
-00053a10: 7468 6520 4f70 656e 4944 206f 6620 220a  the OpenID of ".
-00053a20: 2020 2020 2020 2020 2274 6865 7365 2075          "these u
-00053a30: 7365 7273 2077 696c 6c20 6265 2066 6574  sers will be fet
-00053a40: 6368 6564 2e20 4173 2072 6573 706f 6e73  ched. As respons
-00053a50: 6520 7468 6520 7573 6572 2069 6428 7329  e the user id(s)
-00053a60: 2061 6e64 2022 0a20 2020 2020 2020 2022   and ".        "
-00053a70: 4f70 656e 4944 2873 2920 7769 6c6c 2062  OpenID(s) will b
-00053a80: 6520 7072 696e 7465 642e 222c 0a20 2020  e printed.",.   
-00053a90: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-00053aa0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-00053ab0: 222d 2d72 6f6f 6d2d 6765 742d 7669 7369  "--room-get-visi
-00053ac0: 6269 6c69 7479 222c 0a20 2020 2020 2020  bility",.       
-00053ad0: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
-00053ae0: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
-00053af0: 2265 7874 656e 6422 2c0a 2020 2020 2020  "extend",.      
-00053b00: 2020 6e61 7267 733d 222a 222c 2020 2320    nargs="*",  # 
-00053b10: 4e6f 6e65 2069 6620 6e6f 7420 7573 6564  None if not used
-00053b20: 2c20 5b5d 2069 7320 7573 6564 2077 6974  , [] is used wit
-00053b30: 686f 7574 2065 7874 7261 2061 7267 730a  hout extra args.
-00053b40: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
-00053b50: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
-00053b60: 723d 2252 4f4f 4d22 2c0a 2020 2020 2020  r="ROOM",.      
-00053b70: 2020 6865 6c70 3d22 4765 7420 7468 6520    help="Get the 
-00053b80: 7669 7369 6269 6c69 7479 206f 6620 6f6e  visibility of on
-00053b90: 6520 6f72 206d 6f72 6520 726f 6f6d 732e  e or more rooms.
-00053ba0: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
-00053bb0: 696c 733a 3a20 5072 6f76 6964 6520 7a65  ils:: Provide ze
-00053bc0: 726f 206f 7220 6d6f 7265 2072 6f6f 6d20  ro or more room 
-00053bd0: 6964 7320 6173 2061 7267 756d 656e 7473  ids as arguments
-00053be0: 2e20 220a 2020 2020 2020 2020 2249 6620  . ".        "If 
-00053bf0: 6e6f 2061 7267 756d 656e 7420 6973 2067  no argument is g
-00053c00: 6976 656e 2c20 7468 656e 2074 6865 2064  iven, then the d
-00053c10: 6566 6175 6c74 2072 6f6f 6d20 6f66 2022  efault room of "
-00053c20: 0a20 2020 2020 2020 2066 227b 5052 4f47  .        f"{PROG
-00053c30: 5f57 4954 484f 5554 5f45 5854 7d20 2861  _WITHOUT_EXT} (a
-00053c40: 7320 666f 756e 6420 696e 2063 7265 6465  s found in crede
-00053c50: 6e74 6961 6c73 2066 696c 6529 2077 696c  ntials file) wil
-00053c60: 6c20 6265 2075 7365 642e 2022 0a20 2020  l be used. ".   
-00053c70: 2020 2020 2022 466f 7220 6561 6368 2072       "For each r
-00053c80: 6f6f 6d20 7468 6520 7669 7369 6269 6c69  oom the visibili
-00053c90: 7479 2077 696c 6c20 6265 2070 7269 6e74  ty will be print
-00053ca0: 6564 2e20 4375 7272 656e 746c 792c 2074  ed. Currently, t
-00053cb0: 6869 7320 220a 2020 2020 2020 2020 2269  his ".        "i
-00053cc0: 7320 6569 7468 6572 2074 6865 2073 7472  s either the str
-00053cd0: 696e 6720 2770 7269 7661 7465 2720 6f72  ing 'private' or
-00053ce0: 2027 7075 626c 6963 272e 2022 0a20 2020   'public'. ".   
-00053cf0: 2020 2020 2022 4173 2072 6573 706f 6e73       "As respons
-00053d00: 6520 6f6e 6520 6c69 6e65 2070 6572 2072  e one line per r
-00053d10: 6f6f 6d20 7769 6c6c 2062 6520 7072 696e  oom will be prin
-00053d20: 7465 6420 746f 2073 7464 6f75 742e 222c  ted to stdout.",
-00053d30: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-00053d40: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-00053d50: 2020 2020 222d 2d72 6f6f 6d2d 6765 742d      "--room-get-
-00053d60: 7374 6174 6522 2c0a 2020 2020 2020 2020  state",.        
-00053d70: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
-00053d80: 2020 2020 2020 2020 6163 7469 6f6e 3d22          action="
-00053d90: 6578 7465 6e64 222c 0a20 2020 2020 2020  extend",.       
-00053da0: 206e 6172 6773 3d22 2a22 2c20 2023 204e   nargs="*",  # N
-00053db0: 6f6e 6520 6966 206e 6f74 2075 7365 642c  one if not used,
-00053dc0: 205b 5d20 6973 2075 7365 6420 7769 7468   [] is used with
-00053dd0: 6f75 7420 6578 7472 6120 6172 6773 0a20  out extra args. 
-00053de0: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
-00053df0: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
-00053e00: 3d22 524f 4f4d 222c 0a20 2020 2020 2020  ="ROOM",.       
-00053e10: 2068 656c 703d 2247 6574 2074 6865 2073   help="Get the s
-00053e20: 7461 7465 206f 6620 6f6e 6520 6f72 206d  tate of one or m
-00053e30: 6f72 6520 726f 6f6d 732e 2022 0a20 2020  ore rooms. ".   
-00053e40: 2020 2020 2022 4465 7461 696c 733a 3a50       "Details::P
-00053e50: 726f 7669 6465 207a 6572 6f20 6f72 206d  rovide zero or m
-00053e60: 6f72 6520 726f 6f6d 2069 6473 2061 7320  ore room ids as 
-00053e70: 6172 6775 6d65 6e74 732e 2022 0a20 2020  arguments. ".   
-00053e80: 2020 2020 2022 4966 206e 6f20 6172 6775       "If no argu
-00053e90: 6d65 6e74 2069 7320 6769 7665 6e2c 2074  ment is given, t
-00053ea0: 6865 6e20 7468 6520 6465 6661 756c 7420  hen the default 
-00053eb0: 726f 6f6d 206f 6620 220a 2020 2020 2020  room of ".      
-00053ec0: 2020 6622 7b50 524f 475f 5749 5448 4f55    f"{PROG_WITHOU
-00053ed0: 545f 4558 547d 2028 6173 2066 6f75 6e64  T_EXT} (as found
-00053ee0: 2069 6e20 6372 6564 656e 7469 616c 7320   in credentials 
-00053ef0: 6669 6c65 2920 7769 6c6c 2062 6520 7573  file) will be us
-00053f00: 6564 2e20 220a 2020 2020 2020 2020 2246  ed. ".        "F
-00053f10: 6f72 2065 6163 6820 726f 6f6d 2074 6865  or each room the
-00053f20: 2073 7461 7465 2077 696c 6c20 6265 2070   state will be p
-00053f30: 7269 6e74 6564 2e20 5468 6520 7374 6174  rinted. The stat
-00053f40: 6520 6973 2061 206c 6f6e 6720 220a 2020  e is a long ".  
-00053f50: 2020 2020 2020 226c 6973 7420 6f66 2065        "list of e
-00053f60: 7665 6e74 7320 696e 636c 7564 696e 6720  vents including 
-00053f70: 6576 656e 7473 206c 696b 6520 276d 2e72  events like 'm.r
-00053f80: 6f6f 6d2e 6372 6561 7465 272c 2022 0a20  oom.create', ". 
-00053f90: 2020 2020 2020 2022 276d 2e72 6f6f 6d2e         "'m.room.
-00053fa0: 656e 6372 7970 7469 6f6e 272c 2027 6d2e  encryption', 'm.
-00053fb0: 726f 6f6d 2e67 7565 7374 5f61 6363 6573  room.guest_acces
-00053fc0: 7327 2c20 220a 2020 2020 2020 2020 2227  s', ".        "'
-00053fd0: 6d2e 726f 6f6d 2e68 6973 746f 7279 5f76  m.room.history_v
-00053fe0: 6973 6962 696c 6974 7927 2c20 276d 2e72  isibility', 'm.r
-00053ff0: 6f6f 6d2e 6a6f 696e 5f72 756c 6573 272c  oom.join_rules',
-00054000: 2022 0a20 2020 2020 2020 2022 276d 2e72   ".        "'m.r
-00054010: 6f6f 6d2e 6d65 6d62 6572 272c 2027 6d2e  oom.member', 'm.
-00054020: 726f 6f6d 2e70 6f77 6572 5f6c 6576 656c  room.power_level
-00054030: 7327 2c20 6574 632e 2022 0a20 2020 2020  s', etc. ".     
-00054040: 2020 2022 4173 2072 6573 706f 6e73 6520     "As response 
-00054050: 6f6e 6520 6c69 6e65 2070 6572 2072 6f6f  one line per roo
-00054060: 6d20 7769 6c6c 2062 6520 7072 696e 7465  m will be printe
-00054070: 6420 746f 2073 7464 6f75 742e 2022 0a20  d to stdout. ". 
-00054080: 2020 2020 2020 2022 5468 6520 6c69 6e65         "The line
-00054090: 2063 616e 2062 6520 7665 7279 206c 6f6e   can be very lon
-000540a0: 6720 6173 2074 6865 206c 6973 7420 6f66  g as the list of
-000540b0: 2065 7665 6e74 7320 6361 6e20 6265 2076   events can be v
-000540c0: 6572 7920 6c61 7267 652e 2022 0a20 2020  ery large. ".   
-000540d0: 2020 2020 2022 546f 2067 6574 206f 7574       "To get out
-000540e0: 7075 7420 696e 746f 2061 2068 756d 616e  put into a human
-000540f0: 2072 6561 6461 626c 6520 666f 726d 2070   readable form p
-00054100: 6970 6520 6f75 7470 7574 2074 6872 6f75  ipe output throu
-00054110: 6768 2073 6564 2022 0a20 2020 2020 2020  gh sed ".       
-00054120: 2022 616e 6420 6a71 2061 7320 7368 6f77   "and jq as show
-00054130: 6e20 696e 2061 6e20 6578 616d 706c 6520  n in an example 
-00054140: 696e 2074 6573 7473 2f74 6573 742d 7365  in tests/test-se
-00054150: 7467 6574 2e73 682e 222c 0a20 2020 2029  tget.sh.",.    )
-00054160: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
-00054170: 6d65 6e74 280a 2020 2020 2020 2020 222d  ment(.        "-
-00054180: 2d64 656c 6574 652d 6465 7669 6365 222c  -delete-device",
-00054190: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-000541a0: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
-000541b0: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
-000541c0: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
-000541d0: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
-000541e0: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
-000541f0: 6574 6176 6172 3d22 4445 5649 4345 222c  etavar="DEVICE",
-00054200: 0a20 2020 2020 2020 2068 656c 703d 6622  .        help=f"
-00054210: 4465 6c65 7465 206f 6e65 206f 7220 6d75  Delete one or mu
-00054220: 6c74 6970 6c65 2064 6576 6963 6573 2e20  ltiple devices. 
-00054230: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
-00054240: 6c73 3a3a 2042 7920 6465 6661 756c 7420  ls:: By default 
-00054250: 6465 7669 6365 7320 6265 6c6f 6e67 696e  devices belongin
-00054260: 6720 220a 2020 2020 2020 2020 6622 746f  g ".        f"to
-00054270: 207b 5052 4f47 5f57 4954 484f 5554 5f45   {PROG_WITHOUT_E
-00054280: 5854 7d20 7769 6c6c 2062 6520 6465 6c65  XT} will be dele
-00054290: 7465 642e 2049 6620 7468 6520 6465 7669  ted. If the devi
-000542a0: 6365 7320 6265 6c6f 6e67 2022 0a20 2020  ces belong ".   
-000542b0: 2020 2020 2022 746f 2061 2064 6966 6665       "to a diffe
-000542c0: 7265 6e74 2075 7365 722c 2075 7365 2074  rent user, use t
-000542d0: 6865 202d 2d75 7365 7220 6172 6775 6d65  he --user argume
-000542e0: 6e74 2074 6f20 7370 6563 6966 7920 7468  nt to specify th
-000542f0: 6520 7573 6572 2c20 220a 2020 2020 2020  e user, ".      
-00054300: 2020 2269 2e65 2e20 6f77 6e65 722e 204f    "i.e. owner. O
-00054310: 6e6c 7920 220a 2020 2020 2020 2020 2265  nly ".        "e
-00054320: 7861 6374 6c79 206f 6e65 2075 7365 7220  xactly one user 
-00054330: 6361 6e20 6265 2073 7065 6369 6669 6564  can be specified
-00054340: 2077 6974 6820 7468 6520 6f70 7469 6f6e   with the option
-00054350: 616c 202d 2d75 7365 7220 6172 6775 6d65  al --user argume
-00054360: 6e74 2e20 220a 2020 2020 2020 2020 2244  nt. ".        "D
-00054370: 6576 6963 6520 6465 6c65 7469 6f6e 2072  evice deletion r
-00054380: 6571 7569 7265 7320 7468 6520 7573 6572  equires the user
-00054390: 2070 6173 7377 6f72 642e 2049 7420 6d75   password. It mu
-000543a0: 7374 2062 6520 7370 6563 6966 6965 6420  st be specified 
-000543b0: 220a 2020 2020 2020 2020 2277 6974 6820  ".        "with 
-000543c0: 7468 6520 2d2d 7061 7373 776f 7264 2061  the --password a
-000543d0: 7267 756d 656e 742e 2049 6620 7468 6520  rgument. If the 
-000543e0: 7365 7276 6572 2075 7365 7320 6f6e 6c79  server uses only
-000543f0: 2048 5454 5020 2861 6e64 2022 0a20 2020   HTTP (and ".   
-00054400: 2020 2020 2022 6e6f 7420 4854 5450 5329       "not HTTPS)
-00054410: 2c20 7468 656e 2074 6865 2070 6173 7377  , then the passw
-00054420: 6f72 6420 6361 6e20 6265 2076 6973 6962  ord can be visib
-00054430: 6c65 2074 6f20 6174 7461 636b 6572 732e  le to attackers.
-00054440: 2048 656e 6365 2c20 220a 2020 2020 2020   Hence, ".      
-00054450: 2020 2269 6620 7468 6520 7365 7276 6572    "if the server
-00054460: 2064 6f65 7320 6e6f 7420 7375 7070 6f72   does not suppor
-00054470: 7420 4854 5450 5320 7468 6973 206f 7065  t HTTPS this ope
-00054480: 7261 7469 6f6e 2069 7320 6469 7363 6f75  ration is discou
-00054490: 7261 6765 642e 222c 0a20 2020 2029 0a20  raged.",.    ). 
-000544a0: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
-000544b0: 6e74 280a 2020 2020 2020 2020 222d 2d72  nt(.        "--r
-000544c0: 6f6f 6d2d 7265 6461 6374 222c 0a20 2020  oom-redact",.   
-000544d0: 2020 2020 2022 2d2d 726f 6f6d 2d64 656c       "--room-del
-000544e0: 6574 652d 636f 6e74 656e 7422 2c0a 2020  ete-content",.  
-000544f0: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
-00054500: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
-00054510: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
-00054520: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
-00054530: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-00054540: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
-00054550: 7661 723d 2252 4f4f 4d5f 4944 2045 5645  var="ROOM_ID EVE
-00054560: 4e54 5f49 4420 5245 4153 4f4e 222c 0a20  NT_ID REASON",. 
-00054570: 2020 2020 2020 2068 656c 703d 2253 7472         help="Str
-00054580: 6970 2069 6e66 6f72 6d61 7469 6f6e 206f  ip information o
-00054590: 7574 206f 6620 6f6e 6520 6f72 2073 6576  ut of one or sev
-000545a0: 6572 616c 2065 7665 6e74 732e 2022 0a20  eral events. ". 
-000545b0: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
-000545c0: 3a20 220a 2020 2020 2020 2020 2253 7472  : ".        "Str
-000545d0: 6970 2069 6e66 6f72 6d61 7469 6f6e 2066  ip information f
-000545e0: 726f 6d20 6576 656e 7473 2c20 652e 672e  rom events, e.g.
-000545f0: 206d 6573 7361 6765 732e 2022 0a20 2020   messages. ".   
-00054600: 2020 2020 2022 5265 6461 6374 2069 7320       "Redact is 
-00054610: 7573 6564 2069 6e20 7468 6520 6d65 616e  used in the mean
-00054620: 696e 6720 6f66 2027 7374 7269 702c 2077  ing of 'strip, w
-00054630: 6970 652c 2062 6c61 636b 2d6f 7574 272c  ipe, black-out',
-00054640: 206e 6f74 2022 0a20 2020 2020 2020 2022   not ".        "
-00054650: 696e 2074 6865 206d 6561 6e69 6e67 206f  in the meaning o
-00054660: 6620 2765 6469 7427 2e20 5468 6973 2061  f 'edit'. This a
-00054670: 6374 696f 6e20 7265 6d6f 7665 732c 2064  ction removes, d
-00054680: 656c 6574 6573 2074 6865 2063 6f6e 7465  eletes the conte
-00054690: 6e74 2022 0a20 2020 2020 2020 2022 6f66  nt ".        "of
-000546a0: 2061 6e20 6576 656e 7420 7768 696c 6520   an event while 
-000546b0: 6e6f 7420 7265 6d6f 7669 6e67 2074 6865  not removing the
-000546c0: 2065 7665 6e74 2e20 596f 7520 6361 6e20   event. You can 
-000546d0: 7769 7065 2074 6578 7420 6672 6f6d 2061  wipe text from a
-000546e0: 2022 0a20 2020 2020 2020 2022 7072 6576   ".        "prev
-000546f0: 696f 7573 206d 6573 7361 6765 2c20 6574  ious message, et
-00054700: 632e 2054 7970 6963 616c 204d 6174 7269  c. Typical Matri
-00054710: 7820 636c 6965 6e74 7320 6c69 6b65 2045  x clients like E
-00054720: 6c65 6d65 6e74 2077 696c 6c20 220a 2020  lement will ".  
-00054730: 2020 2020 2020 2264 656c 6574 6520 6d65        "delete me
-00054740: 7373 6167 6573 2c20 696d 6167 6573 2061  ssages, images a
-00054750: 6e64 206f 7468 6572 206f 626a 6563 7473  nd other objects
-00054760: 2066 726f 6d20 7468 6520 4755 4920 6f6e   from the GUI on
-00054770: 6365 2074 6865 7920 220a 2020 2020 2020  ce they ".      
-00054780: 2020 2268 6176 6520 6265 656e 2072 6564    "have been red
-00054790: 6163 7465 642e 2022 0a20 2020 2020 2020  acted. ".       
-000547a0: 2022 536f 2c20 2d2d 726f 6f6d 2d72 6564   "So, --room-red
-000547b0: 6163 7420 6973 2061 2077 6179 2074 6f20  act is a way to 
-000547c0: 6465 6c65 7465 2061 206d 6573 7361 6765  delete a message
-000547d0: 2c20 696d 6167 6573 2c20 6574 632e 2022  , images, etc. "
-000547e0: 0a20 2020 2020 2020 2022 5468 6520 636f  .        "The co
-000547f0: 6e74 656e 7420 6973 2022 0a20 2020 2020  ntent is ".     
-00054800: 2020 2022 7769 7065 642c 2074 6865 2047     "wiped, the G
-00054810: 5549 2064 656c 6574 6573 2074 6865 206d  UI deletes the m
-00054820: 6573 7361 6765 2c20 6275 7420 7468 6520  essage, but the 
-00054830: 7365 7276 6572 206b 6565 7073 2074 6865  server keeps the
-00054840: 2065 7665 6e74 2022 0a20 2020 2020 2020   event ".       
-00054850: 2022 6869 7374 6f72 792e 204e 6f74 652c   "history. Note,
-00054860: 2077 6869 6c65 2074 6869 7320 6465 6c65   while this dele
-00054870: 7465 7320 6672 6f6d 2074 6865 2063 6c69  tes from the cli
-00054880: 656e 7420 2847 5549 2c20 652e 672e 2022  ent (GUI, e.g. "
-00054890: 0a20 2020 2020 2020 2022 456c 656d 656e  .        "Elemen
-000548a0: 7429 2c20 6974 2064 6f65 7320 6e6f 7420  t), it does not 
-000548b0: 6465 6c65 7465 2066 726f 6d20 7468 6520  delete from the 
-000548c0: 6461 7461 6261 7365 206f 6e20 7468 6520  database on the 
-000548d0: 7365 7276 6572 2e20 220a 2020 2020 2020  server. ".      
-000548e0: 2020 2253 6f2c 2074 6869 7320 6361 6c6c    "So, this call
-000548f0: 2069 7320 6e6f 7420 6120 7761 7920 746f   is not a way to
-00054900: 2063 6c65 616e 2075 7020 7468 6520 7365   clean up the se
-00054910: 7276 6572 2064 6174 6162 6173 652e 2022  rver database. "
-00054920: 0a20 2020 2020 2020 2022 4561 6368 2072  .        "Each r
-00054930: 6564 6163 7420 2877 6970 652c 2073 7472  edact (wipe, str
-00054940: 6970 2c20 6465 6c65 7465 2920 6f70 6572  ip, delete) oper
-00054950: 6174 696f 6e20 7265 7175 6972 6573 2065  ation requires e
-00054960: 7861 6374 6c79 2033 2022 0a20 2020 2020  xactly 3 ".     
-00054970: 2020 2022 6172 6775 6d65 6e74 732e 2022     "arguments. "
-00054980: 0a20 2020 2020 2020 2022 5468 6520 6172  .        "The ar
-00054990: 6775 6d65 6e74 2074 7269 706c 6573 2061  gument triples a
-000549a0: 7265 3a20 220a 2020 2020 2020 2020 2228  re: ".        "(
-000549b0: 6129 2074 6865 2072 6f6f 6d20 6964 2e20  a) the room id. 
-000549c0: 220a 2020 2020 2020 2020 2228 6229 2074  ".        "(b) t
-000549d0: 6865 2069 6420 6f66 2074 6865 2065 7665  he id of the eve
-000549e0: 6e74 2074 6f20 6265 2072 6564 6163 7465  nt to be redacte
-000549f0: 642e 2022 0a20 2020 2020 2020 2022 2863  d. ".        "(c
-00054a00: 2920 6120 7374 7269 6e67 2063 6f6e 7461  ) a string conta
-00054a10: 696e 696e 6720 7468 6520 7265 6173 6f6e  ining the reason
-00054a20: 2066 6f72 2074 6865 2072 6564 6163 7469   for the redacti
-00054a30: 6f6e 2e20 5573 6520 2727 2069 6620 796f  on. Use '' if yo
-00054a40: 7520 220a 2020 2020 2020 2020 2264 6f20  u ".        "do 
-00054a50: 6e6f 7420 7761 6e74 2074 6f20 6769 7665  not want to give
-00054a60: 2061 2072 6561 736f 6e2e 2022 0a20 2020   a reason. ".   
-00054a70: 2020 2020 2022 536f 2c20 7468 6520 746f       "So, the to
-00054a80: 7461 6c20 6e75 6d62 6572 206f 6620 6172  tal number of ar
-00054a90: 6775 6d65 6e74 7320 7573 6564 2077 6974  guments used wit
-00054aa0: 6820 2d2d 726f 6f6d 2d72 6564 6163 7420  h --room-redact 
-00054ab0: 6d75 7374 2062 6520 6120 220a 2020 2020  must be a ".    
-00054ac0: 2020 2020 226d 756c 7469 706c 6520 6f66      "multiple of
-00054ad0: 2033 2c20 6275 7420 7765 2061 6c73 6f20   3, but we also 
-00054ae0: 6163 6365 7074 2032 2069 6e20 7768 6963  accept 2 in whic
-00054af0: 6820 6361 7365 206f 6e6c 7920 6f6e 6520  h case only one 
-00054b00: 220a 2020 2020 2020 2020 2272 6564 6163  ".        "redac
-00054b10: 7469 6f6e 2077 696c 6c20 6265 2064 6f6e  tion will be don
-00054b20: 6520 7769 7468 6f75 7420 7370 6563 6966  e without specif
-00054b30: 7969 6e67 2061 2072 6561 736f 6e2e 2022  ying a reason. "
-00054b40: 0a20 2020 2020 2020 2022 4576 656e 7420  .        "Event 
-00054b50: 6964 7320 7374 6172 7420 7769 7468 2074  ids start with t
-00054b60: 6865 2064 6f6c 6c61 7220 7369 676e 2028  he dollar sign (
-00054b70: 2429 2e20 4465 7065 6e64 696e 6720 6f6e  $). Depending on
-00054b80: 2079 6f75 7220 7368 656c 6c2c 2022 0a20   your shell, ". 
-00054b90: 2020 2020 2020 2022 796f 7520 6d69 6768         "you migh
-00054ba0: 7420 6861 7665 2074 6f20 6573 6361 7065  t have to escape
-00054bb0: 2074 6865 2027 2427 2074 6f20 275c 5c24   the '$' to '\\$
-00054bc0: 272e 202d 2d72 6f6f 6d2d 6465 6c65 7465  '. --room-delete
-00054bd0: 2d63 6f6e 7465 6e74 2069 7320 220a 2020  -content is ".  
-00054be0: 2020 2020 2020 2261 6e20 616c 6961 7320        "an alias 
-00054bf0: 666f 7220 2d2d 726f 6f6d 2d72 6564 6163  for --room-redac
-00054c00: 742e 2054 6865 7920 6361 6e20 6265 2075  t. They can be u
-00054c10: 7365 6420 696e 7465 7263 6861 6e67 6561  sed interchangea
-00054c20: 626c 792e 222c 0a20 2020 2029 0a20 2020  bly.",.    ).   
-00054c30: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-00054c40: 280a 2020 2020 2020 2020 2320 6e6f 2073  (.        # no s
-00054c50: 696e 676c 6520 6368 6172 2066 6c61 670a  ingle char flag.
-00054c60: 2020 2020 2020 2020 222d 2d77 686f 616d          "--whoam
-00054c70: 6922 2c0a 2020 2020 2020 2020 7265 7175  i",.        requ
-00054c80: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
-00054c90: 2020 2020 6163 7469 6f6e 3d22 7374 6f72      action="stor
-00054ca0: 655f 7472 7565 222c 0a20 2020 2020 2020  e_true",.       
-00054cb0: 2068 656c 703d 2250 7269 6e74 2079 6f75   help="Print you
-00054cc0: 7220 7573 6572 2069 642e 2022 0a20 2020  r user id. ".   
-00054cd0: 2020 2020 2066 2244 6574 6169 6c73 3a3a       f"Details::
-00054ce0: 2050 7269 6e74 2074 6865 2075 7365 7220   Print the user 
-00054cf0: 6964 2075 7365 6420 6279 207b 5052 4f47  id used by {PROG
-00054d00: 5f57 4954 484f 5554 5f45 5854 7d20 2869  _WITHOUT_EXT} (i
-00054d10: 7473 656c 6629 2e20 220a 2020 2020 2020  tself). ".      
-00054d20: 2020 224f 6e65 2063 616e 2067 6574 2022    "One can get "
-00054d30: 0a20 2020 2020 2020 2022 7468 6973 2069  .        "this i
-00054d40: 6e66 6f72 6d61 7469 6f6e 2061 6c73 6f20  nformation also 
-00054d50: 6279 206c 6f6f 6b69 6e67 2061 7420 7468  by looking at th
-00054d60: 6520 6372 6564 656e 7469 616c 7320 6669  e credentials fi
-00054d70: 6c65 2e22 2c0a 2020 2020 290a 2020 2020  le.",.    ).    
-00054d80: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-00054d90: 0a20 2020 2020 2020 2023 206e 6f20 7369  .        # no si
-00054da0: 6e67 6c65 2063 6861 7220 666c 6167 0a20  ngle char flag. 
-00054db0: 2020 2020 2020 2022 2d2d 6e6f 2d73 736c         "--no-ssl
-00054dc0: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
-00054dd0: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
-00054de0: 2020 2061 6374 696f 6e3d 2273 746f 7265     action="store
-00054df0: 5f74 7275 6522 2c0a 2020 2020 2020 2020  _true",.        
-00054e00: 6465 6661 756c 743d 4e4f 5f53 534c 5f55  default=NO_SSL_U
-00054e10: 4e55 5345 445f 4445 4641 554c 542c 2020  NUSED_DEFAULT,  
-00054e20: 2320 7768 656e 206f 7074 696f 6e20 6973  # when option is
-00054e30: 6e27 7420 7573 6564 0a20 2020 2020 2020  n't used.       
-00054e40: 2068 656c 703d 2253 6b69 7020 5353 4c20   help="Skip SSL 
-00054e50: 7665 7269 6669 6361 7469 6f6e 2e20 220a  verification. ".
-00054e60: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
-00054e70: 3a3a 2042 7920 6465 6661 756c 7420 2869  :: By default (i
-00054e80: 6620 7468 6973 206f 7074 696f 6e20 6973  f this option is
-00054e90: 206e 6f74 2075 7365 6429 2022 0a20 2020   not used) ".   
-00054ea0: 2020 2020 2022 7468 6520 5353 4c20 6365       "the SSL ce
-00054eb0: 7274 6966 6963 6174 6520 6973 2076 616c  rtificate is val
-00054ec0: 6964 6174 6564 2066 6f72 2074 6865 2063  idated for the c
-00054ed0: 6f6e 6e65 6374 696f 6e2e 2042 7574 2c20  onnection. But, 
-00054ee0: 6966 2074 6869 7320 220a 2020 2020 2020  if this ".      
-00054ef0: 2020 226f 7074 696f 6e20 6973 2075 7365    "option is use
-00054f00: 642c 2074 6865 6e20 7468 6520 5353 4c20  d, then the SSL 
-00054f10: 6365 7274 6966 6963 6174 6520 7661 6c69  certificate vali
-00054f20: 6461 7469 6f6e 2077 696c 6c20 6265 2073  dation will be s
-00054f30: 6b69 7070 6564 2e20 220a 2020 2020 2020  kipped. ".      
-00054f40: 2020 2254 6869 7320 6973 2075 7365 6675    "This is usefu
-00054f50: 6c20 666f 7220 686f 6d65 2d73 6572 7665  l for home-serve
-00054f60: 7273 2074 6861 7420 6861 7665 206e 6f20  rs that have no 
-00054f70: 5353 4c20 6365 7274 6966 6963 6174 652e  SSL certificate.
-00054f80: 2022 0a20 2020 2020 2020 2027 4966 2075   ".        'If u
-00054f90: 7365 6420 746f 6765 7468 6572 2077 6974  sed together wit
-00054fa0: 6820 7468 6520 222d 2d73 736c 2d63 6572  h the "--ssl-cer
-00054fb0: 7469 6669 6361 7465 2220 270a 2020 2020  tificate" '.    
-00054fc0: 2020 2020 2270 6172 616d 6574 6572 2c20      "parameter, 
-00054fd0: 7468 6973 206f 7074 696f 6e20 6973 206d  this option is m
-00054fe0: 6561 6e69 6e67 6c65 7373 2061 6e64 2061  eaningless and a
-00054ff0: 6e20 6572 726f 7220 7769 6c6c 2062 6520  n error will be 
-00055000: 7261 6973 6564 2e22 2c0a 2020 2020 290a  raised.",.    ).
-00055010: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
-00055020: 656e 7428 0a20 2020 2020 2020 2023 206e  ent(.        # n
-00055030: 6f20 7369 6e67 6c65 2063 6861 7220 666c  o single char fl
-00055040: 6167 0a20 2020 2020 2020 2022 2d2d 7373  ag.        "--ss
-00055050: 6c2d 6365 7274 6966 6963 6174 6522 2c0a  l-certificate",.
-00055060: 2020 2020 2020 2020 7265 7175 6972 6564          required
-00055070: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-00055080: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
-00055090: 2020 6465 6661 756c 743d 5353 4c5f 4345    default=SSL_CE
-000550a0: 5254 4946 4943 4154 455f 4445 4641 554c  RTIFICATE_DEFAUL
-000550b0: 542c 2020 2320 7768 656e 206f 7074 696f  T,  # when optio
-000550c0: 6e20 6973 6e27 7420 7573 6564 0a20 2020  n isn't used.   
-000550d0: 2020 2020 206d 6574 6176 6172 3d22 5353       metavar="SS
-000550e0: 4c5f 4345 5254 4946 4943 4154 455f 4649  L_CERTIFICATE_FI
-000550f0: 4c45 222c 0a20 2020 2020 2020 2068 656c  LE",.        hel
-00055100: 703d 2255 7365 2079 6f75 7220 6f77 6e20  p="Use your own 
-00055110: 5353 4c20 6365 7274 6966 6963 6174 652e  SSL certificate.
-00055120: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
-00055130: 696c 733a 3a20 5573 6520 7468 6973 206f  ils:: Use this o
-00055140: 7074 696f 6e20 746f 2075 7365 2022 0a20  ption to use ". 
-00055150: 2020 2020 2020 2022 796f 7572 206f 776e         "your own
-00055160: 206c 6f63 616c 2053 534c 2063 6572 7469   local SSL certi
-00055170: 6669 6361 7465 2066 696c 652e 2022 0a20  ficate file. ". 
-00055180: 2020 2020 2020 2022 5468 6973 2069 7320         "This is 
-00055190: 616e 206f 7074 696f 6e61 6c20 7061 7261  an optional para
-000551a0: 6d65 7465 722e 2054 6869 7320 6973 2075  meter. This is u
-000551b0: 7365 6675 6c20 666f 7220 686f 6d65 2073  seful for home s
-000551c0: 6572 7665 7273 2074 6861 7420 220a 2020  ervers that ".  
-000551d0: 2020 2020 2020 2268 6176 6520 7468 6569        "have thei
-000551e0: 7220 6f77 6e20 220a 2020 2020 2020 2020  r own ".        
-000551f0: 2253 534c 2063 6572 7469 6669 6361 7465  "SSL certificate
-00055200: 2e20 5468 6973 2061 6c6c 6f77 7320 796f  . This allows yo
-00055210: 7520 746f 2075 7365 2048 5454 5053 2f54  u to use HTTPS/T
-00055220: 4c53 2066 6f72 2074 6865 2063 6f6e 6e65  LS for the conne
-00055230: 6374 696f 6e20 220a 2020 2020 2020 2020  ction ".        
-00055240: 2277 6869 6c65 2075 7369 6e67 2079 6f75  "while using you
-00055250: 7220 6f77 6e20 6c6f 6361 6c20 5353 4c20  r own local SSL 
-00055260: 6365 7274 6966 6963 6174 652e 2053 7065  certificate. Spe
-00055270: 6369 6679 2074 6865 2070 6174 6820 616e  cify the path an
-00055280: 6420 220a 2020 2020 2020 2020 2766 696c  d ".        'fil
-00055290: 6520 746f 2079 6f75 7220 5353 4c20 6365  e to your SSL ce
-000552a0: 7274 6966 6963 6174 652e 2049 6620 7573  rtificate. If us
-000552b0: 6564 2074 6f67 6574 6865 7220 7769 7468  ed together with
-000552c0: 2074 6865 2022 2d2d 6e6f 2d73 736c 2220   the "--no-ssl" 
-000552d0: 270a 2020 2020 2020 2020 2270 6172 616d  '.        "param
-000552e0: 6574 6572 2c20 7468 6973 206f 7074 696f  eter, this optio
-000552f0: 6e20 6973 206d 6561 6e69 6e67 6c65 7373  n is meaningless
-00055300: 2061 6e64 2061 6e20 6572 726f 7220 7769   and an error wi
-00055310: 6c6c 2062 6520 7261 6973 6564 2e22 2c0a  ll be raised.",.
-00055320: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
-00055330: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
-00055340: 2020 2022 2d2d 6669 6c65 2d6e 616d 6522     "--file-name"
-00055350: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
-00055360: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
-00055370: 2020 6163 7469 6f6e 3d22 6578 7465 6e64    action="extend
-00055380: 222c 0a20 2020 2020 2020 206e 6172 6773  ",.        nargs
-00055390: 3d22 2b22 2c0a 2020 2020 2020 2020 7479  ="+",.        ty
-000553a0: 7065 3d73 7472 2c0a 2020 2020 2020 2020  pe=str,.        
-000553b0: 6d65 7461 7661 723d 2246 494c 4522 2c0a  metavar="FILE",.
-000553c0: 2020 2020 2020 2020 6865 6c70 3d22 5370          help="Sp
-000553d0: 6563 6966 7920 6f6e 6520 6f72 206d 756c  ecify one or mul
-000553e0: 7469 706c 6520 6669 6c65 206e 616d 6573  tiple file names
-000553f0: 2066 6f72 2073 6f6d 6520 6163 7469 6f6e   for some action
-00055400: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
-00055410: 7461 696c 733a 3a20 5468 6973 2069 7320  tails:: This is 
-00055420: 616e 206f 7074 696f 6e61 6c20 6172 6775  an optional argu
-00055430: 6d65 6e74 2e20 5573 6520 7468 6973 206f  ment. Use this o
-00055440: 7074 696f 6e20 220a 2020 2020 2020 2020  ption ".        
-00055450: 2269 6e20 636f 6d62 696e 6174 696f 6e20  "in combination 
-00055460: 7769 7468 206f 7074 696f 6e73 206c 696b  with options lik
-00055470: 6520 2d2d 646f 776e 6c6f 6164 2074 6f20  e --download to 
-00055480: 7370 6563 6966 7920 6f6e 6520 6f72 2022  specify one or "
-00055490: 0a20 2020 2020 2020 2022 6d75 6c74 6970  .        "multip
-000554a0: 6c65 2066 696c 6520 6e61 6d65 732e 2022  le file names. "
-000554b0: 0a20 2020 2020 2020 2022 4967 6e6f 7265  .        "Ignore
-000554c0: 6420 6966 2075 7365 6420 6279 2069 7473  d if used by its
-000554d0: 656c 6620 7769 7468 6f75 7420 616e 2061  elf without an a
-000554e0: 7070 726f 7072 6961 7465 2063 6f72 7265  ppropriate corre
-000554f0: 7370 6f6e 6469 6e67 2022 0a20 2020 2020  sponding ".     
-00055500: 2020 2022 6163 7469 6f6e 2e22 2c0a 2020     "action.",.  
-00055510: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
-00055520: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
-00055530: 2022 2d2d 6b65 792d 6469 6374 222c 0a20   "--key-dict",. 
-00055540: 2020 2020 2020 2072 6571 7569 7265 643d         required=
-00055550: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
-00055560: 6374 696f 6e3d 2265 7874 656e 6422 2c0a  ction="extend",.
-00055570: 2020 2020 2020 2020 6e61 7267 733d 222b          nargs="+
-00055580: 222c 0a20 2020 2020 2020 2074 7970 653d  ",.        type=
-00055590: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
-000555a0: 6176 6172 3d22 4b45 595f 4449 4354 494f  avar="KEY_DICTIO
-000555b0: 4e41 5259 222c 0a20 2020 2020 2020 2068  NARY",.        h
-000555c0: 656c 703d 2253 7065 6369 6679 206f 6e65  elp="Specify one
-000555d0: 206f 7220 6d75 6c74 6970 6c65 206b 6579   or multiple key
-000555e0: 2064 6963 7469 6f6e 6172 6965 7320 666f   dictionaries fo
-000555f0: 7220 6465 6372 7970 7469 6f6e 2e20 220a  r decryption. ".
-00055600: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
-00055610: 3a3a 204f 6e65 206f 7220 6d75 6c74 6970  :: One or multip
-00055620: 6c65 2064 6563 7279 7074 696f 6e20 220a  le decryption ".
-00055630: 2020 2020 2020 2020 2264 6963 7469 6f6e          "diction
-00055640: 6172 6965 7320 6172 6520 7072 6f76 6964  aries are provid
-00055650: 6564 2062 7920 7468 6520 2d2d 7570 6c6f  ed by the --uplo
-00055660: 6164 2061 6374 696f 6e20 6173 2061 2072  ad action as a r
-00055670: 6573 756c 742e 2022 0a20 2020 2020 2020  esult. ".       
-00055680: 2022 4120 6465 6372 7970 7469 6f6e 2064   "A decryption d
-00055690: 6963 7469 6f6e 6172 7920 6973 2061 2073  ictionary is a s
-000556a0: 7472 696e 6720 6c69 6b65 2074 6869 733a  tring like this:
-000556b0: 2022 0a20 2020 2020 2020 2022 5c22 7b27   ".        "\"{'
-000556c0: 7627 3a20 2776 3227 2c20 276b 6579 273a  v': 'v2', 'key':
-000556d0: 207b 276b 7479 273a 2027 6f63 7427 2c20   {'kty': 'oct', 
-000556e0: 2761 6c67 273a 2027 4132 3536 4354 5227  'alg': 'A256CTR'
-000556f0: 2c20 2765 7874 273a 2054 7275 652c 2022  , 'ext': True, "
-00055700: 0a20 2020 2020 2020 2022 276b 273a 2027  .        "'k': '
-00055710: 736f 6d65 6b65 7927 2c20 276b 6579 5f6f  somekey', 'key_o
-00055720: 7073 273a 205b 2765 6e63 7279 7074 272c  ps': ['encrypt',
-00055730: 2027 6465 6372 7970 7427 5d7d 2c20 220a   'decrypt']}, ".
-00055740: 2020 2020 2020 2020 2227 6976 273a 2027          "'iv': '
-00055750: 736f 6d65 6976 272c 2027 6861 7368 6573  someiv', 'hashes
-00055760: 273a 207b 2773 6861 3235 3627 3a20 2773  ': {'sha256': 's
-00055770: 6f6d 6553 4841 277d 7d5c 222e 2049 6620  omeSHA'}}\". If 
-00055780: 796f 7520 6861 7665 2061 2022 0a20 2020  you have a ".   
-00055790: 2020 2020 2022 6c69 7374 206f 6620 6b65       "list of ke
-000557a0: 7920 6469 6374 696f 6e61 7269 6573 2061  y dictionaries a
-000557b0: 6e64 2077 616e 7420 746f 2073 6b69 7020  nd want to skip 
-000557c0: 6f6e 652c 2075 7365 2074 6865 2065 6d70  one, use the emp
-000557d0: 7479 2073 7472 696e 672e 222c 0a20 2020  ty string.",.   
-000557e0: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-000557f0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-00055800: 222d 2d70 6c61 696e 222c 0a20 2020 2020  "--plain",.     
-00055810: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-00055820: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
-00055830: 6e3d 2273 746f 7265 5f74 7275 6522 2c0a  n="store_true",.
-00055840: 2020 2020 2020 2020 6865 6c70 3d22 4469          help="Di
-00055850: 7361 626c 6520 656e 6372 7970 7469 6f6e  sable encryption
-00055860: 2066 6f72 2061 2073 7065 6369 6669 6320   for a specific 
-00055870: 6163 7469 6f6e 2e20 220a 2020 2020 2020  action. ".      
-00055880: 2020 2244 6574 6169 6c73 3a3a 2042 7920    "Details:: By 
-00055890: 6465 6661 756c 742c 2022 0a20 2020 2020  default, ".     
-000558a0: 2020 2022 6576 6572 7974 6869 6e67 2069     "everything i
-000558b0: 7320 616c 7761 7973 2065 6e63 7279 7074  s always encrypt
-000558c0: 6564 2e20 220a 2020 2020 2020 2020 2241  ed. ".        "A
-000558d0: 6374 696f 6e73 2074 6861 7420 7375 7070  ctions that supp
-000558e0: 6f72 7420 7468 6973 206f 7074 696f 6e20  ort this option 
-000558f0: 6172 653a 202d 2d75 706c 6f61 642c 202d  are: --upload, -
-00055900: 2d72 6f6f 6d2d 6372 6561 7465 2c20 220a  -room-create, ".
-00055910: 2020 2020 2020 2020 2261 6e64 202d 2d72          "and --r
-00055920: 6f6f 6d2d 646d 2d63 7265 6174 652e 2022  oom-dm-create. "
-00055930: 0a20 2020 2020 2020 2022 526f 6f6d 7320  .        "Rooms 
-00055940: 6172 6520 6279 2064 6566 6175 6c74 2063  are by default c
-00055950: 7265 6174 6564 2065 6e63 7279 7074 6564  reated encrypted
-00055960: 3b20 220a 2020 2020 2020 2020 2274 6f20  ; ".        "to 
-00055970: 6f76 6572 7772 6974 6520 7468 6174 2061  overwrite that a
-00055980: 6e64 2074 6f20 6372 6561 7465 2061 2072  nd to create a r
-00055990: 6f6f 6d20 7769 7468 2065 6e63 7279 7074  oom with encrypt
-000559a0: 696f 6e20 6469 7361 626c 6564 2022 0a20  ion disabled ". 
-000559b0: 2020 2020 2020 2022 7573 6520 272d 2d70         "use '--p
-000559c0: 6c61 696e 272e 2053 6565 2074 6865 2069  lain'. See the i
-000559d0: 6e64 6976 6964 7561 6c20 636f 6d6d 616e  ndividual comman
-000559e0: 6473 2e22 2c0a 2020 2020 290a 2020 2020  ds.",.    ).    
-000559f0: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-00055a00: 0a20 2020 2020 2020 2022 2d2d 7365 7061  .        "--sepa
-00055a10: 7261 746f 7222 2c0a 2020 2020 2020 2020  rator",.        
-00055a20: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
-00055a30: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
-00055a40: 2c0a 2020 2020 2020 2020 6465 6661 756c  ,.        defaul
-00055a50: 743d 4445 4641 554c 545f 5345 5041 5241  t=DEFAULT_SEPARA
-00055a60: 544f 522c 2020 2320 6465 6661 756c 7473  TOR,  # defaults
-00055a70: 2074 6f20 5345 5020 6966 206e 6f74 2075   to SEP if not u
-00055a80: 7365 640a 2020 2020 2020 2020 2320 5465  sed.        # Te
-00055a90: 7874 2069 7320 7363 616e 6e65 6420 616e  xt is scanned an
-00055aa0: 6420 7265 7065 6174 6564 2073 7061 6365  d repeated space
-00055ab0: 7320 6172 6520 7265 6d6f 7665 732c 2073  s are removes, s
-00055ac0: 6f20 2220 2020 2022 0a20 2020 2020 2020  o "    ".       
-00055ad0: 2023 206f 7220 7b44 4546 4155 4c54 5f53   # or {DEFAULT_S
-00055ae0: 4550 4152 4154 4f52 7d20 7769 6c6c 2062  EPARATOR} will b
-00055af0: 6520 7472 756e 6361 7465 6420 746f 2022  e truncated to "
-00055b00: 2022 2e20 4865 6e63 6520 2234 2073 7061   ". Hence "4 spa
-00055b10: 6365 7322 0a20 2020 2020 2020 206d 6574  ces".        met
-00055b20: 6176 6172 3d22 5345 5041 5241 544f 5222  avar="SEPARATOR"
-00055b30: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
-00055b40: 5365 7420 6120 6375 7374 6f6d 2073 6570  Set a custom sep
-00055b50: 6172 6174 6f72 2075 7365 6420 666f 7220  arator used for 
-00055b60: 6365 7274 6169 6e20 7072 696e 7420 6f75  certain print ou
-00055b70: 7473 2e20 220a 2020 2020 2020 2020 2244  ts. ".        "D
-00055b80: 6574 6169 6c73 3a3a 2042 7920 6465 6661  etails:: By defa
-00055b90: 756c 742c 2069 2e65 2e20 6966 202d 2d73  ult, i.e. if --s
-00055ba0: 6570 6172 6174 6f72 2069 7320 6e6f 7420  eparator is not 
-00055bb0: 7573 6564 2c20 220a 2020 2020 2020 2020  used, ".        
-00055bc0: 2234 2073 7061 6365 7320 6172 6520 7573  "4 spaces are us
-00055bd0: 6564 2061 7320 220a 2020 2020 2020 2020  ed as ".        
-00055be0: 2273 6570 6172 6174 6f72 2062 6574 7765  "separator betwe
-00055bf0: 656e 2063 6f6c 756d 6e73 2069 6e20 7072  en columns in pr
-00055c00: 696e 7420 7374 6174 656d 656e 7473 2e20  int statements. 
-00055c10: 596f 7520 636f 756c 6420 7365 7420 220a  You could set ".
-00055c20: 2020 2020 2020 2020 2269 7420 746f 2027          "it to '
-00055c30: 5c5c 7427 2069 6620 796f 7520 7072 6566  \\t' if you pref
-00055c40: 6572 2061 2074 6162 2c20 6275 7420 7461  er a tab, but ta
-00055c50: 6273 2061 7265 2075 7375 616c 6c79 2072  bs are usually r
-00055c60: 6570 6c61 6365 6420 220a 2020 2020 2020  eplaced ".      
-00055c70: 2020 2277 6974 6820 7370 6163 6573 2062    "with spaces b
-00055c80: 7920 7468 6520 7465 726d 696e 616c 2e20  y the terminal. 
-00055c90: 536f 2c20 7468 6174 206d 6967 6874 206e  So, that might n
-00055ca0: 6f74 2067 6976 6520 796f 7520 7768 6174  ot give you what
-00055cb0: 2079 6f75 2022 0a20 2020 2020 2020 2022   you ".        "
-00055cc0: 7761 6e74 2e20 4d61 7962 6520 2720 7c7c  want. Maybe ' ||
-00055cd0: 2027 2069 7320 616e 2061 6c74 6572 6e61   ' is an alterna
-00055ce0: 7469 7665 2063 686f 6963 652e 222c 0a20  tive choice.",. 
-00055cf0: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
-00055d00: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-00055d10: 2020 222d 2d61 6363 6573 732d 746f 6b65    "--access-toke
-00055d20: 6e22 2c0a 2020 2020 2020 2020 7265 7175  n",.        requ
-00055d30: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
-00055d40: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
-00055d50: 2020 2020 2020 6d65 7461 7661 723d 2241        metavar="A
-00055d60: 4343 4553 535f 544f 4b45 4e22 2c0a 2020  CCESS_TOKEN",.  
-00055d70: 2020 2020 2020 6865 6c70 3d22 5365 7420        help="Set 
-00055d80: 6120 6375 7374 6f6d 2061 6363 6573 7320  a custom access 
-00055d90: 746f 6b65 6e20 666f 7220 7573 6520 6279  token for use by
-00055da0: 2063 6572 7461 696e 2061 6374 696f 6e73   certain actions
-00055db0: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
-00055dc0: 6169 6c73 3a3a 2049 7420 6973 2061 6e20  ails:: It is an 
-00055dd0: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
-00055de0: 742e 2022 0a20 2020 2020 2020 2022 4279  t. ".        "By
-00055df0: 2064 6566 6175 6c74 202d 2d61 6363 6573   default --acces
-00055e00: 732d 746f 6b65 6e20 6973 2069 676e 6f72  s-token is ignor
-00055e10: 6564 2061 6e64 206e 6f74 2075 7365 642e  ed and not used.
-00055e20: 2022 0a20 2020 2020 2020 2022 4974 2069   ".        "It i
-00055e30: 7320 7573 6564 2062 7920 7468 6520 2d2d  s used by the --
-00055e40: 6465 6c65 7465 2d6d 7863 2c20 2d2d 6465  delete-mxc, --de
-00055e50: 6c65 7465 2d6d 7863 2d62 6566 6f72 652c  lete-mxc-before,
-00055e60: 2022 0a20 2020 2020 2020 2022 616e 6420   ".        "and 
-00055e70: 2d2d 7265 7374 2061 6374 696f 6e73 2e22  --rest actions."
-00055e80: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
-00055e90: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
-00055ea0: 2020 2020 2022 2d2d 7061 7373 776f 7264       "--password
-00055eb0: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
-00055ec0: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
-00055ed0: 2020 2074 7970 653d 7374 722c 0a20 2020     type=str,.   
-00055ee0: 2020 2020 206d 6574 6176 6172 3d22 5041       metavar="PA
-00055ef0: 5353 574f 5244 222c 0a20 2020 2020 2020  SSWORD",.       
-00055f00: 2068 656c 703d 2253 7065 6369 6679 2061   help="Specify a
-00055f10: 2070 6173 7377 6f72 6420 666f 7220 7573   password for us
-00055f20: 6520 6279 2063 6572 7461 696e 2061 6374  e by certain act
-00055f30: 696f 6e73 2e20 220a 2020 2020 2020 2020  ions. ".        
-00055f40: 2244 6574 6169 6c73 3a3a 2049 7420 6973  "Details:: It is
-00055f50: 2061 6e20 6f70 7469 6f6e 616c 2061 7267   an optional arg
-00055f60: 756d 656e 742e 2022 0a20 2020 2020 2020  ument. ".       
-00055f70: 2022 4279 2064 6566 6175 6c74 202d 2d70   "By default --p
-00055f80: 6173 7377 6f72 6420 6973 2069 676e 6f72  assword is ignor
-00055f90: 6564 2061 6e64 206e 6f74 2075 7365 642e  ed and not used.
-00055fa0: 2022 0a20 2020 2020 2020 2022 4974 2069   ".        "It i
-00055fb0: 7320 7573 6564 2062 7920 272d 2d6c 6f67  s used by '--log
-00055fc0: 696e 2070 6173 7377 6f72 6427 2061 6e64  in password' and
-00055fd0: 2027 2d2d 6465 6c65 7465 2d64 6576 6963   '--delete-devic
-00055fe0: 6527 2022 0a20 2020 2020 2020 2022 6163  e' ".        "ac
-00055ff0: 7469 6f6e 732e 2022 0a20 2020 2020 2020  tions. ".       
-00056000: 2022 4966 206e 6f74 2070 726f 7669 6465   "If not provide
-00056010: 6420 666f 7220 2d2d 6c6f 6769 6e20 7468  d for --login th
-00056020: 6520 7573 6572 2077 696c 6c20 6265 2071  e user will be q
-00056030: 7565 7269 6564 2076 6961 206b 6579 626f  ueried via keybo
-00056040: 6172 642e 222c 0a20 2020 2029 0a20 2020  ard.",.    ).   
-00056050: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
-00056060: 280a 2020 2020 2020 2020 222d 2d68 6f6d  (.        "--hom
-00056070: 6573 6572 7665 7222 2c0a 2020 2020 2020  eserver",.      
-00056080: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
-00056090: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
-000560a0: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
-000560b0: 7661 723d 2248 4f4d 4553 4552 5645 525f  var="HOMESERVER_
-000560c0: 5552 4c22 2c0a 2020 2020 2020 2020 6865  URL",.        he
-000560d0: 6c70 3d22 5370 6563 6966 7920 6120 686f  lp="Specify a ho
-000560e0: 6d65 7365 7276 6572 2066 6f72 2075 7365  meserver for use
-000560f0: 2062 7920 6365 7274 6169 6e20 6163 7469   by certain acti
-00056100: 6f6e 732e 2022 0a20 2020 2020 2020 2022  ons. ".        "
-00056110: 4465 7461 696c 733a 3a20 4974 2069 7320  Details:: It is 
-00056120: 616e 206f 7074 696f 6e61 6c20 6172 6775  an optional argu
-00056130: 6d65 6e74 2e20 220a 2020 2020 2020 2020  ment. ".        
-00056140: 2242 7920 6465 6661 756c 7420 2d2d 686f  "By default --ho
-00056150: 6d65 7365 7276 6572 2069 7320 6967 6e6f  meserver is igno
-00056160: 7265 6420 616e 6420 6e6f 7420 7573 6564  red and not used
-00056170: 2e20 220a 2020 2020 2020 2020 2249 7420  . ".        "It 
-00056180: 6973 2075 7365 6420 6279 2027 2d2d 6c6f  is used by '--lo
-00056190: 6769 6e27 2061 6374 696f 6e2e 2022 0a20  gin' action. ". 
-000561a0: 2020 2020 2020 2022 4966 206e 6f74 2070         "If not p
-000561b0: 726f 7669 6465 6420 666f 7220 2d2d 6c6f  rovided for --lo
-000561c0: 6769 6e20 7468 6520 7573 6572 2077 696c  gin the user wil
-000561d0: 6c20 6265 2071 7565 7269 6564 2076 6961  l be queried via
-000561e0: 206b 6579 626f 6172 642e 222c 0a20 2020   keyboard.",.   
-000561f0: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
-00056200: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
-00056210: 222d 2d64 6576 6963 6522 2c20 2023 2064  "--device",  # d
-00056220: 6f20 6e6f 7420 636f 6e66 7573 6520 7769  o not confuse wi
-00056230: 7468 202d 2d64 6576 6963 6573 0a20 2020  th --devices.   
-00056240: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
-00056250: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
-00056260: 653d 7374 722c 2020 2320 6465 7669 6365  e=str,  # device
-00056270: 2069 642c 2064 6576 6963 6520 6e61 6d65   id, device name
-00056280: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
-00056290: 3d22 4445 5649 4345 5f4e 414d 4522 2c0a  ="DEVICE_NAME",.
-000562a0: 2020 2020 2020 2020 6865 6c70 3d22 5370          help="Sp
-000562b0: 6563 6966 7920 6120 6465 7669 6365 206e  ecify a device n
-000562c0: 616d 652c 2066 6f72 2075 7365 2062 7920  ame, for use by 
-000562d0: 6365 7274 6169 6e20 6163 7469 6f6e 732e  certain actions.
-000562e0: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
-000562f0: 696c 733a 3a20 4974 2069 7320 616e 206f  ils:: It is an o
-00056300: 7074 696f 6e61 6c20 6172 6775 6d65 6e74  ptional argument
-00056310: 2e20 220a 2020 2020 2020 2020 2242 7920  . ".        "By 
-00056320: 6465 6661 756c 7420 2d2d 6465 7669 6365  default --device
-00056330: 2069 7320 6967 6e6f 7265 6420 616e 6420   is ignored and 
-00056340: 6e6f 7420 7573 6564 2e20 220a 2020 2020  not used. ".    
-00056350: 2020 2020 2249 7420 6973 2075 7365 6420      "It is used 
-00056360: 6279 2027 2d2d 6c6f 6769 6e27 2061 6374  by '--login' act
-00056370: 696f 6e2e 2022 0a20 2020 2020 2020 2022  ion. ".        "
-00056380: 4966 206e 6f74 2070 726f 7669 6465 6420  If not provided 
-00056390: 666f 7220 2d2d 6c6f 6769 6e20 7468 6520  for --login the 
-000563a0: 7573 6572 2077 696c 6c20 6265 2071 7565  user will be que
-000563b0: 7269 6564 2076 6961 206b 6579 626f 6172  ried via keyboar
-000563c0: 642e 2022 0a20 2020 2020 2020 2022 4966  d. ".        "If
-000563d0: 2079 6f75 2077 616e 7420 7468 6520 6465   you want the de
-000563e0: 6661 756c 7420 7661 6c75 6520 7370 6563  fault value spec
-000563f0: 6966 7920 2727 2e20 220a 2020 2020 2020  ify ''. ".      
-00056400: 2020 224d 756c 7469 706c 6520 6465 7669    "Multiple devi
-00056410: 6365 7320 2877 6974 6820 6469 6666 6572  ces (with differ
-00056420: 656e 7420 6465 7669 6365 2069 6429 206d  ent device id) m
-00056430: 6179 2068 6176 6520 7468 6520 7361 6d65  ay have the same
-00056440: 2064 6576 6963 6520 220a 2020 2020 2020   device ".      
-00056450: 2020 226e 616d 652e 2049 6e20 7368 6f72    "name. In shor
-00056460: 742c 2074 6865 2073 616d 6520 6465 7669  t, the same devi
-00056470: 6365 206e 616d 6520 6361 6e20 6265 2061  ce name can be a
-00056480: 7373 6967 6e65 6420 746f 206d 756c 7469  ssigned to multi
-00056490: 706c 6520 220a 2020 2020 2020 2020 2264  ple ".        "d
-000564a0: 6966 6665 7265 6e74 2064 6576 6963 6573  ifferent devices
-000564b0: 2069 6620 6465 7369 7265 642e 222c 0a20   if desired.",. 
-000564c0: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
-000564d0: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
-000564e0: 2020 222d 2d73 796e 6322 2c0a 2020 2020    "--sync",.    
-000564f0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
-00056500: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
-00056510: 3d73 7472 2c20 2023 2073 796e 6320 6d65  =str,  # sync me
-00056520: 7468 6f64 3a20 6f66 662c 2066 756c 6c2c  thod: off, full,
-00056530: 2028 7061 7274 6961 6c29 0a20 2020 2020   (partial).     
-00056540: 2020 206d 6574 6176 6172 3d22 4655 4c4c     metavar="FULL
-00056550: 7c4f 4646 222c 0a20 2020 2020 2020 2068  |OFF",.        h
-00056560: 656c 703d 2243 686f 6f73 6520 7379 6e63  elp="Choose sync
-00056570: 6872 6f6e 697a 6174 696f 6e20 6f70 7469  hronization opti
-00056580: 6f6e 732e 2022 0a20 2020 2020 2020 2022  ons. ".        "
-00056590: 4465 7461 696c 733a 3a20 5468 6973 206f  Details:: This o
-000565a0: 7074 696f 6e20 6465 6369 6465 7320 6f6e  ption decides on
-000565b0: 2077 6865 7468 6572 2074 6865 2070 726f   whether the pro
-000565c0: 6772 616d 2022 0a20 2020 2020 2020 2022  gram ".        "
-000565d0: 7379 6e63 6872 6f6e 697a 6573 2074 6865  synchronizes the
-000565e0: 2073 7461 7465 2077 6974 6820 7468 6520   state with the 
-000565f0: 7365 7276 6572 2062 6566 6f72 6520 6120  server before a 
-00056600: 2773 656e 6427 2061 6374 696f 6e2e 2022  'send' action. "
-00056610: 0a20 2020 2020 2020 2066 2243 7572 7265  .        f"Curre
-00056620: 6e74 6c79 2074 776f 2063 686f 6963 6573  ntly two choices
-00056630: 2061 7265 206f 6666 6572 6564 3a20 277b   are offered: '{
-00056640: 5359 4e43 5f46 554c 4c7d 2720 616e 6420  SYNC_FULL}' and 
-00056650: 277b 5359 4e43 5f4f 4646 7d27 2e20 220a  '{SYNC_OFF}'. ".
-00056660: 2020 2020 2020 2020 2250 726f 7669 6465          "Provide
-00056670: 206f 6e65 206f 6620 7468 6573 6520 6368   one of these ch
-00056680: 6f69 6365 732e 2022 0a20 2020 2020 2020  oices. ".       
-00056690: 2066 2254 6865 2064 6566 6175 6c74 2069   f"The default i
-000566a0: 7320 277b 5359 4e43 5f44 4546 4155 4c54  s '{SYNC_DEFAULT
-000566b0: 7d27 2e20 4966 2079 6f75 2077 616e 7420  }'. If you want 
-000566c0: 746f 2075 7365 2074 6865 2064 6566 6175  to use the defau
-000566d0: 6c74 2c20 220a 2020 2020 2020 2020 2274  lt, ".        "t
-000566e0: 6865 6e20 7468 6572 6520 6973 206e 6f20  hen there is no 
-000566f0: 6e65 6564 2074 6f20 7573 6520 7468 6973  need to use this
-00056700: 206f 7074 696f 6e2e 2022 0a20 2020 2020   option. ".     
-00056710: 2020 2066 2249 6620 796f 7520 6861 7665     f"If you have
-00056720: 2063 686f 7365 6e20 277b 5359 4e43 5f46   chosen '{SYNC_F
-00056730: 554c 4c7d 272c 2022 0a20 2020 2020 2020  ULL}', ".       
-00056740: 2022 7468 6520 6675 6c6c 2073 7461 7465   "the full state
-00056750: 2c20 616c 6c20 7374 6174 6520 6576 656e  , all state even
-00056760: 7473 2077 696c 6c20 6265 2073 796e 6368  ts will be synch
-00056770: 726f 6e69 7a65 6420 6265 7477 6565 6e20  ronized between 
-00056780: 220a 2020 2020 2020 2020 2274 6869 7320  ".        "this 
-00056790: 7072 6f67 7261 6d20 616e 6420 7468 6520  program and the 
-000567a0: 7365 7276 6572 2062 6566 6f72 6520 6120  server before a 
-000567b0: 2773 656e 6427 2e20 220a 2020 2020 2020  'send'. ".      
-000567c0: 2020 6622 4966 2079 6f75 2068 6176 6520    f"If you have 
-000567d0: 6368 6f73 656e 2027 7b53 594e 435f 4f46  chosen '{SYNC_OF
-000567e0: 467d 272c 2022 0a20 2020 2020 2020 2022  F}', ".        "
-000567f0: 7379 6e63 6872 6f6e 697a 6174 696f 6e20  synchronization 
-00056800: 7769 6c6c 2062 6520 736b 6970 7065 6420  will be skipped 
-00056810: 656e 7469 7265 6c79 2062 6566 6f72 6520  entirely before 
-00056820: 7468 6520 2773 656e 6427 2022 0a20 2020  the 'send' ".   
-00056830: 2020 2020 2022 7768 6963 6820 7769 6c6c       "which will
-00056840: 2069 6d70 726f 7665 2070 6572 666f 726d   improve perform
-00056850: 616e 6365 2e22 2c0a 2020 2020 290a 2020  ance.",.    ).  
-00056860: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
-00056870: 7428 0a20 2020 2020 2020 2022 2d6f 222c  t(.        "-o",
-00056880: 2020 2320 696e 636f 6d70 6174 6962 6c65    # incompatible
-00056890: 2063 6861 6e67 6520 4465 6320 3230 3232   change Dec 2022
-000568a0: 2c20 2d6f 206d 6f76 6564 2066 726f 6d20  , -o moved from 
-000568b0: 2d2d 6f73 2d6e 6f74 6966 790a 2020 2020  --os-notify.    
-000568c0: 2020 2020 222d 2d6f 7574 7075 7422 2c0a      "--output",.
-000568d0: 2020 2020 2020 2020 7265 7175 6972 6564          required
-000568e0: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-000568f0: 7479 7065 3d73 7472 2c20 2023 206f 7574  type=str,  # out
-00056900: 7075 7420 6d65 7468 6f64 3a20 7465 7874  put method: text
-00056910: 2c20 6a73 6f6e 2c20 6a73 6f6e 2d6d 6178  , json, json-max
-00056920: 2c20 2e2e 2e0a 2020 2020 2020 2020 6465  , ....        de
-00056930: 6661 756c 743d 4f55 5450 5554 5f44 4546  fault=OUTPUT_DEF
-00056940: 4155 4c54 2c20 2023 2077 6865 6e20 2d2d  AULT,  # when --
-00056950: 6f75 7470 7574 2069 7320 6e6f 7420 7573  output is not us
-00056960: 6564 0a20 2020 2020 2020 206d 6574 6176  ed.        metav
-00056970: 6172 3d22 5445 5854 7c4a 534f 4e7c 4a53  ar="TEXT|JSON|JS
-00056980: 4f4e 2d4d 4158 7c4a 534f 4e2d 5350 4543  ON-MAX|JSON-SPEC
-00056990: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
-000569a0: 2253 656c 6563 7420 616e 206f 7574 7075  "Select an outpu
-000569b0: 7420 666f 726d 6174 2e20 220a 2020 2020  t format. ".    
-000569c0: 2020 2020 2244 6574 6169 6c73 3a3a 2054      "Details:: T
-000569d0: 6869 7320 6f70 7469 6f6e 2064 6563 6964  his option decid
-000569e0: 6573 206f 6e20 686f 7720 7468 6520 6f75  es on how the ou
-000569f0: 7470 7574 2069 7320 7072 6573 656e 7465  tput is presente
-00056a00: 642e 2022 0a20 2020 2020 2020 2066 2243  d. ".        f"C
-00056a10: 7572 7265 6e74 6c79 206f 6666 6572 6564  urrently offered
-00056a20: 2063 686f 6963 6573 2061 7265 3a20 277b   choices are: '{
-00056a30: 4f55 5450 5554 5f54 4558 547d 272c 2027  OUTPUT_TEXT}', '
-00056a40: 7b4f 5554 5055 545f 4a53 4f4e 7d27 2c20  {OUTPUT_JSON}', 
-00056a50: 220a 2020 2020 2020 2020 6622 277b 4f55  ".        f"'{OU
-00056a60: 5450 5554 5f4a 534f 4e5f 4d41 587d 272c  TPUT_JSON_MAX}',
-00056a70: 2061 6e64 2027 7b4f 5554 5055 545f 4a53   and '{OUTPUT_JS
-00056a80: 4f4e 5f53 5045 437d 272e 2022 0a20 2020  ON_SPEC}'. ".   
-00056a90: 2020 2020 2022 5072 6f76 6964 6520 6f6e       "Provide on
-00056aa0: 6520 6f66 2074 6865 7365 2063 686f 6963  e of these choic
-00056ab0: 6573 2e20 220a 2020 2020 2020 2020 6622  es. ".        f"
-00056ac0: 5468 6520 6465 6661 756c 7420 6973 2027  The default is '
-00056ad0: 7b4f 5554 5055 545f 4445 4641 554c 547d  {OUTPUT_DEFAULT}
-00056ae0: 272e 2049 6620 796f 7520 7761 6e74 2074  '. If you want t
-00056af0: 6f20 7573 6520 7468 6520 6465 6661 756c  o use the defaul
-00056b00: 742c 2022 0a20 2020 2020 2020 2022 7468  t, ".        "th
-00056b10: 656e 2074 6865 7265 2069 7320 6e6f 206e  en there is no n
-00056b20: 6565 6420 746f 2075 7365 2074 6869 7320  eed to use this 
-00056b30: 6f70 7469 6f6e 2e20 220a 2020 2020 2020  option. ".      
-00056b40: 2020 6622 4966 2079 6f75 2068 6176 6520    f"If you have 
-00056b50: 6368 6f73 656e 2027 7b4f 5554 5055 545f  chosen '{OUTPUT_
-00056b60: 5445 5854 7d27 2c20 220a 2020 2020 2020  TEXT}', ".      
-00056b70: 2020 2274 6865 206f 7574 7075 7420 7769    "the output wi
-00056b80: 6c6c 2062 6520 666f 726d 6174 7465 6420  ll be formatted 
-00056b90: 7769 7468 2074 6865 2069 6e74 656e 7469  with the intenti
-00056ba0: 6f6e 2074 6f20 6265 2022 0a20 2020 2020  on to be ".     
-00056bb0: 2020 2022 636f 6e73 756d 6564 2062 7920     "consumed by 
-00056bc0: 6875 6d61 6e73 2c20 692e 652e 2072 6561  humans, i.e. rea
-00056bd0: 6461 626c 6520 7465 7874 2e20 220a 2020  dable text. ".  
-00056be0: 2020 2020 2020 6622 4966 2079 6f75 2068        f"If you h
-00056bf0: 6176 6520 6368 6f73 656e 2027 7b4f 5554  ave chosen '{OUT
-00056c00: 5055 545f 4a53 4f4e 7d27 2c20 220a 2020  PUT_JSON}', ".  
-00056c10: 2020 2020 2020 2274 6865 206f 7574 7075        "the outpu
-00056c20: 7420 7769 6c6c 2062 6520 666f 726d 6174  t will be format
-00056c30: 7465 6420 6173 204a 534f 4e2e 2022 0a20  ted as JSON. ". 
-00056c40: 2020 2020 2020 2022 5468 6520 636f 6e74         "The cont
-00056c50: 656e 7420 6f66 2074 6865 204a 534f 4e20  ent of the JSON 
-00056c60: 6f62 6a65 6374 206d 6174 6368 6573 2074  object matches t
-00056c70: 6865 2064 6174 6120 7072 6f76 6964 6564  he data provided
-00056c80: 2062 7920 7468 6520 220a 2020 2020 2020   by the ".      
-00056c90: 2020 226d 6174 7269 782d 6e69 6f20 5344    "matrix-nio SD
-00056ca0: 4b2e 2049 6e20 736f 6d65 206f 6363 6173  K. In some occas
-00056cb0: 696f 6e73 2074 6865 206f 7574 7075 7420  ions the output 
-00056cc0: 6973 2065 6e68 616e 6365 6420 220a 2020  is enhanced ".  
-00056cd0: 2020 2020 2020 2262 7920 6861 7669 6e67        "by having
-00056ce0: 2061 2066 6577 2065 7874 7261 2064 6174   a few extra dat
-00056cf0: 6120 6974 656d 7320 6164 6465 6420 666f  a items added fo
-00056d00: 7220 636f 6e76 656e 6965 6e63 652e 2022  r convenience. "
-00056d10: 0a20 2020 2020 2020 2022 496e 206d 6f73  .        "In mos
-00056d20: 7420 6361 7365 7320 7468 6520 6f75 7470  t cases the outp
-00056d30: 7574 2077 696c 6c20 6265 2070 726f 6365  ut will be proce
-00056d40: 7373 6564 2062 7920 6f74 6865 7220 7072  ssed by other pr
-00056d50: 6f67 7261 6d73 2022 0a20 2020 2020 2020  ograms ".       
-00056d60: 2022 7261 7468 6572 2074 6861 6e20 7265   "rather than re
-00056d70: 6164 2062 7920 6875 6d61 6e73 2e20 220a  ad by humans. ".
-00056d80: 2020 2020 2020 2020 6622 4f70 7469 6f6e          f"Option
-00056d90: 2027 7b4f 5554 5055 545f 4a53 4f4e 5f4d   '{OUTPUT_JSON_M
-00056da0: 4158 7d27 2069 7320 7072 6163 7469 6361  AX}' is practica
-00056db0: 6c6c 7920 7468 6520 7361 6d65 2061 7320  lly the same as 
-00056dc0: 220a 2020 2020 2020 2020 6622 277b 4f55  ".        f"'{OU
-00056dd0: 5450 5554 5f4a 534f 4e7d 272c 2022 0a20  TPUT_JSON}', ". 
-00056de0: 2020 2020 2020 2022 6275 7420 7965 7420         "but yet 
-00056df0: 616e 6f74 6865 7220 6164 6469 7469 6f6e  another addition
-00056e00: 616c 2066 6965 6c64 2069 7320 6164 6465  al field is adde
-00056e10: 642e 2022 0a20 2020 2020 2020 2022 5468  d. ".        "Th
-00056e20: 6520 6461 7461 2069 7465 6d20 2774 7261  e data item 'tra
-00056e30: 6e73 706f 7274 5f72 6573 706f 6e73 6527  nsport_response'
-00056e40: 2077 6869 6368 2067 6976 6573 2069 6e66   which gives inf
-00056e50: 6f72 6d61 7469 6f6e 206f 6e20 220a 2020  ormation on ".  
-00056e60: 2020 2020 2020 2268 6f77 2074 6865 2064        "how the d
-00056e70: 6174 6120 7761 7320 6f62 7461 696e 6564  ata was obtained
-00056e80: 2061 6e64 2074 7261 6e73 706f 7274 6564   and transported
-00056e90: 2069 7320 616c 736f 2062 6569 6e67 2061   is also being a
-00056ea0: 6464 6564 2e20 220a 2020 2020 2020 2020  dded. ".        
-00056eb0: 2246 6f72 2027 2d2d 6c69 7374 656e 2720  "For '--listen' 
-00056ec0: 6120 6665 7720 6d6f 7265 2066 6965 6c64  a few more field
-00056ed0: 7320 6172 6520 6164 6465 642e 2022 0a20  s are added. ". 
-00056ee0: 2020 2020 2020 2022 496e 206d 6f73 7420         "In most 
-00056ef0: 6361 7365 7320 7468 6520 6f75 7470 7574  cases the output
-00056f00: 2077 696c 6c20 6265 2070 726f 6365 7373   will be process
-00056f10: 6564 2062 7920 6f74 6865 7220 7072 6f67  ed by other prog
-00056f20: 7261 6d73 2022 0a20 2020 2020 2020 2022  rams ".        "
-00056f30: 7261 7468 6572 2074 6861 6e20 7265 6164  rather than read
-00056f40: 2062 7920 6875 6d61 6e73 2e20 220a 2020   by humans. ".  
-00056f50: 2020 2020 2020 6622 4f70 7469 6f6e 2027        f"Option '
-00056f60: 7b4f 5554 5055 545f 4a53 4f4e 5f53 5045  {OUTPUT_JSON_SPE
-00056f70: 437d 2720 6f6e 6c79 2070 7269 6e74 7320  C}' only prints 
-00056f80: 696e 666f 726d 6174 696f 6e20 7468 6174  information that
-00056f90: 2061 6468 6572 6573 2022 0a20 2020 2020   adheres ".     
-00056fa0: 2020 2022 312d 746f 2d31 2074 6f20 7468     "1-to-1 to th
-00056fb0: 6520 4d61 7472 6978 2053 7065 6369 6669  e Matrix Specifi
-00056fc0: 6361 7469 6f6e 2e20 4375 7272 656e 746c  cation. Currentl
-00056fd0: 7920 6f6e 6c79 2074 6865 2065 7665 6e74  y only the event
-00056fe0: 7320 220a 2020 2020 2020 2020 226f 6e20  s ".        "on 
-00056ff0: 272d 2d6c 6973 7465 6e27 2061 6e64 2027  '--listen' and '
-00057000: 2d2d 7461 696c 2720 7072 6f76 6964 6520  --tail' provide 
-00057010: 6461 7461 2065 7861 6374 6c79 2061 7320  data exactly as 
-00057020: 696e 2074 6865 2022 0a20 2020 2020 2020  in the ".       
-00057030: 2022 4d61 7472 6978 2053 7065 6369 6669   "Matrix Specifi
-00057040: 6361 7469 6f6e 2e20 4966 206e 6f20 6461  cation. If no da
-00057050: 7461 2069 7320 6176 6169 6c61 626c 6520  ta is available 
-00057060: 7468 6174 2063 6f72 7265 7370 6f6e 6473  that corresponds
-00057070: 2022 0a20 2020 2020 2020 2022 6578 6163   ".        "exac
-00057080: 746c 7920 7769 7468 2074 6865 204d 6174  tly with the Mat
-00057090: 7269 7820 5370 6563 6966 6963 6174 696f  rix Specificatio
-000570a0: 6e2c 206e 6f20 6461 7461 2077 696c 6c20  n, no data will 
-000570b0: 6265 2070 7269 6e74 6564 2e20 220a 2020  be printed. ".  
-000570c0: 2020 2020 2020 2249 6e20 7368 6f72 742c        "In short,
-000570d0: 2063 7572 7265 6e74 6c79 2027 2d2d 6a73   currently '--js
-000570e0: 6f6e 2d73 7065 6327 206f 6e6c 7920 7072  on-spec' only pr
-000570f0: 6f76 6964 6573 206f 7574 7075 7473 2066  ovides outputs f
-00057100: 6f72 2022 0a20 2020 2020 2020 2022 272d  or ".        "'-
-00057110: 2d6c 6973 7465 6e27 2061 6e64 2027 2d2d  -listen' and '--
-00057120: 7461 696c 272e 2041 6c6c 206f 7468 6572  tail'. All other
-00057130: 2061 7267 756d 656e 7473 206c 696b 6520   arguments like 
-00057140: 272d 2d67 6574 2d72 6f6f 6d2d 696e 666f  '--get-room-info
-00057150: 2720 220a 2020 2020 2020 2020 2277 696c  ' ".        "wil
-00057160: 6c20 7072 696e 7420 6e6f 206f 7574 7075  l print no outpu
-00057170: 742e 2022 2c0a 2020 2020 290a 2020 2020  t. ",.    ).    
-00057180: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
-00057190: 0a20 2020 2020 2020 2022 2d2d 726f 6f6d  .        "--room
-000571a0: 2d69 6e76 6974 6573 222c 0a20 2020 2020  -invites",.     
-000571b0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
-000571c0: 652c 0a20 2020 2020 2020 2074 7970 653d  e,.        type=
-000571d0: 7374 722c 0a20 2020 2020 2020 2064 6566  str,.        def
-000571e0: 6175 6c74 3d49 4e56 4954 4553 5f55 4e55  ault=INVITES_UNU
-000571f0: 5345 445f 4445 4641 554c 542c 2020 2320  SED_DEFAULT,  # 
-00057200: 7768 656e 202d 2d72 6f6f 6d2d 696e 7669  when --room-invi
-00057210: 7465 7320 6973 206e 6f74 2075 7365 640a  tes is not used.
-00057220: 2020 2020 2020 2020 6e61 7267 733d 223f          nargs="?
-00057230: 222c 2020 2320 6d61 6b65 7320 7468 6520  ",  # makes the 
-00057240: 776f 7264 206f 7074 696f 6e61 6c0a 2020  word optional.  
-00057250: 2020 2020 2020 2320 7768 656e 202d 2d72        # when --r
-00057260: 6f6f 6d2d 696e 7669 7465 7320 6973 2075  oom-invites is u
-00057270: 7365 642c 2062 7574 2074 6578 7420 6973  sed, but text is
-00057280: 206e 6f74 2061 6464 6564 0a20 2020 2020   not added.     
-00057290: 2020 2063 6f6e 7374 3d49 4e56 4954 4553     const=INVITES
-000572a0: 5f55 5345 445f 4445 4641 554c 542c 0a20  _USED_DEFAULT,. 
-000572b0: 2020 2020 2020 206d 6574 6176 6172 3d22         metavar="
-000572c0: 4c49 5354 7c4a 4f49 4e7c 4c49 5354 2b4a  LIST|JOIN|LIST+J
-000572d0: 4f49 4e22 2c0a 2020 2020 2020 2020 6865  OIN",.        he
-000572e0: 6c70 3d22 4c69 7374 2072 6f6f 6d20 696e  lp="List room in
-000572f0: 7669 7461 7469 6f6e 7320 616e 642f 6f72  vitations and/or
-00057300: 206a 6f69 6e20 696e 7669 7465 6420 726f   join invited ro
-00057310: 6f6d 732e 2022 0a20 2020 2020 2020 2022  oms. ".        "
-00057320: 4465 7461 696c 733a 3a20 5468 6973 206f  Details:: This o
-00057330: 7074 696f 6e20 7461 6b65 7320 7a65 726f  ption takes zero
-00057340: 206f 7220 6f6e 6520 6172 6775 6d65 6e74   or one argument
-00057350: 2e20 220a 2020 2020 2020 2020 6622 4966  . ".        f"If
-00057360: 206e 6f20 6172 6775 6d65 6e74 2069 7320   no argument is 
-00057370: 6769 7665 6e2c 2027 7b49 4e56 4954 4553  given, '{INVITES
-00057380: 5f4c 4953 547d 2720 6973 2061 7373 756d  _LIST}' is assum
-00057390: 6564 2077 6869 6368 2077 696c 6c20 220a  ed which will ".
-000573a0: 2020 2020 2020 2020 226c 6973 7420 616c          "list al
-000573b0: 6c20 726f 6f6d 2069 6e76 6974 6174 696f  l room invitatio
-000573c0: 6e20 6576 656e 7473 2061 7320 7468 6579  n events as they
-000573d0: 2061 7265 2072 6563 6569 7665 642e 2022   are received. "
-000573e0: 0a20 2020 2020 2020 2022 4c69 7374 696e  .        "Listin
-000573f0: 6720 7769 6c6c 2070 7269 6e74 2074 6865  g will print the
-00057400: 2072 6f6f 6d20 6964 2061 6e64 206f 7468   room id and oth
-00057410: 6572 2069 6e66 6f72 6d61 7469 6f6e 2074  er information t
-00057420: 6f20 7374 616e 6461 7264 2022 0a20 2020  o standard ".   
-00057430: 2020 2020 2022 6f75 7470 7574 2e20 220a       "output. ".
-00057440: 2020 2020 2020 2020 6622 277b 494e 5649          f"'{INVI
-00057450: 5445 535f 4a4f 494e 7d27 2077 696c 6c20  TES_JOIN}' will 
-00057460: 6a6f 696e 2074 6865 2072 6f6f 6d28 7329  join the room(s)
-00057470: 2065 6163 6820 7469 6d65 2061 2072 6f6f   each time a roo
-00057480: 6d20 696e 7669 7461 7469 6f6e 2022 0a20  m invitation ". 
-00057490: 2020 2020 2020 2022 6973 2072 6563 6569         "is recei
-000574a0: 7665 642e 2022 0a20 2020 2020 2020 2066  ved. ".        f
-000574b0: 2227 7b49 4e56 4954 4553 5f4c 4953 545f  "'{INVITES_LIST_
-000574c0: 4a4f 494e 7d27 2077 696c 6c20 646f 2062  JOIN}' will do b
-000574d0: 6f74 682c 206c 6973 7420 7468 6520 696e  oth, list the in
-000574e0: 7669 7461 7469 6f6e 7320 6173 2077 656c  vitations as wel
-000574f0: 6c20 220a 2020 2020 2020 2020 2261 7320  l ".        "as 
-00057500: 6175 746f 6d61 7469 6361 6c6c 7920 6a6f  automatically jo
-00057510: 696e 2074 6865 2072 6f6f 6d73 2074 6f20  in the rooms to 
-00057520: 7768 6963 6820 616e 2069 6e76 6974 6174  which an invitat
-00057530: 696f 6e20 7761 7320 7265 6365 6976 6564  ion was received
-00057540: 2e20 220a 2020 2020 2020 2020 2227 2d2d  . ".        "'--
-00057550: 726f 6f6d 2d69 6e76 6974 6573 2720 6361  room-invites' ca
-00057560: 6e20 6265 2063 6f6d 6269 6e65 6420 7769  n be combined wi
-00057570: 7468 2027 2d2d 6c69 7374 656e 272e 2022  th '--listen'. "
-00057580: 0a20 2020 2020 2020 2022 4966 2061 6e64  .        "If and
-00057590: 206f 6e6c 7920 6966 2027 2d2d 6c69 7374   only if '--list
-000575a0: 656e 2066 6f72 6576 6572 2720 6973 2075  en forever' is u
-000575b0: 7365 642c 2077 696c 6c20 7468 6520 7072  sed, will the pr
-000575c0: 6f67 7261 6d20 220a 2020 2020 2020 2020  ogram ".        
-000575d0: 226c 6973 7465 6e20 636f 6e74 696e 756f  "listen continuo
-000575e0: 7573 6c79 2066 6f72 2072 6f6f 6d20 696e  usly for room in
-000575f0: 7669 7465 732e 2022 0a20 2020 2020 2020  vites. ".       
-00057600: 2022 496e 2061 6c6c 206f 7468 6572 2063   "In all other c
-00057610: 6173 6573 2c20 7468 6520 7072 6f67 7261  ases, the progra
-00057620: 6d20 6f6e 6c79 206c 6f6f 6b73 2066 6f72  m only looks for
-00057630: 2072 6f6f 6d20 696e 7669 7461 7469 6f6e   room invitation
-00057640: 2022 0a20 2020 2020 2020 2022 6576 656e   ".        "even
-00057650: 7473 206f 6e63 653b 2061 6e64 2069 7420  ts once; and it 
-00057660: 646f 6573 2073 6f20 6265 666f 7265 2061  does so before a
-00057670: 6e79 2070 6f73 7369 626c 6520 6c69 7374  ny possible list
-00057680: 656e 696e 6720 746f 2022 0a20 2020 2020  ening to ".     
-00057690: 2020 2022 6d65 7373 6167 6573 2e20 220a     "messages. ".
-000576a0: 2020 2020 2020 2020 2257 6172 6e69 6e67          "Warning
-000576b0: 3a20 6576 656e 7473 2061 7265 2075 7375  : events are usu
-000576c0: 616c 6c79 2064 656c 6976 6572 6564 206f  ally delivered o
-000576d0: 6e63 652e 2053 6f2c 2069 6620 796f 7520  nce. So, if you 
-000576e0: 6c69 7374 656e 2022 0a20 2020 2020 2020  listen ".       
-000576f0: 2022 666f 7220 616e 6420 6c69 7374 2069   "for and list i
-00057700: 6e76 6974 6573 2079 6f75 2077 696c 6c20  nvites you will 
-00057710: 6765 7420 7468 656d 2061 6e64 206c 6973  get them and lis
-00057720: 7420 7468 656d 2074 6865 2066 6972 7374  t them the first
-00057730: 2022 0a20 2020 2020 2020 2022 7469 6d65   ".        "time
-00057740: 2079 6f75 2072 756e 2027 2d2d 726f 6f6d   you run '--room
-00057750: 2d69 6e76 6974 6573 206c 6973 7427 2e20  -invites list'. 
-00057760: 4f6e 2074 6865 2073 6563 6f6e 6420 7275  On the second ru
-00057770: 6e20 6f66 2022 0a20 2020 2020 2020 2022  n of ".        "
-00057780: 272d 2d72 6f6f 6d2d 696e 7669 7465 7320  '--room-invites 
-00057790: 6c69 7374 2720 7468 6520 6576 656e 7473  list' the events
-000577a0: 2077 696c 6c20 6e6f 7420 6265 2072 6570   will not be rep
-000577b0: 6c61 7965 6420 616e 6420 220a 2020 2020  layed and ".    
-000577c0: 2020 2020 226e 6f74 2062 6520 6c69 7374      "not be list
-000577d0: 6564 2e20 220a 2020 2020 2020 2020 2248  ed. ".        "H
-000577e0: 656e 6365 2c20 6966 2079 6f75 206c 6973  ence, if you lis
-000577f0: 7420 7468 6520 696e 7669 7465 732c 2079  t the invites, y
-00057800: 6f75 206d 6967 6874 2077 616e 7420 746f  ou might want to
-00057810: 2073 746f 7265 2074 6865 206f 7574 7075   store the outpu
-00057820: 7420 220a 2020 2020 2020 2020 2228 726f  t ".        "(ro
-00057830: 6f6d 2069 6429 2073 6f20 7468 6174 2079  om id) so that y
-00057840: 6f75 2063 616e 206a 6f69 6e20 7468 6520  ou can join the 
-00057850: 726f 6f6d 206c 6174 6572 2077 6974 6820  room later with 
-00057860: 272d 2d72 6f6f 6d2d 6a6f 696e 2720 220a  '--room-join' ".
-00057870: 2020 2020 2020 2020 2266 6f72 2065 7861          "for exa
-00057880: 6d70 6c65 2e20 220a 2020 2020 2020 2020  mple. ".        
-00057890: 2244 6f6e 2774 2063 6f6e 6675 7365 2074  "Don't confuse t
-000578a0: 6869 7320 6f70 7469 6f6e 2077 6974 6820  his option with 
-000578b0: 2d2d 726f 6f6d 2d69 6e76 6974 652e 222c  --room-invite.",
-000578c0: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
-000578d0: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
-000578e0: 2020 2020 222d 7622 2c20 2023 2069 6e63      "-v",  # inc
-000578f0: 6f6d 7061 7469 626c 6520 6368 616e 6765  ompatible change
-00057900: 2044 6563 2032 3032 322c 202d 7620 6d6f   Dec 2022, -v mo
-00057910: 7665 6420 6865 7265 2066 726f 6d20 2d2d  ved here from --
-00057920: 7665 7269 6679 0a20 2020 2020 2020 2022  verify.        "
-00057930: 2d56 222c 2020 2320 6578 6365 7074 696f  -V",  # exceptio
-00057940: 6e2c 2061 6c6c 6f77 2061 6c73 6f20 7570  n, allow also up
-00057950: 7065 7263 6173 6520 560a 2020 2020 2020  percase V.      
-00057960: 2020 222d 2d76 6572 7369 6f6e 222c 0a20    "--version",. 
-00057970: 2020 2020 2020 2072 6571 7569 7265 643d         required=
-00057980: 4661 6c73 652c 0a20 2020 2020 2020 2074  False,.        t
-00057990: 7970 653d 7374 722c 0a20 2020 2020 2020  ype=str,.       
-000579a0: 2064 6566 6175 6c74 3d56 4552 5349 4f4e   default=VERSION
-000579b0: 5f55 4e55 5345 445f 4445 4641 554c 542c  _UNUSED_DEFAULT,
-000579c0: 2020 2320 7768 656e 202d 7420 6973 206e    # when -t is n
-000579d0: 6f74 2075 7365 640a 2020 2020 2020 2020  ot used.        
-000579e0: 6e61 7267 733d 223f 222c 2020 2320 6d61  nargs="?",  # ma
-000579f0: 6b65 7320 7468 6520 776f 7264 206f 7074  kes the word opt
-00057a00: 696f 6e61 6c0a 2020 2020 2020 2020 2320  ional.        # 
-00057a10: 7768 656e 202d 7620 6973 2075 7365 642c  when -v is used,
-00057a20: 2062 7574 2074 6578 7420 6973 206e 6f74   but text is not
-00057a30: 2061 6464 6564 0a20 2020 2020 2020 2063   added.        c
-00057a40: 6f6e 7374 3d56 4552 5349 4f4e 5f55 5345  onst=VERSION_USE
-00057a50: 445f 4445 4641 554c 542c 0a20 2020 2020  D_DEFAULT,.     
-00057a60: 2020 206d 6574 6176 6172 3d22 5052 494e     metavar="PRIN
-00057a70: 547c 4348 4543 4b22 2c0a 2020 2020 2020  T|CHECK",.      
-00057a80: 2020 6865 6c70 3d22 5072 696e 7420 7665    help="Print ve
-00057a90: 7273 696f 6e20 696e 666f 726d 6174 696f  rsion informatio
-00057aa0: 6e20 6f72 2063 6865 636b 2066 6f72 2075  n or check for u
-00057ab0: 7064 6174 6573 2e20 220a 2020 2020 2020  pdates. ".      
-00057ac0: 2020 2244 6574 6169 6c73 3a3a 2054 6869    "Details:: Thi
-00057ad0: 7320 6f70 7469 6f6e 2074 616b 6573 207a  s option takes z
-00057ae0: 6572 6f20 6f72 206f 6e65 2061 7267 756d  ero or one argum
-00057af0: 656e 742e 2022 0a20 2020 2020 2020 2066  ent. ".        f
-00057b00: 2249 6620 6e6f 2061 7267 756d 656e 7420  "If no argument 
-00057b10: 6973 2067 6976 656e 2c20 277b 5052 494e  is given, '{PRIN
-00057b20: 547d 2720 6973 2061 7373 756d 6564 2077  T}' is assumed w
-00057b30: 6869 6368 2077 696c 6c20 220a 2020 2020  hich will ".    
-00057b40: 2020 2020 6622 7072 696e 7420 7468 6520      f"print the 
-00057b50: 7665 7273 696f 6e20 6f66 2074 6865 2063  version of the c
-00057b60: 7572 7265 6e74 6c79 2069 6e73 7461 6c6c  urrently install
-00057b70: 6564 2027 5052 4f47 5f57 4954 484f 5554  ed 'PROG_WITHOUT
-00057b80: 5f45 5854 2720 220a 2020 2020 2020 2020  _EXT' ".        
-00057b90: 6622 7061 636b 6167 652e 2027 7b43 4845  f"package. '{CHE
-00057ba0: 434b 7d27 2069 7320 7468 6520 616c 7465  CK}' is the alte
-00057bb0: 726e 6174 6976 652e 2022 0a20 2020 2020  rnative. ".     
-00057bc0: 2020 2022 277b 4348 4543 4b7d 2720 636f     "'{CHECK}' co
-00057bd0: 6e6e 6563 7473 2074 6f20 6874 7470 733a  nnects to https:
-00057be0: 2f2f 7079 7069 2e6f 7267 2061 6e64 2067  //pypi.org and g
-00057bf0: 6574 7320 7468 6520 7665 7273 696f 6e20  ets the version 
-00057c00: 220a 2020 2020 2020 2020 226e 756d 6265  ".        "numbe
-00057c10: 7220 6f66 206c 6174 6573 7420 7374 6162  r of latest stab
-00057c20: 6c65 2072 656c 6561 7365 2e20 5468 6572  le release. Ther
-00057c30: 6520 6973 206e 6f20 2763 616c 6c69 6e67  e is no 'calling
-00057c40: 2068 6f6d 6527 2022 0a20 2020 2020 2020   home' ".       
-00057c50: 2022 6f6e 2065 7665 7279 2072 756e 2c20   "on every run, 
-00057c60: 6f6e 6c79 2061 2027 6368 6563 6b20 7079  only a 'check py
-00057c70: 7069 2e6f 7267 2720 7570 6f6e 2072 6571  pi.org' upon req
-00057c80: 7565 7374 2e20 596f 7572 2022 0a20 2020  uest. Your ".   
-00057c90: 2020 2020 2022 7072 6976 6163 7920 6973       "privacy is
-00057ca0: 2070 726f 7465 6374 6564 2e20 5468 6520   protected. The 
-00057cb0: 6e65 7720 7265 6c65 6173 6520 6973 206e  new release is n
-00057cc0: 6569 7468 6572 2064 6f77 6e6c 6f61 6465  either downloade
-00057cd0: 642c 2022 0a20 2020 2020 2020 2022 6e6f  d, ".        "no
-00057ce0: 7220 696e 7374 616c 6c65 642e 2049 7420  r installed. It 
-00057cf0: 6a75 7374 2069 6e66 6f72 6d73 2079 6f75  just informs you
-00057d00: 2e20 220a 2020 2020 2020 2020 2241 6674  . ".        "Aft
-00057d10: 6572 2070 7269 6e74 696e 6720 7665 7273  er printing vers
-00057d20: 696f 6e20 696e 666f 726d 6174 696f 6e20  ion information 
-00057d30: 7468 6520 220a 2020 2020 2020 2020 2270  the ".        "p
-00057d40: 726f 6772 616d 2077 696c 6c20 636f 6e74  rogram will cont
-00057d50: 696e 7565 2074 6f20 7275 6e2e 2054 6869  inue to run. Thi
-00057d60: 7320 6973 2075 7365 6675 6c20 666f 7220  s is useful for 
-00057d70: 6861 7669 6e67 2076 6572 7369 6f6e 2022  having version "
-00057d80: 0a20 2020 2020 2020 2022 6e75 6d62 6572  .        "number
-00057d90: 2069 6e20 7468 6520 6c6f 6720 6669 6c65   in the log file
-00057da0: 732e 222c 0a20 2020 2029 0a20 2020 2067  s.",.    ).    g
-00057db0: 732e 7061 203d 2061 702e 7061 7273 655f  s.pa = ap.parse_
-00057dc0: 6172 6773 2829 0a20 2020 2023 2077 7261  args().    # wra
-00057dd0: 7020 616e 6420 696e 6465 6e74 3a20 6874  p and indent: ht
-00057de0: 7470 733a 2f2f 746f 7761 7264 7364 6174  tps://towardsdat
-00057df0: 6173 6369 656e 6365 2e63 6f6d 2f36 2d66  ascience.com/6-f
-00057e00: 616e 6379 2d62 7569 6c74 2d69 6e2d 7465  ancy-built-in-te
-00057e10: 7874 2d0a 2020 2020 2320 2020 2020 2020  xt-.    #       
-00057e20: 2020 2020 2020 2020 2020 2077 7261 7070             wrapp
-00057e30: 696e 672d 7465 6368 6e69 7175 6573 2d69  ing-techniques-i
-00057e40: 6e2d 7079 7468 6f6e 2d61 3738 6363 3537  n-python-a78cc57
-00057e50: 6332 3536 360a 2020 2020 2320 6966 206f  c2566.    # if o
-00057e60: 7574 7075 7420 6973 206e 6f74 2054 5459  utput is not TTY
-00057e70: 2c20 7468 656e 2064 6f6e 2774 2061 6464  , then don't add
-00057e80: 2063 6f6c 6f72 732c 2065 2e67 2e20 7768   colors, e.g. wh
-00057e90: 656e 206f 7574 7075 7420 6973 2070 6970  en output is pip
-00057ea0: 6564 0a20 2020 2069 6620 7379 732e 7374  ed.    if sys.st
-00057eb0: 646f 7574 2e69 7361 7474 7928 293a 0a20  dout.isatty():. 
-00057ec0: 2020 2020 2020 2023 2059 6f75 2772 6520         # You're 
-00057ed0: 7275 6e6e 696e 6720 696e 2061 2072 6561  running in a rea
-00057ee0: 6c20 7465 726d 696e 616c 0a20 2020 2020  l terminal.     
-00057ef0: 2020 2023 2063 6f6c 6f72 730a 2020 2020     # colors.    
-00057f00: 2020 2020 2320 6164 6170 7420 7769 6474      # adapt widt
-00057f10: 680a 2020 2020 2020 2020 7465 726d 5f77  h.        term_w
-00057f20: 6964 7468 203d 206f 732e 6765 745f 7465  idth = os.get_te
-00057f30: 726d 696e 616c 5f73 697a 6528 295b 305d  rminal_size()[0]
-00057f40: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
-00057f50: 2822 7465 726d 696e 616c 2077 6964 7468  ("terminal width
-00057f60: 2022 2c20 7465 726d 5f77 6964 7468 290a   ", term_width).
-00057f70: 2020 2020 2020 2020 636f 6e20 3d20 636f          con = co
-00057f80: 6c6f 7273 2e66 672e 6772 6565 6e0a 2020  lors.fg.green.  
-00057f90: 2020 2020 2020 636f 6666 203d 2063 6f6c        coff = col
-00057fa0: 6f72 732e 7265 7365 740a 2020 2020 2020  ors.reset.      
-00057fb0: 2020 656f 6e20 3d20 636f 6c6f 7273 2e62    eon = colors.b
-00057fc0: 6f6c 6420 2b20 636f 6e0a 2020 2020 2020  old + con.      
-00057fd0: 2020 656f 6666 203d 2063 6f6c 6f72 732e    eoff = colors.
-00057fe0: 7265 7365 7420 2b20 636f 6e0a 2020 2020  reset + con.    
-00057ff0: 656c 7365 3a0a 2020 2020 2020 2020 2320  else:.        # 
-00058000: 596f 7527 7265 2062 6569 6e67 2070 6970  You're being pip
-00058010: 6564 206f 7220 7265 6469 7265 6374 6564  ed or redirected
-00058020: 0a20 2020 2020 2020 2023 206e 6f20 436f  .        # no Co
-00058030: 6c6f 7273 0a20 2020 2020 2020 2023 2077  lors.        # w
-00058040: 6964 7468 203d 2038 300a 2020 2020 2020  idth = 80.      
-00058050: 2020 7465 726d 5f77 6964 7468 203d 2038    term_width = 8
-00058060: 300a 2020 2020 2020 2020 2320 7072 696e  0.        # prin
-00058070: 7428 226e 6f74 2069 6e20 7465 726d 696e  t("not in termin
-00058080: 616c 2c20 7573 696e 6720 6465 6661 756c  al, using defaul
-00058090: 7420 7465 726d 696e 616c 2077 6964 7468  t terminal width
-000580a0: 2022 2c20 7465 726d 5f77 6964 7468 290a   ", term_width).
-000580b0: 2020 2020 2020 2020 636f 6e20 3d20 2222          con = ""
-000580c0: 0a20 2020 2020 2020 2063 6f66 6620 3d20  .        coff = 
-000580d0: 2222 0a20 2020 2020 2020 2065 6f6e 203d  "".        eon =
-000580e0: 2022 220a 2020 2020 2020 2020 656f 6666   "".        eoff
-000580f0: 203d 2022 220a 2020 2020 6966 2067 732e   = "".    if gs.
-00058100: 7061 2e75 7361 6765 3a0a 2020 2020 2020  pa.usage:.      
-00058110: 2020 7072 696e 7428 7465 7874 7772 6170    print(textwrap
-00058120: 2e66 696c 6c28 6170 2e64 6573 6372 6970  .fill(ap.descrip
-00058130: 7469 6f6e 2c20 7769 6474 683d 7465 726d  tion, width=term
-00058140: 5f77 6964 7468 2929 0a20 2020 2020 2020  _width)).       
-00058150: 2070 7269 6e74 2822 2229 0a20 2020 2020   print("").     
-00058160: 2020 2061 702e 7072 696e 745f 7573 6167     ap.print_usag
-00058170: 6528 290a 2020 2020 2020 2020 7072 696e  e().        prin
-00058180: 7428 2222 290a 2020 2020 2020 2020 7072  t("").        pr
-00058190: 696e 7428 7465 7874 7772 6170 2e66 696c  int(textwrap.fil
-000581a0: 6c28 6170 2e65 7069 6c6f 672c 2077 6964  l(ap.epilog, wid
-000581b0: 7468 3d74 6572 6d5f 7769 6474 6829 290a  th=term_width)).
-000581c0: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
-000581d0: 0a20 2020 2069 6620 6773 2e70 612e 6865  .    if gs.pa.he
-000581e0: 6c70 3a0a 2020 2020 2020 2020 7072 696e  lp:.        prin
-000581f0: 7428 7465 7874 7772 6170 2e66 696c 6c28  t(textwrap.fill(
-00058200: 6170 2e64 6573 6372 6970 7469 6f6e 2c20  ap.description, 
-00058210: 7769 6474 683d 7465 726d 5f77 6964 7468  width=term_width
-00058220: 2929 0a20 2020 2020 2020 2070 7269 6e74  )).        print
-00058230: 2822 2229 0a20 2020 2020 2020 2070 7269  ("").        pri
-00058240: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-00058250: 7465 7874 7772 6170 2e66 696c 6c28 0a20  textwrap.fill(. 
-00058260: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00058270: 227b 5052 4f47 5f57 4954 484f 5554 5f45  "{PROG_WITHOUT_E
-00058280: 5854 7d20 7375 7070 6f72 7473 2074 6865  XT} supports the
-00058290: 7365 2061 7267 756d 656e 7473 3a22 2c0a  se arguments:",.
-000582a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000582b0: 7769 6474 683d 7465 726d 5f77 6964 7468  width=term_width
-000582c0: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
-000582d0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000582e0: 2020 2320 7072 696e 7428 2222 290a 2020    # print("").  
-000582f0: 2020 2020 2020 6865 6c70 5f68 656c 705f        help_help_
-00058300: 7072 6520 3d20 2222 220a 3c2d 2d75 7361  pre = """.<--usa
-00058310: 6765 3e0a 5072 696e 7420 7573 6167 652e  ge>.Print usage.
-00058320: 0a3c 2d68 3e2c 203c 2d2d 6865 6c70 3e0a  .<-h>, <--help>.
-00058330: 5072 696e 7420 6865 6c70 2e0a 3c2d 2d6d  Print help..<--m
-00058340: 616e 7561 6c3e 0a50 7269 6e74 206d 616e  anual>.Print man
-00058350: 7561 6c2e 0a3c 2d2d 7265 6164 6d65 3e0a  ual..<--readme>.
-00058360: 5072 696e 7420 5245 4144 4d45 2e6d 6420  Print README.md 
-00058370: 6669 6c65 2e0a 3c2d 643e 2c20 3c2d 2d64  file..<-d>, <--d
-00058380: 6562 7567 3e0a 5072 696e 7420 6465 6275  ebug>.Print debu
-00058390: 6720 696e 666f 726d 6174 696f 6e2e 0a3c  g information..<
-000583a0: 2d2d 6c6f 672d 6c65 7665 6c3e 2044 4542  --log-level> DEB
-000583b0: 5547 7c49 4e46 4f7c 5741 524e 494e 477c  UG|INFO|WARNING|
-000583c0: 4552 524f 527c 4352 4954 4943 414c 205b  ERROR|CRITICAL [
-000583d0: 4445 4255 477c 494e 464f 7c57 4152 4e49  DEBUG|INFO|WARNI
-000583e0: 4e47 7c45 5252 4f52 7c43 5249 5449 4341  NG|ERROR|CRITICA
-000583f0: 4c20 2e2e 2e5d 0a53 6574 2074 6865 206c  L ...].Set the l
-00058400: 6f67 206c 6576 656c 2873 292e 0a3c 2d2d  og level(s)..<--
-00058410: 7665 7262 6f73 653e 0a53 6574 2074 6865  verbose>.Set the
-00058420: 2076 6572 626f 7369 7479 206c 6576 656c   verbosity level
-00058430: 2e0a 3c2d 2d6c 6f67 696e 3e20 5041 5353  ..<--login> PASS
-00058440: 574f 5244 7c53 534f 0a4c 6f67 696e 2074  WORD|SSO.Login t
-00058450: 6f20 616e 6420 6175 7468 656e 7469 6361  o and authentica
-00058460: 7465 2077 6974 6820 7468 6520 4d61 7472  te with the Matr
-00058470: 6978 2068 6f6d 6573 6572 7665 722e 0a3c  ix homeserver..<
-00058480: 2d2d 7665 7269 6679 3e20 5b45 4d4f 4a49  --verify> [EMOJI
-00058490: 5d0a 5065 7266 6f72 6d20 7665 7269 6669  ].Perform verifi
-000584a0: 6361 7469 6f6e 2e0a 3c2d 2d6c 6f67 6f75  cation..<--logou
-000584b0: 743e 204d 457c 414c 4c0a 4c6f 676f 7574  t> ME|ALL.Logout
-000584c0: 2e0a 3c2d 633e 2043 5245 4445 4e54 4941  ..<-c> CREDENTIA
-000584d0: 4c53 5f46 494c 452c 203c 2d2d 6372 6564  LS_FILE, <--cred
-000584e0: 656e 7469 616c 733e 2043 5245 4445 4e54  entials> CREDENT
-000584f0: 4941 4c53 5f46 494c 450a 5370 6563 6966  IALS_FILE.Specif
-00058500: 7920 6c6f 6361 7469 6f6e 206f 6620 6372  y location of cr
-00058510: 6564 656e 7469 616c 7320 6669 6c65 2e0a  edentials file..
-00058520: 3c2d 733e 2053 544f 5245 5f44 4952 4543  <-s> STORE_DIREC
-00058530: 544f 5259 2c20 3c2d 2d73 746f 7265 3e20  TORY, <--store> 
-00058540: 5354 4f52 455f 4449 5245 4354 4f52 590a  STORE_DIRECTORY.
-00058550: 5370 6563 6966 7920 6c6f 6361 7469 6f6e  Specify location
-00058560: 206f 6620 7374 6f72 6520 6469 7265 6374   of store direct
-00058570: 6f72 792e 0a3c 2d72 3e20 524f 4f4d 205b  ory..<-r> ROOM [
-00058580: 524f 4f4d 202e 2e2e 5d2c 203c 2d2d 726f  ROOM ...], <--ro
-00058590: 6f6d 3e20 524f 4f4d 205b 524f 4f4d 202e  om> ROOM [ROOM .
-000585a0: 2e2e 5d0a 5370 6563 6966 7920 6f6e 6520  ..].Specify one 
-000585b0: 6f72 206d 756c 7469 706c 6520 726f 6f6d  or multiple room
-000585c0: 732e 0a3c 2d2d 726f 6f6d 2d64 6566 6175  s..<--room-defau
-000585d0: 6c74 3e20 4445 4641 554c 545f 524f 4f4d  lt> DEFAULT_ROOM
-000585e0: 0a53 7065 6369 6679 2074 6865 2064 6566  .Specify the def
-000585f0: 6175 6c74 2072 6f6f 6d20 6174 202d 2d6c  ault room at --l
-00058600: 6f67 696e 2e0a 3c2d 2d72 6f6f 6d2d 6372  ogin..<--room-cr
-00058610: 6561 7465 3e20 524f 4f4d 5f41 4c49 4153  eate> ROOM_ALIAS
-00058620: 205b 524f 4f4d 5f41 4c49 4153 202e 2e2e   [ROOM_ALIAS ...
-00058630: 5d0a 4372 6561 7465 206f 6e65 206f 7220  ].Create one or 
-00058640: 6d75 6c74 6970 6c65 2072 6f6f 6d73 2066  multiple rooms f
-00058650: 6f72 2067 6976 656e 2061 6c69 6173 2865  or given alias(e
-00058660: 7329 2e0a 3c2d 2d72 6f6f 6d2d 646d 2d63  s)..<--room-dm-c
-00058670: 7265 6174 653e 2055 5345 5220 5b55 5345  reate> USER [USE
-00058680: 5220 2e2e 2e5d 0a43 7265 6174 6520 6f6e  R ...].Create on
-00058690: 6520 6f72 206d 756c 7469 706c 6520 444d  e or multiple DM
-000586a0: 2072 6f6f 6d73 2077 6974 6820 7468 6520   rooms with the 
-000586b0: 7370 6563 6966 6965 6420 7573 6572 732e  specified users.
-000586c0: 0a3c 2d2d 726f 6f6d 2d64 6d2d 6372 6561  .<--room-dm-crea
-000586d0: 7465 2d61 6c6c 6f77 2d64 7570 6c69 6361  te-allow-duplica
-000586e0: 7465 733e 0a41 6c6c 6f77 2063 7265 6174  tes>.Allow creat
-000586f0: 696e 6720 6475 706c 6963 6174 6520 444d  ing duplicate DM
-00058700: 2072 6f6f 6d73 2e0a 3c2d 2d72 6f6f 6d2d   rooms..<--room-
-00058710: 6a6f 696e 3e20 524f 4f4d 205b 524f 4f4d  join> ROOM [ROOM
-00058720: 202e 2e2e 5d0a 4a6f 696e 206f 6e65 2072   ...].Join one r
-00058730: 6f6f 6d20 6f72 206d 756c 7469 706c 6520  oom or multiple 
-00058740: 726f 6f6d 732e 0a3c 2d2d 726f 6f6d 2d6c  rooms..<--room-l
-00058750: 6561 7665 3e20 524f 4f4d 205b 524f 4f4d  eave> ROOM [ROOM
-00058760: 202e 2e2e 5d0a 4c65 6176 6520 6f6e 6520   ...].Leave one 
-00058770: 726f 6f6d 206f 7220 6d75 6c74 6970 6c65  room or multiple
-00058780: 2072 6f6f 6d73 2e0a 3c2d 2d72 6f6f 6d2d   rooms..<--room-
-00058790: 666f 7267 6574 3e20 524f 4f4d 205b 524f  forget> ROOM [RO
-000587a0: 4f4d 202e 2e2e 5d0a 466f 7267 6574 206f  OM ...].Forget o
-000587b0: 6e65 2072 6f6f 6d20 6f72 206d 756c 7469  ne room or multi
-000587c0: 706c 6520 726f 6f6d 732e 0a3c 2d2d 726f  ple rooms..<--ro
-000587d0: 6f6d 2d69 6e76 6974 653e 2052 4f4f 4d20  om-invite> ROOM 
-000587e0: 5b52 4f4f 4d20 2e2e 2e5d 0a49 6e76 6974  [ROOM ...].Invit
-000587f0: 6520 6f6e 6520 6f72 6520 6d6f 7265 2075  e one ore more u
-00058800: 7365 7273 2074 6f20 6a6f 696e 206f 6e65  sers to join one
-00058810: 206f 7220 6d6f 7265 2072 6f6f 6d73 2e0a   or more rooms..
-00058820: 3c2d 2d72 6f6f 6d2d 6261 6e3e 2052 4f4f  <--room-ban> ROO
-00058830: 4d20 5b52 4f4f 4d20 2e2e 2e5d 0a42 616e  M [ROOM ...].Ban
-00058840: 206f 6e65 206f 7265 206d 6f72 6520 7573   one ore more us
-00058850: 6572 7320 6672 6f6d 206f 6e65 206f 7220  ers from one or 
-00058860: 6d6f 7265 2072 6f6f 6d73 2e0a 3c2d 2d72  more rooms..<--r
-00058870: 6f6f 6d2d 756e 6261 6e3e 2052 4f4f 4d20  oom-unban> ROOM 
-00058880: 5b52 4f4f 4d20 2e2e 2e5d 0a55 6e62 616e  [ROOM ...].Unban
-00058890: 206f 6e65 206f 7265 206d 6f72 6520 7573   one ore more us
-000588a0: 6572 7320 6672 6f6d 206f 6e65 206f 7220  ers from one or 
-000588b0: 6d6f 7265 2072 6f6f 6d73 2e0a 3c2d 2d72  more rooms..<--r
-000588c0: 6f6f 6d2d 6b69 636b 3e20 524f 4f4d 205b  oom-kick> ROOM [
-000588d0: 524f 4f4d 202e 2e2e 5d0a 4b69 636b 206f  ROOM ...].Kick o
-000588e0: 6e65 206f 7265 206d 6f72 6520 7573 6572  ne ore more user
-000588f0: 7320 6672 6f6d 206f 6e65 206f 7220 6d6f  s from one or mo
-00058900: 7265 2072 6f6f 6d73 2e0a 3c2d 753e 2055  re rooms..<-u> U
-00058910: 5345 5220 5b55 5345 5220 2e2e 2e5d 2c20  SER [USER ...], 
-00058920: 3c2d 2d75 7365 723e 2055 5345 5220 5b55  <--user> USER [U
-00058930: 5345 5220 2e2e 2e5d 0a53 7065 6369 6679  SER ...].Specify
-00058940: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
-00058950: 2075 7365 7273 2e0a 3c2d 2d75 7365 722d   users..<--user-
-00058960: 6c6f 6769 6e3e 2055 5345 520a 5370 6563  login> USER.Spec
-00058970: 6966 7920 7573 6572 2066 6f72 202d 2d6c  ify user for --l
-00058980: 6f67 696e 2e0a 3c2d 2d6e 616d 653e 2052  ogin..<--name> R
-00058990: 4f4f 4d5f 4e41 4d45 205b 524f 4f4d 5f4e  OOM_NAME [ROOM_N
-000589a0: 414d 4520 2e2e 2e5d 0a53 7065 6369 6679  AME ...].Specify
-000589b0: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
-000589c0: 2072 6f6f 6d20 6e61 6d65 732e 0a3c 2d2d   room names..<--
-000589d0: 746f 7069 633e 2052 4f4f 4d5f 544f 5049  topic> ROOM_TOPI
-000589e0: 4320 5b52 4f4f 4d5f 544f 5049 4320 2e2e  C [ROOM_TOPIC ..
-000589f0: 2e5d 0a53 7065 6369 6679 206f 6e65 206f  .].Specify one o
-00058a00: 7220 6d75 6c74 6970 6c65 2072 6f6f 6d20  r multiple room 
-00058a10: 746f 7069 6373 2e0a 3c2d 2d61 6c69 6173  topics..<--alias
-00058a20: 3e20 524f 4f4d 5f41 4c49 4153 205b 524f  > ROOM_ALIAS [RO
-00058a30: 4f4d 5f41 4c49 4153 202e 2e2e 5d0a 5370  OM_ALIAS ...].Sp
-00058a40: 6563 6966 7920 6f6e 6520 6f72 206d 756c  ecify one or mul
-00058a50: 7469 706c 6520 726f 6f6d 2061 6c69 6173  tiple room alias
-00058a60: 6573 2e0a 3c2d 6d3e 2054 4558 5420 5b54  es..<-m> TEXT [T
-00058a70: 4558 5420 2e2e 2e5d 2c20 3c2d 2d6d 6573  EXT ...], <--mes
-00058a80: 7361 6765 3e20 5445 5854 205b 5445 5854  sage> TEXT [TEXT
-00058a90: 202e 2e2e 5d0a 5365 6e64 206f 6e65 206f   ...].Send one o
-00058aa0: 7220 6d75 6c74 6970 6c65 2074 6578 7420  r multiple text 
-00058ab0: 6d65 7373 6167 6573 2e0a 3c2d 693e 2049  messages..<-i> I
-00058ac0: 4d41 4745 5f46 494c 4520 5b49 4d41 4745  MAGE_FILE [IMAGE
-00058ad0: 5f46 494c 4520 2e2e 2e5d 2c20 3c2d 2d69  _FILE ...], <--i
-00058ae0: 6d61 6765 3e20 494d 4147 455f 4649 4c45  mage> IMAGE_FILE
-00058af0: 205b 494d 4147 455f 4649 4c45 202e 2e2e   [IMAGE_FILE ...
-00058b00: 5d0a 5365 6e64 206f 6e65 206f 7220 6d75  ].Send one or mu
-00058b10: 6c74 6970 6c65 2069 6d61 6765 2066 696c  ltiple image fil
-00058b20: 6573 2e0a 3c2d 613e 2041 5544 494f 5f46  es..<-a> AUDIO_F
-00058b30: 494c 4520 5b41 5544 494f 5f46 494c 4520  ILE [AUDIO_FILE 
-00058b40: 2e2e 2e5d 2c20 3c2d 2d61 7564 696f 3e20  ...], <--audio> 
-00058b50: 4155 4449 4f5f 4649 4c45 205b 4155 4449  AUDIO_FILE [AUDI
-00058b60: 4f5f 4649 4c45 202e 2e2e 5d0a 5365 6e64  O_FILE ...].Send
-00058b70: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
-00058b80: 2061 7564 696f 2066 696c 6573 2e0a 3c2d   audio files..<-
-00058b90: 663e 2046 494c 4520 5b46 494c 4520 2e2e  f> FILE [FILE ..
-00058ba0: 2e5d 2c20 3c2d 2d66 696c 653e 2046 494c  .], <--file> FIL
-00058bb0: 4520 5b46 494c 4520 2e2e 2e5d 0a53 656e  E [FILE ...].Sen
-00058bc0: 6420 6f6e 6520 6f72 206d 756c 7469 706c  d one or multipl
-00058bd0: 6520 6669 6c65 7320 2865 2e67 2e20 5044  e files (e.g. PD
-00058be0: 462c 2044 4f43 2c20 4d50 3429 2e0a 3c2d  F, DOC, MP4)..<-
-00058bf0: 653e 204d 4154 5249 585f 4a53 4f4e 5f4f  e> MATRIX_JSON_O
-00058c00: 424a 4543 5420 5b4d 4154 5249 585f 4a53  BJECT [MATRIX_JS
-00058c10: 4f4e 5f4f 424a 4543 5420 2e2e 2e5d 2c20  ON_OBJECT ...], 
-00058c20: 3c2d 2d65 7665 6e74 3e20 4d41 5452 4958  <--event> MATRIX
-00058c30: 5f4a 534f 4e5f 4f42 4a45 4354 205b 4d41  _JSON_OBJECT [MA
-00058c40: 5452 4958 5f4a 534f 4e5f 4f42 4a45 4354  TRIX_JSON_OBJECT
-00058c50: 202e 2e2e 5d0a 5365 6e64 2061 204d 6174   ...].Send a Mat
-00058c60: 7269 7820 4a53 4f4e 2065 7665 6e74 2e0a  rix JSON event..
-00058c70: 3c2d 773e 2c20 3c2d 2d68 746d 6c3e 0a53  <-w>, <--html>.S
-00058c80: 656e 6420 6d65 7373 6167 6520 6173 2066  end message as f
-00058c90: 6f72 6d61 7420 2248 544d 4c22 2e0a 3c2d  ormat "HTML"..<-
-00058ca0: 7a3e 2c20 3c2d 2d6d 6172 6b64 6f77 6e3e  z>, <--markdown>
-00058cb0: 0a53 656e 6420 6d65 7373 6167 6520 6173  .Send message as
-00058cc0: 2066 6f72 6d61 7420 224d 4152 4b44 4f57   format "MARKDOW
-00058cd0: 4e22 2e0a 3c2d 6b3e 2c20 3c2d 2d63 6f64  N"..<-k>, <--cod
-00058ce0: 653e 0a53 656e 6420 6d65 7373 6167 6520  e>.Send message 
-00058cf0: 6173 2066 6f72 6d61 7420 2243 4f44 4522  as format "CODE"
-00058d00: 2e0a 3c2d 6a3e 2c20 3c2d 2d65 6d6f 6a69  ..<-j>, <--emoji
-00058d10: 7a65 3e0a 5365 6e64 206d 6573 7361 6765  ze>.Send message
-00058d20: 2061 6674 6572 2065 6d6f 6a69 7a69 6e67   after emojizing
-00058d30: 2e0a 3c2d 703e 2053 4550 4152 4154 4f52  ..<-p> SEPARATOR
-00058d40: 2c20 3c2d 2d73 706c 6974 3e20 5345 5041  , <--split> SEPA
-00058d50: 5241 544f 520a 5370 6c69 7420 6d65 7373  RATOR.Split mess
-00058d60: 6167 6520 7465 7874 2069 6e74 6f20 6d75  age text into mu
-00058d70: 6c74 6970 6c65 204d 6174 7269 7820 6d65  ltiple Matrix me
-00058d80: 7373 6167 6573 2e0a 3c2d 2d63 6f6e 6669  ssages..<--confi
-00058d90: 673e 2043 4f4e 4649 475f 4649 4c45 0a53  g> CONFIG_FILE.S
-00058da0: 7065 6369 6679 2074 6865 206c 6f63 6174  pecify the locat
-00058db0: 696f 6e20 6f66 2061 2063 6f6e 6669 6720  ion of a config 
-00058dc0: 6669 6c65 2e0a 3c2d 2d70 726f 7879 3e20  file..<--proxy> 
-00058dd0: 5052 4f58 590a 5370 6563 6966 7920 6120  PROXY.Specify a 
-00058de0: 7072 6f78 7920 666f 7220 636f 6e6e 6563  proxy for connec
-00058df0: 7469 7669 7479 2e0a 3c2d 6e3e 2c20 3c2d  tivity..<-n>, <-
-00058e00: 2d6e 6f74 6963 653e 0a53 656e 6420 6d65  -notice>.Send me
-00058e10: 7373 6167 6520 6173 206e 6f74 6963 652e  ssage as notice.
-00058e20: 0a3c 2d2d 656e 6372 7970 7465 643e 0a53  .<--encrypted>.S
-00058e30: 656e 6420 6d65 7373 6167 6520 656e 642d  end message end-
-00058e40: 746f 2d65 6e64 2065 6e63 7279 7074 6564  to-end encrypted
-00058e50: 2e0a 3c2d 6c3e 205b 4e45 5645 527c 4f4e  ..<-l> [NEVER|ON
-00058e60: 4345 7c46 4f52 4556 4552 7c54 4149 4c7c  CE|FOREVER|TAIL|
-00058e70: 414c 4c5d 2c20 3c2d 2d6c 6973 7465 6e3e  ALL], <--listen>
-00058e80: 205b 4e45 5645 527c 4f4e 4345 7c46 4f52   [NEVER|ONCE|FOR
-00058e90: 4556 4552 7c54 4149 4c7c 414c 4c5d 0a50  EVER|TAIL|ALL].P
-00058ea0: 7269 6e74 2072 6563 6569 7665 6420 6d65  rint received me
-00058eb0: 7373 6167 6573 2061 6e64 206c 6973 7465  ssages and liste
-00058ec0: 6e20 746f 206d 6573 7361 6765 732e 0a3c  n to messages..<
-00058ed0: 2d74 3e20 5b4e 554d 4245 525d 2c20 3c2d  -t> [NUMBER], <-
-00058ee0: 2d74 6169 6c3e 205b 4e55 4d42 4552 5d0a  -tail> [NUMBER].
-00058ef0: 5072 696e 7420 6c61 7374 206d 6573 7361  Print last messa
-00058f00: 6765 732e 0a3c 2d79 3e2c 203c 2d2d 6c69  ges..<-y>, <--li
-00058f10: 7374 656e 2d73 656c 663e 0a50 7269 6e74  sten-self>.Print
-00058f20: 2079 6f75 7220 6f77 6e20 6d65 7373 6167   your own messag
-00058f30: 6573 2061 7320 7765 6c6c 2e0a 3c2d 2d70  es as well..<--p
-00058f40: 7269 6e74 2d65 7665 6e74 2d69 643e 0a50  rint-event-id>.P
-00058f50: 7269 6e74 2065 7665 6e74 2069 6473 206f  rint event ids o
-00058f60: 6620 7265 6365 6976 6564 206d 6573 7361  f received messa
-00058f70: 6765 732e 0a3c 2d2d 646f 776e 6c6f 6164  ges..<--download
-00058f80: 2d6d 6564 6961 3e20 5b44 4f57 4e4c 4f41  -media> [DOWNLOA
-00058f90: 445f 4449 5245 4354 4f52 595d 0a44 6f77  D_DIRECTORY].Dow
-00058fa0: 6e6c 6f61 6420 6d65 6469 6120 6669 6c65  nload media file
-00058fb0: 7320 7768 696c 6520 6c69 7374 656e 696e  s while listenin
-00058fc0: 672e 0a3c 2d2d 646f 776e 6c6f 6164 2d6d  g..<--download-m
-00058fd0: 6564 6961 2d6e 616d 653e 2053 4f55 5243  edia-name> SOURC
-00058fe0: 457c 434c 4541 4e7c 4556 454e 5449 447c  E|CLEAN|EVENTID|
-00058ff0: 5449 4d45 0a53 7065 6369 6679 2074 6865  TIME.Specify the
-00059000: 206d 6574 686f 6420 746f 2064 6572 6976   method to deriv
-00059010: 6520 7468 6520 6d65 6469 6120 6669 6c65  e the media file
-00059020: 6e61 6d65 2e0a 3c2d 2d6f 732d 6e6f 7469  name..<--os-noti
-00059030: 6679 3e0a 4e6f 7469 6679 206d 6520 6f66  fy>.Notify me of
-00059040: 2061 7272 6976 696e 6720 6d65 7373 6167   arriving messag
-00059050: 6573 2e0a 3c2d 2d73 6574 2d64 6576 6963  es..<--set-devic
-00059060: 652d 6e61 6d65 3e20 4445 5649 4345 5f4e  e-name> DEVICE_N
-00059070: 414d 450a 5365 7420 6f72 2072 656e 616d  AME.Set or renam
-00059080: 6520 7468 6520 6375 7272 656e 7420 6465  e the current de
-00059090: 7669 6365 2e0a 3c2d 2d73 6574 2d64 6973  vice..<--set-dis
-000590a0: 706c 6179 2d6e 616d 653e 2044 4953 504c  play-name> DISPL
-000590b0: 4159 5f4e 414d 450a 5365 7420 6f72 2072  AY_NAME.Set or r
-000590c0: 656e 616d 6520 7468 6520 6469 7370 6c61  ename the displa
-000590d0: 7920 6e61 6d65 2e0a 3c2d 2d67 6574 2d64  y name..<--get-d
-000590e0: 6973 706c 6179 2d6e 616d 653e 0a47 6574  isplay-name>.Get
-000590f0: 2074 6865 2064 6973 706c 6179 206e 616d   the display nam
-00059100: 6520 6f66 2079 6f75 7273 656c 662e 0a3c  e of yourself..<
-00059110: 2d2d 7365 742d 7072 6573 656e 6365 3e20  --set-presence> 
-00059120: 4f4e 4c49 4e45 7c4f 4646 4c49 4e45 7c55  ONLINE|OFFLINE|U
-00059130: 4e41 5641 494c 4142 4c45 0a53 6574 2079  NAVAILABLE.Set y
-00059140: 6f75 7220 7072 6573 656e 6365 2e0a 3c2d  our presence..<-
-00059150: 2d67 6574 2d70 7265 7365 6e63 653e 0a47  -get-presence>.G
-00059160: 6574 2079 6f75 7220 7072 6573 656e 6365  et your presence
-00059170: 2e0a 3c2d 2d75 706c 6f61 643e 2046 494c  ..<--upload> FIL
-00059180: 4520 5b46 494c 4520 2e2e 2e5d 0a55 706c  E [FILE ...].Upl
-00059190: 6f61 6420 6f6e 6520 6f72 206d 756c 7469  oad one or multi
-000591a0: 706c 6520 6669 6c65 7320 746f 2074 6865  ple files to the
-000591b0: 2063 6f6e 7465 6e74 2072 6570 6f73 6974   content reposit
-000591c0: 6f72 792e 0a3c 2d2d 646f 776e 6c6f 6164  ory..<--download
-000591d0: 3e20 4d58 435f 5552 4920 5b4d 5843 5f55  > MXC_URI [MXC_U
-000591e0: 5249 202e 2e2e 5d0a 446f 776e 6c6f 6164  RI ...].Download
-000591f0: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
-00059200: 2066 696c 6573 2066 726f 6d20 7468 6520   files from the 
-00059210: 636f 6e74 656e 7420 7265 706f 7369 746f  content reposito
-00059220: 7279 2e0a 3c2d 2d64 656c 6574 652d 6d78  ry..<--delete-mx
-00059230: 633e 204d 5843 5f55 5249 205b 4d58 435f  c> MXC_URI [MXC_
-00059240: 5552 4920 2e2e 2e5d 0a44 656c 6574 6520  URI ...].Delete 
-00059250: 6f6e 6520 6f72 206d 756c 7469 706c 6520  one or multiple 
-00059260: 6f62 6a65 6374 7320 6672 6f6d 2074 6865  objects from the
-00059270: 2063 6f6e 7465 6e74 2072 6570 6f73 6974   content reposit
-00059280: 6f72 792e 0a3c 2d2d 6465 6c65 7465 2d6d  ory..<--delete-m
-00059290: 7863 2d62 6566 6f72 653e 2054 494d 4553  xc-before> TIMES
-000592a0: 5441 4d50 205b 5449 4d45 5354 414d 5020  TAMP [TIMESTAMP 
-000592b0: 2e2e 2e5d 0a44 656c 6574 6520 6f6c 6420  ...].Delete old 
-000592c0: 6f62 6a65 6374 7320 6672 6f6d 2074 6865  objects from the
-000592d0: 2063 6f6e 7465 6e74 2072 6570 6f73 6974   content reposit
-000592e0: 6f72 790a 3c2d 2d6a 6f69 6e65 642d 726f  ory.<--joined-ro
-000592f0: 6f6d 733e 0a50 7269 6e74 2074 6865 206c  oms>.Print the l
-00059300: 6973 7420 6f66 206a 6f69 6e65 6420 726f  ist of joined ro
-00059310: 6f6d 732e 0a3c 2d2d 6a6f 696e 6564 2d6d  oms..<--joined-m
-00059320: 656d 6265 7273 3e20 524f 4f4d 205b 524f  embers> ROOM [RO
-00059330: 4f4d 202e 2e2e 5d0a 5072 696e 7420 7468  OM ...].Print th
-00059340: 6520 6c69 7374 206f 6620 6a6f 696e 6564  e list of joined
-00059350: 206d 656d 6265 7273 2066 6f72 206f 6e65   members for one
-00059360: 206f 7220 6d75 6c74 6970 6c65 2072 6f6f   or multiple roo
-00059370: 6d73 2e0a 3c2d 2d6a 6f69 6e65 642d 646d  ms..<--joined-dm
-00059380: 2d72 6f6f 6d73 3e20 5553 4552 205b 5553  -rooms> USER [US
-00059390: 4552 202e 2e2e 5d0a 5072 696e 7420 7468  ER ...].Print th
-000593a0: 6520 6c69 7374 206f 6620 6a6f 696e 6564  e list of joined
-000593b0: 2044 4d20 726f 6f6d 7320 666f 7220 6f6e   DM rooms for on
-000593c0: 6520 6f72 206d 756c 7469 706c 6520 7573  e or multiple us
-000593d0: 6572 732e 0a3c 2d2d 6d78 632d 746f 2d68  ers..<--mxc-to-h
-000593e0: 7474 703e 204d 5843 5f55 5249 205b 4d58  ttp> MXC_URI [MX
-000593f0: 435f 5552 4920 2e2e 2e5d 0a43 6f6e 7665  C_URI ...].Conve
-00059400: 7274 204d 5843 2055 5249 7320 746f 2048  rt MXC URIs to H
-00059410: 5454 5020 5552 4c73 2e0a 3c2d 2d64 6576  TTP URLs..<--dev
-00059420: 6963 6573 2c3e 203c 2d2d 6765 742d 6465  ices,> <--get-de
-00059430: 7669 6365 733e 0a50 7269 6e74 2074 6865  vices>.Print the
-00059440: 206c 6973 7420 6f66 2064 6576 6963 6573   list of devices
-00059450: 2e0a 3c2d 2d64 6973 636f 7665 7279 2d69  ..<--discovery-i
-00059460: 6e66 6f3e 0a50 7269 6e74 2064 6973 636f  nfo>.Print disco
-00059470: 7665 7279 2069 6e66 6f72 6d61 7469 6f6e  very information
-00059480: 2061 626f 7574 2063 7572 7265 6e74 2068   about current h
-00059490: 6f6d 6573 6572 7665 722e 0a3c 2d2d 6c6f  omeserver..<--lo
-000594a0: 6769 6e2d 696e 666f 3e0a 5072 696e 7420  gin-info>.Print 
-000594b0: 6c6f 6769 6e20 6d65 7468 6f64 7320 7375  login methods su
-000594c0: 7070 6f72 7465 6420 6279 2074 6865 2068  pported by the h
-000594d0: 6f6d 6573 6572 7665 722e 0a3c 2d2d 636f  omeserver..<--co
-000594e0: 6e74 656e 742d 7265 706f 7369 746f 7279  ntent-repository
-000594f0: 2d63 6f6e 6669 673e 0a50 7269 6e74 2074  -config>.Print t
-00059500: 6865 2063 6f6e 7465 6e74 2072 6570 6f73  he content repos
-00059510: 6974 6f72 7920 636f 6e66 6967 7572 6174  itory configurat
-00059520: 696f 6e2e 0a3c 2d2d 7265 7374 3e20 5245  ion..<--rest> RE
-00059530: 5354 5f4d 4554 484f 4420 4441 5441 2055  ST_METHOD DATA U
-00059540: 524c 205b 5245 5354 5f4d 4554 484f 4420  RL [REST_METHOD 
-00059550: 4441 5441 2055 524c 202e 2e2e 5d0a 5573  DATA URL ...].Us
-00059560: 6520 7468 6520 4d61 7472 6978 2043 6c69  e the Matrix Cli
-00059570: 656e 7420 5245 5354 2041 5049 2e0a 3c2d  ent REST API..<-
-00059580: 2d73 6574 2d61 7661 7461 723e 2041 5641  -set-avatar> AVA
-00059590: 5441 525f 4d58 435f 5552 490a 5365 7420  TAR_MXC_URI.Set 
-000595a0: 796f 7572 2061 7661 7461 722e 0a3c 2d2d  your avatar..<--
-000595b0: 6765 742d 6176 6174 6172 3e20 5b55 5345  get-avatar> [USE
-000595c0: 5220 2e2e 2e5d 0a47 6574 2061 6e20 6176  R ...].Get an av
-000595d0: 6174 6172 2e0a 3c2d 2d67 6574 2d70 726f  atar..<--get-pro
-000595e0: 6669 6c65 3e20 5b55 5345 5220 2e2e 2e5d  file> [USER ...]
-000595f0: 0a47 6574 2061 2075 7365 7220 7072 6f66  .Get a user prof
-00059600: 696c 652e 0a3c 2d2d 6765 742d 726f 6f6d  ile..<--get-room
-00059610: 2d69 6e66 6f3e 205b 524f 4f4d 202e 2e2e  -info> [ROOM ...
-00059620: 5d0a 4765 7420 7468 6520 726f 6f6d 2069  ].Get the room i
-00059630: 6e66 6f72 6d61 7469 6f6e 2e0a 3c2d 2d67  nformation..<--g
-00059640: 6574 2d63 6c69 656e 742d 696e 666f 3e0a  et-client-info>.
-00059650: 5072 696e 7420 636c 6965 6e74 2069 6e66  Print client inf
-00059660: 6f72 6d61 7469 6f6e 2e0a 3c2d 2d68 6173  ormation..<--has
-00059670: 2d70 6572 6d69 7373 696f 6e3e 2052 4f4f  -permission> ROO
-00059680: 4d20 4241 4e7c 494e 5649 5445 7c4b 4943  M BAN|INVITE|KIC
-00059690: 4b7c 4e4f 5449 4649 4341 5449 4f4e 537c  K|NOTIFICATIONS|
-000596a0: 5245 4441 4354 7c65 7463 205b 524f 4f4d  REDACT|etc [ROOM
-000596b0: 2042 414e 7c49 4e56 4954 457c 4b49 434b   BAN|INVITE|KICK
-000596c0: 7c4e 4f54 4946 4943 4154 494f 4e53 7c52  |NOTIFICATIONS|R
-000596d0: 4544 4143 547c 6574 6320 2e2e 2e5d 0a49  EDACT|etc ...].I
-000596e0: 6e71 7569 7265 2061 626f 7574 2070 6572  nquire about per
-000596f0: 6d69 7373 696f 6e73 2e0a 3c2d 2d69 6d70  missions..<--imp
-00059700: 6f72 742d 6b65 7973 3e20 4649 4c45 2050  ort-keys> FILE P
-00059710: 4153 5350 4852 4153 4520 4649 4c45 2050  ASSPHRASE FILE P
-00059720: 4153 5350 4852 4153 450a 496d 706f 7274  ASSPHRASE.Import
-00059730: 204d 6567 6f6c 6d20 6465 6372 7970 7469   Megolm decrypti
-00059740: 6f6e 206b 6579 7320 6672 6f6d 2061 2066  on keys from a f
-00059750: 696c 652e 0a3c 2d2d 6578 706f 7274 2d6b  ile..<--export-k
-00059760: 6579 733e 2046 494c 4520 5041 5353 5048  eys> FILE PASSPH
-00059770: 5241 5345 2046 494c 4520 5041 5353 5048  RASE FILE PASSPH
-00059780: 5241 5345 0a45 7870 6f72 7420 616c 6c20  RASE.Export all 
-00059790: 7468 6520 4d65 676f 6c6d 2064 6563 7279  the Megolm decry
-000597a0: 7074 696f 6e20 6b65 7973 206f 6620 7468  ption keys of th
-000597b0: 6973 2064 6576 6963 652e 0a3c 2d2d 726f  is device..<--ro
-000597c0: 6f6d 2d73 6574 2d61 6c69 6173 3e20 524f  om-set-alias> RO
-000597d0: 4f4d 5f41 4c49 4153 2052 4f4f 4d20 5b52  OM_ALIAS ROOM [R
-000597e0: 4f4f 4d5f 414c 4941 5320 524f 4f4d 202e  OOM_ALIAS ROOM .
-000597f0: 2e2e 5d2c 203c 2d2d 726f 6f6d 2d70 7574  ..], <--room-put
-00059800: 2d61 6c69 6173 3e20 524f 4f4d 5f41 4c49  -alias> ROOM_ALI
-00059810: 4153 2052 4f4f 4d20 5b52 4f4f 4d5f 414c  AS ROOM [ROOM_AL
-00059820: 4941 5320 524f 4f4d 202e 2e2e 5d0a 4164  IAS ROOM ...].Ad
-00059830: 6420 616c 6961 7365 7320 746f 2072 6f6f  d aliases to roo
-00059840: 6d73 2e0a 3c2d 2d72 6f6f 6d2d 7265 736f  ms..<--room-reso
-00059850: 6c76 652d 616c 6961 733e 2052 4f4f 4d5f  lve-alias> ROOM_
-00059860: 414c 4941 5320 5b52 4f4f 4d5f 414c 4941  ALIAS [ROOM_ALIA
-00059870: 5320 2e2e 2e5d 0a53 686f 7720 726f 6f6d  S ...].Show room
-00059880: 2069 6473 2063 6f72 7265 7370 6f6e 6469   ids correspondi
-00059890: 6e67 2074 6f20 726f 6f6d 2061 6c69 6173  ng to room alias
-000598a0: 6573 2e0a 3c2d 2d72 6f6f 6d2d 6465 6c65  es..<--room-dele
-000598b0: 7465 2d61 6c69 6173 3e20 524f 4f4d 5f41  te-alias> ROOM_A
-000598c0: 4c49 4153 205b 524f 4f4d 5f41 4c49 4153  LIAS [ROOM_ALIAS
-000598d0: 202e 2e2e 5d0a 4465 6c65 7465 206f 6e65   ...].Delete one
-000598e0: 206f 7220 6d75 6c74 6970 6c65 2072 6f6f   or multiple roo
-000598f0: 6d73 2061 6c69 6173 6573 2e0a 3c2d 2d67  ms aliases..<--g
-00059900: 6574 2d6f 7065 6e69 642d 746f 6b65 6e3e  et-openid-token>
-00059910: 205b 5553 4552 202e 2e2e 5d0a 4765 7420   [USER ...].Get 
-00059920: 616e 204f 7065 6e49 4420 746f 6b65 6e2e  an OpenID token.
-00059930: 0a3c 2d2d 726f 6f6d 2d67 6574 2d76 6973  .<--room-get-vis
-00059940: 6962 696c 6974 793e 205b 524f 4f4d 202e  ibility> [ROOM .
-00059950: 2e2e 5d0a 4765 7420 7468 6520 7669 7369  ..].Get the visi
-00059960: 6269 6c69 7479 206f 6620 6f6e 6520 6f72  bility of one or
-00059970: 206d 6f72 6520 726f 6f6d 732e 0a3c 2d2d   more rooms..<--
-00059980: 726f 6f6d 2d67 6574 2d73 7461 7465 3e20  room-get-state> 
-00059990: 5b52 4f4f 4d20 2e2e 2e5d 0a47 6574 2074  [ROOM ...].Get t
-000599a0: 6865 2073 7461 7465 206f 6620 6f6e 6520  he state of one 
-000599b0: 6f72 206d 6f72 6520 726f 6f6d 732e 0a3c  or more rooms..<
-000599c0: 2d2d 6465 6c65 7465 2d64 6576 6963 653e  --delete-device>
-000599d0: 2044 4556 4943 4520 5b44 4556 4943 4520   DEVICE [DEVICE 
-000599e0: 2e2e 2e5d 0a44 656c 6574 6520 6f6e 6520  ...].Delete one 
-000599f0: 6f72 206d 756c 7469 706c 6520 6465 7669  or multiple devi
-00059a00: 6365 732e 0a3c 2d2d 726f 6f6d 2d72 6564  ces..<--room-red
-00059a10: 6163 743e 2052 4f4f 4d5f 4944 2045 5645  act> ROOM_ID EVE
-00059a20: 4e54 5f49 4420 5245 4153 4f4e 205b 524f  NT_ID REASON [RO
-00059a30: 4f4d 5f49 4420 4556 454e 545f 4944 2052  OM_ID EVENT_ID R
-00059a40: 4541 534f 4e20 2e2e 2e5d 2c20 3c2d 2d72  EASON ...], <--r
-00059a50: 6f6f 6d2d 6465 6c65 7465 2d63 6f6e 7465  oom-delete-conte
-00059a60: 6e74 3e20 524f 4f4d 5f49 4420 4556 454e  nt> ROOM_ID EVEN
-00059a70: 545f 4944 2052 4541 534f 4e20 5b52 4f4f  T_ID REASON [ROO
-00059a80: 4d5f 4944 2045 5645 4e54 5f49 4420 5245  M_ID EVENT_ID RE
-00059a90: 4153 4f4e 202e 2e2e 5d0a 5374 7269 7020  ASON ...].Strip 
-00059aa0: 696e 666f 726d 6174 696f 6e20 6f75 7420  information out 
-00059ab0: 6f66 206f 6e65 206f 7220 7365 7665 7261  of one or severa
-00059ac0: 6c20 6576 656e 7473 2e0a 3c2d 2d77 686f  l events..<--who
-00059ad0: 616d 693e 0a50 7269 6e74 2079 6f75 7220  ami>.Print your 
-00059ae0: 7573 6572 2069 642e 0a3c 2d2d 6e6f 2d73  user id..<--no-s
-00059af0: 736c 3e0a 536b 6970 2053 534c 2076 6572  sl>.Skip SSL ver
-00059b00: 6966 6963 6174 696f 6e2e 0a3c 2d2d 7373  ification..<--ss
-00059b10: 6c2d 6365 7274 6966 6963 6174 653e 2053  l-certificate> S
-00059b20: 534c 5f43 4552 5449 4649 4341 5445 5f46  SL_CERTIFICATE_F
-00059b30: 494c 450a 5573 6520 796f 7572 206f 776e  ILE.Use your own
-00059b40: 2053 534c 2063 6572 7469 6669 6361 7465   SSL certificate
-00059b50: 2e0a 3c2d 2d66 696c 652d 6e61 6d65 3e20  ..<--file-name> 
-00059b60: 4649 4c45 205b 4649 4c45 202e 2e2e 5d0a  FILE [FILE ...].
-00059b70: 5370 6563 6966 7920 6f6e 6520 6f72 206d  Specify one or m
-00059b80: 756c 7469 706c 6520 6669 6c65 206e 616d  ultiple file nam
-00059b90: 6573 2066 6f72 2073 6f6d 6520 6163 7469  es for some acti
-00059ba0: 6f6e 732e 0a3c 2d2d 6b65 792d 6469 6374  ons..<--key-dict
-00059bb0: 3e20 4b45 595f 4449 4354 494f 4e41 5259  > KEY_DICTIONARY
-00059bc0: 205b 4b45 595f 4449 4354 494f 4e41 5259   [KEY_DICTIONARY
-00059bd0: 202e 2e2e 5d0a 5370 6563 6966 7920 6f6e   ...].Specify on
-00059be0: 6520 6f72 206d 756c 7469 706c 6520 6b65  e or multiple ke
-00059bf0: 7920 6469 6374 696f 6e61 7269 6573 2066  y dictionaries f
-00059c00: 6f72 2064 6563 7279 7074 696f 6e2e 0a3c  or decryption..<
-00059c10: 2d2d 706c 6169 6e3e 0a44 6973 6162 6c65  --plain>.Disable
-00059c20: 2065 6e63 7279 7074 696f 6e20 666f 7220   encryption for 
-00059c30: 6120 7370 6563 6966 6963 2061 6374 696f  a specific actio
-00059c40: 6e2e 0a3c 2d2d 7365 7061 7261 746f 723e  n..<--separator>
-00059c50: 2053 4550 4152 4154 4f52 0a53 6574 2061   SEPARATOR.Set a
-00059c60: 2063 7573 746f 6d20 7365 7061 7261 746f   custom separato
-00059c70: 7220 7573 6564 2066 6f72 2063 6572 7461  r used for certa
-00059c80: 696e 2070 7269 6e74 206f 7574 732e 0a3c  in print outs..<
-00059c90: 2d2d 6163 6365 7373 2d74 6f6b 656e 3e20  --access-token> 
-00059ca0: 4143 4345 5353 5f54 4f4b 454e 0a53 6574  ACCESS_TOKEN.Set
-00059cb0: 2061 2063 7573 746f 6d20 6163 6365 7373   a custom access
-00059cc0: 2074 6f6b 656e 2066 6f72 2075 7365 2062   token for use b
-00059cd0: 7920 6365 7274 6169 6e20 6163 7469 6f6e  y certain action
-00059ce0: 732e 0a3c 2d2d 7061 7373 776f 7264 3e20  s..<--password> 
-00059cf0: 5041 5353 574f 5244 0a53 7065 6369 6679  PASSWORD.Specify
-00059d00: 2061 2070 6173 7377 6f72 6420 666f 7220   a password for 
-00059d10: 7573 6520 6279 2063 6572 7461 696e 2061  use by certain a
-00059d20: 6374 696f 6e73 2e0a 3c2d 2d68 6f6d 6573  ctions..<--homes
-00059d30: 6572 7665 723e 2048 4f4d 4553 4552 5645  erver> HOMESERVE
-00059d40: 525f 5552 4c0a 5370 6563 6966 7920 6120  R_URL.Specify a 
-00059d50: 686f 6d65 7365 7276 6572 2066 6f72 2075  homeserver for u
-00059d60: 7365 2062 7920 6365 7274 6169 6e20 6163  se by certain ac
-00059d70: 7469 6f6e 732e 0a3c 2d2d 6465 7669 6365  tions..<--device
-00059d80: 3e20 4445 5649 4345 5f4e 414d 450a 5370  > DEVICE_NAME.Sp
-00059d90: 6563 6966 7920 6120 6465 7669 6365 206e  ecify a device n
-00059da0: 616d 652c 2066 6f72 2075 7365 2062 7920  ame, for use by 
-00059db0: 6365 7274 6169 6e20 6163 7469 6f6e 732e  certain actions.
-00059dc0: 0a3c 2d2d 7379 6e63 3e20 4655 4c4c 7c4f  .<--sync> FULL|O
-00059dd0: 4646 0a43 686f 6f73 6520 7379 6e63 6872  FF.Choose synchr
-00059de0: 6f6e 697a 6174 696f 6e20 6f70 7469 6f6e  onization option
-00059df0: 732e 0a3c 2d6f 3e20 5445 5854 7c4a 534f  s..<-o> TEXT|JSO
-00059e00: 4e7c 4a53 4f4e 2d4d 4158 7c4a 534f 4e2d  N|JSON-MAX|JSON-
-00059e10: 5350 4543 2c20 3c2d 2d6f 7574 7075 743e  SPEC, <--output>
-00059e20: 2054 4558 547c 4a53 4f4e 7c4a 534f 4e2d   TEXT|JSON|JSON-
-00059e30: 4d41 587c 4a53 4f4e 2d53 5045 430a 5365  MAX|JSON-SPEC.Se
-00059e40: 6c65 6374 2061 6e20 6f75 7470 7574 2066  lect an output f
-00059e50: 6f72 6d61 742e 0a3c 2d2d 726f 6f6d 2d69  ormat..<--room-i
-00059e60: 6e76 6974 6573 3e20 5b4c 4953 547c 4a4f  nvites> [LIST|JO
-00059e70: 494e 7c4c 4953 542b 4a4f 494e 5d0a 4c69  IN|LIST+JOIN].Li
-00059e80: 7374 2072 6f6f 6d20 696e 7669 7461 7469  st room invitati
-00059e90: 6f6e 7320 616e 642f 6f72 206a 6f69 6e20  ons and/or join 
-00059ea0: 696e 7669 7465 6420 726f 6f6d 732e 0a3c  invited rooms..<
-00059eb0: 2d76 3e20 5b50 5249 4e54 7c43 4845 434b  -v> [PRINT|CHECK
-00059ec0: 5d2c 202d 5620 5b50 5249 4e54 7c43 4845  ], -V [PRINT|CHE
-00059ed0: 434b 5d2c 203c 2d2d 7665 7273 696f 6e3e  CK], <--version>
-00059ee0: 205b 5052 494e 547c 4348 4543 4b5d 0a50   [PRINT|CHECK].P
-00059ef0: 7269 6e74 2076 6572 7369 6f6e 2069 6e66  rint version inf
-00059f00: 6f72 6d61 7469 6f6e 206f 7220 6368 6563  ormation or chec
-00059f10: 6b20 666f 7220 7570 6461 7465 732e 0a22  k for updates.."
-00059f20: 2222 2e72 6570 6c61 6365 280a 2020 2020  "".replace(.    
-00059f30: 2020 2020 2020 2020 223c 222c 2065 6f6e          "<", eon
-00059f40: 0a20 2020 2020 2020 2029 2e72 6570 6c61  .        ).repla
-00059f50: 6365 280a 2020 2020 2020 2020 2020 2020  ce(.            
-00059f60: 223e 222c 2065 6f66 660a 2020 2020 2020  ">", eoff.      
-00059f70: 2020 290a 2020 2020 2020 2020 6865 6164    ).        head
-00059f80: 6572 203d 2046 616c 7365 2020 2320 6669  er = False  # fi
-00059f90: 7273 7420 6c69 6e65 2069 7320 6e65 776c  rst line is newl
-00059fa0: 696e 650a 2020 2020 2020 2020 666f 7220  ine.        for 
-00059fb0: 6c69 6e65 2069 6e20 6865 6c70 5f68 656c  line in help_hel
-00059fc0: 705f 7072 652e 7370 6c69 7428 225c 6e22  p_pre.split("\n"
-00059fd0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00059fe0: 6620 6865 6164 6572 3a0a 2020 2020 2020  f header:.      
-00059ff0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0005a000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005a010: 2020 2020 2074 6578 7477 7261 702e 6669       textwrap.fi
-0005a020: 6c6c 2863 6f6e 202b 206c 696e 6520 2b20  ll(con + line + 
-0005a030: 636f 6666 2c20 7769 6474 683d 7465 726d  coff, width=term
-0005a040: 5f77 6964 7468 292c 0a20 2020 2020 2020  _width),.       
-0005a050: 2020 2020 2020 2020 2020 2020 2066 6c75               flu
-0005a060: 7368 3d54 7275 652c 0a20 2020 2020 2020  sh=True,.       
-0005a070: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0005a080: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0005a090: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0005a0a0: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-0005a0b0: 2020 2020 2020 2020 7465 7874 7772 6170          textwrap
-0005a0c0: 2e69 6e64 656e 7428 0a20 2020 2020 2020  .indent(.       
+0003d8b0: 2066 2254 6865 2070 726f 6772 616d 207b   f"The program {
+0003d8c0: 5052 4f47 5f57 4954 485f 4558 547d 2066  PROG_WITH_EXT} f
+0003d8d0: 6169 6c65 642e 2022 0a20 2020 2020 2020  ailed. ".       
+0003d8e0: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
+0003d8f0: 2072 6573 706f 6e73 6520 7761 7320 7265   response was re
+0003d900: 6365 6976 6564 2066 726f 6d20 5353 4f20  ceived from SSO 
+0003d910: 7072 6f76 6964 6572 2e20 220a 2020 2020  provider. ".    
+0003d920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d930: 2254 6865 7265 2077 6173 2061 2074 696d  "There was a tim
+0003d940: 656f 7574 2e20 536f 7272 792e 220a 2020  eout. Sorry.".  
+0003d950: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0003d960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d970: 7261 6973 650a 2020 2020 2020 2020 6669  raise.        fi
+0003d980: 6e61 6c6c 793a 0a20 2020 2020 2020 2020  nally:.         
+0003d990: 2020 2061 7761 6974 2072 756e 6e65 722e     await runner.
+0003d9a0: 636c 6561 6e75 7028 290a 0a20 2020 2023  cleanup()..    #
+0003d9b0: 2043 6f6e 6669 6775 7261 7469 6f6e 206f   Configuration o
+0003d9c0: 7074 696f 6e73 2066 6f72 2074 6865 2041  ptions for the A
+0003d9d0: 7379 6e63 436c 6965 6e74 0a20 2020 2063  syncClient.    c
+0003d9e0: 6c69 656e 745f 636f 6e66 6967 203d 2041  lient_config = A
+0003d9f0: 7379 6e63 436c 6965 6e74 436f 6e66 6967  syncClientConfig
+0003da00: 280a 2020 2020 2020 2020 6d61 785f 6c69  (.        max_li
+0003da10: 6d69 745f 6578 6365 6564 6564 3d30 2c0a  mit_exceeded=0,.
+0003da20: 2020 2020 2020 2020 6d61 785f 7469 6d65          max_time
+0003da30: 6f75 7473 3d30 2c0a 2020 2020 2020 2020  outs=0,.        
+0003da40: 7374 6f72 655f 7379 6e63 5f74 6f6b 656e  store_sync_token
+0003da50: 733d 5472 7565 2c0a 2020 2020 2020 2020  s=True,.        
+0003da60: 656e 6372 7970 7469 6f6e 5f65 6e61 626c  encryption_enabl
+0003da70: 6564 3d54 7275 652c 0a20 2020 2029 0a0a  ed=True,.    )..
+0003da80: 2020 2020 7374 6f72 655f 6372 6561 7465      store_create
+0003da90: 2873 746f 7265 5f64 6972 290a 0a20 2020  (store_dir)..   
+0003daa0: 2023 2049 6e69 7469 616c 697a 6520 7468   # Initialize th
+0003dab0: 6520 6d61 7472 6978 2063 6c69 656e 740a  e matrix client.
+0003dac0: 2020 2020 636c 6965 6e74 203d 2041 7379      client = Asy
+0003dad0: 6e63 436c 6965 6e74 280a 2020 2020 2020  ncClient(.      
+0003dae0: 2020 686f 6d65 7365 7276 6572 2c0a 2020    homeserver,.  
+0003daf0: 2020 2020 2020 2222 2069 6620 6e6f 7420        "" if not 
+0003db00: 7573 6572 5f69 6420 656c 7365 2075 7365  user_id else use
+0003db10: 725f 6964 2c0a 2020 2020 2020 2020 7374  r_id,.        st
+0003db20: 6f72 655f 7061 7468 3d73 746f 7265 5f64  ore_path=store_d
+0003db30: 6972 2c0a 2020 2020 2020 2020 636f 6e66  ir,.        conf
+0003db40: 6967 3d63 6c69 656e 745f 636f 6e66 6967  ig=client_config
+0003db50: 2c0a 2020 2020 2020 2020 7373 6c3d 6773  ,.        ssl=gs
+0003db60: 2e73 736c 2c0a 2020 2020 2020 2020 7072  .ssl,.        pr
+0003db70: 6f78 793d 6773 2e70 612e 7072 6f78 792c  oxy=gs.pa.proxy,
+0003db80: 0a20 2020 2029 0a20 2020 2074 7279 3a0a  .    ).    try:.
+0003db90: 2020 2020 2020 2020 6966 206d 6574 686f          if metho
+0003dba0: 6420 3d3d 2022 7373 6f22 3a0a 2020 2020  d == "sso":.    
+0003dbb0: 2020 2020 2020 2020 7265 7370 203d 2061          resp = a
+0003dbc0: 7761 6974 2063 6c69 656e 742e 6c6f 6769  wait client.logi
+0003dbd0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0003dbe0: 2020 2074 6f6b 656e 3d6c 6f67 696e 5f74     token=login_t
+0003dbf0: 6f6b 656e 2c20 6465 7669 6365 5f6e 616d  oken, device_nam
+0003dc00: 653d 6465 7669 6365 5f6e 616d 650a 2020  e=device_name.  
+0003dc10: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0003dc20: 2020 2020 656c 6966 206d 6574 686f 6420      elif method 
+0003dc30: 3d3d 2022 7061 7373 776f 7264 223a 0a20  == "password":. 
+0003dc40: 2020 2020 2020 2020 2020 2072 6573 7020             resp 
+0003dc50: 3d20 6177 6169 7420 636c 6965 6e74 2e6c  = await client.l
+0003dc60: 6f67 696e 2870 6173 7377 6f72 642c 2064  ogin(password, d
+0003dc70: 6576 6963 655f 6e61 6d65 3d64 6576 6963  evice_name=devic
+0003dc80: 655f 6e61 6d65 290a 0a20 2020 2020 2020  e_name)..       
+0003dc90: 2023 2063 6865 636b 2074 6861 7420 7765   # check that we
+0003dca0: 206c 6f67 6765 6420 696e 2073 7563 6365   logged in succe
+0003dcb0: 7366 756c 6c79 0a20 2020 2020 2020 2069  sfully.        i
+0003dcc0: 6620 6973 696e 7374 616e 6365 2872 6573  f isinstance(res
+0003dcd0: 702c 204c 6f67 696e 5265 7370 6f6e 7365  p, LoginResponse
+0003dce0: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
+0003dcf0: 2077 6865 6e20 7772 6974 696e 672c 2061   when writing, a
+0003dd00: 6c77 6179 7320 7772 6974 6520 746f 2070  lways write to p
+0003dd10: 7269 6d61 7279 206c 6f63 6174 696f 6e20  rimary location 
+0003dd20: 2865 2e67 2e20 2e29 0a20 2020 2020 2020  (e.g. .).       
+0003dd30: 2020 2020 2077 7269 7465 5f63 7265 6465       write_crede
+0003dd40: 6e74 6961 6c73 5f74 6f5f 6469 736b 280a  ntials_to_disk(.
+0003dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dd60: 686f 6d65 7365 7276 6572 2c0a 2020 2020  homeserver,.    
+0003dd70: 2020 2020 2020 2020 2020 2020 7265 7370              resp
+0003dd80: 2e75 7365 725f 6964 2c0a 2020 2020 2020  .user_id,.      
+0003dd90: 2020 2020 2020 2020 2020 7265 7370 2e64            resp.d
+0003dda0: 6576 6963 655f 6964 2c20 2023 206e 6f74  evice_id,  # not
+0003ddb0: 6520 7468 6973 2069 7320 616e 2069 642c  e this is an id,
+0003ddc0: 206e 6f74 2061 206e 616d 6521 0a20 2020   not a name!.   
+0003ddd0: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0003dde0: 702e 6163 6365 7373 5f74 6f6b 656e 2c0a  p.access_token,.
+0003ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003de00: 726f 6f6d 5f69 642c 0a20 2020 2020 2020  room_id,.       
+0003de10: 2020 2020 2020 2020 2067 732e 7061 2e63           gs.pa.c
+0003de20: 7265 6465 6e74 6961 6c73 2c0a 2020 2020  redentials,.    
+0003de30: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0003de40: 2020 2020 2020 6773 2e63 6c69 656e 7420        gs.client 
+0003de50: 3d20 636c 6965 6e74 0a20 2020 2020 2020  = client.       
+0003de60: 2020 2020 2067 732e 6372 6564 656e 7469       gs.credenti
+0003de70: 616c 7320 3d20 7265 6164 5f63 7265 6465  als = read_crede
+0003de80: 6e74 6961 6c73 5f66 726f 6d5f 6469 736b  ntials_from_disk
+0003de90: 2863 7265 6465 6e74 6961 6c73 5f66 696c  (credentials_fil
+0003dea0: 6529 0a20 2020 2020 2020 2020 2020 2074  e).            t
+0003deb0: 7874 203d 2028 0a20 2020 2020 2020 2020  xt = (.         
+0003dec0: 2020 2020 2020 2022 4532 3333 3a20 220a         "E233: ".
+0003ded0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dee0: 6622 4c6f 6720 696e 2075 7369 6e67 206d  f"Log in using m
+0003def0: 6574 686f 6420 277b 6d65 7468 6f64 7d27  ethod '{method}'
+0003df00: 2077 6173 2073 7563 6365 7373 6675 6c2e   was successful.
+0003df10: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
+0003df20: 2020 2066 2243 7265 6465 6e74 6961 6c73     f"Credentials
+0003df30: 2077 6572 6520 7374 6f72 6564 2069 6e20   were stored in 
+0003df40: 6669 6c65 2027 7b67 732e 7061 2e63 7265  file '{gs.pa.cre
+0003df50: 6465 6e74 6961 6c73 7d27 2e20 220a 2020  dentials}'. ".  
+0003df60: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+0003df70: 4672 6f6d 206e 6f77 206f 6e20 796f 7520  From now on you 
+0003df80: 6361 6e20 7275 6e20 7072 6f67 7261 6d20  can run program 
+0003df90: 277b 5052 4f47 5f57 4954 485f 4558 547d  '{PROG_WITH_EXT}
+0003dfa0: 2720 220a 2020 2020 2020 2020 2020 2020  ' ".            
+0003dfb0: 2020 2020 2277 6974 686f 7574 206c 6f67      "without log
+0003dfc0: 2069 6e2c 2061 7320 616e 2061 6363 6573   in, as an acces
+0003dfd0: 7320 746f 6b65 6e20 6973 2073 746f 7265  s token is store
+0003dfe0: 6420 696e 2079 6f75 7220 220a 2020 2020  d in your ".    
+0003dff0: 2020 2020 2020 2020 2020 2020 2263 7265              "cre
+0003e000: 6465 6e74 6961 6c73 2066 696c 652e 2022  dentials file. "
+0003e010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003e020: 2022 4966 2079 6f75 2070 6c61 6e20 6f6e   "If you plan on
+0003e030: 2068 6176 696e 6720 6d61 6e79 2063 7265   having many cre
+0003e040: 6465 6e74 6961 6c20 6669 6c65 732c 2063  dential files, c
+0003e050: 6f6e 7369 6465 7220 220a 2020 2020 2020  onsider ".      
+0003e060: 2020 2020 2020 2020 2020 6622 6d6f 7669            f"movi
+0003e070: 6e67 2074 6865 6d20 746f 2064 6972 6563  ng them to direc
+0003e080: 746f 7279 2027 7b43 5245 4445 4e54 4941  tory '{CREDENTIA
+0003e090: 4c53 5f44 4952 5f4c 4153 5452 4553 4f52  LS_DIR_LASTRESOR
+0003e0a0: 547d 272e 220a 2020 2020 2020 2020 2020  T}'.".          
+0003e0b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0003e0c0: 6773 2e6c 6f67 2e69 6e66 6f28 7478 7429  gs.log.info(txt)
+0003e0d0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0003e0e0: 2020 2020 2020 2020 2020 2023 2069 7369             # isi
+0003e0f0: 6e73 7461 6e63 6528 7265 7370 2c20 4c6f  nstance(resp, Lo
+0003e100: 6769 6e45 7272 6f72 2920 3d3d 2074 7275  ginError) == tru
+0003e110: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+0003e120: 636c 6561 6e75 700a 2020 2020 2020 2020  cleanup.        
+0003e130: 2020 2020 6177 6169 7420 636c 6965 6e74      await client
+0003e140: 2e63 6c6f 7365 2829 2020 2320 6e6f 7420  .close()  # not 
+0003e150: 7965 7420 696e 2067 732e 0a20 2020 2020  yet in gs..     
+0003e160: 2020 2020 2020 2073 746f 7265 5f64 656c         store_del
+0003e170: 6574 6528 7374 6f72 655f 6469 7229 2020  ete(store_dir)  
+0003e180: 2320 656d 7074 792c 206a 7573 7420 6372  # empty, just cr
+0003e190: 6561 7465 640a 2020 2020 2020 2020 2020  eated.          
+0003e1a0: 2020 2320 7265 7370 2064 6f65 7320 6e6f    # resp does no
+0003e1b0: 7420 636f 6e74 6169 6e20 7365 6372 6574  t contain secret
+0003e1c0: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
+0003e1d0: 7265 7370 2069 733a 206d 6573 7361 6765  resp is: message
+0003e1e0: 3d22 496e 7661 6c69 6420 7573 6572 6e61  ="Invalid userna
+0003e1f0: 6d65 206f 7220 7061 7373 776f 7264 222c  me or password",
+0003e200: 2063 6f64 653d 4d5f 464f 5242 4944 4445   code=M_FORBIDDE
+0003e210: 4e0a 2020 2020 2020 2020 2020 2020 7478  N.            tx
+0003e220: 7420 3d20 280a 2020 2020 2020 2020 2020  t = (.          
+0003e230: 2020 2020 2020 2245 3233 343a 2022 0a20        "E234: ". 
+0003e240: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0003e250: 4c6f 6720 696e 2066 6169 6c65 642e 2022  Log in failed. "
+0003e260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003e270: 2022 4d6f 7374 206c 696b 656c 7920 7772   "Most likely wr
+0003e280: 6f6e 6720 6372 6564 656e 7469 616c 7320  ong credentials 
+0003e290: 7765 7265 2065 6e74 6572 6564 2e20 220a  were entered. ".
+0003e2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e2b0: 6622 686f 6d65 7365 7276 6572 3d27 7b68  f"homeserver='{h
+0003e2c0: 6f6d 6573 6572 7665 727d 273b 2064 6576  omeserver}'; dev
+0003e2d0: 6963 6520 6e61 6d65 3d27 7b64 6576 6963  ice name='{devic
+0003e2e0: 655f 6e61 6d65 7d27 3b20 220a 2020 2020  e_name}'; ".    
+0003e2f0: 2020 2020 2020 2020 2020 2020 6622 7573              f"us
+0003e300: 6572 3d27 7b75 7365 725f 6964 7d27 3b20  er='{user_id}'; 
+0003e310: 726f 6f6d 5f69 643d 277b 726f 6f6d 5f69  room_id='{room_i
+0003e320: 647d 272e 2022 0a20 2020 2020 2020 2020  d}'. ".         
+0003e330: 2020 2020 2020 2066 2246 6169 6c65 6420         f"Failed 
+0003e340: 746f 206c 6f67 2069 6e3a 207b 7265 7370  to log in: {resp
+0003e350: 2e6d 6573 7361 6765 7d2c 207b 7374 7228  .message}, {str(
+0003e360: 7265 7370 2e73 7461 7475 735f 636f 6465  resp.status_code
+0003e370: 297d 220a 2020 2020 2020 2020 2020 2020  )}".            
+0003e380: 290a 2020 2020 2020 2020 2020 2020 6773  ).            gs
+0003e390: 2e65 7272 5f63 6f75 6e74 202b 3d20 310a  .err_count += 1.
+0003e3a0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0003e3b0: 6520 4d61 7472 6978 436f 6d6d 616e 6465  e MatrixCommande
+0003e3c0: 7245 7272 6f72 2874 7874 290a 2020 2020  rError(txt).    
+0003e3d0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0003e3e0: 2061 7320 653a 0a20 2020 2020 2020 2074   as e:.        t
+0003e3f0: 7874 203d 2028 0a20 2020 2020 2020 2020  xt = (.         
+0003e400: 2020 2022 4532 3335 3a20 220a 2020 2020     "E235: ".    
+0003e410: 2020 2020 2020 2020 224c 6f67 2069 6e20          "Log in 
+0003e420: 6661 696c 6564 2e20 536f 7272 792e 220a  failed. Sorry.".
+0003e430: 2020 2020 2020 2020 2020 2020 6622 686f              f"ho
+0003e440: 6d65 7365 7276 6572 3d27 7b68 6f6d 6573  meserver='{homes
+0003e450: 6572 7665 727d 273b 2064 6576 6963 6520  erver}'; device 
+0003e460: 6e61 6d65 3d27 7b64 6576 6963 655f 6e61  name='{device_na
+0003e470: 6d65 7d27 3b20 220a 2020 2020 2020 2020  me}'; ".        
+0003e480: 2020 2020 6622 7573 6572 3d27 7b75 7365      f"user='{use
+0003e490: 725f 6964 7d27 3b20 726f 6f6d 5f69 643d  r_id}'; room_id=
+0003e4a0: 277b 726f 6f6d 5f69 647d 272e 2022 0a20  '{room_id}'. ". 
+0003e4b0: 2020 2020 2020 2020 2020 2066 2246 6169             f"Fai
+0003e4c0: 6c65 6420 746f 206c 6f67 2069 6e3a 207b  led to log in: {
+0003e4d0: 657d 220a 2020 2020 2020 2020 290a 2020  e}".        ).  
+0003e4e0: 2020 2020 2020 2320 6773 2e65 7272 5f63        # gs.err_c
+0003e4f0: 6f75 6e74 202b 3d20 3120 2023 2064 6f6e  ount += 1  # don
+0003e500: 2774 2069 6e63 7265 6d65 6e74 2073 696e  't increment sin
+0003e510: 6365 206e 6f74 204d 6174 7269 7843 6f6d  ce not MatrixCom
+0003e520: 6d61 6e64 6572 4572 726f 720a 2020 2020  manderError.    
+0003e530: 2020 2020 7261 6973 650a 2020 2020 2320      raise.    # 
+0003e540: 7765 2061 7265 206e 6f77 2061 7574 6865  we are now authe
+0003e550: 6e74 6963 6174 6564 2c20 7765 2061 7265  nticated, we are
+0003e560: 206e 6f77 206c 6f67 6765 6420 696e 0a20   now logged in. 
+0003e570: 2020 2023 2067 7320 6e6f 7720 6861 7320     # gs now has 
+0003e580: 636c 6965 6e74 2061 6e64 2063 7265 6465  client and crede
+0003e590: 6e74 6961 6c73 2c20 6e65 6564 6564 2062  ntials, needed b
+0003e5a0: 7920 6675 7274 6865 7220 6163 7469 6f6e  y further action
+0003e5b0: 730a 0a0a 6173 796e 6320 6465 6620 696d  s...async def im
+0003e5c0: 706c 6963 6974 5f6c 6f67 696e 2829 202d  plicit_login() -
+0003e5d0: 3e20 4e6f 6e65 3a0a 2020 2020 2222 224c  > None:.    """L
+0003e5e0: 6f67 2069 6e20 7573 696e 6720 6372 6564  og in using cred
+0003e5f0: 656e 7469 616c 7320 6669 6c65 2061 6e64  entials file and
+0003e600: 2072 656d 6169 6e20 6c6f 6767 6564 2069   remain logged i
+0003e610: 6e2e 2222 220a 2020 2020 636c 6965 6e74  n.""".    client
+0003e620: 2c20 6372 6564 656e 7469 616c 7320 3d20  , credentials = 
+0003e630: 6177 6169 7420 6c6f 6769 6e5f 7573 696e  await login_usin
+0003e640: 675f 6372 6564 656e 7469 616c 735f 6669  g_credentials_fi
+0003e650: 6c65 2829 0a20 2020 2067 732e 636c 6965  le().    gs.clie
+0003e660: 6e74 203d 2063 6c69 656e 740a 2020 2020  nt = client.    
+0003e670: 6773 2e63 7265 6465 6e74 6961 6c73 203d  gs.credentials =
+0003e680: 2063 7265 6465 6e74 6961 6c73 0a0a 0a64   credentials...d
+0003e690: 6566 2072 6f6f 6d73 5f74 6f5f 6c6f 6e67  ef rooms_to_long
+0003e6a0: 5f72 6f6f 6d5f 6e61 6d65 7328 2920 2d3e  _room_names() ->
+0003e6b0: 204e 6f6e 653a 0a20 2020 2022 2222 436f   None:.    """Co
+0003e6c0: 6e76 6572 7420 666f 6f20 746f 2023 666f  nvert foo to #fo
+0003e6d0: 6f3a 6578 616d 706c 652e 636f 6d20 696e  o:example.com in
+0003e6e0: 2067 732e 7061 2e72 6f6f 6d20 7768 6572   gs.pa.room wher
+0003e6f0: 6520 6e65 6365 7373 6172 792e 2222 220a  e necessary.""".
+0003e700: 2020 2020 6966 2067 732e 7061 2e72 6f6f      if gs.pa.roo
+0003e710: 6d3a 0a20 2020 2020 2020 206c 6f6e 675f  m:.        long_
+0003e720: 726f 6f6d 7320 3d20 5b5d 0a20 2020 2020  rooms = [].     
+0003e730: 2020 2066 6f72 2072 6f6f 6d20 696e 2067     for room in g
+0003e740: 732e 7061 2e72 6f6f 6d3a 0a20 2020 2020  s.pa.room:.     
+0003e750: 2020 2020 2020 2069 6620 6973 5f73 686f         if is_sho
+0003e760: 7274 5f72 6f6f 6d5f 616c 6961 7328 726f  rt_room_alias(ro
+0003e770: 6f6d 293a 0a20 2020 2020 2020 2020 2020  om):.           
+0003e780: 2020 2020 206c 6f6e 675f 726f 6f6d 732e       long_rooms.
+0003e790: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
+0003e7a0: 2020 2020 2020 2020 2020 2020 7368 6f72              shor
+0003e7b0: 745f 726f 6f6d 5f61 6c69 6173 5f74 6f5f  t_room_alias_to_
+0003e7c0: 726f 6f6d 5f61 6c69 6173 2872 6f6f 6d2c  room_alias(room,
+0003e7d0: 2067 732e 6372 6564 656e 7469 616c 7329   gs.credentials)
+0003e7e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003e7f0: 2029 0a20 2020 2020 2020 2020 2020 2065   ).            e
+0003e800: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003e810: 2020 2020 206c 6f6e 675f 726f 6f6d 732e       long_rooms.
+0003e820: 6170 7065 6e64 2872 6f6f 6d29 0a20 2020  append(room).   
+0003e830: 2020 2020 2067 732e 7061 2e72 6f6f 6d20       gs.pa.room 
+0003e840: 3d20 6c6f 6e67 5f72 6f6f 6d73 0a0a 0a61  = long_rooms...a
+0003e850: 7379 6e63 2064 6566 2061 7379 6e63 5f6d  sync def async_m
+0003e860: 6169 6e28 2920 2d3e 204e 6f6e 653a 0a20  ain() -> None:. 
+0003e870: 2020 2022 2222 5275 6e20 6d61 696e 2066     """Run main f
+0003e880: 756e 6374 696f 6e73 2062 6569 6e67 2069  unctions being i
+0003e890: 6e73 6964 6520 7468 6520 6576 656e 7420  nside the event 
+0003e8a0: 6c6f 6f70 2e22 2222 0a20 2020 2023 206c  loop.""".    # l
+0003e8b0: 6f67 696e 2065 7870 6c69 6369 746c 790a  ogin explicitly.
+0003e8c0: 2020 2020 2320 6c6f 6769 6e20 696d 706c      # login impl
+0003e8d0: 6963 6974 6c79 0a20 2020 2023 2076 6572  icitly.    # ver
+0003e8e0: 6966 790a 2020 2020 2320 7365 742c 2067  ify.    # set, g
+0003e8f0: 6574 2c20 726f 6f6d 2c0a 2020 2020 2320  et, room,.    # 
+0003e900: 7365 6e64 0a20 2020 2023 206c 6973 7465  send.    # liste
+0003e910: 6e0a 2020 2020 2320 6c6f 676f 7574 0a20  n.    # logout. 
+0003e920: 2020 2023 2063 6c6f 7365 2063 6c69 656e     # close clien
+0003e930: 740a 2020 2020 2320 7379 732e 6172 6776  t.    # sys.argv
+0003e940: 206f 7264 6572 696e 673f 2023 2074 6f64   ordering? # tod
+0003e950: 6f0a 2020 2020 7472 793a 0a20 2020 2020  o.    try:.     
+0003e960: 2020 2069 6620 6773 2e70 612e 6c6f 6769     if gs.pa.logi
+0003e970: 6e3a 0a20 2020 2020 2020 2020 2020 2061  n:.            a
+0003e980: 7761 6974 2061 6374 696f 6e5f 6c6f 6769  wait action_logi
+0003e990: 6e28 2920 2023 2065 7870 6c69 6369 7420  n()  # explicit 
+0003e9a0: 6c6f 6769 6e0a 2020 2020 2020 2020 656c  login.        el
+0003e9b0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003e9c0: 6177 6169 7420 696d 706c 6963 6974 5f6c  await implicit_l
+0003e9d0: 6f67 696e 2829 0a20 2020 2020 2020 2069  ogin().        i
+0003e9e0: 6620 6773 2e70 612e 7665 7269 6679 3a0a  f gs.pa.verify:.
+0003e9f0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
+0003ea00: 7420 6163 7469 6f6e 5f76 6572 6966 7928  t action_verify(
+0003ea10: 290a 2020 2020 2020 2020 2020 2020 6773  ).            gs
+0003ea20: 2e6c 6f67 2e64 6562 7567 280a 2020 2020  .log.debug(.    
+0003ea30: 2020 2020 2020 2020 2020 2020 224b 6579              "Key
+0003ea40: 626f 6172 6420 696e 7465 7272 7570 7420  board interrupt 
+0003ea50: 7265 6365 6976 6564 2061 6674 6572 2045  received after E
+0003ea60: 6d6f 6a69 2076 6572 6966 6963 6174 696f  moji verificatio
+0003ea70: 6e2e 220a 2020 2020 2020 2020 2020 2020  n.".            
+0003ea80: 290a 2020 2020 2020 2020 726f 6f6d 735f  ).        rooms_
+0003ea90: 746f 5f6c 6f6e 675f 726f 6f6d 5f6e 616d  to_long_room_nam
+0003eaa0: 6573 2829 2020 2320 636f 6d70 6c65 7465  es()  # complete
+0003eab0: 2072 6f6f 6d20 6e61 6d65 730a 2020 2020   room names.    
+0003eac0: 2020 2020 6966 2067 732e 726f 6f6d 5f61      if gs.room_a
+0003ead0: 6374 696f 6e20 6f72 2067 732e 7365 7467  ction or gs.setg
+0003eae0: 6574 5f61 6374 696f 6e3a 0a20 2020 2020  et_action:.     
+0003eaf0: 2020 2020 2020 2061 7761 6974 2061 6374         await act
+0003eb00: 696f 6e5f 726f 6f6d 7365 7467 6574 2829  ion_roomsetget()
+0003eb10: 0a20 2020 2020 2020 2069 6620 6773 2e73  .        if gs.s
+0003eb20: 656e 645f 6163 7469 6f6e 3a0a 2020 2020  end_action:.    
+0003eb30: 2020 2020 2020 2020 6177 6169 7420 6163          await ac
+0003eb40: 7469 6f6e 5f73 656e 6428 290a 2020 2020  tion_send().    
+0003eb50: 2020 2020 6966 2067 732e 7061 2e72 6f6f      if gs.pa.roo
+0003eb60: 6d5f 696e 7669 7465 7320 616e 6420 6773  m_invites and gs
+0003eb70: 2e70 612e 6c69 7374 656e 206e 6f74 2069  .pa.listen not i
+0003eb80: 6e20 2846 4f52 4556 4552 2c20 4f4e 4345  n (FOREVER, ONCE
+0003eb90: 293a 0a20 2020 2020 2020 2020 2020 2061  ):.            a
+0003eba0: 7761 6974 206c 6973 7465 6e5f 696e 7669  wait listen_invi
+0003ebb0: 7465 735f 6f6e 6365 2867 732e 636c 6965  tes_once(gs.clie
+0003ebc0: 6e74 290a 2020 2020 2020 2020 6966 2067  nt).        if g
+0003ebd0: 732e 6c69 7374 656e 5f61 6374 696f 6e3a  s.listen_action:
+0003ebe0: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
+0003ebf0: 6974 2061 6374 696f 6e5f 6c69 7374 656e  it action_listen
+0003ec00: 2829 0a20 2020 2020 2020 2069 6620 6773  ().        if gs
+0003ec10: 2e70 612e 6c6f 676f 7574 3a0a 2020 2020  .pa.logout:.    
+0003ec20: 2020 2020 2020 2020 6177 6169 7420 6163          await ac
+0003ec30: 7469 6f6e 5f6c 6f67 6f75 7428 290a 2020  tion_logout().  
+0003ec40: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+0003ec50: 6f6e 3a0a 2020 2020 2020 2020 7261 6973  on:.        rais
+0003ec60: 650a 2020 2020 6669 6e61 6c6c 793a 0a20  e.    finally:. 
+0003ec70: 2020 2020 2020 2069 6620 6773 2e63 6c69         if gs.cli
+0003ec80: 656e 743a 0a20 2020 2020 2020 2020 2020  ent:.           
+0003ec90: 2061 7761 6974 2067 732e 636c 6965 6e74   await gs.client
+0003eca0: 2e63 6c6f 7365 2829 0a0a 0a64 6566 2063  .close()...def c
+0003ecb0: 6865 636b 5f61 7267 5f66 696c 6573 5f72  heck_arg_files_r
+0003ecc0: 6561 6461 626c 6528 2920 2d3e 204e 6f6e  eadable() -> Non
+0003ecd0: 653a 0a20 2020 2022 2222 4368 6563 6b20  e:.    """Check 
+0003ece0: 6966 2066 696c 6573 2066 726f 6d20 636f  if files from co
+0003ecf0: 6d6d 616e 6420 6c69 6e65 2061 7265 2072  mmand line are r
+0003ed00: 6561 6461 626c 652e 2222 220a 2020 2020  eadable.""".    
+0003ed10: 6172 675f 6669 6c65 7320 3d20 6773 2e70  arg_files = gs.p
+0003ed20: 612e 696d 6167 6520 6966 2067 732e 7061  a.image if gs.pa
+0003ed30: 2e69 6d61 6765 2065 6c73 6520 5b5d 0a20  .image else []. 
+0003ed40: 2020 2061 7267 5f66 696c 6573 202b 3d20     arg_files += 
+0003ed50: 6773 2e70 612e 6175 6469 6f20 6966 2067  gs.pa.audio if g
+0003ed60: 732e 7061 2e61 7564 696f 2065 6c73 6520  s.pa.audio else 
+0003ed70: 5b5d 0a20 2020 2061 7267 5f66 696c 6573  [].    arg_files
+0003ed80: 202b 3d20 6773 2e70 612e 6669 6c65 2069   += gs.pa.file i
+0003ed90: 6620 6773 2e70 612e 6669 6c65 2065 6c73  f gs.pa.file els
+0003eda0: 6520 5b5d 0a20 2020 2061 7267 5f66 696c  e [].    arg_fil
+0003edb0: 6573 202b 3d20 6773 2e70 612e 6576 656e  es += gs.pa.even
+0003edc0: 7420 6966 2067 732e 7061 2e65 7665 6e74  t if gs.pa.event
+0003edd0: 2065 6c73 6520 5b5d 0a20 2020 2072 203d   else [].    r =
+0003ede0: 2054 7275 650a 2020 2020 6572 7274 7874   True.    errtxt
+0003edf0: 203d 2028 0a20 2020 2020 2020 2022 4532   = (.        "E2
+0003ee00: 3336 3a20 220a 2020 2020 2020 2020 2254  36: ".        "T
+0003ee10: 6865 7365 2066 696c 6573 2073 7065 6369  hese files speci
+0003ee20: 6669 6564 2069 6e20 7468 6520 636f 6d6d  fied in the comm
+0003ee30: 616e 6420 6c69 6e65 2077 6572 6520 6e6f  and line were no
+0003ee40: 7420 666f 756e 6420 220a 2020 2020 2020  t found ".      
+0003ee50: 2020 226f 7220 6172 6520 6e6f 7420 7265    "or are not re
+0003ee60: 6164 6162 6c65 3a20 220a 2020 2020 290a  adable: ".    ).
+0003ee70: 2020 2020 666f 7220 666e 2069 6e20 6172      for fn in ar
+0003ee80: 675f 6669 6c65 733a 0a20 2020 2020 2020  g_files:.       
+0003ee90: 2069 6620 2866 6e20 213d 2022 2d22 2920   if (fn != "-") 
+0003eea0: 616e 6420 6e6f 7420 2869 7366 696c 6528  and not (isfile(
+0003eeb0: 666e 2920 616e 6420 6163 6365 7373 2866  fn) and access(f
+0003eec0: 6e2c 2052 5f4f 4b29 293a 0a20 2020 2020  n, R_OK)):.     
+0003eed0: 2020 2020 2020 2069 6620 6e6f 7420 723a         if not r:
+0003eee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003eef0: 2065 7272 7478 7420 2b3d 2022 2c20 220a   errtxt += ", ".
+0003ef00: 2020 2020 2020 2020 2020 2020 6572 7274              errt
+0003ef10: 7874 202b 3d20 6627 227b 666e 7d22 270a  xt += f'"{fn}"'.
+0003ef20: 2020 2020 2020 2020 2020 2020 7220 3d20              r = 
+0003ef30: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+0003ef40: 2020 6572 7266 696c 6520 3d20 666e 0a20    errfile = fn. 
+0003ef50: 2020 2069 6620 6e6f 7420 723a 0a20 2020     if not r:.   
+0003ef60: 2020 2020 2072 6169 7365 2046 696c 654e       raise FileN
+0003ef70: 6f74 466f 756e 6445 7272 6f72 2865 7272  otFoundError(err
+0003ef80: 6e6f 2e45 4e4f 454e 542c 2065 7272 7478  no.ENOENT, errtx
+0003ef90: 742c 2065 7272 6669 6c65 290a 0a0a 6465  t, errfile)...de
+0003efa0: 6620 6368 6563 6b5f 646f 776e 6c6f 6164  f check_download
+0003efb0: 5f6d 6564 6961 5f64 6972 2829 202d 3e20  _media_dir() -> 
+0003efc0: 4e6f 6e65 3a0a 2020 2020 2222 2243 6865  None:.    """Che
+0003efd0: 636b 2069 6620 6d65 6469 6120 646f 776e  ck if media down
+0003efe0: 6c6f 6164 2064 6972 6563 746f 7279 2069  load directory i
+0003eff0: 7320 636f 7272 6563 742e 2222 220a 2020  s correct.""".  
+0003f000: 2020 6966 206e 6f74 2067 732e 7061 2e64    if not gs.pa.d
+0003f010: 6f77 6e6c 6f61 645f 6d65 6469 613a 0a20  ownload_media:. 
+0003f020: 2020 2020 2020 2072 6574 7572 6e20 2023         return  #
+0003f030: 2022 223a 2074 6861 7420 6d65 616e 7320   "": that means 
+0003f040: 6e6f 2064 6f77 6e6c 6f61 6420 6f66 206d  no download of m
+0003f050: 6564 6961 2c20 7661 6c69 6420 7661 6c75  edia, valid valu
+0003f060: 650a 2020 2020 2320 6e6f 726d 6169 6c7a  e.    # normailz
+0003f070: 6564 2066 6f72 2068 756d 616e 730a 2020  ed for humans.  
+0003f080: 2020 646c 203d 206f 732e 7061 7468 2e6e    dl = os.path.n
+0003f090: 6f72 6d70 6174 6828 6773 2e70 612e 646f  ormpath(gs.pa.do
+0003f0a0: 776e 6c6f 6164 5f6d 6564 6961 290a 2020  wnload_media).  
+0003f0b0: 2020 6773 2e70 612e 646f 776e 6c6f 6164    gs.pa.download
+0003f0c0: 5f6d 6564 6961 203d 2064 6c0a 2020 2020  _media = dl.    
+0003f0d0: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
+0003f0e0: 6528 646c 293a 0a20 2020 2020 2020 2072  e(dl):.        r
+0003f0f0: 6169 7365 204e 6f74 4144 6972 6563 746f  aise NotADirecto
+0003f100: 7279 4572 726f 7228 0a20 2020 2020 2020  ryError(.       
+0003f110: 2020 2020 2065 7272 6e6f 2e45 4e4f 5444       errno.ENOTD
+0003f120: 4952 2c0a 2020 2020 2020 2020 2020 2020  IR,.            
+0003f130: 2245 3233 373a 2022 0a20 2020 2020 2020  "E237: ".       
+0003f140: 2020 2020 2066 2722 7b64 6c7d 2220 6361       f'"{dl}" ca
+0003f150: 6e6e 6f74 2062 6520 7573 6564 2061 7320  nnot be used as 
+0003f160: 6d65 6469 6120 6469 7265 6374 6f72 792c  media directory,
+0003f170: 2062 6563 6175 7365 2027 0a20 2020 2020   because '.     
+0003f180: 2020 2020 2020 2066 2722 7b64 6c7d 2220         f'"{dl}" 
+0003f190: 6973 2061 2066 696c 652e 2053 7065 6369  is a file. Speci
+0003f1a0: 6679 2061 2064 6966 6665 7265 6e74 2064  fy a different d
+0003f1b0: 6972 6563 746f 7279 2066 6f72 2064 6f77  irectory for dow
+0003f1c0: 6e6c 6f61 6469 6e67 2027 0a20 2020 2020  nloading '.     
+0003f1d0: 2020 2020 2020 2022 6d65 6469 612e 222c         "media.",
+0003f1e0: 0a20 2020 2020 2020 2020 2020 2064 6c2c  .            dl,
+0003f1f0: 0a20 2020 2020 2020 2029 0a20 2020 2069  .        ).    i
+0003f200: 6620 6f73 2e70 6174 682e 6973 6469 7228  f os.path.isdir(
+0003f210: 646c 293a 0a20 2020 2020 2020 2069 6620  dl):.        if 
+0003f220: 6f73 2e61 6363 6573 7328 646c 2c20 6f73  os.access(dl, os
+0003f230: 2e57 5f4f 4b29 3a20 2023 2043 6865 636b  .W_OK):  # Check
+0003f240: 2066 6f72 2077 7269 7465 2061 6363 6573   for write acces
+0003f250: 730a 2020 2020 2020 2020 2020 2020 7265  s.            re
+0003f260: 7475 726e 2020 2320 616c 6c20 4f4b 0a20  turn  # all OK. 
+0003f270: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003f280: 2020 2020 2020 2020 2072 6169 7365 2050           raise P
+0003f290: 6572 6d69 7373 696f 6e45 7272 6f72 280a  ermissionError(.
+0003f2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003f2b0: 6572 726e 6f2e 4550 4552 4d2c 0a20 2020  errno.EPERM,.   
+0003f2c0: 2020 2020 2020 2020 2020 2020 2022 4532               "E2
+0003f2d0: 3338 3a20 220a 2020 2020 2020 2020 2020  38: ".          
+0003f2e0: 2020 2020 2020 2246 6f75 6e64 2061 6e20        "Found an 
+0003f2f0: 6578 6973 7469 6e67 206d 6564 6961 2064  existing media d
+0003f300: 6f77 6e6c 6f61 6420 6469 7265 6374 6f72  ownload director
+0003f310: 7920 220a 2020 2020 2020 2020 2020 2020  y ".            
+0003f320: 2020 2020 6627 227b 646c 7d22 2e20 4275      f'"{dl}". Bu
+0003f330: 7420 7468 6973 2064 6972 6563 746f 7279  t this directory
+0003f340: 2069 7320 6c61 636b 696e 6720 7772 6974   is lacking writ
+0003f350: 6520 270a 2020 2020 2020 2020 2020 2020  e '.            
+0003f360: 2020 2020 2270 6572 6d69 7373 696f 6e73      "permissions
+0003f370: 2e20 4164 6420 7772 6974 6520 7065 726d  . Add write perm
+0003f380: 6973 7369 6f6e 7320 746f 2069 742e 222c  issions to it.",
+0003f390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003f3a0: 2064 6c2c 0a20 2020 2020 2020 2020 2020   dl,.           
+0003f3b0: 2029 0a20 2020 2065 6c73 653a 0a20 2020   ).    else:.   
+0003f3c0: 2020 2020 2023 206e 6f74 2061 2066 696c       # not a fil
+0003f3d0: 652c 206e 6f74 2061 2064 6972 6563 746f  e, not a directo
+0003f3e0: 7279 2c20 6372 6561 7465 2064 6972 6563  ry, create direc
+0003f3f0: 746f 7279 0a20 2020 2020 2020 206d 6f64  tory.        mod
+0003f400: 6520 3d20 306f 3737 370a 2020 2020 2020  e = 0o777.      
+0003f410: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+0003f420: 2020 206f 732e 6d6b 6469 7228 646c 2c20     os.mkdir(dl, 
+0003f430: 6d6f 6465 290a 2020 2020 2020 2020 6578  mode).        ex
+0003f440: 6365 7074 204f 5345 7272 6f72 2061 7320  cept OSError as 
+0003f450: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0003f460: 6169 7365 204f 5345 7272 6f72 280a 2020  aise OSError(.  
+0003f470: 2020 2020 2020 2020 2020 2020 2020 652e                e.
+0003f480: 6572 726e 6f2c 0a20 2020 2020 2020 2020  errno,.         
+0003f490: 2020 2020 2020 2022 4532 3339 3a20 220a         "E239: ".
+0003f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003f4b0: 2243 6f75 6c64 206e 6f74 2063 7265 6174  "Could not creat
+0003f4c0: 6520 6d65 6469 6120 646f 776e 6c6f 6164  e media download
+0003f4d0: 2064 6972 6563 746f 7279 2022 0a20 2020   directory ".   
+0003f4e0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
+0003f4f0: 646c 7d20 666f 7220 796f 752e 2028 7b65  dl} for you. ({e
+0003f500: 7d29 222c 0a20 2020 2020 2020 2020 2020  })",.           
+0003f510: 2020 2020 2064 6c2c 0a20 2020 2020 2020       dl,.       
+0003f520: 2020 2020 2029 0a20 2020 2020 2020 2067       ).        g
+0003f530: 732e 6c6f 672e 6465 6275 6728 6627 4372  s.log.debug(f'Cr
+0003f540: 6561 7465 6420 6d65 6469 6120 646f 776e  eated media down
+0003f550: 6c6f 6164 2064 6972 6563 746f 7279 2022  load directory "
+0003f560: 7b64 6c7d 2220 666f 7220 796f 752e 2729  {dl}" for you.')
+0003f570: 0a0a 0a64 6566 2063 6865 636b 5f76 6572  ...def check_ver
+0003f580: 7369 6f6e 2829 202d 3e20 4e6f 6e65 3a0a  sion() -> None:.
+0003f590: 2020 2020 2222 2243 6865 636b 2069 6620      """Check if 
+0003f5a0: 6c61 7465 7374 2076 6572 7369 6f6e 2e22  latest version."
+0003f5b0: 2222 0a20 2020 2070 6b67 203d 2050 524f  "".    pkg = PRO
+0003f5c0: 475f 5749 5448 4f55 545f 4558 540a 2020  G_WITHOUT_EXT.  
+0003f5d0: 2020 7665 7220 3d20 5645 5253 494f 4e4e    ver = VERSIONN
+0003f5e0: 5220 2023 2064 6566 6175 6c74 2c20 6661  R  # default, fa
+0003f5f0: 6c6c 6261 636b 0a20 2020 2074 7279 3a0a  llback.    try:.
+0003f600: 2020 2020 2020 2020 7665 7220 3d20 706b          ver = pk
+0003f610: 675f 7265 736f 7572 6365 732e 6765 745f  g_resources.get_
+0003f620: 6469 7374 7269 6275 7469 6f6e 2870 6b67  distribution(pkg
+0003f630: 292e 7665 7273 696f 6e0a 2020 2020 6578  ).version.    ex
+0003f640: 6365 7074 2045 7863 6570 7469 6f6e 3a0a  cept Exception:.
+0003f650: 2020 2020 2020 2020 7061 7373 2020 2320          pass  # 
+0003f660: 6966 2069 6e73 7461 6c6c 6564 2076 6961  if installed via
+0003f670: 2067 6974 2063 6c6f 6e65 2c20 7061 636b   git clone, pack
+0003f680: 6167 6520 7769 6c6c 206e 6f74 2065 7869  age will not exi
+0003f690: 7374 730a 0a20 2020 2069 6e73 7461 6c6c  sts..    install
+0003f6a0: 6564 5f76 6572 7369 6f6e 203d 204c 6f6f  ed_version = Loo
+0003f6b0: 7365 5665 7273 696f 6e28 7665 7229 0a20  seVersion(ver). 
+0003f6c0: 2020 2023 2066 6574 6368 2070 6163 6b61     # fetch packa
+0003f6d0: 6765 206d 6574 6164 6174 6120 6672 6f6d  ge metadata from
+0003f6e0: 2050 7950 490a 2020 2020 7079 7069 5f75   PyPI.    pypi_u
+0003f6f0: 726c 203d 2066 2268 7474 7073 3a2f 2f70  rl = f"https://p
+0003f700: 7970 692e 6f72 672f 7079 7069 2f7b 706b  ypi.org/pypi/{pk
+0003f710: 677d 2f6a 736f 6e22 0a20 2020 2072 6573  g}/json".    res
+0003f720: 706f 6e73 6520 3d20 7572 6c6c 6962 2e72  ponse = urllib.r
+0003f730: 6571 7565 7374 2e75 726c 6f70 656e 2870  equest.urlopen(p
+0003f740: 7970 695f 7572 6c29 2e72 6561 6428 292e  ypi_url).read().
+0003f750: 6465 636f 6465 2829 0a20 2020 206c 6174  decode().    lat
+0003f760: 6573 745f 7665 7273 696f 6e20 3d20 6d61  est_version = ma
+0003f770: 7828 0a20 2020 2020 2020 204c 6f6f 7365  x(.        Loose
+0003f780: 5665 7273 696f 6e28 7329 2066 6f72 2073  Version(s) for s
+0003f790: 2069 6e20 6a73 6f6e 2e6c 6f61 6473 2872   in json.loads(r
+0003f7a0: 6573 706f 6e73 6529 5b22 7265 6c65 6173  esponse)["releas
+0003f7b0: 6573 225d 2e6b 6579 7328 290a 2020 2020  es"].keys().    
+0003f7c0: 290a 2020 2020 6966 2069 6e73 7461 6c6c  ).    if install
+0003f7d0: 6564 5f76 6572 7369 6f6e 203e 3d20 6c61  ed_version >= la
+0003f7e0: 7465 7374 5f76 6572 7369 6f6e 3a0a 2020  test_version:.  
+0003f7f0: 2020 2020 2020 7574 6420 3d20 2259 6f75        utd = "You
+0003f800: 2061 7265 2075 702d 746f 2d64 6174 6521   are up-to-date!
+0003f810: 220a 2020 2020 656c 7365 3a0a 2020 2020  ".    else:.    
+0003f820: 2020 2020 7574 6420 3d20 2243 6f6e 7369      utd = "Consi
+0003f830: 6465 7220 7570 6461 7469 6e67 2122 0a20  der updating!". 
+0003f840: 2020 2076 6572 7369 6f6e 5f69 6e66 6f20     version_info 
+0003f850: 3d20 280a 2020 2020 2020 2020 6622 7061  = (.        f"pa
+0003f860: 636b 6167 653a 207b 706b 677d 2c20 696e  ckage: {pkg}, in
+0003f870: 7374 616c 6c65 643a 207b 696e 7374 616c  stalled: {instal
+0003f880: 6c65 645f 7665 7273 696f 6e7d 2c20 220a  led_version}, ".
+0003f890: 2020 2020 2020 2020 6622 6c61 7465 7374          f"latest
+0003f8a0: 3a20 7b6c 6174 6573 745f 7665 7273 696f  : {latest_versio
+0003f8b0: 6e7d 203d 3d3e 207b 7574 647d 220a 2020  n} ==> {utd}".  
+0003f8c0: 2020 290a 2020 2020 6773 2e6c 6f67 2e64    ).    gs.log.d
+0003f8d0: 6562 7567 2876 6572 7369 6f6e 5f69 6e66  ebug(version_inf
+0003f8e0: 6f29 0a20 2020 2023 206f 7574 7075 7420  o).    # output 
+0003f8f0: 666f 726d 6174 2063 6f6e 7472 6f6c 6c65  format controlle
+0003f900: 6420 7669 6120 2d2d 6f75 7470 7574 2066  d via --output f
+0003f910: 6c61 670a 2020 2020 7465 7874 203d 2076  lag.    text = v
+0003f920: 6572 7369 6f6e 5f69 6e66 6f0a 2020 2020  ersion_info.    
+0003f930: 6a73 6f6e 5f6d 6178 203d 207b 0a20 2020  json_max = {.   
+0003f940: 2020 2020 2022 7061 636b 6167 6522 3a20       "package": 
+0003f950: 6622 7b70 6b67 7d22 2c0a 2020 2020 2020  f"{pkg}",.      
+0003f960: 2020 2276 6572 7369 6f6e 5f69 6e73 7461    "version_insta
+0003f970: 6c6c 6564 223a 2066 227b 696e 7374 616c  lled": f"{instal
+0003f980: 6c65 645f 7665 7273 696f 6e7d 222c 0a20  led_version}",. 
+0003f990: 2020 2020 2020 2022 7665 7273 696f 6e5f         "version_
+0003f9a0: 6c61 7465 7374 223a 2066 227b 6c61 7465  latest": f"{late
+0003f9b0: 7374 5f76 6572 7369 6f6e 7d22 2c0a 2020  st_version}",.  
+0003f9c0: 2020 2020 2020 2263 6f6d 6d65 6e74 223a        "comment":
+0003f9d0: 2066 227b 7574 647d 222c 0a20 2020 207d   f"{utd}",.    }
+0003f9e0: 0a20 2020 2023 206a 736f 6e5f 6d61 782e  .    # json_max.
+0003f9f0: 7570 6461 7465 287b 226b 6579 223a 2076  update({"key": v
+0003fa00: 616c 7565 7d29 2020 2320 6164 6420 6469  alue})  # add di
+0003fa10: 6374 2069 7465 6d73 0a20 2020 206a 736f  ct items.    jso
+0003fa20: 6e5f 203d 206a 736f 6e5f 6d61 782e 636f  n_ = json_max.co
+0003fa30: 7079 2829 0a20 2020 2023 206a 736f 6e5f  py().    # json_
+0003fa40: 2e70 6f70 2822 6b65 7922 290a 2020 2020  .pop("key").    
+0003fa50: 6a73 6f6e 5f73 7065 6320 3d20 4e6f 6e65  json_spec = None
+0003fa60: 0a20 2020 2070 7269 6e74 5f6f 7574 7075  .    print_outpu
+0003fa70: 7428 0a20 2020 2020 2020 2067 732e 7061  t(.        gs.pa
+0003fa80: 2e6f 7574 7075 742c 0a20 2020 2020 2020  .output,.       
+0003fa90: 2074 6578 743d 7465 7874 2c0a 2020 2020   text=text,.    
+0003faa0: 2020 2020 6a73 6f6e 5f3d 6a73 6f6e 5f2c      json_=json_,
+0003fab0: 0a20 2020 2020 2020 206a 736f 6e5f 6d61  .        json_ma
+0003fac0: 783d 6a73 6f6e 5f6d 6178 2c0a 2020 2020  x=json_max,.    
+0003fad0: 2020 2020 6a73 6f6e 5f73 7065 633d 6a73      json_spec=js
+0003fae0: 6f6e 5f73 7065 632c 0a20 2020 2029 0a0a  on_spec,.    )..
+0003faf0: 0a64 6566 2076 6572 7369 6f6e 2829 202d  .def version() -
+0003fb00: 3e20 4e6f 6e65 3a0a 2020 2020 2222 2250  > None:.    """P
+0003fb10: 7269 6e74 2076 6572 7369 6f6e 2069 6e66  rint version inf
+0003fb20: 6f2e 2222 220a 2020 2020 6e69 6f5f 7665  o.""".    nio_ve
+0003fb30: 7273 696f 6e20 3d20 706b 675f 7265 736f  rsion = pkg_reso
+0003fb40: 7572 6365 732e 6765 745f 6469 7374 7269  urces.get_distri
+0003fb50: 6275 7469 6f6e 2822 6d61 7472 6978 2d6e  bution("matrix-n
+0003fb60: 696f 2229 2e76 6572 7369 6f6e 0a20 2020  io").version.   
+0003fb70: 2070 7974 686f 6e5f 7665 7273 696f 6e20   python_version 
+0003fb80: 3d20 7379 732e 7665 7273 696f 6e0a 2020  = sys.version.  
+0003fb90: 2020 7079 7468 6f6e 5f76 6572 7369 6f6e    python_version
+0003fba0: 5f6e 7220 3d20 280a 2020 2020 2020 2020  _nr = (.        
+0003fbb0: 7374 7228 7379 732e 7665 7273 696f 6e5f  str(sys.version_
+0003fbc0: 696e 666f 2e6d 616a 6f72 290a 2020 2020  info.major).    
+0003fbd0: 2020 2020 2b20 222e 220a 2020 2020 2020      + ".".      
+0003fbe0: 2020 2b20 7374 7228 7379 732e 7665 7273    + str(sys.vers
+0003fbf0: 696f 6e5f 696e 666f 2e6d 696e 6f72 290a  ion_info.minor).
+0003fc00: 2020 2020 2020 2020 2b20 222e 220a 2020          + ".".  
+0003fc10: 2020 2020 2020 2b20 7374 7228 7379 732e        + str(sys.
+0003fc20: 7665 7273 696f 6e5f 696e 666f 2e6d 6963  version_info.mic
+0003fc30: 726f 290a 2020 2020 290a 2020 2020 7665  ro).    ).    ve
+0003fc40: 7273 696f 6e5f 696e 666f 203d 2028 0a20  rsion_info = (. 
+0003fc50: 2020 2020 2020 2022 5c6e 220a 2020 2020         "\n".    
+0003fc60: 2020 2020 6622 2020 5f7c 2020 2020 2020      f"  _|      
+0003fc70: 5f7c 2020 2020 2020 5f7c 5f7c 5f7c 2020  _|      _|_|_|  
+0003fc80: 2020 5f7c 2020 2020 2020 207b 5052 4f47    _|       {PROG
+0003fc90: 5f57 4954 484f 5554 5f45 5854 7d3a 2022  _WITHOUT_EXT}: "
+0003fca0: 0a20 2020 2020 2020 2066 227b 5645 5253  .        f"{VERS
+0003fcb0: 494f 4e4e 527d 207b 5645 5253 494f 4e7d  IONNR} {VERSION}
+0003fcc0: 5c6e 220a 2020 2020 2020 2020 2220 205f  \n".        "  _
+0003fcd0: 7c5f 7c20 205f 7c5f 7c20 2020 205f 7c20  |_|  _|_|    _| 
+0003fce0: 2020 2020 2020 2020 2020 205f 7c20 2020             _|   
+0003fcf0: 2020 6120 4d61 7472 6978 2043 4c49 2063    a Matrix CLI c
+0003fd00: 6c69 656e 745c 6e22 0a20 2020 2020 2020  lient\n".       
+0003fd10: 2022 2020 5f7c 2020 5f7c 2020 5f7c 2020   "  _|  _|  _|  
+0003fd20: 2020 5f7c 2020 2020 2020 2020 2020 2020    _|            
+0003fd30: 2020 5f7c 2020 2065 6e6a 6f79 2061 6e64    _|   enjoy and
+0003fd40: 2073 7562 6d69 7420 5052 735c 6e22 0a20   submit PRs\n". 
+0003fd50: 2020 2020 2020 2066 2220 205f 7c20 2020         f"  _|   
+0003fd60: 2020 205f 7c20 2020 205f 7c20 2020 2020     _|    _|     
+0003fd70: 2020 2020 2020 205f 7c20 2020 2020 6d61         _|     ma
+0003fd80: 7472 6978 2d6e 696f 3a20 7b6e 696f 5f76  trix-nio: {nio_v
+0003fd90: 6572 7369 6f6e 7d5c 6e22 0a20 2020 2020  ersion}\n".     
+0003fda0: 2020 2066 2220 205f 7c20 2020 2020 205f     f"  _|      _
+0003fdb0: 7c20 2020 2020 205f 7c5f 7c5f 7c20 2020  |      _|_|_|   
+0003fdc0: 205f 7c20 2020 2020 2020 5079 7468 6f6e   _|       Python
+0003fdd0: 3a20 7b70 7974 686f 6e5f 7665 7273 696f  : {python_versio
+0003fde0: 6e5f 6e72 7d5c 6e22 0a20 2020 2020 2020  n_nr}\n".       
+0003fdf0: 2022 5c6e 220a 2020 2020 290a 2020 2020   "\n".    ).    
+0003fe00: 6773 2e6c 6f67 2e64 6562 7567 2876 6572  gs.log.debug(ver
+0003fe10: 7369 6f6e 5f69 6e66 6f29 0a20 2020 2023  sion_info).    #
+0003fe20: 206f 7574 7075 7420 666f 726d 6174 2063   output format c
+0003fe30: 6f6e 7472 6f6c 6c65 6420 7669 6120 2d2d  ontrolled via --
+0003fe40: 6f75 7470 7574 2066 6c61 670a 2020 2020  output flag.    
+0003fe50: 7465 7874 203d 2076 6572 7369 6f6e 5f69  text = version_i
+0003fe60: 6e66 6f0a 2020 2020 6a73 6f6e 5f6d 6178  nfo.    json_max
+0003fe70: 203d 207b 0a20 2020 2020 2020 2066 227b   = {.        f"{
+0003fe80: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+0003fe90: 7d22 3a20 7b0a 2020 2020 2020 2020 2020  }": {.          
+0003fea0: 2020 2276 6572 7369 6f6e 223a 2066 227b    "version": f"{
+0003feb0: 5645 5253 494f 4e4e 527d 222c 0a20 2020  VERSIONNR}",.   
+0003fec0: 2020 2020 2020 2020 2022 6461 7465 223a           "date":
+0003fed0: 2066 227b 5645 5253 494f 4e7d 222c 0a20   f"{VERSION}",. 
+0003fee0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0003fef0: 2020 226d 6174 7269 782d 6e69 6f22 3a20    "matrix-nio": 
+0003ff00: 7b0a 2020 2020 2020 2020 2020 2020 2276  {.            "v
+0003ff10: 6572 7369 6f6e 223a 2066 227b 6e69 6f5f  ersion": f"{nio_
+0003ff20: 7665 7273 696f 6e7d 222c 0a20 2020 2020  version}",.     
+0003ff30: 2020 207d 2c0a 2020 2020 2020 2020 2270     },.        "p
+0003ff40: 7974 686f 6e22 3a20 7b0a 2020 2020 2020  ython": {.      
+0003ff50: 2020 2020 2020 2276 6572 7369 6f6e 223a        "version":
+0003ff60: 2066 227b 7079 7468 6f6e 5f76 6572 7369   f"{python_versi
+0003ff70: 6f6e 5f6e 727d 222c 0a20 2020 2020 2020  on_nr}",.       
+0003ff80: 2020 2020 2022 696e 666f 223a 2066 227b       "info": f"{
+0003ff90: 7079 7468 6f6e 5f76 6572 7369 6f6e 7d22  python_version}"
+0003ffa0: 2c0a 2020 2020 2020 2020 7d2c 0a20 2020  ,.        },.   
+0003ffb0: 207d 0a20 2020 2023 206a 736f 6e5f 6d61   }.    # json_ma
+0003ffc0: 782e 7570 6461 7465 287b 226b 6579 223a  x.update({"key":
+0003ffd0: 2076 616c 7565 7d29 2020 2320 6164 6420   value})  # add 
+0003ffe0: 6469 6374 2069 7465 6d73 0a20 2020 206a  dict items.    j
+0003fff0: 736f 6e5f 203d 206a 736f 6e5f 6d61 782e  son_ = json_max.
+00040000: 636f 7079 2829 0a20 2020 2023 206a 736f  copy().    # jso
+00040010: 6e5f 2e70 6f70 2822 6b65 7922 290a 2020  n_.pop("key").  
+00040020: 2020 6a73 6f6e 5f73 7065 6320 3d20 4e6f    json_spec = No
+00040030: 6e65 0a20 2020 2070 7269 6e74 5f6f 7574  ne.    print_out
+00040040: 7075 7428 0a20 2020 2020 2020 2067 732e  put(.        gs.
+00040050: 7061 2e6f 7574 7075 742c 0a20 2020 2020  pa.output,.     
+00040060: 2020 2074 6578 743d 7465 7874 2c0a 2020     text=text,.  
+00040070: 2020 2020 2020 6a73 6f6e 5f3d 6a73 6f6e        json_=json
+00040080: 5f2c 0a20 2020 2020 2020 206a 736f 6e5f  _,.        json_
+00040090: 6d61 783d 6a73 6f6e 5f6d 6178 2c0a 2020  max=json_max,.  
+000400a0: 2020 2020 2020 6a73 6f6e 5f73 7065 633d        json_spec=
+000400b0: 6a73 6f6e 5f73 7065 632c 0a20 2020 2029  json_spec,.    )
+000400c0: 0a0a 0a64 6566 2069 6e69 7469 616c 5f63  ...def initial_c
+000400d0: 6865 636b 5f6f 665f 6c6f 675f 6172 6773  heck_of_log_args
+000400e0: 2829 202d 3e20 4e6f 6e65 3a0a 2020 2020  () -> None:.    
+000400f0: 2222 2243 6865 636b 206c 6f67 6769 6e67  """Check logging
+00040100: 2072 656c 6174 6564 2061 7267 756d 656e   related argumen
+00040110: 7473 2e0a 0a20 2020 2041 7267 756d 656e  ts...    Argumen
+00040120: 7473 3a0a 2020 2020 2d2d 2d2d 2d2d 2d2d  ts:.    --------
+00040130: 2d0a 2020 2020 4e6f 6e65 0a0a 2020 2020  -.    None..    
+00040140: 5265 7475 726e 733a 204e 6f6e 650a 0a20  Returns: None.. 
+00040150: 2020 2052 6169 7365 7320 6578 6365 7074     Raises except
+00040160: 696f 6e20 6f6e 2065 7272 6f72 2e0a 2020  ion on error..  
+00040170: 2020 2222 220a 2020 2020 6966 206e 6f74    """.    if not
+00040180: 2067 732e 7061 2e6c 6f67 5f6c 6576 656c   gs.pa.log_level
+00040190: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+000401a0: 2020 2320 616c 6c20 4f4b 0a20 2020 2066    # all OK.    f
+000401b0: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
+000401c0: 6e28 6773 2e70 612e 6c6f 675f 6c65 7665  n(gs.pa.log_leve
+000401d0: 6c29 293a 0a20 2020 2020 2020 2075 7020  l)):.        up 
+000401e0: 3d20 6773 2e70 612e 6c6f 675f 6c65 7665  = gs.pa.log_leve
+000401f0: 6c5b 695d 2e75 7070 6572 2829 0a20 2020  l[i].upper().   
+00040200: 2020 2020 2067 732e 7061 2e6c 6f67 5f6c       gs.pa.log_l
+00040210: 6576 656c 5b69 5d20 3d20 7570 0a20 2020  evel[i] = up.   
+00040220: 2020 2020 2069 6620 7570 206e 6f74 2069       if up not i
+00040230: 6e20 5b22 4445 4255 4722 2c20 2249 4e46  n ["DEBUG", "INF
+00040240: 4f22 2c20 2257 4152 4e49 4e47 222c 2022  O", "WARNING", "
+00040250: 4552 524f 5222 2c20 2243 5249 5449 4341  ERROR", "CRITICA
+00040260: 4c22 5d3a 0a20 2020 2020 2020 2020 2020  L"]:.           
+00040270: 2023 2067 732e 6572 725f 636f 756e 7420   # gs.err_count 
+00040280: 2b3d 2031 2020 2320 7772 6f6e 670a 2020  += 1  # wrong.  
+00040290: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000402a0: 4d61 7472 6978 436f 6d6d 616e 6465 7245  MatrixCommanderE
+000402b0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+000402c0: 2020 2020 2020 2245 3234 313a 2022 0a20        "E241: ". 
+000402d0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+000402e0: 2d2d 6c6f 672d 6c65 7665 6c20 6f6e 6c79  --log-level only
+000402f0: 2061 6c6c 6f77 7320 7661 6c75 6573 2022   allows values "
+00040300: 4445 4255 4722 2c20 2249 4e46 4f22 2c20  DEBUG", "INFO", 
+00040310: 2257 4152 4e49 4e47 222c 2027 0a20 2020  "WARNING", '.   
+00040320: 2020 2020 2020 2020 2020 2020 2027 2245               '"E
+00040330: 5252 4f52 222c 206f 7220 2243 5249 5449  RROR", or "CRITI
+00040340: 4341 4c22 2e20 2d2d 6c6f 672d 6c65 7665  CAL". --log-leve
+00040350: 6c20 6172 6775 6d65 6e74 2069 6e63 6f72  l argument incor
+00040360: 7265 6374 2e20 270a 2020 2020 2020 2020  rect. '.        
+00040370: 2020 2020 2020 2020 6622 287b 7570 7d29          f"({up})
+00040380: 220a 2020 2020 2020 2020 2020 2020 2920  ".            ) 
+00040390: 6672 6f6d 204e 6f6e 650a 0a0a 2320 6163  from None...# ac
+000403a0: 636f 7264 696e 6720 746f 2070 796c 616d  cording to pylam
+000403b0: 613a 2066 756e 6374 696f 6e20 746f 6f20  a: function too 
+000403c0: 636f 6d70 6c65 783a 2043 3930 3120 2320  complex: C901 # 
+000403d0: 6e6f 7161 3a20 4339 3031 0a64 6566 2069  noqa: C901.def i
+000403e0: 6e69 7469 616c 5f63 6865 636b 5f6f 665f  nitial_check_of_
+000403f0: 6172 6773 2829 202d 3e20 4e6f 6e65 3a20  args() -> None: 
+00040400: 2023 206e 6f71 613a 2043 3930 310a 2020   # noqa: C901.  
+00040410: 2020 2222 2243 6865 636b 2061 7267 756d    """Check argum
+00040420: 656e 7473 2e22 2222 0a20 2020 2023 2046  ents.""".    # F
+00040430: 6972 7374 2c20 7468 6520 6164 6a75 7374  irst, the adjust
+00040440: 6d65 6e74 730a 2020 2020 6966 206e 6f74  ments.    if not
+00040450: 2067 732e 7061 2e65 6e63 7279 7074 6564   gs.pa.encrypted
+00040460: 3a0a 2020 2020 2020 2020 6773 2e70 612e  :.        gs.pa.
+00040470: 656e 6372 7970 7465 6420 3d20 5472 7565  encrypted = True
+00040480: 2020 2320 666f 7263 6520 6974 206f 6e0a    # force it on.
+00040490: 2020 2020 2020 2020 6773 2e6c 6f67 2e64          gs.log.d
+000404a0: 6562 7567 280a 2020 2020 2020 2020 2020  ebug(.          
+000404b0: 2020 2245 6e63 7279 7074 696f 6e20 6973    "Encryption is
+000404c0: 2061 6c77 6179 7320 656e 6162 6c65 642e   always enabled.
+000404d0: 2049 7420 6361 6e6e 6f74 2062 6520 7475   It cannot be tu
+000404e0: 726e 6564 206f 6666 2e20 220a 2020 2020  rned off. ".    
+000404f0: 2020 2020 2020 2020 2255 7365 202d 2d74          "Use --t
+00040500: 6169 6c20 746f 2064 6973 6162 6c65 2069  ail to disable i
+00040510: 7420 666f 7220 7370 6563 6966 6963 2075  t for specific u
+00040520: 7365 2063 6173 6573 2e22 0a20 2020 2020  se cases.".     
+00040530: 2020 2029 0a20 2020 2069 6620 6e6f 7420     ).    if not 
+00040540: 6773 2e70 612e 656e 6372 7970 7465 643a  gs.pa.encrypted:
+00040550: 2020 2320 6a75 7374 2069 6e20 6361 7365    # just in case
+00040560: 2077 6520 6576 6572 2067 6f20 6261 636b   we ever go back
+00040570: 2064 6973 6162 6c69 6e67 2065 3265 0a20   disabling e2e. 
+00040580: 2020 2020 2020 2067 732e 7061 2e73 746f         gs.pa.sto
+00040590: 7265 203d 204e 6f6e 650a 2020 2020 6966  re = None.    if
+000405a0: 2067 732e 7061 2e6c 6973 7465 6e3a 0a20   gs.pa.listen:. 
+000405b0: 2020 2020 2020 2067 732e 7061 2e6c 6973         gs.pa.lis
+000405c0: 7465 6e20 3d20 6773 2e70 612e 6c69 7374  ten = gs.pa.list
+000405d0: 656e 2e6c 6f77 6572 2829 0a20 2020 2069  en.lower().    i
+000405e0: 6620 6773 2e70 612e 6c69 7374 656e 203d  f gs.pa.listen =
+000405f0: 3d20 4e45 5645 5220 616e 6420 6773 2e70  = NEVER and gs.p
+00040600: 612e 7461 696c 2021 3d20 303a 0a20 2020  a.tail != 0:.   
+00040610: 2020 2020 2067 732e 7061 2e6c 6973 7465       gs.pa.liste
+00040620: 6e20 3d20 5441 494c 2020 2320 2d2d 7461  n = TAIL  # --ta
+00040630: 696c 2074 7572 6e73 206f 6e20 2d2d 6c69  il turns on --li
+00040640: 7374 656e 2054 4149 4c0a 2020 2020 2020  sten TAIL.      
+00040650: 2020 6773 2e6c 6f67 2e64 6562 7567 2827    gs.log.debug('
+00040660: 2d2d 6c69 7374 656e 2073 6574 2074 6f20  --listen set to 
+00040670: 2274 6169 6c22 2062 6563 6175 7365 2022  "tail" because "
+00040680: 2d2d 7461 696c 2220 6973 2075 7365 642e  --tail" is used.
+00040690: 2729 0a20 2020 2069 6620 6773 2e70 612e  ').    if gs.pa.
+000406a0: 7379 6e63 2069 7320 6e6f 7420 4e6f 6e65  sync is not None
+000406b0: 3a0a 2020 2020 2020 2020 6773 2e70 612e  :.        gs.pa.
+000406c0: 7379 6e63 203d 2067 732e 7061 2e73 796e  sync = gs.pa.syn
+000406d0: 632e 6c6f 7765 7228 290a 2020 2020 6966  c.lower().    if
+000406e0: 2067 732e 7061 2e6f 7574 7075 7420 6973   gs.pa.output is
+000406f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00040700: 2020 2067 732e 7061 2e6f 7574 7075 7420     gs.pa.output 
+00040710: 3d20 6773 2e70 612e 6f75 7470 7574 2e6c  = gs.pa.output.l
+00040720: 6f77 6572 2829 0a20 2020 2069 6620 6773  ower().    if gs
+00040730: 2e70 612e 646f 776e 6c6f 6164 5f6d 6564  .pa.download_med
+00040740: 6961 5f6e 616d 6520 6973 206e 6f74 204e  ia_name is not N
+00040750: 6f6e 653a 0a20 2020 2020 2020 2067 732e  one:.        gs.
+00040760: 7061 2e64 6f77 6e6c 6f61 645f 6d65 6469  pa.download_medi
+00040770: 615f 6e61 6d65 203d 2067 732e 7061 2e64  a_name = gs.pa.d
+00040780: 6f77 6e6c 6f61 645f 6d65 6469 615f 6e61  ownload_media_na
+00040790: 6d65 2e6c 6f77 6572 2829 0a20 2020 2069  me.lower().    i
+000407a0: 6620 6773 2e70 612e 726f 6f6d 5f69 6e76  f gs.pa.room_inv
+000407b0: 6974 6573 3a0a 2020 2020 2020 2020 6773  ites:.        gs
+000407c0: 2e70 612e 726f 6f6d 5f69 6e76 6974 6573  .pa.room_invites
+000407d0: 203d 2067 732e 7061 2e72 6f6f 6d5f 696e   = gs.pa.room_in
+000407e0: 7669 7465 732e 6c6f 7765 7228 290a 0a20  vites.lower().. 
+000407f0: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
+00040800: 6773 2e70 612e 6d65 7373 6167 650a 2020  gs.pa.message.  
+00040810: 2020 2020 2020 6f72 2067 732e 7061 2e69        or gs.pa.i
+00040820: 6d61 6765 0a20 2020 2020 2020 206f 7220  mage.        or 
+00040830: 6773 2e70 612e 6175 6469 6f0a 2020 2020  gs.pa.audio.    
+00040840: 2020 2020 6f72 2067 732e 7061 2e66 696c      or gs.pa.fil
+00040850: 650a 2020 2020 2020 2020 6f72 2067 732e  e.        or gs.
+00040860: 7061 2e65 7665 6e74 0a20 2020 2029 3a0a  pa.event.    ):.
+00040870: 2020 2020 2020 2020 6773 2e73 656e 645f          gs.send_
+00040880: 6163 7469 6f6e 203d 2054 7275 650a 2020  action = True.  
+00040890: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000408a0: 6773 2e73 656e 645f 6163 7469 6f6e 203d  gs.send_action =
+000408b0: 2046 616c 7365 0a0a 2020 2020 6966 2067   False..    if g
+000408c0: 732e 7061 2e6c 6973 7465 6e20 696e 2028  s.pa.listen in (
+000408d0: 464f 5245 5645 522c 204f 4e43 452c 2054  FOREVER, ONCE, T
+000408e0: 4149 4c2c 2041 4c4c 293a 0a20 2020 2020  AIL, ALL):.     
+000408f0: 2020 2067 732e 6c69 7374 656e 5f61 6374     gs.listen_act
+00040900: 696f 6e20 3d20 5472 7565 0a20 2020 2065  ion = True.    e
+00040910: 6c73 653a 0a20 2020 2020 2020 2067 732e  lse:.        gs.
+00040920: 6c69 7374 656e 5f61 6374 696f 6e20 3d20  listen_action = 
+00040930: 4661 6c73 650a 0a20 2020 2069 6620 280a  False..    if (.
+00040940: 2020 2020 2020 2020 2320 726f 6f6d 2073          # room s
+00040950: 6574 0a20 2020 2020 2020 2067 732e 7061  et.        gs.pa
+00040960: 2e72 6f6f 6d5f 6372 6561 7465 0a20 2020  .room_create.   
+00040970: 2020 2020 206f 7220 6773 2e70 612e 726f       or gs.pa.ro
+00040980: 6f6d 5f64 6d5f 6372 6561 7465 0a20 2020  om_dm_create.   
+00040990: 2020 2020 206f 7220 6773 2e70 612e 726f       or gs.pa.ro
+000409a0: 6f6d 5f6a 6f69 6e0a 2020 2020 2020 2020  om_join.        
+000409b0: 6f72 2067 732e 7061 2e72 6f6f 6d5f 6c65  or gs.pa.room_le
+000409c0: 6176 650a 2020 2020 2020 2020 6f72 2067  ave.        or g
+000409d0: 732e 7061 2e72 6f6f 6d5f 666f 7267 6574  s.pa.room_forget
+000409e0: 0a20 2020 2020 2020 206f 7220 6773 2e70  .        or gs.p
+000409f0: 612e 726f 6f6d 5f69 6e76 6974 650a 2020  a.room_invite.  
+00040a00: 2020 2020 2020 6f72 2067 732e 7061 2e72        or gs.pa.r
+00040a10: 6f6f 6d5f 6261 6e0a 2020 2020 2020 2020  oom_ban.        
+00040a20: 6f72 2067 732e 7061 2e72 6f6f 6d5f 756e  or gs.pa.room_un
+00040a30: 6261 6e0a 2020 2020 2020 2020 6f72 2067  ban.        or g
+00040a40: 732e 7061 2e72 6f6f 6d5f 6b69 636b 0a20  s.pa.room_kick. 
+00040a50: 2020 2020 2020 206f 7220 6773 2e70 612e         or gs.pa.
+00040a60: 726f 6f6d 5f72 6564 6163 740a 2020 2020  room_redact.    
+00040a70: 2020 2020 6f72 2067 732e 7061 2e72 6f6f      or gs.pa.roo
+00040a80: 6d5f 7365 745f 616c 6961 730a 2020 2020  m_set_alias.    
+00040a90: 2020 2020 6f72 2067 732e 7061 2e72 6f6f      or gs.pa.roo
+00040aa0: 6d5f 6465 6c65 7465 5f61 6c69 6173 0a20  m_delete_alias. 
+00040ab0: 2020 2020 2020 2023 2072 6f6f 6d20 6765         # room ge
+00040ac0: 740a 2020 2020 2020 2020 6f72 2067 732e  t.        or gs.
+00040ad0: 7061 2e72 6f6f 6d5f 6765 745f 7669 7369  pa.room_get_visi
+00040ae0: 6269 6c69 7479 2069 7320 6e6f 7420 4e6f  bility is not No
+00040af0: 6e65 2020 2320 656d 7074 7920 6c69 7374  ne  # empty list
+00040b00: 206d 7573 7420 696e 766f 6b65 2066 756e   must invoke fun
+00040b10: 630a 2020 2020 2020 2020 6f72 2067 732e  c.        or gs.
+00040b20: 7061 2e72 6f6f 6d5f 6765 745f 7374 6174  pa.room_get_stat
+00040b30: 6520 6973 206e 6f74 204e 6f6e 6520 2023  e is not None  #
+00040b40: 2065 6d70 7479 206c 6973 7420 6d75 7374   empty list must
+00040b50: 2069 6e76 6f6b 6520 6675 6e63 0a20 2020   invoke func.   
+00040b60: 2020 2020 206f 7220 6773 2e70 612e 726f       or gs.pa.ro
+00040b70: 6f6d 5f72 6573 6f6c 7665 5f61 6c69 6173  om_resolve_alias
+00040b80: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00040b90: 6773 2e72 6f6f 6d5f 6163 7469 6f6e 203d  gs.room_action =
+00040ba0: 2054 7275 650a 2020 2020 656c 7365 3a0a   True.    else:.
+00040bb0: 2020 2020 2020 2020 6773 2e72 6f6f 6d5f          gs.room_
+00040bc0: 6163 7469 6f6e 203d 2046 616c 7365 0a0a  action = False..
+00040bd0: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
+00040be0: 2067 732e 7061 2e73 6574 5f64 6576 6963   gs.pa.set_devic
+00040bf0: 655f 6e61 6d65 2020 2320 7365 740a 2020  e_name  # set.  
+00040c00: 2020 2020 2020 6f72 2067 732e 7061 2e73        or gs.pa.s
+00040c10: 6574 5f64 6973 706c 6179 5f6e 616d 650a  et_display_name.
+00040c20: 2020 2020 2020 2020 6f72 2067 732e 7061          or gs.pa
+00040c30: 2e73 6574 5f70 7265 7365 6e63 650a 2020  .set_presence.  
+00040c40: 2020 2020 2020 6f72 2067 732e 7061 2e75        or gs.pa.u
+00040c50: 706c 6f61 640a 2020 2020 2020 2020 6f72  pload.        or
+00040c60: 2067 732e 7061 2e64 656c 6574 655f 6d78   gs.pa.delete_mx
+00040c70: 630a 2020 2020 2020 2020 6f72 2067 732e  c.        or gs.
+00040c80: 7061 2e64 656c 6574 655f 6d78 635f 6265  pa.delete_mxc_be
+00040c90: 666f 7265 0a20 2020 2020 2020 206f 7220  fore.        or 
+00040ca0: 6773 2e70 612e 7265 7374 0a20 2020 2020  gs.pa.rest.     
+00040cb0: 2020 206f 7220 6773 2e70 612e 7365 745f     or gs.pa.set_
+00040cc0: 6176 6174 6172 0a20 2020 2020 2020 206f  avatar.        o
+00040cd0: 7220 6773 2e70 612e 696d 706f 7274 5f6b  r gs.pa.import_k
+00040ce0: 6579 730a 2020 2020 2020 2020 6f72 2067  eys.        or g
+00040cf0: 732e 7061 2e64 656c 6574 655f 6465 7669  s.pa.delete_devi
+00040d00: 6365 0a20 2020 2029 3a0a 2020 2020 2020  ce.    ):.      
+00040d10: 2020 6773 2e73 6574 5f61 6374 696f 6e20    gs.set_action 
+00040d20: 3d20 5472 7565 0a20 2020 2065 6c73 653a  = True.    else:
+00040d30: 0a20 2020 2020 2020 2067 732e 7365 745f  .        gs.set_
+00040d40: 6163 7469 6f6e 203d 2046 616c 7365 0a0a  action = False..
+00040d50: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
+00040d60: 2067 732e 7061 2e67 6574 5f64 6973 706c   gs.pa.get_displ
+00040d70: 6179 5f6e 616d 6520 2023 2067 6574 0a20  ay_name  # get. 
+00040d80: 2020 2020 2020 206f 7220 6773 2e70 612e         or gs.pa.
+00040d90: 6765 745f 7072 6573 656e 6365 0a20 2020  get_presence.   
+00040da0: 2020 2020 206f 7220 6773 2e70 612e 646f       or gs.pa.do
+00040db0: 776e 6c6f 6164 0a20 2020 2020 2020 206f  wnload.        o
+00040dc0: 7220 6773 2e70 612e 6a6f 696e 6564 5f72  r gs.pa.joined_r
+00040dd0: 6f6f 6d73 0a20 2020 2020 2020 206f 7220  ooms.        or 
+00040de0: 6773 2e70 612e 6a6f 696e 6564 5f6d 656d  gs.pa.joined_mem
+00040df0: 6265 7273 0a20 2020 2020 2020 206f 7220  bers.        or 
+00040e00: 6773 2e70 612e 6a6f 696e 6564 5f64 6d5f  gs.pa.joined_dm_
+00040e10: 726f 6f6d 730a 2020 2020 2020 2020 6f72  rooms.        or
+00040e20: 2067 732e 7061 2e6d 7863 5f74 6f5f 6874   gs.pa.mxc_to_ht
+00040e30: 7470 0a20 2020 2020 2020 206f 7220 6773  tp.        or gs
+00040e40: 2e70 612e 6465 7669 6365 730a 2020 2020  .pa.devices.    
+00040e50: 2020 2020 6f72 2067 732e 7061 2e64 6973      or gs.pa.dis
+00040e60: 636f 7665 7279 5f69 6e66 6f0a 2020 2020  covery_info.    
+00040e70: 2020 2020 6f72 2067 732e 7061 2e6c 6f67      or gs.pa.log
+00040e80: 696e 5f69 6e66 6f0a 2020 2020 2020 2020  in_info.        
+00040e90: 6f72 2067 732e 7061 2e63 6f6e 7465 6e74  or gs.pa.content
+00040ea0: 5f72 6570 6f73 6974 6f72 795f 636f 6e66  _repository_conf
+00040eb0: 6967 0a20 2020 2020 2020 206f 7220 6773  ig.        or gs
+00040ec0: 2e70 612e 6765 745f 6176 6174 6172 2069  .pa.get_avatar i
+00040ed0: 7320 6e6f 7420 4e6f 6e65 2020 2320 656d  s not None  # em
+00040ee0: 7074 7920 6c69 7374 206d 7573 7420 696e  pty list must in
+00040ef0: 766f 6b65 2066 756e 6374 696f 6e0a 2020  voke function.  
+00040f00: 2020 2020 2020 6f72 2067 732e 7061 2e67        or gs.pa.g
+00040f10: 6574 5f70 726f 6669 6c65 2069 7320 6e6f  et_profile is no
+00040f20: 7420 4e6f 6e65 2020 2320 656d 7074 7920  t None  # empty 
+00040f30: 6c69 7374 206d 7573 7420 696e 766f 6b65  list must invoke
+00040f40: 2066 756e 6374 696f 6e0a 2020 2020 2020   function.      
+00040f50: 2020 6f72 2067 732e 7061 2e67 6574 5f72    or gs.pa.get_r
+00040f60: 6f6f 6d5f 696e 666f 2069 7320 6e6f 7420  oom_info is not 
+00040f70: 4e6f 6e65 2020 2320 656d 7074 7920 6c69  None  # empty li
+00040f80: 7374 206d 7573 7420 696e 766f 6b65 2066  st must invoke f
+00040f90: 756e 6374 696f 6e0a 2020 2020 2020 2020  unction.        
+00040fa0: 6f72 2067 732e 7061 2e67 6574 5f63 6c69  or gs.pa.get_cli
+00040fb0: 656e 745f 696e 666f 0a20 2020 2020 2020  ent_info.       
+00040fc0: 206f 7220 6773 2e70 612e 6861 735f 7065   or gs.pa.has_pe
+00040fd0: 726d 6973 7369 6f6e 0a20 2020 2020 2020  rmission.       
+00040fe0: 206f 7220 6773 2e70 612e 6578 706f 7274   or gs.pa.export
+00040ff0: 5f6b 6579 730a 2020 2020 2020 2020 6f72  _keys.        or
+00041000: 2067 732e 7061 2e67 6574 5f6f 7065 6e69   gs.pa.get_openi
+00041010: 645f 746f 6b65 6e20 6973 206e 6f74 204e  d_token is not N
+00041020: 6f6e 6520 2023 2065 6d70 7479 206c 6973  one  # empty lis
+00041030: 7420 6d75 7374 2069 6e76 6f6b 6520 6675  t must invoke fu
+00041040: 6e63 0a20 2020 2020 2020 206f 7220 6773  nc.        or gs
+00041050: 2e70 612e 7768 6f61 6d69 0a20 2020 2029  .pa.whoami.    )
+00041060: 3a0a 2020 2020 2020 2020 6773 2e67 6574  :.        gs.get
+00041070: 5f61 6374 696f 6e20 3d20 5472 7565 0a20  _action = True. 
+00041080: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00041090: 2067 732e 6765 745f 6163 7469 6f6e 203d   gs.get_action =
+000410a0: 2046 616c 7365 0a0a 2020 2020 6966 2067   False..    if g
+000410b0: 732e 7365 745f 6163 7469 6f6e 206f 7220  s.set_action or 
+000410c0: 6773 2e67 6574 5f61 6374 696f 6e3a 0a20  gs.get_action:. 
+000410d0: 2020 2020 2020 2067 732e 7365 7467 6574         gs.setget
+000410e0: 5f61 6374 696f 6e20 3d20 5472 7565 0a20  _action = True. 
+000410f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00041100: 2067 732e 7365 7467 6574 5f61 6374 696f   gs.setget_actio
+00041110: 6e20 3d20 4661 6c73 650a 0a20 2020 2023  n = False..    #
+00041120: 206f 6e6c 7920 3220 5353 4c20 7374 6174   only 2 SSL stat
+00041130: 6573 2061 6c6c 6f77 6564 3a20 4e6f 6e65  es allowed: None
+00041140: 2028 5353 4c20 6465 6661 756c 7420 6f6e   (SSL default on
+00041150: 292c 2046 616c 7365 2028 5353 4c20 6f66  ), False (SSL of
+00041160: 6629 0a20 2020 2069 6620 6773 2e70 612e  f).    if gs.pa.
+00041170: 6e6f 5f73 736c 2069 7320 6e6f 7420 5472  no_ssl is not Tr
+00041180: 7565 3a0a 2020 2020 2020 2020 6773 2e70  ue:.        gs.p
+00041190: 612e 6e6f 5f73 736c 203d 204e 6f6e 650a  a.no_ssl = None.
+000411a0: 2020 2020 6966 2067 732e 7061 2e70 726f      if gs.pa.pro
+000411b0: 7879 203d 3d20 2222 3a0a 2020 2020 2020  xy == "":.      
+000411c0: 2020 6773 2e70 612e 7072 6f78 7920 3d20    gs.pa.proxy = 
+000411d0: 4e6f 6e65 0a0a 2020 2020 2320 686f 7720  None..    # how 
+000411e0: 6f66 7465 6e20 6973 2022 2d22 2075 7365  often is "-" use
+000411f0: 6420 746f 2072 6570 7265 7365 6e74 2073  d to represent s
+00041200: 7464 696e 0a20 2020 2023 206d 7573 7420  tdin.    # must 
+00041210: 6265 2030 206f 7220 313b 2063 616e 6e6f  be 0 or 1; canno
+00041220: 7420 6265 2075 7365 6420 7477 6963 6520  t be used twice 
+00041230: 6f72 206d 6f72 650a 2020 2020 5354 4449  or more.    STDI
+00041240: 4e5f 4d45 5353 4147 4520 3d20 300a 2020  N_MESSAGE = 0.  
+00041250: 2020 5354 4449 4e5f 494d 4147 4520 3d20    STDIN_IMAGE = 
+00041260: 300a 2020 2020 5354 4449 4e5f 4155 4449  0.    STDIN_AUDI
+00041270: 4f20 3d20 300a 2020 2020 5354 4449 4e5f  O = 0.    STDIN_
+00041280: 4649 4c45 203d 2030 0a20 2020 2053 5444  FILE = 0.    STD
+00041290: 494e 5f45 5645 4e54 203d 2030 0a20 2020  IN_EVENT = 0.   
+000412a0: 2053 5444 494e 5f54 4f54 414c 203d 2030   STDIN_TOTAL = 0
+000412b0: 0a20 2020 2069 6620 6773 2e70 612e 696d  .    if gs.pa.im
+000412c0: 6167 653a 0a20 2020 2020 2020 2066 6f72  age:.        for
+000412d0: 2069 6d61 6765 2069 6e20 6773 2e70 612e   image in gs.pa.
+000412e0: 696d 6167 653a 0a20 2020 2020 2020 2020  image:.         
+000412f0: 2020 2069 6620 696d 6167 6520 3d3d 2022     if image == "
+00041300: 2d22 3a0a 2020 2020 2020 2020 2020 2020  -":.            
+00041310: 2020 2020 5354 4449 4e5f 494d 4147 4520      STDIN_IMAGE 
+00041320: 2b3d 2031 0a20 2020 2020 2020 2020 2020  += 1.           
+00041330: 2020 2020 2067 732e 7374 6469 6e5f 7573       gs.stdin_us
+00041340: 6520 3d20 2269 6d61 6765 220a 2020 2020  e = "image".    
+00041350: 6966 2067 732e 7061 2e61 7564 696f 3a0a  if gs.pa.audio:.
+00041360: 2020 2020 2020 2020 666f 7220 6175 6469          for audi
+00041370: 6f20 696e 2067 732e 7061 2e61 7564 696f  o in gs.pa.audio
+00041380: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00041390: 2061 7564 696f 203d 3d20 222d 223a 0a20   audio == "-":. 
+000413a0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+000413b0: 5444 494e 5f41 5544 494f 202b 3d20 310a  TDIN_AUDIO += 1.
+000413c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000413d0: 6773 2e73 7464 696e 5f75 7365 203d 2022  gs.stdin_use = "
+000413e0: 6175 6469 6f22 0a20 2020 2069 6620 6773  audio".    if gs
+000413f0: 2e70 612e 6669 6c65 3a0a 2020 2020 2020  .pa.file:.      
+00041400: 2020 666f 7220 6669 6c65 2069 6e20 6773    for file in gs
+00041410: 2e70 612e 6669 6c65 3a0a 2020 2020 2020  .pa.file:.      
+00041420: 2020 2020 2020 6966 2066 696c 6520 3d3d        if file ==
+00041430: 2022 2d22 3a0a 2020 2020 2020 2020 2020   "-":.          
+00041440: 2020 2020 2020 5354 4449 4e5f 4649 4c45        STDIN_FILE
+00041450: 202b 3d20 310a 2020 2020 2020 2020 2020   += 1.          
+00041460: 2020 2020 2020 6773 2e73 7464 696e 5f75        gs.stdin_u
+00041470: 7365 203d 2022 6669 6c65 220a 2020 2020  se = "file".    
+00041480: 6966 2067 732e 7061 2e65 7665 6e74 3a0a  if gs.pa.event:.
+00041490: 2020 2020 2020 2020 666f 7220 6576 656e          for even
+000414a0: 7420 696e 2067 732e 7061 2e65 7665 6e74  t in gs.pa.event
+000414b0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+000414c0: 2065 7665 6e74 203d 3d20 222d 223a 0a20   event == "-":. 
+000414d0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+000414e0: 5444 494e 5f45 5645 4e54 202b 3d20 310a  TDIN_EVENT += 1.
+000414f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041500: 6773 2e73 7464 696e 5f75 7365 203d 2022  gs.stdin_use = "
+00041510: 6576 656e 7422 0a20 2020 2069 6620 6773  event".    if gs
+00041520: 2e70 612e 6d65 7373 6167 653a 0a20 2020  .pa.message:.   
+00041530: 2020 2020 2066 6f72 206d 6573 7361 6765       for message
+00041540: 2069 6e20 6773 2e70 612e 6d65 7373 6167   in gs.pa.messag
+00041550: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+00041560: 6620 6d65 7373 6167 6520 3d3d 2022 2d22  f message == "-"
+00041570: 206f 7220 6d65 7373 6167 6520 3d3d 2022   or message == "
+00041580: 5f22 3a0a 2020 2020 2020 2020 2020 2020  _":.            
+00041590: 2020 2020 5354 4449 4e5f 4d45 5353 4147      STDIN_MESSAG
+000415a0: 4520 2b3d 2031 0a20 2020 2020 2020 2020  E += 1.         
+000415b0: 2020 2020 2020 2067 732e 7374 6469 6e5f         gs.stdin_
+000415c0: 7573 6520 3d20 226d 6573 7361 6765 220a  use = "message".
+000415d0: 2020 2020 5354 4449 4e5f 544f 5441 4c20      STDIN_TOTAL 
+000415e0: 3d20 280a 2020 2020 2020 2020 5354 4449  = (.        STDI
+000415f0: 4e5f 4d45 5353 4147 4520 2b20 5354 4449  N_MESSAGE + STDI
+00041600: 4e5f 494d 4147 4520 2b20 5354 4449 4e5f  N_IMAGE + STDIN_
+00041610: 4155 4449 4f20 2b20 5354 4449 4e5f 4649  AUDIO + STDIN_FI
+00041620: 4c45 202b 2053 5444 494e 5f45 5645 4e54  LE + STDIN_EVENT
+00041630: 0a20 2020 2029 0a0a 2020 2020 6966 2067  .    )..    if g
+00041640: 732e 7061 2e64 6f77 6e6c 6f61 645f 6d65  s.pa.download_me
+00041650: 6469 615f 6e61 6d65 203d 3d20 2222 2061  dia_name == "" a
+00041660: 6e64 2067 732e 7061 2e64 6f77 6e6c 6f61  nd gs.pa.downloa
+00041670: 645f 6d65 6469 613a 0a20 2020 2020 2020  d_media:.       
+00041680: 2067 732e 7061 2e64 6f77 6e6c 6f61 645f   gs.pa.download_
+00041690: 6d65 6469 615f 6e61 6d65 203d 204d 4544  media_name = MED
+000416a0: 4941 5f4e 414d 455f 4445 4641 554c 540a  IA_NAME_DEFAULT.
+000416b0: 0a20 2020 2023 2053 6563 6f6e 646c 792c  .    # Secondly,
+000416c0: 2074 6865 2063 6865 636b 730a 2020 2020   the checks.    
+000416d0: 6966 2067 732e 7061 2e63 6f6e 6669 673a  if gs.pa.config:
+000416e0: 0a20 2020 2020 2020 2074 203d 2028 0a20  .        t = (. 
+000416f0: 2020 2020 2020 2020 2020 2022 5468 6973             "This
+00041700: 2066 6561 7475 7265 2069 7320 6e6f 7420   feature is not 
+00041710: 696d 706c 656d 656e 7465 6420 7965 7420  implemented yet 
+00041720: 616e 6420 7769 6c6c 206d 6f73 7420 6c69  and will most li
+00041730: 6b65 6c79 2022 0a20 2020 2020 2020 2020  kely ".         
+00041740: 2020 2022 6e6f 7420 6265 2069 6d70 6c65     "not be imple
+00041750: 6d65 6e74 6564 2e20 5365 6520 4973 7375  mented. See Issu
+00041760: 6520 2333 3420 6f6e 2047 6974 6875 622e  e #34 on Github.
+00041770: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+00041780: 656c 6966 2067 732e 7061 2e6c 6973 7465  elif gs.pa.liste
+00041790: 6e20 696e 2028 464f 5245 5645 522c 204f  n in (FOREVER, O
+000417a0: 4e43 452c 2041 4c4c 2920 616e 6420 6773  NCE, ALL) and gs
+000417b0: 2e70 612e 7461 696c 2021 3d20 303a 0a20  .pa.tail != 0:. 
+000417c0: 2020 2020 2020 2074 203d 2028 0a20 2020         t = (.   
+000417d0: 2020 2020 2020 2020 2022 446f 6e27 7420           "Don't 
+000417e0: 7573 6520 2d2d 6c69 7374 656e 2066 6f72  use --listen for
+000417f0: 6576 6572 2c20 2d2d 6c69 7374 656e 206f  ever, --listen o
+00041800: 6e63 6520 6f72 202d 2d6c 6973 7465 6e20  nce or --listen 
+00041810: 616c 6c20 220a 2020 2020 2020 2020 2020  all ".          
+00041820: 2020 2274 6f67 6574 6865 7220 7769 7468    "together with
+00041830: 202d 2d74 6169 6c2e 2049 7427 7320 6f6e   --tail. It's on
+00041840: 6520 6f72 2074 6865 206f 7468 6572 2e22  e or the other."
+00041850: 0a20 2020 2020 2020 2029 0a20 2020 2023  .        ).    #
+00041860: 2074 6869 7320 6973 2073 6574 2062 7920   this is set by 
+00041870: 6465 6661 756c 7420 616e 7977 6179 2c20  default anyway, 
+00041880: 6a75 7374 2064 6566 656e 7369 7665 2070  just defensive p
+00041890: 726f 6772 616d 6d69 6e67 0a20 2020 2065  rogramming.    e
+000418a0: 6c69 6620 6773 2e70 612e 656e 6372 7970  lif gs.pa.encryp
+000418b0: 7465 6420 616e 6420 6773 2e70 612e 7374  ted and gs.pa.st
+000418c0: 6f72 6520 696e 2028 4e6f 6e65 2c20 2222  ore in (None, ""
+000418d0: 293a 0a20 2020 2020 2020 2074 203d 2028  ):.        t = (
+000418e0: 0a20 2020 2020 2020 2020 2020 2022 4966  .            "If
+000418f0: 202d 2d65 6e63 7279 7074 6564 2069 7320   --encrypted is 
+00041900: 7573 6564 202d 2d73 746f 7265 206d 7573  used --store mus
+00041910: 7420 6265 2073 6574 2074 6f6f 2e20 220a  t be set too. ".
+00041920: 2020 2020 2020 2020 2020 2020 2253 7065              "Spe
+00041930: 6369 6679 202d 2d73 746f 7265 2061 6e64  cify --store and
+00041940: 2072 756e 2070 726f 6772 616d 2061 6761   run program aga
+00041950: 696e 2e22 0a20 2020 2020 2020 2029 0a20  in.".        ). 
+00041960: 2020 2065 6c69 6620 6773 2e70 612e 7665     elif gs.pa.ve
+00041970: 7269 6679 2061 6e64 2028 6773 2e70 612e  rify and (gs.pa.
+00041980: 7665 7269 6679 2e6c 6f77 6572 2829 2021  verify.lower() !
+00041990: 3d20 454d 4f4a 4929 3a0a 2020 2020 2020  = EMOJI):.      
+000419a0: 2020 7420 3d20 6627 466f 7220 2d2d 7665    t = f'For --ve
+000419b0: 7269 6679 2063 7572 7265 6e74 6c79 206f  rify currently o
+000419c0: 6e6c 7920 227b 454d 4f4a 497d 2220 6973  nly "{EMOJI}" is
+000419d0: 2061 6c6c 6f77 6564 2061 7320 6b65 7977   allowed as keyw
+000419e0: 6f72 642e 270a 2020 2020 656c 6966 2067  ord.'.    elif g
+000419f0: 732e 7061 2e76 6572 7369 6f6e 2061 6e64  s.pa.version and
+00041a00: 2028 0a20 2020 2020 2020 2067 732e 7061   (.        gs.pa
+00041a10: 2e76 6572 7369 6f6e 2e6c 6f77 6572 2829  .version.lower()
+00041a20: 2021 3d20 5052 494e 5420 616e 6420 6773   != PRINT and gs
+00041a30: 2e70 612e 7665 7273 696f 6e2e 6c6f 7765  .pa.version.lowe
+00041a40: 7228 2920 213d 2043 4845 434b 0a20 2020  r() != CHECK.   
+00041a50: 2029 3a0a 2020 2020 2020 2020 7420 3d20   ):.        t = 
+00041a60: 280a 2020 2020 2020 2020 2020 2020 6627  (.            f'
+00041a70: 466f 7220 2d2d 7665 7273 696f 6e20 6375  For --version cu
+00041a80: 7272 656e 746c 7920 6f6e 6c79 2022 7b50  rrently only "{P
+00041a90: 5249 4e54 7d22 2027 0a20 2020 2020 2020  RINT}" '.       
+00041aa0: 2020 2020 2066 276f 7220 227b 4348 4543       f'or "{CHEC
+00041ab0: 4b7d 2220 6973 2061 6c6c 6f77 6564 2061  K}" is allowed a
+00041ac0: 7320 6b65 7977 6f72 642e 270a 2020 2020  s keyword.'.    
+00041ad0: 2020 2020 290a 2020 2020 656c 6966 2067      ).    elif g
+00041ae0: 732e 7061 2e72 6f6f 6d5f 696e 7669 7465  s.pa.room_invite
+00041af0: 7320 616e 6420 280a 2020 2020 2020 2020  s and (.        
+00041b00: 6773 2e70 612e 726f 6f6d 5f69 6e76 6974  gs.pa.room_invit
+00041b10: 6573 2021 3d20 494e 5649 5445 535f 4c49  es != INVITES_LI
+00041b20: 5354 0a20 2020 2020 2020 2061 6e64 2067  ST.        and g
+00041b30: 732e 7061 2e72 6f6f 6d5f 696e 7669 7465  s.pa.room_invite
+00041b40: 7320 213d 2049 4e56 4954 4553 5f4a 4f49  s != INVITES_JOI
+00041b50: 4e0a 2020 2020 2020 2020 616e 6420 6773  N.        and gs
+00041b60: 2e70 612e 726f 6f6d 5f69 6e76 6974 6573  .pa.room_invites
+00041b70: 2021 3d20 494e 5649 5445 535f 4c49 5354   != INVITES_LIST
+00041b80: 5f4a 4f49 4e0a 2020 2020 293a 0a20 2020  _JOIN.    ):.   
+00041b90: 2020 2020 2074 203d 2028 0a20 2020 2020       t = (.     
+00041ba0: 2020 2020 2020 2066 2746 6f72 202d 2d72         f'For --r
+00041bb0: 6f6f 6d2d 696e 7669 7465 7320 6375 7272  oom-invites curr
+00041bc0: 656e 746c 7920 6f6e 6c79 2022 7b49 4e56  ently only "{INV
+00041bd0: 4954 4553 5f4c 4953 547d 222c 2027 0a20  ITES_LIST}", '. 
+00041be0: 2020 2020 2020 2020 2020 2066 2722 7b49             f'"{I
+00041bf0: 4e56 4954 4553 5f4a 4f49 4e7d 2220 6f72  NVITES_JOIN}" or
+00041c00: 2022 7b49 4e56 4954 4553 5f4c 4953 545f   "{INVITES_LIST_
+00041c10: 4a4f 494e 7d22 2061 7265 2061 6c6c 6f77  JOIN}" are allow
+00041c20: 6564 2061 7320 270a 2020 2020 2020 2020  ed as '.        
+00041c30: 2020 2020 226b 6579 776f 7264 732e 220a      "keywords.".
+00041c40: 2020 2020 2020 2020 290a 2020 2020 2320          ).    # 
+00041c50: 656c 6966 2067 732e 7061 2e72 6f6f 6d5f  elif gs.pa.room_
+00041c60: 696e 7669 7465 7320 616e 6420 6773 2e70  invites and gs.p
+00041c70: 612e 6c69 7374 656e 206e 6f74 2069 6e20  a.listen not in 
+00041c80: 2846 4f52 4556 4552 2c20 4f4e 4345 293a  (FOREVER, ONCE):
+00041c90: 0a20 2020 2023 2020 2020 2074 203d 2028  .    #     t = (
+00041ca0: 0a20 2020 2023 2020 2020 2020 2020 2022  .    #         "
+00041cb0: 466f 7220 2d2d 726f 6f6d 2d69 6e76 6974  For --room-invit
+00041cc0: 6573 2074 6f20 776f 726b 2079 6f75 206d  es to work you m
+00041cd0: 7573 7420 616c 736f 2062 6520 6c69 7374  ust also be list
+00041ce0: 656e 696e 672e 2022 0a20 2020 2023 2020  ening. ".    #  
+00041cf0: 2020 2020 2020 2027 5573 6520 222d 2d6c         'Use "--l
+00041d00: 6973 7465 6e20 6f6e 6365 2220 6f72 2022  isten once" or "
+00041d10: 2d2d 6c69 7374 656e 2066 6f72 6576 6572  --listen forever
+00041d20: 222e 270a 2020 2020 2320 2020 2020 290a  ".'.    #     ).
+00041d30: 2020 2020 2320 616c 6c6f 7720 7665 7269      # allow veri
+00041d40: 6679 2077 6974 6820 6576 6572 7974 6869  fy with everythi
+00041d50: 6e67 0a20 2020 2023 2061 6c6c 6f77 2073  ng.    # allow s
+00041d60: 656e 6420 7769 7468 2065 7665 7279 7468  end with everyth
+00041d70: 696e 670a 2020 2020 2320 616c 6c6f 7720  ing.    # allow 
+00041d80: 6c69 7374 656e 2077 6974 6820 6576 6572  listen with ever
+00041d90: 7974 6869 6e67 0a20 2020 2065 6c69 6620  ything.    elif 
+00041da0: 6773 2e70 612e 7365 745f 6465 7669 6365  gs.pa.set_device
+00041db0: 5f6e 616d 6520 616e 6420 2867 732e 7061  _name and (gs.pa
+00041dc0: 2e73 6574 5f64 6576 6963 655f 6e61 6d65  .set_device_name
+00041dd0: 2e73 7472 6970 2829 203d 3d20 2222 293a  .strip() == ""):
+00041de0: 0a20 2020 2020 2020 2074 203d 2022 446f  .        t = "Do
+00041df0: 6e27 7420 7573 6520 616e 2065 6d70 7479  n't use an empty
+00041e00: 206e 616d 6520 666f 7220 2d2d 7365 742d   name for --set-
+00041e10: 6465 7669 6365 2d6e 616d 652e 220a 2020  device-name.".  
+00041e20: 2020 656c 6966 2067 732e 7061 2e73 6574    elif gs.pa.set
+00041e30: 5f64 6973 706c 6179 5f6e 616d 6520 616e  _display_name an
+00041e40: 6420 2867 732e 7061 2e73 6574 5f64 6973  d (gs.pa.set_dis
+00041e50: 706c 6179 5f6e 616d 652e 7374 7269 7028  play_name.strip(
+00041e60: 2920 3d3d 2022 2229 3a0a 2020 2020 2020  ) == ""):.      
+00041e70: 2020 7420 3d20 2244 6f6e 2774 2075 7365    t = "Don't use
+00041e80: 2061 6e20 656d 7074 7920 6e61 6d65 2066   an empty name f
+00041e90: 6f72 202d 2d73 6574 2d64 6973 706c 6179  or --set-display
+00041ea0: 2d6e 616d 652e 220a 2020 2020 656c 6966  -name.".    elif
+00041eb0: 2028 6773 2e70 612e 7573 6572 2920 616e   (gs.pa.user) an
+00041ec0: 6420 6e6f 7420 280a 2020 2020 2020 2020  d not (.        
+00041ed0: 6773 2e73 656e 645f 6163 7469 6f6e 0a20  gs.send_action. 
+00041ee0: 2020 2020 2020 206f 7220 6773 2e72 6f6f         or gs.roo
+00041ef0: 6d5f 6163 7469 6f6e 0a20 2020 2020 2020  m_action.       
+00041f00: 206f 7220 6773 2e70 612e 6765 745f 6469   or gs.pa.get_di
+00041f10: 7370 6c61 795f 6e61 6d65 0a20 2020 2020  splay_name.     
+00041f20: 2020 206f 7220 6773 2e70 612e 6765 745f     or gs.pa.get_
+00041f30: 7072 6573 656e 6365 0a20 2020 2020 2020  presence.       
+00041f40: 206f 7220 6773 2e70 612e 6465 6c65 7465   or gs.pa.delete
+00041f50: 5f64 6576 6963 650a 2020 2020 293a 0a20  _device.    ):. 
+00041f60: 2020 2020 2020 2074 203d 2028 0a20 2020         t = (.   
+00041f70: 2020 2020 2020 2020 2022 4966 202d 2d75           "If --u
+00041f80: 7365 7220 6973 2073 7065 6369 6669 6564  ser is specified
+00041f90: 2c20 6f6e 6c79 2061 2073 656e 6420 6163  , only a send ac
+00041fa0: 7469 6f6e 2c20 6120 726f 6f6d 2061 6374  tion, a room act
+00041fb0: 696f 6e2c 2022 0a20 2020 2020 2020 2020  ion, ".         
+00041fc0: 2020 2022 2d2d 6765 742d 6469 7370 6c61     "--get-displa
+00041fd0: 792d 6e61 6d65 2c20 2d2d 6765 742d 7072  y-name, --get-pr
+00041fe0: 6573 656e 6365 2c20 6f72 202d 2d64 656c  esence, or --del
+00041ff0: 6574 652d 6465 7669 6365 2063 616e 2062  ete-device can b
+00042000: 6520 220a 2020 2020 2020 2020 2020 2020  e ".            
+00042010: 2264 6f6e 652e 2041 646a 7573 7420 796f  "done. Adjust yo
+00042020: 7572 2061 7267 756d 656e 7473 2061 6363  ur arguments acc
+00042030: 6f72 6469 6e67 6c79 2e22 0a20 2020 2020  ordingly.".     
+00042040: 2020 2029 0a20 2020 2065 6c69 6620 2867     ).    elif (g
+00042050: 732e 7061 2e73 796e 6320 6973 206e 6f74  s.pa.sync is not
+00042060: 204e 6f6e 6529 2061 6e64 206e 6f74 2028   None) and not (
+00042070: 6773 2e73 656e 645f 6163 7469 6f6e 293a  gs.send_action):
+00042080: 0a20 2020 2020 2020 2074 203d 2028 0a20  .        t = (. 
+00042090: 2020 2020 2020 2020 2020 2022 4f6e 6c79             "Only
+000420a0: 2069 6620 6120 7365 6e64 2061 6374 696f   if a send actio
+000420b0: 6e20 6973 2070 726f 7669 6465 6420 6974  n is provided it
+000420c0: 2069 7320 6d65 616e 696e 6766 756c 2074   is meaningful t
+000420d0: 6f20 7370 6563 6966 7920 220a 2020 2020  o specify ".    
+000420e0: 2020 2020 2020 2020 222d 2d73 796e 632e          "--sync.
+000420f0: 2052 656d 6f76 6520 2d2d 7379 6e63 206f   Remove --sync o
+00042100: 7220 6164 6420 6120 7365 6e64 2061 6374  r add a send act
+00042110: 696f 6e2e 2022 0a20 2020 2020 2020 2020  ion. ".         
+00042120: 2020 2022 4164 6a75 7374 2079 6f75 7220     "Adjust your 
+00042130: 6172 6775 6d65 6e74 7320 6163 636f 7264  arguments accord
+00042140: 696e 676c 792e 220a 2020 2020 2020 2020  ingly.".        
+00042150: 290a 2020 2020 656c 6966 2028 6773 2e70  ).    elif (gs.p
+00042160: 612e 7379 6e63 2069 7320 6e6f 7420 4e6f  a.sync is not No
+00042170: 6e65 2920 616e 6420 6773 2e70 612e 7379  ne) and gs.pa.sy
+00042180: 6e63 206e 6f74 2069 6e20 2853 594e 435f  nc not in (SYNC_
+00042190: 4655 4c4c 2c20 5359 4e43 5f4f 4646 293a  FULL, SYNC_OFF):
+000421a0: 0a20 2020 2020 2020 2074 203d 2028 0a20  .        t = (. 
+000421b0: 2020 2020 2020 2020 2020 2022 496e 636f             "Inco
+000421c0: 7272 6563 7420 7661 6c75 6520 6769 7665  rrect value give
+000421d0: 6e20 666f 7220 2d2d 7379 6e63 2e20 220a  n for --sync. ".
+000421e0: 2020 2020 2020 2020 2020 2020 6622 4f6e              f"On
+000421f0: 6c79 2027 7b53 594e 435f 4655 4c4c 7d27  ly '{SYNC_FULL}'
+00042200: 2061 6e64 2027 7b53 594e 435f 4f46 467d   and '{SYNC_OFF}
+00042210: 2720 6172 6520 616c 6c6f 7765 642e 220a  ' are allowed.".
+00042220: 2020 2020 2020 2020 290a 2020 2020 656c          ).    el
+00042230: 6966 2067 732e 7061 2e6f 7574 7075 7420  if gs.pa.output 
+00042240: 6e6f 7420 696e 2028 0a20 2020 2020 2020  not in (.       
+00042250: 204f 5554 5055 545f 5445 5854 2c0a 2020   OUTPUT_TEXT,.  
+00042260: 2020 2020 2020 4f55 5450 5554 5f4a 534f        OUTPUT_JSO
+00042270: 4e2c 0a20 2020 2020 2020 204f 5554 5055  N,.        OUTPU
+00042280: 545f 4a53 4f4e 5f53 5045 432c 0a20 2020  T_JSON_SPEC,.   
+00042290: 2020 2020 204f 5554 5055 545f 4a53 4f4e       OUTPUT_JSON
+000422a0: 5f4d 4158 2c0a 2020 2020 293a 0a20 2020  _MAX,.    ):.   
+000422b0: 2020 2020 2074 203d 2028 0a20 2020 2020       t = (.     
+000422c0: 2020 2020 2020 2022 496e 636f 7272 6563         "Incorrec
+000422d0: 7420 7661 6c75 6520 6769 7665 6e20 666f  t value given fo
+000422e0: 7220 2d2d 6f75 7470 7574 2e20 220a 2020  r --output. ".  
+000422f0: 2020 2020 2020 2020 2020 6622 4f6e 6c79            f"Only
+00042300: 2027 7b4f 5554 5055 545f 5445 5854 7d27   '{OUTPUT_TEXT}'
+00042310: 2c20 277b 4f55 5450 5554 5f4a 534f 4e7d  , '{OUTPUT_JSON}
+00042320: 272c 2022 0a20 2020 2020 2020 2020 2020  ', ".           
+00042330: 2066 2227 7b4f 5554 5055 545f 4a53 4f4e   f"'{OUTPUT_JSON
+00042340: 5f53 5045 437d 2720 616e 6420 277b 4f55  _SPEC}' and '{OU
+00042350: 5450 5554 5f4a 534f 4e5f 4d41 587d 2720  TPUT_JSON_MAX}' 
+00042360: 6172 6520 616c 6c6f 7765 642e 220a 2020  are allowed.".  
+00042370: 2020 2020 2020 290a 2020 2020 656c 6966        ).    elif
+00042380: 206e 6f74 2067 732e 7061 2e75 7365 7220   not gs.pa.user 
+00042390: 616e 6420 280a 2020 2020 2020 2020 6773  and (.        gs
+000423a0: 2e70 612e 726f 6f6d 5f69 6e76 6974 650a  .pa.room_invite.
+000423b0: 2020 2020 2020 2020 6f72 2067 732e 7061          or gs.pa
+000423c0: 2e72 6f6f 6d5f 6261 6e0a 2020 2020 2020  .room_ban.      
+000423d0: 2020 6f72 2067 732e 7061 2e72 6f6f 6d5f    or gs.pa.room_
+000423e0: 756e 6261 6e0a 2020 2020 2020 2020 6f72  unban.        or
+000423f0: 2067 732e 7061 2e72 6f6f 6d5f 6b69 636b   gs.pa.room_kick
+00042400: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00042410: 7420 3d20 280a 2020 2020 2020 2020 2020  t = (.          
+00042420: 2020 2255 7365 7220 6e6f 7420 7370 6563    "User not spec
+00042430: 6966 6965 6420 666f 7220 726f 6f6d 2061  ified for room a
+00042440: 6374 696f 6e2e 2022 0a20 2020 2020 2020  ction. ".       
+00042450: 2020 2020 2022 5573 6520 2d2d 7573 6572       "Use --user
+00042460: 206f 7074 696f 6e20 746f 2073 7065 6369   option to speci
+00042470: 6679 2075 7365 7228 7329 2066 6f72 2067  fy user(s) for g
+00042480: 6976 656e 2072 6f6f 6d20 6163 7469 6f6e  iven room action
+00042490: 2e22 0a20 2020 2020 2020 2029 0a20 2020  .".        ).   
+000424a0: 2065 6c69 6620 6773 2e70 612e 6c69 7374   elif gs.pa.list
+000424b0: 656e 2069 6e20 284f 4e43 452c 2046 4f52  en in (ONCE, FOR
+000424c0: 4556 4552 2920 616e 6420 6773 2e70 612e  EVER) and gs.pa.
+000424d0: 726f 6f6d 3a0a 2020 2020 2020 2020 7420  room:.        t 
+000424e0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+000424f0: 2249 6620 2d2d 6c69 7374 656e 206f 6e63  "If --listen onc
+00042500: 6520 6f72 202d 2d6c 6973 7465 6e20 666f  e or --listen fo
+00042510: 7265 7665 7220 6172 6520 7370 6563 6966  rever are specif
+00042520: 6965 642c 2022 0a20 2020 2020 2020 2020  ied, ".         
+00042530: 2020 2022 2d2d 726f 6f6d 206d 7573 7420     "--room must 
+00042540: 6e6f 7420 6265 2073 7065 6369 6669 6564  not be specified
+00042550: 2062 6563 6175 7365 2022 0a20 2020 2020   because ".     
+00042560: 2020 2020 2020 2022 7468 6573 6520 6f70         "these op
+00042570: 7469 6f6e 7320 6c69 7374 656e 2069 6e20  tions listen in 
+00042580: 414c 4c20 726f 6f6d 732e 220a 2020 2020  ALL rooms.".    
+00042590: 2020 2020 290a 2020 2020 656c 6966 2067      ).    elif g
+000425a0: 732e 7061 2e6c 6973 7465 6e20 6e6f 7420  s.pa.listen not 
+000425b0: 696e 2028 4e45 5645 522c 2046 4f52 4556  in (NEVER, FOREV
+000425c0: 4552 2c20 4f4e 4345 2c20 5441 494c 2c20  ER, ONCE, TAIL, 
+000425d0: 414c 4c29 3a0a 2020 2020 2020 2020 7420  ALL):.        t 
+000425e0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+000425f0: 2249 6620 2d2d 6c69 7374 656e 2069 7320  "If --listen is 
+00042600: 7370 6563 6966 6965 642c 206f 6e6c 7920  specified, only 
+00042610: 7468 6573 6520 6368 6f69 6365 7320 6172  these choices ar
+00042620: 6520 220a 2020 2020 2020 2020 2020 2020  e ".            
+00042630: 6622 706f 7373 6962 6c65 3a20 7b4f 4e43  f"possible: {ONC
+00042640: 457d 2c20 7b4e 4556 4552 7d2c 207b 464f  E}, {NEVER}, {FO
+00042650: 5245 5645 527d 2c20 7b54 4149 4c7d 206f  REVER}, {TAIL} o
+00042660: 7220 7b41 4c4c 7d2e 2022 0a20 2020 2020  r {ALL}. ".     
+00042670: 2020 2020 2020 2066 2746 6f75 6e64 2022         f'Found "
+00042680: 7b67 732e 7061 2e6c 6973 7465 6e7d 222e  {gs.pa.listen}".
+00042690: 270a 2020 2020 2020 2020 290a 2020 2020  '.        ).    
+000426a0: 656c 6966 2067 732e 7061 2e6c 6973 7465  elif gs.pa.liste
+000426b0: 6e20 3d3d 204e 4556 4552 2061 6e64 2067  n == NEVER and g
+000426c0: 732e 7061 2e6c 6973 7465 6e5f 7365 6c66  s.pa.listen_self
+000426d0: 3a0a 2020 2020 2020 2020 7420 3d20 280a  :.        t = (.
+000426e0: 2020 2020 2020 2020 2020 2020 2249 6620              "If 
+000426f0: 6e65 6974 6865 7220 2d2d 6c69 7374 656e  neither --listen
+00042700: 206e 6f72 202d 2d74 6169 6c20 6172 6520   nor --tail are 
+00042710: 7573 6564 2c20 220a 2020 2020 2020 2020  used, ".        
+00042720: 2020 2020 2274 6865 6e20 2d2d 6c69 7374      "then --list
+00042730: 656e 2d73 656c 6620 6d75 7374 206e 6f74  en-self must not
+00042740: 2062 6520 7573 6564 2022 0a20 2020 2020   be used ".     
+00042750: 2020 2020 2020 2022 6569 7468 6572 2e20         "either. 
+00042760: 5370 6563 6966 7920 2d2d 6c69 7374 656e  Specify --listen
+00042770: 206f 7220 2d2d 7461 696c 2022 0a20 2020   or --tail ".   
+00042780: 2020 2020 2020 2020 2022 616e 6420 7275           "and ru
+00042790: 6e20 7072 6f67 7261 6d20 6167 6169 6e2e  n program again.
+000427a0: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+000427b0: 656c 6966 2067 732e 7061 2e6c 6973 7465  elif gs.pa.liste
+000427c0: 6e20 3d3d 204e 4556 4552 2061 6e64 2028  n == NEVER and (
+000427d0: 6773 2e70 612e 646f 776e 6c6f 6164 5f6d  gs.pa.download_m
+000427e0: 6564 6961 2021 3d20 2222 293a 0a20 2020  edia != ""):.   
+000427f0: 2020 2020 2074 203d 2028 0a20 2020 2020       t = (.     
+00042800: 2020 2020 2020 2022 4966 206e 6569 7468         "If neith
+00042810: 6572 202d 2d6c 6973 7465 6e20 6e6f 7220  er --listen nor 
+00042820: 2d2d 7461 696c 2061 7265 2075 7365 642c  --tail are used,
+00042830: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
+00042840: 7468 656e 202d 2d64 6f77 6e6c 6f61 642d  then --download-
+00042850: 6d65 6469 6120 6d75 7374 206e 6f74 2062  media must not b
+00042860: 6520 7573 6564 2022 0a20 2020 2020 2020  e used ".       
+00042870: 2020 2020 2022 6569 7468 6572 2e20 5370       "either. Sp
+00042880: 6563 6966 7920 2d2d 6c69 7374 656e 206f  ecify --listen o
+00042890: 7220 2d2d 7461 696c 2022 0a20 2020 2020  r --tail ".     
+000428a0: 2020 2020 2020 2066 2261 6e64 2072 756e         f"and run
+000428b0: 2070 726f 6772 616d 2061 6761 696e 2e20   program again. 
+000428c0: 287b 6773 2e70 612e 646f 776e 6c6f 6164  ({gs.pa.download
+000428d0: 5f6d 6564 6961 7d29 220a 2020 2020 2020  _media})".      
+000428e0: 2020 290a 2020 2020 656c 6966 2067 732e    ).    elif gs.
+000428f0: 7061 2e64 6f77 6e6c 6f61 645f 6d65 6469  pa.download_medi
+00042900: 615f 6e61 6d65 2021 3d20 2222 2061 6e64  a_name != "" and
+00042910: 2028 6e6f 7420 6773 2e70 612e 646f 776e   (not gs.pa.down
+00042920: 6c6f 6164 5f6d 6564 6961 293a 0a20 2020  load_media):.   
+00042930: 2020 2020 2074 203d 2028 0a20 2020 2020       t = (.     
+00042940: 2020 2020 2020 2022 4966 202d 2d64 6f77         "If --dow
+00042950: 6e6c 6f61 642d 6d65 6469 6120 6973 206e  nload-media is n
+00042960: 6f74 2075 7365 642c 2022 0a20 2020 2020  ot used, ".     
+00042970: 2020 2020 2020 2022 7468 656e 202d 2d64         "then --d
+00042980: 6f77 6e6c 6f61 642d 6d65 6469 612d 6e61  ownload-media-na
+00042990: 6d65 206d 7573 7420 6e6f 7420 6265 2075  me must not be u
+000429a0: 7365 6420 220a 2020 2020 2020 2020 2020  sed ".          
+000429b0: 2020 2265 6974 6865 722e 2053 7065 6369    "either. Speci
+000429c0: 6679 202d 2d64 6f77 6e6c 6f61 642d 6d65  fy --download-me
+000429d0: 6469 6120 220a 2020 2020 2020 2020 2020  dia ".          
+000429e0: 2020 6622 616e 6420 7275 6e20 7072 6f67    f"and run prog
+000429f0: 7261 6d20 6167 6169 6e2e 2028 7b67 732e  ram again. ({gs.
+00042a00: 7061 2e64 6f77 6e6c 6f61 645f 6d65 6469  pa.download_medi
+00042a10: 615f 6e61 6d65 7d29 220a 2020 2020 2020  a_name})".      
+00042a20: 2020 290a 2020 2020 656c 6966 2067 732e    ).    elif gs.
+00042a30: 7061 2e64 6f77 6e6c 6f61 645f 6d65 6469  pa.download_medi
+00042a40: 6120 616e 6420 6773 2e70 612e 646f 776e  a and gs.pa.down
+00042a50: 6c6f 6164 5f6d 6564 6961 5f6e 616d 6520  load_media_name 
+00042a60: 6e6f 7420 696e 2028 0a20 2020 2020 2020  not in (.       
+00042a70: 204d 4544 4941 5f4e 414d 455f 534f 5552   MEDIA_NAME_SOUR
+00042a80: 4345 2c0a 2020 2020 2020 2020 4d45 4449  CE,.        MEDI
+00042a90: 415f 4e41 4d45 5f43 4c45 414e 2c0a 2020  A_NAME_CLEAN,.  
+00042aa0: 2020 2020 2020 4d45 4449 415f 4e41 4d45        MEDIA_NAME
+00042ab0: 5f45 5645 4e54 4944 2c0a 2020 2020 2020  _EVENTID,.      
+00042ac0: 2020 4d45 4449 415f 4e41 4d45 5f54 494d    MEDIA_NAME_TIM
+00042ad0: 452c 0a20 2020 2029 3a0a 2020 2020 2020  E,.    ):.      
+00042ae0: 2020 7420 3d20 280a 2020 2020 2020 2020    t = (.        
+00042af0: 2020 2020 2249 6e63 6f72 7265 6374 2076      "Incorrect v
+00042b00: 616c 7565 2067 6976 656e 2066 6f72 202d  alue given for -
+00042b10: 2d64 6f77 6e6c 6f61 642d 6d65 6469 612d  -download-media-
+00042b20: 6e61 6d65 2e20 220a 2020 2020 2020 2020  name. ".        
+00042b30: 2020 2020 6622 4f6e 6c79 2027 7b4d 4544      f"Only '{MED
+00042b40: 4941 5f4e 414d 455f 534f 5552 4345 7d27  IA_NAME_SOURCE}'
+00042b50: 2c20 277b 4d45 4449 415f 4e41 4d45 5f43  , '{MEDIA_NAME_C
+00042b60: 4c45 414e 7d27 2c20 220a 2020 2020 2020  LEAN}', ".      
+00042b70: 2020 2020 2020 6622 277b 4d45 4449 415f        f"'{MEDIA_
+00042b80: 4e41 4d45 5f45 5645 4e54 4944 7d27 2c20  NAME_EVENTID}', 
+00042b90: 277b 4d45 4449 415f 4e41 4d45 5f54 494d  '{MEDIA_NAME_TIM
+00042ba0: 457d 2720 6172 6520 616c 6c6f 7765 642e  E}' are allowed.
+00042bb0: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+00042bc0: 656c 6966 2067 732e 7061 2e6c 6973 7465  elif gs.pa.liste
+00042bd0: 6e20 3d3d 2054 4149 4c20 616e 6420 2867  n == TAIL and (g
+00042be0: 732e 7061 2e74 6169 6c20 3c3d 2030 293a  s.pa.tail <= 0):
+00042bf0: 0a20 2020 2020 2020 2074 203d 2028 0a20  .        t = (. 
+00042c00: 2020 2020 2020 2020 2020 2022 416e 2069             "An i
+00042c10: 6e74 6567 6572 2031 206f 7220 6c61 7267  nteger 1 or larg
+00042c20: 6572 206d 7573 7420 6265 2073 7065 6369  er must be speci
+00042c30: 6669 6564 2077 6974 6820 2d2d 7461 696c  fied with --tail
+00042c40: 2022 0a20 2020 2020 2020 2020 2020 2066   ".            f
+00042c50: 2228 7b67 732e 7061 2e74 6169 6c7d 292e  "({gs.pa.tail}).
+00042c60: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+00042c70: 656c 6966 2067 732e 7061 2e70 726f 7879  elif gs.pa.proxy
+00042c80: 2061 6e64 206e 6f74 2028 0a20 2020 2020   and not (.     
+00042c90: 2020 2067 732e 7061 2e70 726f 7879 2e73     gs.pa.proxy.s
+00042ca0: 7461 7274 7377 6974 6828 2268 7474 703a  tartswith("http:
+00042cb0: 2f2f 2229 0a20 2020 2020 2020 206f 7220  //").        or 
+00042cc0: 6773 2e70 612e 7072 6f78 792e 7374 6172  gs.pa.proxy.star
+00042cd0: 7473 7769 7468 2822 736f 636b 7334 3a2f  tswith("socks4:/
+00042ce0: 2f22 290a 2020 2020 2020 2020 6f72 2067  /").        or g
+00042cf0: 732e 7061 2e70 726f 7879 2e73 7461 7274  s.pa.proxy.start
+00042d00: 7377 6974 6828 2273 6f63 6b73 353a 2f2f  swith("socks5://
+00042d10: 2229 0a20 2020 2029 3a0a 2020 2020 2020  ").    ):.      
+00042d20: 2020 7420 3d20 280a 2020 2020 2020 2020    t = (.        
+00042d30: 2020 2020 2250 726f 7879 2069 7320 6e6f      "Proxy is no
+00042d40: 7420 636f 7272 6563 742e 2050 726f 7879  t correct. Proxy
+00042d50: 2073 686f 756c 6420 7374 6172 7420 7769   should start wi
+00042d60: 7468 2022 0a20 2020 2020 2020 2020 2020  th ".           
+00042d70: 2027 2268 7474 703a 2f2f 222c 2022 736f   '"http://", "so
+00042d80: 636b 7334 3a2f 2f22 206f 7220 2273 6f63  cks4://" or "soc
+00042d90: 6b73 353a 2f2f 222e 2027 0a20 2020 2020  ks5://". '.     
+00042da0: 2020 2020 2020 2066 2720 596f 7572 2070         f' Your p
+00042db0: 726f 7879 2069 7320 7365 7420 746f 2022  roxy is set to "
+00042dc0: 7b67 732e 7061 2e70 726f 7879 7d22 2e27  {gs.pa.proxy}".'
+00042dd0: 0a20 2020 2020 2020 2029 0a20 2020 2065  .        ).    e
+00042de0: 6c69 6620 5354 4449 4e5f 544f 5441 4c20  lif STDIN_TOTAL 
+00042df0: 3e20 313a 0a20 2020 2020 2020 2074 203d  > 1:.        t =
+00042e00: 2028 0a20 2020 2020 2020 2020 2020 2027   (.            '
+00042e10: 5468 6520 6368 6172 6163 7465 7220 222d  The character "-
+00042e20: 2220 6973 2075 7365 6420 6d6f 7265 2074  " is used more t
+00042e30: 6861 6e20 6f6e 6365 2027 0a20 2020 2020  han once '.     
+00042e40: 2020 2020 2020 2027 746f 2072 6570 7265         'to repre
+00042e50: 7365 6e74 2022 7374 6469 6e22 2066 6f72  sent "stdin" for
+00042e60: 2070 6970 696e 6720 696e 666f 726d 6174   piping informat
+00042e70: 696f 6e20 270a 2020 2020 2020 2020 2020  ion '.          
+00042e80: 2020 6627 696e 746f 2022 7b50 524f 475f    f'into "{PROG_
+00042e90: 5749 5448 4f55 545f 4558 547d 222e 2053  WITHOUT_EXT}". S
+00042ea0: 7464 696e 2070 6970 6520 6361 6e20 270a  tdin pipe can '.
+00042eb0: 2020 2020 2020 2020 2020 2020 2262 6520              "be 
+00042ec0: 7573 6564 2061 7420 6d6f 7374 206f 6e63  used at most onc
+00042ed0: 652e 220a 2020 2020 2020 2020 290a 2020  e.".        ).  
+00042ee0: 2020 656c 6966 2067 732e 7061 2e6e 6f5f    elif gs.pa.no_
+00042ef0: 7373 6c20 616e 6420 6773 2e70 612e 7373  ssl and gs.pa.ss
+00042f00: 6c5f 6365 7274 6966 6963 6174 6520 213d  l_certificate !=
+00042f10: 2053 534c 5f43 4552 5449 4649 4341 5445   SSL_CERTIFICATE
+00042f20: 5f44 4546 4155 4c54 3a0a 2020 2020 2020  _DEFAULT:.      
+00042f30: 2020 7420 3d20 280a 2020 2020 2020 2020    t = (.        
+00042f40: 2020 2020 224f 7074 696f 6e73 202d 2d6e      "Options --n
+00042f50: 6f2d 7373 6c20 616e 6420 2d2d 7373 6c2d  o-ssl and --ssl-
+00042f60: 6365 7274 6966 6963 6174 6520 6361 6e6e  certificate cann
+00042f70: 6f74 2062 6520 7573 6564 2022 0a20 2020  ot be used ".   
+00042f80: 2020 2020 2020 2020 2022 746f 6765 7468           "togeth
+00042f90: 6572 2e20 5573 6520 6f6e 6520 6f72 2074  er. Use one or t
+00042fa0: 6865 206f 7468 6572 2e22 0a20 2020 2020  he other.".     
+00042fb0: 2020 2029 0a20 2020 2065 6c73 653a 0a20     ).    else:. 
+00042fc0: 2020 2020 2020 2069 6620 6773 2e70 612e         if gs.pa.
+00042fd0: 7379 6e63 2069 7320 4e6f 6e65 3a0a 2020  sync is None:.  
+00042fe0: 2020 2020 2020 2020 2020 6773 2e70 612e            gs.pa.
+00042ff0: 7379 6e63 203d 2053 594e 435f 4445 4641  sync = SYNC_DEFA
+00043000: 554c 540a 2020 2020 2020 2020 6773 2e6c  ULT.        gs.l
+00043010: 6f67 2e64 6562 7567 2866 224f 7074 696f  og.debug(f"Optio
+00043020: 6e20 2d2d 7379 6e63 2069 7320 7365 7420  n --sync is set 
+00043030: 746f 207b 6773 2e70 612e 7379 6e63 7d2e  to {gs.pa.sync}.
+00043040: 2229 0a20 2020 2020 2020 2067 732e 6c6f  ").        gs.lo
+00043050: 672e 6465 6275 6728 2241 6c6c 2061 7267  g.debug("All arg
+00043060: 756d 656e 7473 2061 7265 2076 616c 6964  uments are valid
+00043070: 2e20 416c 6c20 6368 6563 6b73 2070 6173  . All checks pas
+00043080: 7365 642e 2229 0a20 2020 2020 2020 2072  sed.").        r
+00043090: 6574 7572 6e20 2023 2061 6c6c 204f 4b0a  eturn  # all OK.
+000430a0: 2020 2020 2320 6773 2e65 7272 5f63 6f75      # gs.err_cou
+000430b0: 6e74 202b 3d20 3120 2320 646f 206e 6f74  nt += 1 # do not
+000430c0: 2069 6e63 7265 6d65 6e74 2066 6f72 204d   increment for M
+000430d0: 6174 7269 7843 6f6d 6d61 6e64 6572 4572  atrixCommanderEr
+000430e0: 726f 720a 2020 2020 7261 6973 6520 4d61  ror.    raise Ma
+000430f0: 7472 6978 436f 6d6d 616e 6465 7245 7272  trixCommanderErr
+00043100: 6f72 2822 4532 3430 3a20 2220 2b20 7429  or("E240: " + t)
+00043110: 2066 726f 6d20 4e6f 6e65 0a0a 0a63 6c61   from None...cla
+00043120: 7373 2063 6f6c 6f72 733a 0a20 2020 2022  ss colors:.    "
+00043130: 2222 436f 6c6f 7273 2063 6c61 7373 2e0a  ""Colors class..
+00043140: 0a20 2020 2072 6573 6574 2061 6c6c 2063  .    reset all c
+00043150: 6f6c 6f72 7320 7769 7468 2063 6f6c 6f72  olors with color
+00043160: 732e 7265 7365 742e 0a20 2020 2032 2073  s.reset..    2 s
+00043170: 7562 2063 6c61 7373 6573 3a20 6667 2066  ub classes: fg f
+00043180: 6f72 2066 6f72 6567 726f 756e 6420 616e  or foreground an
+00043190: 6420 6267 2066 6f72 2062 6163 6b67 726f  d bg for backgro
+000431a0: 756e 643b 0a20 2020 2075 7365 2061 7320  und;.    use as 
+000431b0: 636f 6c6f 7273 2e73 7562 636c 6173 732e  colors.subclass.
+000431c0: 636f 6c6f 726e 616d 652e 0a20 2020 2069  colorname..    i
+000431d0: 2e65 2e20 636f 6c6f 7273 2e66 672e 7265  .e. colors.fg.re
+000431e0: 6420 6f72 2063 6f6c 6f72 732e 6267 2e67  d or colors.bg.g
+000431f0: 7265 656e 0a20 2020 2061 6c73 6f2c 2074  reen.    also, t
+00043200: 6865 2067 656e 6572 6963 2062 6f6c 642c  he generic bold,
+00043210: 2064 6973 6162 6c65 2c20 756e 6465 726c   disable, underl
+00043220: 696e 652c 2072 6576 6572 7365 2c20 7374  ine, reverse, st
+00043230: 7269 6b65 2074 6872 6f75 6768 2c0a 2020  rike through,.  
+00043240: 2020 616e 6420 696e 7669 7369 626c 6520    and invisible 
+00043250: 776f 726b 2077 6974 6820 7468 6520 6d61  work with the ma
+00043260: 696e 2063 6c61 7373 2069 2e65 2e20 636f  in class i.e. co
+00043270: 6c6f 7273 2e62 6f6c 640a 0a20 2020 2075  lors.bold..    u
+00043280: 7365 206c 696b 6520 7468 6973 3a0a 2020  se like this:.  
+00043290: 2020 7072 696e 7428 636f 6c6f 7273 2e62    print(colors.b
+000432a0: 672e 6772 6565 6e2c 2022 534b 6b22 2c20  g.green, "SKk", 
+000432b0: 636f 6c6f 7273 2e66 672e 7265 642c 2022  colors.fg.red, "
+000432c0: 416d 6172 7479 6122 290a 2020 2020 7072  Amartya").    pr
+000432d0: 696e 7428 636f 6c6f 7273 2e62 672e 6c69  int(colors.bg.li
+000432e0: 6768 7467 7265 792c 2022 534b 6b22 2c20  ghtgrey, "SKk", 
+000432f0: 636f 6c6f 7273 2e66 672e 7265 642c 2022  colors.fg.red, "
+00043300: 416d 6172 7479 6122 290a 2020 2020 2222  Amartya").    ""
+00043310: 220a 0a20 2020 2072 6573 6574 203d 2022  "..    reset = "
+00043320: 5c30 3333 5b30 6d22 0a20 2020 2062 6f6c  \033[0m".    bol
+00043330: 6420 3d20 225c 3033 335b 3031 6d22 0a20  d = "\033[01m". 
+00043340: 2020 2064 6973 6162 6c65 203d 2022 5c30     disable = "\0
+00043350: 3333 5b30 326d 220a 2020 2020 696e 7665  33[02m".    inve
+00043360: 7273 6520 3d20 225c 3033 335b 3033 6d22  rse = "\033[03m"
+00043370: 0a20 2020 2075 6e64 6572 6c69 6e65 203d  .    underline =
+00043380: 2022 5c30 3333 5b30 346d 220a 2020 2020   "\033[04m".    
+00043390: 626c 696e 6b20 3d20 225c 3033 335b 3035  blink = "\033[05
+000433a0: 6d22 0a20 2020 2062 6c69 6e6b 3220 3d20  m".    blink2 = 
+000433b0: 225c 3033 335b 3036 6d22 0a20 2020 2072  "\033[06m".    r
+000433c0: 6576 6572 7365 203d 2022 5c30 3333 5b30  everse = "\033[0
+000433d0: 376d 220a 2020 2020 696e 7669 7369 626c  7m".    invisibl
+000433e0: 6520 3d20 225c 3033 335b 3038 6d22 0a20  e = "\033[08m". 
+000433f0: 2020 2073 7472 696b 6574 6872 6f75 6768     strikethrough
+00043400: 203d 2022 5c30 3333 5b30 396d 220a 0a20   = "\033[09m".. 
+00043410: 2020 2063 6c61 7373 2066 673a 0a20 2020     class fg:.   
+00043420: 2020 2020 2062 6c61 636b 203d 2022 5c30       black = "\0
+00043430: 3333 5b33 306d 220a 2020 2020 2020 2020  33[30m".        
+00043440: 7265 6420 3d20 225c 3033 335b 3331 6d22  red = "\033[31m"
+00043450: 0a20 2020 2020 2020 2067 7265 656e 203d  .        green =
+00043460: 2022 5c30 3333 5b33 326d 220a 2020 2020   "\033[32m".    
+00043470: 2020 2020 6f72 616e 6765 203d 2022 5c30      orange = "\0
+00043480: 3333 5b33 336d 220a 2020 2020 2020 2020  33[33m".        
+00043490: 626c 7565 203d 2022 5c30 3333 5b33 346d  blue = "\033[34m
+000434a0: 220a 2020 2020 2020 2020 7075 7270 6c65  ".        purple
+000434b0: 203d 2022 5c30 3333 5b33 356d 220a 2020   = "\033[35m".  
+000434c0: 2020 2020 2020 6379 616e 203d 2022 5c30        cyan = "\0
+000434d0: 3333 5b33 366d 220a 2020 2020 2020 2020  33[36m".        
+000434e0: 6c69 6768 7467 7265 7920 3d20 225c 3033  lightgrey = "\03
+000434f0: 335b 3337 6d22 0a20 2020 2020 2020 2064  3[37m".        d
+00043500: 6172 6b67 7265 7920 3d20 225c 3033 335b  arkgrey = "\033[
+00043510: 3930 6d22 0a20 2020 2020 2020 206c 6967  90m".        lig
+00043520: 6874 7265 6420 3d20 225c 3033 335b 3931  htred = "\033[91
+00043530: 6d22 0a20 2020 2020 2020 206c 6967 6874  m".        light
+00043540: 6772 6565 6e20 3d20 225c 3033 335b 3932  green = "\033[92
+00043550: 6d22 0a20 2020 2020 2020 2079 656c 6c6f  m".        yello
+00043560: 7720 3d20 225c 3033 335b 3933 6d22 0a20  w = "\033[93m". 
+00043570: 2020 2020 2020 206c 6967 6874 626c 7565         lightblue
+00043580: 203d 2022 5c30 3333 5b39 346d 220a 2020   = "\033[94m".  
+00043590: 2020 2020 2020 7069 6e6b 203d 2022 5c30        pink = "\0
+000435a0: 3333 5b39 356d 220a 2020 2020 2020 2020  33[95m".        
+000435b0: 6c69 6768 7463 7961 6e20 3d20 225c 3033  lightcyan = "\03
+000435c0: 335b 3936 6d22 0a0a 2020 2020 636c 6173  3[96m"..    clas
+000435d0: 7320 6267 3a0a 2020 2020 2020 2020 626c  s bg:.        bl
+000435e0: 6163 6b20 3d20 225c 3033 335b 3430 6d22  ack = "\033[40m"
+000435f0: 0a20 2020 2020 2020 2072 6564 203d 2022  .        red = "
+00043600: 5c30 3333 5b34 316d 220a 2020 2020 2020  \033[41m".      
+00043610: 2020 6772 6565 6e20 3d20 225c 3033 335b    green = "\033[
+00043620: 3432 6d22 0a20 2020 2020 2020 206f 7261  42m".        ora
+00043630: 6e67 6520 3d20 225c 3033 335b 3433 6d22  nge = "\033[43m"
+00043640: 0a20 2020 2020 2020 2062 6c75 6520 3d20  .        blue = 
+00043650: 225c 3033 335b 3434 6d22 0a20 2020 2020  "\033[44m".     
+00043660: 2020 2070 7572 706c 6520 3d20 225c 3033     purple = "\03
+00043670: 335b 3435 6d22 0a20 2020 2020 2020 2063  3[45m".        c
+00043680: 7961 6e20 3d20 225c 3033 335b 3436 6d22  yan = "\033[46m"
+00043690: 0a20 2020 2020 2020 206c 6967 6874 6772  .        lightgr
+000436a0: 6579 203d 2022 5c30 3333 5b34 376d 220a  ey = "\033[47m".
+000436b0: 0a0a 2320 6163 636f 7264 696e 6720 746f  ..# according to
+000436c0: 206c 696e 7465 723a 2066 756e 6374 696f   linter: functio
+000436d0: 6e20 6973 2074 6f6f 2063 6f6d 706c 6578  n is too complex
+000436e0: 2c20 4339 3031 0a64 6566 206d 6169 6e5f  , C901.def main_
+000436f0: 696e 6e65 7228 0a20 2020 2061 7267 763a  inner(.    argv:
+00043700: 2055 6e69 6f6e 5b4e 6f6e 652c 206c 6973   Union[None, lis
+00043710: 745d 203d 204e 6f6e 650a 2920 2d3e 204e  t] = None.) -> N
+00043720: 6f6e 653a 2020 2320 6e6f 7161 3a20 4339  one:  # noqa: C9
+00043730: 3031 2023 2069 676e 6f72 6520 6d63 6361  01 # ignore mcca
+00043740: 6265 2069 662d 746f 6f2d 636f 6d70 6c65  be if-too-comple
+00043750: 780a 2020 2020 2222 2252 756e 2074 6865  x.    """Run the
+00043760: 2070 726f 6772 616d 2e0a 0a20 2020 2046   program...    F
+00043770: 756e 6374 696f 6e20 7369 676e 6174 7572  unction signatur
+00043780: 6520 6964 656e 7469 6361 6c20 746f 206d  e identical to m
+00043790: 6169 6e28 292e 0a20 2020 2050 6c65 6173  ain()..    Pleas
+000437a0: 6520 7365 6520 6d61 696e 2829 2e0a 0a20  e see main()... 
+000437b0: 2020 2052 6574 7572 6e73 204e 6f6e 652e     Returns None.
+000437c0: 2052 6574 7572 6e73 206e 6f74 6869 6e67   Returns nothing
+000437d0: 2e0a 0a20 2020 2052 6169 7365 7320 6578  ...    Raises ex
+000437e0: 6365 7074 696f 6e20 6966 2061 6e20 6572  ception if an er
+000437f0: 726f 7220 6973 2064 6574 6563 7465 642e  ror is detected.
+00043800: 204d 616e 7920 6578 6365 7074 696f 6e73   Many exceptions
+00043810: 2061 7265 0a20 2020 2020 2020 2070 6f73   are.        pos
+00043820: 7369 626c 652e 204f 6e65 206f 6620 7468  sible. One of th
+00043830: 656d 2069 733a 204d 6174 7269 7843 6f6d  em is: MatrixCom
+00043840: 6d61 6e64 6572 4572 726f 722e 0a20 2020  manderError..   
+00043850: 2020 2020 2053 6574 7320 676c 6f62 616c       Sets global
+00043860: 2073 7461 7465 2074 6f20 636f 6d6d 756e   state to commun
+00043870: 6963 6174 6520 6572 726f 7273 2e0a 0a20  icate errors... 
+00043880: 2020 2022 2222 0a20 2020 2069 6620 6172     """.    if ar
+00043890: 6776 3a0a 2020 2020 2020 2020 7379 732e  gv:.        sys.
+000438a0: 6172 6776 203d 2061 7267 760a 2020 2020  argv = argv.    
+000438b0: 2320 7072 6570 6172 6520 7468 6520 676c  # prepare the gl
+000438c0: 6f62 616c 2073 7461 7465 0a20 2020 2067  obal state.    g
+000438d0: 6c6f 6261 6c20 6773 0a20 2020 2067 7320  lobal gs.    gs 
+000438e0: 3d20 476c 6f62 616c 5374 6174 6528 290a  = GlobalState().
+000438f0: 2020 2020 676c 6f62 616c 2053 4550 0a20      global SEP. 
+00043900: 2020 2023 2043 6f6e 7374 7275 6374 2074     # Construct t
+00043910: 6865 2061 7267 756d 656e 7420 7061 7273  he argument pars
+00043920: 6572 0a20 2020 2061 7020 3d20 6172 6770  er.    ap = argp
+00043930: 6172 7365 2e41 7267 756d 656e 7450 6172  arse.ArgumentPar
+00043940: 7365 7228 0a20 2020 2020 2020 2061 6464  ser(.        add
+00043950: 5f68 656c 703d 4661 6c73 652c 0a20 2020  _help=False,.   
+00043960: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
+00043970: 3d28 6622 5765 6c63 6f6d 6520 746f 207b  =(f"Welcome to {
+00043980: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+00043990: 7d2c 2061 204d 6174 7269 7820 434c 4920  }, a Matrix CLI 
+000439a0: 636c 6965 6e74 2e20 2229 2c0a 2020 2020  client. "),.    
+000439b0: 2020 2020 6570 696c 6f67 3d22 596f 7520      epilog="You 
+000439c0: 6172 6520 7275 6e6e 696e 6720 220a 2020  are running ".  
+000439d0: 2020 2020 2020 6622 7665 7273 696f 6e20        f"version 
+000439e0: 7b56 4552 5349 4f4e 4e52 7d20 7b56 4552  {VERSIONNR} {VER
+000439f0: 5349 4f4e 7d2e 2045 6e6a 6f79 2c20 7374  SION}. Enjoy, st
+00043a00: 6172 206f 6e20 4769 7468 7562 2061 6e64  ar on Github and
+00043a10: 2022 0a20 2020 2020 2020 2022 636f 6e74   ".        "cont
+00043a20: 7269 6275 7465 2062 7920 7375 626d 6974  ribute by submit
+00043a30: 7469 6e67 2061 2050 756c 6c20 5265 7175  ting a Pull Requ
+00043a40: 6573 742e 2022 0a20 2020 2020 2020 2066  est. ".        f
+00043a50: 2241 6c73 6f20 6861 7665 2061 206c 6f6f  "Also have a loo
+00043a60: 6b20 6174 207b 5052 4f47 5f57 4954 484f  k at {PROG_WITHO
+00043a70: 5554 5f45 5854 7d2d 7475 692e 2022 2c0a  UT_EXT}-tui. ",.
+00043a80: 2020 2020 290a 2020 2020 2320 2d68 2c20      ).    # -h, 
+00043a90: 7365 6520 6164 645f 6865 6c70 3d46 616c  see add_help=Fal
+00043aa0: 7365 0a20 2020 2061 702e 6164 645f 6172  se.    ap.add_ar
+00043ab0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
+00043ac0: 2320 7365 6520 7363 7269 7074 2063 7265  # see script cre
+00043ad0: 6174 6520 6865 6c70 2e68 656c 702e 7478  ate help.help.tx
+00043ae0: 740a 2020 2020 2020 2020 2320 6865 6c70  t.        # help
+00043af0: 2073 7472 696e 6720 7570 2074 6f20 6275   string up to bu
+00043b00: 7420 6578 636c 7564 696e 6720 2244 6574  t excluding "Det
+00043b10: 6169 6c73 3a3a 2220 6973 2075 7365 6420  ails::" is used 
+00043b20: 666f 720a 2020 2020 2020 2020 2320 2873  for.        # (s
+00043b30: 686f 7274 2920 602d 2d68 656c 7060 2e20  hort) `--help`. 
+00043b40: 5468 6520 6675 6c6c 2074 6578 7420 7769  The full text wi
+00043b50: 6c6c 2062 6520 7573 6564 2066 6f72 206c  ll be used for l
+00043b60: 6f6e 6720 602d 2d6d 616e 7561 6c60 2e0a  ong `--manual`..
+00043b70: 2020 2020 2020 2020 222d 2d75 7361 6765          "--usage
+00043b80: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
+00043b90: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
+00043ba0: 2020 2061 6374 696f 6e3d 2273 746f 7265     action="store
+00043bb0: 5f74 7275 6522 2c0a 2020 2020 2020 2020  _true",.        
+00043bc0: 6865 6c70 3d22 5072 696e 7420 7573 6167  help="Print usag
+00043bd0: 652e 2022 0a20 2020 2020 2020 2022 4465  e. ".        "De
+00043be0: 7461 696c 733a 3a20 5365 6520 616c 736f  tails:: See also
+00043bf0: 202d 2d68 656c 7020 666f 7220 7072 696e   --help for prin
+00043c00: 7469 6e67 2061 2062 6974 206d 6f72 6520  ting a bit more 
+00043c10: 616e 6420 2d2d 6d61 6e75 616c 2022 0a20  and --manual ". 
+00043c20: 2020 2020 2020 2022 666f 7220 7072 696e         "for prin
+00043c30: 7469 6e67 2061 206c 6f74 206d 6f72 6520  ting a lot more 
+00043c40: 6465 7461 696c 6564 2069 6e66 6f72 6d61  detailed informa
+00043c50: 7469 6f6e 2e22 2c0a 2020 2020 290a 2020  tion.",.    ).  
+00043c60: 2020 2320 2d68 2c20 7365 6520 6164 645f    # -h, see add_
+00043c70: 6865 6c70 3d46 616c 7365 0a20 2020 2061  help=False.    a
+00043c80: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
+00043c90: 2020 2020 2020 2020 222d 6822 2c0a 2020          "-h",.  
+00043ca0: 2020 2020 2020 222d 2d68 656c 7022 2c0a        "--help",.
+00043cb0: 2020 2020 2020 2020 7265 7175 6972 6564          required
+00043cc0: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00043cd0: 6163 7469 6f6e 3d22 7374 6f72 655f 7472  action="store_tr
+00043ce0: 7565 222c 0a20 2020 2020 2020 2068 656c  ue",.        hel
+00043cf0: 703d 2250 7269 6e74 2068 656c 702e 2022  p="Print help. "
+00043d00: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
+00043d10: 733a 3a20 5365 6520 616c 736f 202d 2d75  s:: See also --u
+00043d20: 7361 6765 2066 6f72 2070 7269 6e74 696e  sage for printin
+00043d30: 6720 6576 656e 206c 6573 7320 696e 666f  g even less info
+00043d40: 726d 6174 696f 6e2c 2022 0a20 2020 2020  rmation, ".     
+00043d50: 2020 2022 616e 6420 2d2d 6d61 6e75 616c     "and --manual
+00043d60: 2066 6f72 2070 7269 6e74 696e 6720 6d6f   for printing mo
+00043d70: 7265 2064 6574 6169 6c65 6420 696e 666f  re detailed info
+00043d80: 726d 6174 696f 6e2e 222c 0a20 2020 2029  rmation.",.    )
+00043d90: 0a20 2020 2023 2073 6565 202d 682c 2073  .    # see -h, s
+00043da0: 6565 2061 6464 5f68 656c 703d 4661 6c73  ee add_help=Fals
+00043db0: 650a 2020 2020 6170 2e61 6464 5f61 7267  e.    ap.add_arg
+00043dc0: 756d 656e 7428 0a20 2020 2020 2020 2022  ument(.        "
+00043dd0: 2d2d 6d61 6e75 616c 222c 0a20 2020 2020  --manual",.     
+00043de0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+00043df0: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
+00043e00: 6e3d 2273 746f 7265 5f74 7275 6522 2c0a  n="store_true",.
+00043e10: 2020 2020 2020 2020 6865 6c70 3d22 5072          help="Pr
+00043e20: 696e 7420 6d61 6e75 616c 2e20 220a 2020  int manual. ".  
+00043e30: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+00043e40: 2053 6565 2061 6c73 6f20 2d2d 7573 6167   See also --usag
+00043e50: 6520 666f 7220 7072 696e 7469 6e67 2074  e for printing t
+00043e60: 6865 2061 6273 6f6c 7574 6520 6d69 6e69  he absolute mini
+00043e70: 6d75 6d2c 2022 0a20 2020 2020 2020 2022  mum, ".        "
+00043e80: 616e 6420 2d2d 6865 6c70 2066 6f72 2070  and --help for p
+00043e90: 7269 6e74 696e 6720 6c65 7373 2e22 2c0a  rinting less.",.
+00043ea0: 2020 2020 290a 2020 2020 2320 7365 6520      ).    # see 
+00043eb0: 2d68 2c20 7365 6520 6164 645f 6865 6c70  -h, see add_help
+00043ec0: 3d46 616c 7365 0a20 2020 2061 702e 6164  =False.    ap.ad
+00043ed0: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+00043ee0: 2020 2020 222d 2d72 6561 646d 6522 2c0a      "--readme",.
+00043ef0: 2020 2020 2020 2020 7265 7175 6972 6564          required
+00043f00: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00043f10: 6163 7469 6f6e 3d22 7374 6f72 655f 7472  action="store_tr
+00043f20: 7565 222c 0a20 2020 2020 2020 2068 656c  ue",.        hel
+00043f30: 703d 2250 7269 6e74 2052 4541 444d 452e  p="Print README.
+00043f40: 6d64 2066 696c 652e 2022 0a20 2020 2020  md file. ".     
+00043f50: 2020 2022 4465 7461 696c 733a 3a20 5472     "Details:: Tr
+00043f60: 6965 7320 746f 2070 7269 6e74 2074 6865  ies to print the
+00043f70: 206c 6f63 616c 2052 4541 444d 452e 6d64   local README.md
+00043f80: 2066 696c 6520 6672 6f6d 2069 6e73 7461   file from insta
+00043f90: 6c6c 6174 696f 6e2e 2022 0a20 2020 2020  llation. ".     
+00043fa0: 2020 2022 4966 206e 6f74 2066 6f75 6e64     "If not found
+00043fb0: 2069 7420 7769 6c6c 2067 6574 2074 6865   it will get the
+00043fc0: 2052 4541 444d 452e 6d64 2066 696c 6520   README.md file 
+00043fd0: 6672 6f6d 2067 6974 6875 622e 636f 6d20  from github.com 
+00043fe0: 616e 6420 220a 2020 2020 2020 2020 2270  and ".        "p
+00043ff0: 7269 6e74 2069 742e 2053 6565 2061 6c73  rint it. See als
+00044000: 6f20 2d2d 7573 6167 652c 202d 2d68 656c  o --usage, --hel
+00044010: 702c 2061 6e64 202d 2d6d 616e 7561 6c2e  p, and --manual.
+00044020: 222c 0a20 2020 2029 0a20 2020 2023 2041  ",.    ).    # A
+00044030: 6464 2074 6865 2061 7267 756d 656e 7473  dd the arguments
+00044040: 2074 6f20 7468 6520 7061 7273 6572 0a20   to the parser. 
+00044050: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
+00044060: 6e74 280a 2020 2020 2020 2020 222d 6422  nt(.        "-d"
+00044070: 2c0a 2020 2020 2020 2020 222d 2d64 6562  ,.        "--deb
+00044080: 7567 222c 0a20 2020 2020 2020 2061 6374  ug",.        act
+00044090: 696f 6e3d 2263 6f75 6e74 222c 0a20 2020  ion="count",.   
+000440a0: 2020 2020 2064 6566 6175 6c74 3d30 2c0a       default=0,.
+000440b0: 2020 2020 2020 2020 6865 6c70 3d22 5072          help="Pr
+000440c0: 696e 7420 6465 6275 6720 696e 666f 726d  int debug inform
+000440d0: 6174 696f 6e2e 2022 0a20 2020 2020 2020  ation. ".       
+000440e0: 2022 4465 7461 696c 733a 3a20 4966 2075   "Details:: If u
+000440f0: 7365 6420 6f6e 6365 2c20 6f6e 6c79 2074  sed once, only t
+00044100: 6865 206c 6f67 206c 6576 656c 206f 6620  he log level of 
+00044110: 220a 2020 2020 2020 2020 6622 7b50 524f  ".        f"{PRO
+00044120: 475f 5749 5448 4f55 545f 4558 547d 2069  G_WITHOUT_EXT} i
+00044130: 7320 7365 7420 746f 2044 4542 5547 2e20  s set to DEBUG. 
+00044140: 220a 2020 2020 2020 2020 2749 6620 7573  ".        'If us
+00044150: 6564 2074 7769 6365 2028 222d 6420 2d64  ed twice ("-d -d
+00044160: 2220 6f72 2022 2d64 6422 2920 7468 656e  " or "-dd") then
+00044170: 2027 0a20 2020 2020 2020 2066 226c 6f67   '.        f"log
+00044180: 206c 6576 656c 7320 6f66 2062 6f74 6820   levels of both 
+00044190: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
+000441a0: 547d 2061 6e64 2075 6e64 6572 6c79 696e  T} and underlyin
+000441b0: 6720 6d6f 6475 6c65 7320 6172 6520 220a  g modules are ".
+000441c0: 2020 2020 2020 2020 2773 6574 2074 6f20          'set to 
+000441d0: 4445 4255 472e 2022 2d64 2220 6973 2061  DEBUG. "-d" is a
+000441e0: 2073 686f 7274 6375 7420 666f 7220 222d   shortcut for "-
+000441f0: 2d6c 6f67 2d6c 6576 656c 2044 4542 5547  -log-level DEBUG
+00044200: 222e 2027 0a20 2020 2020 2020 2027 5365  ". '.        'Se
+00044210: 6520 616c 736f 202d 2d6c 6f67 2d6c 6576  e also --log-lev
+00044220: 656c 2e20 222d 6422 2074 616b 6573 2070  el. "-d" takes p
+00044230: 7265 6365 6465 6e63 6520 6f76 6572 2022  recedence over "
+00044240: 2d2d 6c6f 672d 6c65 7665 6c22 2e20 270a  --log-level". '.
+00044250: 2020 2020 2020 2020 2741 6464 6974 696f          'Additio
+00044260: 6e61 6c6c 792c 2068 6176 6520 6120 6c6f  nally, have a lo
+00044270: 6f6b 2061 6c73 6f20 6174 2074 6865 206f  ok also at the o
+00044280: 7074 696f 6e20 222d 2d76 6572 626f 7365  ption "--verbose
+00044290: 222e 2027 2c0a 2020 2020 290a 2020 2020  ". ',.    ).    
+000442a0: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
+000442b0: 0a20 2020 2020 2020 2022 2d2d 6c6f 672d  .        "--log-
+000442c0: 6c65 7665 6c22 2c0a 2020 2020 2020 2020  level",.        
+000442d0: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
+000442e0: 2020 2020 2020 2020 6163 7469 6f6e 3d22          action="
+000442f0: 6578 7465 6e64 222c 0a20 2020 2020 2020  extend",.       
+00044300: 206e 6172 6773 3d22 2b22 2c0a 2020 2020   nargs="+",.    
+00044310: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
+00044320: 2020 2020 2020 6d65 7461 7661 723d 2822        metavar=("
+00044330: 4445 4255 477c 494e 464f 7c57 4152 4e49  DEBUG|INFO|WARNI
+00044340: 4e47 7c45 5252 4f52 7c43 5249 5449 4341  NG|ERROR|CRITICA
+00044350: 4c22 292c 0a20 2020 2020 2020 2068 656c  L"),.        hel
+00044360: 703d 2253 6574 2074 6865 206c 6f67 206c  p="Set the log l
+00044370: 6576 656c 2873 292e 2022 0a20 2020 2020  evel(s). ".     
+00044380: 2020 2022 4465 7461 696c 733a 3a20 506f     "Details:: Po
+00044390: 7373 6962 6c65 2076 616c 7565 7320 6172  ssible values ar
+000443a0: 6520 220a 2020 2020 2020 2020 2722 4445  e ".        '"DE
+000443b0: 4255 4722 2c20 2249 4e46 4f22 2c20 2257  BUG", "INFO", "W
+000443c0: 4152 4e49 4e47 222c 2022 4552 524f 5222  ARNING", "ERROR"
+000443d0: 2c20 616e 6420 2243 5249 5449 4341 4c22  , and "CRITICAL"
+000443e0: 2e20 270a 2020 2020 2020 2020 2249 6620  . '.        "If 
+000443f0: 2d2d 6c6f 675f 6c65 7665 6c20 6973 2075  --log_level is u
+00044400: 7365 6420 7769 7468 206f 6e65 206c 6576  sed with one lev
+00044410: 656c 2061 7267 756d 656e 742c 206f 6e6c  el argument, onl
+00044420: 7920 7468 6520 6c6f 6720 6c65 7665 6c20  y the log level 
+00044430: 220a 2020 2020 2020 2020 6622 6f66 207b  ".        f"of {
+00044440: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+00044450: 7d20 6973 2073 6574 2074 6f20 7468 6520  } is set to the 
+00044460: 7370 6563 6966 6965 6420 7661 6c75 652e  specified value.
+00044470: 2022 0a20 2020 2020 2020 2022 4966 202d   ".        "If -
+00044480: 2d6c 6f67 5f6c 6576 656c 2069 7320 7573  -log_level is us
+00044490: 6564 2077 6974 6820 7477 6f20 6c65 7665  ed with two leve
+000444a0: 6c20 6172 6775 6d65 6e74 2022 0a20 2020  l argument ".   
+000444b0: 2020 2020 2027 2865 2e67 2e20 222d 2d6c       '(e.g. "--l
+000444c0: 6f67 2d6c 6576 656c 2057 4152 4e49 4e47  og-level WARNING
+000444d0: 2045 5252 4f52 2229 2074 6865 6e20 270a   ERROR") then '.
+000444e0: 2020 2020 2020 2020 6622 6c6f 6720 6c65          f"log le
+000444f0: 7665 6c73 206f 6620 626f 7468 207b 5052  vels of both {PR
+00044500: 4f47 5f57 4954 484f 5554 5f45 5854 7d20  OG_WITHOUT_EXT} 
+00044510: 616e 6420 756e 6465 726c 7969 6e67 206d  and underlying m
+00044520: 6f64 756c 6573 2061 7265 2022 0a20 2020  odules are ".   
+00044530: 2020 2020 2022 7365 7420 746f 2074 6865       "set to the
+00044540: 2073 7065 6369 6669 6564 2076 616c 7565   specified value
+00044550: 732e 2022 0a20 2020 2020 2020 2022 5365  s. ".        "Se
+00044560: 6520 616c 736f 202d 2d64 6562 7567 2e22  e also --debug."
+00044570: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+00044580: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+00044590: 2020 2020 2022 2d2d 7665 7262 6f73 6522       "--verbose"
+000445a0: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
+000445b0: 3d22 636f 756e 7422 2c0a 2020 2020 2020  ="count",.      
+000445c0: 2020 6465 6661 756c 743d 302c 0a20 2020    default=0,.   
+000445d0: 2020 2020 2068 656c 703d 2253 6574 2074       help="Set t
+000445e0: 6865 2076 6572 626f 7369 7479 206c 6576  he verbosity lev
+000445f0: 656c 2e20 220a 2020 2020 2020 2020 2244  el. ".        "D
+00044600: 6574 6169 6c73 3a3a 2049 6620 6e6f 7420  etails:: If not 
+00044610: 7573 6564 2c20 7468 656e 2076 6572 626f  used, then verbo
+00044620: 7369 7479 2077 696c 6c20 6265 2022 0a20  sity will be ". 
+00044630: 2020 2020 2020 2022 7365 7420 746f 206c         "set to l
+00044640: 6f77 2e20 4966 2075 7365 6420 6f6e 6365  ow. If used once
+00044650: 2c20 7665 7262 6f73 6974 7920 7769 6c6c  , verbosity will
+00044660: 2062 6520 6869 6768 2e20 220a 2020 2020   be high. ".    
+00044670: 2020 2020 2249 6620 7573 6564 206d 6f72      "If used mor
+00044680: 6520 7468 616e 206f 6e63 652c 2076 6572  e than once, ver
+00044690: 626f 7369 7479 2077 696c 6c20 6265 2076  bosity will be v
+000446a0: 6572 7920 6869 6768 2e20 220a 2020 2020  ery high. ".    
+000446b0: 2020 2020 2256 6572 626f 7369 7479 206f      "Verbosity o
+000446c0: 6e6c 7920 6166 6665 6374 7320 7468 6520  nly affects the 
+000446d0: 6465 6275 6720 696e 666f 726d 6174 696f  debug informatio
+000446e0: 6e2e 2022 0a20 2020 2020 2020 2022 536f  n. ".        "So
+000446f0: 2c20 6966 2027 2d2d 6465 6275 6727 2069  , if '--debug' i
+00044700: 7320 6e6f 7420 7573 6564 2074 6865 6e20  s not used then 
+00044710: 272d 2d76 6572 626f 7365 2720 7769 6c6c  '--verbose' will
+00044720: 2062 6520 6967 6e6f 7265 642e 222c 0a20   be ignored.",. 
+00044730: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
+00044740: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+00044750: 2020 222d 2d6c 6f67 696e 222c 0a20 2020    "--login",.   
+00044760: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+00044770: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
+00044780: 653d 7374 722c 2020 2320 6c6f 6769 6e20  e=str,  # login 
+00044790: 6d65 7468 6f64 3a20 7061 7373 776f 7264  method: password
+000447a0: 2c20 7373 6f2c 2028 6163 6365 7373 2d74  , sso, (access-t
+000447b0: 6f6b 656e 290a 2020 2020 2020 2020 6d65  oken).        me
+000447c0: 7461 7661 723d 2250 4153 5357 4f52 447c  tavar="PASSWORD|
+000447d0: 5353 4f22 2c0a 2020 2020 2020 2020 6865  SSO",.        he
+000447e0: 6c70 3d22 4c6f 6769 6e20 746f 2061 6e64  lp="Login to and
+000447f0: 2061 7574 6865 6e74 6963 6174 6520 7769   authenticate wi
+00044800: 7468 2074 6865 204d 6174 7269 7820 686f  th the Matrix ho
+00044810: 6d65 7365 7276 6572 2e20 220a 2020 2020  meserver. ".    
+00044820: 2020 2020 2244 6574 6169 6c73 3a3a 2054      "Details:: T
+00044830: 6869 7320 7265 7175 6972 6573 2065 7861  his requires exa
+00044840: 6374 6c79 206f 6e65 2061 7267 756d 656e  ctly one argumen
+00044850: 742c 2074 6865 206c 6f67 696e 206d 6574  t, the login met
+00044860: 686f 642e 2022 0a20 2020 2020 2020 2022  hod. ".        "
+00044870: 4375 7272 656e 746c 7920 7477 6f20 6368  Currently two ch
+00044880: 6f69 6365 7320 6172 6520 6f66 6665 7265  oices are offere
+00044890: 643a 2027 7061 7373 776f 7264 2720 616e  d: 'password' an
+000448a0: 6420 2773 736f 272e 2022 0a20 2020 2020  d 'sso'. ".     
+000448b0: 2020 2022 5072 6f76 6964 6520 6f6e 6520     "Provide one 
+000448c0: 6f66 2074 6865 7365 206d 6574 686f 6473  of these methods
+000448d0: 2e20 220a 2020 2020 2020 2020 2249 6620  . ".        "If 
+000448e0: 796f 7520 6861 7665 2063 686f 7365 6e20  you have chosen 
+000448f0: 2770 6173 7377 6f72 6427 2c20 220a 2020  'password', ".  
+00044900: 2020 2020 2020 2279 6f75 2077 696c 6c20        "you will 
+00044910: 6175 7468 656e 7469 6361 7465 2074 6872  authenticate thr
+00044920: 6f75 6768 2079 6f75 7220 6163 636f 756e  ough your accoun
+00044930: 7420 7061 7373 776f 7264 2e20 596f 7520  t password. You 
+00044940: 6361 6e20 220a 2020 2020 2020 2020 226f  can ".        "o
+00044950: 7074 696f 6e61 6c6c 7920 7072 6f76 6964  ptionally provid
+00044960: 6520 7468 6573 6520 6164 6469 7469 6f6e  e these addition
+00044970: 616c 2061 7267 756d 656e 7473 3a20 220a  al arguments: ".
+00044980: 2020 2020 2020 2020 222d 2d68 6f6d 6573          "--homes
+00044990: 6572 7665 7220 746f 2073 7065 6369 6679  erver to specify
+000449a0: 2074 6865 204d 6174 7269 7820 686f 6d65   the Matrix home
+000449b0: 7365 7276 6572 2c20 220a 2020 2020 2020  server, ".      
+000449c0: 2020 222d 2d75 7365 722d 6c6f 6769 6e20    "--user-login 
+000449d0: 746f 2073 7065 6369 6679 2074 6865 206c  to specify the l
+000449e0: 6f67 2069 6e20 7573 6572 2069 642c 2022  og in user id, "
+000449f0: 0a20 2020 2020 2020 2022 2d2d 7061 7373  .        "--pass
+00044a00: 776f 7264 2074 6f20 7370 6563 6966 7920  word to specify 
+00044a10: 7468 6520 7061 7373 776f 7264 2c20 220a  the password, ".
+00044a20: 2020 2020 2020 2020 222d 2d64 6576 6963          "--devic
+00044a30: 6520 746f 2073 7065 6369 6679 2061 2064  e to specify a d
+00044a40: 6576 6963 6520 6e61 6d65 2c20 220a 2020  evice name, ".  
+00044a50: 2020 2020 2020 222d 2d72 6f6f 6d2d 6465        "--room-de
+00044a60: 6661 756c 7420 746f 2073 7065 6369 6679  fault to specify
+00044a70: 2061 2064 6566 6175 6c74 2072 6f6f 6d20   a default room 
+00044a80: 666f 7220 7365 6e64 696e 672f 6c69 7374  for sending/list
+00044a90: 656e 696e 672e 2022 0a20 2020 2020 2020  ening. ".       
+00044aa0: 2022 4966 2079 6f75 2068 6176 6520 6368   "If you have ch
+00044ab0: 6f73 656e 2027 7373 6f27 2c20 220a 2020  osen 'sso', ".  
+00044ac0: 2020 2020 2020 2279 6f75 2077 696c 6c20        "you will 
+00044ad0: 6175 7468 656e 7469 6361 7465 2074 6872  authenticate thr
+00044ae0: 6f75 6768 2053 696e 676c 6520 5369 676e  ough Single Sign
+00044af0: 2d4f 6e2e 2041 2077 6562 2d62 726f 7773  -On. A web-brows
+00044b00: 6572 2077 696c 6c20 220a 2020 2020 2020  er will ".      
+00044b10: 2020 2262 6520 7374 6172 7465 6420 616e    "be started an
+00044b20: 6420 796f 7520 6175 7468 656e 7469 6361  d you authentica
+00044b30: 7465 206f 6e20 7468 6520 7765 6270 6167  te on the webpag
+00044b40: 652e 2059 6f75 2063 616e 2022 0a20 2020  e. You can ".   
+00044b50: 2020 2020 2022 6f70 7469 6f6e 616c 6c79       "optionally
+00044b60: 2070 726f 7669 6465 2074 6865 7365 2061   provide these a
+00044b70: 6464 6974 696f 6e61 6c20 6172 6775 6d65  dditional argume
+00044b80: 6e74 733a 2022 0a20 2020 2020 2020 2022  nts: ".        "
+00044b90: 2d2d 686f 6d65 7365 7276 6572 2074 6f20  --homeserver to 
+00044ba0: 7370 6563 6966 7920 7468 6520 4d61 7472  specify the Matr
+00044bb0: 6978 2068 6f6d 6573 6572 7665 722c 2022  ix homeserver, "
+00044bc0: 0a20 2020 2020 2020 2022 2d2d 7573 6572  .        "--user
+00044bd0: 2d6c 6f67 696e 2074 6f20 7370 6563 6966  -login to specif
+00044be0: 7920 7468 6520 6c6f 6720 696e 2075 7365  y the log in use
+00044bf0: 7220 6964 2c20 220a 2020 2020 2020 2020  r id, ".        
+00044c00: 222d 2d64 6576 6963 6520 746f 2073 7065  "--device to spe
+00044c10: 6369 6679 2061 2064 6576 6963 6520 6e61  cify a device na
+00044c20: 6d65 2c20 220a 2020 2020 2020 2020 222d  me, ".        "-
+00044c30: 2d72 6f6f 6d2d 6465 6661 756c 7420 746f  -room-default to
+00044c40: 2073 7065 6369 6679 2061 2064 6566 6175   specify a defau
+00044c50: 6c74 2072 6f6f 6d20 666f 7220 7365 6e64  lt room for send
+00044c60: 696e 672f 6c69 7374 656e 696e 672e 2022  ing/listening. "
+00044c70: 0a20 2020 2020 2020 2022 5365 6520 616c  .        "See al
+00044c80: 6c20 7468 6520 6578 7472 6120 6172 6775  l the extra argu
+00044c90: 6d65 6e74 7320 666f 7220 6675 7274 6865  ments for furthe
+00044ca0: 7220 6578 706c 616e 6174 696f 6e73 2e20  r explanations. 
+00044cb0: 2d2d 2d2d 2d20 220a 2020 2020 2020 2020  ----- ".        
+00044cc0: 2253 534f 2028 5369 6e67 6c65 2053 6967  "SSO (Single Sig
+00044cd0: 6e2d 4f6e 2920 7374 6172 7473 2061 2077  n-On) starts a w
+00044ce0: 6562 2022 0a20 2020 2020 2020 2022 6272  eb ".        "br
+00044cf0: 6f77 7365 7220 616e 6420 636f 6e6e 6563  owser and connec
+00044d00: 7473 2074 6865 2075 7365 7220 746f 2061  ts the user to a
+00044d10: 2077 6562 2070 6167 6520 6f6e 2074 6865   web page on the
+00044d20: 2022 0a20 2020 2020 2020 2022 7365 7276   ".        "serv
+00044d30: 6572 2066 6f72 206c 6f67 696e 2e20 5353  er for login. SS
+00044d40: 4f20 7769 6c6c 206f 6e6c 7920 776f 726b  O will only work
+00044d50: 2069 6620 7468 6520 7365 7276 6572 2022   if the server "
+00044d60: 0a20 2020 2020 2020 2022 7375 7070 6f72  .        "suppor
+00044d70: 7473 2069 7420 616e 6420 6966 2074 6865  ts it and if the
+00044d80: 7265 2069 7320 6163 6365 7373 2074 6f20  re is access to 
+00044d90: 6120 6272 6f77 7365 722e 2053 6f2c 2064  a browser. So, d
+00044da0: 6f6e 2774 2075 7365 2053 534f 2022 0a20  on't use SSO ". 
+00044db0: 2020 2020 2020 2022 6f6e 2068 6561 646c         "on headl
+00044dc0: 6573 7320 686f 6d65 7365 7276 6572 7320  ess homeservers 
+00044dd0: 7768 6572 6520 7468 6572 6520 6973 206e  where there is n
+00044de0: 6f20 220a 2020 2020 2020 2020 2262 726f  o ".        "bro
+00044df0: 7773 6572 2069 6e73 7461 6c6c 6564 206f  wser installed o
+00044e00: 7220 6163 6365 7373 6962 6c65 2e22 2c0a  r accessible.",.
+00044e10: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
+00044e20: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+00044e30: 2020 2023 2022 2d76 222c 2023 2320 696e     # "-v", ## in
+00044e40: 636f 6d70 6174 6962 6c65 2063 6861 6e67  compatible chang
+00044e50: 652c 202d 7620 6d6f 7665 6420 746f 202d  e, -v moved to -
+00044e60: 2d76 6572 7369 6f6e 0a20 2020 2020 2020  -version.       
+00044e70: 2022 2d2d 7665 7269 6679 222c 0a20 2020   "--verify",.   
+00044e80: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+00044e90: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
+00044ea0: 653d 7374 722c 0a20 2020 2020 2020 2064  e=str,.        d
+00044eb0: 6566 6175 6c74 3d56 4552 4946 595f 554e  efault=VERIFY_UN
+00044ec0: 5553 4544 5f44 4546 4155 4c54 2c20 2023  USED_DEFAULT,  #
+00044ed0: 2077 6865 6e20 2d74 2069 7320 6e6f 7420   when -t is not 
+00044ee0: 7573 6564 0a20 2020 2020 2020 206e 6172  used.        nar
+00044ef0: 6773 3d22 3f22 2c20 2023 206d 616b 6573  gs="?",  # makes
+00044f00: 2074 6865 2077 6f72 6420 6f70 7469 6f6e   the word option
+00044f10: 616c 0a20 2020 2020 2020 2023 2077 6865  al.        # whe
+00044f20: 6e20 2d76 2069 7320 7573 6564 2c20 6275  n -v is used, bu
+00044f30: 7420 7465 7874 2069 7320 6e6f 7420 6164  t text is not ad
+00044f40: 6465 640a 2020 2020 2020 2020 636f 6e73  ded.        cons
+00044f50: 743d 5645 5249 4659 5f55 5345 445f 4445  t=VERIFY_USED_DE
+00044f60: 4641 554c 542c 0a20 2020 2020 2020 206d  FAULT,.        m
+00044f70: 6574 6176 6172 3d22 454d 4f4a 4922 2c0a  etavar="EMOJI",.
+00044f80: 2020 2020 2020 2020 6865 6c70 3d22 5065          help="Pe
+00044f90: 7266 6f72 6d20 7665 7269 6669 6361 7469  rform verificati
+00044fa0: 6f6e 2e20 220a 2020 2020 2020 2020 2244  on. ".        "D
+00044fb0: 6574 6169 6c73 3a3a 2042 7920 6465 6661  etails:: By defa
+00044fc0: 756c 742c 206e 6f20 220a 2020 2020 2020  ult, no ".      
+00044fd0: 2020 2276 6572 6966 6963 6174 696f 6e20    "verification 
+00044fe0: 6973 2070 6572 666f 726d 6564 2e20 220a  is performed. ".
+00044ff0: 2020 2020 2020 2020 6627 506f 7373 6962          f'Possib
+00045000: 6c65 2076 616c 7565 7320 6172 653a 2022  le values are: "
+00045010: 7b45 4d4f 4a49 7d22 2e20 270a 2020 2020  {EMOJI}". '.    
+00045020: 2020 2020 2249 6620 7665 7269 6669 6361      "If verifica
+00045030: 7469 6f6e 2069 7320 6465 7369 7265 642c  tion is desired,
+00045040: 2072 756e 2074 6869 7320 7072 6f67 7261   run this progra
+00045050: 6d20 696e 2074 6865 2022 0a20 2020 2020  m in the ".     
+00045060: 2020 2022 666f 7265 6772 6f75 6e64 2028     "foreground (
+00045070: 6e6f 7420 6173 2061 2073 6572 7669 6365  not as a service
+00045080: 2920 616e 6420 7769 7468 6f75 7420 6120  ) and without a 
+00045090: 7069 7065 2e20 220a 2020 2020 2020 2020  pipe. ".        
+000450a0: 2257 6869 6c65 2076 6572 6966 6963 6174  "While verificat
+000450b0: 696f 6e20 6973 206f 7074 696f 6e61 6c20  ion is optional 
+000450c0: 6974 2069 7320 6869 6768 6c79 2072 6563  it is highly rec
+000450d0: 6f6d 6d65 6e64 6564 2c20 616e 6420 6974  ommended, and it
+000450e0: 2022 0a20 2020 2020 2020 2022 6973 2072   ".        "is r
+000450f0: 6563 6f6d 6d65 6e64 6564 2074 6f20 6265  ecommended to be
+00045100: 2064 6f6e 6520 7269 6768 7420 6166 7465   done right afte
+00045110: 7220 286f 7220 746f 6765 7468 6572 2077  r (or together w
+00045120: 6974 6829 2074 6865 2022 0a20 2020 2020  ith) the ".     
+00045130: 2020 2022 2d2d 6c6f 6769 6e20 6163 7469     "--login acti
+00045140: 6f6e 2e20 5665 7269 6669 6361 7469 6f6e  on. Verification
+00045150: 2069 7320 616c 7761 7973 2069 6e74 6572   is always inter
+00045160: 6163 7469 7665 2c20 692e 652e 2069 7420  active, i.e. it 
+00045170: 220a 2020 2020 2020 2020 2272 6571 7569  ".        "requi
+00045180: 7265 6420 6b65 7962 6f61 7264 2069 6e70  red keyboard inp
+00045190: 7574 2e20 220a 2020 2020 2020 2020 2256  ut. ".        "V
+000451a0: 6572 6966 6963 6174 696f 6e20 7175 6573  erification ques
+000451b0: 7469 6f6e 7320 220a 2020 2020 2020 2020  tions ".        
+000451c0: 2277 696c 6c20 6265 2070 7269 6e74 6564  "will be printed
+000451d0: 206f 6e20 7374 646f 7574 2061 6e64 2074   on stdout and t
+000451e0: 6865 2075 7365 7220 6861 7320 746f 2072  he user has to r
+000451f0: 6573 706f 6e64 2022 0a20 2020 2020 2020  espond ".       
+00045200: 2022 7669 6120 7468 6520 6b65 7962 6f61   "via the keyboa
+00045210: 7264 2074 6f20 6163 6365 7074 206f 7220  rd to accept or 
+00045220: 7265 6a65 6374 2076 6572 6966 6963 6174  reject verificat
+00045230: 696f 6e2e 2022 0a20 2020 2020 2020 2022  ion. ".        "
+00045240: 4f6e 6365 2076 6572 6966 6963 6174 696f  Once verificatio
+00045250: 6e20 6973 2063 6f6d 706c 6574 652c 2074  n is complete, t
+00045260: 6865 2070 726f 6772 616d 206d 6179 2062  he program may b
+00045270: 6520 220a 2020 2020 2020 2020 2272 756e  e ".        "run
+00045280: 2061 7320 6120 7365 7276 6963 652e 2056   as a service. V
+00045290: 6572 6966 6963 6174 696f 6e20 6973 2062  erification is b
+000452a0: 6573 7420 646f 6e65 2061 7320 666f 6c6c  est done as foll
+000452b0: 6f77 733a 2022 0a20 2020 2020 2020 2022  ows: ".        "
+000452c0: 5065 7266 6f72 6d20 6120 6372 6f73 732d  Perform a cross-
+000452d0: 6465 7669 6365 2076 6572 6966 6963 6174  device verificat
+000452e0: 696f 6e2c 2074 6861 7420 6d65 616e 732c  ion, that means,
+000452f0: 2070 6572 666f 726d 2061 2022 0a20 2020   perform a ".   
+00045300: 2020 2020 2022 7665 7269 6669 6361 7469       "verificati
+00045310: 6f6e 2062 6574 7765 656e 2074 776f 2064  on between two d
+00045320: 6576 6963 6573 206f 6620 7468 6520 2a73  evices of the *s
+00045330: 616d 652a 2075 7365 722e 2046 6f72 2074  ame* user. For t
+00045340: 6861 742c 2022 0a20 2020 2020 2020 2022  hat, ".        "
+00045350: 6f70 656e 2028 652e 672e 2920 456c 656d  open (e.g.) Elem
+00045360: 656e 7420 696e 2061 2062 726f 7773 6572  ent in a browser
+00045370: 2c20 6d61 6b65 2073 7572 6520 456c 656d  , make sure Elem
+00045380: 656e 7420 6973 2075 7369 6e67 2074 6865  ent is using the
+00045390: 2022 0a20 2020 2020 2020 2066 2273 616d   ".        f"sam
+000453a0: 6520 7573 6572 2061 6363 6f75 6e74 2061  e user account a
+000453b0: 7320 7468 6520 7b50 524f 475f 5749 5448  s the {PROG_WITH
+000453c0: 4f55 545f 4558 547d 2075 7365 7220 2873  OUT_EXT} user (s
+000453d0: 7065 6369 6669 6564 2077 6974 6820 220a  pecified with ".
+000453e0: 2020 2020 2020 2020 222d 2d75 7365 722d          "--user-
+000453f0: 6c6f 6769 6e20 6174 202d 2d6c 6f67 696e  login at --login
+00045400: 292e 204e 6f77 2069 6e20 7468 6520 456c  ). Now in the El
+00045410: 656d 656e 7420 7765 6270 6167 6520 676f  ement webpage go
+00045420: 2074 6f20 7468 6520 726f 6f6d 2022 0a20   to the room ". 
+00045430: 2020 2020 2020 2066 2274 6861 7420 6973         f"that is
+00045440: 2074 6865 207b 5052 4f47 5f57 4954 484f   the {PROG_WITHO
+00045450: 5554 5f45 5854 7d20 6465 6661 756c 7420  UT_EXT} default 
+00045460: 726f 6f6d 2028 7370 6563 6966 6965 6420  room (specified 
+00045470: 7769 7468 2022 0a20 2020 2020 2020 2022  with ".        "
+00045480: 2d2d 726f 6f6d 2d64 6566 6175 6c74 2061  --room-default a
+00045490: 7420 2d2d 6c6f 6769 6e29 2e20 4f4b 2c20  t --login). OK, 
+000454a0: 696e 2074 6865 2077 6562 2d62 726f 7773  in the web-brows
+000454b0: 6572 2079 6f75 2061 7265 206e 6f77 2074  er you are now t
+000454c0: 6865 2022 0a20 2020 2020 2020 2066 2273  he ".        f"s
+000454d0: 616d 6520 7573 6572 2061 6e64 2069 6e20  ame user and in 
+000454e0: 7468 6520 7361 6d65 2072 6f6f 6d20 6173  the same room as
+000454f0: 207b 5052 4f47 5f57 4954 484f 5554 5f45   {PROG_WITHOUT_E
+00045500: 5854 7d2e 2022 0a20 2020 2020 2020 2022  XT}. ".        "
+00045510: 4e6f 7720 636c 6963 6b20 7468 6520 726f  Now click the ro
+00045520: 756e 6420 2769 2720 2752 6f6f 6d20 496e  und 'i' 'Room In
+00045530: 666f 2720 6963 6f6e 2c20 7468 656e 2063  fo' icon, then c
+00045540: 6c69 636b 2027 5065 6f70 6c65 272c 2022  lick 'People', "
+00045550: 0a20 2020 2020 2020 2066 2263 6c69 636b  .        f"click
+00045560: 2074 6865 2061 7070 726f 7072 6961 7465   the appropriate
+00045570: 2075 7365 7220 2874 6865 207b 5052 4f47   user (the {PROG
+00045580: 5f57 4954 484f 5554 5f45 5854 7d20 7573  _WITHOUT_EXT} us
+00045590: 6572 292c 2022 0a20 2020 2020 2020 2022  er), ".        "
+000455a0: 636c 6963 6b20 7265 6420 274e 6f74 2054  click red 'Not T
+000455b0: 7275 7374 6564 2720 7465 7874 2022 0a20  rusted' text ". 
+000455c0: 2020 2020 2020 2022 7768 6963 6820 696e         "which in
+000455d0: 6469 6361 7465 6420 616e 2075 6e74 7275  dicated an untru
+000455e0: 7374 6564 2064 6576 6963 652c 2074 6865  sted device, the
+000455f0: 6e20 636c 6963 6b20 7468 6520 7371 7561  n click the squa
+00045600: 7265 2022 0a20 2020 2020 2020 2022 2749  re ".        "'I
+00045610: 6e74 6572 6163 7469 7665 6c79 2076 6572  nteractively ver
+00045620: 6966 7920 6279 2045 6d6f 6a69 2720 6275  ify by Emoji' bu
+00045630: 7474 6f6e 2028 6f6e 6520 6f66 2033 2062  tton (one of 3 b
+00045640: 7574 746f 6e20 6368 6f69 6365 7329 2e20  utton choices). 
+00045650: 220a 2020 2020 2020 2020 6622 4174 2074  ".        f"At t
+00045660: 6869 7320 706f 696e 7420 626f 7468 2077  his point both w
+00045670: 6562 2d70 6167 6520 616e 6420 7b50 524f  eb-page and {PRO
+00045680: 475f 5749 5448 4f55 545f 4558 547d 2069  G_WITHOUT_EXT} i
+00045690: 6e20 7465 726d 696e 616c 2022 0a20 2020  n terminal ".   
+000456a0: 2020 2020 2022 7368 6f77 2061 2073 6574       "show a set
+000456b0: 206f 6620 656d 6f6a 6920 6963 6f6e 7320   of emoji icons 
+000456c0: 616e 6420 6e61 6d65 732e 2043 6f6d 7061  and names. Compa
+000456d0: 7265 2074 6865 6d20 7669 7375 616c 6c79  re them visually
+000456e0: 2e20 220a 2020 2020 2020 2020 2243 6f6e  . ".        "Con
+000456f0: 6669 726d 206f 6e20 626f 7468 2073 6964  firm on both sid
+00045700: 6573 2028 5965 732c 2054 6865 7920 4d61  es (Yes, They Ma
+00045710: 7463 682c 2047 6f74 2069 7429 2c20 6669  tch, Got it), fi
+00045720: 6e61 6c6c 7920 636c 6963 6b20 4f4b 2e20  nally click OK. 
+00045730: 220a 2020 2020 2020 2020 2259 6f75 2073  ".        "You s
+00045740: 686f 756c 6420 7365 6520 6120 6772 6565  hould see a gree
+00045750: 6e20 7368 6965 6c64 2061 6e64 2061 6c73  n shield and als
+00045760: 6f20 7365 6520 7468 6174 2074 6865 2022  o see that the "
+00045770: 0a20 2020 2020 2020 2066 227b 5052 4f47  .        f"{PROG
+00045780: 5f57 4954 484f 5554 5f45 5854 7d20 6465  _WITHOUT_EXT} de
+00045790: 7669 6365 2069 7320 6e6f 7720 6772 6565  vice is now gree
+000457a0: 6e20 616e 6420 7665 7269 6669 6564 2069  n and verified i
+000457b0: 6e20 7468 6520 7765 6270 6167 652e 2022  n the webpage. "
+000457c0: 0a20 2020 2020 2020 2022 496e 2074 6865  .        "In the
+000457d0: 2074 6572 6d69 6e61 6c20 796f 7520 7368   terminal you sh
+000457e0: 6f75 6c64 2073 6565 2061 2074 6578 7420  ould see a text 
+000457f0: 6d65 7373 6167 6520 696e 6469 6361 7469  message indicati
+00045800: 6e67 2073 7563 6365 7373 2e20 220a 2020  ng success. ".  
+00045810: 2020 2020 2020 2259 6f75 2073 686f 756c        "You shoul
+00045820: 6420 6e6f 7720 6265 2076 6572 6966 6965  d now be verifie
+00045830: 6420 6163 726f 7373 2061 6c6c 2064 6576  d across all dev
+00045840: 6963 6573 2061 6e64 2061 6372 6f73 7320  ices and across 
+00045850: 616c 6c20 7573 6572 732e 222c 0a20 2020  all users.",.   
+00045860: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
+00045870: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
+00045880: 222d 2d6c 6f67 6f75 7422 2c0a 2020 2020  "--logout",.    
+00045890: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+000458a0: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
+000458b0: 3d73 7472 2c20 2023 206c 6f67 6f75 7420  =str,  # logout 
+000458c0: 6f70 7469 6f6e 733a 206d 6520 616e 6420  options: me and 
+000458d0: 616c 6c0a 2020 2020 2020 2020 6d65 7461  all.        meta
+000458e0: 7661 723d 224d 457c 414c 4c22 2c0a 2020  var="ME|ALL",.  
+000458f0: 2020 2020 2020 6865 6c70 3d22 4c6f 676f        help="Logo
+00045900: 7574 2e20 220a 2020 2020 2020 2020 2244  ut. ".        "D
+00045910: 6574 6169 6c73 3a3a 204c 6f67 6f75 7420  etails:: Logout 
+00045920: 7468 6973 206f 7220 616c 6c20 6465 7669  this or all devi
+00045930: 6365 7320 6672 6f6d 2074 6865 204d 6174  ces from the Mat
+00045940: 7269 7820 686f 6d65 7365 7276 6572 2e20  rix homeserver. 
+00045950: 220a 2020 2020 2020 2020 2254 6869 7320  ".        "This 
+00045960: 7265 7175 6972 6573 2065 7861 6374 6c79  requires exactly
+00045970: 206f 6e65 2061 7267 756d 656e 742e 2022   one argument. "
+00045980: 0a20 2020 2020 2020 2022 5477 6f20 6368  .        "Two ch
+00045990: 6f69 6365 7320 6172 6520 6f66 6665 7265  oices are offere
+000459a0: 643a 2027 6d65 2720 616e 6420 2761 6c6c  d: 'me' and 'all
+000459b0: 272e 2022 0a20 2020 2020 2020 2022 5072  '. ".        "Pr
+000459c0: 6f76 6964 6520 6f6e 6520 6f66 2074 6865  ovide one of the
+000459d0: 7365 2063 686f 6963 6573 2e20 220a 2020  se choices. ".  
+000459e0: 2020 2020 2020 6622 4966 2079 6f75 2063        f"If you c
+000459f0: 686f 6f73 6520 276d 6527 2c20 6f6e 6c79  hoose 'me', only
+00045a00: 2074 6865 206f 6e65 2064 6576 6963 6520   the one device 
+00045a10: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
+00045a20: 547d 2022 0a20 2020 2020 2020 2022 6973  T} ".        "is
+00045a30: 2063 7572 7265 6e74 6c79 2075 7369 6e67   currently using
+00045a40: 2077 696c 6c20 6265 206c 6f67 6765 6420   will be logged 
+00045a50: 6f75 742e 2022 0a20 2020 2020 2020 2022  out. ".        "
+00045a60: 4966 2079 6f75 2063 686f 6f73 6520 2761  If you choose 'a
+00045a70: 6c6c 272c 2061 6c6c 2064 6576 6963 6573  ll', all devices
+00045a80: 206f 6620 7468 6520 7573 6572 2075 7365   of the user use
+00045a90: 6420 6279 2022 0a20 2020 2020 2020 2066  d by ".        f
+00045aa0: 227b 5052 4f47 5f57 4954 484f 5554 5f45  "{PROG_WITHOUT_E
+00045ab0: 5854 7d20 7769 6c6c 2062 6520 6c6f 6767  XT} will be logg
+00045ac0: 6564 206f 7574 2e20 220a 2020 2020 2020  ed out. ".      
+00045ad0: 2020 2257 6869 6c65 202d 2d6c 6f67 6f75    "While --logou
+00045ae0: 7420 6e65 6974 6865 7220 7265 6d6f 7665  t neither remove
+00045af0: 7320 7468 6520 6372 6564 656e 7469 616c  s the credential
+00045b00: 7320 6e6f 7220 7468 6520 7374 6f72 652c  s nor the store,
+00045b10: 2074 6865 2022 0a20 2020 2020 2020 2022   the ".        "
+00045b20: 6c6f 676f 7574 2061 6374 696f 6e20 7265  logout action re
+00045b30: 6d6f 7665 7320 7468 6520 6465 7669 6365  moves the device
+00045b40: 2061 6e64 206d 616b 6573 2074 6865 2061   and makes the a
+00045b50: 6363 6573 732d 746f 6b65 6e20 7374 6f72  ccess-token stor
+00045b60: 6564 2022 0a20 2020 2020 2020 2022 696e  ed ".        "in
+00045b70: 2074 6865 2063 7265 6465 6e74 6961 6c73   the credentials
+00045b80: 2069 6e76 616c 6964 2e20 4865 6e63 652c   invalid. Hence,
+00045b90: 2061 6674 6572 2061 202d 2d6c 6f67 6f75   after a --logou
+00045ba0: 742c 206f 6e65 206d 7573 7420 220a 2020  t, one must ".  
+00045bb0: 2020 2020 2020 226d 616e 7561 6c6c 7920        "manually 
+00045bc0: 7265 6d6f 7665 2063 7265 6465 6e74 6961  remove credentia
+00045bd0: 6c73 2061 6e64 2073 746f 7265 2c20 616e  ls and store, an
+00045be0: 6420 7468 656e 2070 6572 666f 726d 2061  d then perform a
+00045bf0: 206e 6577 2022 0a20 2020 2020 2020 2066   new ".        f
+00045c00: 222d 2d6c 6f67 696e 2074 6f20 7573 6520  "--login to use 
+00045c10: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
+00045c20: 547d 2061 6761 696e 2e20 220a 2020 2020  T} again. ".    
+00045c30: 2020 2020 2259 6f75 2063 616e 2070 6572      "You can per
+00045c40: 6665 6374 6c79 2075 7365 2022 0a20 2020  fectly use ".   
+00045c50: 2020 2020 2066 227b 5052 4f47 5f57 4954       f"{PROG_WIT
+00045c60: 484f 5554 5f45 5854 7d20 7769 7468 6f75  HOUT_EXT} withou
+00045c70: 7420 6576 6572 206c 6f67 6769 6e67 206f  t ever logging o
+00045c80: 7574 2e20 2d2d 6c6f 676f 7574 2069 7320  ut. --logout is 
+00045c90: 6120 636c 6561 6e75 7020 220a 2020 2020  a cleanup ".    
+00045ca0: 2020 2020 2269 6620 796f 7520 6861 7665      "if you have
+00045cb0: 2064 6563 6964 6564 206e 6f74 2074 6f20   decided not to 
+00045cc0: 7573 6520 7468 6973 2028 6f72 2061 6c6c  use this (or all
+00045cd0: 2920 6465 7669 6365 2873 2920 6576 6572  ) device(s) ever
+00045ce0: 2061 6761 696e 2e22 2c0a 2020 2020 290a   again.",.    ).
+00045cf0: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
+00045d00: 656e 7428 0a20 2020 2020 2020 2022 2d63  ent(.        "-c
+00045d10: 222c 0a20 2020 2020 2020 2022 2d2d 6372  ",.        "--cr
+00045d20: 6564 656e 7469 616c 7322 2c0a 2020 2020  edentials",.    
+00045d30: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+00045d40: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
+00045d50: 3d73 7472 2c0a 2020 2020 2020 2020 6465  =str,.        de
+00045d60: 6661 756c 743d 4352 4544 454e 5449 414c  fault=CREDENTIAL
+00045d70: 535f 4649 4c45 5f44 4546 4155 4c54 2c0a  S_FILE_DEFAULT,.
+00045d80: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
+00045d90: 2243 5245 4445 4e54 4941 4c53 5f46 494c  "CREDENTIALS_FIL
+00045da0: 4522 2c0a 2020 2020 2020 2020 6865 6c70  E",.        help
+00045db0: 3d22 5370 6563 6966 7920 6c6f 6361 7469  ="Specify locati
+00045dc0: 6f6e 206f 6620 6372 6564 656e 7469 616c  on of credential
+00045dd0: 7320 6669 6c65 2e20 220a 2020 2020 2020  s file. ".      
+00045de0: 2020 2244 6574 6169 6c73 3a3a 204f 6e20    "Details:: On 
+00045df0: 6669 7273 7420 7275 6e2c 2069 6e66 6f72  first run, infor
+00045e00: 6d61 7469 6f6e 2061 626f 7574 2068 6f6d  mation about hom
+00045e10: 6573 6572 7665 722c 2022 0a20 2020 2020  eserver, ".     
+00045e20: 2020 2022 7573 6572 2c20 726f 6f6d 2069     "user, room i
+00045e30: 642c 2065 7463 2e20 7769 6c6c 2062 6520  d, etc. will be 
+00045e40: 7772 6974 7465 6e20 746f 2061 2063 7265  written to a cre
+00045e50: 6465 6e74 6961 6c73 2022 0a20 2020 2020  dentials ".     
+00045e60: 2020 2022 6669 6c65 2e20 4279 2064 6566     "file. By def
+00045e70: 6175 6c74 2c20 7468 6973 2066 696c 6520  ault, this file 
+00045e80: 220a 2020 2020 2020 2020 6627 6973 2022  ".        f'is "
+00045e90: 7b43 5245 4445 4e54 4941 4c53 5f46 494c  {CREDENTIALS_FIL
+00045ea0: 455f 4445 4641 554c 547d 222e 2027 0a20  E_DEFAULT}". '. 
+00045eb0: 2020 2020 2020 2022 4f6e 2066 7572 7468         "On furth
+00045ec0: 6572 2072 756e 7320 7468 6520 6372 6564  er runs the cred
+00045ed0: 656e 7469 616c 7320 6669 6c65 2069 7320  entials file is 
+00045ee0: 7265 6164 2074 6f20 220a 2020 2020 2020  read to ".      
+00045ef0: 2020 2270 6572 6d69 7420 6c6f 6767 696e    "permit loggin
+00045f00: 6720 696e 746f 2074 6865 2063 6f72 7265  g into the corre
+00045f10: 6374 204d 6174 7269 7820 6163 636f 756e  ct Matrix accoun
+00045f20: 7420 220a 2020 2020 2020 2020 2261 6e64  t ".        "and
+00045f30: 2073 656e 6469 6e67 206d 6573 7361 6765   sending message
+00045f40: 7320 746f 2074 6865 2070 7265 636f 6e66  s to the preconf
+00045f50: 6967 7572 6564 2072 6f6f 6d2e 2022 0a20  igured room. ". 
+00045f60: 2020 2020 2020 2022 4966 2074 6869 7320         "If this 
+00045f70: 6f70 7469 6f6e 2069 7320 7072 6f76 6964  option is provid
+00045f80: 6564 2c20 7468 6520 7072 6f76 6964 6564  ed, the provided
+00045f90: 2066 696c 6520 6e61 6d65 2022 0a20 2020   file name ".   
+00045fa0: 2020 2020 2022 7769 6c6c 2062 6520 7573       "will be us
+00045fb0: 6564 2061 7320 6372 6564 656e 7469 616c  ed as credential
+00045fc0: 7320 6669 6c65 2069 6e73 7465 6164 206f  s file instead o
+00045fd0: 6620 7468 6520 220a 2020 2020 2020 2020  f the ".        
+00045fe0: 2264 6566 6175 6c74 206f 6e65 2e20 222c  "default one. ",
+00045ff0: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
+00046000: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+00046010: 2020 2020 222d 7322 2c0a 2020 2020 2020      "-s",.      
+00046020: 2020 222d 2d73 746f 7265 222c 0a20 2020    "--store",.   
+00046030: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+00046040: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
+00046050: 653d 7374 722c 0a20 2020 2020 2020 2064  e=str,.        d
+00046060: 6566 6175 6c74 3d53 544f 5245 5f44 4952  efault=STORE_DIR
+00046070: 5f44 4546 4155 4c54 2c0a 2020 2020 2020  _DEFAULT,.      
+00046080: 2020 6d65 7461 7661 723d 2253 544f 5245    metavar="STORE
+00046090: 5f44 4952 4543 544f 5259 222c 0a20 2020  _DIRECTORY",.   
+000460a0: 2020 2020 2068 656c 703d 2253 7065 6369       help="Speci
+000460b0: 6679 206c 6f63 6174 696f 6e20 6f66 2073  fy location of s
+000460c0: 746f 7265 2064 6972 6563 746f 7279 2e20  tore directory. 
+000460d0: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
+000460e0: 6c73 3a3a 2050 6174 6820 746f 2064 6972  ls:: Path to dir
+000460f0: 6563 746f 7279 2074 6f20 6265 2022 0a20  ectory to be ". 
+00046100: 2020 2020 2020 2027 7573 6564 2061 7320         'used as 
+00046110: 2273 746f 7265 2220 666f 7220 656e 6372  "store" for encr
+00046120: 7970 7465 6420 6d65 7373 6167 696e 672e  ypted messaging.
+00046130: 2027 0a20 2020 2020 2020 2022 4279 2064   '.        "By d
+00046140: 6566 6175 6c74 2c20 7468 6973 2064 6972  efault, this dir
+00046150: 6563 746f 7279 2022 0a20 2020 2020 2020  ectory ".       
+00046160: 2066 2769 7320 227b 5354 4f52 455f 4449   f'is "{STORE_DI
+00046170: 525f 4445 4641 554c 547d 222e 2027 0a20  R_DEFAULT}". '. 
+00046180: 2020 2020 2020 2022 5369 6e63 6520 656e         "Since en
+00046190: 6372 7970 7469 6f6e 2069 7320 616c 7761  cryption is alwa
+000461a0: 7973 2065 6e61 626c 6564 2c20 6120 7374  ys enabled, a st
+000461b0: 6f72 6520 6973 2022 0a20 2020 2020 2020  ore is ".       
+000461c0: 2022 616c 7761 7973 206e 6565 6465 642e   "always needed.
+000461d0: 2022 0a20 2020 2020 2020 2022 5468 6520   ".        "The 
+000461e0: 7072 6f76 6964 6564 2064 6972 6563 746f  provided directo
+000461f0: 7279 206e 616d 6520 220a 2020 2020 2020  ry name ".      
+00046200: 2020 2277 696c 6c20 6265 2075 7365 6420    "will be used 
+00046210: 6173 2070 6572 7369 7374 656e 7420 7374  as persistent st
+00046220: 6f72 6167 6520 6469 7265 6374 6f72 7920  orage directory 
+00046230: 696e 7374 6561 6420 6f66 2022 0a20 2020  instead of ".   
+00046240: 2020 2020 2022 7468 6520 6465 6661 756c       "the defaul
+00046250: 7420 6f6e 652e 2050 7265 6665 7261 626c  t one. Preferabl
+00046260: 792c 2066 6f72 206d 756c 7469 706c 6520  y, for multiple 
+00046270: 6578 6563 7574 696f 6e73 2022 0a20 2020  executions ".   
+00046280: 2020 2020 2022 6f66 2074 6869 7320 7072       "of this pr
+00046290: 6f67 7261 6d20 7573 6520 7468 6520 7361  ogram use the sa
+000462a0: 6d65 2073 746f 7265 2066 6f72 2074 6865  me store for the
+000462b0: 2073 616d 6520 6465 7669 6365 2e20 220a   same device. ".
+000462c0: 2020 2020 2020 2020 2254 6865 2073 746f          "The sto
+000462d0: 7265 2064 6972 6563 746f 7279 2063 616e  re directory can
+000462e0: 2062 6520 7368 6172 6564 2062 6574 7765   be shared betwe
+000462f0: 656e 206d 756c 7469 706c 6520 220a 2020  en multiple ".  
+00046300: 2020 2020 2020 2264 6966 6665 7265 6e74        "different
+00046310: 2064 6576 6963 6573 2061 6e64 2075 7365   devices and use
+00046320: 7273 2e22 2c0a 2020 2020 290a 2020 2020  rs.",.    ).    
+00046330: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
+00046340: 0a20 2020 2020 2020 2022 2d72 222c 0a20  .        "-r",. 
+00046350: 2020 2020 2020 2022 2d2d 726f 6f6d 222c         "--room",
+00046360: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+00046370: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
+00046380: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
+00046390: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
+000463a0: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
+000463b0: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
+000463c0: 6574 6176 6172 3d22 524f 4f4d 222c 0a20  etavar="ROOM",. 
+000463d0: 2020 2020 2020 2068 656c 703d 2253 7065         help="Spe
+000463e0: 6369 6679 206f 6e65 206f 7220 6d75 6c74  cify one or mult
+000463f0: 6970 6c65 2072 6f6f 6d73 2e20 220a 2020  iple rooms. ".  
+00046400: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+00046410: 204f 7074 696f 6e61 6c6c 7920 7370 6563   Optionally spec
+00046420: 6966 7920 6f6e 6520 6f72 206d 756c 7469  ify one or multi
+00046430: 706c 6520 726f 6f6d 7320 7669 6120 726f  ple rooms via ro
+00046440: 6f6d 2069 6473 206f 7220 220a 2020 2020  om ids or ".    
+00046450: 2020 2020 2272 6f6f 6d20 616c 6961 7365      "room aliase
+00046460: 732e 202d 2d72 6f6f 6d20 6973 2075 7365  s. --room is use
+00046470: 6420 6279 2076 6172 696f 7573 2073 656e  d by various sen
+00046480: 6420 6163 7469 6f6e 7320 616e 6420 220a  d actions and ".
+00046490: 2020 2020 2020 2020 2276 6172 696f 7573          "various
+000464a0: 206c 6973 7465 6e20 6163 7469 6f6e 732e   listen actions.
+000464b0: 2022 0a20 2020 2020 2020 2022 5468 6520   ".        "The 
+000464c0: 6465 6661 756c 7420 726f 6f6d 2069 7320  default room is 
+000464d0: 7072 6f76 6964 6564 2022 0a20 2020 2020  provided ".     
+000464e0: 2020 2022 696e 2074 6865 2063 7265 6465     "in the crede
+000464f0: 6e74 6961 6c73 2066 696c 6520 2873 7065  ntials file (spe
+00046500: 6369 6669 6564 2061 7420 2d2d 6c6f 6769  cified at --logi
+00046510: 6e20 7769 7468 202d 2d72 6f6f 6d2d 6465  n with --room-de
+00046520: 6661 756c 7429 2e20 220a 2020 2020 2020  fault). ".      
+00046530: 2020 2249 6620 6120 726f 6f6d 2028 6f72    "If a room (or
+00046540: 206d 756c 7469 706c 6520 6f6e 6573 2920   multiple ones) 
+00046550: 220a 2020 2020 2020 2020 2269 7320 286f  ".        "is (o
+00046560: 7220 6172 6529 2070 726f 7669 6465 6420  r are) provided 
+00046570: 696e 2074 6865 202d 2d72 6f6f 6d20 6172  in the --room ar
+00046580: 6775 6d65 6e74 732c 2074 6865 6e20 6974  guments, then it
+00046590: 2022 0a20 2020 2020 2020 2022 286f 7220   ".        "(or 
+000465a0: 7468 6579 2920 7769 6c6c 2062 6520 7573  they) will be us
+000465b0: 6564 2022 0a20 2020 2020 2020 2022 696e  ed ".        "in
+000465c0: 7374 6561 6420 6f66 2074 6865 206f 6e65  stead of the one
+000465d0: 2066 726f 6d20 7468 6520 6372 6564 656e   from the creden
+000465e0: 7469 616c 7320 6669 6c65 2e20 220a 2020  tials file. ".  
+000465f0: 2020 2020 2020 2254 6865 2075 7365 7220        "The user 
+00046600: 6d75 7374 2068 6176 6520 6163 6365 7373  must have access
+00046610: 2074 6f20 7468 6520 7370 6563 6966 6965   to the specifie
+00046620: 6420 726f 6f6d 2022 0a20 2020 2020 2020  d room ".       
+00046630: 2022 696e 206f 7264 6572 2074 6f20 7365   "in order to se
+00046640: 6e64 206d 6573 7361 6765 7320 7468 6572  nd messages ther
+00046650: 6520 6f72 206c 6973 7465 6e20 6f6e 2074  e or listen on t
+00046660: 6865 2072 6f6f 6d2e 2022 0a20 2020 2020  he room. ".     
+00046670: 2020 2022 4d65 7373 6167 6573 2063 616e     "Messages can
+00046680: 6e6f 7420 220a 2020 2020 2020 2020 2262  not ".        "b
+00046690: 6520 7365 6e74 2074 6f20 6172 6269 7472  e sent to arbitr
+000466a0: 6172 7920 726f 6f6d 732e 2057 6865 6e20  ary rooms. When 
+000466b0: 7370 6563 6966 7969 6e67 2074 6865 2022  specifying the "
+000466c0: 0a20 2020 2020 2020 2022 726f 6f6d 2069  .        "room i
+000466d0: 6420 736f 6d65 2073 6865 6c6c 7320 7265  d some shells re
+000466e0: 7175 6972 6520 7468 6520 6578 636c 616d  quire the exclam
+000466f0: 6174 696f 6e20 6d61 726b 2022 0a20 2020  ation mark ".   
+00046700: 2020 2020 2022 746f 2062 6520 6573 6361       "to be esca
+00046710: 7065 6420 7769 7468 2061 2062 6163 6b73  ped with a backs
+00046720: 6c61 7368 2e20 220a 2020 2020 2020 2020  lash. ".        
+00046730: 2241 7320 616e 2061 6c74 6572 6e61 7469  "As an alternati
+00046740: 7665 2074 6f20 7370 6563 6966 7969 6e67  ve to specifying
+00046750: 2061 2072 6f6f 6d20 6173 2064 6573 7469   a room as desti
+00046760: 6e61 7469 6f6e 2c20 220a 2020 2020 2020  nation, ".      
+00046770: 2020 226f 6e65 2063 616e 2073 7065 6369    "one can speci
+00046780: 6679 2061 2075 7365 7220 6173 2061 2064  fy a user as a d
+00046790: 6573 7469 6e61 7469 6f6e 2077 6974 6820  estination with 
+000467a0: 7468 6520 272d 2d75 7365 7227 2022 0a20  the '--user' ". 
+000467b0: 2020 2020 2020 2022 6172 6775 6d65 6e74         "argument
+000467c0: 2e20 5365 6520 272d 2d75 7365 7227 2061  . See '--user' a
+000467d0: 6e64 2074 6865 2074 6572 6d20 2744 4d20  nd the term 'DM 
+000467e0: 2864 6972 6563 7420 6d65 7373 6167 696e  (direct messagin
+000467f0: 6729 2720 220a 2020 2020 2020 2020 2266  g)' ".        "f
+00046800: 6f72 2064 6574 6169 6c73 2e20 5370 6563  or details. Spec
+00046810: 6966 7969 6e67 2061 2072 6f6f 6d20 6973  ifying a room is
+00046820: 2061 6c77 6179 7320 6661 7374 6572 2061   always faster a
+00046830: 6e64 206d 6f72 6520 220a 2020 2020 2020  nd more ".      
+00046840: 2020 2265 6666 6963 6965 6e74 2074 6861    "efficient tha
+00046850: 6e20 7370 6563 6966 7969 6e67 2061 2075  n specifying a u
+00046860: 7365 722e 204e 6f74 2061 6c6c 206c 6973  ser. Not all lis
+00046870: 7465 6e20 6f70 6572 6174 696f 6e73 2022  ten operations "
+00046880: 0a20 2020 2020 2020 2022 616c 6c6f 7720  .        "allow 
+00046890: 7365 7474 696e 6720 6120 726f 6f6d 2e20  setting a room. 
+000468a0: 5265 6164 206d 6f72 6520 756e 6465 7220  Read more under 
+000468b0: 7468 6520 2d2d 6c69 7374 656e 206f 7074  the --listen opt
+000468c0: 696f 6e73 2022 0a20 2020 2020 2020 2022  ions ".        "
+000468d0: 616e 6420 7369 6d69 6c61 722e 204d 6f73  and similar. Mos
+000468e0: 7420 6163 7469 6f6e 7320 616c 736f 2073  t actions also s
+000468f0: 7570 706f 7274 2072 6f6f 6d20 616c 6961  upport room alia
+00046900: 7365 7320 696e 7374 6561 6420 6f66 2022  ses instead of "
+00046910: 0a20 2020 2020 2020 2022 726f 6f6d 2069  .        "room i
+00046920: 6473 2e20 536f 6d65 2065 7665 6e20 7368  ds. Some even sh
+00046930: 6f72 7420 726f 6f6d 2061 6c69 6173 6573  ort room aliases
+00046940: 2e22 2c0a 2020 2020 290a 2020 2020 6170  .",.    ).    ap
+00046950: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
+00046960: 2020 2020 2020 2022 2d2d 726f 6f6d 2d64         "--room-d
+00046970: 6566 6175 6c74 222c 0a20 2020 2020 2020  efault",.       
+00046980: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
+00046990: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
+000469a0: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
+000469b0: 6172 3d22 4445 4641 554c 545f 524f 4f4d  ar="DEFAULT_ROOM
+000469c0: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
+000469d0: 2253 7065 6369 6679 2074 6865 2064 6566  "Specify the def
+000469e0: 6175 6c74 2072 6f6f 6d20 6174 202d 2d6c  ault room at --l
+000469f0: 6f67 696e 2e20 220a 2020 2020 2020 2020  ogin. ".        
+00046a00: 2244 6574 6169 6c73 3a3a 204f 7074 696f  "Details:: Optio
+00046a10: 6e61 6c6c 7920 7370 6563 6966 7920 6120  nally specify a 
+00046a20: 726f 6f6d 2061 7320 7468 6520 220a 2020  room as the ".  
+00046a30: 2020 2020 2020 2264 6566 6175 6c74 2072        "default r
+00046a40: 6f6f 6d20 666f 7220 6675 7475 7265 2061  oom for future a
+00046a50: 6374 696f 6e73 2e20 4966 206e 6f74 2073  ctions. If not s
+00046a60: 7065 6369 6669 6564 2066 6f72 202d 2d6c  pecified for --l
+00046a70: 6f67 696e 2c20 6974 2022 0a20 2020 2020  ogin, it ".     
+00046a80: 2020 2022 7769 6c6c 2062 6520 7175 6572     "will be quer
+00046a90: 6965 6420 7669 6120 7468 6520 6b65 7962  ied via the keyb
+00046aa0: 6f61 7264 2e20 2d2d 6c6f 6769 6e20 7374  oard. --login st
+00046ab0: 6f72 6573 2074 6865 2073 7065 6369 6669  ores the specifi
+00046ac0: 6564 2072 6f6f 6d20 220a 2020 2020 2020  ed room ".      
+00046ad0: 2020 2261 7320 6465 6661 756c 7420 726f    "as default ro
+00046ae0: 6f6d 2069 6e20 796f 7572 2063 7265 6465  om in your crede
+00046af0: 6e74 6961 6c73 2066 696c 652e 2054 6869  ntials file. Thi
+00046b00: 7320 6f70 7469 6f6e 2069 7320 6f6e 6c79  s option is only
+00046b10: 2075 7365 6420 220a 2020 2020 2020 2020   used ".        
+00046b20: 2269 6e20 636f 6d62 696e 6174 696f 6e20  "in combination 
+00046b30: 7769 7468 202d 2d6c 6f67 696e 2e20 4120  with --login. A 
+00046b40: 6465 6661 756c 7420 726f 6f6d 2069 7320  default room is 
+00046b50: 6e65 6564 6564 2e20 5370 6563 6966 7920  needed. Specify 
+00046b60: 6120 220a 2020 2020 2020 2020 2276 616c  a ".        "val
+00046b70: 6964 2072 6f6f 6d20 6569 7468 6572 2077  id room either w
+00046b80: 6974 6820 2d2d 726f 6f6d 2d64 6566 6175  ith --room-defau
+00046b90: 6c74 206f 7220 7072 6f76 6964 6520 6974  lt or provide it
+00046ba0: 2076 6961 206b 6579 626f 6172 642e 222c   via keyboard.",
+00046bb0: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
+00046bc0: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+00046bd0: 2020 2020 222d 2d72 6f6f 6d2d 6372 6561      "--room-crea
+00046be0: 7465 222c 0a20 2020 2020 2020 2072 6571  te",.        req
+00046bf0: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
+00046c00: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
+00046c10: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
+00046c20: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
+00046c30: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
+00046c40: 2020 206d 6574 6176 6172 3d22 524f 4f4d     metavar="ROOM
+00046c50: 5f41 4c49 4153 222c 0a20 2020 2020 2020  _ALIAS",.       
+00046c60: 2068 656c 703d 2243 7265 6174 6520 6f6e   help="Create on
+00046c70: 6520 6f72 206d 756c 7469 706c 6520 726f  e or multiple ro
+00046c80: 6f6d 7320 666f 7220 6769 7665 6e20 616c  oms for given al
+00046c90: 6961 7328 6573 292e 2022 0a20 2020 2020  ias(es). ".     
+00046ca0: 2020 2022 4465 7461 696c 733a 3a20 4f6e     "Details:: On
+00046cb0: 6520 6f72 206d 756c 7469 706c 6520 220a  e or multiple ".
+00046cc0: 2020 2020 2020 2020 2272 6f6f 6d20 616c          "room al
+00046cd0: 6961 7365 7320 6361 6e20 6265 2073 7065  iases can be spe
+00046ce0: 6369 6669 6564 2e20 220a 2020 2020 2020  cified. ".      
+00046cf0: 2020 2246 6f72 2065 6163 6820 616c 6961    "For each alia
+00046d00: 7320 7370 6563 6966 6965 6420 6120 726f  s specified a ro
+00046d10: 6f6d 2077 696c 6c20 6265 2063 7265 6174  om will be creat
+00046d20: 6564 2e20 220a 2020 2020 2020 2020 2246  ed. ".        "F
+00046d30: 6f72 2065 6163 6820 6372 6561 7465 6420  or each created 
+00046d40: 726f 6f6d 206f 6e65 206c 696e 6520 7769  room one line wi
+00046d50: 7468 2072 6f6f 6d20 6964 2061 6e64 2061  th room id and a
+00046d60: 6c69 6173 2022 0a20 2020 2020 2020 2022  lias ".        "
+00046d70: 7769 6c6c 2062 6520 7072 696e 7465 6420  will be printed 
+00046d80: 746f 2073 7464 6f75 742e 2022 0a20 2020  to stdout. ".   
+00046d90: 2020 2020 2022 4966 2079 6f75 2061 7265       "If you are
+00046da0: 206e 6f74 2069 6e74 6572 6573 7465 6420   not interested 
+00046db0: 696e 2061 6e20 220a 2020 2020 2020 2020  in an ".        
+00046dc0: 2761 6c69 6173 2c20 7072 6f76 6964 6520  'alias, provide 
+00046dd0: 616e 2065 6d70 7479 2073 7472 696e 6720  an empty string 
+00046de0: 6c69 6b65 2022 222e 2027 0a20 2020 2020  like "". '.     
+00046df0: 2020 2022 5468 6520 616c 6961 7320 7072     "The alias pr
+00046e00: 6f76 6964 6564 206d 7573 7420 6265 2069  ovided must be i
+00046e10: 6e20 6361 6e6f 6e69 6361 6c20 6c6f 6361  n canonical loca
+00046e20: 6c20 666f 726d 2c20 692e 652e 2022 0a20  l form, i.e. ". 
+00046e30: 2020 2020 2020 2022 6966 2079 6f75 2077         "if you w
+00046e40: 616e 7420 6120 6669 6e61 6c20 6675 6c6c  ant a final full
+00046e50: 2061 6c69 6173 206c 696b 6520 220a 2020   alias like ".  
+00046e60: 2020 2020 2020 2722 2353 6f6d 6552 6f6f        '"#SomeRoo
+00046e70: 6d41 6c69 6173 3a6d 6174 7269 782e 6578  mAlias:matrix.ex
+00046e80: 616d 706c 652e 636f 6d22 2027 0a20 2020  ample.com" '.   
+00046e90: 2020 2020 2022 796f 7520 6d75 7374 2070       "you must p
+00046ea0: 726f 7669 6465 2074 6865 2073 7472 696e  rovide the strin
+00046eb0: 6720 2753 6f6d 6552 6f6f 6d41 6c69 6173  g 'SomeRoomAlias
+00046ec0: 272e 2022 0a20 2020 2020 2020 2022 5468  '. ".        "Th
+00046ed0: 6520 7573 6572 206d 7573 7420 6265 2070  e user must be p
+00046ee0: 6572 6d69 7474 6564 2074 6f20 6372 6561  ermitted to crea
+00046ef0: 7465 2072 6f6f 6d73 2e20 220a 2020 2020  te rooms. ".    
+00046f00: 2020 2020 2243 6f6d 6269 6e65 202d 2d72      "Combine --r
+00046f10: 6f6f 6d2d 6372 6561 7465 2077 6974 6820  oom-create with 
+00046f20: 2d2d 6e61 6d65 2061 6e64 202d 2d74 6f70  --name and --top
+00046f30: 6963 2074 6f20 6164 6420 220a 2020 2020  ic to add ".    
+00046f40: 2020 2020 226e 616d 6573 2061 6e64 2074      "names and t
+00046f50: 6f70 6963 7320 746f 2074 6865 2072 6f6f  opics to the roo
+00046f60: 6d28 7329 2074 6f20 6265 2063 7265 6174  m(s) to be creat
+00046f70: 6564 2e20 220a 2020 2020 2020 2020 2252  ed. ".        "R
+00046f80: 6f6f 6d73 2061 7265 2062 7920 6465 6661  ooms are by defa
+00046f90: 756c 7420 6372 6561 7465 6420 656e 6372  ult created encr
+00046fa0: 7970 7465 643b 2022 0a20 2020 2020 2020  ypted; ".       
+00046fb0: 2022 746f 206f 7665 7277 7269 7465 2074   "to overwrite t
+00046fc0: 6861 7420 616e 6420 746f 2063 7265 6174  hat and to creat
+00046fd0: 6520 6120 726f 6f6d 2077 6974 6820 656e  e a room with en
+00046fe0: 6372 7970 7469 6f6e 2064 6973 6162 6c65  cryption disable
+00046ff0: 6420 220a 2020 2020 2020 2020 2275 7365  d ".        "use
+00047000: 2027 2d2d 706c 6169 6e27 2e20 220a 2020   '--plain'. ".  
+00047010: 2020 2020 2020 2252 6f6f 6d20 6964 2c20        "Room id, 
+00047020: 726f 6f6d 2061 6c69 6173 2c20 656e 6372  room alias, encr
+00047030: 7970 7469 6f6e 2061 6e64 206f 7468 6572  yption and other
+00047040: 2066 6965 6c64 7320 220a 2020 2020 2020   fields ".      
+00047050: 2020 2261 7265 2070 7269 6e74 6564 2061    "are printed a
+00047060: 7320 6f75 7470 7574 2c20 6f6e 6520 6c69  s output, one li
+00047070: 6e65 2070 6572 2063 7265 6174 6564 2072  ne per created r
+00047080: 6f6f 6d2e 222c 0a20 2020 2029 0a20 2020  oom.",.    ).   
+00047090: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+000470a0: 280a 2020 2020 2020 2020 222d 2d72 6f6f  (.        "--roo
+000470b0: 6d2d 646d 2d63 7265 6174 6522 2c0a 2020  m-dm-create",.  
+000470c0: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+000470d0: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
+000470e0: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
+000470f0: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
+00047100: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
+00047110: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
+00047120: 7661 723d 2255 5345 5222 2c0a 2020 2020  var="USER",.    
+00047130: 2020 2020 6865 6c70 3d22 4372 6561 7465      help="Create
+00047140: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
+00047150: 2044 4d20 726f 6f6d 7320 7769 7468 2074   DM rooms with t
+00047160: 6865 2073 7065 6369 6669 6564 2075 7365  he specified use
+00047170: 7273 2e20 220a 2020 2020 2020 2020 2244  rs. ".        "D
+00047180: 6574 6169 6c73 3a3a 2046 6f72 2065 6163  etails:: For eac
+00047190: 6820 7573 6572 2073 7065 6369 6669 6564  h user specified
+000471a0: 2061 2044 4d20 726f 6f6d 2077 696c 6c20   a DM room will 
+000471b0: 6265 2063 7265 6174 6564 2061 6e64 2074  be created and t
+000471c0: 6865 2022 0a20 2020 2020 2020 2022 7573  he ".        "us
+000471d0: 6572 2069 6e76 6974 6564 2074 6f20 6974  er invited to it
+000471e0: 2e20 466f 7220 6561 6368 2063 7265 6174  . For each creat
+000471f0: 6564 2072 6f6f 6d20 6f6e 6520 6c69 6e65  ed room one line
+00047200: 2077 6974 6820 220a 2020 2020 2020 2020   with ".        
+00047210: 2272 6f6f 6d20 6964 2061 6e64 2061 6c69  "room id and ali
+00047220: 6173 2077 696c 6c20 6265 2070 7269 6e74  as will be print
+00047230: 6564 2074 6f20 7374 646f 7574 2e20 5468  ed to stdout. Th
+00047240: 6520 7573 6572 2022 0a20 2020 2020 2020  e user ".       
+00047250: 2022 6d75 7374 2062 6520 7065 726d 6974   "must be permit
+00047260: 7465 6420 746f 2063 7265 6174 6520 726f  ted to create ro
+00047270: 6f6d 732e 2043 6f6d 6269 6e65 202d 2d72  oms. Combine --r
+00047280: 6f6f 6d2d 646d 2d63 7265 6174 6520 220a  oom-dm-create ".
+00047290: 2020 2020 2020 2020 2277 6974 6820 2d2d          "with --
+000472a0: 6e61 6d65 2c20 2d2d 746f 7069 632c 202d  name, --topic, -
+000472b0: 2d61 6c69 6173 2074 6f20 6164 6420 6e61  -alias to add na
+000472c0: 6d65 732c 2074 6f70 6963 7320 616e 6420  mes, topics and 
+000472d0: 220a 2020 2020 2020 2020 2261 6c69 6173  ".        "alias
+000472e0: 6573 2074 6f20 7468 6520 726f 6f6d 2873  es to the room(s
+000472f0: 2920 746f 2062 6520 6372 6561 7465 642e  ) to be created.
+00047300: 2022 0a20 2020 2020 2020 2022 444d 2072   ".        "DM r
+00047310: 6f6f 6d73 2061 7265 2062 7920 6465 6661  ooms are by defa
+00047320: 756c 7420 6372 6561 7465 6420 656e 6372  ult created encr
+00047330: 7970 7465 643b 2022 0a20 2020 2020 2020  ypted; ".       
+00047340: 2022 746f 206f 7665 7277 7269 7465 2074   "to overwrite t
+00047350: 6861 7420 616e 6420 746f 2063 7265 6174  hat and to creat
+00047360: 6520 6120 726f 6f6d 2077 6974 6820 656e  e a room with en
+00047370: 6372 7970 7469 6f6e 2064 6973 6162 6c65  cryption disable
+00047380: 6420 220a 2020 2020 2020 2020 2275 7365  d ".        "use
+00047390: 2027 2d2d 706c 6169 6e27 2e20 220a 2020   '--plain'. ".  
+000473a0: 2020 2020 2020 2253 6565 206f 7074 696f        "See optio
+000473b0: 6e20 272d 2d72 6f6f 6d2d 646d 2d63 7265  n '--room-dm-cre
+000473c0: 6174 652d 616c 6c6f 772d 6475 706c 6963  ate-allow-duplic
+000473d0: 6174 6573 272e 2049 6620 6e6f 7420 7573  ates'. If not us
+000473e0: 6564 2c20 220a 2020 2020 2020 2020 2274  ed, ".        "t
+000473f0: 6865 6e20 616e 2069 6e76 6974 6174 696f  hen an invitatio
+00047400: 6e2d 6163 6365 7074 6564 2044 4d20 726f  n-accepted DM ro
+00047410: 6f6d 2069 7320 7365 6172 6368 6564 2e20  om is searched. 
+00047420: 4966 2061 6e20 6578 6973 7469 6e67 2022  If an existing "
+00047430: 0a20 2020 2020 2020 2022 444d 2072 6f6f  .        "DM roo
+00047440: 6d20 6973 2066 6f75 6e64 2c20 6e6f 206e  m is found, no n
+00047450: 6577 2044 4d20 726f 6f6d 2077 696c 6c20  ew DM room will 
+00047460: 6265 2063 7265 6174 6564 2e20 4966 2063  be created. If c
+00047470: 7572 7265 6e74 6c79 2022 0a20 2020 2020  urrently ".     
+00047480: 2020 2022 6e6f 2069 6e76 6974 6174 696f     "no invitatio
+00047490: 6e2d 6163 6365 7074 6564 2044 4d20 726f  n-accepted DM ro
+000474a0: 6f6d 2065 7869 7374 7320 6f72 2022 0a20  om exists or ". 
+000474b0: 2020 2020 2020 2022 2d2d 726f 6f6d 2d64         "--room-d
+000474c0: 6d2d 6372 6561 7465 2d61 6c6c 6f77 2d64  m-create-allow-d
+000474d0: 7570 6c69 6361 7465 7320 6973 2075 7365  uplicates is use
+000474e0: 642c 2074 6865 6e20 6120 6e65 7720 444d  d, then a new DM
+000474f0: 2077 696c 6c20 6265 2022 0a20 2020 2020   will be ".     
+00047500: 2020 2022 6372 6561 7465 642e 204e 6f74     "created. Not
+00047510: 652c 2074 6861 7420 6f6e 6520 6361 6e20  e, that one can 
+00047520: 6372 6561 7465 2f68 6176 6520 616e 7920  create/have any 
+00047530: 6e75 6d62 6572 206f 6620 444d 2072 6f6f  number of DM roo
+00047540: 6d73 2022 0a20 2020 2020 2020 2022 7769  ms ".        "wi
+00047550: 7468 2074 6865 2073 616d 6520 7065 7273  th the same pers
+00047560: 6f6e 2e20 220a 2020 2020 2020 2020 2252  on. ".        "R
+00047570: 6f6f 6d20 6964 2c20 726f 6f6d 2061 6c69  oom id, room ali
+00047580: 6173 2c20 656e 6372 7970 7469 6f6e 2061  as, encryption a
+00047590: 6e64 206f 7468 6572 2066 6965 6c64 7320  nd other fields 
+000475a0: 220a 2020 2020 2020 2020 2261 7265 2070  ".        "are p
+000475b0: 7269 6e74 6564 2061 7320 6f75 7470 7574  rinted as output
+000475c0: 2c20 6f6e 6520 6c69 6e65 2070 6572 2063  , one line per c
+000475d0: 7265 6174 6564 2072 6f6f 6d2e 2022 0a20  reated room. ". 
+000475e0: 2020 2020 2020 2022 4966 2061 2072 6f6f         "If a roo
+000475f0: 6d20 6973 206e 6f74 2063 7265 6174 6564  m is not created
+00047600: 2062 6563 6175 7365 206f 6e65 2061 6c72   because one alr
+00047610: 6561 6479 2065 7869 7374 732c 2022 0a20  eady exists, ". 
+00047620: 2020 2020 2020 2022 7468 656e 2074 6865         "then the
+00047630: 2072 6f6f 6d20 6964 206f 6620 7468 6520   room id of the 
+00047640: 6669 7273 7420 444d 2072 6f6f 6d20 666f  first DM room fo
+00047650: 756e 6420 6973 2070 7269 6e74 6564 2c20  und is printed, 
+00047660: 220a 2020 2020 2020 2020 2262 7574 206e  ".        "but n
+00047670: 6569 7468 6572 2074 6865 2061 6c69 6173  either the alias
+00047680: 206e 6f72 206f 7468 6572 2066 6965 6c64   nor other field
+00047690: 732e 222c 0a20 2020 2029 0a20 2020 2061  s.",.    ).    a
+000476a0: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
+000476b0: 2020 2020 2020 2020 222d 2d72 6f6f 6d2d          "--room-
+000476c0: 646d 2d63 7265 6174 652d 616c 6c6f 772d  dm-create-allow-
+000476d0: 6475 706c 6963 6174 6573 222c 0a20 2020  duplicates",.   
+000476e0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+000476f0: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
+00047700: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
+00047710: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
+00047720: 416c 6c6f 7720 6372 6561 7469 6e67 2064  Allow creating d
+00047730: 7570 6c69 6361 7465 2044 4d20 726f 6f6d  uplicate DM room
+00047740: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
+00047750: 7461 696c 733a 3a20 4279 2064 6566 6175  tails:: By defau
+00047760: 6c74 2c20 6966 2074 6869 7320 6f70 7469  lt, if this opti
+00047770: 6f6e 2069 7320 626f 7420 7573 6564 2022  on is bot used "
+00047780: 0a20 2020 2020 2020 2022 6475 706c 6963  .        "duplic
+00047790: 6174 6573 2061 7265 2061 766f 6964 6564  ates are avoided
+000477a0: 2e20 220a 2020 2020 2020 2020 2241 6374  . ".        "Act
+000477b0: 696f 6e73 2074 6861 7420 7375 7070 6f72  ions that suppor
+000477c0: 7420 7468 6973 206f 7074 696f 6e20 6172  t this option ar
+000477d0: 653a 202d 2d72 6f6f 6d2d 646d 2d63 7265  e: --room-dm-cre
+000477e0: 6174 652e 2022 0a20 2020 2020 2020 2022  ate. ".        "
+000477f0: 546f 206f 7665 7277 7269 7465 2074 6861  To overwrite tha
+00047800: 7420 6465 6661 756c 7420 616e 6420 746f  t default and to
+00047810: 2061 6c6c 6f77 2074 6865 2063 7265 6174   allow the creat
+00047820: 696f 6e20 6f66 2061 2044 4d20 726f 6f6d  ion of a DM room
+00047830: 2022 0a20 2020 2020 2020 2022 6576 656e   ".        "even
+00047840: 2069 6620 6120 444d 2072 6f6f 6d20 616c   if a DM room al
+00047850: 7265 6164 7920 6578 6973 7473 2c20 220a  ready exists, ".
+00047860: 2020 2020 2020 2020 2275 7365 2027 2d2d          "use '--
+00047870: 726f 6f6d 2d64 6d2d 6372 6561 7465 2d61  room-dm-create-a
+00047880: 6c6c 6f77 2d64 7570 6c69 6361 7465 7327  llow-duplicates'
+00047890: 2e20 220a 2020 2020 2020 2020 2253 6565  . ".        "See
+000478a0: 2074 6865 202d 2d72 6f6f 6d2d 646d 2d63   the --room-dm-c
+000478b0: 7265 6174 6520 636f 6d6d 616e 6473 2e22  reate commands."
+000478c0: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+000478d0: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+000478e0: 2020 2020 2022 2d2d 726f 6f6d 2d6a 6f69       "--room-joi
+000478f0: 6e22 2c0a 2020 2020 2020 2020 7265 7175  n",.        requ
+00047900: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
+00047910: 2020 2020 6163 7469 6f6e 3d22 6578 7465      action="exte
+00047920: 6e64 222c 0a20 2020 2020 2020 206e 6172  nd",.        nar
+00047930: 6773 3d22 2b22 2c0a 2020 2020 2020 2020  gs="+",.        
+00047940: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
+00047950: 2020 6d65 7461 7661 723d 2252 4f4f 4d22    metavar="ROOM"
+00047960: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
+00047970: 4a6f 696e 206f 6e65 2072 6f6f 6d20 6f72  Join one room or
+00047980: 206d 756c 7469 706c 6520 726f 6f6d 732e   multiple rooms.
+00047990: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
+000479a0: 696c 733a 3a20 4f6e 6520 6f72 206d 756c  ils:: One or mul
+000479b0: 7469 706c 6520 220a 2020 2020 2020 2020  tiple ".        
+000479c0: 2272 6f6f 6d20 616c 6961 7365 7320 6361  "room aliases ca
+000479d0: 6e20 6265 2073 7065 6369 6669 6564 2e20  n be specified. 
+000479e0: 5468 6520 726f 6f6d 2028 6f72 206d 756c  The room (or mul
+000479f0: 7469 706c 6520 220a 2020 2020 2020 2020  tiple ".        
+00047a00: 226f 6e65 7329 2070 726f 7669 6465 6420  "ones) provided 
+00047a10: 696e 2074 6865 2061 7267 756d 656e 7473  in the arguments
+00047a20: 2077 696c 6c20 6265 206a 6f69 6e65 642e   will be joined.
+00047a30: 2022 0a20 2020 2020 2020 2022 5468 6520   ".        "The 
+00047a40: 7573 6572 206d 7573 7420 6861 7665 2070  user must have p
+00047a50: 6572 6d69 7373 696f 6e73 2074 6f20 6a6f  ermissions to jo
+00047a60: 696e 2074 6865 7365 2072 6f6f 6d73 2e22  in these rooms."
+00047a70: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+00047a80: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+00047a90: 2020 2020 2022 2d2d 726f 6f6d 2d6c 6561       "--room-lea
+00047aa0: 7665 222c 0a20 2020 2020 2020 2072 6571  ve",.        req
+00047ab0: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
+00047ac0: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
+00047ad0: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
+00047ae0: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
+00047af0: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
+00047b00: 2020 206d 6574 6176 6172 3d22 524f 4f4d     metavar="ROOM
+00047b10: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
+00047b20: 224c 6561 7665 206f 6e65 2072 6f6f 6d20  "Leave one room 
+00047b30: 6f72 206d 756c 7469 706c 6520 726f 6f6d  or multiple room
+00047b40: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
+00047b50: 7461 696c 733a 3a20 4f6e 6520 6f72 206d  tails:: One or m
+00047b60: 756c 7469 706c 6520 220a 2020 2020 2020  ultiple ".      
+00047b70: 2020 2272 6f6f 6d20 616c 6961 7365 7320    "room aliases 
+00047b80: 6361 6e20 6265 2073 7065 6369 6669 6564  can be specified
+00047b90: 2e20 5468 6520 726f 6f6d 2028 6f72 206d  . The room (or m
+00047ba0: 756c 7469 706c 6520 220a 2020 2020 2020  ultiple ".      
+00047bb0: 2020 226f 6e65 7329 2070 726f 7669 6465    "ones) provide
+00047bc0: 6420 696e 2074 6865 2061 7267 756d 656e  d in the argumen
+00047bd0: 7473 2077 696c 6c20 6265 206c 6566 742e  ts will be left.
+00047be0: 2022 2c0a 2020 2020 290a 2020 2020 6170   ",.    ).    ap
+00047bf0: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
+00047c00: 2020 2020 2020 2022 2d2d 726f 6f6d 2d66         "--room-f
+00047c10: 6f72 6765 7422 2c0a 2020 2020 2020 2020  orget",.        
+00047c20: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
+00047c30: 2020 2020 2020 2020 6163 7469 6f6e 3d22          action="
+00047c40: 6578 7465 6e64 222c 0a20 2020 2020 2020  extend",.       
+00047c50: 206e 6172 6773 3d22 2b22 2c0a 2020 2020   nargs="+",.    
+00047c60: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
+00047c70: 2020 2020 2020 6d65 7461 7661 723d 2252        metavar="R
+00047c80: 4f4f 4d22 2c0a 2020 2020 2020 2020 6865  OOM",.        he
+00047c90: 6c70 3d22 466f 7267 6574 206f 6e65 2072  lp="Forget one r
+00047ca0: 6f6f 6d20 6f72 206d 756c 7469 706c 6520  oom or multiple 
+00047cb0: 726f 6f6d 732e 2022 0a20 2020 2020 2020  rooms. ".       
+00047cc0: 2022 4465 7461 696c 733a 3a20 4166 7465   "Details:: Afte
+00047cd0: 7220 6c65 6176 696e 6720 6120 726f 6f6d  r leaving a room
+00047ce0: 2079 6f75 2073 686f 756c 6420 286d 6f73   you should (mos
+00047cf0: 7420 6c69 6b65 6c79 2920 666f 7267 6574  t likely) forget
+00047d00: 2074 6865 2022 0a20 2020 2020 2020 2022   the ".        "
+00047d10: 726f 6f6d 2e20 466f 7267 6574 7469 6e67  room. Forgetting
+00047d20: 2061 2072 6f6f 6d20 7265 6d6f 7665 7320   a room removes 
+00047d30: 7468 6520 7573 6572 7327 2072 6f6f 6d20  the users' room 
+00047d40: 6869 7374 6f72 792e 2022 0a20 2020 2020  history. ".     
+00047d50: 2020 2022 4f6e 6520 6f72 206d 756c 7469     "One or multi
+00047d60: 706c 6520 220a 2020 2020 2020 2020 2272  ple ".        "r
+00047d70: 6f6f 6d20 616c 6961 7365 7320 6361 6e20  oom aliases can 
+00047d80: 6265 2073 7065 6369 6669 6564 2e20 5468  be specified. Th
+00047d90: 6520 726f 6f6d 2028 6f72 206d 756c 7469  e room (or multi
+00047da0: 706c 6520 220a 2020 2020 2020 2020 226f  ple ".        "o
+00047db0: 6e65 7329 2070 726f 7669 6465 6420 696e  nes) provided in
+00047dc0: 2074 6865 2061 7267 756d 656e 7473 2077   the arguments w
+00047dd0: 696c 6c20 6265 2066 6f72 676f 7474 656e  ill be forgotten
+00047de0: 2e20 220a 2020 2020 2020 2020 2249 6620  . ".        "If 
+00047df0: 616c 6c20 7573 6572 7320 666f 7267 6574  all users forget
+00047e00: 2061 2072 6f6f 6d2c 2074 6865 2072 6f6f   a room, the roo
+00047e10: 6d20 6361 6e20 6576 656e 7475 616c 6c79  m can eventually
+00047e20: 2062 6520 220a 2020 2020 2020 2020 2264   be ".        "d
+00047e30: 656c 6574 6564 206f 6e20 7468 6520 7365  eleted on the se
+00047e40: 7276 6572 2e22 2c0a 2020 2020 290a 2020  rver.",.    ).  
+00047e50: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+00047e60: 7428 0a20 2020 2020 2020 2022 2d2d 726f  t(.        "--ro
+00047e70: 6f6d 2d69 6e76 6974 6522 2c0a 2020 2020  om-invite",.    
+00047e80: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+00047e90: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
+00047ea0: 6f6e 3d22 6578 7465 6e64 222c 0a20 2020  on="extend",.   
+00047eb0: 2020 2020 206e 6172 6773 3d22 2b22 2c0a       nargs="+",.
+00047ec0: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
+00047ed0: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
+00047ee0: 723d 2252 4f4f 4d22 2c0a 2020 2020 2020  r="ROOM",.      
+00047ef0: 2020 6865 6c70 3d22 496e 7669 7465 206f    help="Invite o
+00047f00: 6e65 206f 7265 206d 6f72 6520 7573 6572  ne ore more user
+00047f10: 7320 746f 206a 6f69 6e20 6f6e 6520 6f72  s to join one or
+00047f20: 206d 6f72 6520 726f 6f6d 732e 2022 0a20   more rooms. ". 
+00047f30: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
+00047f40: 3a20 5370 6563 6966 7920 7468 6520 7573  : Specify the us
+00047f50: 6572 2873 2920 6173 2061 7267 756d 656e  er(s) as argumen
+00047f60: 7473 2074 6f20 2d2d 7573 6572 2e20 220a  ts to --user. ".
+00047f70: 2020 2020 2020 2020 2253 7065 6369 6679          "Specify
+00047f80: 2074 6865 2072 6f6f 6d73 2061 7320 6172   the rooms as ar
+00047f90: 6775 6d65 6e74 7320 746f 2074 6869 7320  guments to this 
+00047fa0: 6f70 7469 6f6e 2c20 692e 652e 2022 0a20  option, i.e. ". 
+00047fb0: 2020 2020 2020 2022 6173 2061 7267 756d         "as argum
+00047fc0: 656e 7473 2074 6f20 2d2d 726f 6f6d 2d69  ents to --room-i
+00047fd0: 6e76 6974 652e 2022 0a20 2020 2020 2020  nvite. ".       
+00047fe0: 2022 5468 6520 7573 6572 206d 7573 7420   "The user must 
+00047ff0: 6861 7665 2070 6572 6d69 7373 696f 6e73  have permissions
+00048000: 2074 6f20 696e 7669 7465 2075 7365 7273   to invite users
+00048010: 2e20 220a 2020 2020 2020 2020 2244 6f6e  . ".        "Don
+00048020: 2774 2063 6f6e 6675 7365 2074 6869 7320  't confuse this 
+00048030: 6f70 7469 6f6e 2077 6974 6820 2d2d 726f  option with --ro
+00048040: 6f6d 2d69 6e76 6974 6573 2e22 2c0a 2020  om-invites.",.  
+00048050: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+00048060: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+00048070: 2022 2d2d 726f 6f6d 2d62 616e 222c 0a20   "--room-ban",. 
+00048080: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+00048090: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+000480a0: 6374 696f 6e3d 2265 7874 656e 6422 2c0a  ction="extend",.
+000480b0: 2020 2020 2020 2020 6e61 7267 733d 222b          nargs="+
+000480c0: 222c 0a20 2020 2020 2020 2074 7970 653d  ",.        type=
+000480d0: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
+000480e0: 6176 6172 3d22 524f 4f4d 222c 0a20 2020  avar="ROOM",.   
+000480f0: 2020 2020 2068 656c 703d 2242 616e 206f       help="Ban o
+00048100: 6e65 206f 7265 206d 6f72 6520 7573 6572  ne ore more user
+00048110: 7320 6672 6f6d 206f 6e65 206f 7220 6d6f  s from one or mo
+00048120: 7265 2072 6f6f 6d73 2e20 220a 2020 2020  re rooms. ".    
+00048130: 2020 2020 2244 6574 6169 6c73 3a3a 2053      "Details:: S
+00048140: 7065 6369 6679 2074 6865 2075 7365 7228  pecify the user(
+00048150: 7329 2061 7320 6172 6775 6d65 6e74 7320  s) as arguments 
+00048160: 746f 202d 2d75 7365 722e 2022 0a20 2020  to --user. ".   
+00048170: 2020 2020 2022 5370 6563 6966 7920 7468       "Specify th
+00048180: 6520 726f 6f6d 7320 6173 2061 7267 756d  e rooms as argum
+00048190: 656e 7473 2074 6f20 7468 6973 206f 7074  ents to this opt
+000481a0: 696f 6e2c 2069 2e65 2e20 220a 2020 2020  ion, i.e. ".    
+000481b0: 2020 2020 2261 7320 6172 6775 6d65 6e74      "as argument
+000481c0: 7320 746f 202d 2d72 6f6f 6d2d 6261 6e2e  s to --room-ban.
+000481d0: 2022 0a20 2020 2020 2020 2022 5468 6520   ".        "The 
+000481e0: 7573 6572 206d 7573 7420 6861 7665 2070  user must have p
+000481f0: 6572 6d69 7373 696f 6e73 2074 6f20 6261  ermissions to ba
+00048200: 6e20 7573 6572 732e 222c 0a20 2020 2029  n users.",.    )
+00048210: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
+00048220: 6d65 6e74 280a 2020 2020 2020 2020 222d  ment(.        "-
+00048230: 2d72 6f6f 6d2d 756e 6261 6e22 2c0a 2020  -room-unban",.  
+00048240: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+00048250: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
+00048260: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
+00048270: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
+00048280: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
+00048290: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
+000482a0: 7661 723d 2252 4f4f 4d22 2c0a 2020 2020  var="ROOM",.    
+000482b0: 2020 2020 6865 6c70 3d22 556e 6261 6e20      help="Unban 
+000482c0: 6f6e 6520 6f72 6520 6d6f 7265 2075 7365  one ore more use
+000482d0: 7273 2066 726f 6d20 6f6e 6520 6f72 206d  rs from one or m
+000482e0: 6f72 6520 726f 6f6d 732e 2022 0a20 2020  ore rooms. ".   
+000482f0: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+00048300: 5370 6563 6966 7920 7468 6520 7573 6572  Specify the user
+00048310: 2873 2920 6173 2061 7267 756d 656e 7473  (s) as arguments
+00048320: 2074 6f20 2d2d 7573 6572 2e20 220a 2020   to --user. ".  
+00048330: 2020 2020 2020 2253 7065 6369 6679 2074        "Specify t
+00048340: 6865 2072 6f6f 6d73 2061 7320 6172 6775  he rooms as argu
+00048350: 6d65 6e74 7320 746f 2074 6869 7320 6f70  ments to this op
+00048360: 7469 6f6e 2c20 692e 652e 2022 0a20 2020  tion, i.e. ".   
+00048370: 2020 2020 2022 6173 2061 7267 756d 656e       "as argumen
+00048380: 7473 2074 6f20 2d2d 726f 6f6d 2d75 6e62  ts to --room-unb
+00048390: 616e 2e20 220a 2020 2020 2020 2020 2254  an. ".        "T
+000483a0: 6865 2075 7365 7220 6d75 7374 2068 6176  he user must hav
+000483b0: 6520 7065 726d 6973 7369 6f6e 7320 746f  e permissions to
+000483c0: 2075 6e62 616e 2075 7365 7273 2e22 2c0a   unban users.",.
+000483d0: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
+000483e0: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+000483f0: 2020 2022 2d2d 726f 6f6d 2d6b 6963 6b22     "--room-kick"
+00048400: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+00048410: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
+00048420: 2020 6163 7469 6f6e 3d22 6578 7465 6e64    action="extend
+00048430: 222c 0a20 2020 2020 2020 206e 6172 6773  ",.        nargs
+00048440: 3d22 2b22 2c0a 2020 2020 2020 2020 7479  ="+",.        ty
+00048450: 7065 3d73 7472 2c0a 2020 2020 2020 2020  pe=str,.        
+00048460: 6d65 7461 7661 723d 2252 4f4f 4d22 2c0a  metavar="ROOM",.
+00048470: 2020 2020 2020 2020 6865 6c70 3d22 4b69          help="Ki
+00048480: 636b 206f 6e65 206f 7265 206d 6f72 6520  ck one ore more 
+00048490: 7573 6572 7320 6672 6f6d 206f 6e65 206f  users from one o
+000484a0: 7220 6d6f 7265 2072 6f6f 6d73 2e20 220a  r more rooms. ".
+000484b0: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+000484c0: 3a3a 2053 7065 6369 6679 2074 6865 2075  :: Specify the u
+000484d0: 7365 7228 7329 2061 7320 6172 6775 6d65  ser(s) as argume
+000484e0: 6e74 7320 746f 202d 2d75 7365 722e 2022  nts to --user. "
+000484f0: 0a20 2020 2020 2020 2022 5370 6563 6966  .        "Specif
+00048500: 7920 7468 6520 726f 6f6d 7320 6173 2061  y the rooms as a
+00048510: 7267 756d 656e 7473 2074 6f20 7468 6973  rguments to this
+00048520: 206f 7074 696f 6e2c 2069 2e65 2e20 220a   option, i.e. ".
+00048530: 2020 2020 2020 2020 2261 7320 6172 6775          "as argu
+00048540: 6d65 6e74 7320 746f 202d 2d72 6f6f 6d2d  ments to --room-
+00048550: 6b69 636b 2e20 220a 2020 2020 2020 2020  kick. ".        
+00048560: 2254 6865 2075 7365 7220 6d75 7374 2068  "The user must h
+00048570: 6176 6520 7065 726d 6973 7369 6f6e 7320  ave permissions 
+00048580: 746f 206b 6963 6b20 7573 6572 732e 222c  to kick users.",
+00048590: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
+000485a0: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+000485b0: 2020 2020 2320 7374 6172 7469 6e67 2077      # starting w
+000485c0: 6974 6820 7665 7273 696f 6e20 322e 3139  ith version 2.19
+000485d0: 2022 2d75 2220 6861 7320 6265 656e 206d   "-u" has been m
+000485e0: 6f76 6564 2066 726f 6d0a 2020 2020 2020  oved from.      
+000485f0: 2020 2320 2d2d 646f 776e 6c6f 6164 2d6d    # --download-m
+00048600: 6564 6961 2074 6f20 2d2d 7573 6572 210a  edia to --user!.
+00048610: 2020 2020 2020 2020 222d 7522 2c0a 2020          "-u",.  
+00048620: 2020 2020 2020 222d 2d75 7365 7222 2c0a        "--user",.
+00048630: 2020 2020 2020 2020 7265 7175 6972 6564          required
+00048640: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00048650: 6163 7469 6f6e 3d22 6578 7465 6e64 222c  action="extend",
+00048660: 0a20 2020 2020 2020 206e 6172 6773 3d22  .        nargs="
+00048670: 2b22 2c0a 2020 2020 2020 2020 7479 7065  +",.        type
+00048680: 3d73 7472 2c0a 2020 2020 2020 2020 6d65  =str,.        me
+00048690: 7461 7661 723d 2255 5345 5222 2c0a 2020  tavar="USER",.  
+000486a0: 2020 2020 2020 6865 6c70 3d22 5370 6563        help="Spec
+000486b0: 6966 7920 6f6e 6520 6f72 206d 756c 7469  ify one or multi
+000486c0: 706c 6520 7573 6572 732e 2022 0a20 2020  ple users. ".   
+000486d0: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+000486e0: 5468 6973 206f 7074 696f 6e20 6973 206d  This option is m
+000486f0: 6561 6e69 6e67 6675 6c20 220a 2020 2020  eaningful ".    
+00048700: 2020 2020 2269 6e20 636f 6d62 696e 6174      "in combinat
+00048710: 696f 6e20 7769 7468 2061 2920 726f 6f6d  ion with a) room
+00048720: 2061 6374 696f 6e73 206c 696b 6520 2d2d   actions like --
+00048730: 726f 6f6d 2d69 6e76 6974 652c 202d 2d72  room-invite, --r
+00048740: 6f6f 6d2d 6261 6e2c 2022 0a20 2020 2020  oom-ban, ".     
+00048750: 2020 2022 2d2d 726f 6f6d 2d75 6e62 616e     "--room-unban
+00048760: 2c20 6574 632e 2061 6e64 2062 2920 7365  , etc. and b) se
+00048770: 6e64 2061 6374 696f 6e73 206c 696b 6520  nd actions like 
+00048780: 2d6d 2c20 2d69 2c20 2d66 2c20 6574 632e  -m, -i, -f, etc.
+00048790: 2022 0a20 2020 2020 2020 2022 6329 2073   ".        "c) s
+000487a0: 6f6d 6520 6c69 7374 656e 2061 6374 696f  ome listen actio
+000487b0: 6e73 202d 2d6c 6973 7465 6e2c 2061 7320  ns --listen, as 
+000487c0: 7765 6c6c 2061 7320 6429 2061 6374 696f  well as d) actio
+000487d0: 6e73 206c 696b 6520 220a 2020 2020 2020  ns like ".      
+000487e0: 2020 222d 2d64 656c 6574 652d 6465 7669    "--delete-devi
+000487f0: 6365 2e20 220a 2020 2020 2020 2020 2249  ce. ".        "I
+00048800: 6e20 6361 7365 206f 6620 6129 2074 6869  n case of a) thi
+00048810: 7320 6f70 7469 6f6e 202d 2d75 7365 7220  s option --user 
+00048820: 7370 6563 6966 6965 7320 7468 6520 7573  specifies the us
+00048830: 6572 7320 220a 2020 2020 2020 2020 2274  ers ".        "t
+00048840: 6f20 6265 2075 7365 6420 7769 7468 2072  o be used with r
+00048850: 6f6f 6d20 636f 6d6d 616e 6473 2028 6c69  oom commands (li
+00048860: 6b65 2069 6e76 6974 652c 2062 616e 2c20  ke invite, ban, 
+00048870: 6574 632e 292e 2022 0a20 2020 2020 2020  etc.). ".       
+00048880: 2022 496e 2063 6173 6520 6f66 2062 2920   "In case of b) 
+00048890: 7468 6520 6f70 7469 6f6e 202d 2d75 7365  the option --use
+000488a0: 7220 6361 6e20 6265 2075 7365 6420 6173  r can be used as
+000488b0: 2061 6e20 616c 7465 726e 6174 6976 6520   an alternative 
+000488c0: 220a 2020 2020 2020 2020 2274 6f20 7370  ".        "to sp
+000488d0: 6563 6966 7969 6e67 2061 2072 6f6f 6d20  ecifying a room 
+000488e0: 6173 2064 6573 7469 6e61 7469 6f6e 2066  as destination f
+000488f0: 6f72 2074 6578 7420 282d 6d29 2c20 696d  or text (-m), im
+00048900: 6167 6573 2028 2d69 292c 2022 0a20 2020  ages (-i), ".   
+00048910: 2020 2020 2022 6574 632e 2046 6f72 2073       "etc. For s
+00048920: 656e 6420 6163 7469 6f6e 7320 272d 2d75  end actions '--u
+00048930: 7365 7227 2069 7320 7072 6f76 6964 696e  ser' is providin
+00048940: 6720 7468 6520 6675 6e63 7469 6f6e 616c  g the functional
+00048950: 6974 7920 6f66 2022 0a20 2020 2020 2020  ity of ".       
+00048960: 2022 2744 4d20 2864 6972 6563 7420 6d65   "'DM (direct me
+00048970: 7373 6167 696e 6729 272e 2046 6f72 2063  ssaging)'. For c
+00048980: 2920 7468 6973 206f 7074 696f 6e20 616c  ) this option al
+00048990: 6c6f 7773 2061 6e20 616c 7465 726e 6174  lows an alternat
+000489a0: 6976 6520 220a 2020 2020 2020 2020 2274  ive ".        "t
+000489b0: 6f20 7370 6563 6966 7969 6e67 2061 2072  o specifying a r
+000489c0: 6f6f 6d20 6173 2064 6573 7469 6e61 7469  oom as destinati
+000489d0: 6f6e 2066 6f72 2073 6f6d 6520 2d2d 6c69  on for some --li
+000489e0: 7374 656e 2061 6374 696f 6e73 2e20 220a  sten actions. ".
+000489f0: 2020 2020 2020 2020 2246 6f72 2064 2920          "For d) 
+00048a00: 7468 6973 2067 6976 6573 2074 6865 206f  this gives the o
+00048a10: 7074 696f 6e20 746f 2064 656c 6574 6520  ption to delete 
+00048a20: 7468 6520 6465 7669 6365 206f 6620 6120  the device of a 
+00048a30: 6469 6666 6572 656e 7420 220a 2020 2020  different ".    
+00048a40: 2020 2020 2275 7365 722e 2022 0a20 2020      "user. ".   
+00048a50: 2020 2020 2066 222d 2d2d 2d2d 2057 6861       f"----- Wha
+00048a60: 7420 6973 2061 2044 4d3f 207b 5052 4f47  t is a DM? {PROG
+00048a70: 5f57 4954 484f 5554 5f45 5854 7d20 7472  _WITHOUT_EXT} tr
+00048a80: 6965 7320 746f 2066 696e 6420 6120 220a  ies to find a ".
+00048a90: 2020 2020 2020 2020 2272 6f6f 6d20 7468          "room th
+00048aa0: 6174 2063 6f6e 7461 696e 7320 6f6e 6c79  at contains only
+00048ab0: 2074 6865 2073 656e 6465 7220 616e 6420   the sender and 
+00048ac0: 7468 6520 7265 6365 6976 6572 2c20 6865  the receiver, he
+00048ad0: 6e63 6520 444d 2e20 220a 2020 2020 2020  nce DM. ".      
+00048ae0: 2020 2254 6865 7365 2072 6f6f 6d73 2068    "These rooms h
+00048af0: 6176 6520 6e6f 7468 696e 6720 7370 6563  ave nothing spec
+00048b00: 6961 6c20 6f74 6865 7220 7468 6520 6661  ial other the fa
+00048b10: 6374 2074 6861 7420 7468 6579 206f 6e6c  ct that they onl
+00048b20: 7920 6861 7665 2022 0a20 2020 2020 2020  y have ".       
+00048b30: 2022 3220 6d65 6d62 6572 7320 616e 6420   "2 members and 
+00048b40: 7468 656d 2062 6569 6e67 2074 6865 2073  them being the s
+00048b50: 656e 6465 7220 616e 6420 7265 6369 7069  ender and recipi
+00048b60: 656e 7420 7265 7370 6563 7469 7665 6c79  ent respectively
+00048b70: 2e20 220a 2020 2020 2020 2020 2249 6620  . ".        "If 
+00048b80: 7375 6368 2061 2072 6f6f 6d20 6973 2066  such a room is f
+00048b90: 6f75 6e64 2c20 7468 6520 6669 7273 7420  ound, the first 
+00048ba0: 6f6e 6520 666f 756e 6420 7769 6c6c 2062  one found will b
+00048bb0: 6520 7573 6564 2061 7320 220a 2020 2020  e used as ".    
+00048bc0: 2020 2020 2264 6573 7469 6e61 7469 6f6e      "destination
+00048bd0: 2e20 4966 206e 6f20 7375 6368 2072 6f6f  . If no such roo
+00048be0: 6d20 6973 2066 6f75 6e64 2c20 7468 6520  m is found, the 
+00048bf0: 7365 6e64 2066 6169 6c73 2061 6e64 2074  send fails and t
+00048c00: 6865 2075 7365 7220 220a 2020 2020 2020  he user ".      
+00048c10: 2020 2273 686f 756c 6420 646f 2061 202d    "should do a -
+00048c20: 2d72 6f6f 6d2d 6372 6561 7465 2061 6e64  -room-create and
+00048c30: 202d 2d72 6f6f 6d2d 696e 7669 7465 2066   --room-invite f
+00048c40: 6972 7374 2e20 4966 206d 756c 7469 706c  irst. If multipl
+00048c50: 6520 220a 2020 2020 2020 2020 2273 7563  e ".        "suc
+00048c60: 6820 726f 6f6d 7320 6578 6973 742c 206f  h rooms exist, o
+00048c70: 6e65 206f 6620 7468 656d 2077 696c 6c20  ne of them will 
+00048c80: 6265 2075 7365 6420 2861 7262 6974 7261  be used (arbitra
+00048c90: 7269 6c79 292e 2022 0a20 2020 2020 2020  rily). ".       
+00048ca0: 2022 466f 7220 7365 6e64 696e 6720 616e   "For sending an
+00048cb0: 6420 6c69 7374 656e 696e 672c 2073 7065  d listening, spe
+00048cc0: 6369 6679 696e 6720 6120 726f 6f6d 2064  cifying a room d
+00048cd0: 6972 6563 746c 7920 6973 2061 6c77 6179  irectly is alway
+00048ce0: 7320 220a 2020 2020 2020 2020 2266 6173  s ".        "fas
+00048cf0: 7465 7220 616e 6420 6d6f 7265 2065 6666  ter and more eff
+00048d00: 6963 6965 6e74 2074 6861 6e20 7370 6563  icient than spec
+00048d10: 6966 7969 6e67 2061 2075 7365 722e 2053  ifying a user. S
+00048d20: 6f2c 2069 6620 796f 7520 6b6e 6f77 2022  o, if you know "
+00048d30: 0a20 2020 2020 2020 2022 7468 6520 726f  .        "the ro
+00048d40: 6f6d 2c20 6974 2069 7320 7072 6566 6572  om, it is prefer
+00048d50: 7265 6420 746f 2075 7365 202d 2d72 6f6f  red to use --roo
+00048d60: 6d20 696e 7374 6561 6420 6f66 202d 2d75  m instead of --u
+00048d70: 7365 722e 2022 0a20 2020 2020 2020 2022  ser. ".        "
+00048d80: 466f 7220 6229 2061 6e64 2063 2920 2d2d  For b) and c) --
+00048d90: 7573 6572 2063 616e 2062 6520 7370 6563  user can be spec
+00048da0: 6966 6965 6420 696e 2033 2077 6179 733a  ified in 3 ways:
+00048db0: 2031 2920 6675 6c6c 2075 7365 7220 6964   1) full user id
+00048dc0: 2022 0a20 2020 2020 2020 2022 6173 2069   ".        "as i
+00048dd0: 6e20 2740 6a6f 686e 3a65 7861 6d70 6c65  n '@john:example
+00048de0: 2e6f 7267 272c 2032 2920 7061 7274 6961  .org', 2) partia
+00048df0: 6c20 7573 6572 2069 6420 6173 2069 6e20  l user id as in 
+00048e00: 2740 6a6f 686e 2720 7768 656e 2022 0a20  '@john' when ". 
+00048e10: 2020 2020 2020 2022 7468 6520 7573 6572         "the user
+00048e20: 2069 7320 6f6e 2074 6865 2073 616d 6520   is on the same 
+00048e30: 686f 6d65 7365 7276 6572 2028 6578 616d  homeserver (exam
+00048e40: 706c 652e 6f72 6720 7769 6c6c 2062 6520  ple.org will be 
+00048e50: 220a 2020 2020 2020 2020 2261 7574 6f6d  ".        "autom
+00048e60: 6174 6963 616c 6c79 2061 7070 656e 6465  atically appende
+00048e70: 6429 2c20 6f72 2033 2920 6120 6469 7370  d), or 3) a disp
+00048e80: 6c61 7920 6e61 6d65 2061 7320 696e 2027  lay name as in '
+00048e90: 6a6f 686e 272e 2022 0a20 2020 2020 2020  john'. ".       
+00048ea0: 2022 4265 2063 6172 6566 756c 2c20 7768   "Be careful, wh
+00048eb0: 656e 2022 0a20 2020 2020 2020 2022 7573  en ".        "us
+00048ec0: 696e 6720 6469 7370 6c61 7920 6e61 6d65  ing display name
+00048ed0: 7320 6173 2074 6865 7920 6d69 6768 7420  s as they might 
+00048ee0: 6e6f 7420 6265 2075 6e69 7175 652c 2061  not be unique, a
+00048ef0: 6e64 2079 6f75 2063 6f75 6c64 2022 0a20  nd you could ". 
+00048f00: 2020 2020 2020 2022 6265 2073 656e 6469         "be sendi
+00048f10: 6e67 2074 6f20 7468 6520 7772 6f6e 6720  ng to the wrong 
+00048f20: 7065 7273 6f6e 2e20 546f 2073 6565 2070  person. To see p
+00048f30: 6f73 7369 626c 6520 6469 7370 6c61 7920  ossible display 
+00048f40: 6e61 6d65 7320 7573 6520 220a 2020 2020  names use ".    
+00048f50: 2020 2020 2274 6865 202d 2d6a 6f69 6e65      "the --joine
+00048f60: 642d 6d65 6d62 6572 7320 272a 2720 6f70  d-members '*' op
+00048f70: 7469 6f6e 2077 6869 6368 2077 696c 6c20  tion which will 
+00048f80: 7368 6f77 2079 6f75 2074 6865 2064 6973  show you the dis
+00048f90: 706c 6179 2022 0a20 2020 2020 2020 2022  play ".        "
+00048fa0: 6e61 6d65 7320 696e 2074 6865 206d 6964  names in the mid
+00048fb0: 646c 6520 636f 6c75 6d6e 2e22 2c0a 2020  dle column.",.  
+00048fc0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+00048fd0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+00048fe0: 2022 2d2d 7573 6572 2d6c 6f67 696e 222c   "--user-login",
+00048ff0: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+00049000: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
+00049010: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
+00049020: 2020 2023 2040 6a6f 686e 3a65 7861 6d70     # @john:examp
+00049030: 6c65 2e63 6f6d 2061 6e64 2040 6a6f 686e  le.com and @john
+00049040: 2061 6e64 206a 6f68 6e20 6163 6365 7074   and john accept
+00049050: 6564 0a20 2020 2020 2020 206d 6574 6176  ed.        metav
+00049060: 6172 3d22 5553 4552 222c 0a20 2020 2020  ar="USER",.     
+00049070: 2020 2068 656c 703d 2253 7065 6369 6679     help="Specify
+00049080: 2075 7365 7220 666f 7220 2d2d 6c6f 6769   user for --logi
+00049090: 6e2e 2022 0a20 2020 2020 2020 2022 4465  n. ".        "De
+000490a0: 7461 696c 733a 3a20 4f70 7469 6f6e 616c  tails:: Optional
+000490b0: 2061 7267 756d 656e 7420 746f 2073 7065   argument to spe
+000490c0: 6369 6679 2074 6865 2075 7365 7220 666f  cify the user fo
+000490d0: 7220 2d2d 6c6f 6769 6e2e 2022 0a20 2020  r --login. ".   
+000490e0: 2020 2020 2022 5468 6973 2067 6976 6573       "This gives
+000490f0: 2074 6865 206f 7074 696f 6e20 746f 2073   the option to s
+00049100: 7065 6369 6679 2074 6865 2075 7365 7220  pecify the user 
+00049110: 6964 2066 6f72 206c 6f67 696e 2e20 220a  id for login. ".
+00049120: 2020 2020 2020 2020 2246 6f72 2027 2d2d          "For '--
+00049130: 6c6f 6769 6e20 7373 6f27 2074 6865 202d  login sso' the -
+00049140: 2d75 7365 722d 6c6f 6769 6e20 6973 206e  -user-login is n
+00049150: 6f74 206e 6565 6465 6420 6173 2075 7365  ot needed as use
+00049160: 7220 6964 2063 616e 2062 6520 220a 2020  r id can be ".  
+00049170: 2020 2020 2020 226f 6274 6169 6e65 6420        "obtained 
+00049180: 6672 6f6d 2073 6572 7665 7220 7669 6120  from server via 
+00049190: 5353 4f2e 2046 6f72 2027 2d2d 6c6f 6769  SSO. For '--logi
+000491a0: 6e20 7061 7373 776f 7264 272c 2069 6620  n password', if 
+000491b0: 6e6f 7420 220a 2020 2020 2020 2020 2270  not ".        "p
+000491c0: 726f 7669 6465 6420 6974 2077 696c 6c20  rovided it will 
+000491d0: 6265 2071 7565 7269 6564 2076 6961 206b  be queried via k
+000491e0: 6579 626f 6172 642e 2041 2066 756c 6c20  eyboard. A full 
+000491f0: 7573 6572 2069 6420 6c69 6b65 2022 0a20  user id like ". 
+00049200: 2020 2020 2020 2022 2740 6a6f 686e 3a65         "'@john:e
+00049210: 7861 6d70 6c65 2e63 6f6d 272c 2061 2070  xample.com', a p
+00049220: 6172 7469 616c 2075 7365 7220 6e61 6d65  artial user name
+00049230: 206c 696b 6520 2740 6a6f 686e 272c 2061   like '@john', a
+00049240: 6e64 2022 0a20 2020 2020 2020 2022 6120  nd ".        "a 
+00049250: 7368 6f72 7420 7573 6572 206e 616d 6520  short user name 
+00049260: 6c69 6b65 2027 6a6f 686e 2720 6361 6e20  like 'john' can 
+00049270: 6265 2067 6976 656e 2e20 220a 2020 2020  be given. ".    
+00049280: 2020 2020 222d 2d75 7365 722d 6c6f 6769      "--user-logi
+00049290: 6e20 6973 206f 6e6c 7920 7573 6564 2062  n is only used b
+000492a0: 7920 2d2d 6c6f 6769 6e20 616e 6420 6967  y --login and ig
+000492b0: 6e6f 7265 6420 6279 2061 6c6c 206f 7468  nored by all oth
+000492c0: 6572 2022 0a20 2020 2020 2020 2022 6163  er ".        "ac
+000492d0: 7469 6f6e 732e 222c 0a20 2020 2029 0a20  tions.",.    ). 
+000492e0: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
+000492f0: 6e74 280a 2020 2020 2020 2020 222d 2d6e  nt(.        "--n
+00049300: 616d 6522 2c0a 2020 2020 2020 2020 7265  ame",.        re
+00049310: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+00049320: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
+00049330: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
+00049340: 6172 6773 3d22 2b22 2c0a 2020 2020 2020  args="+",.      
+00049350: 2020 7479 7065 3d73 7472 2c0a 2020 2020    type=str,.    
+00049360: 2020 2020 6d65 7461 7661 723d 2252 4f4f      metavar="ROO
+00049370: 4d5f 4e41 4d45 222c 0a20 2020 2020 2020  M_NAME",.       
+00049380: 2068 656c 703d 2253 7065 6369 6679 206f   help="Specify o
+00049390: 6e65 206f 7220 6d75 6c74 6970 6c65 2072  ne or multiple r
+000493a0: 6f6f 6d20 6e61 6d65 732e 2022 0a20 2020  oom names. ".   
+000493b0: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+000493c0: 5468 6973 206f 7074 696f 6e20 6973 206f  This option is o
+000493d0: 6e6c 7920 6d65 616e 696e 6766 756c 2022  nly meaningful "
+000493e0: 0a20 2020 2020 2020 2022 696e 2063 6f6d  .        "in com
+000493f0: 6269 6e61 7469 6f6e 2077 6974 6820 6f70  bination with op
+00049400: 7469 6f6e 202d 2d72 6f6f 6d2d 6372 6561  tion --room-crea
+00049410: 7465 2e20 220a 2020 2020 2020 2020 2254  te. ".        "T
+00049420: 6869 7320 6f70 7469 6f6e 202d 2d6e 616d  his option --nam
+00049430: 6520 7370 6563 6966 6965 7320 7468 6520  e specifies the 
+00049440: 6e61 6d65 7320 220a 2020 2020 2020 2020  names ".        
+00049450: 2274 6f20 6265 2075 7365 6420 7769 7468  "to be used with
+00049460: 2074 6865 2063 6f6d 6d61 6e64 202d 2d72   the command --r
+00049470: 6f6f 6d2d 6372 6561 7465 2e22 2c0a 2020  oom-create.",.  
+00049480: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+00049490: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+000494a0: 2022 2d2d 746f 7069 6322 2c0a 2020 2020   "--topic",.    
+000494b0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+000494c0: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
+000494d0: 6f6e 3d22 6578 7465 6e64 222c 0a20 2020  on="extend",.   
+000494e0: 2020 2020 206e 6172 6773 3d22 2b22 2c0a       nargs="+",.
+000494f0: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
+00049500: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
+00049510: 723d 2252 4f4f 4d5f 544f 5049 4322 2c0a  r="ROOM_TOPIC",.
+00049520: 2020 2020 2020 2020 6865 6c70 3d22 5370          help="Sp
+00049530: 6563 6966 7920 6f6e 6520 6f72 206d 756c  ecify one or mul
+00049540: 7469 706c 6520 726f 6f6d 2074 6f70 6963  tiple room topic
+00049550: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
+00049560: 7461 696c 733a 3a20 5468 6973 206f 7074  tails:: This opt
+00049570: 696f 6e20 6973 206f 6e6c 7920 6d65 616e  ion is only mean
+00049580: 696e 6766 756c 2022 0a20 2020 2020 2020  ingful ".       
+00049590: 2022 696e 2063 6f6d 6269 6e61 7469 6f6e   "in combination
+000495a0: 2077 6974 6820 6f70 7469 6f6e 202d 2d72   with option --r
+000495b0: 6f6f 6d2d 6372 6561 7465 2e20 220a 2020  oom-create. ".  
+000495c0: 2020 2020 2020 2254 6869 7320 6f70 7469        "This opti
+000495d0: 6f6e 202d 2d74 6f70 6963 2073 7065 6369  on --topic speci
+000495e0: 6669 6573 2074 6865 2074 6f70 6963 7320  fies the topics 
+000495f0: 220a 2020 2020 2020 2020 2274 6f20 6265  ".        "to be
+00049600: 2075 7365 6420 7769 7468 2074 6865 2063   used with the c
+00049610: 6f6d 6d61 6e64 202d 2d72 6f6f 6d2d 6372  ommand --room-cr
+00049620: 6561 7465 2e22 2c0a 2020 2020 290a 2020  eate.",.    ).  
+00049630: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+00049640: 7428 0a20 2020 2020 2020 2022 2d2d 616c  t(.        "--al
+00049650: 6961 7322 2c0a 2020 2020 2020 2020 7265  ias",.        re
+00049660: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+00049670: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
+00049680: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
+00049690: 6172 6773 3d22 2b22 2c0a 2020 2020 2020  args="+",.      
+000496a0: 2020 7479 7065 3d73 7472 2c0a 2020 2020    type=str,.    
+000496b0: 2020 2020 6d65 7461 7661 723d 2252 4f4f      metavar="ROO
+000496c0: 4d5f 414c 4941 5322 2c0a 2020 2020 2020  M_ALIAS",.      
+000496d0: 2020 6865 6c70 3d22 5370 6563 6966 7920    help="Specify 
+000496e0: 6f6e 6520 6f72 206d 756c 7469 706c 6520  one or multiple 
+000496f0: 726f 6f6d 2061 6c69 6173 6573 2e20 220a  room aliases. ".
+00049700: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+00049710: 3a3a 2054 6869 7320 6f70 7469 6f6e 2069  :: This option i
+00049720: 7320 6f6e 6c79 2022 0a20 2020 2020 2020  s only ".       
+00049730: 2022 6d65 616e 696e 6766 756c 2069 6e20   "meaningful in 
+00049740: 636f 6d62 696e 6174 696f 6e20 7769 7468  combination with
+00049750: 206f 7074 696f 6e20 2d2d 726f 6f6d 2d64   option --room-d
+00049760: 6d2d 6372 6561 7465 2e20 220a 2020 2020  m-create. ".    
+00049770: 2020 2020 2254 6869 7320 6f70 7469 6f6e      "This option
+00049780: 202d 2d61 6c69 6173 2073 7065 6369 6669   --alias specifi
+00049790: 6573 2074 6865 2061 6c69 6173 6573 2074  es the aliases t
+000497a0: 6f20 6265 2075 7365 6420 220a 2020 2020  o be used ".    
+000497b0: 2020 2020 2277 6974 6820 7468 6520 636f      "with the co
+000497c0: 6d6d 616e 6420 2d2d 726f 6f6d 2d64 6d2d  mmand --room-dm-
+000497d0: 6372 6561 7465 2e22 2c0a 2020 2020 290a  create.",.    ).
+000497e0: 2020 2020 2320 616c 6c6f 7720 6d75 6c74      # allow mult
+000497f0: 6970 6c65 206d 6573 7361 6765 7320 2c20  iple messages , 
+00049800: 652e 672e 202d 6d20 226d 3122 2022 6d32  e.g. -m "m1" "m2
+00049810: 2220 6f72 202d 6d20 226d 3122 202d 6d20  " or -m "m1" -m 
+00049820: 226d 3222 0a20 2020 2023 206d 6573 7361  "m2".    # messa
+00049830: 6765 2069 7320 676f 696e 6720 746f 2062  ge is going to b
+00049840: 6520 6120 6c69 7374 206f 6620 7374 7269  e a list of stri
+00049850: 6e67 730a 2020 2020 2320 652e 672e 206d  ngs.    # e.g. m
+00049860: 6573 7361 6765 3d5b 2027 6d31 272c 2027  essage=[ 'm1', '
+00049870: 6d32 2720 5d0a 2020 2020 6170 2e61 6464  m2' ].    ap.add
+00049880: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+00049890: 2020 2022 2d6d 222c 0a20 2020 2020 2020     "-m",.       
+000498a0: 2022 2d2d 6d65 7373 6167 6522 2c0a 2020   "--message",.  
+000498b0: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+000498c0: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
+000498d0: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
+000498e0: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
+000498f0: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
+00049900: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
+00049910: 7661 723d 2254 4558 5422 2c0a 2020 2020  var="TEXT",.    
+00049920: 2020 2020 6865 6c70 3d22 5365 6e64 206f      help="Send o
+00049930: 6e65 206f 7220 6d75 6c74 6970 6c65 2074  ne or multiple t
+00049940: 6578 7420 6d65 7373 6167 6573 2e20 220a  ext messages. ".
+00049950: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+00049960: 3a3a 204d 6573 7361 6765 2064 6174 6120  :: Message data 
+00049970: 6d75 7374 206e 6f74 2062 6520 6269 6e61  must not be bina
+00049980: 7279 2064 6174 612c 2069 7420 220a 2020  ry data, it ".  
+00049990: 2020 2020 2020 226d 7573 7420 6265 2074        "must be t
+000499a0: 6578 742e 2049 6620 6e6f 2027 2d6d 2720  ext. If no '-m' 
+000499b0: 6973 2075 7365 6420 616e 6420 6e6f 206f  is used and no o
+000499c0: 7468 6572 2063 6f6e 666c 6963 7469 6e67  ther conflicting
+000499d0: 2022 0a20 2020 2020 2020 2022 6172 6775   ".        "argu
+000499e0: 6d65 6e74 7320 6172 6520 7072 6f76 6964  ments are provid
+000499f0: 6564 2c20 616e 6420 696e 666f 726d 6174  ed, and informat
+00049a00: 696f 6e20 6973 2070 6970 6564 2069 6e74  ion is piped int
+00049a10: 6f20 7468 6520 7072 6f67 7261 6d2c 2022  o the program, "
+00049a20: 0a20 2020 2020 2020 2022 7468 656e 2074  .        "then t
+00049a30: 6865 2070 6970 6564 2064 6174 6120 7769  he piped data wi
+00049a40: 6c6c 2062 6520 7573 6564 2061 7320 6d65  ll be used as me
+00049a50: 7373 6167 652e 2022 0a20 2020 2020 2020  ssage. ".       
+00049a60: 2022 4669 6e61 6c6c 792c 2069 6620 7468   "Finally, if th
+00049a70: 6572 6520 6172 6520 6e6f 206f 7065 7261  ere are no opera
+00049a80: 7469 6f6e 7320 6174 2061 6c6c 2069 6e20  tions at all in 
+00049a90: 7468 6520 6172 6775 6d65 6e74 732c 2074  the arguments, t
+00049aa0: 6865 6e20 220a 2020 2020 2020 2020 2261  hen ".        "a
+00049ab0: 206d 6573 7361 6765 2077 696c 6c20 6265   message will be
+00049ac0: 2072 6561 6420 6672 6f6d 2073 7464 696e   read from stdin
+00049ad0: 2c20 692e 652e 2066 726f 6d20 7468 6520  , i.e. from the 
+00049ae0: 6b65 7962 6f61 7264 2e20 220a 2020 2020  keyboard. ".    
+00049af0: 2020 2020 2254 6869 7320 6f70 7469 6f6e      "This option
+00049b00: 2063 616e 2062 6520 7573 6564 206d 756c   can be used mul
+00049b10: 7469 706c 6520 7469 6d65 7320 746f 2073  tiple times to s
+00049b20: 656e 6420 220a 2020 2020 2020 2020 226d  end ".        "m
+00049b30: 756c 7469 706c 6520 6d65 7373 6167 6573  ultiple messages
+00049b40: 2e20 4966 2074 6865 7265 2069 7320 6461  . If there is da
+00049b50: 7461 2070 6970 6564 2022 0a20 2020 2020  ta piped ".     
+00049b60: 2020 2022 696e 746f 2074 6869 7320 7072     "into this pr
+00049b70: 6f67 7261 6d2c 2074 6865 6e20 6669 7273  ogram, then firs
+00049b80: 7420 6461 7461 2066 726f 6d20 7468 6520  t data from the 
+00049b90: 220a 2020 2020 2020 2020 2270 6970 6520  ".        "pipe 
+00049ba0: 6973 2070 7562 6c69 7368 6564 2c20 7468  is published, th
+00049bb0: 656e 206d 6573 7361 6765 7320 6672 6f6d  en messages from
+00049bc0: 2074 6869 7320 220a 2020 2020 2020 2020   this ".        
+00049bd0: 226f 7074 696f 6e20 6172 6520 7075 626c  "option are publ
+00049be0: 6973 6865 642e 204d 6573 7361 6765 7320  ished. Messages 
+00049bf0: 7769 6c6c 2062 6520 7365 6e74 206c 6173  will be sent las
+00049c00: 742c 2022 0a20 2020 2020 2020 2022 692e  t, ".        "i.
+00049c10: 652e 2061 6674 6572 206f 626a 6563 7473  e. after objects
+00049c20: 206c 696b 6520 696d 6167 6573 2c20 6175   like images, au
+00049c30: 6469 6f2c 2066 696c 6573 2c20 6576 656e  dio, files, even
+00049c40: 7473 2c20 6574 632e 2022 0a20 2020 2020  ts, etc. ".     
+00049c50: 2020 2022 496e 7075 7420 7069 7065 6420     "Input piped 
+00049c60: 7669 6120 7374 6469 6e20 6361 6e20 6164  via stdin can ad
+00049c70: 6469 7469 6f6e 616c 6c79 2062 6520 7370  ditionally be sp
+00049c80: 6563 6966 6965 6420 7769 7468 2074 6865  ecified with the
+00049c90: 2022 0a20 2020 2020 2020 2022 7370 6563   ".        "spec
+00049ca0: 6961 6c20 6368 6172 6163 7465 7220 272d  ial character '-
+00049cb0: 272e 2022 0a20 2020 2020 2020 2066 2249  '. ".        f"I
+00049cc0: 6620 796f 7520 7761 6e74 2074 6f20 6665  f you want to fe
+00049cd0: 6564 2061 2074 6578 7420 6d65 7373 6167  ed a text messag
+00049ce0: 6520 696e 746f 207b 5052 4f47 5f57 4954  e into {PROG_WIT
+00049cf0: 484f 5554 5f45 5854 7d20 220a 2020 2020  HOUT_EXT} ".    
+00049d00: 2020 2020 2276 6961 2061 2070 6970 652c      "via a pipe,
+00049d10: 2076 6961 2073 7464 696e 2c20 7468 656e   via stdin, then
+00049d20: 2073 7065 6369 6679 2074 6865 2073 7065   specify the spe
+00049d30: 6369 616c 2022 0a20 2020 2020 2020 2022  cial ".        "
+00049d40: 6368 6172 6163 7465 7220 272d 272e 2049  character '-'. I
+00049d50: 6620 272d 2720 6973 2073 7065 6369 6669  f '-' is specifi
+00049d60: 6564 2061 7320 6d65 7373 6167 652c 2022  ed as message, "
+00049d70: 0a20 2020 2020 2020 2022 7468 656e 2074  .        "then t
+00049d80: 6865 2070 726f 6772 616d 2077 696c 6c20  he program will 
+00049d90: 7265 6164 2074 6865 206d 6573 7361 6765  read the message
+00049da0: 2066 726f 6d20 7374 6469 6e2e 2022 0a20   from stdin. ". 
+00049db0: 2020 2020 2020 2022 5769 7468 2027 2d27         "With '-'
+00049dc0: 2074 6865 2077 686f 6c65 206d 6573 7361   the whole messa
+00049dd0: 6765 2c20 616c 6c20 6c69 6e65 732c 2077  ge, all lines, w
+00049de0: 696c 6c20 6265 2063 6f6e 7369 6465 7265  ill be considere
+00049df0: 6420 220a 2020 2020 2020 2020 2261 2073  d ".        "a s
+00049e00: 696e 676c 6520 6d65 7373 6167 6520 616e  ingle message an
+00049e10: 6420 7365 6e74 2061 7320 6f6e 6520 6d65  d sent as one me
+00049e20: 7373 6167 652e 2022 0a20 2020 2020 2020  ssage. ".       
+00049e30: 2022 4966 2079 6f75 7220 6d65 7373 6167   "If your messag
+00049e40: 6520 6973 206c 6974 6572 616c 6c79 2027  e is literally '
+00049e50: 2d27 2074 6865 6e20 7573 6520 275c 5c2d  -' then use '\\-
+00049e60: 2720 220a 2020 2020 2020 2020 2261 7320  ' ".        "as 
+00049e70: 6d65 7373 6167 6520 696e 2074 6865 2061  message in the a
+00049e80: 7267 756d 656e 742e 2022 0a20 2020 2020  rgument. ".     
+00049e90: 2020 2022 272d 2720 6d61 7920 6170 7065     "'-' may appe
+00049ea0: 6172 2069 6e20 616e 7920 706f 7369 7469  ar in any positi
+00049eb0: 6f6e 2c20 692e 652e 2027 2d6d 205c 2273  on, i.e. '-m \"s
+00049ec0: 7461 7274 5c22 202d 205c 2265 6e64 5c22  tart\" - \"end\"
+00049ed0: 2720 220a 2020 2020 2020 2020 2277 696c  ' ".        "wil
+00049ee0: 6c20 7365 6e64 2033 206d 6573 7361 6765  l send 3 message
+00049ef0: 7320 6f75 7420 6f66 2077 6869 6368 2074  s out of which t
+00049f00: 6865 2073 6563 6f6e 6420 6f6e 6520 6973  he second one is
+00049f10: 2072 6561 6420 6672 6f6d 2073 7464 696e   read from stdin
+00049f20: 2e20 220a 2020 2020 2020 2020 2227 2d27  . ".        "'-'
+00049f30: 206d 6179 2061 7070 6561 7220 6f6e 6c79   may appear only
+00049f40: 206f 6e63 6520 6f76 6572 616c 6c20 696e   once overall in
+00049f50: 2061 6c6c 2061 7267 756d 656e 7473 2e20   all arguments. 
+00049f60: 220a 2020 2020 2020 2020 2253 696d 696c  ".        "Simil
+00049f70: 6172 2074 6f20 272d 272c 2061 6e6f 7468  ar to '-', anoth
+00049f80: 6572 2073 686f 7274 6375 7420 6368 6172  er shortcut char
+00049f90: 6163 7465 7220 6973 2027 5f27 2e20 5468  acter is '_'. Th
+00049fa0: 6520 220a 2020 2020 2020 2020 2273 7065  e ".        "spe
+00049fb0: 6369 616c 2063 6861 7261 6374 6572 2027  cial character '
+00049fc0: 5f27 2069 7320 7573 6564 2066 6f72 2073  _' is used for s
+00049fd0: 7472 6561 6d69 6e67 2064 6174 6120 7669  treaming data vi
+00049fe0: 6120 220a 2020 2020 2020 2020 2261 2070  a ".        "a p
+00049ff0: 6970 6520 6f6e 2073 7464 696e 2e20 5769  ipe on stdin. Wi
+0004a000: 7468 2027 5f27 2074 6865 2073 7464 696e  th '_' the stdin
+0004a010: 2070 6970 6520 6973 2072 6561 6420 6c69   pipe is read li
+0004a020: 6e65 2d62 792d 6c69 6e65 2022 0a20 2020  ne-by-line ".   
+0004a030: 2020 2020 2022 616e 6420 6561 6368 206c       "and each l
+0004a040: 696e 6520 6973 2074 7265 6174 6564 2061  ine is treated a
+0004a050: 7320 6120 7365 7061 7261 7465 206d 6573  s a separate mes
+0004a060: 7361 6765 2061 6e64 2073 656e 7420 7269  sage and sent ri
+0004a070: 6768 7420 220a 2020 2020 2020 2020 2261  ght ".        "a
+0004a080: 7761 792e 2054 6865 2070 726f 6772 616d  way. The program
+0004a090: 2077 6169 7473 2066 6f72 2070 6970 6520   waits for pipe 
+0004a0a0: 696e 7075 7420 756e 7469 6c20 7468 6520  input until the 
+0004a0b0: 7069 7065 2069 7320 220a 2020 2020 2020  pipe is ".      
+0004a0c0: 2020 2263 6c6f 7365 642e 2045 2e67 2e20    "closed. E.g. 
+0004a0d0: 496d 6167 696e 6520 6120 746f 6f6c 2074  Imagine a tool t
+0004a0e0: 6861 7420 6765 6e65 7261 7465 7320 6f75  hat generates ou
+0004a0f0: 7470 7574 2073 706f 7261 6469 6361 6c6c  tput sporadicall
+0004a100: 7920 220a 2020 2020 2020 2020 6622 3234  y ".        f"24
+0004a110: 7837 2e20 4974 2063 616e 2062 6520 7069  x7. It can be pi
+0004a120: 7065 642c 2069 2e65 2e20 7374 7265 616d  ped, i.e. stream
+0004a130: 6564 2c20 696e 746f 207b 5052 4f47 5f57  ed, into {PROG_W
+0004a140: 4954 484f 5554 5f45 5854 7d2c 2061 6e64  ITHOUT_EXT}, and
+0004a150: 2022 0a20 2020 2020 2020 2066 227b 5052   ".        f"{PR
+0004a160: 4f47 5f57 4954 484f 5554 5f45 5854 7d20  OG_WITHOUT_EXT} 
+0004a170: 7374 6179 7320 6163 7469 7665 2c20 7365  stays active, se
+0004a180: 6e64 696e 6720 616c 6c20 696e 7075 7420  nding all input 
+0004a190: 696e 7374 616e 746c 792e 2022 0a20 2020  instantly. ".   
+0004a1a0: 2020 2020 2022 4966 2079 6f75 2077 616e       "If you wan
+0004a1b0: 7420 746f 2073 656e 6420 7468 6520 6c69  t to send the li
+0004a1c0: 7465 7261 6c20 6c65 7474 6572 2027 5f27  teral letter '_'
+0004a1d0: 2074 6865 6e20 6573 6361 7065 2069 7420   then escape it 
+0004a1e0: 220a 2020 2020 2020 2020 2261 6e64 2073  ".        "and s
+0004a1f0: 656e 6420 275c 5c5f 272e 2022 0a20 2020  end '\\_'. ".   
+0004a200: 2020 2020 2022 275f 2720 6361 6e20 6265       "'_' can be
+0004a210: 2075 7365 6420 6f6e 6c79 206f 6e63 652e   used only once.
+0004a220: 2041 6e64 2065 6974 6865 7220 272d 2720   And either '-' 
+0004a230: 6f72 2027 5f27 2063 616e 2062 6520 7573  or '_' can be us
+0004a240: 6564 2e20 222c 0a20 2020 2029 0a20 2020  ed. ",.    ).   
+0004a250: 2023 2061 6c6c 6f77 206d 756c 7469 706c   # allow multipl
+0004a260: 6520 6d65 7373 6167 6573 202c 2065 2e67  e messages , e.g
+0004a270: 2e20 2d69 2022 6931 2e6a 7067 2220 2269  . -i "i1.jpg" "i
+0004a280: 322e 6769 6622 0a20 2020 2023 206f 7220  2.gif".    # or 
+0004a290: 2d69 2022 6931 2e70 6e67 2220 2d69 2022  -i "i1.png" -i "
+0004a2a0: 6932 2e6a 7065 6722 0a20 2020 2023 2069  i2.jpeg".    # i
+0004a2b0: 6d61 6765 2069 7320 676f 696e 6720 746f  mage is going to
+0004a2c0: 2062 6520 6120 6c69 7374 206f 6620 7374   be a list of st
+0004a2d0: 7269 6e67 730a 2020 2020 2320 652e 672e  rings.    # e.g.
+0004a2e0: 2069 6d61 6765 3d5b 2027 6931 2e6a 7067   image=[ 'i1.jpg
+0004a2f0: 272c 2027 6932 2e70 6e67 2720 5d0a 2020  ', 'i2.png' ].  
+0004a300: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+0004a310: 7428 0a20 2020 2020 2020 2022 2d69 222c  t(.        "-i",
+0004a320: 0a20 2020 2020 2020 2022 2d2d 696d 6167  .        "--imag
+0004a330: 6522 2c0a 2020 2020 2020 2020 7265 7175  e",.        requ
+0004a340: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
+0004a350: 2020 2020 6163 7469 6f6e 3d22 6578 7465      action="exte
+0004a360: 6e64 222c 0a20 2020 2020 2020 206e 6172  nd",.        nar
+0004a370: 6773 3d22 2b22 2c0a 2020 2020 2020 2020  gs="+",.        
+0004a380: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
+0004a390: 2020 6d65 7461 7661 723d 2249 4d41 4745    metavar="IMAGE
+0004a3a0: 5f46 494c 4522 2c0a 2020 2020 2020 2020  _FILE",.        
+0004a3b0: 6865 6c70 3d22 5365 6e64 206f 6e65 206f  help="Send one o
+0004a3c0: 7220 6d75 6c74 6970 6c65 2069 6d61 6765  r multiple image
+0004a3d0: 2066 696c 6573 2e20 220a 2020 2020 2020   files. ".      
+0004a3e0: 2020 2244 6574 6169 6c73 3a3a 2054 6869    "Details:: Thi
+0004a3f0: 7320 6f70 7469 6f6e 2063 616e 2062 6520  s option can be 
+0004a400: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
+0004a410: 6d65 7320 746f 2073 656e 6420 220a 2020  mes to send ".  
+0004a420: 2020 2020 2020 226d 756c 7469 706c 6520        "multiple 
+0004a430: 696d 6167 6573 2e20 4669 7273 7420 696d  images. First im
+0004a440: 6167 6573 2061 7265 2073 656e 742c 2022  ages are sent, "
+0004a450: 0a20 2020 2020 2020 2022 7468 656e 2074  .        "then t
+0004a460: 6578 7420 6d65 7373 6167 6573 2061 7265  ext messages are
+0004a470: 2073 656e 742e 2022 0a20 2020 2020 2020   sent. ".       
+0004a480: 2066 2249 6620 796f 7520 7761 6e74 2074   f"If you want t
+0004a490: 6f20 6665 6564 2061 6e20 696d 6167 6520  o feed an image 
+0004a4a0: 696e 746f 207b 5052 4f47 5f57 4954 484f  into {PROG_WITHO
+0004a4b0: 5554 5f45 5854 7d20 220a 2020 2020 2020  UT_EXT} ".      
+0004a4c0: 2020 2276 6961 2061 2070 6970 652c 2076    "via a pipe, v
+0004a4d0: 6961 2073 7464 696e 2c20 7468 656e 2073  ia stdin, then s
+0004a4e0: 7065 6369 6679 2074 6865 2073 7065 6369  pecify the speci
+0004a4f0: 616c 2022 0a20 2020 2020 2020 2022 6368  al ".        "ch
+0004a500: 6172 6163 7465 7220 272d 272e 2049 6620  aracter '-'. If 
+0004a510: 272d 2720 6973 2073 7065 6369 6669 6564  '-' is specified
+0004a520: 2061 7320 696d 6167 6520 6669 6c65 206e   as image file n
+0004a530: 616d 652c 2022 0a20 2020 2020 2020 2022  ame, ".        "
+0004a540: 7468 656e 2074 6865 2070 726f 6772 616d  then the program
+0004a550: 2077 696c 6c20 7265 6164 2074 6865 2069   will read the i
+0004a560: 6d61 6765 2064 6174 6120 6672 6f6d 2073  mage data from s
+0004a570: 7464 696e 2e20 220a 2020 2020 2020 2020  tdin. ".        
+0004a580: 2249 6620 796f 7572 2069 6d61 6765 2066  "If your image f
+0004a590: 696c 6520 6973 206c 6974 6572 616c 6c79  ile is literally
+0004a5a0: 206e 616d 6564 2027 2d27 2074 6865 6e20   named '-' then 
+0004a5b0: 7573 6520 275c 5c2d 2720 220a 2020 2020  use '\\-' ".    
+0004a5c0: 2020 2020 2261 7320 6669 6c65 206e 616d      "as file nam
+0004a5d0: 6520 696e 2074 6865 2061 7267 756d 656e  e in the argumen
+0004a5e0: 742e 2022 0a20 2020 2020 2020 2022 272d  t. ".        "'-
+0004a5f0: 2720 6d61 7920 6170 7065 6172 2069 6e20  ' may appear in 
+0004a600: 616e 7920 706f 7369 7469 6f6e 2c20 692e  any position, i.
+0004a610: 652e 2027 2d69 2069 6d61 6765 312e 6a70  e. '-i image1.jp
+0004a620: 6720 2d20 696d 6167 6533 2e70 6e67 2720  g - image3.png' 
+0004a630: 220a 2020 2020 2020 2020 2277 696c 6c20  ".        "will 
+0004a640: 7365 6e64 2033 2069 6d61 6765 7320 6f75  send 3 images ou
+0004a650: 7420 6f66 2077 6869 6368 2074 6865 2073  t of which the s
+0004a660: 6563 6f6e 6420 6f6e 6520 6973 2072 6561  econd one is rea
+0004a670: 6420 6672 6f6d 2073 7464 696e 2e20 220a  d from stdin. ".
+0004a680: 2020 2020 2020 2020 2227 2d27 206d 6179          "'-' may
+0004a690: 2061 7070 6561 7220 6f6e 6c79 206f 6e63   appear only onc
+0004a6a0: 6520 6f76 6572 616c 6c20 696e 2061 6c6c  e overall in all
+0004a6b0: 2061 7267 756d 656e 7473 2e20 220a 2020   arguments. ".  
+0004a6c0: 2020 2020 2020 2249 6620 7468 6520 6669        "If the fi
+0004a6d0: 6c65 2065 7869 7374 7320 616c 7265 6164  le exists alread
+0004a6e0: 792c 2069 7420 6973 206d 6f72 6520 6566  y, it is more ef
+0004a6f0: 6669 6369 656e 7420 746f 2073 7065 6369  ficient to speci
+0004a700: 6679 2074 6865 2022 0a20 2020 2020 2020  fy the ".       
+0004a710: 2022 6669 6c65 206e 616d 6520 7468 616e   "file name than
+0004a720: 2074 6f20 7069 7065 2074 6865 2066 696c   to pipe the fil
+0004a730: 6520 7468 726f 7567 6820 7374 6469 6e2e  e through stdin.
+0004a740: 222c 0a20 2020 2029 0a20 2020 2023 2061  ",.    ).    # a
+0004a750: 6c6c 6f77 206d 756c 7469 706c 6520 6175  llow multiple au
+0004a760: 6469 6f20 6669 6c65 7320 2c20 652e 672e  dio files , e.g.
+0004a770: 202d 6920 2261 312e 6d70 3322 2022 6132   -i "a1.mp3" "a2
+0004a780: 2e77 6176 220a 2020 2020 2320 6f72 202d  .wav".    # or -
+0004a790: 6920 2261 312e 6d70 3322 202d 6920 2261  i "a1.mp3" -i "a
+0004a7a0: 322e 6d34 6122 0a20 2020 2023 2061 7564  2.m4a".    # aud
+0004a7b0: 696f 2069 7320 676f 696e 6720 746f 2062  io is going to b
+0004a7c0: 6520 6120 6c69 7374 206f 6620 7374 7269  e a list of stri
+0004a7d0: 6e67 730a 2020 2020 2320 652e 672e 2061  ngs.    # e.g. a
+0004a7e0: 7564 696f 3d5b 2027 6131 2e6d 7033 272c  udio=[ 'a1.mp3',
+0004a7f0: 2027 6132 2e6d 3461 2720 5d0a 2020 2020   'a2.m4a' ].    
+0004a800: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
+0004a810: 0a20 2020 2020 2020 2022 2d61 222c 0a20  .        "-a",. 
+0004a820: 2020 2020 2020 2022 2d2d 6175 6469 6f22         "--audio"
+0004a830: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+0004a840: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
+0004a850: 2020 6163 7469 6f6e 3d22 6578 7465 6e64    action="extend
+0004a860: 222c 0a20 2020 2020 2020 206e 6172 6773  ",.        nargs
+0004a870: 3d22 2b22 2c0a 2020 2020 2020 2020 7479  ="+",.        ty
+0004a880: 7065 3d73 7472 2c0a 2020 2020 2020 2020  pe=str,.        
+0004a890: 6d65 7461 7661 723d 2241 5544 494f 5f46  metavar="AUDIO_F
+0004a8a0: 494c 4522 2c0a 2020 2020 2020 2020 6865  ILE",.        he
+0004a8b0: 6c70 3d22 5365 6e64 206f 6e65 206f 7220  lp="Send one or 
+0004a8c0: 6d75 6c74 6970 6c65 2061 7564 696f 2066  multiple audio f
+0004a8d0: 696c 6573 2e20 220a 2020 2020 2020 2020  iles. ".        
+0004a8e0: 2244 6574 6169 6c73 3a3a 2054 6869 7320  "Details:: This 
+0004a8f0: 6f70 7469 6f6e 2063 616e 2062 6520 7573  option can be us
+0004a900: 6564 206d 756c 7469 706c 6520 7469 6d65  ed multiple time
+0004a910: 7320 746f 2073 656e 6420 220a 2020 2020  s to send ".    
+0004a920: 2020 2020 226d 756c 7469 706c 6520 6175      "multiple au
+0004a930: 6469 6f20 6669 6c65 732e 2046 6972 7374  dio files. First
+0004a940: 2061 7564 696f 7320 6172 6520 7365 6e74   audios are sent
+0004a950: 2c20 220a 2020 2020 2020 2020 2274 6865  , ".        "the
+0004a960: 6e20 7465 7874 206d 6573 7361 6765 7320  n text messages 
+0004a970: 6172 6520 7365 6e74 2e20 220a 2020 2020  are sent. ".    
+0004a980: 2020 2020 6622 4966 2079 6f75 2077 616e      f"If you wan
+0004a990: 7420 746f 2066 6565 6420 616e 2061 7564  t to feed an aud
+0004a9a0: 696f 2069 6e74 6f20 7b50 524f 475f 5749  io into {PROG_WI
+0004a9b0: 5448 4f55 545f 4558 547d 2022 0a20 2020  THOUT_EXT} ".   
+0004a9c0: 2020 2020 2022 7669 6120 6120 7069 7065       "via a pipe
+0004a9d0: 2c20 7669 6120 7374 6469 6e2c 2074 6865  , via stdin, the
+0004a9e0: 6e20 7370 6563 6966 7920 7468 6520 7370  n specify the sp
+0004a9f0: 6563 6961 6c20 220a 2020 2020 2020 2020  ecial ".        
+0004aa00: 2263 6861 7261 6374 6572 2027 2d27 2e20  "character '-'. 
+0004aa10: 5365 6520 6465 7363 7269 7074 696f 6e20  See description 
+0004aa20: 6f66 2027 2d69 2720 746f 2073 6565 2068  of '-i' to see h
+0004aa30: 6f77 2027 2d27 2069 7320 6861 6e64 6c65  ow '-' is handle
+0004aa40: 642e 222c 0a20 2020 2029 0a20 2020 2023  d.",.    ).    #
+0004aa50: 2061 6c6c 6f77 206d 756c 7469 706c 6520   allow multiple 
+0004aa60: 6669 6c65 7320 2c20 652e 672e 202d 6620  files , e.g. -f 
+0004aa70: 2261 312e 7064 6622 2022 6132 2e64 6f63  "a1.pdf" "a2.doc
+0004aa80: 220a 2020 2020 2320 6f72 202d 6620 2261  ".    # or -f "a
+0004aa90: 312e 7064 6622 202d 6620 2261 322e 646f  1.pdf" -f "a2.do
+0004aaa0: 6322 0a20 2020 2023 2066 696c 6520 6973  c".    # file is
+0004aab0: 2067 6f69 6e67 2074 6f20 6265 2061 206c   going to be a l
+0004aac0: 6973 7420 6f66 2073 7472 696e 6773 0a20  ist of strings. 
+0004aad0: 2020 2023 2065 2e67 2e20 6669 6c65 3d5b     # e.g. file=[
+0004aae0: 2027 6131 2e70 6466 272c 2027 6132 2e64   'a1.pdf', 'a2.d
+0004aaf0: 6f63 2720 5d0a 2020 2020 6170 2e61 6464  oc' ].    ap.add
+0004ab00: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+0004ab10: 2020 2022 2d66 222c 0a20 2020 2020 2020     "-f",.       
+0004ab20: 2022 2d2d 6669 6c65 222c 0a20 2020 2020   "--file",.     
+0004ab30: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+0004ab40: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
+0004ab50: 6e3d 2265 7874 656e 6422 2c0a 2020 2020  n="extend",.    
+0004ab60: 2020 2020 6e61 7267 733d 222b 222c 0a20      nargs="+",. 
+0004ab70: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
+0004ab80: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
+0004ab90: 3d22 4649 4c45 222c 0a20 2020 2020 2020  ="FILE",.       
+0004aba0: 2068 656c 703d 2253 656e 6420 6f6e 6520   help="Send one 
+0004abb0: 6f72 206d 756c 7469 706c 6520 6669 6c65  or multiple file
+0004abc0: 7320 2865 2e67 2e20 5044 462c 2044 4f43  s (e.g. PDF, DOC
+0004abd0: 2c20 4d50 3429 2e20 220a 2020 2020 2020  , MP4). ".      
+0004abe0: 2020 2244 6574 6169 6c73 3a3a 2054 6869    "Details:: Thi
+0004abf0: 7320 6f70 7469 6f6e 2063 616e 2062 6520  s option can be 
+0004ac00: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
+0004ac10: 6d65 7320 746f 2073 656e 6420 220a 2020  mes to send ".  
+0004ac20: 2020 2020 2020 226d 756c 7469 706c 6520        "multiple 
+0004ac30: 6669 6c65 732e 2046 6972 7374 2066 696c  files. First fil
+0004ac40: 6573 2061 7265 2073 656e 742c 2022 0a20  es are sent, ". 
+0004ac50: 2020 2020 2020 2022 7468 656e 2074 6578         "then tex
+0004ac60: 7420 6d65 7373 6167 6573 2061 7265 2073  t messages are s
+0004ac70: 656e 742e 2022 0a20 2020 2020 2020 2066  ent. ".        f
+0004ac80: 2249 6620 796f 7520 7761 6e74 2074 6f20  "If you want to 
+0004ac90: 6665 6564 2061 2066 696c 6520 696e 746f  feed a file into
+0004aca0: 207b 5052 4f47 5f57 4954 484f 5554 5f45   {PROG_WITHOUT_E
+0004acb0: 5854 7d20 220a 2020 2020 2020 2020 2276  XT} ".        "v
+0004acc0: 6961 2061 2070 6970 652c 2076 6961 2073  ia a pipe, via s
+0004acd0: 7464 696e 2c20 7468 656e 2073 7065 6369  tdin, then speci
+0004ace0: 6679 2074 6865 2073 7065 6369 616c 2022  fy the special "
+0004acf0: 0a20 2020 2020 2020 2022 6368 6172 6163  .        "charac
+0004ad00: 7465 7220 272d 272e 2053 6565 2064 6573  ter '-'. See des
+0004ad10: 6372 6970 7469 6f6e 206f 6620 272d 6927  cription of '-i'
+0004ad20: 2074 6f20 7365 6520 686f 7720 272d 2720   to see how '-' 
+0004ad30: 6973 2068 616e 646c 6564 2e22 2c0a 2020  is handled.",.  
+0004ad40: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+0004ad50: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+0004ad60: 2022 2d65 222c 0a20 2020 2020 2020 2022   "-e",.        "
+0004ad70: 2d2d 6576 656e 7422 2c0a 2020 2020 2020  --event",.      
+0004ad80: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
+0004ad90: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
+0004ada0: 3d22 6578 7465 6e64 222c 0a20 2020 2020  ="extend",.     
+0004adb0: 2020 206e 6172 6773 3d22 2b22 2c0a 2020     nargs="+",.  
+0004adc0: 2020 2020 2020 7479 7065 3d73 7472 2c0a        type=str,.
+0004add0: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
+0004ade0: 224d 4154 5249 585f 4a53 4f4e 5f4f 424a  "MATRIX_JSON_OBJ
+0004adf0: 4543 5422 2c0a 2020 2020 2020 2020 6865  ECT",.        he
+0004ae00: 6c70 3d22 5365 6e64 2061 204d 6174 7269  lp="Send a Matri
+0004ae10: 7820 4a53 4f4e 2065 7665 6e74 2e20 220a  x JSON event. ".
+0004ae20: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+0004ae30: 3a3a 2053 656e 6420 616e 2065 7665 6e74  :: Send an event
+0004ae40: 2074 6861 7420 6973 2066 6f72 6d61 7474   that is formatt
+0004ae50: 6564 2061 7320 6120 4a53 4f4e 206f 626a  ed as a JSON obj
+0004ae60: 6563 7420 6173 2022 0a20 2020 2020 2020  ect as ".       
+0004ae70: 2022 7370 6563 6966 6965 6420 6279 2074   "specified by t
+0004ae80: 6865 204d 6174 7269 7820 7072 6f74 6f63  he Matrix protoc
+0004ae90: 6f6c 2e20 5468 6973 2061 6c6c 6f77 7320  ol. This allows 
+0004aea0: 7468 6520 6164 7661 6e63 6564 2022 0a20  the advanced ". 
+0004aeb0: 2020 2020 2020 2022 7573 6572 2074 6f20         "user to 
+0004aec0: 7365 6e64 2061 6464 6974 696f 6e61 6c20  send additional 
+0004aed0: 7479 7065 7320 6f66 2065 7665 6e74 7320  types of events 
+0004aee0: 7375 6368 2061 7320 7265 6163 7469 6f6e  such as reaction
+0004aef0: 732c 2022 0a20 2020 2020 2020 2022 7365  s, ".        "se
+0004af00: 6e64 2072 6570 6c69 6573 2074 6f20 7072  nd replies to pr
+0004af10: 6576 696f 7573 2065 7665 6e74 732c 206f  evious events, o
+0004af20: 7220 6564 6974 2070 7265 7669 6f75 7320  r edit previous 
+0004af30: 6d65 7373 6167 6573 2e20 220a 2020 2020  messages. ".    
+0004af40: 2020 2020 2253 7065 6369 6669 6361 7469      "Specificati
+0004af50: 6f6e 7320 666f 7220 6576 656e 7473 2063  ons for events c
+0004af60: 616e 2062 6520 666f 756e 6420 220a 2020  an be found ".  
+0004af70: 2020 2020 2020 2261 7420 6874 7470 733a        "at https:
+0004af80: 2f2f 7370 6563 2e6d 6174 7269 782e 6f72  //spec.matrix.or
+0004af90: 672f 756e 7374 6162 6c65 2f70 726f 706f  g/unstable/propo
+0004afa0: 7361 6c73 2f2e 2022 0a20 2020 2020 2020  sals/. ".       
+0004afb0: 2022 5468 6973 206f 7074 696f 6e20 6361   "This option ca
+0004afc0: 6e20 6265 2075 7365 6420 6d75 6c74 6970  n be used multip
+0004afd0: 6c65 2074 696d 6573 2074 6f20 7365 6e64  le times to send
+0004afe0: 2022 0a20 2020 2020 2020 2022 6d75 6c74   ".        "mult
+0004aff0: 6970 6c65 2065 7665 6e74 732e 2046 6972  iple events. Fir
+0004b000: 7374 2065 7665 6e74 7320 6172 6520 7365  st events are se
+0004b010: 6e74 2c20 220a 2020 2020 2020 2020 2274  nt, ".        "t
+0004b020: 6865 6e20 7465 7874 206d 6573 7361 6765  hen text message
+0004b030: 7320 6172 6520 7365 6e74 2e20 220a 2020  s are sent. ".  
+0004b040: 2020 2020 2020 6622 4966 2079 6f75 2077        f"If you w
+0004b050: 616e 7420 746f 2066 6565 6420 616e 2065  ant to feed an e
+0004b060: 7665 6e74 2069 6e74 6f20 7b50 524f 475f  vent into {PROG_
+0004b070: 5749 5448 4f55 545f 4558 547d 2022 0a20  WITHOUT_EXT} ". 
+0004b080: 2020 2020 2020 2022 7669 6120 6120 7069         "via a pi
+0004b090: 7065 2c20 7669 6120 7374 6469 6e2c 2074  pe, via stdin, t
+0004b0a0: 6865 6e20 7370 6563 6966 7920 7468 6520  hen specify the 
+0004b0b0: 7370 6563 6961 6c20 220a 2020 2020 2020  special ".      
+0004b0c0: 2020 2263 6861 7261 6374 6572 2027 2d27    "character '-'
+0004b0d0: 2e20 5365 6520 6465 7363 7269 7074 696f  . See descriptio
+0004b0e0: 6e20 6f66 2027 2d69 2720 746f 2073 6565  n of '-i' to see
+0004b0f0: 2068 6f77 2027 2d27 2069 7320 6861 6e64   how '-' is hand
+0004b100: 6c65 642e 2022 0a20 2020 2020 2020 2022  led. ".        "
+0004b110: 5365 6520 7465 7374 732f 7465 7374 2d65  See tests/test-e
+0004b120: 7665 6e74 2e73 6820 666f 7220 6578 616d  vent.sh for exam
+0004b130: 706c 6573 2e22 2c0a 2020 2020 290a 2020  ples.",.    ).  
+0004b140: 2020 2320 2d68 2061 6c72 6561 6479 2075    # -h already u
+0004b150: 7365 6420 666f 7220 2d2d 6865 6c70 2c20  sed for --help, 
+0004b160: 2d77 2066 6f72 2022 7765 6222 0a20 2020  -w for "web".   
+0004b170: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+0004b180: 280a 2020 2020 2020 2020 222d 7722 2c0a  (.        "-w",.
+0004b190: 2020 2020 2020 2020 222d 2d68 746d 6c22          "--html"
+0004b1a0: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+0004b1b0: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
+0004b1c0: 2020 6163 7469 6f6e 3d22 7374 6f72 655f    action="store_
+0004b1d0: 7472 7565 222c 0a20 2020 2020 2020 2068  true",.        h
+0004b1e0: 656c 703d 2753 656e 6420 6d65 7373 6167  elp='Send messag
+0004b1f0: 6520 6173 2066 6f72 6d61 7420 2248 544d  e as format "HTM
+0004b200: 4c22 2e20 270a 2020 2020 2020 2020 2244  L". '.        "D
+0004b210: 6574 6169 6c73 3a3a 2049 6620 6e6f 7420  etails:: If not 
+0004b220: 7370 6563 6966 6965 642c 206d 6573 7361  specified, messa
+0004b230: 6765 2077 696c 6c20 6265 2073 656e 7420  ge will be sent 
+0004b240: 220a 2020 2020 2020 2020 2761 7320 666f  ".        'as fo
+0004b250: 726d 6174 2022 5445 5854 222e 2045 2e67  rmat "TEXT". E.g
+0004b260: 2e20 7468 6174 2061 6c6c 6f77 7320 736f  . that allows so
+0004b270: 6d65 2074 6578 7420 270a 2020 2020 2020  me text '.      
+0004b280: 2020 2274 6f20 6265 2062 6f6c 642c 2065    "to be bold, e
+0004b290: 7463 2e20 4f6e 6c79 2061 2073 7562 7365  tc. Only a subse
+0004b2a0: 7420 6f66 2048 544d 4c20 7461 6773 2061  t of HTML tags a
+0004b2b0: 7265 2022 0a20 2020 2020 2020 2022 6163  re ".        "ac
+0004b2c0: 6365 7074 6564 2062 7920 4d61 7472 6978  cepted by Matrix
+0004b2d0: 2e22 2c0a 2020 2020 290a 2020 2020 2320  .",.    ).    # 
+0004b2e0: 2d6d 2061 6c72 6561 6479 2075 7365 6420  -m already used 
+0004b2f0: 666f 7220 2d2d 6d65 7373 6167 652c 202d  for --message, -
+0004b300: 7a20 6265 6361 7573 6520 7468 6572 6520  z because there 
+0004b310: 7765 7265 206e 6f20 6c65 7474 6572 7320  were no letters 
+0004b320: 6c65 6674 0a20 2020 2061 702e 6164 645f  left.    ap.add_
+0004b330: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+0004b340: 2020 222d 7a22 2c0a 2020 2020 2020 2020    "-z",.        
+0004b350: 222d 2d6d 6172 6b64 6f77 6e22 2c0a 2020  "--markdown",.  
+0004b360: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+0004b370: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
+0004b380: 7469 6f6e 3d22 7374 6f72 655f 7472 7565  tion="store_true
+0004b390: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
+0004b3a0: 2753 656e 6420 6d65 7373 6167 6520 6173  'Send message as
+0004b3b0: 2066 6f72 6d61 7420 224d 4152 4b44 4f57   format "MARKDOW
+0004b3c0: 4e22 2e20 270a 2020 2020 2020 2020 2244  N". '.        "D
+0004b3d0: 6574 6169 6c73 3a3a 2049 6620 6e6f 7420  etails:: If not 
+0004b3e0: 7370 6563 6966 6965 642c 206d 6573 7361  specified, messa
+0004b3f0: 6765 2077 696c 6c20 6265 2073 656e 7420  ge will be sent 
+0004b400: 220a 2020 2020 2020 2020 2761 7320 666f  ".        'as fo
+0004b410: 726d 6174 2022 5445 5854 222e 2045 2e67  rmat "TEXT". E.g
+0004b420: 2e20 7468 6174 2061 6c6c 6f77 7320 7365  . that allows se
+0004b430: 6e64 696e 6720 6f66 2074 6578 7420 270a  nding of text '.
+0004b440: 2020 2020 2020 2020 2266 6f72 6d61 7474          "formatt
+0004b450: 6564 2069 6e20 4d61 726b 446f 776e 206c  ed in MarkDown l
+0004b460: 616e 6775 6167 652e 222c 0a20 2020 2029  anguage.",.    )
+0004b470: 0a20 2020 2023 2020 2d63 2069 7320 616c  .    #  -c is al
+0004b480: 7265 6164 7920 7573 6564 2066 6f72 202d  ready used for -
+0004b490: 2d63 7265 6465 6e74 6961 6c73 2c20 2d6b  -credentials, -k
+0004b4a0: 2061 7320 6974 2073 6f75 6e64 7320 6c69   as it sounds li
+0004b4b0: 6b65 2063 0a20 2020 2061 702e 6164 645f  ke c.    ap.add_
+0004b4c0: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+0004b4d0: 2020 222d 6b22 2c0a 2020 2020 2020 2020    "-k",.        
+0004b4e0: 222d 2d63 6f64 6522 2c0a 2020 2020 2020  "--code",.      
+0004b4f0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
+0004b500: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
+0004b510: 3d22 7374 6f72 655f 7472 7565 222c 0a20  ="store_true",. 
+0004b520: 2020 2020 2020 2068 656c 703d 2753 656e         help='Sen
+0004b530: 6420 6d65 7373 6167 6520 6173 2066 6f72  d message as for
+0004b540: 6d61 7420 2243 4f44 4522 2e20 270a 2020  mat "CODE". '.  
+0004b550: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+0004b560: 2049 6620 6e6f 7420 7370 6563 6966 6965   If not specifie
+0004b570: 642c 206d 6573 7361 6765 2077 696c 6c20  d, message will 
+0004b580: 6265 2073 656e 7420 220a 2020 2020 2020  be sent ".      
+0004b590: 2020 2761 7320 666f 726d 6174 2022 5445    'as format "TE
+0004b5a0: 5854 222e 2049 6620 626f 7468 202d 2d68  XT". If both --h
+0004b5b0: 746d 6c20 616e 6420 2d2d 636f 6465 2061  tml and --code a
+0004b5c0: 7265 2027 0a20 2020 2020 2020 2022 7370  re '.        "sp
+0004b5d0: 6563 6966 6965 6420 7468 656e 202d 2d63  ecified then --c
+0004b5e0: 6f64 6520 7461 6b65 7320 7072 696f 7269  ode takes priori
+0004b5f0: 7479 2e20 5468 6973 2069 7320 220a 2020  ty. This is ".  
+0004b600: 2020 2020 2020 2275 7365 6675 6c20 666f        "useful fo
+0004b610: 7220 7365 6e64 696e 6720 4153 4349 492d  r sending ASCII-
+0004b620: 6172 7420 6f72 2074 6162 6265 6420 6f75  art or tabbed ou
+0004b630: 7470 7574 2022 0a20 2020 2020 2020 2022  tput ".        "
+0004b640: 6c69 6b65 2074 6162 6c65 7320 6173 2061  like tables as a
+0004b650: 2066 6978 6564 2d73 697a 6564 2066 6f6e   fixed-sized fon
+0004b660: 7420 7769 6c6c 2062 6520 7573 6564 2022  t will be used "
+0004b670: 0a20 2020 2020 2020 2022 666f 7220 6469  .        "for di
+0004b680: 7370 6c61 792e 222c 0a20 2020 2029 0a20  splay.",.    ). 
+0004b690: 2020 2023 2020 2d6a 2066 6f72 2065 6d6f     #  -j for emo
+0004b6a0: 4a69 7a65 0a20 2020 2061 702e 6164 645f  Jize.    ap.add_
+0004b6b0: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+0004b6c0: 2020 222d 6a22 2c0a 2020 2020 2020 2020    "-j",.        
+0004b6d0: 222d 2d65 6d6f 6a69 7a65 222c 0a20 2020  "--emojize",.   
+0004b6e0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+0004b6f0: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
+0004b700: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
+0004b710: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
+0004b720: 5365 6e64 206d 6573 7361 6765 2061 6674  Send message aft
+0004b730: 6572 2065 6d6f 6a69 7a69 6e67 2e20 220a  er emojizing. ".
+0004b740: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+0004b750: 3a3a 2049 6620 6e6f 7420 7370 6563 6966  :: If not specif
+0004b760: 6965 642c 206d 6573 7361 6765 2077 696c  ied, message wil
+0004b770: 6c20 6265 2073 656e 7420 220a 2020 2020  l be sent ".    
+0004b780: 2020 2020 2761 7320 666f 726d 6174 2022      'as format "
+0004b790: 5445 5854 222e 2049 6620 626f 7468 202d  TEXT". If both -
+0004b7a0: 2d63 6f64 6520 616e 6420 2d2d 656d 6f6a  -code and --emoj
+0004b7b0: 697a 6520 6172 6520 270a 2020 2020 2020  ize are '.      
+0004b7c0: 2020 2273 7065 6369 6669 6564 2074 6865    "specified the
+0004b7d0: 6e20 2d2d 636f 6465 2074 616b 6573 2070  n --code takes p
+0004b7e0: 7269 6f72 6974 792e 2054 6869 7320 6973  riority. This is
+0004b7f0: 2022 0a20 2020 2020 2020 2022 7573 6566   ".        "usef
+0004b800: 756c 2066 6f72 2073 656e 6469 6e67 2065  ul for sending e
+0004b810: 6d6f 6a69 7320 696e 2073 686f 7274 636f  mojis in shortco
+0004b820: 6465 2066 6f72 6d20 3a63 6f6c 6c69 7369  de form :collisi
+0004b830: 6f6e 3a2e 222c 0a20 2020 2029 0a0a 2020  on:.",.    )..  
+0004b840: 2020 2320 2d73 2069 7320 616c 7265 6164    # -s is alread
+0004b850: 7920 7573 6564 2066 6f72 202d 2d73 746f  y used for --sto
+0004b860: 7265 2c20 2d69 2066 6f72 2073 506c 6974  re, -i for sPlit
+0004b870: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
+0004b880: 6d65 6e74 280a 2020 2020 2020 2020 222d  ment(.        "-
+0004b890: 7022 2c0a 2020 2020 2020 2020 222d 2d73  p",.        "--s
+0004b8a0: 706c 6974 222c 0a20 2020 2020 2020 2072  plit",.        r
+0004b8b0: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
+0004b8c0: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
+0004b8d0: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
+0004b8e0: 3d22 5345 5041 5241 544f 5222 2c0a 2020  ="SEPARATOR",.  
+0004b8f0: 2020 2020 2020 6865 6c70 3d22 5370 6c69        help="Spli
+0004b900: 7420 6d65 7373 6167 6520 7465 7874 2069  t message text i
+0004b910: 6e74 6f20 6d75 6c74 6970 6c65 204d 6174  nto multiple Mat
+0004b920: 7269 7820 6d65 7373 6167 6573 2e20 220a  rix messages. ".
+0004b930: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+0004b940: 3a3a 2049 6620 7365 742c 2073 706c 6974  :: If set, split
+0004b950: 2074 6865 206d 6573 7361 6765 2873 2920   the message(s) 
+0004b960: 696e 746f 206d 756c 7469 706c 6520 6d65  into multiple me
+0004b970: 7373 6167 6573 2022 0a20 2020 2020 2020  ssages ".       
+0004b980: 2022 7768 6572 6576 6572 2074 6865 2073   "wherever the s
+0004b990: 7472 696e 6720 7370 6563 6966 6965 6420  tring specified 
+0004b9a0: 7769 7468 202d 2d73 706c 6974 206f 6363  with --split occ
+0004b9b0: 7572 732e 2022 0a20 2020 2020 2020 2022  urs. ".        "
+0004b9c0: 452e 672e 204f 6e65 2070 6970 6573 2061  E.g. One pipes a
+0004b9d0: 2073 7472 6561 6d20 6f66 2052 5353 2061   stream of RSS a
+0004b9e0: 7274 6963 6c65 7320 696e 746f 2074 6865  rticles into the
+0004b9f0: 2022 0a20 2020 2020 2020 2022 7072 6f67   ".        "prog
+0004ba00: 7261 6d20 616e 6420 7468 6520 6172 7469  ram and the arti
+0004ba10: 636c 6573 2061 7265 2073 6570 6172 6174  cles are separat
+0004ba20: 6564 2062 7920 7468 7265 6520 220a 2020  ed by three ".  
+0004ba30: 2020 2020 2020 226e 6577 6c69 6e65 732e        "newlines.
+0004ba40: 2022 0a20 2020 2020 2020 2027 5468 656e   ".        'Then
+0004ba50: 2077 6974 6820 2d2d 7370 6c69 7420 7365   with --split se
+0004ba60: 7420 746f 2022 5c5c 6e5c 5c6e 5c5c 6e22  t to "\\n\\n\\n"
+0004ba70: 2065 6163 6820 6172 7469 636c 6520 270a   each article '.
+0004ba80: 2020 2020 2020 2020 2277 696c 6c20 6265          "will be
+0004ba90: 2070 7269 6e74 6564 2069 6e20 6120 7365   printed in a se
+0004baa0: 7061 7261 7465 206d 6573 7361 6765 2e20  parate message. 
+0004bab0: 220a 2020 2020 2020 2020 2242 7920 6465  ".        "By de
+0004bac0: 6661 756c 742c 2069 2e65 2e20 6966 206e  fault, i.e. if n
+0004bad0: 6f74 2073 6574 2c20 6e6f 206d 6573 7361  ot set, no messa
+0004bae0: 6765 7320 7769 6c6c 2062 6520 7370 6c69  ges will be spli
+0004baf0: 742e 222c 0a20 2020 2029 0a20 2020 2023  t.",.    ).    #
+0004bb00: 202d 6320 6973 2061 6c72 6561 6479 2075   -c is already u
+0004bb10: 7365 6420 666f 7220 2d2d 6372 6564 656e  sed for --creden
+0004bb20: 7469 616c 730a 2020 2020 6170 2e61 6464  tials.    ap.add
+0004bb30: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+0004bb40: 2020 2022 2d2d 636f 6e66 6967 222c 0a20     "--config",. 
+0004bb50: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+0004bb60: 4661 6c73 652c 0a20 2020 2020 2020 2074  False,.        t
+0004bb70: 7970 653d 7374 722c 0a20 2020 2020 2020  ype=str,.       
+0004bb80: 206d 6574 6176 6172 3d22 434f 4e46 4947   metavar="CONFIG
+0004bb90: 5f46 494c 4522 2c0a 2020 2020 2020 2020  _FILE",.        
+0004bba0: 6865 6c70 3d22 5370 6563 6966 7920 7468  help="Specify th
+0004bbb0: 6520 6c6f 6361 7469 6f6e 206f 6620 6120  e location of a 
+0004bbc0: 636f 6e66 6967 2066 696c 652e 2022 0a20  config file. ". 
+0004bbd0: 2020 2020 2020 2022 4465 7461 696c 733a         "Details:
+0004bbe0: 3a20 4279 2064 6566 6175 6c74 2c20 6e6f  : By default, no
+0004bbf0: 2022 0a20 2020 2020 2020 2022 636f 6e66   ".        "conf
+0004bc00: 6967 2066 696c 6520 6973 2075 7365 642e  ig file is used.
+0004bc10: 2022 0a20 2020 2020 2020 2022 4966 2074   ".        "If t
+0004bc20: 6869 7320 6f70 7469 6f6e 2069 7320 7072  his option is pr
+0004bc30: 6f76 6964 6564 2c20 7468 6520 7072 6f76  ovided, the prov
+0004bc40: 6964 6564 2066 696c 6520 6e61 6d65 2022  ided file name "
+0004bc50: 0a20 2020 2020 2020 2022 7769 6c6c 2062  .        "will b
+0004bc60: 6520 7573 6564 2074 6f20 7265 6164 2063  e used to read c
+0004bc70: 6f6e 6669 6775 7261 7469 6f6e 2066 726f  onfiguration fro
+0004bc80: 6d2e 204e 6f74 2069 6d70 6c65 6d65 6e74  m. Not implement
+0004bc90: 6564 2e22 2c0a 2020 2020 290a 2020 2020  ed.",.    ).    
+0004bca0: 2320 2d70 2069 7320 616c 7265 6164 7920  # -p is already 
+0004bcb0: 7573 6564 2066 6f72 202d 2d73 706c 6974  used for --split
+0004bcc0: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
+0004bcd0: 6d65 6e74 280a 2020 2020 2020 2020 222d  ment(.        "-
+0004bce0: 2d70 726f 7879 222c 0a20 2020 2020 2020  -proxy",.       
+0004bcf0: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
+0004bd00: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
+0004bd10: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
+0004bd20: 6172 3d22 5052 4f58 5922 2c0a 2020 2020  ar="PROXY",.    
+0004bd30: 2020 2020 6865 6c70 3d22 5370 6563 6966      help="Specif
+0004bd40: 7920 6120 7072 6f78 7920 666f 7220 636f  y a proxy for co
+0004bd50: 6e6e 6563 7469 7669 7479 2e20 220a 2020  nnectivity. ".  
+0004bd60: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+0004bd70: 2042 7920 6465 6661 756c 742c 2022 0a20   By default, ". 
+0004bd80: 2020 2020 2020 2022 692e 652e 2069 6620         "i.e. if 
+0004bd90: 7468 6973 206f 7074 696f 6e20 6973 206e  this option is n
+0004bda0: 6f74 2073 6574 2c20 6e6f 2070 726f 7879  ot set, no proxy
+0004bdb0: 2069 7320 7573 6564 2e20 220a 2020 2020   is used. ".    
+0004bdc0: 2020 2020 2249 6620 7468 6973 206f 7074      "If this opt
+0004bdd0: 696f 6e20 6973 2075 7365 6420 6120 7072  ion is used a pr
+0004bde0: 6f78 7920 5552 4c20 6d75 7374 2062 6520  oxy URL must be 
+0004bdf0: 7072 6f76 6964 6564 2e20 220a 2020 2020  provided. ".    
+0004be00: 2020 2020 2254 6865 2070 726f 7669 6465      "The provide
+0004be10: 6420 7072 6f78 7920 5552 4c20 220a 2020  d proxy URL ".  
+0004be20: 2020 2020 2020 2277 696c 6c20 6265 2075        "will be u
+0004be30: 7365 6420 666f 7220 7468 6520 4854 5450  sed for the HTTP
+0004be40: 2063 6f6e 6e65 6374 696f 6e20 746f 2074   connection to t
+0004be50: 6865 2073 6572 7665 722e 2022 0a20 2020  he server. ".   
+0004be60: 2020 2020 2022 5468 6520 7072 6f78 7920       "The proxy 
+0004be70: 7375 7070 6f72 7473 2053 4f43 4b53 3428  supports SOCKS4(
+0004be80: 6129 2c20 534f 434b 5335 2c20 616e 6420  a), SOCKS5, and 
+0004be90: 4854 5450 2028 7475 6e6e 656c 696e 6729  HTTP (tunneling)
+0004bea0: 2e20 220a 2020 2020 2020 2020 2745 7861  . ".        'Exa
+0004beb0: 6d70 6c65 7320 6f66 2076 616c 6964 2055  mples of valid U
+0004bec0: 524c 7320 6172 6520 2268 7474 703a 2f2f  RLs are "http://
+0004bed0: 3130 2e31 302e 3130 2e31 303a 3831 3138  10.10.10.10:8118
+0004bee0: 2220 270a 2020 2020 2020 2020 276f 7220  " '.        'or 
+0004bef0: 2273 6f63 6b73 353a 2f2f 7573 6572 3a70  "socks5://user:p
+0004bf00: 6173 7377 6f72 6440 3132 372e 302e 302e  assword@127.0.0.
+0004bf10: 313a 3130 3830 222e 2027 0a20 2020 2020  1:1080". '.     
+0004bf20: 2020 2027 5552 4c73 2077 6974 6820 2268     'URLs with "h
+0004bf30: 7474 7073 2220 6f72 2022 736f 636b 7334  ttps" or "socks4
+0004bf40: 6122 2061 7265 206e 6f74 2076 616c 6964  a" are not valid
+0004bf50: 2e20 4f6e 6c79 2027 0a20 2020 2020 2020  . Only '.       
+0004bf60: 2027 2268 7474 7022 2c20 2273 6f63 6b73   '"http", "socks
+0004bf70: 3422 2061 6e64 2022 736f 636b 7335 2220  4" and "socks5" 
+0004bf80: 6172 6520 7661 6c69 642e 272c 0a20 2020  are valid.',.   
+0004bf90: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
+0004bfa0: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
+0004bfb0: 222d 6e22 2c0a 2020 2020 2020 2020 222d  "-n",.        "-
+0004bfc0: 2d6e 6f74 6963 6522 2c0a 2020 2020 2020  -notice",.      
+0004bfd0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
+0004bfe0: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
+0004bff0: 3d22 7374 6f72 655f 7472 7565 222c 0a20  ="store_true",. 
+0004c000: 2020 2020 2020 2068 656c 703d 2253 656e         help="Sen
+0004c010: 6420 6d65 7373 6167 6520 6173 206e 6f74  d message as not
+0004c020: 6963 652e 2022 0a20 2020 2020 2020 2022  ice. ".        "
+0004c030: 4465 7461 696c 733a 3a20 4966 206e 6f74  Details:: If not
+0004c040: 2073 7065 6369 6669 6564 2c20 6d65 7373   specified, mess
+0004c050: 6167 6520 7769 6c6c 2062 6520 7365 6e74  age will be sent
+0004c060: 2061 7320 7465 7874 2e22 2c0a 2020 2020   as text.",.    
+0004c070: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
+0004c080: 756d 656e 7428 0a20 2020 2020 2020 2023  ument(.        #
+0004c090: 206e 6f20 7369 6e67 6c65 2063 6861 7220   no single char 
+0004c0a0: 666c 6167 0a20 2020 2020 2020 2022 2d2d  flag.        "--
+0004c0b0: 656e 6372 7970 7465 6422 2c0a 2020 2020  encrypted",.    
+0004c0c0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+0004c0d0: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
+0004c0e0: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
+0004c0f0: 0a20 2020 2020 2020 2068 656c 703d 2253  .        help="S
+0004c100: 656e 6420 6d65 7373 6167 6520 656e 642d  end message end-
+0004c110: 746f 2d65 6e64 2065 6e63 7279 7074 6564  to-end encrypted
+0004c120: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
+0004c130: 6169 6c73 3a3a 2045 6e63 7279 7074 696f  ails:: Encryptio
+0004c140: 6e20 6973 2061 6c77 6179 7320 7475 726e  n is always turn
+0004c150: 6564 206f 6e20 616e 6420 220a 2020 2020  ed on and ".    
+0004c160: 2020 2020 2277 696c 6c20 616c 7761 7973      "will always
+0004c170: 2062 6520 7573 6564 2077 6865 7265 2070   be used where p
+0004c180: 6f73 7369 626c 652e 2022 0a20 2020 2020  ossible. ".     
+0004c190: 2020 2022 4974 2063 616e 6e6f 7420 6265     "It cannot be
+0004c1a0: 2074 7572 6e65 6420 6f66 662e 2054 6869   turned off. Thi
+0004c1b0: 7320 666c 6167 2064 6f65 7320 6e6f 7468  s flag does noth
+0004c1c0: 696e 6720 220a 2020 2020 2020 2020 2261  ing ".        "a
+0004c1d0: 7320 656e 6372 7970 7469 6f6e 2069 7320  s encryption is 
+0004c1e0: 7475 726e 6564 206f 6e20 7769 7468 206f  turned on with o
+0004c1f0: 7220 7769 7468 6f75 7420 7468 6973 2022  r without this "
+0004c200: 0a20 2020 2020 2020 2022 6172 6775 6d65  .        "argume
+0004c210: 6e74 2e20 5468 6973 2066 6c61 6720 6578  nt. This flag ex
+0004c220: 6973 7473 206f 6e6c 7920 666f 7220 6869  ists only for hi
+0004c230: 7374 6f72 6963 2072 6561 736f 6e73 2e20  storic reasons. 
+0004c240: 220a 2020 2020 2020 2020 2249 6e20 736f  ".        "In so
+0004c250: 6d65 2073 7065 6369 6669 6320 6361 7365  me specific case
+0004c260: 2065 6e63 7279 7074 696f 6e20 220a 2020   encryption ".  
+0004c270: 2020 2020 2020 2263 616e 2062 6520 6469        "can be di
+0004c280: 7361 626c 6564 2c20 706c 6561 7365 2073  sabled, please s
+0004c290: 6565 202d 2d70 6c61 696e 2e22 2c0a 2020  ee --plain.",.  
+0004c2a0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+0004c2b0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+0004c2c0: 2022 2d6c 222c 0a20 2020 2020 2020 2022   "-l",.        "
+0004c2d0: 2d2d 6c69 7374 656e 222c 0a20 2020 2020  --listen",.     
+0004c2e0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+0004c2f0: 652c 0a20 2020 2020 2020 2074 7970 653d  e,.        type=
+0004c300: 7374 722c 0a20 2020 2020 2020 2064 6566  str,.        def
+0004c310: 6175 6c74 3d4c 4953 5445 4e5f 4445 4641  ault=LISTEN_DEFA
+0004c320: 554c 542c 2020 2320 7768 656e 202d 6c20  ULT,  # when -l 
+0004c330: 6973 206e 6f74 2075 7365 640a 2020 2020  is not used.    
+0004c340: 2020 2020 6e61 7267 733d 223f 222c 2020      nargs="?",  
+0004c350: 2320 6d61 6b65 7320 7468 6520 776f 7264  # makes the word
+0004c360: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
+0004c370: 2020 636f 6e73 743d 464f 5245 5645 522c    const=FOREVER,
+0004c380: 2020 2320 7768 656e 202d 6c20 6973 2075    # when -l is u
+0004c390: 7365 642c 2062 7574 2046 4f52 4556 4552  sed, but FOREVER
+0004c3a0: 2069 7320 6e6f 7420 6164 6465 640a 2020   is not added.  
+0004c3b0: 2020 2020 2020 6d65 7461 7661 723d 224e        metavar="N
+0004c3c0: 4556 4552 7c4f 4e43 457c 464f 5245 5645  EVER|ONCE|FOREVE
+0004c3d0: 527c 5441 494c 7c41 4c4c 222c 0a20 2020  R|TAIL|ALL",.   
+0004c3e0: 2020 2020 2068 656c 703d 2250 7269 6e74       help="Print
+0004c3f0: 2072 6563 6569 7665 6420 6d65 7373 6167   received messag
+0004c400: 6573 2061 6e64 206c 6973 7465 6e20 746f  es and listen to
+0004c410: 206d 6573 7361 6765 732e 2022 0a20 2020   messages. ".   
+0004c420: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+0004c430: 5468 6520 2d2d 6c69 7374 656e 206f 7074  The --listen opt
+0004c440: 696f 6e20 7461 6b65 7320 6f6e 6520 6172  ion takes one ar
+0004c450: 6775 6d65 6e74 2e20 5468 6572 6520 220a  gument. There ".
+0004c460: 2020 2020 2020 2020 6627 6172 6520 7365          f'are se
+0004c470: 7665 7261 6c20 6368 6f69 6365 733a 2022  veral choices: "
+0004c480: 7b4e 4556 4552 7d22 2c20 227b 4f4e 4345  {NEVER}", "{ONCE
+0004c490: 7d22 2c20 270a 2020 2020 2020 2020 6627  }", '.        f'
+0004c4a0: 227b 464f 5245 5645 527d 222c 2022 7b54  "{FOREVER}", "{T
+0004c4b0: 4149 4c7d 222c 2061 6e64 2022 7b41 4c4c  AIL}", and "{ALL
+0004c4c0: 7d22 2e20 270a 2020 2020 2020 2020 6627  }". '.        f'
+0004c4d0: 4279 2064 6566 6175 6c74 2c20 2d2d 6c69  By default, --li
+0004c4e0: 7374 656e 2069 7320 7365 7420 746f 2022  sten is set to "
+0004c4f0: 7b4e 4556 4552 7d22 2e20 2053 6f2c 2062  {NEVER}".  So, b
+0004c500: 7920 270a 2020 2020 2020 2020 2264 6566  y '.        "def
+0004c510: 6175 6c74 206e 6f20 6c69 7374 656e 696e  ault no listenin
+0004c520: 6720 7769 6c6c 2062 6520 646f 6e65 2e20  g will be done. 
+0004c530: 5365 7420 6974 2074 6f20 220a 2020 2020  Set it to ".    
+0004c540: 2020 2020 6627 227b 464f 5245 5645 527d      f'"{FOREVER}
+0004c550: 2220 746f 206c 6973 7465 6e20 666f 7220  " to listen for 
+0004c560: 616e 6420 7072 696e 7420 696e 636f 6d69  and print incomi
+0004c570: 6e67 206d 6573 7361 6765 7320 270a 2020  ng messages '.  
+0004c580: 2020 2020 2020 2274 6f20 7374 646f 7574        "to stdout
+0004c590: 2e20 220a 2020 2020 2020 2020 6627 222d  . ".        f'"-
+0004c5a0: 2d6c 6973 7465 6e20 7b46 4f52 4556 4552  -listen {FOREVER
+0004c5b0: 7d22 2077 696c 6c20 6c69 7374 656e 2074  }" will listen t
+0004c5c0: 6f20 616c 6c20 6d65 7373 6167 6573 206f  o all messages o
+0004c5d0: 6e20 270a 2020 2020 2020 2020 2261 6c6c  n '.        "all
+0004c5e0: 2072 6f6f 6d73 2066 6f72 6576 6572 2e20   rooms forever. 
+0004c5f0: 220a 2020 2020 2020 2020 6627 546f 2073  ".        f'To s
+0004c600: 746f 7020 6c69 7374 656e 696e 6720 227b  top listening "{
+0004c610: 464f 5245 5645 527d 222c 2075 7365 2043  FOREVER}", use C
+0004c620: 6f6e 7472 6f6c 2d43 206f 6e20 270a 2020  ontrol-C on '.  
+0004c630: 2020 2020 2020 2274 6865 206b 6579 626f        "the keybo
+0004c640: 6172 6420 6f72 2073 656e 6420 6120 7369  ard or send a si
+0004c650: 676e 616c 2074 6f20 7468 6520 7072 6f63  gnal to the proc
+0004c660: 6573 7320 6f72 2073 6572 7669 6365 2e20  ess or service. 
+0004c670: 220a 2020 2020 2020 2020 2254 6865 2050  ".        "The P
+0004c680: 4944 2066 6f72 2073 6967 6e61 6c69 6e67  ID for signaling
+0004c690: 2063 616e 2062 6520 666f 756e 6420 696e   can be found in
+0004c6a0: 2061 2050 4944 2066 696c 6520 696e 2022   a PID file in "
+0004c6b0: 0a20 2020 2020 2020 2066 2764 6972 6563  .        f'direc
+0004c6c0: 746f 7279 2022 7b50 4944 5f44 4952 5f44  tory "{PID_DIR_D
+0004c6d0: 4546 4155 4c54 7d22 2e20 270a 2020 2020  EFAULT}". '.    
+0004c6e0: 2020 2020 6627 222d 2d6c 6973 7465 6e20      f'"--listen 
+0004c6f0: 7b4f 4e43 457d 2220 7769 6c6c 2067 6574  {ONCE}" will get
+0004c700: 2061 6c6c 2074 6865 206d 6573 7361 6765   all the message
+0004c710: 7320 6672 6f6d 2027 0a20 2020 2020 2020  s from '.       
+0004c720: 2022 616c 6c20 726f 6f6d 7320 7468 6174   "all rooms that
+0004c730: 2061 7265 2063 7572 7265 6e74 6c79 2071   are currently q
+0004c740: 7565 7565 6420 7570 2e20 536f 2c20 7769  ueued up. So, wi
+0004c750: 7468 2022 0a20 2020 2020 2020 2066 2722  th ".        f'"
+0004c760: 7b4f 4e43 457d 2220 7468 6520 7072 6f67  {ONCE}" the prog
+0004c770: 7261 6d20 7769 6c6c 2073 7461 7274 2c20  ram will start, 
+0004c780: 7072 696e 7420 7761 6974 696e 6720 270a  print waiting '.
+0004c790: 2020 2020 2020 2020 226d 6573 7361 6765          "message
+0004c7a0: 7320 2869 6620 616e 7929 2061 6e64 2074  s (if any) and t
+0004c7b0: 6865 6e20 7374 6f70 2e20 5468 6520 7469  hen stop. The ti
+0004c7c0: 6d65 6f75 7420 666f 7220 220a 2020 2020  meout for ".    
+0004c7d0: 2020 2020 6627 227b 4f4e 4345 7d22 2069      f'"{ONCE}" i
+0004c7e0: 7320 7365 7420 746f 2031 3020 7365 636f  s set to 10 seco
+0004c7f0: 6e64 732e 2053 6f2c 2062 6520 7061 7469  nds. So, be pati
+0004c800: 656e 742c 2069 7420 270a 2020 2020 2020  ent, it '.      
+0004c810: 2020 226d 6967 6874 2074 616b 6520 7570    "might take up
+0004c820: 2074 6f20 7468 6174 2061 6d6f 756e 7420   to that amount 
+0004c830: 6f66 2074 696d 652e 2022 0a20 2020 2020  of time. ".     
+0004c840: 2020 2066 2722 7b54 4149 4c7d 2220 7265     f'"{TAIL}" re
+0004c850: 6164 7320 616e 6420 7072 696e 7473 2074  ads and prints t
+0004c860: 6865 206c 6173 7420 4e20 270a 2020 2020  he last N '.    
+0004c870: 2020 2020 226d 6573 7361 6765 7320 6672      "messages fr
+0004c880: 6f6d 2074 6865 2073 7065 6369 6669 6564  om the specified
+0004c890: 2072 6f6f 6d73 2c20 7468 656e 2071 7569   rooms, then qui
+0004c8a0: 7473 2e20 5468 6520 220a 2020 2020 2020  ts. The ".      
+0004c8b0: 2020 226e 756d 6265 7220 4e20 6361 6e20    "number N can 
+0004c8c0: 6265 2073 6574 2077 6974 6820 7468 6520  be set with the 
+0004c8d0: 2d2d 7461 696c 206f 7074 696f 6e2e 2057  --tail option. W
+0004c8e0: 6974 6820 220a 2020 2020 2020 2020 6627  ith ".        f'
+0004c8f0: 227b 5441 494c 7d22 2073 6f6d 6520 6d65  "{TAIL}" some me
+0004c900: 7373 6167 6573 2072 6561 6420 6d69 6768  ssages read migh
+0004c910: 7420 6265 206f 6c64 2c20 270a 2020 2020  t be old, '.    
+0004c920: 2020 2020 2269 2e65 2e20 616c 7265 6164      "i.e. alread
+0004c930: 7920 7265 6164 2062 6566 6f72 652c 2073  y read before, s
+0004c940: 6f6d 6520 6d69 6768 7420 6265 206e 6577  ome might be new
+0004c950: 2c20 220a 2020 2020 2020 2020 2269 2e65  , ".        "i.e
+0004c960: 2e20 6e65 7665 7220 7265 6164 2062 6566  . never read bef
+0004c970: 6f72 652e 2049 7420 7072 696e 7473 2074  ore. It prints t
+0004c980: 6865 206d 6573 7361 6765 7320 616e 6420  he messages and 
+0004c990: 7468 656e 2022 0a20 2020 2020 2020 2066  then ".        f
+0004c9a0: 2274 6865 2070 726f 6772 616d 2073 746f  "the program sto
+0004c9b0: 7073 2e20 220a 2020 2020 2020 2020 224d  ps. ".        "M
+0004c9c0: 6573 7361 6765 7320 6172 6520 736f 7274  essages are sort
+0004c9d0: 6564 2c20 6c61 7374 2d66 6972 7374 2e20  ed, last-first. 
+0004c9e0: 220a 2020 2020 2020 2020 224c 6f6f 6b20  ".        "Look 
+0004c9f0: 6174 202d 2d74 6169 6c20 6173 2074 6861  at --tail as tha
+0004ca00: 7420 6f70 7469 6f6e 2069 7320 7265 6c61  t option is rela
+0004ca10: 7465 6420 220a 2020 2020 2020 2020 2274  ted ".        "t
+0004ca20: 6f20 2d2d 6c69 7374 656e 2074 6169 6c2e  o --listen tail.
+0004ca30: 2022 0a20 2020 2020 2020 2066 2754 6865   ".        f'The
+0004ca40: 206f 7074 696f 6e20 227b 414c 4c7d 2220   option "{ALL}" 
+0004ca50: 6765 7473 2061 6c6c 206d 6573 7361 6765  gets all message
+0004ca60: 7320 6176 6169 6c61 626c 652c 2027 0a20  s available, '. 
+0004ca70: 2020 2020 2020 2022 6f6c 6420 616e 6420         "old and 
+0004ca80: 6e65 772e 2022 0a20 2020 2020 2020 2066  new. ".        f
+0004ca90: 2755 6e6c 696b 6520 227b 4f4e 4345 7d22  'Unlike "{ONCE}"
+0004caa0: 2061 6e64 2027 0a20 2020 2020 2020 2066   and '.        f
+0004cab0: 2722 7b46 4f52 4556 4552 7d22 2074 6861  '"{FOREVER}" tha
+0004cac0: 7420 6c69 7374 656e 2069 6e20 414c 4c20  t listen in ALL 
+0004cad0: 726f 6f6d 732c 2022 7b54 4149 4c7d 2220  rooms, "{TAIL}" 
+0004cae0: 270a 2020 2020 2020 2020 6627 616e 6420  '.        f'and 
+0004caf0: 227b 414c 4c7d 2220 6c69 7374 656e 2027  "{ALL}" listen '
+0004cb00: 0a20 2020 2020 2020 2022 6f6e 6c79 2074  .        "only t
+0004cb10: 6f20 7468 6520 726f 6f6d 2073 7065 6369  o the room speci
+0004cb20: 6669 6564 2069 6e20 7468 6520 6372 6564  fied in the cred
+0004cb30: 656e 7469 616c 7320 220a 2020 2020 2020  entials ".      
+0004cb40: 2020 2266 696c 6520 6f72 2074 6865 202d    "file or the -
+0004cb50: 2d72 6f6f 6d20 6f70 7469 6f6e 732e 2022  -room options. "
+0004cb60: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+0004cb70: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+0004cb80: 2020 2020 2022 2d74 222c 0a20 2020 2020       "-t",.     
+0004cb90: 2020 2022 2d2d 7461 696c 222c 0a20 2020     "--tail",.   
+0004cba0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+0004cbb0: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
+0004cbc0: 653d 696e 742c 0a20 2020 2020 2020 2064  e=int,.        d
+0004cbd0: 6566 6175 6c74 3d54 4149 4c5f 554e 5553  efault=TAIL_UNUS
+0004cbe0: 4544 5f44 4546 4155 4c54 2c20 2023 2077  ED_DEFAULT,  # w
+0004cbf0: 6865 6e20 2d74 2069 7320 6e6f 7420 7573  hen -t is not us
+0004cc00: 6564 0a20 2020 2020 2020 206e 6172 6773  ed.        nargs
+0004cc10: 3d22 3f22 2c20 2023 206d 616b 6573 2074  ="?",  # makes t
+0004cc20: 6865 2077 6f72 6420 6f70 7469 6f6e 616c  he word optional
+0004cc30: 0a20 2020 2020 2020 2023 2077 6865 6e20  .        # when 
+0004cc40: 2d74 2069 7320 7573 6564 2c20 6275 7420  -t is used, but 
+0004cc50: 6e75 6d62 6572 2069 7320 6e6f 7420 6164  number is not ad
+0004cc60: 6465 640a 2020 2020 2020 2020 636f 6e73  ded.        cons
+0004cc70: 743d 5441 494c 5f55 5345 445f 4445 4641  t=TAIL_USED_DEFA
+0004cc80: 554c 542c 0a20 2020 2020 2020 206d 6574  ULT,.        met
+0004cc90: 6176 6172 3d22 4e55 4d42 4552 222c 0a20  avar="NUMBER",. 
+0004cca0: 2020 2020 2020 2068 656c 703d 2250 7269         help="Pri
+0004ccb0: 6e74 206c 6173 7420 6d65 7373 6167 6573  nt last messages
+0004ccc0: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
+0004ccd0: 6169 6c73 3a3a 2054 6865 202d 2d74 6169  ails:: The --tai
+0004cce0: 6c20 6f70 7469 6f6e 2072 6561 6473 2061  l option reads a
+0004ccf0: 6e64 2070 7269 6e74 7320 7570 2074 6f20  nd prints up to 
+0004cd00: 7468 6520 6c61 7374 204e 2022 0a20 2020  the last N ".   
+0004cd10: 2020 2020 2022 6d65 7373 6167 6573 2066       "messages f
+0004cd20: 726f 6d20 7468 6520 7370 6563 6966 6965  rom the specifie
+0004cd30: 6420 726f 6f6d 732c 2074 6865 6e20 7175  d rooms, then qu
+0004cd40: 6974 732e 2022 0a20 2020 2020 2020 2022  its. ".        "
+0004cd50: 4974 2074 616b 6573 206f 6e65 2022 0a20  It takes one ". 
+0004cd60: 2020 2020 2020 2022 6172 6775 6d65 6e74         "argument
+0004cd70: 2c20 616e 2069 6e74 6567 6572 2c20 220a  , an integer, ".
+0004cd80: 2020 2020 2020 2020 2277 6869 6368 2077          "which w
+0004cd90: 6520 6361 6c6c 204e 2068 6572 652e 2049  e call N here. I
+0004cda0: 6620 7468 6572 6520 6172 6520 6665 7765  f there are fewe
+0004cdb0: 7220 7468 616e 204e 206d 6573 7361 6765  r than N message
+0004cdc0: 7320 220a 2020 2020 2020 2020 2269 6e20  s ".        "in 
+0004cdd0: 6120 726f 6f6d 2c20 6974 2072 6561 6473  a room, it reads
+0004cde0: 2061 6e64 2070 7269 6e74 7320 7570 2074   and prints up t
+0004cdf0: 6f20 4e20 6d65 7373 6167 6573 2e20 220a  o N messages. ".
+0004ce00: 2020 2020 2020 2020 2249 7420 6765 7473          "It gets
+0004ce10: 2074 6865 206c 6173 7420 4e20 6d65 7373   the last N mess
+0004ce20: 6167 6573 2069 6e20 7265 7665 7273 6520  ages in reverse 
+0004ce30: 6f72 6465 722e 2022 0a20 2020 2020 2020  order. ".       
+0004ce40: 2022 4974 2070 7269 6e74 2074 6865 206e   "It print the n
+0004ce50: 6577 6573 7420 6d65 7373 6167 6520 6669  ewest message fi
+0004ce60: 7273 742c 2061 6e64 2074 6865 2022 0a20  rst, and the ". 
+0004ce70: 2020 2020 2020 2022 6f6c 6465 7374 206d         "oldest m
+0004ce80: 6573 7361 6765 206c 6173 742e 2022 0a20  essage last. ". 
+0004ce90: 2020 2020 2020 2022 4966 202d 2d6c 6973         "If --lis
+0004cea0: 7465 6e2d 7365 6c66 2069 7320 6e6f 7420  ten-self is not 
+0004ceb0: 7365 7420 6974 2077 696c 6c20 7072 696e  set it will prin
+0004cec0: 7420 6c65 7373 2074 6861 6e20 220a 2020  t less than ".  
+0004ced0: 2020 2020 2020 224e 206d 6573 7361 6765        "N message
+0004cee0: 7320 696e 206d 616e 7920 6361 7365 7320  s in many cases 
+0004cef0: 6265 6361 7573 6520 4e20 6d65 7373 6167  because N messag
+0004cf00: 6573 2061 7265 2022 0a20 2020 2020 2020  es are ".       
+0004cf10: 2022 6f62 7461 696e 6564 2c20 6275 7420   "obtained, but 
+0004cf20: 736f 6d65 206f 6620 7468 656d 2061 7265  some of them are
+0004cf30: 2064 6973 6361 7264 6564 2062 7920 6465   discarded by de
+0004cf40: 6661 756c 7420 6966 2022 0a20 2020 2020  fault if ".     
+0004cf50: 2020 2022 7468 6579 2061 7265 2066 726f     "they are fro
+0004cf60: 6d20 7468 6520 7573 6572 2069 7473 656c  m the user itsel
+0004cf70: 662e 2022 0a20 2020 2020 2020 2022 4c6f  f. ".        "Lo
+0004cf80: 6f6b 2061 7420 2d2d 6c69 7374 656e 2061  ok at --listen a
+0004cf90: 7320 7468 6973 206f 7074 696f 6e20 6973  s this option is
+0004cfa0: 2072 656c 6174 6564 2074 6f20 2d2d 7461   related to --ta
+0004cfb0: 696c 2e22 2c0a 2020 2020 290a 2020 2020  il.",.    ).    
+0004cfc0: 6170 2e61 6464 5f61 7267 756d 656e 7428  ap.add_argument(
+0004cfd0: 0a20 2020 2020 2020 2022 2d79 222c 0a20  .        "-y",. 
+0004cfe0: 2020 2020 2020 2022 2d2d 6c69 7374 656e         "--listen
+0004cff0: 2d73 656c 6622 2c0a 2020 2020 2020 2020  -self",.        
+0004d000: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
+0004d010: 2020 2020 2020 2020 6163 7469 6f6e 3d22          action="
+0004d020: 7374 6f72 655f 7472 7565 222c 0a20 2020  store_true",.   
+0004d030: 2020 2020 2068 656c 703d 2250 7269 6e74       help="Print
+0004d040: 2079 6f75 7220 6f77 6e20 6d65 7373 6167   your own messag
+0004d050: 6573 2061 7320 7765 6c6c 2e20 220a 2020  es as well. ".  
+0004d060: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+0004d070: 2049 6620 7365 7420 616e 6420 6c69 7374   If set and list
+0004d080: 656e 696e 672c 2022 0a20 2020 2020 2020  ening, ".       
+0004d090: 2022 7468 656e 2070 726f 6772 616d 2077   "then program w
+0004d0a0: 696c 6c20 6c69 7374 656e 2074 6f20 616e  ill listen to an
+0004d0b0: 6420 7072 696e 7420 616c 736f 2022 0a20  d print also ". 
+0004d0c0: 2020 2020 2020 2022 7468 6520 6d65 7373         "the mess
+0004d0d0: 6167 6573 2073 656e 7420 6279 2069 7473  ages sent by its
+0004d0e0: 206f 776e 2075 7365 722e 2022 0a20 2020   own user. ".   
+0004d0f0: 2020 2020 2022 4279 2064 6566 6175 6c74       "By default
+0004d100: 206d 6573 7361 6765 7320 6672 6f6d 206f   messages from o
+0004d110: 6e65 7365 6c66 2061 7265 206e 6f74 2070  neself are not p
+0004d120: 7269 6e74 6564 2e22 2c0a 2020 2020 290a  rinted.",.    ).
+0004d130: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
+0004d140: 656e 7428 0a20 2020 2020 2020 2023 206e  ent(.        # n
+0004d150: 6f20 7369 6e67 6c65 2063 6861 7220 666c  o single char fl
+0004d160: 6167 0a20 2020 2020 2020 2022 2d2d 7072  ag.        "--pr
+0004d170: 696e 742d 6576 656e 742d 6964 222c 0a20  int-event-id",. 
+0004d180: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+0004d190: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+0004d1a0: 6374 696f 6e3d 2273 746f 7265 5f74 7275  ction="store_tru
+0004d1b0: 6522 2c0a 2020 2020 2020 2020 6865 6c70  e",.        help
+0004d1c0: 3d22 5072 696e 7420 6576 656e 7420 6964  ="Print event id
+0004d1d0: 7320 6f66 2072 6563 6569 7665 6420 6d65  s of received me
+0004d1e0: 7373 6167 6573 2e20 220a 2020 2020 2020  ssages. ".      
+0004d1f0: 2020 2244 6574 6169 6c73 3a3a 2049 6620    "Details:: If 
+0004d200: 7365 7420 616e 6420 6c69 7374 656e 696e  set and listenin
+0004d210: 672c 2022 0a20 2020 2020 2020 2066 2274  g, ".        f"t
+0004d220: 6865 6e20 277b 5052 4f47 5f57 4954 484f  hen '{PROG_WITHO
+0004d230: 5554 5f45 5854 7d27 2077 696c 6c20 7072  UT_EXT}' will pr
+0004d240: 696e 7420 616c 736f 2074 6865 2065 7665  int also the eve
+0004d250: 6e74 2069 6420 666f 7220 220a 2020 2020  nt id for ".    
+0004d260: 2020 2020 2265 6163 6820 7265 6365 6976      "each receiv
+0004d270: 6564 206d 6573 7361 6765 206f 7220 6f74  ed message or ot
+0004d280: 6865 7220 7265 6365 6976 6564 2065 7665  her received eve
+0004d290: 6e74 2e20 4966 2073 6574 2061 6e64 2022  nt. If set and "
+0004d2a0: 0a20 2020 2020 2020 2066 2273 656e 6469  .        f"sendi
+0004d2b0: 6e67 2c20 7468 656e 2027 7b50 524f 475f  ng, then '{PROG_
+0004d2c0: 5749 5448 4f55 545f 4558 547d 2720 7769  WITHOUT_EXT}' wi
+0004d2d0: 6c6c 2070 7269 6e74 2074 6865 2065 7665  ll print the eve
+0004d2e0: 6e74 2069 6420 220a 2020 2020 2020 2020  nt id ".        
+0004d2f0: 226f 6620 7468 6520 7365 6e74 206d 6573  "of the sent mes
+0004d300: 7361 6765 206f 7220 7468 6520 7365 6e74  sage or the sent
+0004d310: 206f 626a 6563 7420 2861 7564 696f 2c20   object (audio, 
+0004d320: 6669 6c65 2c20 6576 656e 7429 2074 6f20  file, event) to 
+0004d330: 220a 2020 2020 2020 2020 2273 7464 6f75  ".        "stdou
+0004d340: 742e 204f 7468 6572 2069 6e66 6f72 6d61  t. Other informa
+0004d350: 7469 6f6e 206c 696b 6520 726f 6f6d 2069  tion like room i
+0004d360: 6420 616e 6420 7265 6665 7265 6e63 6520  d and reference 
+0004d370: 746f 2077 6861 7420 7761 7320 220a 2020  to what was ".  
+0004d380: 2020 2020 2020 2273 656e 7420 7769 6c6c        "sent will
+0004d390: 2062 6520 7072 696e 7465 6420 746f 6f2e   be printed too.
+0004d3a0: 2046 6f72 2073 656e 6469 6e67 2074 6869   For sending thi
+0004d3b0: 7320 6973 2075 7365 6675 6c2c 2022 0a20  s is useful, ". 
+0004d3c0: 2020 2020 2020 2022 6966 2061 6674 6572         "if after
+0004d3d0: 2073 656e 6469 6e67 2074 6865 2075 7365   sending the use
+0004d3e0: 7220 220a 2020 2020 2020 2020 2277 6973  r ".        "wis
+0004d3f0: 6865 7320 746f 2070 6572 666f 726d 2066  hes to perform f
+0004d400: 7572 7468 6572 206f 7065 7261 7469 6f6e  urther operation
+0004d410: 7320 6f6e 2074 6865 2073 656e 7420 6f62  s on the sent ob
+0004d420: 6a65 6374 2c20 220a 2020 2020 2020 2020  ject, ".        
+0004d430: 2265 2e67 2e20 7265 6461 6374 696e 672f  "e.g. redacting/
+0004d440: 6465 6c65 7469 6e67 2069 7420 6166 7465  deleting it afte
+0004d450: 7220 616e 2065 7870 6972 6174 696f 6e20  r an expiration 
+0004d460: 7469 6d65 2c20 6574 632e 222c 0a20 2020  time, etc.",.   
+0004d470: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
+0004d480: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
+0004d490: 2320 7374 6172 7469 6e67 2077 6974 6820  # starting with 
+0004d4a0: 7665 7273 696f 6e20 322e 3139 2022 2d75  version 2.19 "-u
+0004d4b0: 2220 6861 7320 6265 656e 206d 6f76 6564  " has been moved
+0004d4c0: 2074 6f20 2d2d 7573 6572 210a 2020 2020   to --user!.    
+0004d4d0: 2020 2020 222d 2d64 6f77 6e6c 6f61 642d      "--download-
+0004d4e0: 6d65 6469 6122 2c0a 2020 2020 2020 2020  media",.        
+0004d4f0: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
+0004d500: 2020 6465 6661 756c 743d 2222 2c20 2023    default="",  #
+0004d510: 2069 6620 2d2d 646f 776e 6c6f 6164 2d6d   if --download-m
+0004d520: 6564 6961 2069 7320 6e6f 7420 7573 6564  edia is not used
+0004d530: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
+0004d540: 2273 746f 7265 222c 0a20 2020 2020 2020  "store",.       
+0004d550: 206e 6172 6773 3d22 3f22 2c20 2023 206d   nargs="?",  # m
+0004d560: 616b 6573 2074 6865 2077 6f72 6420 6f70  akes the word op
+0004d570: 7469 6f6e 616c 0a20 2020 2020 2020 2063  tional.        c
+0004d580: 6f6e 7374 3d4d 4544 4941 5f44 4952 5f44  onst=MEDIA_DIR_D
+0004d590: 4546 4155 4c54 2c20 2023 2077 6865 6e20  EFAULT,  # when 
+0004d5a0: 6f70 7469 6f6e 2069 7320 7573 6564 2c20  option is used, 
+0004d5b0: 6275 7420 6e6f 2064 6972 2061 6464 6564  but no dir added
+0004d5c0: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
+0004d5d0: 3d22 444f 574e 4c4f 4144 5f44 4952 4543  ="DOWNLOAD_DIREC
+0004d5e0: 544f 5259 222c 0a20 2020 2020 2020 2068  TORY",.        h
+0004d5f0: 656c 703d 2244 6f77 6e6c 6f61 6420 6d65  elp="Download me
+0004d600: 6469 6120 6669 6c65 7320 7768 696c 6520  dia files while 
+0004d610: 6c69 7374 656e 696e 672e 2022 0a20 2020  listening. ".   
+0004d620: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+0004d630: 4966 2073 6574 2061 6e64 206c 6973 7465  If set and liste
+0004d640: 6e69 6e67 2c20 220a 2020 2020 2020 2020  ning, ".        
+0004d650: 2274 6865 6e20 7072 6f67 7261 6d20 7769  "then program wi
+0004d660: 6c6c 2064 6f77 6e6c 6f61 6420 220a 2020  ll download ".  
+0004d670: 2020 2020 2020 2272 6563 6569 7665 6420        "received 
+0004d680: 6d65 6469 6120 6669 6c65 7320 2865 2e67  media files (e.g
+0004d690: 2e20 696d 6167 652c 2061 7564 696f 2c20  . image, audio, 
+0004d6a0: 7669 6465 6f2c 2074 6578 742c 2050 4446  video, text, PDF
+0004d6b0: 2066 696c 6573 292e 2022 0a20 2020 2020   files). ".     
+0004d6c0: 2020 2022 4279 2064 6566 6175 6c74 2c20     "By default, 
+0004d6d0: 6d65 6469 6120 7769 6c6c 2062 6520 646f  media will be do
+0004d6e0: 776e 6c6f 6164 6564 2074 6f20 7468 6973  wnloaded to this
+0004d6f0: 2064 6972 6563 746f 7279 3a20 220a 2020   directory: ".  
+0004d700: 2020 2020 2020 6627 227b 4d45 4449 415f        f'"{MEDIA_
+0004d710: 4449 525f 4445 4641 554c 547d 222e 2027  DIR_DEFAULT}". '
+0004d720: 0a20 2020 2020 2020 2022 596f 7520 6361  .        "You ca
+0004d730: 6e20 6f76 6572 7772 6974 6520 6465 6661  n overwrite defa
+0004d740: 756c 7420 7769 7468 2079 6f75 7220 7072  ult with your pr
+0004d750: 6566 6572 7265 6420 6469 7265 6374 6f72  eferred director
+0004d760: 792e 2022 0a20 2020 2020 2020 2022 4966  y. ".        "If
+0004d770: 2079 6f75 2070 726f 7669 6465 2061 2072   you provide a r
+0004d780: 656c 6174 6976 6520 7061 7468 2c20 7468  elative path, th
+0004d790: 6520 7265 6c61 7469 7665 2070 6174 6820  e relative path 
+0004d7a0: 7769 6c6c 2062 6520 7265 6c61 7469 7665  will be relative
+0004d7b0: 2022 0a20 2020 2020 2020 2022 746f 2074   ".        "to t
+0004d7c0: 6865 206c 6f63 616c 2064 6972 6563 746f  he local directo
+0004d7d0: 7279 2e20 666f 6f20 7769 6c6c 2062 6563  ry. foo will bec
+0004d7e0: 6f6d 6520 2e2f 666f 6f2e 2022 0a20 2020  ome ./foo. ".   
+0004d7f0: 2020 2020 2022 666f 6f2f 666f 6f20 7769       "foo/foo wi
+0004d800: 6c6c 2062 6563 6f6d 6520 2e2f 666f 6f2f  ll become ./foo/
+0004d810: 666f 6f20 616e 6420 6f6e 6c79 2077 6f72  foo and only wor
+0004d820: 6b73 2069 6620 2e2f 666f 6f20 616c 7265  ks if ./foo alre
+0004d830: 6164 7920 220a 2020 2020 2020 2020 2265  ady ".        "e
+0004d840: 7869 7374 732e 2022 0a20 2020 2020 2020  xists. ".       
+0004d850: 2022 4162 736f 6c75 7465 2070 6174 6873   "Absolute paths
+0004d860: 2077 696c 6c20 7265 6d65 696e 2075 6e63   will remein unc
+0004d870: 6861 6e67 6564 2e20 2f74 6d70 2077 696c  hanged. /tmp wil
+0004d880: 6c20 7265 6d61 696e 202f 746d 702e 2022  l remain /tmp. "
+0004d890: 0a20 2020 2020 2020 2022 2f74 6d70 2f66  .        "/tmp/f
+0004d8a0: 6f6f 2077 696c 6c20 6265 202f 746d 702f  oo will be /tmp/
+0004d8b0: 666f 6f2e 2022 0a20 2020 2020 2020 2022  foo. ".        "
+0004d8c0: 4966 206d 6564 6961 2069 7320 656e 6372  If media is encr
+0004d8d0: 7970 7465 6420 6974 2077 696c 6c20 6265  ypted it will be
+0004d8e0: 2064 6563 7279 7074 6564 2061 6e64 2073   decrypted and s
+0004d8f0: 746f 7265 6420 6465 6372 7970 7465 642e  tored decrypted.
+0004d900: 2022 0a20 2020 2020 2020 2022 4279 2064   ".        "By d
+0004d910: 6566 6175 6c74 206d 6564 6961 2066 696c  efault media fil
+0004d920: 6573 2077 696c 6c20 6e6f 7420 6265 2064  es will not be d
+0004d930: 6f77 6e6c 6f61 6465 642e 222c 0a20 2020  ownloaded.",.   
+0004d940: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
+0004d950: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
+0004d960: 222d 2d64 6f77 6e6c 6f61 642d 6d65 6469  "--download-medi
+0004d970: 612d 6e61 6d65 222c 0a20 2020 2020 2020  a-name",.       
+0004d980: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
+0004d990: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
+0004d9a0: 3d22 222c 2020 2320 6966 202d 2d64 6f77  ="",  # if --dow
+0004d9b0: 6e6c 6f61 642d 6d65 6469 612d 6e61 6d65  nload-media-name
+0004d9c0: 2069 7320 6e6f 7420 7573 6564 0a20 2020   is not used.   
+0004d9d0: 2020 2020 2074 7970 653d 7374 722c 2020       type=str,  
+0004d9e0: 2320 6d65 7468 6f64 2074 6f20 6465 7269  # method to deri
+0004d9f0: 7665 2066 696c 656e 616d 650a 2020 2020  ve filename.    
+0004da00: 2020 2020 6d65 7461 7661 723d 2253 4f55      metavar="SOU
+0004da10: 5243 457c 434c 4541 4e7c 4556 454e 5449  RCE|CLEAN|EVENTI
+0004da20: 447c 5449 4d45 222c 0a20 2020 2020 2020  D|TIME",.       
+0004da30: 2068 656c 703d 2253 7065 6369 6679 2074   help="Specify t
+0004da40: 6865 206d 6574 686f 6420 746f 2064 6572  he method to der
+0004da50: 6976 6520 7468 6520 6d65 6469 6120 6669  ive the media fi
+0004da60: 6c65 6e61 6d65 2e20 220a 2020 2020 2020  lename. ".      
+0004da70: 2020 2244 6574 6169 6c73 3a3a 2054 6869    "Details:: Thi
+0004da80: 7320 6172 6775 6d65 6e74 2069 7320 6f70  s argument is op
+0004da90: 7469 6f6e 616c 2e20 220a 2020 2020 2020  tional. ".      
+0004daa0: 2020 2243 7572 7265 6e74 6c79 2066 6f75    "Currently fou
+0004dab0: 7220 6368 6f69 6365 7320 6172 6520 6f66  r choices are of
+0004dac0: 6665 7265 643a 2027 736f 7572 6365 272c  fered: 'source',
+0004dad0: 2027 636c 6561 6e27 2c20 220a 2020 2020   'clean', ".    
+0004dae0: 2020 2020 2227 6576 656e 7469 6427 2c20      "'eventid', 
+0004daf0: 616e 6420 2774 696d 6527 2e20 220a 2020  and 'time'. ".  
+0004db00: 2020 2020 2020 2227 736f 7572 6365 2720        "'source' 
+0004db10: 6d65 616e 7320 7468 6520 7661 6c75 6520  means the value 
+0004db20: 7370 6563 6966 6965 6420 6279 2074 6865  specified by the
+0004db30: 2073 6f75 7263 6520 2873 656e 6465 7229   source (sender)
+0004db40: 2022 0a20 2020 2020 2020 2022 7769 6c6c   ".        "will
+0004db50: 2062 6520 7573 6564 2e20 4966 2074 6865   be used. If the
+0004db60: 2073 656e 6465 722c 2069 2e65 2e20 736f   sender, i.e. so
+0004db70: 7572 6365 2c20 7370 6563 6966 6965 7320  urce, specifies 
+0004db80: 6120 7661 6c75 6520 220a 2020 2020 2020  a value ".      
+0004db90: 2020 2274 6861 7420 6973 206e 6f74 2061    "that is not a
+0004dba0: 2076 616c 6964 2066 696c 656e 616d 652c   valid filename,
+0004dbb0: 2074 6865 6e20 6120 6661 696c 7572 6520   then a failure 
+0004dbc0: 7769 6c6c 206f 6363 7572 2061 6e64 2022  will occur and "
+0004dbd0: 0a20 2020 2020 2020 2022 7468 6520 6d65  .        "the me
+0004dbe0: 6469 6120 6669 6c65 2077 696c 6c20 6e6f  dia file will no
+0004dbf0: 7420 6265 2073 6176 6564 2e20 220a 2020  t be saved. ".  
+0004dc00: 2020 2020 2020 2227 636c 6561 6e27 206d        "'clean' m
+0004dc10: 6561 6e73 2074 6861 7420 616c 6c20 756e  eans that all un
+0004dc20: 7573 7561 6c20 6368 6172 6163 7465 7273  usual characters
+0004dc30: 2069 6e20 7468 6520 6e61 6d65 2022 0a20   in the name ". 
+0004dc40: 2020 2020 2020 2022 7072 6f76 6964 6564         "provided
+0004dc50: 2062 7920 7468 6520 736f 7572 6365 2077   by the source w
+0004dc60: 696c 6c20 6265 2072 6570 6c61 6365 6420  ill be replaced 
+0004dc70: 220a 2020 2020 2020 2020 2262 7920 616e  ".        "by an
+0004dc80: 2075 6e64 6572 7363 6f72 6520 746f 2063   underscore to c
+0004dc90: 7265 6174 6520 6120 7661 6c69 6420 6669  reate a valid fi
+0004dca0: 6c65 206e 616d 652e 2022 0a20 2020 2020  le name. ".     
+0004dcb0: 2020 2022 2765 7665 6e74 6964 2720 6d65     "'eventid' me
+0004dcc0: 616e 7320 7468 6174 2074 6865 206e 616d  ans that the nam
+0004dcd0: 6520 7072 6f76 6964 6564 2062 7920 7468  e provided by th
+0004dce0: 6520 736f 7572 6365 2077 696c 6c20 6265  e source will be
+0004dcf0: 2022 0a20 2020 2020 2020 2022 6967 6e6f   ".        "igno
+0004dd00: 7265 6420 616e 6420 7468 6520 6576 656e  red and the even
+0004dd10: 742d 6964 2077 696c 6c20 6265 2075 7365  t-id will be use
+0004dd20: 6420 696e 7374 6561 642e 2022 0a20 2020  d instead. ".   
+0004dd30: 2020 2020 2022 2774 696d 6527 206d 6561       "'time' mea
+0004dd40: 6e73 2074 6861 7420 7468 6520 6e61 6d65  ns that the name
+0004dd50: 2070 726f 7669 6465 6420 6279 2074 6865   provided by the
+0004dd60: 2073 6f75 7263 6520 7769 6c6c 2062 6520   source will be 
+0004dd70: 220a 2020 2020 2020 2020 2269 676e 6f72  ".        "ignor
+0004dd80: 6564 2061 6e64 2074 6865 2063 7572 7265  ed and the curre
+0004dd90: 6e74 2074 696d 6520 6174 2074 6865 2072  nt time at the r
+0004dda0: 6563 6569 7665 7220 7769 6c6c 2062 6520  eceiver will be 
+0004ddb0: 7573 6564 2069 6e73 7465 6164 2e20 220a  used instead. ".
+0004ddc0: 2020 2020 2020 2020 2241 7320 616e 2065          "As an e
+0004ddd0: 7861 6d70 6c65 2c20 6966 2074 6865 2073  xample, if the s
+0004dde0: 6f75 7263 652f 7365 6e64 6572 2070 726f  ource/sender pro
+0004ddf0: 7669 6465 6420 2769 6d61 6765 2831 2921  vided 'image(1)!
+0004de00: 2e6a 7067 2720 6173 2022 0a20 2020 2020  .jpg' as ".     
+0004de10: 2020 2022 6e61 6d65 2066 6f72 2061 2067     "name for a g
+0004de20: 6976 656e 206d 6564 6961 2066 696c 6520  iven media file 
+0004de30: 220a 2020 2020 2020 2020 2274 6865 6e20  ".        "then 
+0004de40: 2773 6f75 7263 6527 2077 696c 6c20 7374  'source' will st
+0004de50: 6f72 6520 7468 6520 6d65 6469 6120 7573  ore the media us
+0004de60: 696e 6720 6669 6c65 6e61 6d65 2027 696d  ing filename 'im
+0004de70: 6167 6528 3129 212e 6a70 6727 2c20 220a  age(1)!.jpg', ".
+0004de80: 2020 2020 2020 2020 2227 636c 6561 6e27          "'clean'
+0004de90: 2077 696c 6c20 7374 6f72 6520 6974 2061   will store it a
+0004dea0: 7320 2769 6d61 6765 5f31 5f5f 2e6a 7067  s 'image_1__.jpg
+0004deb0: 272c 2022 0a20 2020 2020 2020 2022 2765  ', ".        "'e
+0004dec0: 7665 6e74 6964 2720 6173 2073 6f6d 6574  ventid' as somet
+0004ded0: 6869 6e67 206c 696b 6520 220a 2020 2020  hing like ".    
+0004dee0: 2020 2020 2227 2472 7361 6435 3764 6166      "'$rsad57daf
+0004def0: 7335 3761 7366 6167 3435 6773 466a 6454  s57asfag45gsFjdT
+0004df00: 5857 3164 7366 726f 4269 4f32 4973 6964  XW1dsfroBiO2Isid
+0004df10: 4b6b 272c 2022 0a20 2020 2020 2020 2022  Kk', ".        "
+0004df20: 616e 6420 2774 696d 6527 2061 7320 736f  and 'time' as so
+0004df30: 6d65 7468 696e 6720 6c69 6b65 2022 0a20  mething like ". 
+0004df40: 2020 2020 2020 2022 2732 3032 3331 3031         "'2023101
+0004df50: 325f 3135 3232 3334 5f32 3636 3630 3027  2_152234_266600'
+0004df60: 2028 5959 5959 4d4d 4444 5f48 484d 4d53   (YYYYMMDD_HHMMS
+0004df70: 535f 4d49 4352 4f53 4543 4f4e 4453 292e  S_MICROSECONDS).
+0004df80: 2022 0a20 2020 2020 2020 2066 2249 6620   ".        f"If 
+0004df90: 6e6f 7420 7370 6563 6966 6965 6420 7468  not specified th
+0004dfa0: 6973 2076 616c 7565 2064 6566 6175 6c74  is value default
+0004dfb0: 7320 746f 2027 7b4d 4544 4941 5f4e 414d  s to '{MEDIA_NAM
+0004dfc0: 455f 4445 4641 554c 547d 272e 2022 2c0a  E_DEFAULT}'. ",.
+0004dfd0: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
+0004dfe0: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+0004dff0: 2020 2023 2022 2d6f 222c 2023 2069 6e63     # "-o", # inc
+0004e000: 6f6d 7061 7469 626c 6520 6368 616e 6765  ompatible change
+0004e010: 2044 6563 2032 3032 322c 202d 6f20 6d6f   Dec 2022, -o mo
+0004e020: 7665 6420 746f 202d 2d6f 7574 7075 740a  ved to --output.
+0004e030: 2020 2020 2020 2020 222d 2d6f 732d 6e6f          "--os-no
+0004e040: 7469 6679 222c 0a20 2020 2020 2020 2072  tify",.        r
+0004e050: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
+0004e060: 2020 2020 2020 2061 6374 696f 6e3d 2273         action="s
+0004e070: 746f 7265 5f74 7275 6522 2c0a 2020 2020  tore_true",.    
+0004e080: 2020 2020 6865 6c70 3d22 4e6f 7469 6679      help="Notify
+0004e090: 206d 6520 6f66 2061 7272 6976 696e 6720   me of arriving 
+0004e0a0: 6d65 7373 6167 6573 2e20 220a 2020 2020  messages. ".    
+0004e0b0: 2020 2020 2244 6574 6169 6c73 3a3a 2049      "Details:: I
+0004e0c0: 6620 7365 7420 616e 6420 6c69 7374 656e  f set and listen
+0004e0d0: 696e 672c 2022 0a20 2020 2020 2020 2022  ing, ".        "
+0004e0e0: 7468 656e 2070 726f 6772 616d 2077 696c  then program wil
+0004e0f0: 6c20 6174 7465 6d70 7420 746f 2076 6973  l attempt to vis
+0004e100: 7561 6c6c 7920 6e6f 7469 6679 206f 6620  ually notify of 
+0004e110: 220a 2020 2020 2020 2020 2261 7272 6976  ".        "arriv
+0004e120: 696e 6720 6d65 7373 6167 6573 2074 6872  ing messages thr
+0004e130: 6f75 6768 2074 6865 206f 7065 7261 7469  ough the operati
+0004e140: 6e67 2073 7973 7465 6d2e 2022 0a20 2020  ng system. ".   
+0004e150: 2020 2020 2022 4279 2064 6566 6175 6c74       "By default
+0004e160: 2074 6865 7265 2069 7320 6e6f 206e 6f74   there is no not
+0004e170: 6966 6963 6174 696f 6e20 7669 6120 4f53  ification via OS
+0004e180: 2e22 2c0a 2020 2020 290a 2020 2020 6170  .",.    ).    ap
+0004e190: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
+0004e1a0: 2020 2020 2020 2023 2072 656d 6f76 6564         # removed
+0004e1b0: 2022 2d78 222c 2073 7461 7274 696e 6720   "-x", starting 
+0004e1c0: 7632 2e32 3120 2d78 2069 7320 6e6f 206c  v2.21 -x is no l
+0004e1d0: 6f6e 6765 7220 7375 7070 6f72 7465 640a  onger supported.
+0004e1e0: 2020 2020 2020 2020 222d 2d73 6574 2d64          "--set-d
+0004e1f0: 6576 6963 652d 6e61 6d65 222c 0a20 2020  evice-name",.   
+0004e200: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+0004e210: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
+0004e220: 653d 7374 722c 0a20 2020 2020 2020 2064  e=str,.        d
+0004e230: 6566 6175 6c74 3d53 4554 5f44 4556 4943  efault=SET_DEVIC
+0004e240: 455f 4e41 4d45 5f55 4e55 5345 445f 4445  E_NAME_UNUSED_DE
+0004e250: 4641 554c 542c 2020 2320 7768 656e 206f  FAULT,  # when o
+0004e260: 7074 696f 6e20 6973 6e27 7420 7573 6564  ption isn't used
+0004e270: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
+0004e280: 3d22 4445 5649 4345 5f4e 414d 4522 2c0a  ="DEVICE_NAME",.
+0004e290: 2020 2020 2020 2020 6865 6c70 3d22 5365          help="Se
+0004e2a0: 7420 6f72 2072 656e 616d 6520 7468 6520  t or rename the 
+0004e2b0: 6375 7272 656e 7420 6465 7669 6365 2e20  current device. 
+0004e2c0: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
+0004e2d0: 6c73 3a3a 2053 6574 206f 7220 7265 6e61  ls:: Set or rena
+0004e2e0: 6d65 2074 6865 2063 7572 7265 6e74 2064  me the current d
+0004e2f0: 6576 6963 6520 746f 2074 6865 2022 0a20  evice to the ". 
+0004e300: 2020 2020 2020 2022 6465 7669 6365 206e         "device n
+0004e310: 616d 6520 7072 6f76 6964 6564 2e20 220a  ame provided. ".
+0004e320: 2020 2020 2020 2020 2253 656e 642c 206c          "Send, l
+0004e330: 6973 7465 6e20 616e 6420 7665 7269 6679  isten and verify
+0004e340: 206f 7065 7261 7469 6f6e 7320 6172 6520   operations are 
+0004e350: 616c 6c6f 7765 6420 7768 656e 2022 0a20  allowed when ". 
+0004e360: 2020 2020 2020 2022 7265 6e61 6d69 6e67         "renaming
+0004e370: 2074 6865 2064 6576 6963 652e 222c 0a20   the device.",. 
+0004e380: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
+0004e390: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+0004e3a0: 2020 222d 2d73 6574 2d64 6973 706c 6179    "--set-display
+0004e3b0: 2d6e 616d 6522 2c0a 2020 2020 2020 2020  -name",.        
+0004e3c0: 7265 7175 6972 6564 3d46 616c 7365 2c0a  required=False,.
+0004e3d0: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
+0004e3e0: 2c0a 2020 2020 2020 2020 6465 6661 756c  ,.        defaul
+0004e3f0: 743d 5345 545f 4449 5350 4c41 595f 4e41  t=SET_DISPLAY_NA
+0004e400: 4d45 5f55 4e55 5345 445f 4445 4641 554c  ME_UNUSED_DEFAUL
+0004e410: 542c 2020 2320 7768 656e 206f 7074 696f  T,  # when optio
+0004e420: 6e20 6973 6e27 7420 7573 6564 0a20 2020  n isn't used.   
+0004e430: 2020 2020 206d 6574 6176 6172 3d22 4449       metavar="DI
+0004e440: 5350 4c41 595f 4e41 4d45 222c 0a20 2020  SPLAY_NAME",.   
+0004e450: 2020 2020 2068 656c 703d 2253 6574 206f       help="Set o
+0004e460: 7220 7265 6e61 6d65 2074 6865 2064 6973  r rename the dis
+0004e470: 706c 6179 206e 616d 652e 2022 0a20 2020  play name. ".   
+0004e480: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+0004e490: 5365 7420 6f72 2072 656e 616d 6520 7468  Set or rename th
+0004e4a0: 6520 6469 7370 6c61 7920 6e61 6d65 2022  e display name "
+0004e4b0: 0a20 2020 2020 2020 2022 666f 7220 7468  .        "for th
+0004e4c0: 6520 6375 7272 656e 7420 7573 6572 2074  e current user t
+0004e4d0: 6f20 7468 6520 220a 2020 2020 2020 2020  o the ".        
+0004e4e0: 2264 6973 706c 6179 206e 616d 6520 7072  "display name pr
+0004e4f0: 6f76 6964 6564 2e20 220a 2020 2020 2020  ovided. ".      
+0004e500: 2020 2253 656e 642c 206c 6973 7465 6e20    "Send, listen 
+0004e510: 616e 6420 7665 7269 6679 206f 7065 7261  and verify opera
+0004e520: 7469 6f6e 7320 6172 6520 616c 6c6f 7765  tions are allowe
+0004e530: 6420 7768 656e 2022 0a20 2020 2020 2020  d when ".       
+0004e540: 2022 7365 7474 696e 6720 7468 6520 6469   "setting the di
+0004e550: 7370 6c61 7920 6e61 6d65 2e20 220a 2020  splay name. ".  
+0004e560: 2020 2020 2020 2244 6f20 6e6f 7420 636f        "Do not co
+0004e570: 6e66 7573 6520 7468 6973 206f 7074 696f  nfuse this optio
+0004e580: 6e20 7769 7468 2074 6865 206f 7074 696f  n with the optio
+0004e590: 6e20 272d 2d67 6574 2d72 6f6f 6d2d 696e  n '--get-room-in
+0004e5a0: 666f 2720 220a 2020 2020 2020 2020 2277  fo' ".        "w
+0004e5b0: 6869 6368 2067 6574 7320 7468 6520 726f  hich gets the ro
+0004e5c0: 6f6d 2064 6973 706c 6179 206e 616d 652c  om display name,
+0004e5d0: 206e 6f74 2074 6865 2075 7365 7220 6469   not the user di
+0004e5e0: 7370 6c61 7920 6e61 6d65 2e22 2c0a 2020  splay name.",.  
+0004e5f0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+0004e600: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+0004e610: 2022 2d2d 6765 742d 6469 7370 6c61 792d   "--get-display-
+0004e620: 6e61 6d65 222c 0a20 2020 2020 2020 2072  name",.        r
+0004e630: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
+0004e640: 2020 2020 2020 2061 6374 696f 6e3d 2273         action="s
+0004e650: 746f 7265 5f74 7275 6522 2c0a 2020 2020  tore_true",.    
+0004e660: 2020 2020 6865 6c70 3d22 4765 7420 7468      help="Get th
+0004e670: 6520 6469 7370 6c61 7920 6e61 6d65 206f  e display name o
+0004e680: 6620 796f 7572 7365 6c66 2e20 220a 2020  f yourself. ".  
+0004e690: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+0004e6a0: 2047 6574 2074 6865 2064 6973 706c 6179   Get the display
+0004e6b0: 206e 616d 6520 6f66 2022 0a20 2020 2020   name of ".     
+0004e6c0: 2020 2066 227b 5052 4f47 5f57 4954 484f     f"{PROG_WITHO
+0004e6d0: 5554 5f45 5854 7d20 2869 7473 656c 6629  UT_EXT} (itself)
+0004e6e0: 2c20 220a 2020 2020 2020 2020 226f 7220  , ".        "or 
+0004e6f0: 6f66 206f 6e65 206f 7220 6d75 6c74 6970  of one or multip
+0004e700: 6c65 2075 7365 7273 2e20 5370 6563 6966  le users. Specif
+0004e710: 7920 7573 6572 2873 2920 7769 7468 2074  y user(s) with t
+0004e720: 6865 2022 0a20 2020 2020 2020 2022 2d2d  he ".        "--
+0004e730: 7573 6572 206f 7074 696f 6e2e 2049 6620  user option. If 
+0004e740: 6e6f 2075 7365 7220 6973 2073 7065 6369  no user is speci
+0004e750: 6669 6564 2067 6574 2074 6865 2064 6973  fied get the dis
+0004e760: 706c 6179 206e 616d 6520 6f66 2022 0a20  play name of ". 
+0004e770: 2020 2020 2020 2022 6974 7365 6c66 2e20         "itself. 
+0004e780: 220a 2020 2020 2020 2020 2253 656e 642c  ".        "Send,
+0004e790: 206c 6973 7465 6e20 616e 6420 7665 7269   listen and veri
+0004e7a0: 6679 206f 7065 7261 7469 6f6e 7320 6172  fy operations ar
+0004e7b0: 6520 616c 6c6f 7765 6420 7768 656e 2022  e allowed when "
+0004e7c0: 0a20 2020 2020 2020 2022 6765 7474 696e  .        "gettin
+0004e7d0: 6720 6469 7370 6c61 7920 6e61 6d65 2873  g display name(s
+0004e7e0: 292e 2022 0a20 2020 2020 2020 2022 446f  ). ".        "Do
+0004e7f0: 206e 6f74 2063 6f6e 6675 7365 2074 6869   not confuse thi
+0004e800: 7320 6f70 7469 6f6e 2077 6974 6820 7468  s option with th
+0004e810: 6520 6f70 7469 6f6e 2027 2d2d 6765 742d  e option '--get-
+0004e820: 726f 6f6d 2d69 6e66 6f27 2022 0a20 2020  room-info' ".   
+0004e830: 2020 2020 2022 7768 6963 6820 6765 7473       "which gets
+0004e840: 2074 6865 2072 6f6f 6d20 6469 7370 6c61   the room displa
+0004e850: 7920 6e61 6d65 2c20 6e6f 7420 7468 6520  y name, not the 
+0004e860: 7573 6572 2064 6973 706c 6179 206e 616d  user display nam
+0004e870: 652e 222c 0a20 2020 2029 0a20 2020 2061  e.",.    ).    a
+0004e880: 702e 6164 645f 6172 6775 6d65 6e74 280a  p.add_argument(.
+0004e890: 2020 2020 2020 2020 222d 2d73 6574 2d70          "--set-p
+0004e8a0: 7265 7365 6e63 6522 2c0a 2020 2020 2020  resence",.      
+0004e8b0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
+0004e8c0: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
+0004e8d0: 7472 2c0a 2020 2020 2020 2020 2320 6465  tr,.        # de
+0004e8e0: 6661 756c 7473 2074 6f20 4e6f 6e65 2069  faults to None i
+0004e8f0: 6620 6e6f 7420 7573 6564 2c20 6973 2073  f not used, is s
+0004e900: 7472 2069 6620 7573 6564 0a20 2020 2020  tr if used.     
+0004e910: 2020 206d 6574 6176 6172 3d22 4f4e 4c49     metavar="ONLI
+0004e920: 4e45 7c4f 4646 4c49 4e45 7c55 4e41 5641  NE|OFFLINE|UNAVA
+0004e930: 494c 4142 4c45 222c 0a20 2020 2020 2020  ILABLE",.       
+0004e940: 2068 656c 703d 2253 6574 2079 6f75 7220   help="Set your 
+0004e950: 7072 6573 656e 6365 2e20 220a 2020 2020  presence. ".    
+0004e960: 2020 2020 6622 4465 7461 696c 733a 3a20      f"Details:: 
+0004e970: 5365 7420 7072 6573 656e 6365 206f 6620  Set presence of 
+0004e980: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
+0004e990: 547d 2074 6f20 7468 6520 6769 7665 6e20  T} to the given 
+0004e9a0: 7661 6c75 652e 2022 0a20 2020 2020 2020  value. ".       
+0004e9b0: 2022 4d75 7374 2062 6520 6f6e 6520 6f66   "Must be one of
+0004e9c0: 2074 6865 7365 2076 616c 7565 733a 20e2   these values: .
+0004e9d0: 809c 6f6e 6c69 6e65 e280 9d2c 20e2 809c  ..online..., ...
+0004e9e0: 6f66 666c 696e 65e2 809d 2c20 e280 9c75  offline..., ...u
+0004e9f0: 6e61 7661 696c 6162 6c65 e280 9d2e 2022  navailable.... "
+0004ea00: 0a20 2020 2020 2020 2022 4f74 6865 7277  .        "Otherw
+0004ea10: 6973 6520 616e 2065 7272 6f72 2077 696c  ise an error wil
+0004ea20: 6c20 6265 2070 726f 6475 6365 642e 222c  l be produced.",
+0004ea30: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
+0004ea40: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+0004ea50: 2020 2020 222d 2d67 6574 2d70 7265 7365      "--get-prese
+0004ea60: 6e63 6522 2c0a 2020 2020 2020 2020 7265  nce",.        re
+0004ea70: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+0004ea80: 2020 2020 2020 6163 7469 6f6e 3d22 7374        action="st
+0004ea90: 6f72 655f 7472 7565 222c 0a20 2020 2020  ore_true",.     
+0004eaa0: 2020 2023 2064 6566 6175 6c74 7320 746f     # defaults to
+0004eab0: 2046 616c 7365 2069 6620 6e6f 7420 7573   False if not us
+0004eac0: 6564 0a20 2020 2020 2020 2068 656c 703d  ed.        help=
+0004ead0: 2247 6574 2079 6f75 7220 7072 6573 656e  "Get your presen
+0004eae0: 6365 2e20 220a 2020 2020 2020 2020 6622  ce. ".        f"
+0004eaf0: 4465 7461 696c 733a 3a20 4765 7420 7072  Details:: Get pr
+0004eb00: 6573 656e 6365 206f 6620 7b50 524f 475f  esence of {PROG_
+0004eb10: 5749 5448 4f55 545f 4558 547d 2028 6974  WITHOUT_EXT} (it
+0004eb20: 7365 6c66 292c 2022 0a20 2020 2020 2020  self), ".       
+0004eb30: 2022 6f72 206f 6620 6f6e 6520 6f72 206d   "or of one or m
+0004eb40: 756c 7469 706c 6520 7573 6572 732e 2053  ultiple users. S
+0004eb50: 7065 6369 6679 2075 7365 7228 7329 2077  pecify user(s) w
+0004eb60: 6974 6820 7468 6520 220a 2020 2020 2020  ith the ".      
+0004eb70: 2020 222d 2d75 7365 7220 6f70 7469 6f6e    "--user option
+0004eb80: 2e20 4966 206e 6f20 7573 6572 2069 7320  . If no user is 
+0004eb90: 7370 6563 6966 6965 6420 6765 7420 7468  specified get th
+0004eba0: 6520 7072 6573 656e 6365 206f 6620 220a  e presence of ".
+0004ebb0: 2020 2020 2020 2020 2269 7473 656c 662e          "itself.
+0004ebc0: 2022 0a20 2020 2020 2020 2022 5365 6e64   ".        "Send
+0004ebd0: 2c20 6c69 7374 656e 2061 6e64 2076 6572  , listen and ver
+0004ebe0: 6966 7920 6f70 6572 6174 696f 6e73 2061  ify operations a
+0004ebf0: 7265 2061 6c6c 6f77 6564 2077 6865 6e20  re allowed when 
+0004ec00: 220a 2020 2020 2020 2020 2267 6574 7469  ".        "getti
+0004ec10: 6e67 2070 7265 7365 6e63 6528 7329 2e22  ng presence(s)."
+0004ec20: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+0004ec30: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+0004ec40: 2020 2020 2022 2d2d 7570 6c6f 6164 222c       "--upload",
+0004ec50: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+0004ec60: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
+0004ec70: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
+0004ec80: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
+0004ec90: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
+0004eca0: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
+0004ecb0: 6574 6176 6172 3d22 4649 4c45 222c 0a20  etavar="FILE",. 
+0004ecc0: 2020 2020 2020 2068 656c 703d 2255 706c         help="Upl
+0004ecd0: 6f61 6420 6f6e 6520 6f72 206d 756c 7469  oad one or multi
+0004ece0: 706c 6520 6669 6c65 7320 746f 2074 6865  ple files to the
+0004ecf0: 2063 6f6e 7465 6e74 2072 6570 6f73 6974   content reposit
+0004ed00: 6f72 792e 2022 0a20 2020 2020 2020 2022  ory. ".        "
+0004ed10: 4465 7461 696c 733a 3a20 220a 2020 2020  Details:: ".    
+0004ed20: 2020 2020 2254 6865 2066 696c 6573 2077      "The files w
+0004ed30: 696c 6c20 6265 2067 6976 656e 2061 204d  ill be given a M
+0004ed40: 6174 7269 7820 5552 4920 616e 6420 220a  atrix URI and ".
+0004ed50: 2020 2020 2020 2020 2273 746f 7265 6420          "stored 
+0004ed60: 6f6e 2074 6865 2073 6572 7665 722e 202d  on the server. -
+0004ed70: 2d75 706c 6f61 6420 616c 6c6f 7773 2074  -upload allows t
+0004ed80: 6865 206f 7074 696f 6e61 6c20 6172 6775  he optional argu
+0004ed90: 6d65 6e74 2022 0a20 2020 2020 2020 2022  ment ".        "
+0004eda0: 2d2d 706c 6169 6e20 746f 2073 6b69 7020  --plain to skip 
+0004edb0: 656e 6372 7970 7469 6f6e 2066 6f72 2075  encryption for u
+0004edc0: 706c 6f61 642e 2022 0a20 2020 2020 2020  pload. ".       
+0004edd0: 2022 5365 6520 7465 7374 732f 7465 7374   "See tests/test
+0004ede0: 2d75 706c 6f61 642e 7368 2066 6f72 2061  -upload.sh for a
+0004edf0: 6e20 6578 616d 706c 652e 222c 0a20 2020  n example.",.   
+0004ee00: 2029 0a20 2020 2061 702e 6164 645f 6172   ).    ap.add_ar
+0004ee10: 6775 6d65 6e74 280a 2020 2020 2020 2020  gument(.        
+0004ee20: 222d 2d64 6f77 6e6c 6f61 6422 2c0a 2020  "--download",.  
+0004ee30: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+0004ee40: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
+0004ee50: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
+0004ee60: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
+0004ee70: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
+0004ee80: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
+0004ee90: 7661 723d 224d 5843 5f55 5249 222c 0a20  var="MXC_URI",. 
+0004eea0: 2020 2020 2020 2068 656c 703d 2244 6f77         help="Dow
+0004eeb0: 6e6c 6f61 6420 6f6e 6520 6f72 206d 756c  nload one or mul
+0004eec0: 7469 706c 6520 6669 6c65 7320 6672 6f6d  tiple files from
+0004eed0: 2074 6865 2063 6f6e 7465 6e74 2072 6570   the content rep
+0004eee0: 6f73 6974 6f72 792e 2022 0a20 2020 2020  ository. ".     
+0004eef0: 2020 2022 4465 7461 696c 733a 3a20 220a     "Details:: ".
+0004ef00: 2020 2020 2020 2020 2259 6f75 206d 7573          "You mus
+0004ef10: 7420 7072 6f76 6964 6520 6f6e 6520 6f72  t provide one or
+0004ef20: 206d 756c 7469 706c 6520 4d61 7472 6978   multiple Matrix
+0004ef30: 2055 5249 7320 284d 5843 7329 2077 6869   URIs (MXCs) whi
+0004ef40: 6368 2061 7265 2022 0a20 2020 2020 2020  ch are ".       
+0004ef50: 2022 7374 7269 6e67 7320 6c69 6b65 2022   "strings like "
+0004ef60: 0a20 2020 2020 2020 2022 7468 6973 2027  .        "this '
+0004ef70: 6d78 633a 2f2f 6578 616d 706c 652e 636f  mxc://example.co
+0004ef80: 6d2f 536f 6d65 5374 7261 6e67 6555 7269  m/SomeStrangeUri
+0004ef90: 4b65 7927 2e20 4966 2066 6f75 6e64 2074  Key'. If found t
+0004efa0: 6865 7920 7769 6c6c 2022 0a20 2020 2020  hey will ".     
+0004efb0: 2020 2022 6265 2064 6f77 6e6c 6f61 6465     "be downloade
+0004efc0: 642c 2064 6563 7279 7074 6564 2c20 616e  d, decrypted, an
+0004efd0: 6420 7374 6f72 6564 2069 6e20 6c6f 6361  d stored in loca
+0004efe0: 6c20 6669 6c65 732e 2022 0a20 2020 2020  l files. ".     
+0004eff0: 2020 2022 4966 2066 696c 6520 6e61 6d65     "If file name
+0004f000: 7320 6172 6520 7370 6563 6966 6965 6420  s are specified 
+0004f010: 7769 7468 202d 2d66 696c 652d 6e61 6d65  with --file-name
+0004f020: 2074 6865 2064 6f77 6e6c 6f61 6473 2022   the downloads "
+0004f030: 0a20 2020 2020 2020 2022 7769 6c6c 2062  .        "will b
+0004f040: 6520 7361 7665 6420 7769 7468 2074 6865  e saved with the
+0004f050: 7365 2066 696c 6520 6e61 6d65 732e 2049  se file names. I
+0004f060: 6620 2d2d 6669 6c65 2d6e 616d 6520 6973  f --file-name is
+0004f070: 206e 6f74 2022 0a20 2020 2020 2020 2022   not ".        "
+0004f080: 7370 6563 6966 6965 6420 7468 6520 6f72  specified the or
+0004f090: 6967 696e 616c 2066 696c 6520 6e61 6d65  iginal file name
+0004f0a0: 2066 726f 6d20 7468 6520 7570 6c6f 6164   from the upload
+0004f0b0: 2077 696c 6c20 6265 2075 7365 642e 2022   will be used. "
+0004f0c0: 0a20 2020 2020 2020 2022 4966 206e 6569  .        "If nei
+0004f0d0: 7468 6572 2073 7065 6369 6669 6564 206e  ther specified n
+0004f0e0: 6f72 2061 7661 696c 6162 6c65 206f 6e20  or available on 
+0004f0f0: 7365 7276 6572 2c20 7468 656e 2074 6865  server, then the
+0004f100: 2066 696c 6520 220a 2020 2020 2020 2020   file ".        
+0004f110: 6622 6e61 6d65 206f 6620 6c61 7374 2072  f"name of last r
+0004f120: 6573 6f72 7420 276d 7863 2d3c 6d78 632d  esort 'mxc-<mxc-
+0004f130: 6964 3e27 2077 696c 6c20 6265 2075 7365  id>' will be use
+0004f140: 642e 2022 0a20 2020 2020 2020 2066 2249  d. ".        f"I
+0004f150: 6620 6120 6669 6c65 206e 616d 6520 696e  f a file name in
+0004f160: 202d 2d66 696c 652d 6e61 6d65 2063 6f6e   --file-name con
+0004f170: 7461 696e 7320 7468 6520 706c 6163 6568  tains the placeh
+0004f180: 6f6c 6465 7220 220a 2020 2020 2020 2020  older ".        
+0004f190: 6622 7b4d 5843 5f49 445f 504c 4143 4548  f"{MXC_ID_PLACEH
+0004f1a0: 4f4c 4445 527d 2c20 6974 2077 696c 6c20  OLDER}, it will 
+0004f1b0: 6265 2072 6570 6c61 6365 6420 7769 7468  be replaced with
+0004f1c0: 2074 6865 206d 7863 2d69 642e 2022 0a20   the mxc-id. ". 
+0004f1d0: 2020 2020 2020 2022 4966 2061 2066 696c         "If a fil
+0004f1e0: 6520 6e61 6d65 2069 7320 7370 6563 6966  e name is specif
+0004f1f0: 6965 6420 6173 2065 6d70 7479 2073 7472  ied as empty str
+0004f200: 696e 6720 696e 202d 2d66 696c 652d 6e61  ing in --file-na
+0004f210: 6d65 2c20 7468 656e 2022 0a20 2020 2020  me, then ".     
+0004f220: 2020 2022 616c 736f 2074 6865 206e 616d     "also the nam
+0004f230: 6520 276d 7863 2d3c 6d78 632d 6964 3e27  e 'mxc-<mxc-id>'
+0004f240: 2077 696c 6c20 6265 2075 7365 642e 2022   will be used. "
+0004f250: 0a20 2020 2020 2020 2022 4279 2064 6566  .        "By def
+0004f260: 6175 6c74 2c20 7468 6520 7570 6c6f 6164  ault, the upload
+0004f270: 2077 6173 2065 6e63 7279 7074 6564 2073   was encrypted s
+0004f280: 6f20 6120 6465 6372 7970 7469 6f6e 2064  o a decryption d
+0004f290: 6963 7469 6f6e 6172 7920 220a 2020 2020  ictionary ".    
+0004f2a0: 2020 2020 226d 7573 7420 6265 2070 726f      "must be pro
+0004f2b0: 7669 6465 6420 746f 2064 6563 7279 7074  vided to decrypt
+0004f2c0: 2074 6865 2064 6174 612e 2053 7065 6369   the data. Speci
+0004f2d0: 6679 206f 6e65 206f 7220 6d75 6c74 6970  fy one or multip
+0004f2e0: 6c65 2022 0a20 2020 2020 2020 2022 6465  le ".        "de
+0004f2f0: 6372 7970 7469 6f6e 206b 6579 7320 220a  cryption keys ".
+0004f300: 2020 2020 2020 2020 2277 6974 6820 2d2d          "with --
+0004f310: 6b65 792d 6469 6374 2e20 4966 202d 2d6b  key-dict. If --k
+0004f320: 6579 2d64 6963 7420 6973 206e 6f74 2073  ey-dict is not s
+0004f330: 6574 2c20 6e6f 7420 6465 6372 7970 7469  et, not decrypti
+0004f340: 6f6e 2069 7320 220a 2020 2020 2020 2020  on is ".        
+0004f350: 2261 7474 656d 7074 6564 3b20 616e 6420  "attempted; and 
+0004f360: 7468 6520 6461 7461 206d 6967 6874 2062  the data might b
+0004f370: 6520 7374 6f72 6564 2069 6e20 656e 6372  e stored in encr
+0004f380: 7970 7465 6420 6661 7368 696f 6e2c 2022  ypted fashion, "
+0004f390: 0a20 2020 2020 2020 2022 6f72 206d 6967  .        "or mig
+0004f3a0: 6874 2062 6520 706c 6169 6e2d 7465 7874  ht be plain-text
+0004f3b0: 2069 6620 7468 6520 2d2d 7570 6c6f 6164   if the --upload
+0004f3c0: 2073 6b69 7070 6564 2065 6e63 7279 7074   skipped encrypt
+0004f3d0: 696f 6e20 7769 7468 2022 0a20 2020 2020  ion with ".     
+0004f3e0: 2020 2022 2d2d 706c 6169 6e2e 2022 0a20     "--plain. ". 
+0004f3f0: 2020 2020 2020 2022 5365 6520 7465 7374         "See test
+0004f400: 732f 7465 7374 2d75 706c 6f61 642e 7368  s/test-upload.sh
+0004f410: 2066 6f72 2061 6e20 6578 616d 706c 652e   for an example.
+0004f420: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
+0004f430: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
+0004f440: 2020 2020 2020 222d 2d64 656c 6574 652d        "--delete-
+0004f450: 6d78 6322 2c0a 2020 2020 2020 2020 7265  mxc",.        re
+0004f460: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+0004f470: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
+0004f480: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
+0004f490: 6172 6773 3d22 2b22 2c0a 2020 2020 2020  args="+",.      
+0004f4a0: 2020 7479 7065 3d73 7472 2c0a 2020 2020    type=str,.    
+0004f4b0: 2020 2020 6d65 7461 7661 723d 224d 5843      metavar="MXC
+0004f4c0: 5f55 5249 222c 0a20 2020 2020 2020 2068  _URI",.        h
+0004f4d0: 656c 703d 2244 656c 6574 6520 6f6e 6520  elp="Delete one 
+0004f4e0: 6f72 206d 756c 7469 706c 6520 6f62 6a65  or multiple obje
+0004f4f0: 6374 7320 6672 6f6d 2074 6865 2063 6f6e  cts from the con
+0004f500: 7465 6e74 2072 6570 6f73 6974 6f72 792e  tent repository.
+0004f510: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
+0004f520: 696c 733a 3a20 596f 7520 6d75 7374 2070  ils:: You must p
+0004f530: 726f 7669 6465 206f 6e65 206f 7220 6d75  rovide one or mu
+0004f540: 6c74 6970 6c65 204d 6174 7269 7820 5552  ltiple Matrix UR
+0004f550: 4973 2028 4d58 4329 2022 0a20 2020 2020  Is (MXC) ".     
+0004f560: 2020 2022 7768 6963 6820 6172 6520 7374     "which are st
+0004f570: 7269 6e67 7320 6c69 6b65 2022 0a20 2020  rings like ".   
+0004f580: 2020 2020 2022 7468 6973 2027 6d78 633a       "this 'mxc:
+0004f590: 2f2f 6578 616d 706c 652e 636f 6d2f 536f  //example.com/So
+0004f5a0: 6d65 5374 7261 6e67 6555 7269 4b65 7927  meStrangeUriKey'
+0004f5b0: 2e20 416c 7465 726e 6174 6976 656c 792c  . Alternatively,
+0004f5c0: 2079 6f75 2022 0a20 2020 2020 2020 2022   you ".        "
+0004f5d0: 6361 6e20 6a75 7374 2070 726f 7669 6465  can just provide
+0004f5e0: 2074 6865 204d 5843 2069 642c 2069 2e65   the MXC id, i.e
+0004f5f0: 2e20 7468 6520 7061 7274 2061 6674 6572  . the part after
+0004f600: 2074 6865 206c 6173 7420 736c 6173 682e   the last slash.
+0004f610: 2022 0a20 2020 2020 2020 2022 4966 2066   ".        "If f
+0004f620: 6f75 6e64 2074 6865 7920 2869 2e65 2e20  ound they (i.e. 
+0004f630: 7468 6520 6669 6c65 7320 7468 6579 2072  the files they r
+0004f640: 6570 7265 7365 6e74 2920 7769 6c6c 2022  epresent) will "
+0004f650: 0a20 2020 2020 2020 2022 6265 2064 656c  .        "be del
+0004f660: 6574 6564 2066 726f 6d20 7468 6520 7365  eted from the se
+0004f670: 7276 6572 2064 6174 6162 6173 652e 2049  rver database. I
+0004f680: 6e20 6f72 6465 7220 746f 2064 656c 6574  n order to delet
+0004f690: 6520 6f62 6a65 6374 7320 220a 2020 2020  e objects ".    
+0004f6a0: 2020 2020 226f 6e65 206d 7573 7420 6861      "one must ha
+0004f6b0: 7665 2073 6572 7665 7220 6164 6d69 6e20  ve server admin 
+0004f6c0: 7065 726d 6973 7369 6f6e 732e 2048 6176  permissions. Hav
+0004f6d0: 696e 6720 6f6e 6c79 2072 6f6f 6d20 6164  ing only room ad
+0004f6e0: 6d69 6e20 220a 2020 2020 2020 2020 2270  min ".        "p
+0004f6f0: 6572 6d69 7373 696f 6e73 2069 7320 6e6f  ermissions is no
+0004f700: 7420 7375 6666 6963 6965 6e74 2061 6e64  t sufficient and
+0004f710: 2069 7420 7769 6c6c 2066 6169 6c2e 2022   it will fail. "
+0004f720: 0a20 2020 2020 2020 2022 5265 6164 2022  .        "Read "
+0004f730: 0a20 2020 2020 2020 2022 6874 7470 733a  .        "https:
+0004f740: 2f2f 6d61 7472 6978 2d6f 7267 2e67 6974  //matrix-org.git
+0004f750: 6875 622e 696f 2f73 796e 6170 7365 2f22  hub.io/synapse/"
+0004f760: 0a20 2020 2020 2020 2022 6c61 7465 7374  .        "latest
+0004f770: 2f75 7361 6765 2f61 646d 696e 6973 7472  /usage/administr
+0004f780: 6174 696f 6e2f 6164 6d69 6e5f 6170 692f  ation/admin_api/
+0004f790: 2022 0a20 2020 2020 2020 2022 666f 7220   ".        "for 
+0004f7a0: 6c65 6172 6e69 6e67 2068 6f77 2074 6f20  learning how to 
+0004f7b0: 7365 7420 7365 7276 6572 2061 646d 696e  set server admin
+0004f7c0: 2070 6572 6d69 7373 696f 6e73 206f 6e20   permissions on 
+0004f7d0: 7468 6520 220a 2020 2020 2020 2020 2273  the ".        "s
+0004f7e0: 6572 7665 722e 2041 6c74 6572 6e61 7469  erver. Alternati
+0004f7f0: 7665 6c79 2c20 616e 6420 6f70 7469 6f6e  vely, and option
+0004f800: 616c 6c79 2c20 6f6e 6520 6361 6e20 7370  ally, one can sp
+0004f810: 6563 6966 7920 220a 2020 2020 2020 2020  ecify ".        
+0004f820: 2261 6e20 6163 6365 7373 2074 6f6b 656e  "an access token
+0004f830: 2077 6869 6368 2068 6173 2073 6572 7665   which has serve
+0004f840: 7220 6164 6d69 6e20 7065 726d 6973 7369  r admin permissi
+0004f850: 6f6e 7320 7769 7468 2074 6865 2022 0a20  ons with the ". 
+0004f860: 2020 2020 2020 2022 2d2d 6163 6365 7373         "--access
+0004f870: 2d74 6f6b 656e 2061 7267 756d 656e 742e  -token argument.
+0004f880: 2022 0a20 2020 2020 2020 2022 5365 6520   ".        "See 
+0004f890: 7465 7374 732f 7465 7374 2d75 706c 6f61  tests/test-uploa
+0004f8a0: 642e 7368 2066 6f72 2061 6e20 6578 616d  d.sh for an exam
+0004f8b0: 706c 652e 222c 0a20 2020 2029 0a20 2020  ple.",.    ).   
+0004f8c0: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+0004f8d0: 280a 2020 2020 2020 2020 222d 2d64 656c  (.        "--del
+0004f8e0: 6574 652d 6d78 632d 6265 666f 7265 222c  ete-mxc-before",
+0004f8f0: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+0004f900: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
+0004f910: 2061 6374 696f 6e3d 2265 7874 656e 6422   action="extend"
+0004f920: 2c0a 2020 2020 2020 2020 6e61 7267 733d  ,.        nargs=
+0004f930: 222b 222c 0a20 2020 2020 2020 2074 7970  "+",.        typ
+0004f940: 653d 7374 722c 0a20 2020 2020 2020 206d  e=str,.        m
+0004f950: 6574 6176 6172 3d22 5449 4d45 5354 414d  etavar="TIMESTAM
+0004f960: 5022 2c0a 2020 2020 2020 2020 6865 6c70  P",.        help
+0004f970: 3d22 4465 6c65 7465 206f 6c64 206f 626a  ="Delete old obj
+0004f980: 6563 7473 2066 726f 6d20 7468 6520 636f  ects from the co
+0004f990: 6e74 656e 7420 7265 706f 7369 746f 7279  ntent repository
+0004f9a0: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
+0004f9b0: 6c73 3a3a 2044 656c 6574 6520 6669 6c65  ls:: Delete file
+0004f9c0: 7320 6672 6f6d 2074 6865 2063 6f6e 7465  s from the conte
+0004f9d0: 6e74 2072 6570 6f73 6974 6f72 7920 220a  nt repository ".
+0004f9e0: 2020 2020 2020 2020 2274 6861 7420 6172          "that ar
+0004f9f0: 6520 6f6c 6465 7220 7468 616e 2061 2067  e older than a g
+0004fa00: 6976 656e 2074 696d 6573 7461 6d70 2e20  iven timestamp. 
+0004fa10: 220a 2020 2020 2020 2020 2249 7420 6973  ".        "It is
+0004fa20: 2074 6865 2074 696d 6573 7461 6d70 206f   the timestamp o
+0004fa30: 6620 6c61 7374 2061 6363 6573 732c 206e  f last access, n
+0004fa40: 6f74 2074 6865 2074 696d 6573 7461 6d70  ot the timestamp
+0004fa50: 2077 6865 6e20 220a 2020 2020 2020 2020   when ".        
+0004fa60: 2274 6865 2066 696c 6520 7761 7320 6372  "the file was cr
+0004fa70: 6561 7465 642e 2022 0a20 2020 2020 2020  eated. ".       
+0004fa80: 2022 4164 6469 7469 6f6e 616c 6c79 2079   "Additionally y
+0004fa90: 6f75 2063 616e 2073 7065 6369 6679 2061  ou can specify a
+0004faa0: 2073 697a 6520 696e 2062 7974 6573 2074   size in bytes t
+0004fab0: 6f20 696e 6469 6361 7465 2022 0a20 2020  o indicate ".   
+0004fac0: 2020 2020 2022 7468 6174 206f 6e6c 7920       "that only 
+0004fad0: 6669 6c65 7320 6f6c 6465 7220 7468 616e  files older than
+0004fae0: 2074 696d 6573 7461 6d70 2061 6e64 206c   timestamp and l
+0004faf0: 6172 6765 7220 7468 616e 2073 697a 6520  arger than size 
+0004fb00: 220a 2020 2020 2020 2020 2277 696c 6c20  ".        "will 
+0004fb10: 6265 2064 656c 6574 6564 2e20 220a 2020  be deleted. ".  
+0004fb20: 2020 2020 2020 2259 6f75 206d 7573 7420        "You must 
+0004fb30: 7072 6f76 6964 6520 6120 7469 6d65 7374  provide a timest
+0004fb40: 616d 7020 6f66 2074 6865 2066 6f6c 6c6f  amp of the follo
+0004fb50: 7769 6e67 2066 6f72 6d61 743a 2022 0a20  wing format: ". 
+0004fb60: 2020 2020 2020 2022 2744 442e 4d4d 2e59         "'DD.MM.Y
+0004fb70: 5959 5920 4848 3a4d 4d3a 5353 2720 6c69  YYY HH:MM:SS' li
+0004fb80: 6b65 2027 3230 2e30 312e 3230 3232 2031  ke '20.01.2022 1
+0004fb90: 393a 3338 3a34 3227 2066 6f72 204a 616e  9:38:42' for Jan
+0004fba0: 7561 7279 2032 302c 2022 0a20 2020 2020  uary 20, ".     
+0004fbb0: 2020 2022 3230 3232 2c20 3770 6d20 3338     "2022, 7pm 38
+0004fbc0: 6d69 6e20 3432 7365 632e 2022 0a20 2020  min 42sec. ".   
+0004fbd0: 2020 2020 2022 4669 6c65 7320 7468 6174       "Files that
+0004fbe0: 2061 7265 2073 7469 6c6c 2075 7365 6420   are still used 
+0004fbf0: 696e 2069 6d61 6765 2064 6174 6120 2865  in image data (e
+0004fc00: 2e67 2075 7365 7220 7072 6f66 696c 652c  .g user profile,
+0004fc10: 2022 0a20 2020 2020 2020 2022 726f 6f6d   ".        "room
+0004fc20: 2061 7661 7461 7229 2077 696c 6c20 6e6f   avatar) will no
+0004fc30: 7420 6265 2064 656c 6574 6564 2066 726f  t be deleted fro
+0004fc40: 6d20 7468 6520 7365 7276 6572 2064 6174  m the server dat
+0004fc50: 6162 6173 652e 2022 0a20 2020 2020 2020  abase. ".       
+0004fc60: 2022 496e 206f 7264 6572 2074 6f20 6465   "In order to de
+0004fc70: 6c65 7465 206f 626a 6563 7473 2022 0a20  lete objects ". 
+0004fc80: 2020 2020 2020 2022 6f6e 6520 6d75 7374         "one must
+0004fc90: 2068 6176 6520 7365 7276 6572 2061 646d   have server adm
+0004fca0: 696e 2070 6572 6d69 7373 696f 6e73 2e20  in permissions. 
+0004fcb0: 4861 7669 6e67 206f 6e6c 7920 726f 6f6d  Having only room
+0004fcc0: 2061 646d 696e 2022 0a20 2020 2020 2020   admin ".       
+0004fcd0: 2022 7065 726d 6973 7369 6f6e 7320 6973   "permissions is
+0004fce0: 206e 6f74 2073 7566 6669 6369 656e 7420   not sufficient 
+0004fcf0: 616e 6420 6974 2077 696c 6c20 6661 696c  and it will fail
+0004fd00: 2e20 220a 2020 2020 2020 2020 2252 6561  . ".        "Rea
+0004fd10: 6420 220a 2020 2020 2020 2020 2268 7474  d ".        "htt
+0004fd20: 7073 3a2f 2f6d 6174 7269 782d 6f72 672e  ps://matrix-org.
+0004fd30: 6769 7468 7562 2e69 6f2f 7379 6e61 7073  github.io/synaps
+0004fd40: 652f 220a 2020 2020 2020 2020 226c 6174  e/".        "lat
+0004fd50: 6573 742f 7573 6167 652f 6164 6d69 6e69  est/usage/admini
+0004fd60: 7374 7261 7469 6f6e 2f61 646d 696e 5f61  stration/admin_a
+0004fd70: 7069 2f20 220a 2020 2020 2020 2020 2266  pi/ ".        "f
+0004fd80: 6f72 206c 6561 726e 696e 6720 686f 7720  or learning how 
+0004fd90: 746f 2073 6574 2073 6572 7665 7220 6164  to set server ad
+0004fda0: 6d69 6e20 7065 726d 6973 7369 6f6e 7320  min permissions 
+0004fdb0: 6f6e 2074 6865 2022 0a20 2020 2020 2020  on the ".       
+0004fdc0: 2022 7365 7276 6572 2e20 416c 7465 726e   "server. Altern
+0004fdd0: 6174 6976 656c 792c 2061 6e64 206f 7074  atively, and opt
+0004fde0: 696f 6e61 6c6c 792c 206f 6e65 2063 616e  ionally, one can
+0004fdf0: 2073 7065 6369 6679 2022 0a20 2020 2020   specify ".     
+0004fe00: 2020 2022 616e 2061 6363 6573 7320 746f     "an access to
+0004fe10: 6b65 6e20 7768 6963 6820 6861 7320 7365  ken which has se
+0004fe20: 7276 6572 2061 646d 696e 2070 6572 6d69  rver admin permi
+0004fe30: 7373 696f 6e73 2077 6974 6820 7468 6520  ssions with the 
+0004fe40: 220a 2020 2020 2020 2020 222d 2d61 6363  ".        "--acc
+0004fe50: 6573 732d 746f 6b65 6e20 6172 6775 6d65  ess-token argume
+0004fe60: 6e74 2e20 220a 2020 2020 2020 2020 2253  nt. ".        "S
+0004fe70: 6565 2074 6573 7473 2f74 6573 742d 7570  ee tests/test-up
+0004fe80: 6c6f 6164 2e73 6820 666f 7220 616e 2065  load.sh for an e
+0004fe90: 7861 6d70 6c65 2e22 2c0a 2020 2020 290a  xample.",.    ).
+0004fea0: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
+0004feb0: 656e 7428 0a20 2020 2020 2020 2023 206e  ent(.        # n
+0004fec0: 6f20 7369 6e67 6c65 2063 6861 7220 666c  o single char fl
+0004fed0: 6167 0a20 2020 2020 2020 2022 2d2d 6a6f  ag.        "--jo
+0004fee0: 696e 6564 2d72 6f6f 6d73 222c 0a20 2020  ined-rooms",.   
+0004fef0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+0004ff00: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
+0004ff10: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
+0004ff20: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
+0004ff30: 5072 696e 7420 7468 6520 6c69 7374 206f  Print the list o
+0004ff40: 6620 6a6f 696e 6564 2072 6f6f 6d73 2e20  f joined rooms. 
+0004ff50: 220a 2020 2020 2020 2020 2244 6574 6169  ".        "Detai
+0004ff60: 6c73 3a3a 2041 6c6c 2072 6f6f 6d73 2074  ls:: All rooms t
+0004ff70: 6861 7420 796f 7520 6172 6520 6120 220a  hat you are a ".
+0004ff80: 2020 2020 2020 2020 226d 656d 6265 7220          "member 
+0004ff90: 6f66 2077 696c 6c20 6265 2070 7269 6e74  of will be print
+0004ffa0: 6564 2c20 6f6e 6520 726f 6f6d 2070 6572  ed, one room per
+0004ffb0: 206c 696e 652e 222c 0a20 2020 2029 0a20   line.",.    ). 
+0004ffc0: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
+0004ffd0: 6e74 280a 2020 2020 2020 2020 2320 6e6f  nt(.        # no
+0004ffe0: 2073 696e 676c 6520 6368 6172 2066 6c61   single char fla
+0004fff0: 670a 2020 2020 2020 2020 222d 2d6a 6f69  g.        "--joi
+00050000: 6e65 642d 6d65 6d62 6572 7322 2c0a 2020  ned-members",.  
+00050010: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+00050020: 616c 7365 2c0a 2020 2020 2020 2020 6163  alse,.        ac
+00050030: 7469 6f6e 3d22 6578 7465 6e64 222c 0a20  tion="extend",. 
+00050040: 2020 2020 2020 206e 6172 6773 3d22 2b22         nargs="+"
+00050050: 2c0a 2020 2020 2020 2020 7479 7065 3d73  ,.        type=s
+00050060: 7472 2c0a 2020 2020 2020 2020 6d65 7461  tr,.        meta
+00050070: 7661 723d 2252 4f4f 4d22 2c0a 2020 2020  var="ROOM",.    
+00050080: 2020 2020 6865 6c70 3d22 5072 696e 7420      help="Print 
+00050090: 7468 6520 6c69 7374 206f 6620 6a6f 696e  the list of join
+000500a0: 6564 206d 656d 6265 7273 2066 6f72 206f  ed members for o
+000500b0: 6e65 206f 7220 6d75 6c74 6970 6c65 2072  ne or multiple r
+000500c0: 6f6f 6d73 2e20 220a 2020 2020 2020 2020  ooms. ".        
+000500d0: 2244 6574 6169 6c73 3a3a 2049 6620 796f  "Details:: If yo
+000500e0: 7520 7761 6e74 2074 6f20 7072 696e 7420  u want to print 
+000500f0: 7468 6520 6a6f 696e 6564 206d 656d 6265  the joined membe
+00050100: 7273 206f 6620 616c 6c20 726f 6f6d 7320  rs of all rooms 
+00050110: 7468 6174 2022 0a20 2020 2020 2020 2022  that ".        "
+00050120: 796f 7520 6172 6520 6d65 6d62 6572 206f  you are member o
+00050130: 662c 2074 6865 6e20 7573 6520 7468 6520  f, then use the 
+00050140: 7370 6563 6961 6c20 6368 6172 6163 7465  special characte
+00050150: 7220 272a 272e 222c 0a20 2020 2029 0a20  r '*'.",.    ). 
+00050160: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
+00050170: 6e74 280a 2020 2020 2020 2020 2320 6e6f  nt(.        # no
+00050180: 2073 696e 676c 6520 6368 6172 2066 6c61   single char fla
+00050190: 670a 2020 2020 2020 2020 222d 2d6a 6f69  g.        "--joi
+000501a0: 6e65 642d 646d 2d72 6f6f 6d73 222c 0a20  ned-dm-rooms",. 
+000501b0: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+000501c0: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+000501d0: 6374 696f 6e3d 2265 7874 656e 6422 2c0a  ction="extend",.
+000501e0: 2020 2020 2020 2020 6e61 7267 733d 222b          nargs="+
+000501f0: 222c 0a20 2020 2020 2020 2074 7970 653d  ",.        type=
+00050200: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
+00050210: 6176 6172 3d22 5553 4552 222c 0a20 2020  avar="USER",.   
+00050220: 2020 2020 2068 656c 703d 2250 7269 6e74       help="Print
+00050230: 2074 6865 206c 6973 7420 6f66 206a 6f69   the list of joi
+00050240: 6e65 6420 444d 2072 6f6f 6d73 2066 6f72  ned DM rooms for
+00050250: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
+00050260: 2075 7365 7273 2e20 220a 2020 2020 2020   users. ".      
+00050270: 2020 2244 6574 6169 6c73 3a3a 2046 6f72    "Details:: For
+00050280: 2065 6163 6820 7573 6572 2073 7065 6369   each user speci
+00050290: 6669 6564 2c20 6974 2070 7269 6e74 7320  fied, it prints 
+000502a0: 616c 6c20 444d 2072 6f6f 6d73 2074 6861  all DM rooms tha
+000502b0: 7420 796f 7520 220a 2020 2020 2020 2020  t you ".        
+000502c0: 2273 6861 7265 2077 6974 6820 7468 6520  "share with the 
+000502d0: 7370 6563 6966 6965 6420 7573 6572 2e20  specified user. 
+000502e0: 5468 6572 6520 6d69 6768 7420 6265 2030  There might be 0
+000502f0: 2c20 312c 206f 7220 6d75 6c74 6970 6c65  , 1, or multiple
+00050300: 2022 0a20 2020 2020 2020 2022 444d 2072   ".        "DM r
+00050310: 6f6f 6d73 2066 6f72 2061 2067 6976 656e  ooms for a given
+00050320: 2075 7365 722e 2022 0a20 2020 2020 2020   user. ".       
+00050330: 2022 5368 6f72 7420 7573 6572 206e 616d   "Short user nam
+00050340: 6573 206c 696b 6520 276a 6f68 6e27 2063  es like 'john' c
+00050350: 616e 2062 6520 616c 736f 2062 6520 6769  an be also be gi
+00050360: 7665 6e2e 2022 0a20 2020 2020 2020 2022  ven. ".        "
+00050370: 4966 2079 6f75 2077 616e 7420 746f 2070  If you want to p
+00050380: 7269 6e74 2061 6c6c 2044 4d20 726f 6f6d  rint all DM room
+00050390: 7320 7468 6174 2022 0a20 2020 2020 2020  s that ".       
+000503a0: 2022 796f 7520 6172 6520 6d65 6d62 6572   "you are member
+000503b0: 206f 662c 2074 6865 6e20 7573 6520 7468   of, then use th
+000503c0: 6520 7370 6563 6961 6c20 6368 6172 6163  e special charac
+000503d0: 7465 7220 272a 272e 2022 0a20 2020 2020  ter '*'. ".     
+000503e0: 2020 2022 466f 7220 6561 6368 2044 4d20     "For each DM 
+000503f0: 726f 6f6d 2066 6f75 6e64 2061 2073 696e  room found a sin
+00050400: 676c 6520 6c69 6e65 206f 6620 6f75 7470  gle line of outp
+00050410: 7574 2069 7320 7072 696e 7465 642e 2022  ut is printed. "
+00050420: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+00050430: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+00050440: 2020 2020 2022 2d2d 6d78 632d 746f 2d68       "--mxc-to-h
+00050450: 7474 7022 2c0a 2020 2020 2020 2020 7265  ttp",.        re
+00050460: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+00050470: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
+00050480: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
+00050490: 6172 6773 3d22 2b22 2c0a 2020 2020 2020  args="+",.      
+000504a0: 2020 7479 7065 3d73 7472 2c0a 2020 2020    type=str,.    
+000504b0: 2020 2020 6d65 7461 7661 723d 224d 5843      metavar="MXC
+000504c0: 5f55 5249 222c 0a20 2020 2020 2020 2068  _URI",.        h
+000504d0: 656c 703d 2243 6f6e 7665 7274 204d 5843  elp="Convert MXC
+000504e0: 2055 5249 7320 746f 2048 5454 5020 5552   URIs to HTTP UR
+000504f0: 4c73 2e20 220a 2020 2020 2020 2020 2244  Ls. ".        "D
+00050500: 6574 6169 6c73 3a3a 2043 6f6e 7665 7274  etails:: Convert
+00050510: 206f 6e65 206f 7220 6d6f 7265 206d 6174   one or more mat
+00050520: 7269 7820 636f 6e74 656e 7420 5552 4973  rix content URIs
+00050530: 2074 6f20 7468 6520 220a 2020 2020 2020   to the ".      
+00050540: 2020 2263 6f72 7265 7370 6f6e 6469 6e67    "corresponding
+00050550: 2048 5454 5020 5552 4c73 2e20 5468 6520   HTTP URLs. The 
+00050560: 4d58 4320 5552 4973 2022 0a20 2020 2020  MXC URIs ".     
+00050570: 2020 2022 746f 2070 726f 7669 6465 206c     "to provide l
+00050580: 6f6f 6b20 736f 6d65 7468 696e 6720 6c69  ook something li
+00050590: 6b65 2074 6869 7320 220a 2020 2020 2020  ke this ".      
+000505a0: 2020 2227 6d78 633a 2f2f 6578 616d 706c    "'mxc://exampl
+000505b0: 652e 636f 6d2f 536f 6d65 5374 7261 6e67  e.com/SomeStrang
+000505c0: 6555 7269 4b65 7927 2e20 220a 2020 2020  eUriKey'. ".    
+000505d0: 2020 2020 2253 6565 2074 6573 7473 2f74      "See tests/t
+000505e0: 6573 742d 7570 6c6f 6164 2e73 6820 666f  est-upload.sh fo
+000505f0: 7220 616e 2065 7861 6d70 6c65 2e22 2c0a  r an example.",.
+00050600: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
+00050610: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+00050620: 2020 2023 206e 6f20 7369 6e67 6c65 2063     # no single c
+00050630: 6861 7220 666c 6167 0a20 2020 2020 2020  har flag.       
+00050640: 2022 2d2d 6465 7669 6365 7322 2c0a 2020   "--devices",.  
+00050650: 2020 2020 2020 222d 2d67 6574 2d64 6576        "--get-dev
+00050660: 6963 6573 222c 2020 2320 616c 6961 732c  ices",  # alias,
+00050670: 2063 6175 7365 202d 2d64 6576 6963 6564   cause --deviced
+00050680: 2069 7320 7665 7279 2073 696d 696c 6172   is very similar
+00050690: 2074 6f20 2d2d 6465 7669 6365 0a20 2020   to --device.   
+000506a0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+000506b0: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
+000506c0: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
+000506d0: 2c0a 2020 2020 2020 2020 6865 6c70 3d22  ,.        help="
+000506e0: 5072 696e 7420 7468 6520 6c69 7374 206f  Print the list o
+000506f0: 6620 6465 7669 6365 732e 2022 0a20 2020  f devices. ".   
+00050700: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+00050710: 416c 6c20 6465 7669 6365 206f 6620 7468  All device of th
+00050720: 6973 2022 0a20 2020 2020 2020 2022 6163  is ".        "ac
+00050730: 636f 756e 7420 7769 6c6c 2062 6520 7072  count will be pr
+00050740: 696e 7465 642c 206f 6e65 2064 6576 6963  inted, one devic
+00050750: 6520 7065 7220 6c69 6e65 2e22 2c0a 2020  e per line.",.  
+00050760: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+00050770: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+00050780: 2023 206e 6f20 7369 6e67 6c65 2063 6861   # no single cha
+00050790: 7220 666c 6167 0a20 2020 2020 2020 2022  r flag.        "
+000507a0: 2d2d 6469 7363 6f76 6572 792d 696e 666f  --discovery-info
+000507b0: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
+000507c0: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
+000507d0: 2020 2061 6374 696f 6e3d 2273 746f 7265     action="store
+000507e0: 5f74 7275 6522 2c0a 2020 2020 2020 2020  _true",.        
+000507f0: 6865 6c70 3d22 5072 696e 7420 6469 7363  help="Print disc
+00050800: 6f76 6572 7920 696e 666f 726d 6174 696f  overy informatio
+00050810: 6e20 6162 6f75 7420 6375 7272 656e 7420  n about current 
+00050820: 686f 6d65 7365 7276 6572 2e20 220a 2020  homeserver. ".  
+00050830: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+00050840: 204e 6f74 6520 7468 6174 206e 6f74 2061   Note that not a
+00050850: 6c6c 2068 6f6d 6573 6572 7665 7273 2073  ll homeservers s
+00050860: 7570 706f 7274 2064 6973 636f 7665 7279  upport discovery
+00050870: 2061 6e64 2061 6e20 220a 2020 2020 2020   and an ".      
+00050880: 2020 2265 7272 6f72 206d 6967 6874 2062    "error might b
+00050890: 6520 7265 706f 7274 6564 2e22 2c0a 2020  e reported.",.  
+000508a0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+000508b0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+000508c0: 2023 206e 6f20 7369 6e67 6c65 2063 6861   # no single cha
+000508d0: 7220 666c 6167 0a20 2020 2020 2020 2022  r flag.        "
+000508e0: 2d2d 6c6f 6769 6e2d 696e 666f 222c 0a20  --login-info",. 
+000508f0: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+00050900: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+00050910: 6374 696f 6e3d 2273 746f 7265 5f74 7275  ction="store_tru
+00050920: 6522 2c0a 2020 2020 2020 2020 6865 6c70  e",.        help
+00050930: 3d22 5072 696e 7420 6c6f 6769 6e20 6d65  ="Print login me
+00050940: 7468 6f64 7320 7375 7070 6f72 7465 6420  thods supported 
+00050950: 6279 2074 6865 2068 6f6d 6573 6572 7665  by the homeserve
+00050960: 722e 2022 0a20 2020 2020 2020 2022 4465  r. ".        "De
+00050970: 7461 696c 733a 3a20 4974 2070 7269 6e74  tails:: It print
+00050980: 7320 6f6e 6520 6c6f 6769 6e20 6d65 7468  s one login meth
+00050990: 6f64 2070 6572 206c 696e 652e 222c 0a20  od per line.",. 
+000509a0: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
+000509b0: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+000509c0: 2020 2320 6e6f 2073 696e 676c 6520 6368    # no single ch
+000509d0: 6172 2066 6c61 670a 2020 2020 2020 2020  ar flag.        
+000509e0: 222d 2d63 6f6e 7465 6e74 2d72 6570 6f73  "--content-repos
+000509f0: 6974 6f72 792d 636f 6e66 6967 222c 0a20  itory-config",. 
+00050a00: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+00050a10: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+00050a20: 6374 696f 6e3d 2273 746f 7265 5f74 7275  ction="store_tru
+00050a30: 6522 2c0a 2020 2020 2020 2020 6865 6c70  e",.        help
+00050a40: 3d22 5072 696e 7420 7468 6520 636f 6e74  ="Print the cont
+00050a50: 656e 7420 7265 706f 7369 746f 7279 2063  ent repository c
+00050a60: 6f6e 6669 6775 7261 7469 6f6e 2e20 220a  onfiguration. ".
+00050a70: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+00050a80: 3a3a 2054 6869 7320 6375 7272 656e 746c  :: This currentl
+00050a90: 7920 6a75 7374 2070 7269 6e74 7320 220a  y just prints ".
+00050aa0: 2020 2020 2020 2020 2274 6865 2075 706c          "the upl
+00050ab0: 6f61 6420 7369 7a65 206c 696d 6974 2069  oad size limit i
+00050ac0: 6e20 6279 7465 732e 222c 0a20 2020 2029  n bytes.",.    )
+00050ad0: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
+00050ae0: 6d65 6e74 280a 2020 2020 2020 2020 2320  ment(.        # 
+00050af0: 6e6f 2073 696e 676c 6520 6368 6172 2066  no single char f
+00050b00: 6c61 670a 2020 2020 2020 2020 222d 2d72  lag.        "--r
+00050b10: 6573 7422 2c0a 2020 2020 2020 2020 7265  est",.        re
+00050b20: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+00050b30: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
+00050b40: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
+00050b50: 6172 6773 3d22 2b22 2c0a 2020 2020 2020  args="+",.      
+00050b60: 2020 7479 7065 3d73 7472 2c0a 2020 2020    type=str,.    
+00050b70: 2020 2020 6d65 7461 7661 723d 2252 4553      metavar="RES
+00050b80: 545f 4d45 5448 4f44 2044 4154 4120 5552  T_METHOD DATA UR
+00050b90: 4c22 2c0a 2020 2020 2020 2020 6865 6c70  L",.        help
+00050ba0: 3d22 5573 6520 7468 6520 4d61 7472 6978  ="Use the Matrix
+00050bb0: 2043 6c69 656e 7420 5245 5354 2041 5049   Client REST API
+00050bc0: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
+00050bd0: 6169 6c73 3a3a 204d 6174 7269 7820 6861  ails:: Matrix ha
+00050be0: 7320 7365 7665 7261 6c20 6578 7465 6e73  s several extens
+00050bf0: 6976 6520 220a 2020 2020 2020 2020 2252  ive ".        "R
+00050c00: 4553 5420 4150 4973 2e20 5769 7468 2074  EST APIs. With t
+00050c10: 6865 202d 2d72 6573 7420 6172 6775 6d65  he --rest argume
+00050c20: 6e74 2079 6f75 2063 616e 2069 6e76 6f6b  nt you can invok
+00050c30: 6520 6120 4d61 7472 6978 2052 4553 5420  e a Matrix REST 
+00050c40: 220a 2020 2020 2020 2020 2241 5049 2063  ".        "API c
+00050c50: 616c 6c2e 2054 6869 7320 616c 6c6f 7773  all. This allows
+00050c60: 2074 6865 2075 7365 7220 746f 2064 6f20   the user to do 
+00050c70: 7072 6574 7479 206d 7563 6820 616e 7974  pretty much anyt
+00050c80: 6869 6e67 2c20 6174 2074 6865 2022 0a20  hing, at the ". 
+00050c90: 2020 2020 2020 2022 7072 6963 6520 6f66         "price of
+00050ca0: 206e 6f74 2062 6569 6e67 2076 6572 7920   not being very 
+00050cb0: 636f 6e76 656e 6965 6e74 2e20 5468 6520  convenient. The 
+00050cc0: 4150 4973 2061 7265 2064 6573 6372 6962  APIs are describ
+00050cd0: 6564 2069 6e20 220a 2020 2020 2020 2020  ed in ".        
+00050ce0: 2268 7474 7073 3a2f 2f6d 6174 7269 782e  "https://matrix.
+00050cf0: 6f72 672f 646f 6373 2f61 7069 2f2c 2022  org/docs/api/, "
+00050d00: 0a20 2020 2020 2020 2022 6874 7470 733a  .        "https:
+00050d10: 2f2f 7370 6563 2e6d 6174 7269 782e 6f72  //spec.matrix.or
+00050d20: 672f 6c61 7465 7374 2f63 6c69 656e 742d  g/latest/client-
+00050d30: 7365 7276 6572 2d61 7069 2f2c 2022 0a20  server-api/, ". 
+00050d40: 2020 2020 2020 2022 6874 7470 733a 2f2f         "https://
+00050d50: 6d61 7472 6978 2d6f 7267 2e67 6974 6875  matrix-org.githu
+00050d60: 622e 696f 2f73 796e 6170 7365 2f6c 6174  b.io/synapse/lat
+00050d70: 6573 742f 7573 6167 652f 6164 6d69 6e69  est/usage/admini
+00050d80: 7374 7261 7469 6f6e 2f22 0a20 2020 2020  stration/".     
+00050d90: 2020 2022 6164 6d69 6e5f 6170 692f 2c20     "admin_api/, 
+00050da0: 6574 632e 2022 0a20 2020 2020 2020 2022  etc. ".        "
+00050db0: 4561 6368 2052 4553 5420 6361 6c6c 2072  Each REST call r
+00050dc0: 6571 7569 7265 7320 6578 6163 746c 7920  equires exactly 
+00050dd0: 3320 6172 6775 6d65 6e74 732e 2022 0a20  3 arguments. ". 
+00050de0: 2020 2020 2020 2022 536f 2c20 7468 6520         "So, the 
+00050df0: 746f 7461 6c20 6e75 6d62 6572 206f 6620  total number of 
+00050e00: 6172 6775 6d65 6e74 7320 7573 6564 2077  arguments used w
+00050e10: 6974 6820 2d2d 7265 7374 206d 7573 7420  ith --rest must 
+00050e20: 6265 2061 2022 0a20 2020 2020 2020 2022  be a ".        "
+00050e30: 6d75 6c74 6970 6c65 206f 6620 332e 2054  multiple of 3. T
+00050e40: 6865 2061 7267 756d 656e 7420 7472 6970  he argument trip
+00050e50: 6c65 7320 6172 653a 2022 0a20 2020 2020  les are: ".     
+00050e60: 2020 2022 2861 2920 7468 6520 6d65 7468     "(a) the meth
+00050e70: 6f64 2c20 6120 7374 7269 6e67 206f 6620  od, a string of 
+00050e80: 4745 542c 2050 4f53 542c 2050 5554 2c20  GET, POST, PUT, 
+00050e90: 4445 4c45 5445 2c20 6f72 204f 5054 494f  DELETE, or OPTIO
+00050ea0: 4e53 2e20 220a 2020 2020 2020 2020 2228  NS. ".        "(
+00050eb0: 6229 2061 2073 7472 696e 6720 636f 6e74  b) a string cont
+00050ec0: 6169 6e69 6e67 2074 6865 2064 6174 6120  aining the data 
+00050ed0: 2869 6620 616e 7929 2069 6e20 4a53 4f4e  (if any) in JSON
+00050ee0: 2066 6f72 6d61 742e 2022 0a20 2020 2020   format. ".     
+00050ef0: 2020 2022 2863 2920 6120 7374 7269 6e67     "(c) a string
+00050f00: 2063 6f6e 7461 696e 696e 6720 7468 6520   containing the 
+00050f10: 5552 4c2e 2041 6c6c 2073 7472 696e 6773  URL. All strings
+00050f20: 206d 7573 7420 6265 2055 5446 2d38 2e20   must be UTF-8. 
+00050f30: 220a 2020 2020 2020 2020 2254 6865 7265  ".        "There
+00050f40: 2061 7265 2061 2066 6577 2070 6c61 6365   are a few place
+00050f50: 686f 6c64 6572 732e 2054 6865 7920 6172  holders. They ar
+00050f60: 653a 2022 0a20 2020 2020 2020 2022 5f5f  e: ".        "__
+00050f70: 686f 6d65 7365 7276 6572 5f5f 2028 6c69  homeserver__ (li
+00050f80: 6b65 2068 7474 7073 3a2f 2f6d 6174 7269  ke https://matri
+00050f90: 782e 6578 616d 706c 652e 6f72 6729 2c20  x.example.org), 
+00050fa0: 220a 2020 2020 2020 2020 225f 5f68 6f73  ".        "__hos
+00050fb0: 746e 616d 655f 5f20 286c 696b 6520 6d61  tname__ (like ma
+00050fc0: 7472 6978 2e65 7861 6d70 6c65 2e6f 7267  trix.example.org
+00050fd0: 292c 2022 0a20 2020 2020 2020 2022 5f5f  ), ".        "__
+00050fe0: 6163 6365 7373 5f74 6f6b 656e 5f5f 2c20  access_token__, 
+00050ff0: 5f5f 7573 6572 5f69 645f 5f20 286c 696b  __user_id__ (lik
+00051000: 6520 406d 633a 6d61 7472 6978 2e65 7861  e @mc:matrix.exa
+00051010: 6d70 6c65 2e63 6f6d 292c 2022 0a20 2020  mple.com), ".   
+00051020: 2020 2020 2022 5f5f 6465 7669 6365 5f69       "__device_i
+00051030: 645f 5f2c 2061 6e64 205f 5f72 6f6f 6d5f  d__, and __room_
+00051040: 6964 5f5f 2e20 4966 2061 2070 6c61 6365  id__. If a place
+00051050: 686f 6c64 6572 2069 7320 666f 756e 6420  holder is found 
+00051060: 6974 2069 7320 220a 2020 2020 2020 2020  it is ".        
+00051070: 2272 6570 6c61 6365 6420 7769 7468 2074  "replaced with t
+00051080: 6865 2076 616c 7565 2066 726f 6d20 7468  he value from th
+00051090: 6520 6c6f 6361 6c20 6372 6564 656e 7469  e local credenti
+000510a0: 616c 7320 6669 6c65 2e20 220a 2020 2020  als file. ".    
+000510b0: 2020 2020 2241 6e20 6578 616d 706c 6520      "An example 
+000510c0: 776f 756c 6420 6265 3a20 220a 2020 2020  would be: ".    
+000510d0: 2020 2020 222d 2d72 6573 7420 2747 4554      "--rest 'GET
+000510e0: 2720 2727 2027 5f5f 686f 6d65 7365 7276  ' '' '__homeserv
+000510f0: 6572 5f5f 2f5f 6d61 7472 6978 2f63 6c69  er__/_matrix/cli
+00051100: 656e 742f 7665 7273 696f 6e73 272e 2022  ent/versions'. "
+00051110: 0a20 2020 2020 2020 2022 4966 2074 6865  .        "If the
+00051120: 7265 2069 7320 6e6f 2064 6174 612c 2069  re is no data, i
+00051130: 2e65 2e20 6461 7461 2028 6229 2069 7320  .e. data (b) is 
+00051140: 656d 7074 792c 2074 6865 6e20 7573 6520  empty, then use 
+00051150: 2727 2066 6f72 2069 742e 2022 0a20 2020  '' for it. ".   
+00051160: 2020 2020 2022 4f70 7469 6f6e 616c 6c79       "Optionally
+00051170: 2c20 2d2d 6163 6365 7373 2d74 6f6b 656e  , --access-token
+00051180: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+00051190: 6f76 6572 7772 6974 6520 7468 6520 220a  overwrite the ".
+000511a0: 2020 2020 2020 2020 2261 6363 6573 7320          "access 
+000511b0: 746f 6b65 6e20 6672 6f6d 2063 7265 6465  token from crede
+000511c0: 6e74 6961 6c73 2028 6966 206e 6565 6465  ntials (if neede
+000511d0: 6429 2e20 220a 2020 2020 2020 2020 2253  d). ".        "S
+000511e0: 6565 2074 6573 7473 2f74 6573 742d 7265  ee tests/test-re
+000511f0: 7374 2e73 6820 666f 7220 616e 2065 7861  st.sh for an exa
+00051200: 6d70 6c65 2e22 2c0a 2020 2020 290a 2020  mple.",.    ).  
+00051210: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+00051220: 7428 0a20 2020 2020 2020 2022 2d2d 7365  t(.        "--se
+00051230: 742d 6176 6174 6172 222c 0a20 2020 2020  t-avatar",.     
+00051240: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+00051250: 652c 0a20 2020 2020 2020 2074 7970 653d  e,.        type=
+00051260: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
+00051270: 6176 6172 3d22 4156 4154 4152 5f4d 5843  avar="AVATAR_MXC
+00051280: 5f55 5249 222c 0a20 2020 2020 2020 2023  _URI",.        #
+00051290: 2064 6566 6175 6c74 7320 746f 204e 6f6e   defaults to Non
+000512a0: 6520 6966 206e 6f74 2075 7365 642c 2069  e if not used, i
+000512b0: 7320 7374 7220 6966 2075 7365 640a 2020  s str if used.  
+000512c0: 2020 2020 2020 6865 6c70 3d22 5365 7420        help="Set 
+000512d0: 796f 7572 2061 7661 7461 722e 2022 0a20  your avatar. ". 
+000512e0: 2020 2020 2020 2066 2244 6574 6169 6c73         f"Details
+000512f0: 3a3a 2053 6574 2074 6865 2061 7661 7461  :: Set the avata
+00051300: 7220 4d58 4320 7265 736f 7572 6365 2075  r MXC resource u
+00051310: 7365 6420 6279 207b 5052 4f47 5f57 4954  sed by {PROG_WIT
+00051320: 484f 5554 5f45 5854 7d2e 2022 0a20 2020  HOUT_EXT}. ".   
+00051330: 2020 2020 2022 5072 6f76 6964 6520 6f6e       "Provide on
+00051340: 6520 4d58 4320 5552 4920 7468 6174 206c  e MXC URI that l
+00051350: 6f6f 6b73 206c 696b 6520 7468 6973 2022  ooks like this "
+00051360: 0a20 2020 2020 2020 2022 276d 7863 3a2f  .        "'mxc:/
+00051370: 2f65 7861 6d70 6c65 2e63 6f6d 2f53 6f6d  /example.com/Som
+00051380: 6553 7472 616e 6765 5572 694b 6579 272e  eStrangeUriKey'.
+00051390: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
+000513a0: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
+000513b0: 2020 2020 2020 222d 2d67 6574 2d61 7661        "--get-ava
+000513c0: 7461 7222 2c0a 2020 2020 2020 2020 7265  tar",.        re
+000513d0: 7175 6972 6564 3d46 616c 7365 2c0a 2020  quired=False,.  
+000513e0: 2020 2020 2020 6163 7469 6f6e 3d22 6578        action="ex
+000513f0: 7465 6e64 222c 0a20 2020 2020 2020 206e  tend",.        n
+00051400: 6172 6773 3d22 2a22 2c20 2023 204e 6f6e  args="*",  # Non
+00051410: 6520 6966 206e 6f74 2075 7365 642c 205b  e if not used, [
+00051420: 5d20 6973 2075 7365 6420 7769 7468 6f75  ] is used withou
+00051430: 7420 6578 7472 6120 6172 6773 0a20 2020  t extra args.   
+00051440: 2020 2020 2074 7970 653d 7374 722c 0a20       type=str,. 
+00051450: 2020 2020 2020 206d 6574 6176 6172 3d22         metavar="
+00051460: 5553 4552 222c 0a20 2020 2020 2020 2068  USER",.        h
+00051470: 656c 703d 2247 6574 2061 6e20 6176 6174  elp="Get an avat
+00051480: 6172 2e20 220a 2020 2020 2020 2020 6622  ar. ".        f"
+00051490: 4465 7461 696c 733a 3a20 4765 7420 7468  Details:: Get th
+000514a0: 6520 6176 6174 6172 204d 5843 2072 6573  e avatar MXC res
+000514b0: 6f75 7263 6520 7573 6564 2062 7920 7b50  ource used by {P
+000514c0: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
+000514d0: 2c20 220a 2020 2020 2020 2020 226f 7220  , ".        "or 
+000514e0: 6f6e 6520 6f72 206d 756c 7469 706c 6520  one or multiple 
+000514f0: 6f74 6865 7220 7573 6572 732e 2053 7065  other users. Spe
+00051500: 6369 6679 207a 6572 6f20 6f72 206d 6f72  cify zero or mor
+00051510: 6520 7573 6572 2069 6473 2e20 220a 2020  e user ids. ".  
+00051520: 2020 2020 2020 6622 4966 206e 6f20 7573        f"If no us
+00051530: 6572 2069 6420 6973 2073 7065 6369 6669  er id is specifi
+00051540: 6564 2c20 7468 6520 6176 6174 6172 206f  ed, the avatar o
+00051550: 6620 7b50 524f 475f 5749 5448 4f55 545f  f {PROG_WITHOUT_
+00051560: 4558 547d 2077 696c 6c20 220a 2020 2020  EXT} will ".    
+00051570: 2020 2020 2262 6520 6665 7463 6865 642e      "be fetched.
+00051580: 2049 6620 6f6e 6520 6f72 206d 6f72 6520   If one or more 
+00051590: 7573 6572 2069 6473 2061 7265 2067 6976  user ids are giv
+000515a0: 656e 2c20 7468 6520 6176 6174 6172 7320  en, the avatars 
+000515b0: 6f66 2022 0a20 2020 2020 2020 2022 7468  of ".        "th
+000515c0: 6573 6520 7573 6572 7320 7769 6c6c 2062  ese users will b
+000515d0: 6520 6665 7463 6865 642e 2041 7320 7265  e fetched. As re
+000515e0: 7370 6f6e 7365 2062 6f74 6820 4d58 4320  sponse both MXC 
+000515f0: 5552 4920 6173 2077 656c 6c20 6173 2055  URI as well as U
+00051600: 524c 2022 0a20 2020 2020 2020 2022 7769  RL ".        "wi
+00051610: 6c6c 2062 6520 7072 696e 7465 642e 222c  ll be printed.",
+00051620: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
+00051630: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+00051640: 2020 2020 222d 2d67 6574 2d70 726f 6669      "--get-profi
+00051650: 6c65 222c 0a20 2020 2020 2020 2072 6571  le",.        req
+00051660: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
+00051670: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
+00051680: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
+00051690: 7267 733d 222a 222c 2020 2320 4e6f 6e65  rgs="*",  # None
+000516a0: 2069 6620 6e6f 7420 7573 6564 2c20 5b5d   if not used, []
+000516b0: 2069 7320 7573 6564 2077 6974 686f 7574   is used without
+000516c0: 2065 7874 7261 2061 7267 730a 2020 2020   extra args.    
+000516d0: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
+000516e0: 2020 2020 2020 6d65 7461 7661 723d 2255        metavar="U
+000516f0: 5345 5222 2c0a 2020 2020 2020 2020 6865  SER",.        he
+00051700: 6c70 3d22 4765 7420 6120 7573 6572 2070  lp="Get a user p
+00051710: 726f 6669 6c65 2e20 220a 2020 2020 2020  rofile. ".      
+00051720: 2020 6622 4465 7461 696c 733a 3a20 4765    f"Details:: Ge
+00051730: 7420 7468 6520 7573 6572 2070 726f 6669  t the user profi
+00051740: 6c65 2075 7365 6420 6279 207b 5052 4f47  le used by {PROG
+00051750: 5f57 4954 484f 5554 5f45 5854 7d2c 206f  _WITHOUT_EXT}, o
+00051760: 7220 220a 2020 2020 2020 2020 226f 6e65  r ".        "one
+00051770: 206f 7220 6d75 6c74 6970 6c65 206f 7468   or multiple oth
+00051780: 6572 2075 7365 7273 2e20 5370 6563 6966  er users. Specif
+00051790: 7920 7a65 726f 206f 7220 6d6f 7265 2075  y zero or more u
+000517a0: 7365 7220 6964 732e 2022 0a20 2020 2020  ser ids. ".     
+000517b0: 2020 2066 2249 6620 6e6f 2075 7365 7220     f"If no user 
+000517c0: 6964 2069 7320 7370 6563 6966 6965 642c  id is specified,
+000517d0: 2074 6865 2075 7365 7220 7072 6f66 696c   the user profil
+000517e0: 6520 6f66 207b 5052 4f47 5f57 4954 484f  e of {PROG_WITHO
+000517f0: 5554 5f45 5854 7d20 220a 2020 2020 2020  UT_EXT} ".      
+00051800: 2020 2277 696c 6c20 6265 2066 6574 6368    "will be fetch
+00051810: 6564 2e20 4966 206f 6e65 206f 7220 6d6f  ed. If one or mo
+00051820: 7265 2075 7365 7220 6964 7320 6172 6520  re user ids are 
+00051830: 6769 7665 6e2c 2074 6865 2075 7365 7220  given, the user 
+00051840: 220a 2020 2020 2020 2020 2270 726f 6669  ".        "profi
+00051850: 6c65 7320 6f66 2074 6865 7365 2075 7365  les of these use
+00051860: 7273 2077 696c 6c20 6265 2066 6574 6368  rs will be fetch
+00051870: 6564 2e20 4173 2072 6573 706f 6e73 6520  ed. As response 
+00051880: 220a 2020 2020 2020 2020 2264 6973 706c  ".        "displ
+00051890: 6179 206e 616d 6520 616e 6420 6176 6174  ay name and avat
+000518a0: 6172 204d 5843 2055 5249 2061 7320 7765  ar MXC URI as we
+000518b0: 6c6c 2061 7320 706f 7373 6962 6c65 2061  ll as possible a
+000518c0: 6464 6974 696f 6e61 6c20 220a 2020 2020  dditional ".    
+000518d0: 2020 2020 2270 726f 6669 6c65 2069 6e66      "profile inf
+000518e0: 6f72 6d61 7469 6f6e 2028 6966 2070 7265  ormation (if pre
+000518f0: 7365 6e74 2920 220a 2020 2020 2020 2020  sent) ".        
+00051900: 2277 696c 6c20 6265 2070 7269 6e74 6564  "will be printed
+00051910: 2e20 4f6e 6520 6c69 6e65 2070 6572 2075  . One line per u
+00051920: 7365 7220 7769 6c6c 2062 6520 7072 696e  ser will be prin
+00051930: 7465 642e 222c 0a20 2020 2029 0a20 2020  ted.",.    ).   
+00051940: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+00051950: 280a 2020 2020 2020 2020 222d 2d67 6574  (.        "--get
+00051960: 2d72 6f6f 6d2d 696e 666f 222c 0a20 2020  -room-info",.   
+00051970: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+00051980: 6c73 652c 0a20 2020 2020 2020 2061 6374  lse,.        act
+00051990: 696f 6e3d 2265 7874 656e 6422 2c0a 2020  ion="extend",.  
+000519a0: 2020 2020 2020 6e61 7267 733d 222a 222c        nargs="*",
+000519b0: 2020 2320 4e6f 6e65 2069 6620 6e6f 7420    # None if not 
+000519c0: 7573 6564 2c20 5b5d 2069 7320 7573 6564  used, [] is used
+000519d0: 2077 6974 686f 7574 2065 7874 7261 2061   without extra a
+000519e0: 7267 730a 2020 2020 2020 2020 7479 7065  rgs.        type
+000519f0: 3d73 7472 2c0a 2020 2020 2020 2020 6d65  =str,.        me
+00051a00: 7461 7661 723d 2252 4f4f 4d22 2c0a 2020  tavar="ROOM",.  
+00051a10: 2020 2020 2020 6865 6c70 3d22 4765 7420        help="Get 
+00051a20: 7468 6520 726f 6f6d 2069 6e66 6f72 6d61  the room informa
+00051a30: 7469 6f6e 2e20 220a 2020 2020 2020 2020  tion. ".        
+00051a40: 2244 6574 6169 6c73 3a3a 2047 6574 2074  "Details:: Get t
+00051a50: 6865 2072 6f6f 6d20 696e 666f 726d 6174  he room informat
+00051a60: 696f 6e20 7375 6368 2061 7320 726f 6f6d  ion such as room
+00051a70: 2064 6973 706c 6179 206e 616d 652c 2022   display name, "
+00051a80: 0a20 2020 2020 2020 2022 726f 6f6d 2061  .        "room a
+00051a90: 6c69 6173 2c20 726f 6f6d 2063 7265 6174  lias, room creat
+00051aa0: 6f72 2c20 6574 632e 2066 6f72 2022 0a20  or, etc. for ". 
+00051ab0: 2020 2020 2020 2022 6f6e 6520 6f72 206d         "one or m
+00051ac0: 756c 7469 706c 6520 7370 6563 6966 6965  ultiple specifie
+00051ad0: 6420 726f 6f6d 732e 2054 6865 2069 6e63  d rooms. The inc
+00051ae0: 6c75 6465 6420 726f 6f6d 2027 6469 7370  luded room 'disp
+00051af0: 6c61 7920 6e61 6d65 2720 6973 2022 0a20  lay name' is ". 
+00051b00: 2020 2020 2020 2022 616c 736f 2072 6566         "also ref
+00051b10: 6572 7265 6420 746f 2061 7320 2772 6f6f  erred to as 'roo
+00051b20: 6d20 6e61 6d65 2720 6f72 2069 6e63 6f72  m name' or incor
+00051b30: 7265 6374 6c79 2065 7665 6e20 6173 2072  rectly even as r
+00051b40: 6f6f 6d20 7469 746c 652e 2022 0a20 2020  oom title. ".   
+00051b50: 2020 2020 2022 4966 206f 6e65 206f 7220       "If one or 
+00051b60: 6d6f 7265 2072 6f6f 6d20 6172 6520 6769  more room are gi
+00051b70: 7665 6e2c 2074 6865 2072 6f6f 6d20 220a  ven, the room ".
+00051b80: 2020 2020 2020 2020 2269 6e66 6f72 6d61          "informa
+00051b90: 7469 6f6e 7320 6f66 2074 6865 7365 2072  tions of these r
+00051ba0: 6f6f 6d73 2077 696c 6c20 6265 2066 6574  ooms will be fet
+00051bb0: 6368 6564 2e20 220a 2020 2020 2020 2020  ched. ".        
+00051bc0: 2249 6620 6e6f 2072 6f6f 6d20 6973 2073  "If no room is s
+00051bd0: 7065 6369 6669 6564 2c20 7468 6520 726f  pecified, the ro
+00051be0: 6f6d 2069 6e66 6f72 6d61 7469 6f6e 2066  om information f
+00051bf0: 6f72 2074 6865 2022 0a20 2020 2020 2020  or the ".       
+00051c00: 2066 2264 6566 6175 6c74 2072 6f6f 6d20   f"default room 
+00051c10: 636f 6e66 6967 7572 6564 2066 6f72 207b  configured for {
+00051c20: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+00051c30: 7d20 6973 2066 6574 6368 6564 2e20 220a  } is fetched. ".
+00051c40: 2020 2020 2020 2020 2252 6f6f 6d73 2063          "Rooms c
+00051c50: 616e 2062 6520 6769 7665 6e20 7669 6120  an be given via 
+00051c60: 220a 2020 2020 2020 2020 2272 6f6f 6d20  ".        "room 
+00051c70: 6964 2028 652e 672e 2027 5c5c 2153 6f6d  id (e.g. '\\!Som
+00051c80: 6552 6f6f 6d49 643a 6d61 7472 6978 2e65  eRoomId:matrix.e
+00051c90: 7861 6d70 6c65 2e63 6f6d 2729 2c20 220a  xample.com'), ".
+00051ca0: 2020 2020 2020 2020 2263 616e 6f6e 6963          "canonic
+00051cb0: 616c 2028 6675 6c6c 2920 726f 6f6d 2061  al (full) room a
+00051cc0: 6c69 6173 2022 0a20 2020 2020 2020 2022  lias ".        "
+00051cd0: 2865 2e67 2e20 2723 536f 6d65 526f 6f6d  (e.g. '#SomeRoom
+00051ce0: 416c 6961 733a 6d61 7472 6978 2e65 7861  Alias:matrix.exa
+00051cf0: 6d70 6c65 2e63 6f6d 2729 2c20 220a 2020  mple.com'), ".  
+00051d00: 2020 2020 2020 226f 7220 7368 6f72 7420        "or short 
+00051d10: 616c 6961 7320 2865 2e67 2e20 2753 6f6d  alias (e.g. 'Som
+00051d20: 6552 6f6f 6d41 6c69 6173 2720 6f72 2027  eRoomAlias' or '
+00051d30: 2353 6f6d 6552 6f6f 6d41 6c69 6173 2729  #SomeRoomAlias')
+00051d40: 2e20 220a 2020 2020 2020 2020 2241 7320  . ".        "As 
+00051d50: 7265 7370 6f6e 7365 2022 0a20 2020 2020  response ".     
+00051d60: 2020 2022 726f 6f6d 2069 642c 2072 6f6f     "room id, roo
+00051d70: 6d20 6469 7370 6c61 7920 6e61 6d65 2c20  m display name, 
+00051d80: 726f 6f6d 2063 616e 6f6e 6963 616c 2061  room canonical a
+00051d90: 6c69 6173 2c20 726f 6f6d 2074 6f70 6963  lias, room topic
+00051da0: 2c20 220a 2020 2020 2020 2020 2272 6f6f  , ".        "roo
+00051db0: 6d20 6372 6561 746f 722c 2061 6e64 2072  m creator, and r
+00051dc0: 6f6f 6d20 656e 6372 7970 7469 6f6e 2022  oom encryption "
+00051dd0: 0a20 2020 2020 2020 2022 6172 6520 7072  .        "are pr
+00051de0: 696e 7465 642e 204f 6e65 206c 696e 6520  inted. One line 
+00051df0: 7065 7220 726f 6f6d 2077 696c 6c20 6265  per room will be
+00051e00: 2070 7269 6e74 6564 2e20 220a 2020 2020   printed. ".    
+00051e10: 2020 2020 2253 696e 6365 2065 6974 6865      "Since eithe
+00051e20: 7220 726f 6f6d 2069 6420 6f72 2072 6f6f  r room id or roo
+00051e30: 6d20 616c 6961 7320 6172 6520 6163 6365  m alias are acce
+00051e40: 7074 6564 2061 7320 696e 7075 7420 616e  pted as input an
+00051e50: 6420 626f 7468 2022 0a20 2020 2020 2020  d both ".       
+00051e60: 2022 726f 6f6d 2069 6420 616e 6420 726f   "room id and ro
+00051e70: 6f6d 2061 6c69 6173 2061 7265 2067 6976  om alias are giv
+00051e80: 656e 2061 7320 6f75 7470 7574 2c20 6f6e  en as output, on
+00051e90: 6520 6361 6e20 6865 6e63 6520 7573 6520  e can hence use 
+00051ea0: 7468 6973 2022 0a20 2020 2020 2020 2022  this ".        "
+00051eb0: 6f70 7469 6f6e 2074 6f20 6d61 7020 6672  option to map fr
+00051ec0: 6f6d 2072 6f6f 6d20 6964 2074 6f20 726f  om room id to ro
+00051ed0: 6f6d 2061 6c69 6173 2022 0a20 2020 2020  om alias ".     
+00051ee0: 2020 2022 6173 2077 656c 6c20 6173 2076     "as well as v
+00051ef0: 6963 6520 7665 7273 6120 6672 6f6d 2072  ice versa from r
+00051f00: 6f6f 6d20 616c 6961 7320 746f 2072 6f6f  oom alias to roo
+00051f10: 6d20 6964 2e20 220a 2020 2020 2020 2020  m id. ".        
+00051f20: 2244 6f20 6e6f 7420 636f 6e66 7573 6520  "Do not confuse 
+00051f30: 7468 6973 206f 7074 696f 6e20 7769 7468  this option with
+00051f40: 2074 6865 206f 7074 696f 6e73 2027 2d2d   the options '--
+00051f50: 6765 742d 6469 7370 6c61 792d 6e61 6d65  get-display-name
+00051f60: 2720 220a 2020 2020 2020 2020 2261 6e64  ' ".        "and
+00051f70: 2027 2d2d 7365 742d 6469 7370 6c61 792d   '--set-display-
+00051f80: 6e61 6d65 272c 2077 6869 6368 2067 6574  name', which get
+00051f90: 2f73 6574 2074 6865 2075 7365 7220 6469  /set the user di
+00051fa0: 7370 6c61 7920 6e61 6d65 2c20 6e6f 7420  splay name, not 
+00051fb0: 220a 2020 2020 2020 2020 2274 6865 2072  ".        "the r
+00051fc0: 6f6f 6d20 6469 7370 6c61 7920 6e61 6d65  oom display name
+00051fd0: 2e22 2c0a 2020 2020 290a 2020 2020 6170  .",.    ).    ap
+00051fe0: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
+00051ff0: 2020 2020 2020 2022 2d2d 6765 742d 636c         "--get-cl
+00052000: 6965 6e74 2d69 6e66 6f22 2c0a 2020 2020  ient-info",.    
+00052010: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+00052020: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
+00052030: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
+00052040: 0a20 2020 2020 2020 2068 656c 703d 2250  .        help="P
+00052050: 7269 6e74 2063 6c69 656e 7420 696e 666f  rint client info
+00052060: 726d 6174 696f 6e2e 2022 0a20 2020 2020  rmation. ".     
+00052070: 2020 2022 4465 7461 696c 733a 3a20 5072     "Details:: Pr
+00052080: 696e 7420 696e 666f 726d 6174 696f 6e20  int information 
+00052090: 6b65 7074 2069 6e20 7468 6520 636c 6965  kept in the clie
+000520a0: 6e74 2c20 692e 652e 2022 0a20 2020 2020  nt, i.e. ".     
+000520b0: 2020 2066 227b 5052 4f47 5f57 4954 484f     f"{PROG_WITHO
+000520c0: 5554 5f45 5854 7d2e 2022 0a20 2020 2020  UT_EXT}. ".     
+000520d0: 2020 2022 4f75 7470 7574 2069 7320 7072     "Output is pr
+000520e0: 696e 7465 6420 696e 204a 534f 4e20 666f  inted in JSON fo
+000520f0: 726d 6174 2e22 2c0a 2020 2020 290a 2020  rmat.",.    ).  
+00052100: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+00052110: 7428 0a20 2020 2020 2020 2022 2d2d 6861  t(.        "--ha
+00052120: 732d 7065 726d 6973 7369 6f6e 222c 0a20  s-permission",. 
+00052130: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+00052140: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+00052150: 6374 696f 6e3d 2265 7874 656e 6422 2c0a  ction="extend",.
+00052160: 2020 2020 2020 2020 6e61 7267 733d 222b          nargs="+
+00052170: 222c 0a20 2020 2020 2020 2074 7970 653d  ",.        type=
+00052180: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
+00052190: 6176 6172 3d22 524f 4f4d 2042 414e 7c49  avar="ROOM BAN|I
+000521a0: 4e56 4954 457c 4b49 434b 7c4e 4f54 4946  NVITE|KICK|NOTIF
+000521b0: 4943 4154 494f 4e53 7c52 4544 4143 547c  ICATIONS|REDACT|
+000521c0: 6574 6322 2c0a 2020 2020 2020 2020 6865  etc",.        he
+000521d0: 6c70 3d22 496e 7175 6972 6520 6162 6f75  lp="Inquire abou
+000521e0: 7420 7065 726d 6973 7369 6f6e 732e 2022  t permissions. "
+000521f0: 0a20 2020 2020 2020 2066 2244 6574 6169  .        f"Detai
+00052200: 6c73 3a3a 2049 6e71 7569 7265 2069 6620  ls:: Inquire if 
+00052210: 7573 6572 2075 7365 6420 6279 207b 5052  user used by {PR
+00052220: 4f47 5f57 4954 484f 5554 5f45 5854 7d20  OG_WITHOUT_EXT} 
+00052230: 6861 7320 220a 2020 2020 2020 2020 2270  has ".        "p
+00052240: 6572 6d69 7373 696f 6e20 666f 7220 6f6e  ermission for on
+00052250: 6520 6f72 206d 756c 7469 706c 6520 6163  e or multiple ac
+00052260: 7469 6f6e 7320 696e 206f 6e65 206f 7220  tions in one or 
+00052270: 6d75 6c74 6970 6c65 2072 6f6f 6d73 2e20  multiple rooms. 
+00052280: 220a 2020 2020 2020 2020 2245 6163 6820  ".        "Each 
+00052290: 696e 7175 6972 7920 7265 7175 6972 6573  inquiry requires
+000522a0: 2032 2070 6172 616d 6574 6572 733a 2074   2 parameters: t
+000522b0: 6865 2072 6f6f 6d20 6964 2061 6e64 2074  he room id and t
+000522c0: 6865 2070 6572 6d69 7373 696f 6e20 220a  he permission ".
+000522d0: 2020 2020 2020 2020 2274 7970 652e 204f          "type. O
+000522e0: 6e65 206f 7220 6d75 6c74 6970 6c65 206f  ne or multiple o
+000522f0: 6620 7468 6573 6520 7061 7261 6d65 7465  f these paramete
+00052300: 7220 7061 6972 7320 6d61 7920 6265 2073  r pairs may be s
+00052310: 7065 6369 6669 6564 2e20 220a 2020 2020  pecified. ".    
+00052320: 2020 2020 2246 6f72 2065 6163 6820 7061      "For each pa
+00052330: 7261 6d65 7465 7220 7061 6972 2074 6865  rameter pair the
+00052340: 7265 2077 696c 6c20 6265 206f 6e65 206c  re will be one l
+00052350: 696e 6520 7072 696e 7465 6420 746f 2073  ine printed to s
+00052360: 7464 6f75 742e 2022 0a20 2020 2020 2020  tdout. ".       
+00052370: 2022 5661 6c75 6573 2066 6f72 2074 6865   "Values for the
+00052380: 2070 6572 6d69 7373 696f 6e20 7479 7065   permission type
+00052390: 2061 7265 2027 6261 6e27 2c20 220a 2020   are 'ban', ".  
+000523a0: 2020 2020 2020 2227 696e 7669 7465 272c        "'invite',
+000523b0: 2027 6b69 636b 272c 2027 6e6f 7469 6669   'kick', 'notifi
+000523c0: 6361 7469 6f6e 7327 2c20 2772 6564 6163  cations', 'redac
+000523d0: 7427 2c20 6574 632e 2022 0a20 2020 2020  t', etc. ".     
+000523e0: 2020 2022 5365 6520 6874 7470 733a 2f2f     "See https://
+000523f0: 7370 6563 2e6d 6174 7269 782e 6f72 672f  spec.matrix.org/
+00052400: 7631 2e32 2f63 6c69 656e 742d 7365 7276  v1.2/client-serv
+00052410: 6572 2d61 7069 2f23 6d72 6f6f 6d70 6f77  er-api/#mroompow
+00052420: 6572 5f6c 6576 656c 7322 0a20 2020 2020  er_levels".     
+00052430: 2020 2022 2e22 2c0a 2020 2020 2020 2020     ".",.        
+00052440: 2320 2765 7665 6e74 7327 2c20 2765 7665  # 'events', 'eve
+00052450: 6e74 735f 6465 6661 756c 7427 2c20 2773  nts_default', 's
+00052460: 7461 7465 5f64 6566 6175 6c74 273a 2076  tate_default': v
+00052470: 616c 6964 2070 6572 6d69 7373 696f 6e20  alid permission 
+00052480: 7479 7065 733f 0a20 2020 2029 0a20 2020  types?.    ).   
+00052490: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+000524a0: 280a 2020 2020 2020 2020 222d 2d69 6d70  (.        "--imp
+000524b0: 6f72 742d 6b65 7973 222c 0a20 2020 2020  ort-keys",.     
+000524c0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+000524d0: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
+000524e0: 6e3d 2265 7874 656e 6422 2c0a 2020 2020  n="extend",.    
+000524f0: 2020 2020 6e61 7267 733d 322c 2020 2320      nargs=2,  # 
+00052500: 6669 6c65 6e61 6d65 2066 6f72 2069 6d70  filename for imp
+00052510: 6f72 742c 2070 6173 7370 6872 6173 650a  ort, passphrase.
+00052520: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
+00052530: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
+00052540: 723d 2246 494c 4520 5041 5353 5048 5241  r="FILE PASSPHRA
+00052550: 5345 222c 0a20 2020 2020 2020 2068 656c  SE",.        hel
+00052560: 703d 2249 6d70 6f72 7420 4d65 676f 6c6d  p="Import Megolm
+00052570: 2064 6563 7279 7074 696f 6e20 6b65 7973   decryption keys
+00052580: 2066 726f 6d20 6120 6669 6c65 2e20 220a   from a file. ".
+00052590: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+000525a0: 3a3a 2054 6869 7320 6973 2061 6e20 6f70  :: This is an op
+000525b0: 7469 6f6e 616c 2061 7267 756d 656e 742e  tional argument.
+000525c0: 2049 6620 7573 6564 2069 7420 6d75 7374   If used it must
+000525d0: 2062 6520 666f 6c6c 6f77 6564 2022 0a20   be followed ". 
+000525e0: 2020 2020 2020 2022 6279 2074 776f 2076         "by two v
+000525f0: 616c 7565 732e 2028 6129 2061 2066 696c  alues. (a) a fil
+00052600: 6520 6e61 6d65 2066 726f 6d20 7768 6963  e name from whic
+00052610: 6820 7468 6520 6b65 7973 2077 696c 6c20  h the keys will 
+00052620: 6265 2072 6561 642e 2022 0a20 2020 2020  be read. ".     
+00052630: 2020 2022 2862 2920 6120 7061 7373 7068     "(b) a passph
+00052640: 7261 7365 2077 6974 6820 7768 6963 6820  rase with which 
+00052650: 7468 6520 6669 6c65 2063 616e 2062 6520  the file can be 
+00052660: 6465 6372 7970 7465 6420 7769 7468 2e20  decrypted with. 
+00052670: 220a 2020 2020 2020 2020 2254 6865 206b  ".        "The k
+00052680: 6579 7320 7769 6c6c 2062 6520 6164 6465  eys will be adde
+00052690: 6420 746f 2074 6865 2063 7572 7265 6e74  d to the current
+000526a0: 2069 6e73 7461 6e63 6520 6173 2077 656c   instance as wel
+000526b0: 6c20 6173 2022 0a20 2020 2020 2020 2022  l as ".        "
+000526c0: 7772 6974 7465 6e20 746f 2074 6865 2064  written to the d
+000526d0: 6174 6162 6173 652e 2053 6565 2061 6c73  atabase. See als
+000526e0: 6f20 2d2d 6578 706f 7274 2d6b 6579 732e  o --export-keys.
+000526f0: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
+00052700: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
+00052710: 2020 2020 2020 222d 2d65 7870 6f72 742d        "--export-
+00052720: 6b65 7973 222c 0a20 2020 2020 2020 2072  keys",.        r
+00052730: 6571 7569 7265 643d 4661 6c73 652c 0a20  equired=False,. 
+00052740: 2020 2020 2020 2061 6374 696f 6e3d 2265         action="e
+00052750: 7874 656e 6422 2c0a 2020 2020 2020 2020  xtend",.        
+00052760: 6e61 7267 733d 322c 2020 2320 6669 6c65  nargs=2,  # file
+00052770: 6e61 6d65 2066 6f72 2065 7870 6f72 742c  name for export,
+00052780: 2070 6173 7370 6872 6173 650a 2020 2020   passphrase.    
+00052790: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
+000527a0: 2020 2020 2020 6d65 7461 7661 723d 2246        metavar="F
+000527b0: 494c 4520 5041 5353 5048 5241 5345 222c  ILE PASSPHRASE",
+000527c0: 0a20 2020 2020 2020 2068 656c 703d 2245  .        help="E
+000527d0: 7870 6f72 7420 616c 6c20 7468 6520 4d65  xport all the Me
+000527e0: 676f 6c6d 2064 6563 7279 7074 696f 6e20  golm decryption 
+000527f0: 6b65 7973 206f 6620 7468 6973 2064 6576  keys of this dev
+00052800: 6963 652e 2022 0a20 2020 2020 2020 2022  ice. ".        "
+00052810: 4465 7461 696c 733a 3a20 5468 6973 2069  Details:: This i
+00052820: 7320 616e 206f 7074 696f 6e61 6c20 6172  s an optional ar
+00052830: 6775 6d65 6e74 2e20 4966 2075 7365 6420  gument. If used 
+00052840: 6974 206d 7573 7420 6265 2066 6f6c 6c6f  it must be follo
+00052850: 7765 6420 220a 2020 2020 2020 2020 2262  wed ".        "b
+00052860: 7920 7477 6f20 7661 6c75 6573 2e20 2861  y two values. (a
+00052870: 2920 6120 6669 6c65 206e 616d 6520 746f  ) a file name to
+00052880: 2077 6869 6368 2074 6865 206b 6579 7320   which the keys 
+00052890: 7769 6c6c 2062 6520 7772 6974 7465 6e20  will be written 
+000528a0: 746f 2e20 220a 2020 2020 2020 2020 2228  to. ".        "(
+000528b0: 6229 2061 2070 6173 7370 6872 6173 6520  b) a passphrase 
+000528c0: 7769 7468 2077 6869 6368 2074 6865 2066  with which the f
+000528d0: 696c 6520 7769 6c6c 2062 6520 656e 6372  ile will be encr
+000528e0: 7970 7465 6420 7769 7468 2e20 220a 2020  ypted with. ".  
+000528f0: 2020 2020 2020 224e 6f74 6520 7468 6174        "Note that
+00052900: 2074 6869 7320 646f 6573 206e 6f74 2073   this does not s
+00052910: 6176 6520 6f74 6865 7220 696e 666f 726d  ave other inform
+00052920: 6174 696f 6e20 7375 6368 2061 7320 7468  ation such as th
+00052930: 6520 7072 6976 6174 6520 220a 2020 2020  e private ".    
+00052940: 2020 2020 2269 6465 6e74 6974 7920 6b65      "identity ke
+00052950: 7973 206f 6620 7468 6520 6465 7669 6365  ys of the device
+00052960: 2e22 2c0a 2020 2020 290a 2020 2020 6170  .",.    ).    ap
+00052970: 2e61 6464 5f61 7267 756d 656e 7428 0a20  .add_argument(. 
+00052980: 2020 2020 2020 2022 2d2d 726f 6f6d 2d73         "--room-s
+00052990: 6574 2d61 6c69 6173 222c 0a20 2020 2020  et-alias",.     
+000529a0: 2020 2022 2d2d 726f 6f6d 2d70 7574 2d61     "--room-put-a
+000529b0: 6c69 6173 222c 2020 2320 6e61 6d65 2075  lias",  # name u
+000529c0: 7365 6420 6279 206e 696f 0a20 2020 2020  sed by nio.     
+000529d0: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+000529e0: 652c 0a20 2020 2020 2020 2061 6374 696f  e,.        actio
+000529f0: 6e3d 2265 7874 656e 6422 2c0a 2020 2020  n="extend",.    
+00052a00: 2020 2020 6e61 7267 733d 222b 222c 0a20      nargs="+",. 
+00052a10: 2020 2020 2020 2074 7970 653d 7374 722c         type=str,
+00052a20: 0a20 2020 2020 2020 206d 6574 6176 6172  .        metavar
+00052a30: 3d22 524f 4f4d 5f41 4c49 4153 2052 4f4f  ="ROOM_ALIAS ROO
+00052a40: 4d22 2c0a 2020 2020 2020 2020 6865 6c70  M",.        help
+00052a50: 3d22 4164 6420 616c 6961 7365 7320 746f  ="Add aliases to
+00052a60: 2072 6f6f 6d73 2e20 220a 2020 2020 2020   rooms. ".      
+00052a70: 2020 2244 6574 6169 6c73 3a3a 2041 6464    "Details:: Add
+00052a80: 2061 6e20 616c 6961 7320 746f 2061 2072   an alias to a r
+00052a90: 6f6f 6d2c 206f 7220 616c 6961 7365 7320  oom, or aliases 
+00052aa0: 746f 206d 756c 7469 706c 6520 726f 6f6d  to multiple room
+00052ab0: 732e 2022 0a20 2020 2020 2020 2022 5072  s. ".        "Pr
+00052ac0: 6f76 6964 6520 7061 6972 7320 6f66 2061  ovide pairs of a
+00052ad0: 7267 756d 656e 7473 2e20 496e 2065 6163  rguments. In eac
+00052ae0: 6820 7061 6972 2c20 7468 6520 6669 7273  h pair, the firs
+00052af0: 7420 6172 6775 6d65 6e74 206d 7573 7420  t argument must 
+00052b00: 6265 2022 0a20 2020 2020 2020 2022 7468  be ".        "th
+00052b10: 6520 616c 6961 7320 796f 7520 7761 6e74  e alias you want
+00052b20: 2074 6f20 6173 7369 676e 2074 6f20 7468   to assign to th
+00052b30: 6520 726f 6f6d 2067 6976 656e 2076 6961  e room given via
+00052b40: 2072 6f6f 6d20 6964 2069 6e20 7468 6520   room id in the 
+00052b50: 220a 2020 2020 2020 2020 2273 6563 6f6e  ".        "secon
+00052b60: 6420 6172 6775 6d65 6e74 206f 6620 7468  d argument of th
+00052b70: 6520 7061 6972 2e20 452e 672e 2074 6865  e pair. E.g. the
+00052b80: 2034 2061 7267 756d 656e 7473 2027 6131   4 arguments 'a1
+00052b90: 2072 3120 6132 2072 3227 2022 0a20 2020   r1 a2 r2' ".   
+00052ba0: 2020 2020 2022 776f 756c 6420 6173 7369       "would assi
+00052bb0: 676e 2074 6865 2061 6c69 6173 2027 6131  gn the alias 'a1
+00052bc0: 2720 746f 2072 6f6f 6d20 2772 3127 2061  ' to room 'r1' a
+00052bd0: 6e64 2074 6865 2061 6c69 6173 2027 6132  nd the alias 'a2
+00052be0: 2720 746f 2072 6f6f 6d20 220a 2020 2020  ' to room ".    
+00052bf0: 2020 2020 2227 7232 272e 2049 6620 796f      "'r2'. If yo
+00052c00: 7520 6a75 7374 2068 6176 6520 6f6e 6520  u just have one 
+00052c10: 7369 6e67 6c65 2070 6169 7220 7468 656e  single pair then
+00052c20: 2074 6865 2073 6563 6f6e 6420 6172 6775   the second argu
+00052c30: 6d65 6e74 2069 7320 220a 2020 2020 2020  ment is ".      
+00052c40: 2020 226f 7074 696f 6e61 6c2e 2049 6620    "optional. If 
+00052c50: 6a75 7374 2061 2073 696e 676c 6520 7661  just a single va
+00052c60: 6c75 6520 6973 2067 6976 656e 2028 616e  lue is given (an
+00052c70: 2061 6c69 6173 2920 7468 656e 2074 6869   alias) then thi
+00052c80: 7320 220a 2020 2020 2020 2020 2261 6c69  s ".        "ali
+00052c90: 6173 2069 7320 6173 7369 676e 6564 2074  as is assigned t
+00052ca0: 6f20 7468 6520 6465 6661 756c 7420 726f  o the default ro
+00052cb0: 6f6d 206f 6620 220a 2020 2020 2020 2020  om of ".        
+00052cc0: 6622 7b50 524f 475f 5749 5448 4f55 545f  f"{PROG_WITHOUT_
+00052cd0: 4558 547d 2028 6173 2066 6f75 6e64 2069  EXT} (as found i
+00052ce0: 6e20 6372 6564 656e 7469 616c 7320 6669  n credentials fi
+00052cf0: 6c65 292e 2049 6e20 7368 6f72 742c 2022  le). In short, "
+00052d00: 0a20 2020 2020 2020 2022 796f 7520 6361  .        "you ca
+00052d10: 6e20 6861 7665 206a 7573 7420 6120 7369  n have just a si
+00052d20: 6e67 6c65 2061 7267 756d 656e 7420 6f72  ngle argument or
+00052d30: 2061 6e20 6576 656e 206e 756d 6265 7220   an even number 
+00052d40: 6f66 2061 7267 756d 656e 7473 2022 0a20  of arguments ". 
+00052d50: 2020 2020 2020 2022 666f 726d 696e 6720         "forming 
+00052d60: 7061 6972 732e 2059 6f75 2063 616e 2068  pairs. You can h
+00052d70: 6176 6520 6d75 6c74 6970 6c65 2072 6f6f  ave multiple roo
+00052d80: 6d20 616c 6961 7365 7320 7065 7220 726f  m aliases per ro
+00052d90: 6f6d 2e20 536f 2c20 220a 2020 2020 2020  om. So, ".      
+00052da0: 2020 2279 6f75 206d 6179 2061 6464 206d    "you may add m
+00052db0: 756c 7469 706c 6520 616c 6961 7365 7320  ultiple aliases 
+00052dc0: 746f 2074 6865 2073 616d 6520 726f 6f6d  to the same room
+00052dd0: 2e20 220a 2020 2020 2020 2020 2241 2072  . ".        "A r
+00052de0: 6f6f 6d20 616c 6961 7320 6c6f 6f6b 7320  oom alias looks 
+00052df0: 6c69 6b65 2074 6869 733a 2022 0a20 2020  like this: ".   
+00052e00: 2020 2020 2022 2723 736f 6d65 526f 6f6d       "'#someRoom
+00052e10: 416c 6961 733a 6d61 7472 6978 2e65 7861  Alias:matrix.exa
+00052e20: 6d70 6c65 2e6f 7267 272e 2053 686f 7274  mple.org'. Short
+00052e30: 2061 6c69 6173 6573 206c 696b 6520 220a   aliases like ".
+00052e40: 2020 2020 2020 2020 2227 736f 6d65 526f          "'someRo
+00052e50: 6f6d 416c 6961 7327 206f 7220 2723 736f  omAlias' or '#so
+00052e60: 6d65 526f 6f6d 416c 6961 7327 2061 7265  meRoomAlias' are
+00052e70: 2061 6c73 6f20 6163 6365 7074 6564 2e20   also accepted. 
+00052e80: 220a 2020 2020 2020 2020 2249 6e20 6361  ".        "In ca
+00052e90: 7365 206f 6620 6120 7368 6f72 7420 616c  se of a short al
+00052ea0: 6961 732c 2022 0a20 2020 2020 2020 2022  ias, ".        "
+00052eb0: 6974 2077 696c 6c20 6265 2061 7574 6f6d  it will be autom
+00052ec0: 6174 6963 616c 6c79 2070 7265 6669 7865  atically prefixe
+00052ed0: 6420 7769 7468 2027 2327 2061 6e64 2074  d with '#' and t
+00052ee0: 6865 2022 0a20 2020 2020 2020 2022 686f  he ".        "ho
+00052ef0: 6d65 7365 7276 6572 2077 696c 6c20 6265  meserver will be
+00052f00: 2061 7574 6f6d 6174 6963 616c 6c79 2061   automatically a
+00052f10: 7070 656e 6465 642e 2022 0a20 2020 2020  ppended. ".     
+00052f20: 2020 2022 4164 6469 6e67 2074 6865 2073     "Adding the s
+00052f30: 616d 6520 616c 6961 7320 220a 2020 2020  ame alias ".    
+00052f40: 2020 2020 226d 756c 7469 706c 6520 7469      "multiple ti
+00052f50: 6d65 7320 746f 2074 6865 2073 616d 6520  mes to the same 
+00052f60: 726f 6f6d 2072 6573 756c 7473 2069 6e20  room results in 
+00052f70: 616e 2065 7272 6f72 2e20 220a 2020 2020  an error. ".    
+00052f80: 2020 2020 222d 2d72 6f6f 6d2d 7075 742d      "--room-put-
+00052f90: 616c 6961 7320 6973 2065 7169 7661 6c65  alias is eqivale
+00052fa0: 6e74 2074 6f20 2d2d 726f 6f6d 2d73 6574  nt to --room-set
+00052fb0: 2d61 6c69 6173 2e22 2c0a 2020 2020 290a  -alias.",.    ).
+00052fc0: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
+00052fd0: 656e 7428 0a20 2020 2020 2020 2022 2d2d  ent(.        "--
+00052fe0: 726f 6f6d 2d72 6573 6f6c 7665 2d61 6c69  room-resolve-ali
+00052ff0: 6173 222c 0a20 2020 2020 2020 2072 6571  as",.        req
+00053000: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
+00053010: 2020 2020 2061 6374 696f 6e3d 2265 7874       action="ext
+00053020: 656e 6422 2c0a 2020 2020 2020 2020 6e61  end",.        na
+00053030: 7267 733d 222b 222c 0a20 2020 2020 2020  rgs="+",.       
+00053040: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
+00053050: 2020 206d 6574 6176 6172 3d22 524f 4f4d     metavar="ROOM
+00053060: 5f41 4c49 4153 222c 0a20 2020 2020 2020  _ALIAS",.       
+00053070: 2068 656c 703d 2253 686f 7720 726f 6f6d   help="Show room
+00053080: 2069 6473 2063 6f72 7265 7370 6f6e 6469   ids correspondi
+00053090: 6e67 2074 6f20 726f 6f6d 2061 6c69 6173  ng to room alias
+000530a0: 6573 2e20 220a 2020 2020 2020 2020 2244  es. ".        "D
+000530b0: 6574 6169 6c73 3a3a 2052 6573 6f6c 7665  etails:: Resolve
+000530c0: 7320 6120 726f 6f6d 2061 6c69 6173 2074  s a room alias t
+000530d0: 6f20 7468 6520 636f 7272 6573 706f 6e64  o the correspond
+000530e0: 696e 6720 726f 6f6d 2069 642c 2022 0a20  ing room id, ". 
+000530f0: 2020 2020 2020 2022 6f72 206d 756c 7469         "or multi
+00053100: 706c 6520 726f 6f6d 2061 6c69 6173 6573  ple room aliases
+00053110: 2074 6f20 7468 6569 7220 636f 7272 6573   to their corres
+00053120: 706f 6e64 696e 6720 726f 6f6d 2069 6473  ponding room ids
+00053130: 2e20 220a 2020 2020 2020 2020 2250 726f  . ".        "Pro
+00053140: 7669 6465 206f 6e65 206f 7220 6d75 6c74  vide one or mult
+00053150: 6970 6c65 2072 6f6f 6d20 616c 6961 7365  iple room aliase
+00053160: 732e 2022 0a20 2020 2020 2020 2022 4120  s. ".        "A 
+00053170: 726f 6f6d 2061 6c69 6173 206c 6f6f 6b73  room alias looks
+00053180: 206c 696b 6520 7468 6973 3a20 220a 2020   like this: ".  
+00053190: 2020 2020 2020 2227 2373 6f6d 6552 6f6f        "'#someRoo
+000531a0: 6d41 6c69 6173 3a6d 6174 7269 782e 6578  mAlias:matrix.ex
+000531b0: 616d 706c 652e 6f72 6727 2e20 5368 6f72  ample.org'. Shor
+000531c0: 7420 616c 6961 7365 7320 6c69 6b65 2022  t aliases like "
+000531d0: 0a20 2020 2020 2020 2022 2773 6f6d 6552  .        "'someR
+000531e0: 6f6f 6d41 6c69 6173 2720 6f72 2027 2373  oomAlias' or '#s
+000531f0: 6f6d 6552 6f6f 6d41 6c69 6173 2720 6172  omeRoomAlias' ar
+00053200: 6520 616c 736f 2061 6363 6570 7465 642e  e also accepted.
+00053210: 2022 0a20 2020 2020 2020 2022 496e 2063   ".        "In c
+00053220: 6173 6520 6f66 2061 2073 686f 7274 2061  ase of a short a
+00053230: 6c69 6173 2c20 220a 2020 2020 2020 2020  lias, ".        
+00053240: 2269 7420 7769 6c6c 2062 6520 6175 746f  "it will be auto
+00053250: 6d61 7469 6361 6c6c 7920 7072 6566 6978  matically prefix
+00053260: 6564 2077 6974 6820 2723 2720 616e 6420  ed with '#' and 
+00053270: 7468 6520 220a 2020 2020 2020 2020 6622  the ".        f"
+00053280: 686f 6d65 7365 7276 6572 2066 726f 6d20  homeserver from 
+00053290: 7468 6520 6465 6661 756c 7420 726f 6f6d  the default room
+000532a0: 206f 6620 7b50 524f 475f 5749 5448 4f55   of {PROG_WITHOU
+000532b0: 545f 4558 547d 2028 6173 2066 6f75 6e64  T_EXT} (as found
+000532c0: 2022 0a20 2020 2020 2020 2022 696e 2063   ".        "in c
+000532d0: 7265 6465 6e74 6961 6c73 2066 696c 6529  redentials file)
+000532e0: 2077 696c 6c20 6265 2061 7574 6f6d 6174   will be automat
+000532f0: 6963 616c 6c79 2061 7070 656e 6465 642e  ically appended.
+00053300: 2022 0a20 2020 2020 2020 2022 5265 736f   ".        "Reso
+00053310: 6c76 696e 6720 616e 2061 6c69 6173 2074  lving an alias t
+00053320: 6861 7420 646f 6573 206e 6f74 2065 7869  hat does not exi
+00053330: 7374 2072 6573 756c 7473 2069 6e20 616e  st results in an
+00053340: 2065 7272 6f72 2e20 220a 2020 2020 2020   error. ".      
+00053350: 2020 2246 6f72 2065 6163 6820 726f 6f6d    "For each room
+00053360: 2061 6c69 6173 206f 6e65 206c 696e 6520   alias one line 
+00053370: 7769 6c6c 2062 6520 7072 696e 7465 6420  will be printed 
+00053380: 746f 2073 7464 6f75 7420 7769 7468 2074  to stdout with t
+00053390: 6865 2022 0a20 2020 2020 2020 2022 7265  he ".        "re
+000533a0: 7375 6c74 2e22 2c0a 2020 2020 290a 2020  sult.",.    ).  
+000533b0: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+000533c0: 7428 0a20 2020 2020 2020 2022 2d2d 726f  t(.        "--ro
+000533d0: 6f6d 2d64 656c 6574 652d 616c 6961 7322  om-delete-alias"
+000533e0: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+000533f0: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
+00053400: 2020 6163 7469 6f6e 3d22 6578 7465 6e64    action="extend
+00053410: 222c 0a20 2020 2020 2020 206e 6172 6773  ",.        nargs
+00053420: 3d22 2b22 2c0a 2020 2020 2020 2020 7479  ="+",.        ty
+00053430: 7065 3d73 7472 2c0a 2020 2020 2020 2020  pe=str,.        
+00053440: 6d65 7461 7661 723d 2252 4f4f 4d5f 414c  metavar="ROOM_AL
+00053450: 4941 5322 2c0a 2020 2020 2020 2020 6865  IAS",.        he
+00053460: 6c70 3d22 4465 6c65 7465 206f 6e65 206f  lp="Delete one o
+00053470: 7220 6d75 6c74 6970 6c65 2072 6f6f 6d73  r multiple rooms
+00053480: 2061 6c69 6173 6573 2e20 220a 2020 2020   aliases. ".    
+00053490: 2020 2020 2244 6574 6169 6c73 3a3a 2050      "Details:: P
+000534a0: 726f 7669 6465 206f 6e65 206f 7220 6d75  rovide one or mu
+000534b0: 6c74 6970 6c65 2072 6f6f 6d20 616c 6961  ltiple room alia
+000534c0: 7365 732e 2022 0a20 2020 2020 2020 2022  ses. ".        "
+000534d0: 596f 7520 6361 6e20 6861 7665 206d 756c  You can have mul
+000534e0: 7469 706c 6520 726f 6f6d 2061 6c69 6173  tiple room alias
+000534f0: 6573 2070 6572 2072 6f6f 6d2e 2053 6f2c  es per room. So,
+00053500: 2022 0a20 2020 2020 2020 2022 796f 7520   ".        "you 
+00053510: 6d61 7920 6465 6c65 7465 206d 756c 7469  may delete multi
+00053520: 706c 6520 616c 6961 7365 7320 6672 6f6d  ple aliases from
+00053530: 2074 6865 2073 616d 6520 726f 6f6d 206f   the same room o
+00053540: 7220 6672 6f6d 2064 6966 6665 7265 6e74  r from different
+00053550: 2022 0a20 2020 2020 2020 2022 726f 6f6d   ".        "room
+00053560: 732e 2022 0a20 2020 2020 2020 2022 4120  s. ".        "A 
+00053570: 726f 6f6d 2061 6c69 6173 206c 6f6f 6b73  room alias looks
+00053580: 206c 696b 6520 7468 6973 3a20 220a 2020   like this: ".  
+00053590: 2020 2020 2020 2227 2373 6f6d 6552 6f6f        "'#someRoo
+000535a0: 6d41 6c69 6173 3a6d 6174 7269 782e 6578  mAlias:matrix.ex
+000535b0: 616d 706c 652e 6f72 6727 2e20 5368 6f72  ample.org'. Shor
+000535c0: 7420 616c 6961 7365 7320 6c69 6b65 2022  t aliases like "
+000535d0: 0a20 2020 2020 2020 2022 2773 6f6d 6552  .        "'someR
+000535e0: 6f6f 6d41 6c69 6173 2720 6f72 2027 2373  oomAlias' or '#s
+000535f0: 6f6d 6552 6f6f 6d41 6c69 6173 2720 6172  omeRoomAlias' ar
+00053600: 6520 616c 736f 2061 6363 6570 7465 642e  e also accepted.
+00053610: 2022 0a20 2020 2020 2020 2022 496e 2063   ".        "In c
+00053620: 6173 6520 6f66 2061 2073 686f 7274 2061  ase of a short a
+00053630: 6c69 6173 2c20 220a 2020 2020 2020 2020  lias, ".        
+00053640: 2269 7420 7769 6c6c 2062 6520 6175 746f  "it will be auto
+00053650: 6d61 7469 6361 6c6c 7920 7072 6566 6978  matically prefix
+00053660: 6564 2077 6974 6820 2723 2720 616e 6420  ed with '#' and 
+00053670: 7468 6520 220a 2020 2020 2020 2020 6622  the ".        f"
+00053680: 686f 6d65 7365 7276 6572 2066 726f 6d20  homeserver from 
+00053690: 7468 6520 6465 6661 756c 7420 726f 6f6d  the default room
+000536a0: 206f 6620 7b50 524f 475f 5749 5448 4f55   of {PROG_WITHOU
+000536b0: 545f 4558 547d 2028 6173 2066 6f75 6e64  T_EXT} (as found
+000536c0: 2022 0a20 2020 2020 2020 2022 696e 2063   ".        "in c
+000536d0: 7265 6465 6e74 6961 6c73 2066 696c 6529  redentials file)
+000536e0: 2077 696c 6c20 6265 2061 7574 6f6d 6174   will be automat
+000536f0: 6963 616c 6c79 2061 7070 656e 6465 642e  ically appended.
+00053700: 2022 0a20 2020 2020 2020 2022 4465 6c65   ".        "Dele
+00053710: 7469 6e67 2061 6e20 616c 6961 7320 7468  ting an alias th
+00053720: 6174 2064 6f65 7320 6e6f 7420 6578 6973  at does not exis
+00053730: 7420 7265 7375 6c74 7320 696e 2061 6e20  t results in an 
+00053740: 6572 726f 722e 222c 0a20 2020 2029 0a20  error.",.    ). 
+00053750: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
+00053760: 6e74 280a 2020 2020 2020 2020 222d 2d67  nt(.        "--g
+00053770: 6574 2d6f 7065 6e69 642d 746f 6b65 6e22  et-openid-token"
+00053780: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+00053790: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
+000537a0: 2020 6163 7469 6f6e 3d22 6578 7465 6e64    action="extend
+000537b0: 222c 0a20 2020 2020 2020 206e 6172 6773  ",.        nargs
+000537c0: 3d22 2a22 2c20 2023 204e 6f6e 6520 6966  ="*",  # None if
+000537d0: 206e 6f74 2075 7365 642c 205b 5d20 6973   not used, [] is
+000537e0: 2075 7365 6420 7769 7468 6f75 7420 6578   used without ex
+000537f0: 7472 6120 6172 6773 0a20 2020 2020 2020  tra args.       
+00053800: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
+00053810: 2020 206d 6574 6176 6172 3d22 5553 4552     metavar="USER
+00053820: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
+00053830: 2247 6574 2061 6e20 4f70 656e 4944 2074  "Get an OpenID t
+00053840: 6f6b 656e 2e20 220a 2020 2020 2020 2020  oken. ".        
+00053850: 6622 4465 7461 696c 733a 3a20 4765 7420  f"Details:: Get 
+00053860: 616e 204f 7065 6e49 4420 746f 6b65 6e20  an OpenID token 
+00053870: 666f 7220 7b50 524f 475f 5749 5448 4f55  for {PROG_WITHOU
+00053880: 545f 4558 547d 2c20 6f72 2066 6f72 2022  T_EXT}, or for "
+00053890: 0a20 2020 2020 2020 2022 6f6e 6520 6f72  .        "one or
+000538a0: 206d 756c 7469 706c 6520 6f74 6865 7220   multiple other 
+000538b0: 7573 6572 732e 2049 7420 7072 696e 7473  users. It prints
+000538c0: 2061 6e20 4f70 656e 4944 2074 6f6b 656e   an OpenID token
+000538d0: 206f 626a 6563 7420 220a 2020 2020 2020   object ".      
+000538e0: 2020 2274 6861 7420 7468 6520 7265 7175    "that the requ
+000538f0: 6573 7465 7220 6d61 7920 7375 7070 6c79  ester may supply
+00053900: 2074 6f20 616e 6f74 6865 7220 7365 7276   to another serv
+00053910: 6963 6520 746f 2076 6572 6966 7920 7468  ice to verify th
+00053920: 6569 7220 220a 2020 2020 2020 2020 2269  eir ".        "i
+00053930: 6465 6e74 6974 7920 696e 204d 6174 7269  dentity in Matri
+00053940: 782e 2053 6565 2068 7474 703a 2f2f 7777  x. See http://ww
+00053950: 772e 6f70 656e 6964 2e6e 6574 2f2e 2022  w.openid.net/. "
+00053960: 0a20 2020 2020 2020 2022 5370 6563 6966  .        "Specif
+00053970: 7920 7a65 726f 206f 7220 6d6f 7265 2075  y zero or more u
+00053980: 7365 7220 6964 732e 2022 0a20 2020 2020  ser ids. ".     
+00053990: 2020 2066 2249 6620 6e6f 2075 7365 7220     f"If no user 
+000539a0: 6964 2069 7320 7370 6563 6966 6965 642c  id is specified,
+000539b0: 2061 6e20 4f70 656e 4944 2066 6f72 207b   an OpenID for {
+000539c0: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+000539d0: 7d20 7769 6c6c 2022 0a20 2020 2020 2020  } will ".       
+000539e0: 2022 6265 2066 6574 6368 6564 2e20 4966   "be fetched. If
+000539f0: 206f 6e65 206f 7220 6d6f 7265 2075 7365   one or more use
+00053a00: 7220 6964 7320 6172 6520 6769 7665 6e2c  r ids are given,
+00053a10: 2074 6865 204f 7065 6e49 4420 6f66 2022   the OpenID of "
+00053a20: 0a20 2020 2020 2020 2022 7468 6573 6520  .        "these 
+00053a30: 7573 6572 7320 7769 6c6c 2062 6520 6665  users will be fe
+00053a40: 7463 6865 642e 2041 7320 7265 7370 6f6e  tched. As respon
+00053a50: 7365 2074 6865 2075 7365 7220 6964 2873  se the user id(s
+00053a60: 2920 616e 6420 220a 2020 2020 2020 2020  ) and ".        
+00053a70: 224f 7065 6e49 4428 7329 2077 696c 6c20  "OpenID(s) will 
+00053a80: 6265 2070 7269 6e74 6564 2e22 2c0a 2020  be printed.",.  
+00053a90: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+00053aa0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+00053ab0: 2022 2d2d 726f 6f6d 2d67 6574 2d76 6973   "--room-get-vis
+00053ac0: 6962 696c 6974 7922 2c0a 2020 2020 2020  ibility",.      
+00053ad0: 2020 7265 7175 6972 6564 3d46 616c 7365    required=False
+00053ae0: 2c0a 2020 2020 2020 2020 6163 7469 6f6e  ,.        action
+00053af0: 3d22 6578 7465 6e64 222c 0a20 2020 2020  ="extend",.     
+00053b00: 2020 206e 6172 6773 3d22 2a22 2c20 2023     nargs="*",  #
+00053b10: 204e 6f6e 6520 6966 206e 6f74 2075 7365   None if not use
+00053b20: 642c 205b 5d20 6973 2075 7365 6420 7769  d, [] is used wi
+00053b30: 7468 6f75 7420 6578 7472 6120 6172 6773  thout extra args
+00053b40: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
+00053b50: 722c 0a20 2020 2020 2020 206d 6574 6176  r,.        metav
+00053b60: 6172 3d22 524f 4f4d 222c 0a20 2020 2020  ar="ROOM",.     
+00053b70: 2020 2068 656c 703d 2247 6574 2074 6865     help="Get the
+00053b80: 2076 6973 6962 696c 6974 7920 6f66 206f   visibility of o
+00053b90: 6e65 206f 7220 6d6f 7265 2072 6f6f 6d73  ne or more rooms
+00053ba0: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
+00053bb0: 6169 6c73 3a3a 2050 726f 7669 6465 207a  ails:: Provide z
+00053bc0: 6572 6f20 6f72 206d 6f72 6520 726f 6f6d  ero or more room
+00053bd0: 2069 6473 2061 7320 6172 6775 6d65 6e74   ids as argument
+00053be0: 732e 2022 0a20 2020 2020 2020 2022 4966  s. ".        "If
+00053bf0: 206e 6f20 6172 6775 6d65 6e74 2069 7320   no argument is 
+00053c00: 6769 7665 6e2c 2074 6865 6e20 7468 6520  given, then the 
+00053c10: 6465 6661 756c 7420 726f 6f6d 206f 6620  default room of 
+00053c20: 220a 2020 2020 2020 2020 6622 7b50 524f  ".        f"{PRO
+00053c30: 475f 5749 5448 4f55 545f 4558 547d 2028  G_WITHOUT_EXT} (
+00053c40: 6173 2066 6f75 6e64 2069 6e20 6372 6564  as found in cred
+00053c50: 656e 7469 616c 7320 6669 6c65 2920 7769  entials file) wi
+00053c60: 6c6c 2062 6520 7573 6564 2e20 220a 2020  ll be used. ".  
+00053c70: 2020 2020 2020 2246 6f72 2065 6163 6820        "For each 
+00053c80: 726f 6f6d 2074 6865 2076 6973 6962 696c  room the visibil
+00053c90: 6974 7920 7769 6c6c 2062 6520 7072 696e  ity will be prin
+00053ca0: 7465 642e 2043 7572 7265 6e74 6c79 2c20  ted. Currently, 
+00053cb0: 7468 6973 2022 0a20 2020 2020 2020 2022  this ".        "
+00053cc0: 6973 2065 6974 6865 7220 7468 6520 7374  is either the st
+00053cd0: 7269 6e67 2027 7072 6976 6174 6527 206f  ring 'private' o
+00053ce0: 7220 2770 7562 6c69 6327 2e20 220a 2020  r 'public'. ".  
+00053cf0: 2020 2020 2020 2241 7320 7265 7370 6f6e        "As respon
+00053d00: 7365 206f 6e65 206c 696e 6520 7065 7220  se one line per 
+00053d10: 726f 6f6d 2077 696c 6c20 6265 2070 7269  room will be pri
+00053d20: 6e74 6564 2074 6f20 7374 646f 7574 2e22  nted to stdout."
+00053d30: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+00053d40: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+00053d50: 2020 2020 2022 2d2d 726f 6f6d 2d67 6574       "--room-get
+00053d60: 2d73 7461 7465 222c 0a20 2020 2020 2020  -state",.       
+00053d70: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
+00053d80: 0a20 2020 2020 2020 2061 6374 696f 6e3d  .        action=
+00053d90: 2265 7874 656e 6422 2c0a 2020 2020 2020  "extend",.      
+00053da0: 2020 6e61 7267 733d 222a 222c 2020 2320    nargs="*",  # 
+00053db0: 4e6f 6e65 2069 6620 6e6f 7420 7573 6564  None if not used
+00053dc0: 2c20 5b5d 2069 7320 7573 6564 2077 6974  , [] is used wit
+00053dd0: 686f 7574 2065 7874 7261 2061 7267 730a  hout extra args.
+00053de0: 2020 2020 2020 2020 7479 7065 3d73 7472          type=str
+00053df0: 2c0a 2020 2020 2020 2020 6d65 7461 7661  ,.        metava
+00053e00: 723d 2252 4f4f 4d22 2c0a 2020 2020 2020  r="ROOM",.      
+00053e10: 2020 6865 6c70 3d22 4765 7420 7468 6520    help="Get the 
+00053e20: 7374 6174 6520 6f66 206f 6e65 206f 7220  state of one or 
+00053e30: 6d6f 7265 2072 6f6f 6d73 2e20 220a 2020  more rooms. ".  
+00053e40: 2020 2020 2020 2244 6574 6169 6c73 3a3a        "Details::
+00053e50: 5072 6f76 6964 6520 7a65 726f 206f 7220  Provide zero or 
+00053e60: 6d6f 7265 2072 6f6f 6d20 6964 7320 6173  more room ids as
+00053e70: 2061 7267 756d 656e 7473 2e20 220a 2020   arguments. ".  
+00053e80: 2020 2020 2020 2249 6620 6e6f 2061 7267        "If no arg
+00053e90: 756d 656e 7420 6973 2067 6976 656e 2c20  ument is given, 
+00053ea0: 7468 656e 2074 6865 2064 6566 6175 6c74  then the default
+00053eb0: 2072 6f6f 6d20 6f66 2022 0a20 2020 2020   room of ".     
+00053ec0: 2020 2066 227b 5052 4f47 5f57 4954 484f     f"{PROG_WITHO
+00053ed0: 5554 5f45 5854 7d20 2861 7320 666f 756e  UT_EXT} (as foun
+00053ee0: 6420 696e 2063 7265 6465 6e74 6961 6c73  d in credentials
+00053ef0: 2066 696c 6529 2077 696c 6c20 6265 2075   file) will be u
+00053f00: 7365 642e 2022 0a20 2020 2020 2020 2022  sed. ".        "
+00053f10: 466f 7220 6561 6368 2072 6f6f 6d20 7468  For each room th
+00053f20: 6520 7374 6174 6520 7769 6c6c 2062 6520  e state will be 
+00053f30: 7072 696e 7465 642e 2054 6865 2073 7461  printed. The sta
+00053f40: 7465 2069 7320 6120 6c6f 6e67 2022 0a20  te is a long ". 
+00053f50: 2020 2020 2020 2022 6c69 7374 206f 6620         "list of 
+00053f60: 6576 656e 7473 2069 6e63 6c75 6469 6e67  events including
+00053f70: 2065 7665 6e74 7320 6c69 6b65 2027 6d2e   events like 'm.
+00053f80: 726f 6f6d 2e63 7265 6174 6527 2c20 220a  room.create', ".
+00053f90: 2020 2020 2020 2020 2227 6d2e 726f 6f6d          "'m.room
+00053fa0: 2e65 6e63 7279 7074 696f 6e27 2c20 276d  .encryption', 'm
+00053fb0: 2e72 6f6f 6d2e 6775 6573 745f 6163 6365  .room.guest_acce
+00053fc0: 7373 272c 2022 0a20 2020 2020 2020 2022  ss', ".        "
+00053fd0: 276d 2e72 6f6f 6d2e 6869 7374 6f72 795f  'm.room.history_
+00053fe0: 7669 7369 6269 6c69 7479 272c 2027 6d2e  visibility', 'm.
+00053ff0: 726f 6f6d 2e6a 6f69 6e5f 7275 6c65 7327  room.join_rules'
+00054000: 2c20 220a 2020 2020 2020 2020 2227 6d2e  , ".        "'m.
+00054010: 726f 6f6d 2e6d 656d 6265 7227 2c20 276d  room.member', 'm
+00054020: 2e72 6f6f 6d2e 706f 7765 725f 6c65 7665  .room.power_leve
+00054030: 6c73 272c 2065 7463 2e20 220a 2020 2020  ls', etc. ".    
+00054040: 2020 2020 2241 7320 7265 7370 6f6e 7365      "As response
+00054050: 206f 6e65 206c 696e 6520 7065 7220 726f   one line per ro
+00054060: 6f6d 2077 696c 6c20 6265 2070 7269 6e74  om will be print
+00054070: 6564 2074 6f20 7374 646f 7574 2e20 220a  ed to stdout. ".
+00054080: 2020 2020 2020 2020 2254 6865 206c 696e          "The lin
+00054090: 6520 6361 6e20 6265 2076 6572 7920 6c6f  e can be very lo
+000540a0: 6e67 2061 7320 7468 6520 6c69 7374 206f  ng as the list o
+000540b0: 6620 6576 656e 7473 2063 616e 2062 6520  f events can be 
+000540c0: 7665 7279 206c 6172 6765 2e20 220a 2020  very large. ".  
+000540d0: 2020 2020 2020 2254 6f20 6765 7420 6f75        "To get ou
+000540e0: 7470 7574 2069 6e74 6f20 6120 6875 6d61  tput into a huma
+000540f0: 6e20 7265 6164 6162 6c65 2066 6f72 6d20  n readable form 
+00054100: 7069 7065 206f 7574 7075 7420 7468 726f  pipe output thro
+00054110: 7567 6820 7365 6420 220a 2020 2020 2020  ugh sed ".      
+00054120: 2020 2261 6e64 206a 7120 6173 2073 686f    "and jq as sho
+00054130: 776e 2069 6e20 616e 2065 7861 6d70 6c65  wn in an example
+00054140: 2069 6e20 7465 7374 732f 7465 7374 2d73   in tests/test-s
+00054150: 6574 6765 742e 7368 2e22 2c0a 2020 2020  etget.sh.",.    
+00054160: 290a 2020 2020 6170 2e61 6464 5f61 7267  ).    ap.add_arg
+00054170: 756d 656e 7428 0a20 2020 2020 2020 2022  ument(.        "
+00054180: 2d2d 6465 6c65 7465 2d64 6576 6963 6522  --delete-device"
+00054190: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+000541a0: 6564 3d46 616c 7365 2c0a 2020 2020 2020  ed=False,.      
+000541b0: 2020 6163 7469 6f6e 3d22 6578 7465 6e64    action="extend
+000541c0: 222c 0a20 2020 2020 2020 206e 6172 6773  ",.        nargs
+000541d0: 3d22 2b22 2c0a 2020 2020 2020 2020 7479  ="+",.        ty
+000541e0: 7065 3d73 7472 2c0a 2020 2020 2020 2020  pe=str,.        
+000541f0: 6d65 7461 7661 723d 2244 4556 4943 4522  metavar="DEVICE"
+00054200: 2c0a 2020 2020 2020 2020 6865 6c70 3d66  ,.        help=f
+00054210: 2244 656c 6574 6520 6f6e 6520 6f72 206d  "Delete one or m
+00054220: 756c 7469 706c 6520 6465 7669 6365 732e  ultiple devices.
+00054230: 2022 0a20 2020 2020 2020 2022 4465 7461   ".        "Deta
+00054240: 696c 733a 3a20 4279 2064 6566 6175 6c74  ils:: By default
+00054250: 2064 6576 6963 6573 2062 656c 6f6e 6769   devices belongi
+00054260: 6e67 2022 0a20 2020 2020 2020 2066 2274  ng ".        f"t
+00054270: 6f20 7b50 524f 475f 5749 5448 4f55 545f  o {PROG_WITHOUT_
+00054280: 4558 547d 2077 696c 6c20 6265 2064 656c  EXT} will be del
+00054290: 6574 6564 2e20 4966 2074 6865 2064 6576  eted. If the dev
+000542a0: 6963 6573 2062 656c 6f6e 6720 220a 2020  ices belong ".  
+000542b0: 2020 2020 2020 2274 6f20 6120 6469 6666        "to a diff
+000542c0: 6572 656e 7420 7573 6572 2c20 7573 6520  erent user, use 
+000542d0: 7468 6520 2d2d 7573 6572 2061 7267 756d  the --user argum
+000542e0: 656e 7420 746f 2073 7065 6369 6679 2074  ent to specify t
+000542f0: 6865 2075 7365 722c 2022 0a20 2020 2020  he user, ".     
+00054300: 2020 2022 692e 652e 206f 776e 6572 2e20     "i.e. owner. 
+00054310: 4f6e 6c79 2022 0a20 2020 2020 2020 2022  Only ".        "
+00054320: 6578 6163 746c 7920 6f6e 6520 7573 6572  exactly one user
+00054330: 2063 616e 2062 6520 7370 6563 6966 6965   can be specifie
+00054340: 6420 7769 7468 2074 6865 206f 7074 696f  d with the optio
+00054350: 6e61 6c20 2d2d 7573 6572 2061 7267 756d  nal --user argum
+00054360: 656e 742e 2022 0a20 2020 2020 2020 2022  ent. ".        "
+00054370: 4465 7669 6365 2064 656c 6574 696f 6e20  Device deletion 
+00054380: 7265 7175 6972 6573 2074 6865 2075 7365  requires the use
+00054390: 7220 7061 7373 776f 7264 2e20 4974 206d  r password. It m
+000543a0: 7573 7420 6265 2073 7065 6369 6669 6564  ust be specified
+000543b0: 2022 0a20 2020 2020 2020 2022 7769 7468   ".        "with
+000543c0: 2074 6865 202d 2d70 6173 7377 6f72 6420   the --password 
+000543d0: 6172 6775 6d65 6e74 2e20 4966 2074 6865  argument. If the
+000543e0: 2073 6572 7665 7220 7573 6573 206f 6e6c   server uses onl
+000543f0: 7920 4854 5450 2028 616e 6420 220a 2020  y HTTP (and ".  
+00054400: 2020 2020 2020 226e 6f74 2048 5454 5053        "not HTTPS
+00054410: 292c 2074 6865 6e20 7468 6520 7061 7373  ), then the pass
+00054420: 776f 7264 2063 616e 2062 6520 7669 7369  word can be visi
+00054430: 626c 6520 746f 2061 7474 6163 6b65 7273  ble to attackers
+00054440: 2e20 4865 6e63 652c 2022 0a20 2020 2020  . Hence, ".     
+00054450: 2020 2022 6966 2074 6865 2073 6572 7665     "if the serve
+00054460: 7220 646f 6573 206e 6f74 2073 7570 706f  r does not suppo
+00054470: 7274 2048 5454 5053 2074 6869 7320 6f70  rt HTTPS this op
+00054480: 6572 6174 696f 6e20 6973 2064 6973 636f  eration is disco
+00054490: 7572 6167 6564 2e22 2c0a 2020 2020 290a  uraged.",.    ).
+000544a0: 2020 2020 6170 2e61 6464 5f61 7267 756d      ap.add_argum
+000544b0: 656e 7428 0a20 2020 2020 2020 2022 2d2d  ent(.        "--
+000544c0: 726f 6f6d 2d72 6564 6163 7422 2c0a 2020  room-redact",.  
+000544d0: 2020 2020 2020 222d 2d72 6f6f 6d2d 6465        "--room-de
+000544e0: 6c65 7465 2d63 6f6e 7465 6e74 222c 0a20  lete-content",. 
+000544f0: 2020 2020 2020 2072 6571 7569 7265 643d         required=
+00054500: 4661 6c73 652c 0a20 2020 2020 2020 2061  False,.        a
+00054510: 6374 696f 6e3d 2265 7874 656e 6422 2c0a  ction="extend",.
+00054520: 2020 2020 2020 2020 6e61 7267 733d 222b          nargs="+
+00054530: 222c 0a20 2020 2020 2020 2074 7970 653d  ",.        type=
+00054540: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
+00054550: 6176 6172 3d22 524f 4f4d 5f49 4420 4556  avar="ROOM_ID EV
+00054560: 454e 545f 4944 2052 4541 534f 4e22 2c0a  ENT_ID REASON",.
+00054570: 2020 2020 2020 2020 6865 6c70 3d22 5374          help="St
+00054580: 7269 7020 696e 666f 726d 6174 696f 6e20  rip information 
+00054590: 6f75 7420 6f66 206f 6e65 206f 7220 7365  out of one or se
+000545a0: 7665 7261 6c20 6576 656e 7473 2e20 220a  veral events. ".
+000545b0: 2020 2020 2020 2020 2244 6574 6169 6c73          "Details
+000545c0: 3a3a 2022 0a20 2020 2020 2020 2022 5374  :: ".        "St
+000545d0: 7269 7020 696e 666f 726d 6174 696f 6e20  rip information 
+000545e0: 6672 6f6d 2065 7665 6e74 732c 2065 2e67  from events, e.g
+000545f0: 2e20 6d65 7373 6167 6573 2e20 220a 2020  . messages. ".  
+00054600: 2020 2020 2020 2252 6564 6163 7420 6973        "Redact is
+00054610: 2075 7365 6420 696e 2074 6865 206d 6561   used in the mea
+00054620: 6e69 6e67 206f 6620 2773 7472 6970 2c20  ning of 'strip, 
+00054630: 7769 7065 2c20 626c 6163 6b2d 6f75 7427  wipe, black-out'
+00054640: 2c20 6e6f 7420 220a 2020 2020 2020 2020  , not ".        
+00054650: 2269 6e20 7468 6520 6d65 616e 696e 6720  "in the meaning 
+00054660: 6f66 2027 6564 6974 272e 2054 6869 7320  of 'edit'. This 
+00054670: 6163 7469 6f6e 2072 656d 6f76 6573 2c20  action removes, 
+00054680: 6465 6c65 7465 7320 7468 6520 636f 6e74  deletes the cont
+00054690: 656e 7420 220a 2020 2020 2020 2020 226f  ent ".        "o
+000546a0: 6620 616e 2065 7665 6e74 2077 6869 6c65  f an event while
+000546b0: 206e 6f74 2072 656d 6f76 696e 6720 7468   not removing th
+000546c0: 6520 6576 656e 742e 2059 6f75 2063 616e  e event. You can
+000546d0: 2077 6970 6520 7465 7874 2066 726f 6d20   wipe text from 
+000546e0: 6120 220a 2020 2020 2020 2020 2270 7265  a ".        "pre
+000546f0: 7669 6f75 7320 6d65 7373 6167 652c 2065  vious message, e
+00054700: 7463 2e20 5479 7069 6361 6c20 4d61 7472  tc. Typical Matr
+00054710: 6978 2063 6c69 656e 7473 206c 696b 6520  ix clients like 
+00054720: 456c 656d 656e 7420 7769 6c6c 2022 0a20  Element will ". 
+00054730: 2020 2020 2020 2022 6465 6c65 7465 206d         "delete m
+00054740: 6573 7361 6765 732c 2069 6d61 6765 7320  essages, images 
+00054750: 616e 6420 6f74 6865 7220 6f62 6a65 6374  and other object
+00054760: 7320 6672 6f6d 2074 6865 2047 5549 206f  s from the GUI o
+00054770: 6e63 6520 7468 6579 2022 0a20 2020 2020  nce they ".     
+00054780: 2020 2022 6861 7665 2062 6565 6e20 7265     "have been re
+00054790: 6461 6374 6564 2e20 220a 2020 2020 2020  dacted. ".      
+000547a0: 2020 2253 6f2c 202d 2d72 6f6f 6d2d 7265    "So, --room-re
+000547b0: 6461 6374 2069 7320 6120 7761 7920 746f  dact is a way to
+000547c0: 2064 656c 6574 6520 6120 6d65 7373 6167   delete a messag
+000547d0: 652c 2069 6d61 6765 732c 2065 7463 2e20  e, images, etc. 
+000547e0: 220a 2020 2020 2020 2020 2254 6865 2063  ".        "The c
+000547f0: 6f6e 7465 6e74 2069 7320 220a 2020 2020  ontent is ".    
+00054800: 2020 2020 2277 6970 6564 2c20 7468 6520      "wiped, the 
+00054810: 4755 4920 6465 6c65 7465 7320 7468 6520  GUI deletes the 
+00054820: 6d65 7373 6167 652c 2062 7574 2074 6865  message, but the
+00054830: 2073 6572 7665 7220 6b65 6570 7320 7468   server keeps th
+00054840: 6520 6576 656e 7420 220a 2020 2020 2020  e event ".      
+00054850: 2020 2268 6973 746f 7279 2e20 4e6f 7465    "history. Note
+00054860: 2c20 7768 696c 6520 7468 6973 2064 656c  , while this del
+00054870: 6574 6573 2066 726f 6d20 7468 6520 636c  etes from the cl
+00054880: 6965 6e74 2028 4755 492c 2065 2e67 2e20  ient (GUI, e.g. 
+00054890: 220a 2020 2020 2020 2020 2245 6c65 6d65  ".        "Eleme
+000548a0: 6e74 292c 2069 7420 646f 6573 206e 6f74  nt), it does not
+000548b0: 2064 656c 6574 6520 6672 6f6d 2074 6865   delete from the
+000548c0: 2064 6174 6162 6173 6520 6f6e 2074 6865   database on the
+000548d0: 2073 6572 7665 722e 2022 0a20 2020 2020   server. ".     
+000548e0: 2020 2022 536f 2c20 7468 6973 2063 616c     "So, this cal
+000548f0: 6c20 6973 206e 6f74 2061 2077 6179 2074  l is not a way t
+00054900: 6f20 636c 6561 6e20 7570 2074 6865 2073  o clean up the s
+00054910: 6572 7665 7220 6461 7461 6261 7365 2e20  erver database. 
+00054920: 220a 2020 2020 2020 2020 2245 6163 6820  ".        "Each 
+00054930: 7265 6461 6374 2028 7769 7065 2c20 7374  redact (wipe, st
+00054940: 7269 702c 2064 656c 6574 6529 206f 7065  rip, delete) ope
+00054950: 7261 7469 6f6e 2072 6571 7569 7265 7320  ration requires 
+00054960: 6578 6163 746c 7920 3320 220a 2020 2020  exactly 3 ".    
+00054970: 2020 2020 2261 7267 756d 656e 7473 2e20      "arguments. 
+00054980: 220a 2020 2020 2020 2020 2254 6865 2061  ".        "The a
+00054990: 7267 756d 656e 7420 7472 6970 6c65 7320  rgument triples 
+000549a0: 6172 653a 2022 0a20 2020 2020 2020 2022  are: ".        "
+000549b0: 2861 2920 7468 6520 726f 6f6d 2069 642e  (a) the room id.
+000549c0: 2022 0a20 2020 2020 2020 2022 2862 2920   ".        "(b) 
+000549d0: 7468 6520 6964 206f 6620 7468 6520 6576  the id of the ev
+000549e0: 656e 7420 746f 2062 6520 7265 6461 6374  ent to be redact
+000549f0: 6564 2e20 220a 2020 2020 2020 2020 2228  ed. ".        "(
+00054a00: 6329 2061 2073 7472 696e 6720 636f 6e74  c) a string cont
+00054a10: 6169 6e69 6e67 2074 6865 2072 6561 736f  aining the reaso
+00054a20: 6e20 666f 7220 7468 6520 7265 6461 6374  n for the redact
+00054a30: 696f 6e2e 2055 7365 2027 2720 6966 2079  ion. Use '' if y
+00054a40: 6f75 2022 0a20 2020 2020 2020 2022 646f  ou ".        "do
+00054a50: 206e 6f74 2077 616e 7420 746f 2067 6976   not want to giv
+00054a60: 6520 6120 7265 6173 6f6e 2e20 220a 2020  e a reason. ".  
+00054a70: 2020 2020 2020 2253 6f2c 2074 6865 2074        "So, the t
+00054a80: 6f74 616c 206e 756d 6265 7220 6f66 2061  otal number of a
+00054a90: 7267 756d 656e 7473 2075 7365 6420 7769  rguments used wi
+00054aa0: 7468 202d 2d72 6f6f 6d2d 7265 6461 6374  th --room-redact
+00054ab0: 206d 7573 7420 6265 2061 2022 0a20 2020   must be a ".   
+00054ac0: 2020 2020 2022 6d75 6c74 6970 6c65 206f       "multiple o
+00054ad0: 6620 332c 2062 7574 2077 6520 616c 736f  f 3, but we also
+00054ae0: 2061 6363 6570 7420 3220 696e 2077 6869   accept 2 in whi
+00054af0: 6368 2063 6173 6520 6f6e 6c79 206f 6e65  ch case only one
+00054b00: 2022 0a20 2020 2020 2020 2022 7265 6461   ".        "reda
+00054b10: 6374 696f 6e20 7769 6c6c 2062 6520 646f  ction will be do
+00054b20: 6e65 2077 6974 686f 7574 2073 7065 6369  ne without speci
+00054b30: 6679 696e 6720 6120 7265 6173 6f6e 2e20  fying a reason. 
+00054b40: 220a 2020 2020 2020 2020 2245 7665 6e74  ".        "Event
+00054b50: 2069 6473 2073 7461 7274 2077 6974 6820   ids start with 
+00054b60: 7468 6520 646f 6c6c 6172 2073 6967 6e20  the dollar sign 
+00054b70: 2824 292e 2044 6570 656e 6469 6e67 206f  ($). Depending o
+00054b80: 6e20 796f 7572 2073 6865 6c6c 2c20 220a  n your shell, ".
+00054b90: 2020 2020 2020 2020 2279 6f75 206d 6967          "you mig
+00054ba0: 6874 2068 6176 6520 746f 2065 7363 6170  ht have to escap
+00054bb0: 6520 7468 6520 2724 2720 746f 2027 5c5c  e the '$' to '\\
+00054bc0: 2427 2e20 2d2d 726f 6f6d 2d64 656c 6574  $'. --room-delet
+00054bd0: 652d 636f 6e74 656e 7420 6973 2022 0a20  e-content is ". 
+00054be0: 2020 2020 2020 2022 616e 2061 6c69 6173         "an alias
+00054bf0: 2066 6f72 202d 2d72 6f6f 6d2d 7265 6461   for --room-reda
+00054c00: 6374 2e20 5468 6579 2063 616e 2062 6520  ct. They can be 
+00054c10: 7573 6564 2069 6e74 6572 6368 616e 6765  used interchange
+00054c20: 6162 6c79 2e22 2c0a 2020 2020 290a 2020  ably.",.    ).  
+00054c30: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+00054c40: 7428 0a20 2020 2020 2020 2023 206e 6f20  t(.        # no 
+00054c50: 7369 6e67 6c65 2063 6861 7220 666c 6167  single char flag
+00054c60: 0a20 2020 2020 2020 2022 2d2d 7768 6f61  .        "--whoa
+00054c70: 6d69 222c 0a20 2020 2020 2020 2072 6571  mi",.        req
+00054c80: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
+00054c90: 2020 2020 2061 6374 696f 6e3d 2273 746f       action="sto
+00054ca0: 7265 5f74 7275 6522 2c0a 2020 2020 2020  re_true",.      
+00054cb0: 2020 6865 6c70 3d22 5072 696e 7420 796f    help="Print yo
+00054cc0: 7572 2075 7365 7220 6964 2e20 220a 2020  ur user id. ".  
+00054cd0: 2020 2020 2020 6622 4465 7461 696c 733a        f"Details:
+00054ce0: 3a20 5072 696e 7420 7468 6520 7573 6572  : Print the user
+00054cf0: 2069 6420 7573 6564 2062 7920 7b50 524f   id used by {PRO
+00054d00: 475f 5749 5448 4f55 545f 4558 547d 2028  G_WITHOUT_EXT} (
+00054d10: 6974 7365 6c66 292e 2022 0a20 2020 2020  itself). ".     
+00054d20: 2020 2022 4f6e 6520 6361 6e20 6765 7420     "One can get 
+00054d30: 220a 2020 2020 2020 2020 2274 6869 7320  ".        "this 
+00054d40: 696e 666f 726d 6174 696f 6e20 616c 736f  information also
+00054d50: 2062 7920 6c6f 6f6b 696e 6720 6174 2074   by looking at t
+00054d60: 6865 2063 7265 6465 6e74 6961 6c73 2066  he credentials f
+00054d70: 696c 652e 222c 0a20 2020 2029 0a20 2020  ile.",.    ).   
+00054d80: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+00054d90: 280a 2020 2020 2020 2020 2320 6e6f 2073  (.        # no s
+00054da0: 696e 676c 6520 6368 6172 2066 6c61 670a  ingle char flag.
+00054db0: 2020 2020 2020 2020 222d 2d6e 6f2d 7373          "--no-ss
+00054dc0: 6c22 2c0a 2020 2020 2020 2020 7265 7175  l",.        requ
+00054dd0: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
+00054de0: 2020 2020 6163 7469 6f6e 3d22 7374 6f72      action="stor
+00054df0: 655f 7472 7565 222c 0a20 2020 2020 2020  e_true",.       
+00054e00: 2064 6566 6175 6c74 3d4e 4f5f 5353 4c5f   default=NO_SSL_
+00054e10: 554e 5553 4544 5f44 4546 4155 4c54 2c20  UNUSED_DEFAULT, 
+00054e20: 2023 2077 6865 6e20 6f70 7469 6f6e 2069   # when option i
+00054e30: 736e 2774 2075 7365 640a 2020 2020 2020  sn't used.      
+00054e40: 2020 6865 6c70 3d22 536b 6970 2053 534c    help="Skip SSL
+00054e50: 2076 6572 6966 6963 6174 696f 6e2e 2022   verification. "
+00054e60: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
+00054e70: 733a 3a20 4279 2064 6566 6175 6c74 2028  s:: By default (
+00054e80: 6966 2074 6869 7320 6f70 7469 6f6e 2069  if this option i
+00054e90: 7320 6e6f 7420 7573 6564 2920 220a 2020  s not used) ".  
+00054ea0: 2020 2020 2020 2274 6865 2053 534c 2063        "the SSL c
+00054eb0: 6572 7469 6669 6361 7465 2069 7320 7661  ertificate is va
+00054ec0: 6c69 6461 7465 6420 666f 7220 7468 6520  lidated for the 
+00054ed0: 636f 6e6e 6563 7469 6f6e 2e20 4275 742c  connection. But,
+00054ee0: 2069 6620 7468 6973 2022 0a20 2020 2020   if this ".     
+00054ef0: 2020 2022 6f70 7469 6f6e 2069 7320 7573     "option is us
+00054f00: 6564 2c20 7468 656e 2074 6865 2053 534c  ed, then the SSL
+00054f10: 2063 6572 7469 6669 6361 7465 2076 616c   certificate val
+00054f20: 6964 6174 696f 6e20 7769 6c6c 2062 6520  idation will be 
+00054f30: 736b 6970 7065 642e 2022 0a20 2020 2020  skipped. ".     
+00054f40: 2020 2022 5468 6973 2069 7320 7573 6566     "This is usef
+00054f50: 756c 2066 6f72 2068 6f6d 652d 7365 7276  ul for home-serv
+00054f60: 6572 7320 7468 6174 2068 6176 6520 6e6f  ers that have no
+00054f70: 2053 534c 2063 6572 7469 6669 6361 7465   SSL certificate
+00054f80: 2e20 220a 2020 2020 2020 2020 2749 6620  . ".        'If 
+00054f90: 7573 6564 2074 6f67 6574 6865 7220 7769  used together wi
+00054fa0: 7468 2074 6865 2022 2d2d 7373 6c2d 6365  th the "--ssl-ce
+00054fb0: 7274 6966 6963 6174 6522 2027 0a20 2020  rtificate" '.   
+00054fc0: 2020 2020 2022 7061 7261 6d65 7465 722c       "parameter,
+00054fd0: 2074 6869 7320 6f70 7469 6f6e 2069 7320   this option is 
+00054fe0: 6d65 616e 696e 676c 6573 7320 616e 6420  meaningless and 
+00054ff0: 616e 2065 7272 6f72 2077 696c 6c20 6265  an error will be
+00055000: 2072 6169 7365 642e 222c 0a20 2020 2029   raised.",.    )
+00055010: 0a20 2020 2061 702e 6164 645f 6172 6775  .    ap.add_argu
+00055020: 6d65 6e74 280a 2020 2020 2020 2020 2320  ment(.        # 
+00055030: 6e6f 2073 696e 676c 6520 6368 6172 2066  no single char f
+00055040: 6c61 670a 2020 2020 2020 2020 222d 2d73  lag.        "--s
+00055050: 736c 2d63 6572 7469 6669 6361 7465 222c  sl-certificate",
+00055060: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+00055070: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
+00055080: 2074 7970 653d 7374 722c 0a20 2020 2020   type=str,.     
+00055090: 2020 2064 6566 6175 6c74 3d53 534c 5f43     default=SSL_C
+000550a0: 4552 5449 4649 4341 5445 5f44 4546 4155  ERTIFICATE_DEFAU
+000550b0: 4c54 2c20 2023 2077 6865 6e20 6f70 7469  LT,  # when opti
+000550c0: 6f6e 2069 736e 2774 2075 7365 640a 2020  on isn't used.  
+000550d0: 2020 2020 2020 6d65 7461 7661 723d 2253        metavar="S
+000550e0: 534c 5f43 4552 5449 4649 4341 5445 5f46  SL_CERTIFICATE_F
+000550f0: 494c 4522 2c0a 2020 2020 2020 2020 6865  ILE",.        he
+00055100: 6c70 3d22 5573 6520 796f 7572 206f 776e  lp="Use your own
+00055110: 2053 534c 2063 6572 7469 6669 6361 7465   SSL certificate
+00055120: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
+00055130: 6169 6c73 3a3a 2055 7365 2074 6869 7320  ails:: Use this 
+00055140: 6f70 7469 6f6e 2074 6f20 7573 6520 220a  option to use ".
+00055150: 2020 2020 2020 2020 2279 6f75 7220 6f77          "your ow
+00055160: 6e20 6c6f 6361 6c20 5353 4c20 6365 7274  n local SSL cert
+00055170: 6966 6963 6174 6520 6669 6c65 2e20 220a  ificate file. ".
+00055180: 2020 2020 2020 2020 2254 6869 7320 6973          "This is
+00055190: 2061 6e20 6f70 7469 6f6e 616c 2070 6172   an optional par
+000551a0: 616d 6574 6572 2e20 5468 6973 2069 7320  ameter. This is 
+000551b0: 7573 6566 756c 2066 6f72 2068 6f6d 6520  useful for home 
+000551c0: 7365 7276 6572 7320 7468 6174 2022 0a20  servers that ". 
+000551d0: 2020 2020 2020 2022 6861 7665 2074 6865         "have the
+000551e0: 6972 206f 776e 2022 0a20 2020 2020 2020  ir own ".       
+000551f0: 2022 5353 4c20 6365 7274 6966 6963 6174   "SSL certificat
+00055200: 652e 2054 6869 7320 616c 6c6f 7773 2079  e. This allows y
+00055210: 6f75 2074 6f20 7573 6520 4854 5450 532f  ou to use HTTPS/
+00055220: 544c 5320 666f 7220 7468 6520 636f 6e6e  TLS for the conn
+00055230: 6563 7469 6f6e 2022 0a20 2020 2020 2020  ection ".       
+00055240: 2022 7768 696c 6520 7573 696e 6720 796f   "while using yo
+00055250: 7572 206f 776e 206c 6f63 616c 2053 534c  ur own local SSL
+00055260: 2063 6572 7469 6669 6361 7465 2e20 5370   certificate. Sp
+00055270: 6563 6966 7920 7468 6520 7061 7468 2061  ecify the path a
+00055280: 6e64 2022 0a20 2020 2020 2020 2027 6669  nd ".        'fi
+00055290: 6c65 2074 6f20 796f 7572 2053 534c 2063  le to your SSL c
+000552a0: 6572 7469 6669 6361 7465 2e20 4966 2075  ertificate. If u
+000552b0: 7365 6420 746f 6765 7468 6572 2077 6974  sed together wit
+000552c0: 6820 7468 6520 222d 2d6e 6f2d 7373 6c22  h the "--no-ssl"
+000552d0: 2027 0a20 2020 2020 2020 2022 7061 7261   '.        "para
+000552e0: 6d65 7465 722c 2074 6869 7320 6f70 7469  meter, this opti
+000552f0: 6f6e 2069 7320 6d65 616e 696e 676c 6573  on is meaningles
+00055300: 7320 616e 6420 616e 2065 7272 6f72 2077  s and an error w
+00055310: 696c 6c20 6265 2072 6169 7365 642e 222c  ill be raised.",
+00055320: 0a20 2020 2029 0a20 2020 2061 702e 6164  .    ).    ap.ad
+00055330: 645f 6172 6775 6d65 6e74 280a 2020 2020  d_argument(.    
+00055340: 2020 2020 222d 2d66 696c 652d 6e61 6d65      "--file-name
+00055350: 222c 0a20 2020 2020 2020 2072 6571 7569  ",.        requi
+00055360: 7265 643d 4661 6c73 652c 0a20 2020 2020  red=False,.     
+00055370: 2020 2061 6374 696f 6e3d 2265 7874 656e     action="exten
+00055380: 6422 2c0a 2020 2020 2020 2020 6e61 7267  d",.        narg
+00055390: 733d 222b 222c 0a20 2020 2020 2020 2074  s="+",.        t
+000553a0: 7970 653d 7374 722c 0a20 2020 2020 2020  ype=str,.       
+000553b0: 206d 6574 6176 6172 3d22 4649 4c45 222c   metavar="FILE",
+000553c0: 0a20 2020 2020 2020 2068 656c 703d 2253  .        help="S
+000553d0: 7065 6369 6679 206f 6e65 206f 7220 6d75  pecify one or mu
+000553e0: 6c74 6970 6c65 2066 696c 6520 6e61 6d65  ltiple file name
+000553f0: 7320 666f 7220 736f 6d65 2061 6374 696f  s for some actio
+00055400: 6e73 2e20 220a 2020 2020 2020 2020 2244  ns. ".        "D
+00055410: 6574 6169 6c73 3a3a 2054 6869 7320 6973  etails:: This is
+00055420: 2061 6e20 6f70 7469 6f6e 616c 2061 7267   an optional arg
+00055430: 756d 656e 742e 2055 7365 2074 6869 7320  ument. Use this 
+00055440: 6f70 7469 6f6e 2022 0a20 2020 2020 2020  option ".       
+00055450: 2022 696e 2063 6f6d 6269 6e61 7469 6f6e   "in combination
+00055460: 2077 6974 6820 6f70 7469 6f6e 7320 6c69   with options li
+00055470: 6b65 202d 2d64 6f77 6e6c 6f61 6420 746f  ke --download to
+00055480: 2073 7065 6369 6679 206f 6e65 206f 7220   specify one or 
+00055490: 220a 2020 2020 2020 2020 226d 756c 7469  ".        "multi
+000554a0: 706c 6520 6669 6c65 206e 616d 6573 2e20  ple file names. 
+000554b0: 220a 2020 2020 2020 2020 2249 676e 6f72  ".        "Ignor
+000554c0: 6564 2069 6620 7573 6564 2062 7920 6974  ed if used by it
+000554d0: 7365 6c66 2077 6974 686f 7574 2061 6e20  self without an 
+000554e0: 6170 7072 6f70 7269 6174 6520 636f 7272  appropriate corr
+000554f0: 6573 706f 6e64 696e 6720 220a 2020 2020  esponding ".    
+00055500: 2020 2020 2261 6374 696f 6e2e 222c 0a20      "action.",. 
+00055510: 2020 2029 0a20 2020 2061 702e 6164 645f     ).    ap.add_
+00055520: 6172 6775 6d65 6e74 280a 2020 2020 2020  argument(.      
+00055530: 2020 222d 2d6b 6579 2d64 6963 7422 2c0a    "--key-dict",.
+00055540: 2020 2020 2020 2020 7265 7175 6972 6564          required
+00055550: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00055560: 6163 7469 6f6e 3d22 6578 7465 6e64 222c  action="extend",
+00055570: 0a20 2020 2020 2020 206e 6172 6773 3d22  .        nargs="
+00055580: 2b22 2c0a 2020 2020 2020 2020 7479 7065  +",.        type
+00055590: 3d73 7472 2c0a 2020 2020 2020 2020 6d65  =str,.        me
+000555a0: 7461 7661 723d 224b 4559 5f44 4943 5449  tavar="KEY_DICTI
+000555b0: 4f4e 4152 5922 2c0a 2020 2020 2020 2020  ONARY",.        
+000555c0: 6865 6c70 3d22 5370 6563 6966 7920 6f6e  help="Specify on
+000555d0: 6520 6f72 206d 756c 7469 706c 6520 6b65  e or multiple ke
+000555e0: 7920 6469 6374 696f 6e61 7269 6573 2066  y dictionaries f
+000555f0: 6f72 2064 6563 7279 7074 696f 6e2e 2022  or decryption. "
+00055600: 0a20 2020 2020 2020 2022 4465 7461 696c  .        "Detail
+00055610: 733a 3a20 4f6e 6520 6f72 206d 756c 7469  s:: One or multi
+00055620: 706c 6520 6465 6372 7970 7469 6f6e 2022  ple decryption "
+00055630: 0a20 2020 2020 2020 2022 6469 6374 696f  .        "dictio
+00055640: 6e61 7269 6573 2061 7265 2070 726f 7669  naries are provi
+00055650: 6465 6420 6279 2074 6865 202d 2d75 706c  ded by the --upl
+00055660: 6f61 6420 6163 7469 6f6e 2061 7320 6120  oad action as a 
+00055670: 7265 7375 6c74 2e20 220a 2020 2020 2020  result. ".      
+00055680: 2020 2241 2064 6563 7279 7074 696f 6e20    "A decryption 
+00055690: 6469 6374 696f 6e61 7279 2069 7320 6120  dictionary is a 
+000556a0: 7374 7269 6e67 206c 696b 6520 7468 6973  string like this
+000556b0: 3a20 220a 2020 2020 2020 2020 225c 227b  : ".        "\"{
+000556c0: 2776 273a 2027 7632 272c 2027 6b65 7927  'v': 'v2', 'key'
+000556d0: 3a20 7b27 6b74 7927 3a20 276f 6374 272c  : {'kty': 'oct',
+000556e0: 2027 616c 6727 3a20 2741 3235 3643 5452   'alg': 'A256CTR
+000556f0: 272c 2027 6578 7427 3a20 5472 7565 2c20  ', 'ext': True, 
+00055700: 220a 2020 2020 2020 2020 2227 6b27 3a20  ".        "'k': 
+00055710: 2773 6f6d 656b 6579 272c 2027 6b65 795f  'somekey', 'key_
+00055720: 6f70 7327 3a20 5b27 656e 6372 7970 7427  ops': ['encrypt'
+00055730: 2c20 2764 6563 7279 7074 275d 7d2c 2022  , 'decrypt']}, "
+00055740: 0a20 2020 2020 2020 2022 2769 7627 3a20  .        "'iv': 
+00055750: 2773 6f6d 6569 7627 2c20 2768 6173 6865  'someiv', 'hashe
+00055760: 7327 3a20 7b27 7368 6132 3536 273a 2027  s': {'sha256': '
+00055770: 736f 6d65 5348 4127 7d7d 5c22 2e20 4966  someSHA'}}\". If
+00055780: 2079 6f75 2068 6176 6520 6120 220a 2020   you have a ".  
+00055790: 2020 2020 2020 226c 6973 7420 6f66 206b        "list of k
+000557a0: 6579 2064 6963 7469 6f6e 6172 6965 7320  ey dictionaries 
+000557b0: 616e 6420 7761 6e74 2074 6f20 736b 6970  and want to skip
+000557c0: 206f 6e65 2c20 7573 6520 7468 6520 656d   one, use the em
+000557d0: 7074 7920 7374 7269 6e67 2e22 2c0a 2020  pty string.",.  
+000557e0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+000557f0: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+00055800: 2022 2d2d 706c 6169 6e22 2c0a 2020 2020   "--plain",.    
+00055810: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+00055820: 7365 2c0a 2020 2020 2020 2020 6163 7469  se,.        acti
+00055830: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
+00055840: 0a20 2020 2020 2020 2068 656c 703d 2244  .        help="D
+00055850: 6973 6162 6c65 2065 6e63 7279 7074 696f  isable encryptio
+00055860: 6e20 666f 7220 6120 7370 6563 6966 6963  n for a specific
+00055870: 2061 6374 696f 6e2e 2022 0a20 2020 2020   action. ".     
+00055880: 2020 2022 4465 7461 696c 733a 3a20 4279     "Details:: By
+00055890: 2064 6566 6175 6c74 2c20 220a 2020 2020   default, ".    
+000558a0: 2020 2020 2265 7665 7279 7468 696e 6720      "everything 
+000558b0: 6973 2061 6c77 6179 7320 656e 6372 7970  is always encryp
+000558c0: 7465 642e 2022 0a20 2020 2020 2020 2022  ted. ".        "
+000558d0: 4163 7469 6f6e 7320 7468 6174 2073 7570  Actions that sup
+000558e0: 706f 7274 2074 6869 7320 6f70 7469 6f6e  port this option
+000558f0: 2061 7265 3a20 2d2d 7570 6c6f 6164 2c20   are: --upload, 
+00055900: 2d2d 726f 6f6d 2d63 7265 6174 652c 2022  --room-create, "
+00055910: 0a20 2020 2020 2020 2022 616e 6420 2d2d  .        "and --
+00055920: 726f 6f6d 2d64 6d2d 6372 6561 7465 2e20  room-dm-create. 
+00055930: 220a 2020 2020 2020 2020 2252 6f6f 6d73  ".        "Rooms
+00055940: 2061 7265 2062 7920 6465 6661 756c 7420   are by default 
+00055950: 6372 6561 7465 6420 656e 6372 7970 7465  created encrypte
+00055960: 643b 2022 0a20 2020 2020 2020 2022 746f  d; ".        "to
+00055970: 206f 7665 7277 7269 7465 2074 6861 7420   overwrite that 
+00055980: 616e 6420 746f 2063 7265 6174 6520 6120  and to create a 
+00055990: 726f 6f6d 2077 6974 6820 656e 6372 7970  room with encryp
+000559a0: 7469 6f6e 2064 6973 6162 6c65 6420 220a  tion disabled ".
+000559b0: 2020 2020 2020 2020 2275 7365 2027 2d2d          "use '--
+000559c0: 706c 6169 6e27 2e20 5365 6520 7468 6520  plain'. See the 
+000559d0: 696e 6469 7669 6475 616c 2063 6f6d 6d61  individual comma
+000559e0: 6e64 732e 222c 0a20 2020 2029 0a20 2020  nds.",.    ).   
+000559f0: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+00055a00: 280a 2020 2020 2020 2020 222d 2d73 6570  (.        "--sep
+00055a10: 6172 6174 6f72 222c 0a20 2020 2020 2020  arator",.       
+00055a20: 2072 6571 7569 7265 643d 4661 6c73 652c   required=False,
+00055a30: 0a20 2020 2020 2020 2074 7970 653d 7374  .        type=st
+00055a40: 722c 0a20 2020 2020 2020 2064 6566 6175  r,.        defau
+00055a50: 6c74 3d44 4546 4155 4c54 5f53 4550 4152  lt=DEFAULT_SEPAR
+00055a60: 4154 4f52 2c20 2023 2064 6566 6175 6c74  ATOR,  # default
+00055a70: 7320 746f 2053 4550 2069 6620 6e6f 7420  s to SEP if not 
+00055a80: 7573 6564 0a20 2020 2020 2020 2023 2054  used.        # T
+00055a90: 6578 7420 6973 2073 6361 6e6e 6564 2061  ext is scanned a
+00055aa0: 6e64 2072 6570 6561 7465 6420 7370 6163  nd repeated spac
+00055ab0: 6573 2061 7265 2072 656d 6f76 6573 2c20  es are removes, 
+00055ac0: 736f 2022 2020 2020 220a 2020 2020 2020  so "    ".      
+00055ad0: 2020 2320 6f72 207b 4445 4641 554c 545f    # or {DEFAULT_
+00055ae0: 5345 5041 5241 544f 527d 2077 696c 6c20  SEPARATOR} will 
+00055af0: 6265 2074 7275 6e63 6174 6564 2074 6f20  be truncated to 
+00055b00: 2220 222e 2048 656e 6365 2022 3420 7370  " ". Hence "4 sp
+00055b10: 6163 6573 220a 2020 2020 2020 2020 6d65  aces".        me
+00055b20: 7461 7661 723d 2253 4550 4152 4154 4f52  tavar="SEPARATOR
+00055b30: 222c 0a20 2020 2020 2020 2068 656c 703d  ",.        help=
+00055b40: 2253 6574 2061 2063 7573 746f 6d20 7365  "Set a custom se
+00055b50: 7061 7261 746f 7220 7573 6564 2066 6f72  parator used for
+00055b60: 2063 6572 7461 696e 2070 7269 6e74 206f   certain print o
+00055b70: 7574 732e 2022 0a20 2020 2020 2020 2022  uts. ".        "
+00055b80: 4465 7461 696c 733a 3a20 4279 2064 6566  Details:: By def
+00055b90: 6175 6c74 2c20 692e 652e 2069 6620 2d2d  ault, i.e. if --
+00055ba0: 7365 7061 7261 746f 7220 6973 206e 6f74  separator is not
+00055bb0: 2075 7365 642c 2022 0a20 2020 2020 2020   used, ".       
+00055bc0: 2022 3420 7370 6163 6573 2061 7265 2075   "4 spaces are u
+00055bd0: 7365 6420 6173 2022 0a20 2020 2020 2020  sed as ".       
+00055be0: 2022 7365 7061 7261 746f 7220 6265 7477   "separator betw
+00055bf0: 6565 6e20 636f 6c75 6d6e 7320 696e 2070  een columns in p
+00055c00: 7269 6e74 2073 7461 7465 6d65 6e74 732e  rint statements.
+00055c10: 2059 6f75 2063 6f75 6c64 2073 6574 2022   You could set "
+00055c20: 0a20 2020 2020 2020 2022 6974 2074 6f20  .        "it to 
+00055c30: 275c 5c74 2720 6966 2079 6f75 2070 7265  '\\t' if you pre
+00055c40: 6665 7220 6120 7461 622c 2062 7574 2074  fer a tab, but t
+00055c50: 6162 7320 6172 6520 7573 7561 6c6c 7920  abs are usually 
+00055c60: 7265 706c 6163 6564 2022 0a20 2020 2020  replaced ".     
+00055c70: 2020 2022 7769 7468 2073 7061 6365 7320     "with spaces 
+00055c80: 6279 2074 6865 2074 6572 6d69 6e61 6c2e  by the terminal.
+00055c90: 2053 6f2c 2074 6861 7420 6d69 6768 7420   So, that might 
+00055ca0: 6e6f 7420 6769 7665 2079 6f75 2077 6861  not give you wha
+00055cb0: 7420 796f 7520 220a 2020 2020 2020 2020  t you ".        
+00055cc0: 2277 616e 742e 204d 6179 6265 2027 207c  "want. Maybe ' |
+00055cd0: 7c20 2720 6973 2061 6e20 616c 7465 726e  | ' is an altern
+00055ce0: 6174 6976 6520 6368 6f69 6365 2e22 2c0a  ative choice.",.
+00055cf0: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
+00055d00: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+00055d10: 2020 2022 2d2d 6163 6365 7373 2d74 6f6b     "--access-tok
+00055d20: 656e 222c 0a20 2020 2020 2020 2072 6571  en",.        req
+00055d30: 7569 7265 643d 4661 6c73 652c 0a20 2020  uired=False,.   
+00055d40: 2020 2020 2074 7970 653d 7374 722c 0a20       type=str,. 
+00055d50: 2020 2020 2020 206d 6574 6176 6172 3d22         metavar="
+00055d60: 4143 4345 5353 5f54 4f4b 454e 222c 0a20  ACCESS_TOKEN",. 
+00055d70: 2020 2020 2020 2068 656c 703d 2253 6574         help="Set
+00055d80: 2061 2063 7573 746f 6d20 6163 6365 7373   a custom access
+00055d90: 2074 6f6b 656e 2066 6f72 2075 7365 2062   token for use b
+00055da0: 7920 6365 7274 6169 6e20 6163 7469 6f6e  y certain action
+00055db0: 732e 2022 0a20 2020 2020 2020 2022 4465  s. ".        "De
+00055dc0: 7461 696c 733a 3a20 4974 2069 7320 616e  tails:: It is an
+00055dd0: 206f 7074 696f 6e61 6c20 6172 6775 6d65   optional argume
+00055de0: 6e74 2e20 220a 2020 2020 2020 2020 2242  nt. ".        "B
+00055df0: 7920 6465 6661 756c 7420 2d2d 6163 6365  y default --acce
+00055e00: 7373 2d74 6f6b 656e 2069 7320 6967 6e6f  ss-token is igno
+00055e10: 7265 6420 616e 6420 6e6f 7420 7573 6564  red and not used
+00055e20: 2e20 220a 2020 2020 2020 2020 2249 7420  . ".        "It 
+00055e30: 6973 2075 7365 6420 6279 2074 6865 202d  is used by the -
+00055e40: 2d64 656c 6574 652d 6d78 632c 202d 2d64  -delete-mxc, --d
+00055e50: 656c 6574 652d 6d78 632d 6265 666f 7265  elete-mxc-before
+00055e60: 2c20 220a 2020 2020 2020 2020 2261 6e64  , ".        "and
+00055e70: 202d 2d72 6573 7420 6163 7469 6f6e 732e   --rest actions.
+00055e80: 222c 0a20 2020 2029 0a20 2020 2061 702e  ",.    ).    ap.
+00055e90: 6164 645f 6172 6775 6d65 6e74 280a 2020  add_argument(.  
+00055ea0: 2020 2020 2020 222d 2d70 6173 7377 6f72        "--passwor
+00055eb0: 6422 2c0a 2020 2020 2020 2020 7265 7175  d",.        requ
+00055ec0: 6972 6564 3d46 616c 7365 2c0a 2020 2020  ired=False,.    
+00055ed0: 2020 2020 7479 7065 3d73 7472 2c0a 2020      type=str,.  
+00055ee0: 2020 2020 2020 6d65 7461 7661 723d 2250        metavar="P
+00055ef0: 4153 5357 4f52 4422 2c0a 2020 2020 2020  ASSWORD",.      
+00055f00: 2020 6865 6c70 3d22 5370 6563 6966 7920    help="Specify 
+00055f10: 6120 7061 7373 776f 7264 2066 6f72 2075  a password for u
+00055f20: 7365 2062 7920 6365 7274 6169 6e20 6163  se by certain ac
+00055f30: 7469 6f6e 732e 2022 0a20 2020 2020 2020  tions. ".       
+00055f40: 2022 4465 7461 696c 733a 3a20 4974 2069   "Details:: It i
+00055f50: 7320 616e 206f 7074 696f 6e61 6c20 6172  s an optional ar
+00055f60: 6775 6d65 6e74 2e20 220a 2020 2020 2020  gument. ".      
+00055f70: 2020 2242 7920 6465 6661 756c 7420 2d2d    "By default --
+00055f80: 7061 7373 776f 7264 2069 7320 6967 6e6f  password is igno
+00055f90: 7265 6420 616e 6420 6e6f 7420 7573 6564  red and not used
+00055fa0: 2e20 220a 2020 2020 2020 2020 2249 7420  . ".        "It 
+00055fb0: 6973 2075 7365 6420 6279 2027 2d2d 6c6f  is used by '--lo
+00055fc0: 6769 6e20 7061 7373 776f 7264 2720 616e  gin password' an
+00055fd0: 6420 272d 2d64 656c 6574 652d 6465 7669  d '--delete-devi
+00055fe0: 6365 2720 220a 2020 2020 2020 2020 2261  ce' ".        "a
+00055ff0: 6374 696f 6e73 2e20 220a 2020 2020 2020  ctions. ".      
+00056000: 2020 2249 6620 6e6f 7420 7072 6f76 6964    "If not provid
+00056010: 6564 2066 6f72 202d 2d6c 6f67 696e 2074  ed for --login t
+00056020: 6865 2075 7365 7220 7769 6c6c 2062 6520  he user will be 
+00056030: 7175 6572 6965 6420 7669 6120 6b65 7962  queried via keyb
+00056040: 6f61 7264 2e22 2c0a 2020 2020 290a 2020  oard.",.    ).  
+00056050: 2020 6170 2e61 6464 5f61 7267 756d 656e    ap.add_argumen
+00056060: 7428 0a20 2020 2020 2020 2022 2d2d 686f  t(.        "--ho
+00056070: 6d65 7365 7276 6572 222c 0a20 2020 2020  meserver",.     
+00056080: 2020 2072 6571 7569 7265 643d 4661 6c73     required=Fals
+00056090: 652c 0a20 2020 2020 2020 2074 7970 653d  e,.        type=
+000560a0: 7374 722c 0a20 2020 2020 2020 206d 6574  str,.        met
+000560b0: 6176 6172 3d22 484f 4d45 5345 5256 4552  avar="HOMESERVER
+000560c0: 5f55 524c 222c 0a20 2020 2020 2020 2068  _URL",.        h
+000560d0: 656c 703d 2253 7065 6369 6679 2061 2068  elp="Specify a h
+000560e0: 6f6d 6573 6572 7665 7220 666f 7220 7573  omeserver for us
+000560f0: 6520 6279 2063 6572 7461 696e 2061 6374  e by certain act
+00056100: 696f 6e73 2e20 220a 2020 2020 2020 2020  ions. ".        
+00056110: 2244 6574 6169 6c73 3a3a 2049 7420 6973  "Details:: It is
+00056120: 2061 6e20 6f70 7469 6f6e 616c 2061 7267   an optional arg
+00056130: 756d 656e 742e 2022 0a20 2020 2020 2020  ument. ".       
+00056140: 2022 4279 2064 6566 6175 6c74 202d 2d68   "By default --h
+00056150: 6f6d 6573 6572 7665 7220 6973 2069 676e  omeserver is ign
+00056160: 6f72 6564 2061 6e64 206e 6f74 2075 7365  ored and not use
+00056170: 642e 2022 0a20 2020 2020 2020 2022 4974  d. ".        "It
+00056180: 2069 7320 7573 6564 2062 7920 272d 2d6c   is used by '--l
+00056190: 6f67 696e 2720 6163 7469 6f6e 2e20 220a  ogin' action. ".
+000561a0: 2020 2020 2020 2020 2249 6620 6e6f 7420          "If not 
+000561b0: 7072 6f76 6964 6564 2066 6f72 202d 2d6c  provided for --l
+000561c0: 6f67 696e 2074 6865 2075 7365 7220 7769  ogin the user wi
+000561d0: 6c6c 2062 6520 7175 6572 6965 6420 7669  ll be queried vi
+000561e0: 6120 6b65 7962 6f61 7264 2e22 2c0a 2020  a keyboard.",.  
+000561f0: 2020 290a 2020 2020 6170 2e61 6464 5f61    ).    ap.add_a
+00056200: 7267 756d 656e 7428 0a20 2020 2020 2020  rgument(.       
+00056210: 2022 2d2d 6465 7669 6365 222c 2020 2320   "--device",  # 
+00056220: 646f 206e 6f74 2063 6f6e 6675 7365 2077  do not confuse w
+00056230: 6974 6820 2d2d 6465 7669 6365 730a 2020  ith --devices.  
+00056240: 2020 2020 2020 7265 7175 6972 6564 3d46        required=F
+00056250: 616c 7365 2c0a 2020 2020 2020 2020 7479  alse,.        ty
+00056260: 7065 3d73 7472 2c20 2023 2064 6576 6963  pe=str,  # devic
+00056270: 6520 6964 2c20 6465 7669 6365 206e 616d  e id, device nam
+00056280: 650a 2020 2020 2020 2020 6d65 7461 7661  e.        metava
+00056290: 723d 2244 4556 4943 455f 4e41 4d45 222c  r="DEVICE_NAME",
+000562a0: 0a20 2020 2020 2020 2068 656c 703d 2253  .        help="S
+000562b0: 7065 6369 6679 2061 2064 6576 6963 6520  pecify a device 
+000562c0: 6e61 6d65 2c20 666f 7220 7573 6520 6279  name, for use by
+000562d0: 2063 6572 7461 696e 2061 6374 696f 6e73   certain actions
+000562e0: 2e20 220a 2020 2020 2020 2020 2244 6574  . ".        "Det
+000562f0: 6169 6c73 3a3a 2049 7420 6973 2061 6e20  ails:: It is an 
+00056300: 6f70 7469 6f6e 616c 2061 7267 756d 656e  optional argumen
+00056310: 742e 2022 0a20 2020 2020 2020 2022 4279  t. ".        "By
+00056320: 2064 6566 6175 6c74 202d 2d64 6576 6963   default --devic
+00056330: 6520 6973 2069 676e 6f72 6564 2061 6e64  e is ignored and
+00056340: 206e 6f74 2075 7365 642e 2022 0a20 2020   not used. ".   
+00056350: 2020 2020 2022 4974 2069 7320 7573 6564       "It is used
+00056360: 2062 7920 272d 2d6c 6f67 696e 2720 6163   by '--login' ac
+00056370: 7469 6f6e 2e20 220a 2020 2020 2020 2020  tion. ".        
+00056380: 2249 6620 6e6f 7420 7072 6f76 6964 6564  "If not provided
+00056390: 2066 6f72 202d 2d6c 6f67 696e 2074 6865   for --login the
+000563a0: 2075 7365 7220 7769 6c6c 2062 6520 7175   user will be qu
+000563b0: 6572 6965 6420 7669 6120 6b65 7962 6f61  eried via keyboa
+000563c0: 7264 2e20 220a 2020 2020 2020 2020 2249  rd. ".        "I
+000563d0: 6620 796f 7520 7761 6e74 2074 6865 2064  f you want the d
+000563e0: 6566 6175 6c74 2076 616c 7565 2073 7065  efault value spe
+000563f0: 6369 6679 2027 272e 2022 0a20 2020 2020  cify ''. ".     
+00056400: 2020 2022 4d75 6c74 6970 6c65 2064 6576     "Multiple dev
+00056410: 6963 6573 2028 7769 7468 2064 6966 6665  ices (with diffe
+00056420: 7265 6e74 2064 6576 6963 6520 6964 2920  rent device id) 
+00056430: 6d61 7920 6861 7665 2074 6865 2073 616d  may have the sam
+00056440: 6520 6465 7669 6365 2022 0a20 2020 2020  e device ".     
+00056450: 2020 2022 6e61 6d65 2e20 496e 2073 686f     "name. In sho
+00056460: 7274 2c20 7468 6520 7361 6d65 2064 6576  rt, the same dev
+00056470: 6963 6520 6e61 6d65 2063 616e 2062 6520  ice name can be 
+00056480: 6173 7369 676e 6564 2074 6f20 6d75 6c74  assigned to mult
+00056490: 6970 6c65 2022 0a20 2020 2020 2020 2022  iple ".        "
+000564a0: 6469 6666 6572 656e 7420 6465 7669 6365  different device
+000564b0: 7320 6966 2064 6573 6972 6564 2e22 2c0a  s if desired.",.
+000564c0: 2020 2020 290a 2020 2020 6170 2e61 6464      ).    ap.add
+000564d0: 5f61 7267 756d 656e 7428 0a20 2020 2020  _argument(.     
+000564e0: 2020 2022 2d2d 7379 6e63 222c 0a20 2020     "--sync",.   
+000564f0: 2020 2020 2072 6571 7569 7265 643d 4661       required=Fa
+00056500: 6c73 652c 0a20 2020 2020 2020 2074 7970  lse,.        typ
+00056510: 653d 7374 722c 2020 2320 7379 6e63 206d  e=str,  # sync m
+00056520: 6574 686f 643a 206f 6666 2c20 6675 6c6c  ethod: off, full
+00056530: 2c20 2870 6172 7469 616c 290a 2020 2020  , (partial).    
+00056540: 2020 2020 6d65 7461 7661 723d 2246 554c      metavar="FUL
+00056550: 4c7c 4f46 4622 2c0a 2020 2020 2020 2020  L|OFF",.        
+00056560: 6865 6c70 3d22 4368 6f6f 7365 2073 796e  help="Choose syn
+00056570: 6368 726f 6e69 7a61 7469 6f6e 206f 7074  chronization opt
+00056580: 696f 6e73 2e20 220a 2020 2020 2020 2020  ions. ".        
+00056590: 2244 6574 6169 6c73 3a3a 2054 6869 7320  "Details:: This 
+000565a0: 6f70 7469 6f6e 2064 6563 6964 6573 206f  option decides o
+000565b0: 6e20 7768 6574 6865 7220 7468 6520 7072  n whether the pr
+000565c0: 6f67 7261 6d20 220a 2020 2020 2020 2020  ogram ".        
+000565d0: 2273 796e 6368 726f 6e69 7a65 7320 7468  "synchronizes th
+000565e0: 6520 7374 6174 6520 7769 7468 2074 6865  e state with the
+000565f0: 2073 6572 7665 7220 6265 666f 7265 2061   server before a
+00056600: 2027 7365 6e64 2720 6163 7469 6f6e 2e20   'send' action. 
+00056610: 220a 2020 2020 2020 2020 6622 4375 7272  ".        f"Curr
+00056620: 656e 746c 7920 7477 6f20 6368 6f69 6365  ently two choice
+00056630: 7320 6172 6520 6f66 6665 7265 643a 2027  s are offered: '
+00056640: 7b53 594e 435f 4655 4c4c 7d27 2061 6e64  {SYNC_FULL}' and
+00056650: 2027 7b53 594e 435f 4f46 467d 272e 2022   '{SYNC_OFF}'. "
+00056660: 0a20 2020 2020 2020 2022 5072 6f76 6964  .        "Provid
+00056670: 6520 6f6e 6520 6f66 2074 6865 7365 2063  e one of these c
+00056680: 686f 6963 6573 2e20 220a 2020 2020 2020  hoices. ".      
+00056690: 2020 6622 5468 6520 6465 6661 756c 7420    f"The default 
+000566a0: 6973 2027 7b53 594e 435f 4445 4641 554c  is '{SYNC_DEFAUL
+000566b0: 547d 272e 2049 6620 796f 7520 7761 6e74  T}'. If you want
+000566c0: 2074 6f20 7573 6520 7468 6520 6465 6661   to use the defa
+000566d0: 756c 742c 2022 0a20 2020 2020 2020 2022  ult, ".        "
+000566e0: 7468 656e 2074 6865 7265 2069 7320 6e6f  then there is no
+000566f0: 206e 6565 6420 746f 2075 7365 2074 6869   need to use thi
+00056700: 7320 6f70 7469 6f6e 2e20 220a 2020 2020  s option. ".    
+00056710: 2020 2020 6622 4966 2079 6f75 2068 6176      f"If you hav
+00056720: 6520 6368 6f73 656e 2027 7b53 594e 435f  e chosen '{SYNC_
+00056730: 4655 4c4c 7d27 2c20 220a 2020 2020 2020  FULL}', ".      
+00056740: 2020 2274 6865 2066 756c 6c20 7374 6174    "the full stat
+00056750: 652c 2061 6c6c 2073 7461 7465 2065 7665  e, all state eve
+00056760: 6e74 7320 7769 6c6c 2062 6520 7379 6e63  nts will be sync
+00056770: 6872 6f6e 697a 6564 2062 6574 7765 656e  hronized between
+00056780: 2022 0a20 2020 2020 2020 2022 7468 6973   ".        "this
+00056790: 2070 726f 6772 616d 2061 6e64 2074 6865   program and the
+000567a0: 2073 6572 7665 7220 6265 666f 7265 2061   server before a
+000567b0: 2027 7365 6e64 272e 2022 0a20 2020 2020   'send'. ".     
+000567c0: 2020 2066 2249 6620 796f 7520 6861 7665     f"If you have
+000567d0: 2063 686f 7365 6e20 277b 5359 4e43 5f4f   chosen '{SYNC_O
+000567e0: 4646 7d27 2c20 220a 2020 2020 2020 2020  FF}', ".        
+000567f0: 2273 796e 6368 726f 6e69 7a61 7469 6f6e  "synchronization
+00056800: 2077 696c 6c20 6265 2073 6b69 7070 6564   will be skipped
+00056810: 2065 6e74 6972 656c 7920 6265 666f 7265   entirely before
+00056820: 2074 6865 2027 7365 6e64 2720 220a 2020   the 'send' ".  
+00056830: 2020 2020 2020 2277 6869 6368 2077 696c        "which wil
+00056840: 6c20 696d 7072 6f76 6520 7065 7266 6f72  l improve perfor
+00056850: 6d61 6e63 652e 222c 0a20 2020 2029 0a20  mance.",.    ). 
+00056860: 2020 2061 702e 6164 645f 6172 6775 6d65     ap.add_argume
+00056870: 6e74 280a 2020 2020 2020 2020 222d 6f22  nt(.        "-o"
+00056880: 2c20 2023 2069 6e63 6f6d 7061 7469 626c  ,  # incompatibl
+00056890: 6520 6368 616e 6765 2044 6563 2032 3032  e change Dec 202
+000568a0: 322c 202d 6f20 6d6f 7665 6420 6672 6f6d  2, -o moved from
+000568b0: 202d 2d6f 732d 6e6f 7469 6679 0a20 2020   --os-notify.   
+000568c0: 2020 2020 2022 2d2d 6f75 7470 7574 222c       "--output",
+000568d0: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+000568e0: 643d 4661 6c73 652c 0a20 2020 2020 2020  d=False,.       
+000568f0: 2074 7970 653d 7374 722c 2020 2320 6f75   type=str,  # ou
+00056900: 7470 7574 206d 6574 686f 643a 2074 6578  tput method: tex
+00056910: 742c 206a 736f 6e2c 206a 736f 6e2d 6d61  t, json, json-ma
+00056920: 782c 202e 2e2e 0a20 2020 2020 2020 2064  x, ....        d
+00056930: 6566 6175 6c74 3d4f 5554 5055 545f 4445  efault=OUTPUT_DE
+00056940: 4641 554c 542c 2020 2320 7768 656e 202d  FAULT,  # when -
+00056950: 2d6f 7574 7075 7420 6973 206e 6f74 2075  -output is not u
+00056960: 7365 640a 2020 2020 2020 2020 6d65 7461  sed.        meta
+00056970: 7661 723d 2254 4558 547c 4a53 4f4e 7c4a  var="TEXT|JSON|J
+00056980: 534f 4e2d 4d41 587c 4a53 4f4e 2d53 5045  SON-MAX|JSON-SPE
+00056990: 4322 2c0a 2020 2020 2020 2020 6865 6c70  C",.        help
+000569a0: 3d22 5365 6c65 6374 2061 6e20 6f75 7470  ="Select an outp
+000569b0: 7574 2066 6f72 6d61 742e 2022 0a20 2020  ut format. ".   
+000569c0: 2020 2020 2022 4465 7461 696c 733a 3a20       "Details:: 
+000569d0: 5468 6973 206f 7074 696f 6e20 6465 6369  This option deci
+000569e0: 6465 7320 6f6e 2068 6f77 2074 6865 206f  des on how the o
+000569f0: 7574 7075 7420 6973 2070 7265 7365 6e74  utput is present
+00056a00: 6564 2e20 220a 2020 2020 2020 2020 6622  ed. ".        f"
+00056a10: 4375 7272 656e 746c 7920 6f66 6665 7265  Currently offere
+00056a20: 6420 6368 6f69 6365 7320 6172 653a 2027  d choices are: '
+00056a30: 7b4f 5554 5055 545f 5445 5854 7d27 2c20  {OUTPUT_TEXT}', 
+00056a40: 277b 4f55 5450 5554 5f4a 534f 4e7d 272c  '{OUTPUT_JSON}',
+00056a50: 2022 0a20 2020 2020 2020 2066 2227 7b4f   ".        f"'{O
+00056a60: 5554 5055 545f 4a53 4f4e 5f4d 4158 7d27  UTPUT_JSON_MAX}'
+00056a70: 2c20 616e 6420 277b 4f55 5450 5554 5f4a  , and '{OUTPUT_J
+00056a80: 534f 4e5f 5350 4543 7d27 2e20 220a 2020  SON_SPEC}'. ".  
+00056a90: 2020 2020 2020 2250 726f 7669 6465 206f        "Provide o
+00056aa0: 6e65 206f 6620 7468 6573 6520 6368 6f69  ne of these choi
+00056ab0: 6365 732e 2022 0a20 2020 2020 2020 2066  ces. ".        f
+00056ac0: 2254 6865 2064 6566 6175 6c74 2069 7320  "The default is 
+00056ad0: 277b 4f55 5450 5554 5f44 4546 4155 4c54  '{OUTPUT_DEFAULT
+00056ae0: 7d27 2e20 4966 2079 6f75 2077 616e 7420  }'. If you want 
+00056af0: 746f 2075 7365 2074 6865 2064 6566 6175  to use the defau
+00056b00: 6c74 2c20 220a 2020 2020 2020 2020 2274  lt, ".        "t
+00056b10: 6865 6e20 7468 6572 6520 6973 206e 6f20  hen there is no 
+00056b20: 6e65 6564 2074 6f20 7573 6520 7468 6973  need to use this
+00056b30: 206f 7074 696f 6e2e 2022 0a20 2020 2020   option. ".     
+00056b40: 2020 2066 2249 6620 796f 7520 6861 7665     f"If you have
+00056b50: 2063 686f 7365 6e20 277b 4f55 5450 5554   chosen '{OUTPUT
+00056b60: 5f54 4558 547d 272c 2022 0a20 2020 2020  _TEXT}', ".     
+00056b70: 2020 2022 7468 6520 6f75 7470 7574 2077     "the output w
+00056b80: 696c 6c20 6265 2066 6f72 6d61 7474 6564  ill be formatted
+00056b90: 2077 6974 6820 7468 6520 696e 7465 6e74   with the intent
+00056ba0: 696f 6e20 746f 2062 6520 220a 2020 2020  ion to be ".    
+00056bb0: 2020 2020 2263 6f6e 7375 6d65 6420 6279      "consumed by
+00056bc0: 2068 756d 616e 732c 2069 2e65 2e20 7265   humans, i.e. re
+00056bd0: 6164 6162 6c65 2074 6578 742e 2022 0a20  adable text. ". 
+00056be0: 2020 2020 2020 2066 2249 6620 796f 7520         f"If you 
+00056bf0: 6861 7665 2063 686f 7365 6e20 277b 4f55  have chosen '{OU
+00056c00: 5450 5554 5f4a 534f 4e7d 272c 2022 0a20  TPUT_JSON}', ". 
+00056c10: 2020 2020 2020 2022 7468 6520 6f75 7470         "the outp
+00056c20: 7574 2077 696c 6c20 6265 2066 6f72 6d61  ut will be forma
+00056c30: 7474 6564 2061 7320 4a53 4f4e 2e20 220a  tted as JSON. ".
+00056c40: 2020 2020 2020 2020 2254 6865 2063 6f6e          "The con
+00056c50: 7465 6e74 206f 6620 7468 6520 4a53 4f4e  tent of the JSON
+00056c60: 206f 626a 6563 7420 6d61 7463 6865 7320   object matches 
+00056c70: 7468 6520 6461 7461 2070 726f 7669 6465  the data provide
+00056c80: 6420 6279 2074 6865 2022 0a20 2020 2020  d by the ".     
+00056c90: 2020 2022 6d61 7472 6978 2d6e 696f 2053     "matrix-nio S
+00056ca0: 444b 2e20 496e 2073 6f6d 6520 6f63 6361  DK. In some occa
+00056cb0: 7369 6f6e 7320 7468 6520 6f75 7470 7574  sions the output
+00056cc0: 2069 7320 656e 6861 6e63 6564 2022 0a20   is enhanced ". 
+00056cd0: 2020 2020 2020 2022 6279 2068 6176 696e         "by havin
+00056ce0: 6720 6120 6665 7720 6578 7472 6120 6461  g a few extra da
+00056cf0: 7461 2069 7465 6d73 2061 6464 6564 2066  ta items added f
+00056d00: 6f72 2063 6f6e 7665 6e69 656e 6365 2e20  or convenience. 
+00056d10: 220a 2020 2020 2020 2020 2249 6e20 6d6f  ".        "In mo
+00056d20: 7374 2063 6173 6573 2074 6865 206f 7574  st cases the out
+00056d30: 7075 7420 7769 6c6c 2062 6520 7072 6f63  put will be proc
+00056d40: 6573 7365 6420 6279 206f 7468 6572 2070  essed by other p
+00056d50: 726f 6772 616d 7320 220a 2020 2020 2020  rograms ".      
+00056d60: 2020 2272 6174 6865 7220 7468 616e 2072    "rather than r
+00056d70: 6561 6420 6279 2068 756d 616e 732e 2022  ead by humans. "
+00056d80: 0a20 2020 2020 2020 2066 224f 7074 696f  .        f"Optio
+00056d90: 6e20 277b 4f55 5450 5554 5f4a 534f 4e5f  n '{OUTPUT_JSON_
+00056da0: 4d41 587d 2720 6973 2070 7261 6374 6963  MAX}' is practic
+00056db0: 616c 6c79 2074 6865 2073 616d 6520 6173  ally the same as
+00056dc0: 2022 0a20 2020 2020 2020 2066 2227 7b4f   ".        f"'{O
+00056dd0: 5554 5055 545f 4a53 4f4e 7d27 2c20 220a  UTPUT_JSON}', ".
+00056de0: 2020 2020 2020 2020 2262 7574 2079 6574          "but yet
+00056df0: 2061 6e6f 7468 6572 2061 6464 6974 696f   another additio
+00056e00: 6e61 6c20 6669 656c 6420 6973 2061 6464  nal field is add
+00056e10: 6564 2e20 220a 2020 2020 2020 2020 2254  ed. ".        "T
+00056e20: 6865 2064 6174 6120 6974 656d 2027 7472  he data item 'tr
+00056e30: 616e 7370 6f72 745f 7265 7370 6f6e 7365  ansport_response
+00056e40: 2720 7768 6963 6820 6769 7665 7320 696e  ' which gives in
+00056e50: 666f 726d 6174 696f 6e20 6f6e 2022 0a20  formation on ". 
+00056e60: 2020 2020 2020 2022 686f 7720 7468 6520         "how the 
+00056e70: 6461 7461 2077 6173 206f 6274 6169 6e65  data was obtaine
+00056e80: 6420 616e 6420 7472 616e 7370 6f72 7465  d and transporte
+00056e90: 6420 6973 2061 6c73 6f20 6265 696e 6720  d is also being 
+00056ea0: 6164 6465 642e 2022 0a20 2020 2020 2020  added. ".       
+00056eb0: 2022 466f 7220 272d 2d6c 6973 7465 6e27   "For '--listen'
+00056ec0: 2061 2066 6577 206d 6f72 6520 6669 656c   a few more fiel
+00056ed0: 6473 2061 7265 2061 6464 6564 2e20 220a  ds are added. ".
+00056ee0: 2020 2020 2020 2020 2249 6e20 6d6f 7374          "In most
+00056ef0: 2063 6173 6573 2074 6865 206f 7574 7075   cases the outpu
+00056f00: 7420 7769 6c6c 2062 6520 7072 6f63 6573  t will be proces
+00056f10: 7365 6420 6279 206f 7468 6572 2070 726f  sed by other pro
+00056f20: 6772 616d 7320 220a 2020 2020 2020 2020  grams ".        
+00056f30: 2272 6174 6865 7220 7468 616e 2072 6561  "rather than rea
+00056f40: 6420 6279 2068 756d 616e 732e 2022 0a20  d by humans. ". 
+00056f50: 2020 2020 2020 2066 224f 7074 696f 6e20         f"Option 
+00056f60: 277b 4f55 5450 5554 5f4a 534f 4e5f 5350  '{OUTPUT_JSON_SP
+00056f70: 4543 7d27 206f 6e6c 7920 7072 696e 7473  EC}' only prints
+00056f80: 2069 6e66 6f72 6d61 7469 6f6e 2074 6861   information tha
+00056f90: 7420 6164 6865 7265 7320 220a 2020 2020  t adheres ".    
+00056fa0: 2020 2020 2231 2d74 6f2d 3120 746f 2074      "1-to-1 to t
+00056fb0: 6865 204d 6174 7269 7820 5370 6563 6966  he Matrix Specif
+00056fc0: 6963 6174 696f 6e2e 2043 7572 7265 6e74  ication. Current
+00056fd0: 6c79 206f 6e6c 7920 7468 6520 6576 656e  ly only the even
+00056fe0: 7473 2022 0a20 2020 2020 2020 2022 6f6e  ts ".        "on
+00056ff0: 2027 2d2d 6c69 7374 656e 2720 616e 6420   '--listen' and 
+00057000: 272d 2d74 6169 6c27 2070 726f 7669 6465  '--tail' provide
+00057010: 2064 6174 6120 6578 6163 746c 7920 6173   data exactly as
+00057020: 2069 6e20 7468 6520 220a 2020 2020 2020   in the ".      
+00057030: 2020 224d 6174 7269 7820 5370 6563 6966    "Matrix Specif
+00057040: 6963 6174 696f 6e2e 2049 6620 6e6f 2064  ication. If no d
+00057050: 6174 6120 6973 2061 7661 696c 6162 6c65  ata is available
+00057060: 2074 6861 7420 636f 7272 6573 706f 6e64   that correspond
+00057070: 7320 220a 2020 2020 2020 2020 2265 7861  s ".        "exa
+00057080: 6374 6c79 2077 6974 6820 7468 6520 4d61  ctly with the Ma
+00057090: 7472 6978 2053 7065 6369 6669 6361 7469  trix Specificati
+000570a0: 6f6e 2c20 6e6f 2064 6174 6120 7769 6c6c  on, no data will
+000570b0: 2062 6520 7072 696e 7465 642e 2022 0a20   be printed. ". 
+000570c0: 2020 2020 2020 2022 496e 2073 686f 7274         "In short
+000570d0: 2c20 6375 7272 656e 746c 7920 272d 2d6a  , currently '--j
+000570e0: 736f 6e2d 7370 6563 2720 6f6e 6c79 2070  son-spec' only p
+000570f0: 726f 7669 6465 7320 6f75 7470 7574 7320  rovides outputs 
+00057100: 666f 7220 220a 2020 2020 2020 2020 2227  for ".        "'
+00057110: 2d2d 6c69 7374 656e 2720 616e 6420 272d  --listen' and '-
+00057120: 2d74 6169 6c27 2e20 416c 6c20 6f74 6865  -tail'. All othe
+00057130: 7220 6172 6775 6d65 6e74 7320 6c69 6b65  r arguments like
+00057140: 2027 2d2d 6765 742d 726f 6f6d 2d69 6e66   '--get-room-inf
+00057150: 6f27 2022 0a20 2020 2020 2020 2022 7769  o' ".        "wi
+00057160: 6c6c 2070 7269 6e74 206e 6f20 6f75 7470  ll print no outp
+00057170: 7574 2e20 222c 0a20 2020 2029 0a20 2020  ut. ",.    ).   
+00057180: 2061 702e 6164 645f 6172 6775 6d65 6e74   ap.add_argument
+00057190: 280a 2020 2020 2020 2020 222d 2d72 6f6f  (.        "--roo
+000571a0: 6d2d 696e 7669 7465 7322 2c0a 2020 2020  m-invites",.    
+000571b0: 2020 2020 7265 7175 6972 6564 3d46 616c      required=Fal
+000571c0: 7365 2c0a 2020 2020 2020 2020 7479 7065  se,.        type
+000571d0: 3d73 7472 2c0a 2020 2020 2020 2020 6465  =str,.        de
+000571e0: 6661 756c 743d 494e 5649 5445 535f 554e  fault=INVITES_UN
+000571f0: 5553 4544 5f44 4546 4155 4c54 2c20 2023  USED_DEFAULT,  #
+00057200: 2077 6865 6e20 2d2d 726f 6f6d 2d69 6e76   when --room-inv
+00057210: 6974 6573 2069 7320 6e6f 7420 7573 6564  ites is not used
+00057220: 0a20 2020 2020 2020 206e 6172 6773 3d22  .        nargs="
+00057230: 3f22 2c20 2023 206d 616b 6573 2074 6865  ?",  # makes the
+00057240: 2077 6f72 6420 6f70 7469 6f6e 616c 0a20   word optional. 
+00057250: 2020 2020 2020 2023 2077 6865 6e20 2d2d         # when --
+00057260: 726f 6f6d 2d69 6e76 6974 6573 2069 7320  room-invites is 
+00057270: 7573 6564 2c20 6275 7420 7465 7874 2069  used, but text i
+00057280: 7320 6e6f 7420 6164 6465 640a 2020 2020  s not added.    
+00057290: 2020 2020 636f 6e73 743d 494e 5649 5445      const=INVITE
+000572a0: 535f 5553 4544 5f44 4546 4155 4c54 2c0a  S_USED_DEFAULT,.
+000572b0: 2020 2020 2020 2020 6d65 7461 7661 723d          metavar=
+000572c0: 224c 4953 547c 4a4f 494e 7c4c 4953 542b  "LIST|JOIN|LIST+
+000572d0: 4a4f 494e 222c 0a20 2020 2020 2020 2068  JOIN",.        h
+000572e0: 656c 703d 224c 6973 7420 726f 6f6d 2069  elp="List room i
+000572f0: 6e76 6974 6174 696f 6e73 2061 6e64 2f6f  nvitations and/o
+00057300: 7220 6a6f 696e 2069 6e76 6974 6564 2072  r join invited r
+00057310: 6f6f 6d73 2e20 220a 2020 2020 2020 2020  ooms. ".        
+00057320: 2244 6574 6169 6c73 3a3a 2054 6869 7320  "Details:: This 
+00057330: 6f70 7469 6f6e 2074 616b 6573 207a 6572  option takes zer
+00057340: 6f20 6f72 206f 6e65 2061 7267 756d 656e  o or one argumen
+00057350: 742e 2022 0a20 2020 2020 2020 2066 2249  t. ".        f"I
+00057360: 6620 6e6f 2061 7267 756d 656e 7420 6973  f no argument is
+00057370: 2067 6976 656e 2c20 277b 494e 5649 5445   given, '{INVITE
+00057380: 535f 4c49 5354 7d27 2069 7320 6173 7375  S_LIST}' is assu
+00057390: 6d65 6420 7768 6963 6820 7769 6c6c 2022  med which will "
+000573a0: 0a20 2020 2020 2020 2022 6c69 7374 2061  .        "list a
+000573b0: 6c6c 2072 6f6f 6d20 696e 7669 7461 7469  ll room invitati
+000573c0: 6f6e 2065 7665 6e74 7320 6173 2074 6865  on events as the
+000573d0: 7920 6172 6520 7265 6365 6976 6564 2e20  y are received. 
+000573e0: 220a 2020 2020 2020 2020 224c 6973 7469  ".        "Listi
+000573f0: 6e67 2077 696c 6c20 7072 696e 7420 7468  ng will print th
+00057400: 6520 726f 6f6d 2069 6420 616e 6420 6f74  e room id and ot
+00057410: 6865 7220 696e 666f 726d 6174 696f 6e20  her information 
+00057420: 746f 2073 7461 6e64 6172 6420 220a 2020  to standard ".  
+00057430: 2020 2020 2020 226f 7574 7075 742e 2022        "output. "
+00057440: 0a20 2020 2020 2020 2066 2227 7b49 4e56  .        f"'{INV
+00057450: 4954 4553 5f4a 4f49 4e7d 2720 7769 6c6c  ITES_JOIN}' will
+00057460: 206a 6f69 6e20 7468 6520 726f 6f6d 2873   join the room(s
+00057470: 2920 6561 6368 2074 696d 6520 6120 726f  ) each time a ro
+00057480: 6f6d 2069 6e76 6974 6174 696f 6e20 220a  om invitation ".
+00057490: 2020 2020 2020 2020 2269 7320 7265 6365          "is rece
+000574a0: 6976 6564 2e20 220a 2020 2020 2020 2020  ived. ".        
+000574b0: 6622 277b 494e 5649 5445 535f 4c49 5354  f"'{INVITES_LIST
+000574c0: 5f4a 4f49 4e7d 2720 7769 6c6c 2064 6f20  _JOIN}' will do 
+000574d0: 626f 7468 2c20 6c69 7374 2074 6865 2069  both, list the i
+000574e0: 6e76 6974 6174 696f 6e73 2061 7320 7765  nvitations as we
+000574f0: 6c6c 2022 0a20 2020 2020 2020 2022 6173  ll ".        "as
+00057500: 2061 7574 6f6d 6174 6963 616c 6c79 206a   automatically j
+00057510: 6f69 6e20 7468 6520 726f 6f6d 7320 746f  oin the rooms to
+00057520: 2077 6869 6368 2061 6e20 696e 7669 7461   which an invita
+00057530: 7469 6f6e 2077 6173 2072 6563 6569 7665  tion was receive
+00057540: 642e 2022 0a20 2020 2020 2020 2022 272d  d. ".        "'-
+00057550: 2d72 6f6f 6d2d 696e 7669 7465 7327 2063  -room-invites' c
+00057560: 616e 2062 6520 636f 6d62 696e 6564 2077  an be combined w
+00057570: 6974 6820 272d 2d6c 6973 7465 6e27 2e20  ith '--listen'. 
+00057580: 220a 2020 2020 2020 2020 2249 6620 616e  ".        "If an
+00057590: 6420 6f6e 6c79 2069 6620 272d 2d6c 6973  d only if '--lis
+000575a0: 7465 6e20 666f 7265 7665 7227 2069 7320  ten forever' is 
+000575b0: 7573 6564 2c20 7769 6c6c 2074 6865 2070  used, will the p
+000575c0: 726f 6772 616d 2022 0a20 2020 2020 2020  rogram ".       
+000575d0: 2022 6c69 7374 656e 2063 6f6e 7469 6e75   "listen continu
+000575e0: 6f75 736c 7920 666f 7220 726f 6f6d 2069  ously for room i
+000575f0: 6e76 6974 6573 2e20 220a 2020 2020 2020  nvites. ".      
+00057600: 2020 2249 6e20 616c 6c20 6f74 6865 7220    "In all other 
+00057610: 6361 7365 732c 2074 6865 2070 726f 6772  cases, the progr
+00057620: 616d 206f 6e6c 7920 6c6f 6f6b 7320 666f  am only looks fo
+00057630: 7220 726f 6f6d 2069 6e76 6974 6174 696f  r room invitatio
+00057640: 6e20 220a 2020 2020 2020 2020 2265 7665  n ".        "eve
+00057650: 6e74 7320 6f6e 6365 3b20 616e 6420 6974  nts once; and it
+00057660: 2064 6f65 7320 736f 2062 6566 6f72 6520   does so before 
+00057670: 616e 7920 706f 7373 6962 6c65 206c 6973  any possible lis
+00057680: 7465 6e69 6e67 2074 6f20 220a 2020 2020  tening to ".    
+00057690: 2020 2020 226d 6573 7361 6765 732e 2022      "messages. "
+000576a0: 0a20 2020 2020 2020 2022 5761 726e 696e  .        "Warnin
+000576b0: 673a 2065 7665 6e74 7320 6172 6520 7573  g: events are us
+000576c0: 7561 6c6c 7920 6465 6c69 7665 7265 6420  ually delivered 
+000576d0: 6f6e 6365 2e20 536f 2c20 6966 2079 6f75  once. So, if you
+000576e0: 206c 6973 7465 6e20 220a 2020 2020 2020   listen ".      
+000576f0: 2020 2266 6f72 2061 6e64 206c 6973 7420    "for and list 
+00057700: 696e 7669 7465 7320 796f 7520 7769 6c6c  invites you will
+00057710: 2067 6574 2074 6865 6d20 616e 6420 6c69   get them and li
+00057720: 7374 2074 6865 6d20 7468 6520 6669 7273  st them the firs
+00057730: 7420 220a 2020 2020 2020 2020 2274 696d  t ".        "tim
+00057740: 6520 796f 7520 7275 6e20 272d 2d72 6f6f  e you run '--roo
+00057750: 6d2d 696e 7669 7465 7320 6c69 7374 272e  m-invites list'.
+00057760: 204f 6e20 7468 6520 7365 636f 6e64 2072   On the second r
+00057770: 756e 206f 6620 220a 2020 2020 2020 2020  un of ".        
+00057780: 2227 2d2d 726f 6f6d 2d69 6e76 6974 6573  "'--room-invites
+00057790: 206c 6973 7427 2074 6865 2065 7665 6e74   list' the event
+000577a0: 7320 7769 6c6c 206e 6f74 2062 6520 7265  s will not be re
+000577b0: 706c 6179 6564 2061 6e64 2022 0a20 2020  played and ".   
+000577c0: 2020 2020 2022 6e6f 7420 6265 206c 6973       "not be lis
+000577d0: 7465 642e 2022 0a20 2020 2020 2020 2022  ted. ".        "
+000577e0: 4865 6e63 652c 2069 6620 796f 7520 6c69  Hence, if you li
+000577f0: 7374 2074 6865 2069 6e76 6974 6573 2c20  st the invites, 
+00057800: 796f 7520 6d69 6768 7420 7761 6e74 2074  you might want t
+00057810: 6f20 7374 6f72 6520 7468 6520 6f75 7470  o store the outp
+00057820: 7574 2022 0a20 2020 2020 2020 2022 2872  ut ".        "(r
+00057830: 6f6f 6d20 6964 2920 736f 2074 6861 7420  oom id) so that 
+00057840: 796f 7520 6361 6e20 6a6f 696e 2074 6865  you can join the
+00057850: 2072 6f6f 6d20 6c61 7465 7220 7769 7468   room later with
+00057860: 2027 2d2d 726f 6f6d 2d6a 6f69 6e27 2022   '--room-join' "
+00057870: 0a20 2020 2020 2020 2022 666f 7220 6578  .        "for ex
+00057880: 616d 706c 652e 2022 0a20 2020 2020 2020  ample. ".       
+00057890: 2022 446f 6e27 7420 636f 6e66 7573 6520   "Don't confuse 
+000578a0: 7468 6973 206f 7074 696f 6e20 7769 7468  this option with
+000578b0: 202d 2d72 6f6f 6d2d 696e 7669 7465 2e22   --room-invite."
+000578c0: 2c0a 2020 2020 290a 2020 2020 6170 2e61  ,.    ).    ap.a
+000578d0: 6464 5f61 7267 756d 656e 7428 0a20 2020  dd_argument(.   
+000578e0: 2020 2020 2022 2d76 222c 2020 2320 696e       "-v",  # in
+000578f0: 636f 6d70 6174 6962 6c65 2063 6861 6e67  compatible chang
+00057900: 6520 4465 6320 3230 3232 2c20 2d76 206d  e Dec 2022, -v m
+00057910: 6f76 6564 2068 6572 6520 6672 6f6d 202d  oved here from -
+00057920: 2d76 6572 6966 790a 2020 2020 2020 2020  -verify.        
+00057930: 222d 5622 2c20 2023 2065 7863 6570 7469  "-V",  # excepti
+00057940: 6f6e 2c20 616c 6c6f 7720 616c 736f 2075  on, allow also u
+00057950: 7070 6572 6361 7365 2056 0a20 2020 2020  ppercase V.     
+00057960: 2020 2022 2d2d 7665 7273 696f 6e22 2c0a     "--version",.
+00057970: 2020 2020 2020 2020 7265 7175 6972 6564          required
+00057980: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00057990: 7479 7065 3d73 7472 2c0a 2020 2020 2020  type=str,.      
+000579a0: 2020 6465 6661 756c 743d 5645 5253 494f    default=VERSIO
+000579b0: 4e5f 554e 5553 4544 5f44 4546 4155 4c54  N_UNUSED_DEFAULT
+000579c0: 2c20 2023 2077 6865 6e20 2d74 2069 7320  ,  # when -t is 
+000579d0: 6e6f 7420 7573 6564 0a20 2020 2020 2020  not used.       
+000579e0: 206e 6172 6773 3d22 3f22 2c20 2023 206d   nargs="?",  # m
+000579f0: 616b 6573 2074 6865 2077 6f72 6420 6f70  akes the word op
+00057a00: 7469 6f6e 616c 0a20 2020 2020 2020 2023  tional.        #
+00057a10: 2077 6865 6e20 2d76 2069 7320 7573 6564   when -v is used
+00057a20: 2c20 6275 7420 7465 7874 2069 7320 6e6f  , but text is no
+00057a30: 7420 6164 6465 640a 2020 2020 2020 2020  t added.        
+00057a40: 636f 6e73 743d 5645 5253 494f 4e5f 5553  const=VERSION_US
+00057a50: 4544 5f44 4546 4155 4c54 2c0a 2020 2020  ED_DEFAULT,.    
+00057a60: 2020 2020 6d65 7461 7661 723d 2250 5249      metavar="PRI
+00057a70: 4e54 7c43 4845 434b 222c 0a20 2020 2020  NT|CHECK",.     
+00057a80: 2020 2068 656c 703d 2250 7269 6e74 2076     help="Print v
+00057a90: 6572 7369 6f6e 2069 6e66 6f72 6d61 7469  ersion informati
+00057aa0: 6f6e 206f 7220 6368 6563 6b20 666f 7220  on or check for 
+00057ab0: 7570 6461 7465 732e 2022 0a20 2020 2020  updates. ".     
+00057ac0: 2020 2022 4465 7461 696c 733a 3a20 5468     "Details:: Th
+00057ad0: 6973 206f 7074 696f 6e20 7461 6b65 7320  is option takes 
+00057ae0: 7a65 726f 206f 7220 6f6e 6520 6172 6775  zero or one argu
+00057af0: 6d65 6e74 2e20 220a 2020 2020 2020 2020  ment. ".        
+00057b00: 6622 4966 206e 6f20 6172 6775 6d65 6e74  f"If no argument
+00057b10: 2069 7320 6769 7665 6e2c 2027 7b50 5249   is given, '{PRI
+00057b20: 4e54 7d27 2069 7320 6173 7375 6d65 6420  NT}' is assumed 
+00057b30: 7768 6963 6820 7769 6c6c 2022 0a20 2020  which will ".   
+00057b40: 2020 2020 2066 2270 7269 6e74 2074 6865       f"print the
+00057b50: 2076 6572 7369 6f6e 206f 6620 7468 6520   version of the 
+00057b60: 6375 7272 656e 746c 7920 696e 7374 616c  currently instal
+00057b70: 6c65 6420 2750 524f 475f 5749 5448 4f55  led 'PROG_WITHOU
+00057b80: 545f 4558 5427 2022 0a20 2020 2020 2020  T_EXT' ".       
+00057b90: 2066 2270 6163 6b61 6765 2e20 277b 4348   f"package. '{CH
+00057ba0: 4543 4b7d 2720 6973 2074 6865 2061 6c74  ECK}' is the alt
+00057bb0: 6572 6e61 7469 7665 2e20 220a 2020 2020  ernative. ".    
+00057bc0: 2020 2020 2227 7b43 4845 434b 7d27 2063      "'{CHECK}' c
+00057bd0: 6f6e 6e65 6374 7320 746f 2068 7474 7073  onnects to https
+00057be0: 3a2f 2f70 7970 692e 6f72 6720 616e 6420  ://pypi.org and 
+00057bf0: 6765 7473 2074 6865 2076 6572 7369 6f6e  gets the version
+00057c00: 2022 0a20 2020 2020 2020 2022 6e75 6d62   ".        "numb
+00057c10: 6572 206f 6620 6c61 7465 7374 2073 7461  er of latest sta
+00057c20: 626c 6520 7265 6c65 6173 652e 2054 6865  ble release. The
+00057c30: 7265 2069 7320 6e6f 2027 6361 6c6c 696e  re is no 'callin
+00057c40: 6720 686f 6d65 2720 220a 2020 2020 2020  g home' ".      
+00057c50: 2020 226f 6e20 6576 6572 7920 7275 6e2c    "on every run,
+00057c60: 206f 6e6c 7920 6120 2763 6865 636b 2070   only a 'check p
+00057c70: 7970 692e 6f72 6727 2075 706f 6e20 7265  ypi.org' upon re
+00057c80: 7175 6573 742e 2059 6f75 7220 220a 2020  quest. Your ".  
+00057c90: 2020 2020 2020 2270 7269 7661 6379 2069        "privacy i
+00057ca0: 7320 7072 6f74 6563 7465 642e 2054 6865  s protected. The
+00057cb0: 206e 6577 2072 656c 6561 7365 2069 7320   new release is 
+00057cc0: 6e65 6974 6865 7220 646f 776e 6c6f 6164  neither download
+00057cd0: 6564 2c20 220a 2020 2020 2020 2020 226e  ed, ".        "n
+00057ce0: 6f72 2069 6e73 7461 6c6c 6564 2e20 4974  or installed. It
+00057cf0: 206a 7573 7420 696e 666f 726d 7320 796f   just informs yo
+00057d00: 752e 2022 0a20 2020 2020 2020 2022 4166  u. ".        "Af
+00057d10: 7465 7220 7072 696e 7469 6e67 2076 6572  ter printing ver
+00057d20: 7369 6f6e 2069 6e66 6f72 6d61 7469 6f6e  sion information
+00057d30: 2074 6865 2022 0a20 2020 2020 2020 2022   the ".        "
+00057d40: 7072 6f67 7261 6d20 7769 6c6c 2063 6f6e  program will con
+00057d50: 7469 6e75 6520 746f 2072 756e 2e20 5468  tinue to run. Th
+00057d60: 6973 2069 7320 7573 6566 756c 2066 6f72  is is useful for
+00057d70: 2068 6176 696e 6720 7665 7273 696f 6e20   having version 
+00057d80: 220a 2020 2020 2020 2020 226e 756d 6265  ".        "numbe
+00057d90: 7220 696e 2074 6865 206c 6f67 2066 696c  r in the log fil
+00057da0: 6573 2e22 2c0a 2020 2020 290a 2020 2020  es.",.    ).    
+00057db0: 6773 2e70 6120 3d20 6170 2e70 6172 7365  gs.pa = ap.parse
+00057dc0: 5f61 7267 7328 290a 2020 2020 2320 7772  _args().    # wr
+00057dd0: 6170 2061 6e64 2069 6e64 656e 743a 2068  ap and indent: h
+00057de0: 7474 7073 3a2f 2f74 6f77 6172 6473 6461  ttps://towardsda
+00057df0: 7461 7363 6965 6e63 652e 636f 6d2f 362d  tascience.com/6-
+00057e00: 6661 6e63 792d 6275 696c 742d 696e 2d74  fancy-built-in-t
+00057e10: 6578 742d 0a20 2020 2023 2020 2020 2020  ext-.    #      
+00057e20: 2020 2020 2020 2020 2020 2020 7772 6170              wrap
+00057e30: 7069 6e67 2d74 6563 686e 6971 7565 732d  ping-techniques-
+00057e40: 696e 2d70 7974 686f 6e2d 6137 3863 6335  in-python-a78cc5
+00057e50: 3763 3235 3636 0a20 2020 2023 2069 6620  7c2566.    # if 
+00057e60: 6f75 7470 7574 2069 7320 6e6f 7420 5454  output is not TT
+00057e70: 592c 2074 6865 6e20 646f 6e27 7420 6164  Y, then don't ad
+00057e80: 6420 636f 6c6f 7273 2c20 652e 672e 2077  d colors, e.g. w
+00057e90: 6865 6e20 6f75 7470 7574 2069 7320 7069  hen output is pi
+00057ea0: 7065 640a 2020 2020 6966 2073 7973 2e73  ped.    if sys.s
+00057eb0: 7464 6f75 742e 6973 6174 7479 2829 3a0a  tdout.isatty():.
+00057ec0: 2020 2020 2020 2020 2320 596f 7527 7265          # You're
+00057ed0: 2072 756e 6e69 6e67 2069 6e20 6120 7265   running in a re
+00057ee0: 616c 2074 6572 6d69 6e61 6c0a 2020 2020  al terminal.    
+00057ef0: 2020 2020 2320 636f 6c6f 7273 0a20 2020      # colors.   
+00057f00: 2020 2020 2023 2061 6461 7074 2077 6964       # adapt wid
+00057f10: 7468 0a20 2020 2020 2020 2074 6572 6d5f  th.        term_
+00057f20: 7769 6474 6820 3d20 6f73 2e67 6574 5f74  width = os.get_t
+00057f30: 6572 6d69 6e61 6c5f 7369 7a65 2829 5b30  erminal_size()[0
+00057f40: 5d0a 2020 2020 2020 2020 2320 7072 696e  ].        # prin
+00057f50: 7428 2274 6572 6d69 6e61 6c20 7769 6474  t("terminal widt
+00057f60: 6820 222c 2074 6572 6d5f 7769 6474 6829  h ", term_width)
+00057f70: 0a20 2020 2020 2020 2063 6f6e 203d 2063  .        con = c
+00057f80: 6f6c 6f72 732e 6667 2e67 7265 656e 0a20  olors.fg.green. 
+00057f90: 2020 2020 2020 2063 6f66 6620 3d20 636f         coff = co
+00057fa0: 6c6f 7273 2e72 6573 6574 0a20 2020 2020  lors.reset.     
+00057fb0: 2020 2065 6f6e 203d 2063 6f6c 6f72 732e     eon = colors.
+00057fc0: 626f 6c64 202b 2063 6f6e 0a20 2020 2020  bold + con.     
+00057fd0: 2020 2065 6f66 6620 3d20 636f 6c6f 7273     eoff = colors
+00057fe0: 2e72 6573 6574 202b 2063 6f6e 0a20 2020  .reset + con.   
+00057ff0: 2065 6c73 653a 0a20 2020 2020 2020 2023   else:.        #
+00058000: 2059 6f75 2772 6520 6265 696e 6720 7069   You're being pi
+00058010: 7065 6420 6f72 2072 6564 6972 6563 7465  ped or redirecte
+00058020: 640a 2020 2020 2020 2020 2320 6e6f 2043  d.        # no C
+00058030: 6f6c 6f72 730a 2020 2020 2020 2020 2320  olors.        # 
+00058040: 7769 6474 6820 3d20 3830 0a20 2020 2020  width = 80.     
+00058050: 2020 2074 6572 6d5f 7769 6474 6820 3d20     term_width = 
+00058060: 3830 0a20 2020 2020 2020 2023 2070 7269  80.        # pri
+00058070: 6e74 2822 6e6f 7420 696e 2074 6572 6d69  nt("not in termi
+00058080: 6e61 6c2c 2075 7369 6e67 2064 6566 6175  nal, using defau
+00058090: 6c74 2074 6572 6d69 6e61 6c20 7769 6474  lt terminal widt
+000580a0: 6820 222c 2074 6572 6d5f 7769 6474 6829  h ", term_width)
+000580b0: 0a20 2020 2020 2020 2063 6f6e 203d 2022  .        con = "
+000580c0: 220a 2020 2020 2020 2020 636f 6666 203d  ".        coff =
+000580d0: 2022 220a 2020 2020 2020 2020 656f 6e20   "".        eon 
+000580e0: 3d20 2222 0a20 2020 2020 2020 2065 6f66  = "".        eof
+000580f0: 6620 3d20 2222 0a20 2020 2069 6620 6773  f = "".    if gs
+00058100: 2e70 612e 7573 6167 653a 0a20 2020 2020  .pa.usage:.     
+00058110: 2020 2070 7269 6e74 2874 6578 7477 7261     print(textwra
+00058120: 702e 6669 6c6c 2861 702e 6465 7363 7269  p.fill(ap.descri
+00058130: 7074 696f 6e2c 2077 6964 7468 3d74 6572  ption, width=ter
+00058140: 6d5f 7769 6474 6829 290a 2020 2020 2020  m_width)).      
+00058150: 2020 7072 696e 7428 2222 290a 2020 2020    print("").    
+00058160: 2020 2020 6170 2e70 7269 6e74 5f75 7361      ap.print_usa
+00058170: 6765 2829 0a20 2020 2020 2020 2070 7269  ge().        pri
+00058180: 6e74 2822 2229 0a20 2020 2020 2020 2070  nt("").        p
+00058190: 7269 6e74 2874 6578 7477 7261 702e 6669  rint(textwrap.fi
+000581a0: 6c6c 2861 702e 6570 696c 6f67 2c20 7769  ll(ap.epilog, wi
+000581b0: 6474 683d 7465 726d 5f77 6964 7468 2929  dth=term_width))
+000581c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000581d0: 300a 2020 2020 6966 2067 732e 7061 2e68  0.    if gs.pa.h
+000581e0: 656c 703a 0a20 2020 2020 2020 2070 7269  elp:.        pri
+000581f0: 6e74 2874 6578 7477 7261 702e 6669 6c6c  nt(textwrap.fill
+00058200: 2861 702e 6465 7363 7269 7074 696f 6e2c  (ap.description,
+00058210: 2077 6964 7468 3d74 6572 6d5f 7769 6474   width=term_widt
+00058220: 6829 290a 2020 2020 2020 2020 7072 696e  h)).        prin
+00058230: 7428 2222 290a 2020 2020 2020 2020 7072  t("").        pr
+00058240: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
+00058250: 2074 6578 7477 7261 702e 6669 6c6c 280a   textwrap.fill(.
+00058260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058270: 6622 7b50 524f 475f 5749 5448 4f55 545f  f"{PROG_WITHOUT_
+00058280: 4558 547d 2073 7570 706f 7274 7320 7468  EXT} supports th
+00058290: 6573 6520 6172 6775 6d65 6e74 733a 222c  ese arguments:",
+000582a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000582b0: 2077 6964 7468 3d74 6572 6d5f 7769 6474   width=term_widt
+000582c0: 682c 0a20 2020 2020 2020 2020 2020 2029  h,.            )
+000582d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+000582e0: 2020 2023 2070 7269 6e74 2822 2229 0a20     # print(""). 
+000582f0: 2020 2020 2020 2068 656c 705f 6865 6c70         help_help
+00058300: 5f70 7265 203d 2022 2222 0a3c 2d2d 7573  _pre = """.<--us
+00058310: 6167 653e 0a50 7269 6e74 2075 7361 6765  age>.Print usage
+00058320: 2e0a 3c2d 683e 2c20 3c2d 2d68 656c 703e  ..<-h>, <--help>
+00058330: 0a50 7269 6e74 2068 656c 702e 0a3c 2d2d  .Print help..<--
+00058340: 6d61 6e75 616c 3e0a 5072 696e 7420 6d61  manual>.Print ma
+00058350: 6e75 616c 2e0a 3c2d 2d72 6561 646d 653e  nual..<--readme>
+00058360: 0a50 7269 6e74 2052 4541 444d 452e 6d64  .Print README.md
+00058370: 2066 696c 652e 0a3c 2d64 3e2c 203c 2d2d   file..<-d>, <--
+00058380: 6465 6275 673e 0a50 7269 6e74 2064 6562  debug>.Print deb
+00058390: 7567 2069 6e66 6f72 6d61 7469 6f6e 2e0a  ug information..
+000583a0: 3c2d 2d6c 6f67 2d6c 6576 656c 3e20 4445  <--log-level> DE
+000583b0: 4255 477c 494e 464f 7c57 4152 4e49 4e47  BUG|INFO|WARNING
+000583c0: 7c45 5252 4f52 7c43 5249 5449 4341 4c20  |ERROR|CRITICAL 
+000583d0: 5b44 4542 5547 7c49 4e46 4f7c 5741 524e  [DEBUG|INFO|WARN
+000583e0: 494e 477c 4552 524f 527c 4352 4954 4943  ING|ERROR|CRITIC
+000583f0: 414c 202e 2e2e 5d0a 5365 7420 7468 6520  AL ...].Set the 
+00058400: 6c6f 6720 6c65 7665 6c28 7329 2e0a 3c2d  log level(s)..<-
+00058410: 2d76 6572 626f 7365 3e0a 5365 7420 7468  -verbose>.Set th
+00058420: 6520 7665 7262 6f73 6974 7920 6c65 7665  e verbosity leve
+00058430: 6c2e 0a3c 2d2d 6c6f 6769 6e3e 2050 4153  l..<--login> PAS
+00058440: 5357 4f52 447c 5353 4f0a 4c6f 6769 6e20  SWORD|SSO.Login 
+00058450: 746f 2061 6e64 2061 7574 6865 6e74 6963  to and authentic
+00058460: 6174 6520 7769 7468 2074 6865 204d 6174  ate with the Mat
+00058470: 7269 7820 686f 6d65 7365 7276 6572 2e0a  rix homeserver..
+00058480: 3c2d 2d76 6572 6966 793e 205b 454d 4f4a  <--verify> [EMOJ
+00058490: 495d 0a50 6572 666f 726d 2076 6572 6966  I].Perform verif
+000584a0: 6963 6174 696f 6e2e 0a3c 2d2d 6c6f 676f  ication..<--logo
+000584b0: 7574 3e20 4d45 7c41 4c4c 0a4c 6f67 6f75  ut> ME|ALL.Logou
+000584c0: 742e 0a3c 2d63 3e20 4352 4544 454e 5449  t..<-c> CREDENTI
+000584d0: 414c 535f 4649 4c45 2c20 3c2d 2d63 7265  ALS_FILE, <--cre
+000584e0: 6465 6e74 6961 6c73 3e20 4352 4544 454e  dentials> CREDEN
+000584f0: 5449 414c 535f 4649 4c45 0a53 7065 6369  TIALS_FILE.Speci
+00058500: 6679 206c 6f63 6174 696f 6e20 6f66 2063  fy location of c
+00058510: 7265 6465 6e74 6961 6c73 2066 696c 652e  redentials file.
+00058520: 0a3c 2d73 3e20 5354 4f52 455f 4449 5245  .<-s> STORE_DIRE
+00058530: 4354 4f52 592c 203c 2d2d 7374 6f72 653e  CTORY, <--store>
+00058540: 2053 544f 5245 5f44 4952 4543 544f 5259   STORE_DIRECTORY
+00058550: 0a53 7065 6369 6679 206c 6f63 6174 696f  .Specify locatio
+00058560: 6e20 6f66 2073 746f 7265 2064 6972 6563  n of store direc
+00058570: 746f 7279 2e0a 3c2d 723e 2052 4f4f 4d20  tory..<-r> ROOM 
+00058580: 5b52 4f4f 4d20 2e2e 2e5d 2c20 3c2d 2d72  [ROOM ...], <--r
+00058590: 6f6f 6d3e 2052 4f4f 4d20 5b52 4f4f 4d20  oom> ROOM [ROOM 
+000585a0: 2e2e 2e5d 0a53 7065 6369 6679 206f 6e65  ...].Specify one
+000585b0: 206f 7220 6d75 6c74 6970 6c65 2072 6f6f   or multiple roo
+000585c0: 6d73 2e0a 3c2d 2d72 6f6f 6d2d 6465 6661  ms..<--room-defa
+000585d0: 756c 743e 2044 4546 4155 4c54 5f52 4f4f  ult> DEFAULT_ROO
+000585e0: 4d0a 5370 6563 6966 7920 7468 6520 6465  M.Specify the de
+000585f0: 6661 756c 7420 726f 6f6d 2061 7420 2d2d  fault room at --
+00058600: 6c6f 6769 6e2e 0a3c 2d2d 726f 6f6d 2d63  login..<--room-c
+00058610: 7265 6174 653e 2052 4f4f 4d5f 414c 4941  reate> ROOM_ALIA
+00058620: 5320 5b52 4f4f 4d5f 414c 4941 5320 2e2e  S [ROOM_ALIAS ..
+00058630: 2e5d 0a43 7265 6174 6520 6f6e 6520 6f72  .].Create one or
+00058640: 206d 756c 7469 706c 6520 726f 6f6d 7320   multiple rooms 
+00058650: 666f 7220 6769 7665 6e20 616c 6961 7328  for given alias(
+00058660: 6573 292e 0a3c 2d2d 726f 6f6d 2d64 6d2d  es)..<--room-dm-
+00058670: 6372 6561 7465 3e20 5553 4552 205b 5553  create> USER [US
+00058680: 4552 202e 2e2e 5d0a 4372 6561 7465 206f  ER ...].Create o
+00058690: 6e65 206f 7220 6d75 6c74 6970 6c65 2044  ne or multiple D
+000586a0: 4d20 726f 6f6d 7320 7769 7468 2074 6865  M rooms with the
+000586b0: 2073 7065 6369 6669 6564 2075 7365 7273   specified users
+000586c0: 2e0a 3c2d 2d72 6f6f 6d2d 646d 2d63 7265  ..<--room-dm-cre
+000586d0: 6174 652d 616c 6c6f 772d 6475 706c 6963  ate-allow-duplic
+000586e0: 6174 6573 3e0a 416c 6c6f 7720 6372 6561  ates>.Allow crea
+000586f0: 7469 6e67 2064 7570 6c69 6361 7465 2044  ting duplicate D
+00058700: 4d20 726f 6f6d 732e 0a3c 2d2d 726f 6f6d  M rooms..<--room
+00058710: 2d6a 6f69 6e3e 2052 4f4f 4d20 5b52 4f4f  -join> ROOM [ROO
+00058720: 4d20 2e2e 2e5d 0a4a 6f69 6e20 6f6e 6520  M ...].Join one 
+00058730: 726f 6f6d 206f 7220 6d75 6c74 6970 6c65  room or multiple
+00058740: 2072 6f6f 6d73 2e0a 3c2d 2d72 6f6f 6d2d   rooms..<--room-
+00058750: 6c65 6176 653e 2052 4f4f 4d20 5b52 4f4f  leave> ROOM [ROO
+00058760: 4d20 2e2e 2e5d 0a4c 6561 7665 206f 6e65  M ...].Leave one
+00058770: 2072 6f6f 6d20 6f72 206d 756c 7469 706c   room or multipl
+00058780: 6520 726f 6f6d 732e 0a3c 2d2d 726f 6f6d  e rooms..<--room
+00058790: 2d66 6f72 6765 743e 2052 4f4f 4d20 5b52  -forget> ROOM [R
+000587a0: 4f4f 4d20 2e2e 2e5d 0a46 6f72 6765 7420  OOM ...].Forget 
+000587b0: 6f6e 6520 726f 6f6d 206f 7220 6d75 6c74  one room or mult
+000587c0: 6970 6c65 2072 6f6f 6d73 2e0a 3c2d 2d72  iple rooms..<--r
+000587d0: 6f6f 6d2d 696e 7669 7465 3e20 524f 4f4d  oom-invite> ROOM
+000587e0: 205b 524f 4f4d 202e 2e2e 5d0a 496e 7669   [ROOM ...].Invi
+000587f0: 7465 206f 6e65 206f 7265 206d 6f72 6520  te one ore more 
+00058800: 7573 6572 7320 746f 206a 6f69 6e20 6f6e  users to join on
+00058810: 6520 6f72 206d 6f72 6520 726f 6f6d 732e  e or more rooms.
+00058820: 0a3c 2d2d 726f 6f6d 2d62 616e 3e20 524f  .<--room-ban> RO
+00058830: 4f4d 205b 524f 4f4d 202e 2e2e 5d0a 4261  OM [ROOM ...].Ba
+00058840: 6e20 6f6e 6520 6f72 6520 6d6f 7265 2075  n one ore more u
+00058850: 7365 7273 2066 726f 6d20 6f6e 6520 6f72  sers from one or
+00058860: 206d 6f72 6520 726f 6f6d 732e 0a3c 2d2d   more rooms..<--
+00058870: 726f 6f6d 2d75 6e62 616e 3e20 524f 4f4d  room-unban> ROOM
+00058880: 205b 524f 4f4d 202e 2e2e 5d0a 556e 6261   [ROOM ...].Unba
+00058890: 6e20 6f6e 6520 6f72 6520 6d6f 7265 2075  n one ore more u
+000588a0: 7365 7273 2066 726f 6d20 6f6e 6520 6f72  sers from one or
+000588b0: 206d 6f72 6520 726f 6f6d 732e 0a3c 2d2d   more rooms..<--
+000588c0: 726f 6f6d 2d6b 6963 6b3e 2052 4f4f 4d20  room-kick> ROOM 
+000588d0: 5b52 4f4f 4d20 2e2e 2e5d 0a4b 6963 6b20  [ROOM ...].Kick 
+000588e0: 6f6e 6520 6f72 6520 6d6f 7265 2075 7365  one ore more use
+000588f0: 7273 2066 726f 6d20 6f6e 6520 6f72 206d  rs from one or m
+00058900: 6f72 6520 726f 6f6d 732e 0a3c 2d75 3e20  ore rooms..<-u> 
+00058910: 5553 4552 205b 5553 4552 202e 2e2e 5d2c  USER [USER ...],
+00058920: 203c 2d2d 7573 6572 3e20 5553 4552 205b   <--user> USER [
+00058930: 5553 4552 202e 2e2e 5d0a 5370 6563 6966  USER ...].Specif
+00058940: 7920 6f6e 6520 6f72 206d 756c 7469 706c  y one or multipl
+00058950: 6520 7573 6572 732e 0a3c 2d2d 7573 6572  e users..<--user
+00058960: 2d6c 6f67 696e 3e20 5553 4552 0a53 7065  -login> USER.Spe
+00058970: 6369 6679 2075 7365 7220 666f 7220 2d2d  cify user for --
+00058980: 6c6f 6769 6e2e 0a3c 2d2d 6e61 6d65 3e20  login..<--name> 
+00058990: 524f 4f4d 5f4e 414d 4520 5b52 4f4f 4d5f  ROOM_NAME [ROOM_
+000589a0: 4e41 4d45 202e 2e2e 5d0a 5370 6563 6966  NAME ...].Specif
+000589b0: 7920 6f6e 6520 6f72 206d 756c 7469 706c  y one or multipl
+000589c0: 6520 726f 6f6d 206e 616d 6573 2e0a 3c2d  e room names..<-
+000589d0: 2d74 6f70 6963 3e20 524f 4f4d 5f54 4f50  -topic> ROOM_TOP
+000589e0: 4943 205b 524f 4f4d 5f54 4f50 4943 202e  IC [ROOM_TOPIC .
+000589f0: 2e2e 5d0a 5370 6563 6966 7920 6f6e 6520  ..].Specify one 
+00058a00: 6f72 206d 756c 7469 706c 6520 726f 6f6d  or multiple room
+00058a10: 2074 6f70 6963 732e 0a3c 2d2d 616c 6961   topics..<--alia
+00058a20: 733e 2052 4f4f 4d5f 414c 4941 5320 5b52  s> ROOM_ALIAS [R
+00058a30: 4f4f 4d5f 414c 4941 5320 2e2e 2e5d 0a53  OOM_ALIAS ...].S
+00058a40: 7065 6369 6679 206f 6e65 206f 7220 6d75  pecify one or mu
+00058a50: 6c74 6970 6c65 2072 6f6f 6d20 616c 6961  ltiple room alia
+00058a60: 7365 732e 0a3c 2d6d 3e20 5445 5854 205b  ses..<-m> TEXT [
+00058a70: 5445 5854 202e 2e2e 5d2c 203c 2d2d 6d65  TEXT ...], <--me
+00058a80: 7373 6167 653e 2054 4558 5420 5b54 4558  ssage> TEXT [TEX
+00058a90: 5420 2e2e 2e5d 0a53 656e 6420 6f6e 6520  T ...].Send one 
+00058aa0: 6f72 206d 756c 7469 706c 6520 7465 7874  or multiple text
+00058ab0: 206d 6573 7361 6765 732e 0a3c 2d69 3e20   messages..<-i> 
+00058ac0: 494d 4147 455f 4649 4c45 205b 494d 4147  IMAGE_FILE [IMAG
+00058ad0: 455f 4649 4c45 202e 2e2e 5d2c 203c 2d2d  E_FILE ...], <--
+00058ae0: 696d 6167 653e 2049 4d41 4745 5f46 494c  image> IMAGE_FIL
+00058af0: 4520 5b49 4d41 4745 5f46 494c 4520 2e2e  E [IMAGE_FILE ..
+00058b00: 2e5d 0a53 656e 6420 6f6e 6520 6f72 206d  .].Send one or m
+00058b10: 756c 7469 706c 6520 696d 6167 6520 6669  ultiple image fi
+00058b20: 6c65 732e 0a3c 2d61 3e20 4155 4449 4f5f  les..<-a> AUDIO_
+00058b30: 4649 4c45 205b 4155 4449 4f5f 4649 4c45  FILE [AUDIO_FILE
+00058b40: 202e 2e2e 5d2c 203c 2d2d 6175 6469 6f3e   ...], <--audio>
+00058b50: 2041 5544 494f 5f46 494c 4520 5b41 5544   AUDIO_FILE [AUD
+00058b60: 494f 5f46 494c 4520 2e2e 2e5d 0a53 656e  IO_FILE ...].Sen
+00058b70: 6420 6f6e 6520 6f72 206d 756c 7469 706c  d one or multipl
+00058b80: 6520 6175 6469 6f20 6669 6c65 732e 0a3c  e audio files..<
+00058b90: 2d66 3e20 4649 4c45 205b 4649 4c45 202e  -f> FILE [FILE .
+00058ba0: 2e2e 5d2c 203c 2d2d 6669 6c65 3e20 4649  ..], <--file> FI
+00058bb0: 4c45 205b 4649 4c45 202e 2e2e 5d0a 5365  LE [FILE ...].Se
+00058bc0: 6e64 206f 6e65 206f 7220 6d75 6c74 6970  nd one or multip
+00058bd0: 6c65 2066 696c 6573 2028 652e 672e 2050  le files (e.g. P
+00058be0: 4446 2c20 444f 432c 204d 5034 292e 0a3c  DF, DOC, MP4)..<
+00058bf0: 2d65 3e20 4d41 5452 4958 5f4a 534f 4e5f  -e> MATRIX_JSON_
+00058c00: 4f42 4a45 4354 205b 4d41 5452 4958 5f4a  OBJECT [MATRIX_J
+00058c10: 534f 4e5f 4f42 4a45 4354 202e 2e2e 5d2c  SON_OBJECT ...],
+00058c20: 203c 2d2d 6576 656e 743e 204d 4154 5249   <--event> MATRI
+00058c30: 585f 4a53 4f4e 5f4f 424a 4543 5420 5b4d  X_JSON_OBJECT [M
+00058c40: 4154 5249 585f 4a53 4f4e 5f4f 424a 4543  ATRIX_JSON_OBJEC
+00058c50: 5420 2e2e 2e5d 0a53 656e 6420 6120 4d61  T ...].Send a Ma
+00058c60: 7472 6978 204a 534f 4e20 6576 656e 742e  trix JSON event.
+00058c70: 0a3c 2d77 3e2c 203c 2d2d 6874 6d6c 3e0a  .<-w>, <--html>.
+00058c80: 5365 6e64 206d 6573 7361 6765 2061 7320  Send message as 
+00058c90: 666f 726d 6174 2022 4854 4d4c 222e 0a3c  format "HTML"..<
+00058ca0: 2d7a 3e2c 203c 2d2d 6d61 726b 646f 776e  -z>, <--markdown
+00058cb0: 3e0a 5365 6e64 206d 6573 7361 6765 2061  >.Send message a
+00058cc0: 7320 666f 726d 6174 2022 4d41 524b 444f  s format "MARKDO
+00058cd0: 574e 222e 0a3c 2d6b 3e2c 203c 2d2d 636f  WN"..<-k>, <--co
+00058ce0: 6465 3e0a 5365 6e64 206d 6573 7361 6765  de>.Send message
+00058cf0: 2061 7320 666f 726d 6174 2022 434f 4445   as format "CODE
+00058d00: 222e 0a3c 2d6a 3e2c 203c 2d2d 656d 6f6a  "..<-j>, <--emoj
+00058d10: 697a 653e 0a53 656e 6420 6d65 7373 6167  ize>.Send messag
+00058d20: 6520 6166 7465 7220 656d 6f6a 697a 696e  e after emojizin
+00058d30: 672e 0a3c 2d70 3e20 5345 5041 5241 544f  g..<-p> SEPARATO
+00058d40: 522c 203c 2d2d 7370 6c69 743e 2053 4550  R, <--split> SEP
+00058d50: 4152 4154 4f52 0a53 706c 6974 206d 6573  ARATOR.Split mes
+00058d60: 7361 6765 2074 6578 7420 696e 746f 206d  sage text into m
+00058d70: 756c 7469 706c 6520 4d61 7472 6978 206d  ultiple Matrix m
+00058d80: 6573 7361 6765 732e 0a3c 2d2d 636f 6e66  essages..<--conf
+00058d90: 6967 3e20 434f 4e46 4947 5f46 494c 450a  ig> CONFIG_FILE.
+00058da0: 5370 6563 6966 7920 7468 6520 6c6f 6361  Specify the loca
+00058db0: 7469 6f6e 206f 6620 6120 636f 6e66 6967  tion of a config
+00058dc0: 2066 696c 652e 0a3c 2d2d 7072 6f78 793e   file..<--proxy>
+00058dd0: 2050 524f 5859 0a53 7065 6369 6679 2061   PROXY.Specify a
+00058de0: 2070 726f 7879 2066 6f72 2063 6f6e 6e65   proxy for conne
+00058df0: 6374 6976 6974 792e 0a3c 2d6e 3e2c 203c  ctivity..<-n>, <
+00058e00: 2d2d 6e6f 7469 6365 3e0a 5365 6e64 206d  --notice>.Send m
+00058e10: 6573 7361 6765 2061 7320 6e6f 7469 6365  essage as notice
+00058e20: 2e0a 3c2d 2d65 6e63 7279 7074 6564 3e0a  ..<--encrypted>.
+00058e30: 5365 6e64 206d 6573 7361 6765 2065 6e64  Send message end
+00058e40: 2d74 6f2d 656e 6420 656e 6372 7970 7465  -to-end encrypte
+00058e50: 642e 0a3c 2d6c 3e20 5b4e 4556 4552 7c4f  d..<-l> [NEVER|O
+00058e60: 4e43 457c 464f 5245 5645 527c 5441 494c  NCE|FOREVER|TAIL
+00058e70: 7c41 4c4c 5d2c 203c 2d2d 6c69 7374 656e  |ALL], <--listen
+00058e80: 3e20 5b4e 4556 4552 7c4f 4e43 457c 464f  > [NEVER|ONCE|FO
+00058e90: 5245 5645 527c 5441 494c 7c41 4c4c 5d0a  REVER|TAIL|ALL].
+00058ea0: 5072 696e 7420 7265 6365 6976 6564 206d  Print received m
+00058eb0: 6573 7361 6765 7320 616e 6420 6c69 7374  essages and list
+00058ec0: 656e 2074 6f20 6d65 7373 6167 6573 2e0a  en to messages..
+00058ed0: 3c2d 743e 205b 4e55 4d42 4552 5d2c 203c  <-t> [NUMBER], <
+00058ee0: 2d2d 7461 696c 3e20 5b4e 554d 4245 525d  --tail> [NUMBER]
+00058ef0: 0a50 7269 6e74 206c 6173 7420 6d65 7373  .Print last mess
+00058f00: 6167 6573 2e0a 3c2d 793e 2c20 3c2d 2d6c  ages..<-y>, <--l
+00058f10: 6973 7465 6e2d 7365 6c66 3e0a 5072 696e  isten-self>.Prin
+00058f20: 7420 796f 7572 206f 776e 206d 6573 7361  t your own messa
+00058f30: 6765 7320 6173 2077 656c 6c2e 0a3c 2d2d  ges as well..<--
+00058f40: 7072 696e 742d 6576 656e 742d 6964 3e0a  print-event-id>.
+00058f50: 5072 696e 7420 6576 656e 7420 6964 7320  Print event ids 
+00058f60: 6f66 2072 6563 6569 7665 6420 6d65 7373  of received mess
+00058f70: 6167 6573 2e0a 3c2d 2d64 6f77 6e6c 6f61  ages..<--downloa
+00058f80: 642d 6d65 6469 613e 205b 444f 574e 4c4f  d-media> [DOWNLO
+00058f90: 4144 5f44 4952 4543 544f 5259 5d0a 446f  AD_DIRECTORY].Do
+00058fa0: 776e 6c6f 6164 206d 6564 6961 2066 696c  wnload media fil
+00058fb0: 6573 2077 6869 6c65 206c 6973 7465 6e69  es while listeni
+00058fc0: 6e67 2e0a 3c2d 2d64 6f77 6e6c 6f61 642d  ng..<--download-
+00058fd0: 6d65 6469 612d 6e61 6d65 3e20 534f 5552  media-name> SOUR
+00058fe0: 4345 7c43 4c45 414e 7c45 5645 4e54 4944  CE|CLEAN|EVENTID
+00058ff0: 7c54 494d 450a 5370 6563 6966 7920 7468  |TIME.Specify th
+00059000: 6520 6d65 7468 6f64 2074 6f20 6465 7269  e method to deri
+00059010: 7665 2074 6865 206d 6564 6961 2066 696c  ve the media fil
+00059020: 656e 616d 652e 0a3c 2d2d 6f73 2d6e 6f74  ename..<--os-not
+00059030: 6966 793e 0a4e 6f74 6966 7920 6d65 206f  ify>.Notify me o
+00059040: 6620 6172 7269 7669 6e67 206d 6573 7361  f arriving messa
+00059050: 6765 732e 0a3c 2d2d 7365 742d 6465 7669  ges..<--set-devi
+00059060: 6365 2d6e 616d 653e 2044 4556 4943 455f  ce-name> DEVICE_
+00059070: 4e41 4d45 0a53 6574 206f 7220 7265 6e61  NAME.Set or rena
+00059080: 6d65 2074 6865 2063 7572 7265 6e74 2064  me the current d
+00059090: 6576 6963 652e 0a3c 2d2d 7365 742d 6469  evice..<--set-di
+000590a0: 7370 6c61 792d 6e61 6d65 3e20 4449 5350  splay-name> DISP
+000590b0: 4c41 595f 4e41 4d45 0a53 6574 206f 7220  LAY_NAME.Set or 
+000590c0: 7265 6e61 6d65 2074 6865 2064 6973 706c  rename the displ
+000590d0: 6179 206e 616d 652e 0a3c 2d2d 6765 742d  ay name..<--get-
+000590e0: 6469 7370 6c61 792d 6e61 6d65 3e0a 4765  display-name>.Ge
+000590f0: 7420 7468 6520 6469 7370 6c61 7920 6e61  t the display na
+00059100: 6d65 206f 6620 796f 7572 7365 6c66 2e0a  me of yourself..
+00059110: 3c2d 2d73 6574 2d70 7265 7365 6e63 653e  <--set-presence>
+00059120: 204f 4e4c 494e 457c 4f46 464c 494e 457c   ONLINE|OFFLINE|
+00059130: 554e 4156 4149 4c41 424c 450a 5365 7420  UNAVAILABLE.Set 
+00059140: 796f 7572 2070 7265 7365 6e63 652e 0a3c  your presence..<
+00059150: 2d2d 6765 742d 7072 6573 656e 6365 3e0a  --get-presence>.
+00059160: 4765 7420 796f 7572 2070 7265 7365 6e63  Get your presenc
+00059170: 652e 0a3c 2d2d 7570 6c6f 6164 3e20 4649  e..<--upload> FI
+00059180: 4c45 205b 4649 4c45 202e 2e2e 5d0a 5570  LE [FILE ...].Up
+00059190: 6c6f 6164 206f 6e65 206f 7220 6d75 6c74  load one or mult
+000591a0: 6970 6c65 2066 696c 6573 2074 6f20 7468  iple files to th
+000591b0: 6520 636f 6e74 656e 7420 7265 706f 7369  e content reposi
+000591c0: 746f 7279 2e0a 3c2d 2d64 6f77 6e6c 6f61  tory..<--downloa
+000591d0: 643e 204d 5843 5f55 5249 205b 4d58 435f  d> MXC_URI [MXC_
+000591e0: 5552 4920 2e2e 2e5d 0a44 6f77 6e6c 6f61  URI ...].Downloa
+000591f0: 6420 6f6e 6520 6f72 206d 756c 7469 706c  d one or multipl
+00059200: 6520 6669 6c65 7320 6672 6f6d 2074 6865  e files from the
+00059210: 2063 6f6e 7465 6e74 2072 6570 6f73 6974   content reposit
+00059220: 6f72 792e 0a3c 2d2d 6465 6c65 7465 2d6d  ory..<--delete-m
+00059230: 7863 3e20 4d58 435f 5552 4920 5b4d 5843  xc> MXC_URI [MXC
+00059240: 5f55 5249 202e 2e2e 5d0a 4465 6c65 7465  _URI ...].Delete
+00059250: 206f 6e65 206f 7220 6d75 6c74 6970 6c65   one or multiple
+00059260: 206f 626a 6563 7473 2066 726f 6d20 7468   objects from th
+00059270: 6520 636f 6e74 656e 7420 7265 706f 7369  e content reposi
+00059280: 746f 7279 2e0a 3c2d 2d64 656c 6574 652d  tory..<--delete-
+00059290: 6d78 632d 6265 666f 7265 3e20 5449 4d45  mxc-before> TIME
+000592a0: 5354 414d 5020 5b54 494d 4553 5441 4d50  STAMP [TIMESTAMP
+000592b0: 202e 2e2e 5d0a 4465 6c65 7465 206f 6c64   ...].Delete old
+000592c0: 206f 626a 6563 7473 2066 726f 6d20 7468   objects from th
+000592d0: 6520 636f 6e74 656e 7420 7265 706f 7369  e content reposi
+000592e0: 746f 7279 0a3c 2d2d 6a6f 696e 6564 2d72  tory.<--joined-r
+000592f0: 6f6f 6d73 3e0a 5072 696e 7420 7468 6520  ooms>.Print the 
+00059300: 6c69 7374 206f 6620 6a6f 696e 6564 2072  list of joined r
+00059310: 6f6f 6d73 2e0a 3c2d 2d6a 6f69 6e65 642d  ooms..<--joined-
+00059320: 6d65 6d62 6572 733e 2052 4f4f 4d20 5b52  members> ROOM [R
+00059330: 4f4f 4d20 2e2e 2e5d 0a50 7269 6e74 2074  OOM ...].Print t
+00059340: 6865 206c 6973 7420 6f66 206a 6f69 6e65  he list of joine
+00059350: 6420 6d65 6d62 6572 7320 666f 7220 6f6e  d members for on
+00059360: 6520 6f72 206d 756c 7469 706c 6520 726f  e or multiple ro
+00059370: 6f6d 732e 0a3c 2d2d 6a6f 696e 6564 2d64  oms..<--joined-d
+00059380: 6d2d 726f 6f6d 733e 2055 5345 5220 5b55  m-rooms> USER [U
+00059390: 5345 5220 2e2e 2e5d 0a50 7269 6e74 2074  SER ...].Print t
+000593a0: 6865 206c 6973 7420 6f66 206a 6f69 6e65  he list of joine
+000593b0: 6420 444d 2072 6f6f 6d73 2066 6f72 206f  d DM rooms for o
+000593c0: 6e65 206f 7220 6d75 6c74 6970 6c65 2075  ne or multiple u
+000593d0: 7365 7273 2e0a 3c2d 2d6d 7863 2d74 6f2d  sers..<--mxc-to-
+000593e0: 6874 7470 3e20 4d58 435f 5552 4920 5b4d  http> MXC_URI [M
+000593f0: 5843 5f55 5249 202e 2e2e 5d0a 436f 6e76  XC_URI ...].Conv
+00059400: 6572 7420 4d58 4320 5552 4973 2074 6f20  ert MXC URIs to 
+00059410: 4854 5450 2055 524c 732e 0a3c 2d2d 6465  HTTP URLs..<--de
+00059420: 7669 6365 732c 3e20 3c2d 2d67 6574 2d64  vices,> <--get-d
+00059430: 6576 6963 6573 3e0a 5072 696e 7420 7468  evices>.Print th
+00059440: 6520 6c69 7374 206f 6620 6465 7669 6365  e list of device
+00059450: 732e 0a3c 2d2d 6469 7363 6f76 6572 792d  s..<--discovery-
+00059460: 696e 666f 3e0a 5072 696e 7420 6469 7363  info>.Print disc
+00059470: 6f76 6572 7920 696e 666f 726d 6174 696f  overy informatio
+00059480: 6e20 6162 6f75 7420 6375 7272 656e 7420  n about current 
+00059490: 686f 6d65 7365 7276 6572 2e0a 3c2d 2d6c  homeserver..<--l
+000594a0: 6f67 696e 2d69 6e66 6f3e 0a50 7269 6e74  ogin-info>.Print
+000594b0: 206c 6f67 696e 206d 6574 686f 6473 2073   login methods s
+000594c0: 7570 706f 7274 6564 2062 7920 7468 6520  upported by the 
+000594d0: 686f 6d65 7365 7276 6572 2e0a 3c2d 2d63  homeserver..<--c
+000594e0: 6f6e 7465 6e74 2d72 6570 6f73 6974 6f72  ontent-repositor
+000594f0: 792d 636f 6e66 6967 3e0a 5072 696e 7420  y-config>.Print 
+00059500: 7468 6520 636f 6e74 656e 7420 7265 706f  the content repo
+00059510: 7369 746f 7279 2063 6f6e 6669 6775 7261  sitory configura
+00059520: 7469 6f6e 2e0a 3c2d 2d72 6573 743e 2052  tion..<--rest> R
+00059530: 4553 545f 4d45 5448 4f44 2044 4154 4120  EST_METHOD DATA 
+00059540: 5552 4c20 5b52 4553 545f 4d45 5448 4f44  URL [REST_METHOD
+00059550: 2044 4154 4120 5552 4c20 2e2e 2e5d 0a55   DATA URL ...].U
+00059560: 7365 2074 6865 204d 6174 7269 7820 436c  se the Matrix Cl
+00059570: 6965 6e74 2052 4553 5420 4150 492e 0a3c  ient REST API..<
+00059580: 2d2d 7365 742d 6176 6174 6172 3e20 4156  --set-avatar> AV
+00059590: 4154 4152 5f4d 5843 5f55 5249 0a53 6574  ATAR_MXC_URI.Set
+000595a0: 2079 6f75 7220 6176 6174 6172 2e0a 3c2d   your avatar..<-
+000595b0: 2d67 6574 2d61 7661 7461 723e 205b 5553  -get-avatar> [US
+000595c0: 4552 202e 2e2e 5d0a 4765 7420 616e 2061  ER ...].Get an a
+000595d0: 7661 7461 722e 0a3c 2d2d 6765 742d 7072  vatar..<--get-pr
+000595e0: 6f66 696c 653e 205b 5553 4552 202e 2e2e  ofile> [USER ...
+000595f0: 5d0a 4765 7420 6120 7573 6572 2070 726f  ].Get a user pro
+00059600: 6669 6c65 2e0a 3c2d 2d67 6574 2d72 6f6f  file..<--get-roo
+00059610: 6d2d 696e 666f 3e20 5b52 4f4f 4d20 2e2e  m-info> [ROOM ..
+00059620: 2e5d 0a47 6574 2074 6865 2072 6f6f 6d20  .].Get the room 
+00059630: 696e 666f 726d 6174 696f 6e2e 0a3c 2d2d  information..<--
+00059640: 6765 742d 636c 6965 6e74 2d69 6e66 6f3e  get-client-info>
+00059650: 0a50 7269 6e74 2063 6c69 656e 7420 696e  .Print client in
+00059660: 666f 726d 6174 696f 6e2e 0a3c 2d2d 6861  formation..<--ha
+00059670: 732d 7065 726d 6973 7369 6f6e 3e20 524f  s-permission> RO
+00059680: 4f4d 2042 414e 7c49 4e56 4954 457c 4b49  OM BAN|INVITE|KI
+00059690: 434b 7c4e 4f54 4946 4943 4154 494f 4e53  CK|NOTIFICATIONS
+000596a0: 7c52 4544 4143 547c 6574 6320 5b52 4f4f  |REDACT|etc [ROO
+000596b0: 4d20 4241 4e7c 494e 5649 5445 7c4b 4943  M BAN|INVITE|KIC
+000596c0: 4b7c 4e4f 5449 4649 4341 5449 4f4e 537c  K|NOTIFICATIONS|
+000596d0: 5245 4441 4354 7c65 7463 202e 2e2e 5d0a  REDACT|etc ...].
+000596e0: 496e 7175 6972 6520 6162 6f75 7420 7065  Inquire about pe
+000596f0: 726d 6973 7369 6f6e 732e 0a3c 2d2d 696d  rmissions..<--im
+00059700: 706f 7274 2d6b 6579 733e 2046 494c 4520  port-keys> FILE 
+00059710: 5041 5353 5048 5241 5345 2046 494c 4520  PASSPHRASE FILE 
+00059720: 5041 5353 5048 5241 5345 0a49 6d70 6f72  PASSPHRASE.Impor
+00059730: 7420 4d65 676f 6c6d 2064 6563 7279 7074  t Megolm decrypt
+00059740: 696f 6e20 6b65 7973 2066 726f 6d20 6120  ion keys from a 
+00059750: 6669 6c65 2e0a 3c2d 2d65 7870 6f72 742d  file..<--export-
+00059760: 6b65 7973 3e20 4649 4c45 2050 4153 5350  keys> FILE PASSP
+00059770: 4852 4153 4520 4649 4c45 2050 4153 5350  HRASE FILE PASSP
+00059780: 4852 4153 450a 4578 706f 7274 2061 6c6c  HRASE.Export all
+00059790: 2074 6865 204d 6567 6f6c 6d20 6465 6372   the Megolm decr
+000597a0: 7970 7469 6f6e 206b 6579 7320 6f66 2074  yption keys of t
+000597b0: 6869 7320 6465 7669 6365 2e0a 3c2d 2d72  his device..<--r
+000597c0: 6f6f 6d2d 7365 742d 616c 6961 733e 2052  oom-set-alias> R
+000597d0: 4f4f 4d5f 414c 4941 5320 524f 4f4d 205b  OOM_ALIAS ROOM [
+000597e0: 524f 4f4d 5f41 4c49 4153 2052 4f4f 4d20  ROOM_ALIAS ROOM 
+000597f0: 2e2e 2e5d 2c20 3c2d 2d72 6f6f 6d2d 7075  ...], <--room-pu
+00059800: 742d 616c 6961 733e 2052 4f4f 4d5f 414c  t-alias> ROOM_AL
+00059810: 4941 5320 524f 4f4d 205b 524f 4f4d 5f41  IAS ROOM [ROOM_A
+00059820: 4c49 4153 2052 4f4f 4d20 2e2e 2e5d 0a41  LIAS ROOM ...].A
+00059830: 6464 2061 6c69 6173 6573 2074 6f20 726f  dd aliases to ro
+00059840: 6f6d 732e 0a3c 2d2d 726f 6f6d 2d72 6573  oms..<--room-res
+00059850: 6f6c 7665 2d61 6c69 6173 3e20 524f 4f4d  olve-alias> ROOM
+00059860: 5f41 4c49 4153 205b 524f 4f4d 5f41 4c49  _ALIAS [ROOM_ALI
+00059870: 4153 202e 2e2e 5d0a 5368 6f77 2072 6f6f  AS ...].Show roo
+00059880: 6d20 6964 7320 636f 7272 6573 706f 6e64  m ids correspond
+00059890: 696e 6720 746f 2072 6f6f 6d20 616c 6961  ing to room alia
+000598a0: 7365 732e 0a3c 2d2d 726f 6f6d 2d64 656c  ses..<--room-del
+000598b0: 6574 652d 616c 6961 733e 2052 4f4f 4d5f  ete-alias> ROOM_
+000598c0: 414c 4941 5320 5b52 4f4f 4d5f 414c 4941  ALIAS [ROOM_ALIA
+000598d0: 5320 2e2e 2e5d 0a44 656c 6574 6520 6f6e  S ...].Delete on
+000598e0: 6520 6f72 206d 756c 7469 706c 6520 726f  e or multiple ro
+000598f0: 6f6d 7320 616c 6961 7365 732e 0a3c 2d2d  oms aliases..<--
+00059900: 6765 742d 6f70 656e 6964 2d74 6f6b 656e  get-openid-token
+00059910: 3e20 5b55 5345 5220 2e2e 2e5d 0a47 6574  > [USER ...].Get
+00059920: 2061 6e20 4f70 656e 4944 2074 6f6b 656e   an OpenID token
+00059930: 2e0a 3c2d 2d72 6f6f 6d2d 6765 742d 7669  ..<--room-get-vi
+00059940: 7369 6269 6c69 7479 3e20 5b52 4f4f 4d20  sibility> [ROOM 
+00059950: 2e2e 2e5d 0a47 6574 2074 6865 2076 6973  ...].Get the vis
+00059960: 6962 696c 6974 7920 6f66 206f 6e65 206f  ibility of one o
+00059970: 7220 6d6f 7265 2072 6f6f 6d73 2e0a 3c2d  r more rooms..<-
+00059980: 2d72 6f6f 6d2d 6765 742d 7374 6174 653e  -room-get-state>
+00059990: 205b 524f 4f4d 202e 2e2e 5d0a 4765 7420   [ROOM ...].Get 
+000599a0: 7468 6520 7374 6174 6520 6f66 206f 6e65  the state of one
+000599b0: 206f 7220 6d6f 7265 2072 6f6f 6d73 2e0a   or more rooms..
+000599c0: 3c2d 2d64 656c 6574 652d 6465 7669 6365  <--delete-device
+000599d0: 3e20 4445 5649 4345 205b 4445 5649 4345  > DEVICE [DEVICE
+000599e0: 202e 2e2e 5d0a 4465 6c65 7465 206f 6e65   ...].Delete one
+000599f0: 206f 7220 6d75 6c74 6970 6c65 2064 6576   or multiple dev
+00059a00: 6963 6573 2e0a 3c2d 2d72 6f6f 6d2d 7265  ices..<--room-re
+00059a10: 6461 6374 3e20 524f 4f4d 5f49 4420 4556  dact> ROOM_ID EV
+00059a20: 454e 545f 4944 2052 4541 534f 4e20 5b52  ENT_ID REASON [R
+00059a30: 4f4f 4d5f 4944 2045 5645 4e54 5f49 4420  OOM_ID EVENT_ID 
+00059a40: 5245 4153 4f4e 202e 2e2e 5d2c 203c 2d2d  REASON ...], <--
+00059a50: 726f 6f6d 2d64 656c 6574 652d 636f 6e74  room-delete-cont
+00059a60: 656e 743e 2052 4f4f 4d5f 4944 2045 5645  ent> ROOM_ID EVE
+00059a70: 4e54 5f49 4420 5245 4153 4f4e 205b 524f  NT_ID REASON [RO
+00059a80: 4f4d 5f49 4420 4556 454e 545f 4944 2052  OM_ID EVENT_ID R
+00059a90: 4541 534f 4e20 2e2e 2e5d 0a53 7472 6970  EASON ...].Strip
+00059aa0: 2069 6e66 6f72 6d61 7469 6f6e 206f 7574   information out
+00059ab0: 206f 6620 6f6e 6520 6f72 2073 6576 6572   of one or sever
+00059ac0: 616c 2065 7665 6e74 732e 0a3c 2d2d 7768  al events..<--wh
+00059ad0: 6f61 6d69 3e0a 5072 696e 7420 796f 7572  oami>.Print your
+00059ae0: 2075 7365 7220 6964 2e0a 3c2d 2d6e 6f2d   user id..<--no-
+00059af0: 7373 6c3e 0a53 6b69 7020 5353 4c20 7665  ssl>.Skip SSL ve
+00059b00: 7269 6669 6361 7469 6f6e 2e0a 3c2d 2d73  rification..<--s
+00059b10: 736c 2d63 6572 7469 6669 6361 7465 3e20  sl-certificate> 
+00059b20: 5353 4c5f 4345 5254 4946 4943 4154 455f  SSL_CERTIFICATE_
+00059b30: 4649 4c45 0a55 7365 2079 6f75 7220 6f77  FILE.Use your ow
+00059b40: 6e20 5353 4c20 6365 7274 6966 6963 6174  n SSL certificat
+00059b50: 652e 0a3c 2d2d 6669 6c65 2d6e 616d 653e  e..<--file-name>
+00059b60: 2046 494c 4520 5b46 494c 4520 2e2e 2e5d   FILE [FILE ...]
+00059b70: 0a53 7065 6369 6679 206f 6e65 206f 7220  .Specify one or 
+00059b80: 6d75 6c74 6970 6c65 2066 696c 6520 6e61  multiple file na
+00059b90: 6d65 7320 666f 7220 736f 6d65 2061 6374  mes for some act
+00059ba0: 696f 6e73 2e0a 3c2d 2d6b 6579 2d64 6963  ions..<--key-dic
+00059bb0: 743e 204b 4559 5f44 4943 5449 4f4e 4152  t> KEY_DICTIONAR
+00059bc0: 5920 5b4b 4559 5f44 4943 5449 4f4e 4152  Y [KEY_DICTIONAR
+00059bd0: 5920 2e2e 2e5d 0a53 7065 6369 6679 206f  Y ...].Specify o
+00059be0: 6e65 206f 7220 6d75 6c74 6970 6c65 206b  ne or multiple k
+00059bf0: 6579 2064 6963 7469 6f6e 6172 6965 7320  ey dictionaries 
+00059c00: 666f 7220 6465 6372 7970 7469 6f6e 2e0a  for decryption..
+00059c10: 3c2d 2d70 6c61 696e 3e0a 4469 7361 626c  <--plain>.Disabl
+00059c20: 6520 656e 6372 7970 7469 6f6e 2066 6f72  e encryption for
+00059c30: 2061 2073 7065 6369 6669 6320 6163 7469   a specific acti
+00059c40: 6f6e 2e0a 3c2d 2d73 6570 6172 6174 6f72  on..<--separator
+00059c50: 3e20 5345 5041 5241 544f 520a 5365 7420  > SEPARATOR.Set 
+00059c60: 6120 6375 7374 6f6d 2073 6570 6172 6174  a custom separat
+00059c70: 6f72 2075 7365 6420 666f 7220 6365 7274  or used for cert
+00059c80: 6169 6e20 7072 696e 7420 6f75 7473 2e0a  ain print outs..
+00059c90: 3c2d 2d61 6363 6573 732d 746f 6b65 6e3e  <--access-token>
+00059ca0: 2041 4343 4553 535f 544f 4b45 4e0a 5365   ACCESS_TOKEN.Se
+00059cb0: 7420 6120 6375 7374 6f6d 2061 6363 6573  t a custom acces
+00059cc0: 7320 746f 6b65 6e20 666f 7220 7573 6520  s token for use 
+00059cd0: 6279 2063 6572 7461 696e 2061 6374 696f  by certain actio
+00059ce0: 6e73 2e0a 3c2d 2d70 6173 7377 6f72 643e  ns..<--password>
+00059cf0: 2050 4153 5357 4f52 440a 5370 6563 6966   PASSWORD.Specif
+00059d00: 7920 6120 7061 7373 776f 7264 2066 6f72  y a password for
+00059d10: 2075 7365 2062 7920 6365 7274 6169 6e20   use by certain 
+00059d20: 6163 7469 6f6e 732e 0a3c 2d2d 686f 6d65  actions..<--home
+00059d30: 7365 7276 6572 3e20 484f 4d45 5345 5256  server> HOMESERV
+00059d40: 4552 5f55 524c 0a53 7065 6369 6679 2061  ER_URL.Specify a
+00059d50: 2068 6f6d 6573 6572 7665 7220 666f 7220   homeserver for 
+00059d60: 7573 6520 6279 2063 6572 7461 696e 2061  use by certain a
+00059d70: 6374 696f 6e73 2e0a 3c2d 2d64 6576 6963  ctions..<--devic
+00059d80: 653e 2044 4556 4943 455f 4e41 4d45 0a53  e> DEVICE_NAME.S
+00059d90: 7065 6369 6679 2061 2064 6576 6963 6520  pecify a device 
+00059da0: 6e61 6d65 2c20 666f 7220 7573 6520 6279  name, for use by
+00059db0: 2063 6572 7461 696e 2061 6374 696f 6e73   certain actions
+00059dc0: 2e0a 3c2d 2d73 796e 633e 2046 554c 4c7c  ..<--sync> FULL|
+00059dd0: 4f46 460a 4368 6f6f 7365 2073 796e 6368  OFF.Choose synch
+00059de0: 726f 6e69 7a61 7469 6f6e 206f 7074 696f  ronization optio
+00059df0: 6e73 2e0a 3c2d 6f3e 2054 4558 547c 4a53  ns..<-o> TEXT|JS
+00059e00: 4f4e 7c4a 534f 4e2d 4d41 587c 4a53 4f4e  ON|JSON-MAX|JSON
+00059e10: 2d53 5045 432c 203c 2d2d 6f75 7470 7574  -SPEC, <--output
+00059e20: 3e20 5445 5854 7c4a 534f 4e7c 4a53 4f4e  > TEXT|JSON|JSON
+00059e30: 2d4d 4158 7c4a 534f 4e2d 5350 4543 0a53  -MAX|JSON-SPEC.S
+00059e40: 656c 6563 7420 616e 206f 7574 7075 7420  elect an output 
+00059e50: 666f 726d 6174 2e0a 3c2d 2d72 6f6f 6d2d  format..<--room-
+00059e60: 696e 7669 7465 733e 205b 4c49 5354 7c4a  invites> [LIST|J
+00059e70: 4f49 4e7c 4c49 5354 2b4a 4f49 4e5d 0a4c  OIN|LIST+JOIN].L
+00059e80: 6973 7420 726f 6f6d 2069 6e76 6974 6174  ist room invitat
+00059e90: 696f 6e73 2061 6e64 2f6f 7220 6a6f 696e  ions and/or join
+00059ea0: 2069 6e76 6974 6564 2072 6f6f 6d73 2e0a   invited rooms..
+00059eb0: 3c2d 763e 205b 5052 494e 547c 4348 4543  <-v> [PRINT|CHEC
+00059ec0: 4b5d 2c20 2d56 205b 5052 494e 547c 4348  K], -V [PRINT|CH
+00059ed0: 4543 4b5d 2c20 3c2d 2d76 6572 7369 6f6e  ECK], <--version
+00059ee0: 3e20 5b50 5249 4e54 7c43 4845 434b 5d0a  > [PRINT|CHECK].
+00059ef0: 5072 696e 7420 7665 7273 696f 6e20 696e  Print version in
+00059f00: 666f 726d 6174 696f 6e20 6f72 2063 6865  formation or che
+00059f10: 636b 2066 6f72 2075 7064 6174 6573 2e0a  ck for updates..
+00059f20: 2222 222e 7265 706c 6163 6528 0a20 2020  """.replace(.   
+00059f30: 2020 2020 2020 2020 2022 3c22 2c20 656f           "<", eo
+00059f40: 6e0a 2020 2020 2020 2020 292e 7265 706c  n.        ).repl
+00059f50: 6163 6528 0a20 2020 2020 2020 2020 2020  ace(.           
+00059f60: 2022 3e22 2c20 656f 6666 0a20 2020 2020   ">", eoff.     
+00059f70: 2020 2029 0a20 2020 2020 2020 2068 6561     ).        hea
+00059f80: 6465 7220 3d20 4661 6c73 6520 2023 2066  der = False  # f
+00059f90: 6972 7374 206c 696e 6520 6973 206e 6577  irst line is new
+00059fa0: 6c69 6e65 0a20 2020 2020 2020 2066 6f72  line.        for
+00059fb0: 206c 696e 6520 696e 2068 656c 705f 6865   line in help_he
+00059fc0: 6c70 5f70 7265 2e73 706c 6974 2822 5c6e  lp_pre.split("\n
+00059fd0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+00059fe0: 6966 2068 6561 6465 723a 0a20 2020 2020  if header:.     
+00059ff0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0005a000: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0005a010: 2020 2020 2020 7465 7874 7772 6170 2e66        textwrap.f
+0005a020: 696c 6c28 636f 6e20 2b20 6c69 6e65 202b  ill(con + line +
+0005a030: 2063 6f66 662c 2077 6964 7468 3d74 6572   coff, width=ter
+0005a040: 6d5f 7769 6474 6829 2c0a 2020 2020 2020  m_width),.      
+0005a050: 2020 2020 2020 2020 2020 2020 2020 666c                fl
+0005a060: 7573 683d 5472 7565 2c0a 2020 2020 2020  ush=True,.      
+0005a070: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0005a080: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0005a090: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0005a0a0: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
+0005a0b0: 2020 2020 2020 2020 2074 6578 7477 7261           textwra
+0005a0c0: 702e 696e 6465 6e74 280a 2020 2020 2020  p.indent(.      
 0005a0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005a0e0: 2074 6578 7477 7261 702e 6669 6c6c 286c   textwrap.fill(l
-0005a0f0: 696e 652c 2077 6964 7468 3d74 6572 6d5f  ine, width=term_
-0005a100: 7769 6474 6820 2d20 3229 2c20 2220 2022  width - 2), "  "
-0005a110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0005a120: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-0005a130: 2020 2020 2020 2020 2020 2020 666c 7573              flus
-0005a140: 683d 5472 7565 2c0a 2020 2020 2020 2020  h=True,.        
-0005a150: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0005a160: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
-0005a170: 6e6f 7420 6865 6164 6572 0a20 2020 2020  not header.     
-0005a180: 2020 2023 2070 7269 6e74 2822 2229 0a20     # print(""). 
-0005a190: 2020 2020 2020 2070 7269 6e74 2874 6578         print(tex
-0005a1a0: 7477 7261 702e 6669 6c6c 2861 702e 6570  twrap.fill(ap.ep
-0005a1b0: 696c 6f67 2c20 7769 6474 683d 7465 726d  ilog, width=term
-0005a1c0: 5f77 6964 7468 2929 0a20 2020 2020 2020  _width)).       
-0005a1d0: 2072 6574 7572 6e20 300a 2020 2020 6966   return 0.    if
-0005a1e0: 2067 732e 7061 2e6d 616e 7561 6c3a 0a20   gs.pa.manual:. 
-0005a1f0: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-0005a200: 6f6e 203d 2028 0a20 2020 2020 2020 2020  on = (.         
-0005a210: 2020 2066 2257 656c 636f 6d65 2074 6f20     f"Welcome to 
-0005a220: 7b50 524f 475f 5749 5448 4f55 545f 4558  {PROG_WITHOUT_EX
-0005a230: 547d 2c20 6120 4d61 7472 6978 2043 4c49  T}, a Matrix CLI
-0005a240: 2063 6c69 656e 742e 20e2 9480 e294 80e2   client. .......
-0005a250: 9480 2022 0a20 2020 2020 2020 2020 2020  .. ".           
-0005a260: 2022 4f6e 2066 6972 7374 2072 756e 2075   "On first run u
-0005a270: 7365 202d 2d6c 6f67 696e 2074 6f20 6c6f  se --login to lo
-0005a280: 6720 696e 2c20 746f 2061 7574 6865 6e74  g in, to authent
-0005a290: 6963 6174 652e 2022 0a20 2020 2020 2020  icate. ".       
-0005a2a0: 2020 2020 2022 4f6e 2073 6563 6f6e 6420       "On second 
-0005a2b0: 7275 6e20 7765 2073 7567 6765 7374 2074  run we suggest t
-0005a2c0: 6f20 7573 6520 2d2d 7665 7269 6679 2074  o use --verify t
-0005a2d0: 6f20 6765 7420 7665 7269 6669 6564 2e20  o get verified. 
-0005a2e0: 220a 2020 2020 2020 2020 2020 2020 2245  ".            "E
-0005a2f0: 6d6f 6a69 2076 6572 6966 6963 6174 696f  moji verificatio
-0005a300: 6e20 6973 2062 7569 6c74 2d69 6e20 7768  n is built-in wh
-0005a310: 6963 6820 6361 6e20 6265 2075 7365 6420  ich can be used 
-0005a320: 220a 2020 2020 2020 2020 2020 2020 2274  ".            "t
-0005a330: 6f20 7665 7269 6679 2064 6576 6963 6573  o verify devices
-0005a340: 2e20 220a 2020 2020 2020 2020 2020 2020  . ".            
-0005a350: 224f 6e20 6675 7274 6865 7220 7275 6e73  "On further runs
-0005a360: 2074 6869 7320 7072 6f67 7261 6d20 696d   this program im
-0005a370: 706c 656d 656e 7473 2061 2073 696d 706c  plements a simpl
-0005a380: 6520 4d61 7472 6978 2043 4c49 2022 0a20  e Matrix CLI ". 
-0005a390: 2020 2020 2020 2020 2020 2022 636c 6965             "clie
-0005a3a0: 6e74 2074 6861 7420 6361 6e20 7365 6e64  nt that can send
-0005a3b0: 206d 6573 7361 6765 732c 206c 6973 7465   messages, liste
-0005a3c0: 6e20 746f 206d 6573 7361 6765 732c 2076  n to messages, v
-0005a3d0: 6572 6966 7920 220a 2020 2020 2020 2020  erify ".        
-0005a3e0: 2020 2020 2264 6576 6963 6573 2c20 6574      "devices, et
-0005a3f0: 632e 2049 7420 6361 6e20 7365 6e64 206f  c. It can send o
-0005a400: 6e65 206f 7220 6d75 6c74 6970 6c65 206d  ne or multiple m
-0005a410: 6573 7361 6765 2074 6f20 6f6e 6520 6f72  essage to one or
-0005a420: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
-0005a430: 6d75 6c74 6970 6c65 204d 6174 7269 7820  multiple Matrix 
-0005a440: 726f 6f6d 7320 616e 642f 6f72 2075 7365  rooms and/or use
-0005a450: 7273 2e20 5468 6520 7465 7874 206d 6573  rs. The text mes
-0005a460: 7361 6765 7320 6361 6e20 6265 2022 0a20  sages can be ". 
-0005a470: 2020 2020 2020 2020 2020 2022 6f66 2076             "of v
-0005a480: 6172 696f 7573 2022 0a20 2020 2020 2020  arious ".       
-0005a490: 2020 2020 2027 666f 726d 6174 7320 7375       'formats su
-0005a4a0: 6368 2061 7320 2274 6578 7422 2c20 2268  ch as "text", "h
-0005a4b0: 746d 6c22 2c20 226d 6172 6b64 6f77 6e22  tml", "markdown"
-0005a4c0: 206f 7220 2263 6f64 6522 2e20 270a 2020   or "code". '.  
-0005a4d0: 2020 2020 2020 2020 2020 2249 6d61 6765            "Image
-0005a4e0: 732c 2061 7564 696f 2c20 6172 6269 7472  s, audio, arbitr
-0005a4f0: 6172 7920 6669 6c65 732c 206f 7220 6576  ary files, or ev
-0005a500: 656e 7473 2063 616e 2062 6520 7365 6e74  ents can be sent
-0005a510: 2061 7320 7765 6c6c 2e20 220a 2020 2020   as well. ".    
-0005a520: 2020 2020 2020 2020 2246 6f72 2072 6563          "For rec
-0005a530: 6569 7669 6e67 2074 6865 7265 2061 7265  eiving there are
-0005a540: 2074 6872 6565 206d 6169 6e20 6f70 7469   three main opti
-0005a550: 6f6e 733a 206c 6973 7465 6e20 666f 7265  ons: listen fore
-0005a560: 7665 722c 2022 0a20 2020 2020 2020 2020  ver, ".         
-0005a570: 2020 2022 6c69 7374 656e 206f 6e63 6520     "listen once 
-0005a580: 616e 6420 7175 6974 2c20 616e 6420 6765  and quit, and ge
-0005a590: 7420 7468 6520 6c61 7374 204e 206d 6573  t the last N mes
-0005a5a0: 7361 6765 7320 220a 2020 2020 2020 2020  sages ".        
-0005a5b0: 2020 2020 2261 6e64 2071 7569 742e 2045      "and quit. E
-0005a5c0: 6e64 2d74 6f2d 656e 6420 656e 6372 7970  nd-to-end encryp
-0005a5d0: 7469 6f6e 2069 7320 656e 6162 6c65 6420  tion is enabled 
-0005a5e0: 6279 2064 6566 6175 6c74 2022 0a20 2020  by default ".   
-0005a5f0: 2020 2020 2020 2020 2022 616e 6420 6361           "and ca
-0005a600: 6e6e 6f74 2062 6520 7475 726e 6564 206f  nnot be turned o
-0005a610: 6666 2c20 6275 7420 6974 2063 616e 2062  ff, but it can b
-0005a620: 6520 6469 7361 626c 6564 2066 6f72 2073  e disabled for s
-0005a630: 7065 6369 6669 6320 220a 2020 2020 2020  pecific ".      
-0005a640: 2020 2020 2020 2275 7365 2063 6173 6573        "use cases
-0005a650: 2e20 20e2 9480 e294 80e2 9480 2022 0a20  .  ......... ". 
-0005a660: 2020 2020 2020 2020 2020 2022 4275 6e64             "Bund
-0005a670: 6c69 6e67 2073 6576 6572 616c 2061 6374  ling several act
-0005a680: 696f 6e73 2074 6f67 6574 6865 7220 696e  ions together in
-0005a690: 746f 2061 2073 696e 676c 6520 6361 6c6c  to a single call
-0005a6a0: 2074 6f20 220a 2020 2020 2020 2020 2020   to ".          
-0005a6b0: 2020 6622 7b50 524f 475f 5749 5448 4f55    f"{PROG_WITHOU
-0005a6c0: 545f 4558 547d 2069 7320 6661 7374 6572  T_EXT} is faster
-0005a6d0: 2074 6861 6e20 6361 6c6c 696e 6720 7b50   than calling {P
-0005a6e0: 524f 475f 5749 5448 4f55 545f 4558 547d  ROG_WITHOUT_EXT}
-0005a6f0: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
-0005a700: 6d75 6c74 6970 6c65 2074 696d 6573 2077  multiple times w
-0005a710: 6974 6820 6f6e 6c79 206f 6e65 2061 6374  ith only one act
-0005a720: 696f 6e2e 2049 6620 7468 6572 6520 6172  ion. If there ar
-0005a730: 6520 626f 7468 2027 7365 7427 2022 0a20  e both 'set' ". 
-0005a740: 2020 2020 2020 2020 2020 2022 616e 6420             "and 
-0005a750: 2767 6574 2720 6163 7469 6f6e 7320 7072  'get' actions pr
-0005a760: 6573 656e 7420 696e 2074 6865 2061 7267  esent in the arg
-0005a770: 756d 656e 7473 2c20 7468 656e 2074 6865  uments, then the
-0005a780: 2027 7365 7427 2022 0a20 2020 2020 2020   'set' ".       
-0005a790: 2020 2020 2022 6163 7469 6f6e 7320 7769       "actions wi
-0005a7a0: 6c6c 2062 6520 7065 7266 6f72 6d65 6420  ll be performed 
-0005a7b0: 6265 666f 7265 2074 6865 2027 6765 7427  before the 'get'
-0005a7c0: 2061 6374 696f 6e73 2e20 5468 656e 2022   actions. Then "
-0005a7d0: 0a20 2020 2020 2020 2020 2020 2022 7365  .            "se
-0005a7e0: 6e64 2061 6374 696f 6e73 2061 6e64 2061  nd actions and a
-0005a7f0: 7420 7468 6520 7665 7279 2065 6e64 206c  t the very end l
-0005a800: 6973 7465 6e20 6163 7469 6f6e 7320 7769  isten actions wi
-0005a810: 6c6c 2062 6520 220a 2020 2020 2020 2020  ll be ".        
-0005a820: 2020 2020 2270 6572 666f 726d 6564 2e20      "performed. 
-0005a830: e294 80e2 9480 e294 8020 220a 2020 2020  ......... ".    
-0005a840: 2020 2020 2020 2020 2246 6f72 2065 7665          "For eve
-0005a850: 6e20 6d6f 7265 2065 7870 6c69 6361 7469  n more explicati
-0005a860: 6f6e 7320 616e 6420 6578 616d 706c 6573  ons and examples
-0005a870: 2061 6c73 6f20 7265 6164 2074 6865 2022   also read the "
-0005a880: 0a20 2020 2020 2020 2020 2020 2022 646f  .            "do
-0005a890: 6375 6d65 6e74 6174 696f 6e20 7072 6f76  cumentation prov
-0005a8a0: 6964 6564 2069 6e20 7468 6520 6f6e 2d6c  ided in the on-l
-0005a8b0: 696e 6520 4769 7468 7562 2052 4541 444d  ine Github READM
-0005a8c0: 452e 6d64 2066 696c 6520 220a 2020 2020  E.md file ".    
-0005a8d0: 2020 2020 2020 2020 226f 7220 7468 6520          "or the 
-0005a8e0: 5245 4144 4d45 2e6d 6420 696e 2079 6f75  README.md in you
-0005a8f0: 7220 6c6f 6361 6c20 696e 7374 616c 6c61  r local installa
-0005a900: 7469 6f6e 2e20 20e2 9480 e294 80e2 9480  tion.  .........
-0005a910: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
-0005a920: 466f 7220 6c65 7373 2069 6e66 6f72 6d61  For less informa
-0005a930: 7469 6f6e 206a 7573 7420 7573 6520 2d2d  tion just use --
-0005a940: 6865 6c70 2069 6e73 7465 6164 206f 6620  help instead of 
-0005a950: 2d2d 6d61 6e75 616c 2e22 0a20 2020 2020  --manual.".     
-0005a960: 2020 2029 0a20 2020 2020 2020 2070 7269     ).        pri
-0005a970: 6e74 2874 6578 7477 7261 702e 6669 6c6c  nt(textwrap.fill
-0005a980: 2864 6573 6372 6970 7469 6f6e 2c20 7769  (description, wi
-0005a990: 6474 683d 7465 726d 5f77 6964 7468 292c  dth=term_width),
-0005a9a0: 2066 6c75 7368 3d54 7275 6529 0a20 2020   flush=True).   
-0005a9b0: 2020 2020 2070 7269 6e74 2822 2229 0a20       print(""). 
-0005a9c0: 2020 2020 2020 2061 702e 7072 696e 745f         ap.print_
-0005a9d0: 6865 6c70 2866 696c 653d 4e6f 6e65 2920  help(file=None) 
-0005a9e0: 2023 2061 702e 7072 696e 745f 7573 6167   # ap.print_usag
-0005a9f0: 6528 2920 6973 2069 6e63 6c75 6465 640a  e() is included.
-0005aa00: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
-0005aa10: 0a20 2020 2069 6620 6773 2e70 612e 7265  .    if gs.pa.re
-0005aa20: 6164 6d65 3a0a 2020 2020 2020 2020 2320  adme:.        # 
-0005aa30: 546f 646f 0a20 2020 2020 2020 2065 7865  Todo.        exe
-0005aa40: 6469 7220 3d20 6f73 2e70 6174 682e 6469  dir = os.path.di
-0005aa50: 726e 616d 6528 6f73 2e70 6174 682e 7265  rname(os.path.re
-0005aa60: 616c 7061 7468 285f 5f66 696c 655f 5f29  alpath(__file__)
-0005aa70: 290a 2020 2020 2020 2020 7265 6164 6d65  ).        readme
-0005aa80: 203d 2065 7865 6469 7220 2b20 222f 2e2e   = exedir + "/..
-0005aa90: 2f22 202b 2022 5245 4144 4d45 2e6d 6422  /" + "README.md"
-0005aaa0: 0a20 2020 2020 2020 2072 6561 646d 655f  .        readme_
-0005aab0: 7072 696d 6172 7920 3d20 7265 6164 6d65  primary = readme
-0005aac0: 0a20 2020 2020 2020 2066 6f75 6e64 7061  .        foundpa
-0005aad0: 7468 203d 204e 6f6e 650a 2020 2020 2020  th = None.      
-0005aae0: 2020 6966 206f 732e 7061 7468 2e65 7869    if os.path.exi
-0005aaf0: 7374 7328 7265 6164 6d65 293a 0a20 2020  sts(readme):.   
-0005ab00: 2020 2020 2020 2020 2066 6f75 6e64 7061           foundpa
-0005ab10: 7468 203d 2072 6561 646d 650a 2020 2020  th = readme.    
-0005ab20: 2020 2020 2020 2020 7072 696e 7428 6622          print(f"
-0005ab30: 466f 756e 6420 6c6f 6361 6c20 5245 4144  Found local READ
-0005ab40: 4d45 2e6d 6420 6865 7265 3a20 7b72 6561  ME.md here: {rea
-0005ab50: 646d 657d 2229 0a20 2020 2020 2020 2065  dme}").        e
-0005ab60: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0005ab70: 2072 6561 646d 6520 3d20 6578 6564 6972   readme = exedir
-0005ab80: 202b 2022 2f22 202b 2022 5245 4144 4d45   + "/" + "README
-0005ab90: 2e6d 6422 0a20 2020 2020 2020 2020 2020  .md".           
-0005aba0: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
-0005abb0: 7473 2872 6561 646d 6529 3a0a 2020 2020  ts(readme):.    
-0005abc0: 2020 2020 2020 2020 2020 2020 666f 756e              foun
-0005abd0: 6470 6174 6820 3d20 7265 6164 6d65 0a20  dpath = readme. 
-0005abe0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0005abf0: 7269 6e74 2866 2246 6f75 6e64 206c 6f63  rint(f"Found loc
-0005ac00: 616c 2052 4541 444d 452e 6d64 2068 6572  al README.md her
-0005ac10: 653a 207b 7265 6164 6d65 7d22 290a 2020  e: {readme}").  
-0005ac20: 2020 2020 2020 6966 2066 6f75 6e64 7061        if foundpa
-0005ac30: 7468 2069 7320 4e6f 6e65 3a0a 2020 2020  th is None:.    
-0005ac40: 2020 2020 2020 2020 7072 696e 7428 0a20          print(. 
-0005ac50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0005ac60: 536f 7272 792c 2052 4541 444d 452e 6d64  Sorry, README.md
-0005ac70: 206e 6f74 2066 6f75 6e64 206c 6f63 616c   not found local
-0005ac80: 6c79 2022 0a20 2020 2020 2020 2020 2020  ly ".           
-0005ac90: 2020 2020 2066 2269 6e20 696e 7374 616c       f"in instal
-0005aca0: 6c61 7469 6f6e 2064 6972 6563 746f 7279  lation directory
-0005acb0: 207b 7265 6164 6d65 5f70 7269 6d61 7279   {readme_primary
-0005acc0: 7d2e 220a 2020 2020 2020 2020 2020 2020  }.".            
-0005acd0: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
-0005ace0: 696e 7428 6622 4865 6e63 6520 646f 776e  int(f"Hence down
-0005acf0: 6c6f 6164 696e 6720 6974 2066 726f 6d20  loading it from 
-0005ad00: 7b52 4541 444d 455f 4649 4c45 5f52 4157  {README_FILE_RAW
-0005ad10: 5f55 524c 7d2e 2229 0a20 2020 2020 2020  _URL}.").       
-0005ad20: 2020 2020 206e 6f74 7573 6564 2c20 666f       notused, fo
-0005ad30: 756e 6470 6174 6820 3d20 7465 6d70 6669  undpath = tempfi
-0005ad40: 6c65 2e6d 6b73 7465 6d70 2829 0a20 2020  le.mkstemp().   
-0005ad50: 2020 2020 2020 2020 2075 726c 6c69 622e           urllib.
-0005ad60: 7265 7175 6573 742e 7572 6c72 6574 7269  request.urlretri
-0005ad70: 6576 6528 5245 4144 4d45 5f46 494c 455f  eve(README_FILE_
-0005ad80: 5241 575f 5552 4c2c 2066 6f75 6e64 7061  RAW_URL, foundpa
-0005ad90: 7468 290a 2020 2020 2020 2020 7472 793a  th).        try:
-0005ada0: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
-0005adb0: 6820 6f70 656e 2866 6f75 6e64 7061 7468  h open(foundpath
-0005adc0: 2c20 2272 2b22 2920 6173 2066 3a0a 2020  , "r+") as f:.  
-0005add0: 2020 2020 2020 2020 2020 2020 2020 7465                te
-0005ade0: 7874 203d 2066 2e72 6561 6428 290a 2020  xt = f.read().  
-0005adf0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-0005ae00: 6622 7b74 6578 747d 2229 0a20 2020 2020  f"{text}").     
-0005ae10: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0005ae20: 696f 6e3a 2020 2320 2842 726f 6b65 6e50  ion:  # (BrokenP
-0005ae30: 6970 6545 7272 6f72 2c20 494f 4572 726f  ipeError, IOErro
-0005ae40: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0005ae50: 2320 7072 696e 7428 2242 726f 6b65 6e50  # print("BrokenP
-0005ae60: 6970 6545 7272 6f72 2063 6175 6768 7422  ipeError caught"
-0005ae70: 2c20 6669 6c65 3d73 7973 2e73 7464 6572  , file=sys.stder
-0005ae80: 7229 0a20 2020 2020 2020 2020 2020 2070  r).            p
-0005ae90: 6173 730a 2020 2020 2020 2020 7265 7475  ass.        retu
-0005aea0: 726e 2030 0a0a 2020 2020 6c6f 6767 696e  rn 0..    loggin
-0005aeb0: 672e 6261 7369 6343 6f6e 6669 6728 2020  g.basicConfig(  
-0005aec0: 2320 696e 6974 6961 6c69 7a65 2072 6f6f  # initialize roo
-0005aed0: 7420 6c6f 6767 6572 2c20 6120 6d75 7374  t logger, a must
-0005aee0: 0a20 2020 2020 2020 2066 6f72 6d61 743d  .        format=
-0005aef0: 227b 6173 6374 696d 657d 3a20 7b6c 6576  "{asctime}: {lev
-0005af00: 656c 6e61 6d65 3a3e 387d 3a20 7b6e 616d  elname:>8}: {nam
-0005af10: 653a 3e31 367d 3a20 7b6d 6573 7361 6765  e:>16}: {message
-0005af20: 7d22 2c20 7374 796c 653d 227b 220a 2020  }", style="{".  
-0005af30: 2020 290a 2020 2020 2320 7365 7420 6c6f    ).    # set lo
-0005af40: 6720 6c65 7665 6c20 6f6e 2072 6f6f 740a  g level on root.
-0005af50: 2020 2020 6966 2022 4445 4255 4722 2069      if "DEBUG" i
-0005af60: 6e20 6f73 2e65 6e76 6972 6f6e 3a0a 2020  n os.environ:.  
-0005af70: 2020 2020 2020 6c6f 6767 696e 672e 6765        logging.ge
-0005af80: 744c 6f67 6765 7228 292e 7365 744c 6576  tLogger().setLev
-0005af90: 656c 286c 6f67 6769 6e67 2e44 4542 5547  el(logging.DEBUG
-0005afa0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-0005afb0: 2020 2020 6c6f 6767 696e 672e 6765 744c      logging.getL
-0005afc0: 6f67 6765 7228 292e 7365 744c 6576 656c  ogger().setLevel
-0005afd0: 286c 6f67 6769 6e67 2e49 4e46 4f29 0a0a  (logging.INFO)..
-0005afe0: 2020 2020 6773 2e6c 6f67 203d 206c 6f67      gs.log = log
-0005aff0: 6769 6e67 2e67 6574 4c6f 6767 6572 2850  ging.getLogger(P
-0005b000: 524f 475f 5749 5448 4f55 545f 4558 5429  ROG_WITHOUT_EXT)
-0005b010: 0a0a 2020 2020 6966 2067 732e 7061 2e6c  ..    if gs.pa.l
-0005b020: 6f67 5f6c 6576 656c 3a0a 2020 2020 2020  og_level:.      
-0005b030: 2020 696e 6974 6961 6c5f 6368 6563 6b5f    initial_check_
-0005b040: 6f66 5f6c 6f67 5f61 7267 7328 290a 2020  of_log_args().  
-0005b050: 2020 2020 2020 6966 206c 656e 2867 732e        if len(gs.
-0005b060: 7061 2e6c 6f67 5f6c 6576 656c 2920 3e20  pa.log_level) > 
-0005b070: 303a 0a20 2020 2020 2020 2020 2020 2069  0:.            i
-0005b080: 6620 6c65 6e28 6773 2e70 612e 6c6f 675f  f len(gs.pa.log_
-0005b090: 6c65 7665 6c29 203e 2031 3a0a 2020 2020  level) > 1:.    
-0005b0a0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
-0005b0b0: 7420 6c6f 6720 6c65 7665 6c20 666f 7220  t log level for 
-0005b0c0: 4556 4552 5954 4849 4e47 0a20 2020 2020  EVERYTHING.     
-0005b0d0: 2020 2020 2020 2020 2020 206c 6f67 6769             loggi
-0005b0e0: 6e67 2e67 6574 4c6f 6767 6572 2829 2e73  ng.getLogger().s
-0005b0f0: 6574 4c65 7665 6c28 6773 2e70 612e 6c6f  etLevel(gs.pa.lo
-0005b100: 675f 6c65 7665 6c5b 315d 290a 2020 2020  g_level[1]).    
-0005b110: 2020 2020 2020 2020 2320 7365 7420 6c6f          # set lo
-0005b120: 6720 6c65 7665 6c20 666f 7220 6d61 7472  g level for matr
-0005b130: 6978 2d63 6f6d 6d61 6e64 6572 0a20 2020  ix-commander.   
-0005b140: 2020 2020 2020 2020 2067 732e 6c6f 672e           gs.log.
-0005b150: 7365 744c 6576 656c 2867 732e 7061 2e6c  setLevel(gs.pa.l
-0005b160: 6f67 5f6c 6576 656c 5b30 5d29 0a20 2020  og_level[0]).   
-0005b170: 2020 2020 2020 2020 2067 732e 6c6f 672e           gs.log.
-0005b180: 6465 6275 6728 0a20 2020 2020 2020 2020  debug(.         
-0005b190: 2020 2020 2020 2066 224c 6f67 206c 6576         f"Log lev
-0005b1a0: 656c 2069 7320 7365 7420 666f 7220 6d6f  el is set for mo
-0005b1b0: 6475 6c65 207b 5052 4f47 5f57 4954 484f  dule {PROG_WITHO
-0005b1c0: 5554 5f45 5854 7d2e 2022 0a20 2020 2020  UT_EXT}. ".     
-0005b1d0: 2020 2020 2020 2020 2020 2066 226c 6f67             f"log
-0005b1e0: 5f6c 6576 656c 3d7b 6773 2e70 612e 6c6f  _level={gs.pa.lo
-0005b1f0: 675f 6c65 7665 6c5b 305d 7d22 0a20 2020  g_level[0]}".   
-0005b200: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0005b210: 2020 2020 2020 2069 6620 6c65 6e28 6773         if len(gs
-0005b220: 2e70 612e 6c6f 675f 6c65 7665 6c29 203e  .pa.log_level) >
-0005b230: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-0005b240: 2020 2020 2320 6f6e 6c79 206e 6f77 2074      # only now t
-0005b250: 6861 7420 6c6f 6361 6c20 6c6f 6720 6c65  hat local log le
-0005b260: 7665 6c20 6973 2073 6574 2c20 7765 2063  vel is set, we c
-0005b270: 616e 206c 6f67 2070 7265 762e 2069 6e66  an log prev. inf
-0005b280: 6f0a 2020 2020 2020 2020 2020 2020 2020  o.              
-0005b290: 2020 6773 2e6c 6f67 2e64 6562 7567 280a    gs.log.debug(.
-0005b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005b2b0: 2020 2020 6622 4c6f 6720 6c65 7665 6c20      f"Log level 
-0005b2c0: 6973 2073 6574 2066 6f72 206d 6f64 756c  is set for modul
-0005b2d0: 6573 2062 656c 6f77 207b 5052 4f47 5f57  es below {PROG_W
-0005b2e0: 4954 484f 5554 5f45 5854 7d2e 2022 0a20  ITHOUT_EXT}. ". 
+0005a0e0: 2020 7465 7874 7772 6170 2e66 696c 6c28    textwrap.fill(
+0005a0f0: 6c69 6e65 2c20 7769 6474 683d 7465 726d  line, width=term
+0005a100: 5f77 6964 7468 202d 2032 292c 2022 2020  _width - 2), "  
+0005a110: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0005a120: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
+0005a130: 2020 2020 2020 2020 2020 2020 2066 6c75               flu
+0005a140: 7368 3d54 7275 652c 0a20 2020 2020 2020  sh=True,.       
+0005a150: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+0005a160: 2020 2020 2020 2020 6865 6164 6572 203d          header =
+0005a170: 206e 6f74 2068 6561 6465 720a 2020 2020   not header.    
+0005a180: 2020 2020 2320 7072 696e 7428 2222 290a      # print("").
+0005a190: 2020 2020 2020 2020 7072 696e 7428 7465          print(te
+0005a1a0: 7874 7772 6170 2e66 696c 6c28 6170 2e65  xtwrap.fill(ap.e
+0005a1b0: 7069 6c6f 672c 2077 6964 7468 3d74 6572  pilog, width=ter
+0005a1c0: 6d5f 7769 6474 6829 290a 2020 2020 2020  m_width)).      
+0005a1d0: 2020 7265 7475 726e 2030 0a20 2020 2069    return 0.    i
+0005a1e0: 6620 6773 2e70 612e 6d61 6e75 616c 3a0a  f gs.pa.manual:.
+0005a1f0: 2020 2020 2020 2020 6465 7363 7269 7074          descript
+0005a200: 696f 6e20 3d20 280a 2020 2020 2020 2020  ion = (.        
+0005a210: 2020 2020 6622 5765 6c63 6f6d 6520 746f      f"Welcome to
+0005a220: 207b 5052 4f47 5f57 4954 484f 5554 5f45   {PROG_WITHOUT_E
+0005a230: 5854 7d2c 2061 204d 6174 7269 7820 434c  XT}, a Matrix CL
+0005a240: 4920 636c 6965 6e74 2e20 e294 80e2 9480  I client. ......
+0005a250: e294 8020 220a 2020 2020 2020 2020 2020  ... ".          
+0005a260: 2020 224f 6e20 6669 7273 7420 7275 6e20    "On first run 
+0005a270: 7573 6520 2d2d 6c6f 6769 6e20 746f 206c  use --login to l
+0005a280: 6f67 2069 6e2c 2074 6f20 6175 7468 656e  og in, to authen
+0005a290: 7469 6361 7465 2e20 220a 2020 2020 2020  ticate. ".      
+0005a2a0: 2020 2020 2020 224f 6e20 7365 636f 6e64        "On second
+0005a2b0: 2072 756e 2077 6520 7375 6767 6573 7420   run we suggest 
+0005a2c0: 746f 2075 7365 202d 2d76 6572 6966 7920  to use --verify 
+0005a2d0: 746f 2067 6574 2076 6572 6966 6965 642e  to get verified.
+0005a2e0: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
+0005a2f0: 456d 6f6a 6920 7665 7269 6669 6361 7469  Emoji verificati
+0005a300: 6f6e 2069 7320 6275 696c 742d 696e 2077  on is built-in w
+0005a310: 6869 6368 2063 616e 2062 6520 7573 6564  hich can be used
+0005a320: 2022 0a20 2020 2020 2020 2020 2020 2022   ".            "
+0005a330: 746f 2076 6572 6966 7920 6465 7669 6365  to verify device
+0005a340: 732e 2022 0a20 2020 2020 2020 2020 2020  s. ".           
+0005a350: 2022 4f6e 2066 7572 7468 6572 2072 756e   "On further run
+0005a360: 7320 7468 6973 2070 726f 6772 616d 2069  s this program i
+0005a370: 6d70 6c65 6d65 6e74 7320 6120 7369 6d70  mplements a simp
+0005a380: 6c65 204d 6174 7269 7820 434c 4920 220a  le Matrix CLI ".
+0005a390: 2020 2020 2020 2020 2020 2020 2263 6c69              "cli
+0005a3a0: 656e 7420 7468 6174 2063 616e 2073 656e  ent that can sen
+0005a3b0: 6420 6d65 7373 6167 6573 2c20 6c69 7374  d messages, list
+0005a3c0: 656e 2074 6f20 6d65 7373 6167 6573 2c20  en to messages, 
+0005a3d0: 7665 7269 6679 2022 0a20 2020 2020 2020  verify ".       
+0005a3e0: 2020 2020 2022 6465 7669 6365 732c 2065       "devices, e
+0005a3f0: 7463 2e20 4974 2063 616e 2073 656e 6420  tc. It can send 
+0005a400: 6f6e 6520 6f72 206d 756c 7469 706c 6520  one or multiple 
+0005a410: 6d65 7373 6167 6520 746f 206f 6e65 206f  message to one o
+0005a420: 7220 220a 2020 2020 2020 2020 2020 2020  r ".            
+0005a430: 226d 756c 7469 706c 6520 4d61 7472 6978  "multiple Matrix
+0005a440: 2072 6f6f 6d73 2061 6e64 2f6f 7220 7573   rooms and/or us
+0005a450: 6572 732e 2054 6865 2074 6578 7420 6d65  ers. The text me
+0005a460: 7373 6167 6573 2063 616e 2062 6520 220a  ssages can be ".
+0005a470: 2020 2020 2020 2020 2020 2020 226f 6620              "of 
+0005a480: 7661 7269 6f75 7320 220a 2020 2020 2020  various ".      
+0005a490: 2020 2020 2020 2766 6f72 6d61 7473 2073        'formats s
+0005a4a0: 7563 6820 6173 2022 7465 7874 222c 2022  uch as "text", "
+0005a4b0: 6874 6d6c 222c 2022 6d61 726b 646f 776e  html", "markdown
+0005a4c0: 2220 6f72 2022 636f 6465 222e 2027 0a20  " or "code". '. 
+0005a4d0: 2020 2020 2020 2020 2020 2022 496d 6167             "Imag
+0005a4e0: 6573 2c20 6175 6469 6f2c 2061 7262 6974  es, audio, arbit
+0005a4f0: 7261 7279 2066 696c 6573 2c20 6f72 2065  rary files, or e
+0005a500: 7665 6e74 7320 6361 6e20 6265 2073 656e  vents can be sen
+0005a510: 7420 6173 2077 656c 6c2e 2022 0a20 2020  t as well. ".   
+0005a520: 2020 2020 2020 2020 2022 466f 7220 7265           "For re
+0005a530: 6365 6976 696e 6720 7468 6572 6520 6172  ceiving there ar
+0005a540: 6520 7468 7265 6520 6d61 696e 206f 7074  e three main opt
+0005a550: 696f 6e73 3a20 6c69 7374 656e 2066 6f72  ions: listen for
+0005a560: 6576 6572 2c20 220a 2020 2020 2020 2020  ever, ".        
+0005a570: 2020 2020 226c 6973 7465 6e20 6f6e 6365      "listen once
+0005a580: 2061 6e64 2071 7569 742c 2061 6e64 2067   and quit, and g
+0005a590: 6574 2074 6865 206c 6173 7420 4e20 6d65  et the last N me
+0005a5a0: 7373 6167 6573 2022 0a20 2020 2020 2020  ssages ".       
+0005a5b0: 2020 2020 2022 616e 6420 7175 6974 2e20       "and quit. 
+0005a5c0: 456e 642d 746f 2d65 6e64 2065 6e63 7279  End-to-end encry
+0005a5d0: 7074 696f 6e20 6973 2065 6e61 626c 6564  ption is enabled
+0005a5e0: 2062 7920 6465 6661 756c 7420 220a 2020   by default ".  
+0005a5f0: 2020 2020 2020 2020 2020 2261 6e64 2063            "and c
+0005a600: 616e 6e6f 7420 6265 2074 7572 6e65 6420  annot be turned 
+0005a610: 6f66 662c 2062 7574 2069 7420 6361 6e20  off, but it can 
+0005a620: 6265 2064 6973 6162 6c65 6420 666f 7220  be disabled for 
+0005a630: 7370 6563 6966 6963 2022 0a20 2020 2020  specific ".     
+0005a640: 2020 2020 2020 2022 7573 6520 6361 7365         "use case
+0005a650: 732e 2020 e294 80e2 9480 e294 8020 220a  s.  ......... ".
+0005a660: 2020 2020 2020 2020 2020 2020 2242 756e              "Bun
+0005a670: 646c 696e 6720 7365 7665 7261 6c20 6163  dling several ac
+0005a680: 7469 6f6e 7320 746f 6765 7468 6572 2069  tions together i
+0005a690: 6e74 6f20 6120 7369 6e67 6c65 2063 616c  nto a single cal
+0005a6a0: 6c20 746f 2022 0a20 2020 2020 2020 2020  l to ".         
+0005a6b0: 2020 2066 227b 5052 4f47 5f57 4954 484f     f"{PROG_WITHO
+0005a6c0: 5554 5f45 5854 7d20 6973 2066 6173 7465  UT_EXT} is faste
+0005a6d0: 7220 7468 616e 2063 616c 6c69 6e67 207b  r than calling {
+0005a6e0: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+0005a6f0: 7d20 220a 2020 2020 2020 2020 2020 2020  } ".            
+0005a700: 226d 756c 7469 706c 6520 7469 6d65 7320  "multiple times 
+0005a710: 7769 7468 206f 6e6c 7920 6f6e 6520 6163  with only one ac
+0005a720: 7469 6f6e 2e20 4966 2074 6865 7265 2061  tion. If there a
+0005a730: 7265 2062 6f74 6820 2773 6574 2720 220a  re both 'set' ".
+0005a740: 2020 2020 2020 2020 2020 2020 2261 6e64              "and
+0005a750: 2027 6765 7427 2061 6374 696f 6e73 2070   'get' actions p
+0005a760: 7265 7365 6e74 2069 6e20 7468 6520 6172  resent in the ar
+0005a770: 6775 6d65 6e74 732c 2074 6865 6e20 7468  guments, then th
+0005a780: 6520 2773 6574 2720 220a 2020 2020 2020  e 'set' ".      
+0005a790: 2020 2020 2020 2261 6374 696f 6e73 2077        "actions w
+0005a7a0: 696c 6c20 6265 2070 6572 666f 726d 6564  ill be performed
+0005a7b0: 2062 6566 6f72 6520 7468 6520 2767 6574   before the 'get
+0005a7c0: 2720 6163 7469 6f6e 732e 2054 6865 6e20  ' actions. Then 
+0005a7d0: 220a 2020 2020 2020 2020 2020 2020 2273  ".            "s
+0005a7e0: 656e 6420 6163 7469 6f6e 7320 616e 6420  end actions and 
+0005a7f0: 6174 2074 6865 2076 6572 7920 656e 6420  at the very end 
+0005a800: 6c69 7374 656e 2061 6374 696f 6e73 2077  listen actions w
+0005a810: 696c 6c20 6265 2022 0a20 2020 2020 2020  ill be ".       
+0005a820: 2020 2020 2022 7065 7266 6f72 6d65 642e       "performed.
+0005a830: 20e2 9480 e294 80e2 9480 2022 0a20 2020   ......... ".   
+0005a840: 2020 2020 2020 2020 2022 466f 7220 6576           "For ev
+0005a850: 656e 206d 6f72 6520 6578 706c 6963 6174  en more explicat
+0005a860: 696f 6e73 2061 6e64 2065 7861 6d70 6c65  ions and example
+0005a870: 7320 616c 736f 2072 6561 6420 7468 6520  s also read the 
+0005a880: 220a 2020 2020 2020 2020 2020 2020 2264  ".            "d
+0005a890: 6f63 756d 656e 7461 7469 6f6e 2070 726f  ocumentation pro
+0005a8a0: 7669 6465 6420 696e 2074 6865 206f 6e2d  vided in the on-
+0005a8b0: 6c69 6e65 2047 6974 6875 6220 5245 4144  line Github READ
+0005a8c0: 4d45 2e6d 6420 6669 6c65 2022 0a20 2020  ME.md file ".   
+0005a8d0: 2020 2020 2020 2020 2022 6f72 2074 6865           "or the
+0005a8e0: 2052 4541 444d 452e 6d64 2069 6e20 796f   README.md in yo
+0005a8f0: 7572 206c 6f63 616c 2069 6e73 7461 6c6c  ur local install
+0005a900: 6174 696f 6e2e 2020 e294 80e2 9480 e294  ation.  ........
+0005a910: 8020 220a 2020 2020 2020 2020 2020 2020  . ".            
+0005a920: 2246 6f72 206c 6573 7320 696e 666f 726d  "For less inform
+0005a930: 6174 696f 6e20 6a75 7374 2075 7365 202d  ation just use -
+0005a940: 2d68 656c 7020 696e 7374 6561 6420 6f66  -help instead of
+0005a950: 202d 2d6d 616e 7561 6c2e 220a 2020 2020   --manual.".    
+0005a960: 2020 2020 290a 2020 2020 2020 2020 7072      ).        pr
+0005a970: 696e 7428 7465 7874 7772 6170 2e66 696c  int(textwrap.fil
+0005a980: 6c28 6465 7363 7269 7074 696f 6e2c 2077  l(description, w
+0005a990: 6964 7468 3d74 6572 6d5f 7769 6474 6829  idth=term_width)
+0005a9a0: 2c20 666c 7573 683d 5472 7565 290a 2020  , flush=True).  
+0005a9b0: 2020 2020 2020 7072 696e 7428 2222 290a        print("").
+0005a9c0: 2020 2020 2020 2020 6170 2e70 7269 6e74          ap.print
+0005a9d0: 5f68 656c 7028 6669 6c65 3d4e 6f6e 6529  _help(file=None)
+0005a9e0: 2020 2320 6170 2e70 7269 6e74 5f75 7361    # ap.print_usa
+0005a9f0: 6765 2829 2069 7320 696e 636c 7564 6564  ge() is included
+0005aa00: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0005aa10: 300a 2020 2020 6966 2067 732e 7061 2e72  0.    if gs.pa.r
+0005aa20: 6561 646d 653a 0a20 2020 2020 2020 2023  eadme:.        #
+0005aa30: 2054 6f64 6f0a 2020 2020 2020 2020 6578   Todo.        ex
+0005aa40: 6564 6972 203d 206f 732e 7061 7468 2e64  edir = os.path.d
+0005aa50: 6972 6e61 6d65 286f 732e 7061 7468 2e72  irname(os.path.r
+0005aa60: 6561 6c70 6174 6828 5f5f 6669 6c65 5f5f  ealpath(__file__
+0005aa70: 2929 0a20 2020 2020 2020 2072 6561 646d  )).        readm
+0005aa80: 6520 3d20 6578 6564 6972 202b 2022 2f2e  e = exedir + "/.
+0005aa90: 2e2f 2220 2b20 2252 4541 444d 452e 6d64  ./" + "README.md
+0005aaa0: 220a 2020 2020 2020 2020 7265 6164 6d65  ".        readme
+0005aab0: 5f70 7269 6d61 7279 203d 2072 6561 646d  _primary = readm
+0005aac0: 650a 2020 2020 2020 2020 666f 756e 6470  e.        foundp
+0005aad0: 6174 6820 3d20 4e6f 6e65 0a20 2020 2020  ath = None.     
+0005aae0: 2020 2069 6620 6f73 2e70 6174 682e 6578     if os.path.ex
+0005aaf0: 6973 7473 2872 6561 646d 6529 3a0a 2020  ists(readme):.  
+0005ab00: 2020 2020 2020 2020 2020 666f 756e 6470            foundp
+0005ab10: 6174 6820 3d20 7265 6164 6d65 0a20 2020  ath = readme.   
+0005ab20: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
+0005ab30: 2246 6f75 6e64 206c 6f63 616c 2052 4541  "Found local REA
+0005ab40: 444d 452e 6d64 2068 6572 653a 207b 7265  DME.md here: {re
+0005ab50: 6164 6d65 7d22 290a 2020 2020 2020 2020  adme}").        
+0005ab60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0005ab70: 2020 7265 6164 6d65 203d 2065 7865 6469    readme = exedi
+0005ab80: 7220 2b20 222f 2220 2b20 2252 4541 444d  r + "/" + "READM
+0005ab90: 452e 6d64 220a 2020 2020 2020 2020 2020  E.md".          
+0005aba0: 2020 6966 206f 732e 7061 7468 2e65 7869    if os.path.exi
+0005abb0: 7374 7328 7265 6164 6d65 293a 0a20 2020  sts(readme):.   
+0005abc0: 2020 2020 2020 2020 2020 2020 2066 6f75               fou
+0005abd0: 6e64 7061 7468 203d 2072 6561 646d 650a  ndpath = readme.
+0005abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005abf0: 7072 696e 7428 6622 466f 756e 6420 6c6f  print(f"Found lo
+0005ac00: 6361 6c20 5245 4144 4d45 2e6d 6420 6865  cal README.md he
+0005ac10: 7265 3a20 7b72 6561 646d 657d 2229 0a20  re: {readme}"). 
+0005ac20: 2020 2020 2020 2069 6620 666f 756e 6470         if foundp
+0005ac30: 6174 6820 6973 204e 6f6e 653a 0a20 2020  ath is None:.   
+0005ac40: 2020 2020 2020 2020 2070 7269 6e74 280a           print(.
+0005ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ac60: 2253 6f72 7279 2c20 5245 4144 4d45 2e6d  "Sorry, README.m
+0005ac70: 6420 6e6f 7420 666f 756e 6420 6c6f 6361  d not found loca
+0005ac80: 6c6c 7920 220a 2020 2020 2020 2020 2020  lly ".          
+0005ac90: 2020 2020 2020 6622 696e 2069 6e73 7461        f"in insta
+0005aca0: 6c6c 6174 696f 6e20 6469 7265 6374 6f72  llation director
+0005acb0: 7920 7b72 6561 646d 655f 7072 696d 6172  y {readme_primar
+0005acc0: 797d 2e22 0a20 2020 2020 2020 2020 2020  y}.".           
+0005acd0: 2029 0a20 2020 2020 2020 2020 2020 2070   ).            p
+0005ace0: 7269 6e74 2866 2248 656e 6365 2064 6f77  rint(f"Hence dow
+0005acf0: 6e6c 6f61 6469 6e67 2069 7420 6672 6f6d  nloading it from
+0005ad00: 207b 5245 4144 4d45 5f46 494c 455f 5241   {README_FILE_RA
+0005ad10: 575f 5552 4c7d 2e22 290a 2020 2020 2020  W_URL}.").      
+0005ad20: 2020 2020 2020 6e6f 7475 7365 642c 2066        notused, f
+0005ad30: 6f75 6e64 7061 7468 203d 2074 656d 7066  oundpath = tempf
+0005ad40: 696c 652e 6d6b 7374 656d 7028 290a 2020  ile.mkstemp().  
+0005ad50: 2020 2020 2020 2020 2020 7572 6c6c 6962            urllib
+0005ad60: 2e72 6571 7565 7374 2e75 726c 7265 7472  .request.urlretr
+0005ad70: 6965 7665 2852 4541 444d 455f 4649 4c45  ieve(README_FILE
+0005ad80: 5f52 4157 5f55 524c 2c20 666f 756e 6470  _RAW_URL, foundp
+0005ad90: 6174 6829 0a20 2020 2020 2020 2074 7279  ath).        try
+0005ada0: 3a0a 2020 2020 2020 2020 2020 2020 7769  :.            wi
+0005adb0: 7468 206f 7065 6e28 666f 756e 6470 6174  th open(foundpat
+0005adc0: 682c 2022 722b 2229 2061 7320 663a 0a20  h, "r+") as f:. 
+0005add0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0005ade0: 6578 7420 3d20 662e 7265 6164 2829 0a20  ext = f.read(). 
+0005adf0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0005ae00: 2866 227b 7465 7874 7d22 290a 2020 2020  (f"{text}").    
+0005ae10: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+0005ae20: 7469 6f6e 3a20 2023 2028 4272 6f6b 656e  tion:  # (Broken
+0005ae30: 5069 7065 4572 726f 722c 2049 4f45 7272  PipeError, IOErr
+0005ae40: 6f72 293a 0a20 2020 2020 2020 2020 2020  or):.           
+0005ae50: 2023 2070 7269 6e74 2822 4272 6f6b 656e   # print("Broken
+0005ae60: 5069 7065 4572 726f 7220 6361 7567 6874  PipeError caught
+0005ae70: 222c 2066 696c 653d 7379 732e 7374 6465  ", file=sys.stde
+0005ae80: 7272 290a 2020 2020 2020 2020 2020 2020  rr).            
+0005ae90: 7061 7373 0a20 2020 2020 2020 2072 6574  pass.        ret
+0005aea0: 7572 6e20 300a 0a20 2020 206c 6f67 6769  urn 0..    loggi
+0005aeb0: 6e67 2e62 6173 6963 436f 6e66 6967 2820  ng.basicConfig( 
+0005aec0: 2023 2069 6e69 7469 616c 697a 6520 726f   # initialize ro
+0005aed0: 6f74 206c 6f67 6765 722c 2061 206d 7573  ot logger, a mus
+0005aee0: 740a 2020 2020 2020 2020 666f 726d 6174  t.        format
+0005aef0: 3d22 7b61 7363 7469 6d65 7d3a 207b 6c65  ="{asctime}: {le
+0005af00: 7665 6c6e 616d 653a 3e38 7d3a 207b 6e61  velname:>8}: {na
+0005af10: 6d65 3a3e 3136 7d3a 207b 6d65 7373 6167  me:>16}: {messag
+0005af20: 657d 222c 2073 7479 6c65 3d22 7b22 0a20  e}", style="{". 
+0005af30: 2020 2029 0a20 2020 2023 2073 6574 206c     ).    # set l
+0005af40: 6f67 206c 6576 656c 206f 6e20 726f 6f74  og level on root
+0005af50: 0a20 2020 2069 6620 2244 4542 5547 2220  .    if "DEBUG" 
+0005af60: 696e 206f 732e 656e 7669 726f 6e3a 0a20  in os.environ:. 
+0005af70: 2020 2020 2020 206c 6f67 6769 6e67 2e67         logging.g
+0005af80: 6574 4c6f 6767 6572 2829 2e73 6574 4c65  etLogger().setLe
+0005af90: 7665 6c28 6c6f 6767 696e 672e 4445 4255  vel(logging.DEBU
+0005afa0: 4729 0a20 2020 2065 6c73 653a 0a20 2020  G).    else:.   
+0005afb0: 2020 2020 206c 6f67 6769 6e67 2e67 6574       logging.get
+0005afc0: 4c6f 6767 6572 2829 2e73 6574 4c65 7665  Logger().setLeve
+0005afd0: 6c28 6c6f 6767 696e 672e 494e 464f 290a  l(logging.INFO).
+0005afe0: 0a20 2020 2067 732e 6c6f 6720 3d20 6c6f  .    gs.log = lo
+0005aff0: 6767 696e 672e 6765 744c 6f67 6765 7228  gging.getLogger(
+0005b000: 5052 4f47 5f57 4954 484f 5554 5f45 5854  PROG_WITHOUT_EXT
+0005b010: 290a 0a20 2020 2069 6620 6773 2e70 612e  )..    if gs.pa.
+0005b020: 6c6f 675f 6c65 7665 6c3a 0a20 2020 2020  log_level:.     
+0005b030: 2020 2069 6e69 7469 616c 5f63 6865 636b     initial_check
+0005b040: 5f6f 665f 6c6f 675f 6172 6773 2829 0a20  _of_log_args(). 
+0005b050: 2020 2020 2020 2069 6620 6c65 6e28 6773         if len(gs
+0005b060: 2e70 612e 6c6f 675f 6c65 7665 6c29 203e  .pa.log_level) >
+0005b070: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+0005b080: 6966 206c 656e 2867 732e 7061 2e6c 6f67  if len(gs.pa.log
+0005b090: 5f6c 6576 656c 2920 3e20 313a 0a20 2020  _level) > 1:.   
+0005b0a0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+0005b0b0: 6574 206c 6f67 206c 6576 656c 2066 6f72  et log level for
+0005b0c0: 2045 5645 5259 5448 494e 470a 2020 2020   EVERYTHING.    
+0005b0d0: 2020 2020 2020 2020 2020 2020 6c6f 6767              logg
+0005b0e0: 696e 672e 6765 744c 6f67 6765 7228 292e  ing.getLogger().
+0005b0f0: 7365 744c 6576 656c 2867 732e 7061 2e6c  setLevel(gs.pa.l
+0005b100: 6f67 5f6c 6576 656c 5b31 5d29 0a20 2020  og_level[1]).   
+0005b110: 2020 2020 2020 2020 2023 2073 6574 206c           # set l
+0005b120: 6f67 206c 6576 656c 2066 6f72 206d 6174  og level for mat
+0005b130: 7269 782d 636f 6d6d 616e 6465 720a 2020  rix-commander.  
+0005b140: 2020 2020 2020 2020 2020 6773 2e6c 6f67            gs.log
+0005b150: 2e73 6574 4c65 7665 6c28 6773 2e70 612e  .setLevel(gs.pa.
+0005b160: 6c6f 675f 6c65 7665 6c5b 305d 290a 2020  log_level[0]).  
+0005b170: 2020 2020 2020 2020 2020 6773 2e6c 6f67            gs.log
+0005b180: 2e64 6562 7567 280a 2020 2020 2020 2020  .debug(.        
+0005b190: 2020 2020 2020 2020 6622 4c6f 6720 6c65          f"Log le
+0005b1a0: 7665 6c20 6973 2073 6574 2066 6f72 206d  vel is set for m
+0005b1b0: 6f64 756c 6520 7b50 524f 475f 5749 5448  odule {PROG_WITH
+0005b1c0: 4f55 545f 4558 547d 2e20 220a 2020 2020  OUT_EXT}. ".    
+0005b1d0: 2020 2020 2020 2020 2020 2020 6622 6c6f              f"lo
+0005b1e0: 675f 6c65 7665 6c3d 7b67 732e 7061 2e6c  g_level={gs.pa.l
+0005b1f0: 6f67 5f6c 6576 656c 5b30 5d7d 220a 2020  og_level[0]}".  
+0005b200: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0005b210: 2020 2020 2020 2020 6966 206c 656e 2867          if len(g
+0005b220: 732e 7061 2e6c 6f67 5f6c 6576 656c 2920  s.pa.log_level) 
+0005b230: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
+0005b240: 2020 2020 2023 206f 6e6c 7920 6e6f 7720       # only now 
+0005b250: 7468 6174 206c 6f63 616c 206c 6f67 206c  that local log l
+0005b260: 6576 656c 2069 7320 7365 742c 2077 6520  evel is set, we 
+0005b270: 6361 6e20 6c6f 6720 7072 6576 2e20 696e  can log prev. in
+0005b280: 666f 0a20 2020 2020 2020 2020 2020 2020  fo.             
+0005b290: 2020 2067 732e 6c6f 672e 6465 6275 6728     gs.log.debug(
+0005b2a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005b2b0: 2020 2020 2066 224c 6f67 206c 6576 656c       f"Log level
+0005b2c0: 2069 7320 7365 7420 666f 7220 6d6f 6475   is set for modu
+0005b2d0: 6c65 7320 6265 6c6f 7720 7b50 524f 475f  les below {PROG_
+0005b2e0: 5749 5448 4f55 545f 4558 547d 2e20 220a  WITHOUT_EXT}. ".
 0005b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005b300: 2020 2066 226c 6f67 5f6c 6576 656c 3d7b     f"log_level={
-0005b310: 6773 2e70 612e 6c6f 675f 6c65 7665 6c5b  gs.pa.log_level[
-0005b320: 315d 7d22 0a20 2020 2020 2020 2020 2020  1]}".           
-0005b330: 2020 2020 2029 0a20 2020 2069 6620 6773       ).    if gs
-0005b340: 2e70 612e 6465 6275 6720 3e20 303a 0a20  .pa.debug > 0:. 
-0005b350: 2020 2020 2020 2069 6620 6773 2e70 612e         if gs.pa.
-0005b360: 6465 6275 6720 3e20 313a 0a20 2020 2020  debug > 1:.     
-0005b370: 2020 2020 2020 2023 2074 7572 6e20 6f6e         # turn on
-0005b380: 2064 6562 7567 206c 6f67 6769 6e67 2066   debug logging f
-0005b390: 6f72 2045 5645 5259 5448 494e 470a 2020  or EVERYTHING.  
-0005b3a0: 2020 2020 2020 2020 2020 6c6f 6767 696e            loggin
-0005b3b0: 672e 6765 744c 6f67 6765 7228 292e 7365  g.getLogger().se
-0005b3c0: 744c 6576 656c 286c 6f67 6769 6e67 2e44  tLevel(logging.D
-0005b3d0: 4542 5547 290a 2020 2020 2020 2020 2320  EBUG).        # 
-0005b3e0: 7475 726e 206f 6e20 6465 6275 6720 6c6f  turn on debug lo
-0005b3f0: 6767 696e 6720 666f 7220 6d61 7472 6978  gging for matrix
-0005b400: 2d63 6f6d 6d61 6e64 6572 0a20 2020 2020  -commander.     
-0005b410: 2020 2067 732e 6c6f 672e 7365 744c 6576     gs.log.setLev
-0005b420: 656c 286c 6f67 6769 6e67 2e44 4542 5547  el(logging.DEBUG
-0005b430: 290a 2020 2020 2020 2020 6773 2e6c 6f67  ).        gs.log
-0005b440: 2e64 6562 7567 2866 2244 6562 7567 2069  .debug(f"Debug i
-0005b450: 7320 7475 726e 6564 206f 6e2e 2064 6562  s turned on. deb
-0005b460: 7567 2063 6f75 6e74 3d7b 6773 2e70 612e  ug count={gs.pa.
-0005b470: 6465 6275 677d 2229 0a20 2020 2020 2020  debug}").       
-0005b480: 2069 6620 6773 2e70 612e 6c6f 675f 6c65   if gs.pa.log_le
-0005b490: 7665 6c20 616e 6420 6c65 6e28 6773 2e70  vel and len(gs.p
-0005b4a0: 612e 6c6f 675f 6c65 7665 6c29 203e 2030  a.log_level) > 0
-0005b4b0: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
-0005b4c0: 2e6c 6f67 2e77 6172 6e69 6e67 280a 2020  .log.warning(.  
-0005b4d0: 2020 2020 2020 2020 2020 2020 2020 2257                "W
-0005b4e0: 3131 313a 2022 2022 4465 6275 6720 6f70  111: " "Debug op
-0005b4f0: 7469 6f6e 202d 6420 6f76 6572 7772 6f74  tion -d overwrot
-0005b500: 6520 6f70 7469 6f6e 202d 2d6c 6f67 2d6c  e option --log-l
-0005b510: 6576 656c 2e22 0a20 2020 2020 2020 2020  evel.".         
-0005b520: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0005b530: 2067 732e 7761 726e 5f63 6f75 6e74 202b   gs.warn_count +
-0005b540: 3d20 310a 0a20 2020 2053 4550 203d 2062  = 1..    SEP = b
-0005b550: 7974 6573 2867 732e 7061 2e73 6570 6172  ytes(gs.pa.separ
-0005b560: 6174 6f72 2c20 2275 7466 2d38 2229 2e64  ator, "utf-8").d
-0005b570: 6563 6f64 6528 2275 6e69 636f 6465 5f65  ecode("unicode_e
-0005b580: 7363 6170 6522 290a 2020 2020 6773 2e6c  scape").    gs.l
-0005b590: 6f67 2e64 6562 7567 280a 2020 2020 2020  og.debug(.      
-0005b5a0: 2020 6627 5365 7061 7261 746f 7220 6973    f'Separator is
-0005b5b0: 2073 6574 2074 6f20 227b 5345 507d 2220   set to "{SEP}" 
-0005b5c0: 6f66 2027 0a20 2020 2020 2020 2066 226c  of '.        f"l
-0005b5d0: 656e 6774 6820 7b6c 656e 2853 4550 297d  ength {len(SEP)}
-0005b5e0: 2e20 452e 672e 2043 6f6c 317b 5345 507d  . E.g. Col1{SEP}
-0005b5f0: 436f 6c32 2e22 0a20 2020 2029 0a20 2020  Col2.".    ).   
-0005b600: 2069 6e69 7469 616c 5f63 6865 636b 5f6f   initial_check_o
-0005b610: 665f 6172 6773 2829 0a20 2020 2063 6865  f_args().    che
-0005b620: 636b 5f64 6f77 6e6c 6f61 645f 6d65 6469  ck_download_medi
-0005b630: 615f 6469 7228 290a 2020 2020 7472 793a  a_dir().    try:
-0005b640: 0a20 2020 2020 2020 2063 6865 636b 5f61  .        check_a
-0005b650: 7267 5f66 696c 6573 5f72 6561 6461 626c  rg_files_readabl
-0005b660: 6528 290a 2020 2020 6578 6365 7074 2045  e().    except E
-0005b670: 7863 6570 7469 6f6e 2061 7320 653a 0a20  xception as e:. 
-0005b680: 2020 2020 2020 2067 732e 6c6f 672e 6572         gs.log.er
-0005b690: 726f 7228 6529 2020 2320 616c 7265 6164  ror(e)  # alread
-0005b6a0: 7920 6861 7320 4578 7878 3a20 756e 6971  y has Exxx: uniq
-0005b6b0: 7565 2065 7272 6f72 206e 756d 6265 720a  ue error number.
-0005b6c0: 2020 2020 2020 2020 7261 6973 6520 4d61          raise Ma
-0005b6d0: 7472 6978 436f 6d6d 616e 6465 7245 7272  trixCommanderErr
-0005b6e0: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-0005b6f0: 6622 7b50 524f 475f 5749 5448 4f55 545f  f"{PROG_WITHOUT_
-0005b700: 4558 547d 2066 6f72 6365 7320 616e 2065  EXT} forces an e
-0005b710: 6172 6c79 2061 626f 7274 2e20 220a 2020  arly abort. ".  
-0005b720: 2020 2020 2020 2020 2020 2254 6f20 6176            "To av
-0005b730: 6f69 6420 7061 7274 6961 6c20 6578 6563  oid partial exec
-0005b740: 7574 696f 6e2c 206e 6f20 6163 7469 6f6e  ution, no action
-0005b750: 2068 6173 2062 6565 6e20 7065 7266 6f72   has been perfor
-0005b760: 6d65 6420 6174 2061 6c6c 2e20 220a 2020  med at all. ".  
-0005b770: 2020 2020 2020 2020 2020 224e 6f74 6869            "Nothi
-0005b780: 6e67 2068 6173 2062 6565 6e20 7365 6e74  ng has been sent
-0005b790: 2e20 4669 7820 796f 7572 2061 7267 756d  . Fix your argum
-0005b7a0: 656e 7473 2061 6e64 2072 756e 2074 6865  ents and run the
-0005b7b0: 2063 6f6d 6d61 6e64 2022 0a20 2020 2020   command ".     
-0005b7c0: 2020 2020 2020 2022 6167 6169 6e2e 220a         "again.".
-0005b7d0: 2020 2020 2020 2020 2920 6672 6f6d 204e          ) from N
-0005b7e0: 6f6e 650a 0a20 2020 2069 6620 6773 2e70  one..    if gs.p
-0005b7f0: 612e 7665 7273 696f 6e3a 0a20 2020 2020  a.version:.     
-0005b800: 2020 2069 6620 6773 2e70 612e 7665 7273     if gs.pa.vers
-0005b810: 696f 6e2e 6c6f 7765 7228 2920 3d3d 2050  ion.lower() == P
-0005b820: 5249 4e54 3a0a 2020 2020 2020 2020 2020  RINT:.          
-0005b830: 2020 7665 7273 696f 6e28 2920 2023 2063    version()  # c
-0005b840: 6f6e 7469 6e75 6520 6578 6563 7574 696f  ontinue executio
-0005b850: 6e0a 2020 2020 2020 2020 656c 7365 3a0a  n.        else:.
-0005b860: 2020 2020 2020 2020 2020 2020 6368 6563              chec
-0005b870: 6b5f 7665 7273 696f 6e28 2920 2023 2063  k_version()  # c
-0005b880: 6f6e 7469 6e75 6520 6578 6563 7574 696f  ontinue executio
-0005b890: 6e0a 2020 2020 2020 2020 6966 206e 6f74  n.        if not
-0005b8a0: 2028 0a20 2020 2020 2020 2020 2020 2067   (.            g
-0005b8b0: 732e 7365 6e64 5f61 6374 696f 6e0a 2020  s.send_action.  
-0005b8c0: 2020 2020 2020 2020 2020 6f72 2067 732e            or gs.
-0005b8d0: 726f 6f6d 5f61 6374 696f 6e0a 2020 2020  room_action.    
-0005b8e0: 2020 2020 2020 2020 6f72 2067 732e 7061          or gs.pa
-0005b8f0: 2e6c 6973 7465 6e20 213d 204c 4953 5445  .listen != LISTE
-0005b900: 4e5f 4445 4641 554c 540a 2020 2020 2020  N_DEFAULT.      
-0005b910: 2020 2020 2020 6f72 2067 732e 7061 2e74        or gs.pa.t
-0005b920: 6169 6c20 213d 2054 4149 4c5f 554e 5553  ail != TAIL_UNUS
-0005b930: 4544 5f44 4546 4155 4c54 0a20 2020 2020  ED_DEFAULT.     
-0005b940: 2020 2020 2020 206f 7220 6773 2e70 612e         or gs.pa.
-0005b950: 7665 7269 6679 0a20 2020 2020 2020 2020  verify.         
-0005b960: 2020 206f 7220 6773 2e73 6574 6765 745f     or gs.setget_
-0005b970: 6163 7469 6f6e 0a20 2020 2020 2020 2029  action.        )
-0005b980: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
-0005b990: 2e6c 6f67 2e64 6562 7567 2822 4f6e 6c79  .log.debug("Only
-0005b9a0: 202d 2d76 6572 7369 6f6e 2e20 5072 696e   --version. Prin
-0005b9b0: 7420 616e 6420 7175 6974 2e22 290a 2020  t and quit.").  
-0005b9c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0005b9d0: 2020 2320 6a75 7374 2076 6572 7369 6f6e    # just version
-0005b9e0: 2c20 7175 6974 0a0a 2020 2020 6372 6561  , quit..    crea
-0005b9f0: 7465 5f70 6964 5f66 696c 6528 290a 0a20  te_pid_file().. 
-0005ba00: 2020 2067 732e 6c6f 672e 6465 6275 6728     gs.log.debug(
-0005ba10: 6627 5079 7468 6f6e 2076 6572 7369 6f6e  f'Python version
-0005ba20: 2069 7320 227b 7379 732e 7665 7273 696f   is "{sys.versio
-0005ba30: 6e7d 2227 290a 2020 2020 6773 2e6c 6f67  n}"').    gs.log
-0005ba40: 2e64 6562 7567 2866 2753 7464 696e 2070  .debug(f'Stdin p
-0005ba50: 6970 6520 6973 2061 7373 6967 6e65 6420  ipe is assigned 
-0005ba60: 746f 2022 7b67 732e 7374 6469 6e5f 7573  to "{gs.stdin_us
-0005ba70: 657d 222e 2729 0a20 2020 2069 6620 6773  e}".').    if gs
-0005ba80: 2e70 612e 7373 6c5f 6365 7274 6966 6963  .pa.ssl_certific
-0005ba90: 6174 6520 213d 2053 534c 5f43 4552 5449  ate != SSL_CERTI
-0005baa0: 4649 4341 5445 5f44 4546 4155 4c54 3a0a  FICATE_DEFAULT:.
-0005bab0: 2020 2020 2020 2020 6773 2e6c 6f67 2e64          gs.log.d
-0005bac0: 6562 7567 280a 2020 2020 2020 2020 2020  ebug(.          
-0005bad0: 2020 2253 534c 2077 696c 6c20 6265 2075    "SSL will be u
-0005bae0: 7365 642e 2041 2063 7573 746f 6d20 5353  sed. A custom SS
-0005baf0: 4c20 6365 7274 6966 6963 6174 6520 7761  L certificate wa
-0005bb00: 7320 7072 6f76 6964 6564 2e20 220a 2020  s provided. ".  
-0005bb10: 2020 2020 2020 2020 2020 6627 4375 7374            f'Cust
-0005bb20: 6f6d 2063 6572 7469 6669 6361 7465 2066  om certificate f
-0005bb30: 726f 6d20 6669 6c65 2022 7b67 732e 7061  rom file "{gs.pa
-0005bb40: 2e73 736c 5f63 6572 7469 6669 6361 7465  .ssl_certificate
-0005bb50: 7d22 2077 696c 6c20 270a 2020 2020 2020  }" will '.      
-0005bb60: 2020 2020 2020 2262 6520 7573 6564 2066        "be used f
-0005bb70: 6f72 2074 6869 7320 636f 6e6e 6563 7469  or this connecti
-0005bb80: 6f6e 2e22 0a20 2020 2020 2020 2029 0a20  on.".        ). 
-0005bb90: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-0005bba0: 2020 2020 2020 2020 2320 7479 7065 2053          # type S
-0005bbb0: 534c 436f 6e74 6578 740a 2020 2020 2020  SLContext.      
-0005bbc0: 2020 2020 2020 6773 2e73 736c 203d 2073        gs.ssl = s
-0005bbd0: 736c 2e63 7265 6174 655f 6465 6661 756c  sl.create_defaul
-0005bbe0: 745f 636f 6e74 6578 7428 6361 6669 6c65  t_context(cafile
-0005bbf0: 3d67 732e 7061 2e73 736c 5f63 6572 7469  =gs.pa.ssl_certi
-0005bc00: 6669 6361 7465 290a 2020 2020 2020 2020  ficate).        
-0005bc10: 6578 6365 7074 2046 696c 654e 6f74 466f  except FileNotFo
-0005bc20: 756e 6445 7272 6f72 3a0a 2020 2020 2020  undError:.      
-0005bc30: 2020 2020 2020 6773 2e65 7272 5f63 6f75        gs.err_cou
-0005bc40: 6e74 202b 3d20 310a 2020 2020 2020 2020  nt += 1.        
-0005bc50: 2020 2020 7261 6973 6520 4d61 7472 6978      raise Matrix
-0005bc60: 436f 6d6d 616e 6465 7245 7272 6f72 280a  CommanderError(.
-0005bc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005bc80: 2245 3234 333a 2022 0a20 2020 2020 2020  "E243: ".       
-0005bc90: 2020 2020 2020 2020 2066 2753 534c 2063           f'SSL c
-0005bca0: 6572 7469 6669 6361 7465 2066 696c 6520  ertificate file 
-0005bcb0: 227b 6773 2e70 612e 7373 6c5f 6365 7274  "{gs.pa.ssl_cert
-0005bcc0: 6966 6963 6174 657d 2220 7761 7320 270a  ificate}" was '.
-0005bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005bce0: 226e 6f74 2066 6f75 6e64 2e22 0a20 2020  "not found.".   
-0005bcf0: 2020 2020 2020 2020 2029 2066 726f 6d20           ) from 
-0005bd00: 4e6f 6e65 0a20 2020 2020 2020 2065 7863  None.        exc
-0005bd10: 6570 7420 5065 726d 6973 7369 6f6e 4572  ept PermissionEr
-0005bd20: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-0005bd30: 2067 732e 6572 725f 636f 756e 7420 2b3d   gs.err_count +=
-0005bd40: 2031 0a20 2020 2020 2020 2020 2020 2072   1.            r
-0005bd50: 6169 7365 204d 6174 7269 7843 6f6d 6d61  aise MatrixComma
-0005bd60: 6e64 6572 4572 726f 7228 0a20 2020 2020  nderError(.     
-0005bd70: 2020 2020 2020 2020 2020 2022 4532 3434             "E244
-0005bd80: 3a20 220a 2020 2020 2020 2020 2020 2020  : ".            
-0005bd90: 2020 2020 6627 5353 4c20 6365 7274 6966      f'SSL certif
-0005bda0: 6963 6174 6520 6669 6c65 2022 7b67 732e  icate file "{gs.
-0005bdb0: 7061 2e73 736c 5f63 6572 7469 6669 6361  pa.ssl_certifica
-0005bdc0: 7465 7d22 2064 6f65 7320 270a 2020 2020  te}" does '.    
-0005bdd0: 2020 2020 2020 2020 2020 2020 226e 6f74              "not
-0005bde0: 2068 6176 6520 7265 6164 2070 6572 6d69   have read permi
-0005bdf0: 7373 696f 6e73 2e22 0a20 2020 2020 2020  ssions.".       
-0005be00: 2020 2020 2029 2066 726f 6d20 4e6f 6e65       ) from None
-0005be10: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-0005be20: 7373 6c2e 5353 4c45 7272 6f72 3a0a 2020  ssl.SSLError:.  
-0005be30: 2020 2020 2020 2020 2020 6773 2e65 7272            gs.err
-0005be40: 5f63 6f75 6e74 202b 3d20 310a 2020 2020  _count += 1.    
-0005be50: 2020 2020 2020 2020 7261 6973 6520 4d61          raise Ma
-0005be60: 7472 6978 436f 6d6d 616e 6465 7245 7272  trixCommanderErr
-0005be70: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-0005be80: 2020 2020 2245 3234 353a 2022 0a20 2020      "E245: ".   
-0005be90: 2020 2020 2020 2020 2020 2020 2066 2753               f'S
-0005bea0: 534c 2063 6572 7469 6669 6361 7465 2066  SL certificate f
-0005beb0: 696c 6520 227b 6773 2e70 612e 7373 6c5f  ile "{gs.pa.ssl_
-0005bec0: 6365 7274 6966 6963 6174 657d 2220 6861  certificate}" ha
-0005bed0: 7320 270a 2020 2020 2020 2020 2020 2020  s '.            
-0005bee0: 2020 2020 2269 6e76 616c 6964 2063 6f6e      "invalid con
-0005bef0: 7465 6e74 2e20 446f 6573 206e 6f74 2073  tent. Does not s
-0005bf00: 6565 6d20 746f 2062 6520 6120 6365 7274  eem to be a cert
-0005bf10: 6966 6963 6174 652e 220a 2020 2020 2020  ificate.".      
-0005bf20: 2020 2020 2020 2920 6672 6f6d 204e 6f6e        ) from Non
-0005bf30: 650a 2020 2020 656c 6966 2067 732e 7061  e.    elif gs.pa
-0005bf40: 2e6e 6f5f 7373 6c3a 0a20 2020 2020 2020  .no_ssl:.       
-0005bf50: 2067 732e 6c6f 672e 6465 6275 6728 0a20   gs.log.debug(. 
-0005bf60: 2020 2020 2020 2020 2020 2022 5353 4c20             "SSL 
-0005bf70: 7769 6c6c 2062 6520 6e6f 7420 6265 2075  will be not be u
-0005bf80: 7365 642e 2054 6865 2053 534c 2063 6572  sed. The SSL cer
-0005bf90: 7469 6669 6361 7465 2076 616c 6964 6174  tificate validat
-0005bfa0: 696f 6e20 220a 2020 2020 2020 2020 2020  ion ".          
-0005bfb0: 2020 2277 696c 6c20 6265 2073 6b69 7070    "will be skipp
-0005bfc0: 6564 2066 6f72 2074 6869 7320 636f 6e6e  ed for this conn
-0005bfd0: 6563 7469 6f6e 2e22 0a20 2020 2020 2020  ection.".       
-0005bfe0: 2029 0a20 2020 2020 2020 2067 732e 7373   ).        gs.ss
-0005bff0: 6c20 3d20 4661 6c73 650a 2020 2020 656c  l = False.    el
-0005c000: 7365 3a0a 2020 2020 2020 2020 6773 2e6c  se:.        gs.l
-0005c010: 6f67 2e64 6562 7567 280a 2020 2020 2020  og.debug(.      
-0005c020: 2020 2020 2020 2253 534c 2077 696c 6c20        "SSL will 
-0005c030: 6265 2075 7365 642e 2044 6566 6175 6c74  be used. Default
-0005c040: 2053 534c 2063 6572 7469 6669 6361 7465   SSL certificate
-0005c050: 2076 616c 6964 6174 696f 6e20 220a 2020   validation ".  
-0005c060: 2020 2020 2020 2020 2020 2277 696c 6c20            "will 
-0005c070: 6265 2064 6f6e 6520 666f 7220 7468 6973  be done for this
-0005c080: 2063 6f6e 6e65 6374 696f 6e2e 220a 2020   connection.".  
-0005c090: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0005c0a0: 6773 2e73 736c 203d 204e 6f6e 650a 0a20  gs.ssl = None.. 
-0005c0b0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0005c0c0: 6173 796e 6369 6f2e 7275 6e28 6173 796e  asyncio.run(asyn
-0005c0d0: 635f 6d61 696e 2829 2920 2023 2064 6f20  c_main())  # do 
-0005c0e0: 6576 6572 7974 6869 6e67 2069 6e20 7468  everything in th
-0005c0f0: 6520 6576 656e 7420 6c6f 6f70 0a20 2020  e event loop.   
-0005c100: 2020 2020 2023 2074 6865 206e 6578 7420       # the next 
-0005c110: 6361 6e20 6265 2072 6561 6368 6564 206f  can be reached o
-0005c120: 6e20 7375 6363 6573 7320 6f72 2066 6169  n success or fai
-0005c130: 6c75 7265 0a20 2020 2020 2020 2067 732e  lure.        gs.
-0005c140: 6c6f 672e 6465 6275 6728 6622 5468 6520  log.debug(f"The 
-0005c150: 7072 6f67 7261 6d20 7b50 524f 475f 5749  program {PROG_WI
-0005c160: 5448 5f45 5854 7d20 6c65 6674 2074 6865  TH_EXT} left the
-0005c170: 2065 7665 6e74 206c 6f6f 702e 2229 0a20   event loop."). 
-0005c180: 2020 2065 7863 6570 7420 5469 6d65 6f75     except Timeou
-0005c190: 7445 7272 6f72 2061 7320 653a 0a20 2020  tError as e:.   
-0005c1a0: 2020 2020 2067 732e 6572 725f 636f 756e       gs.err_coun
-0005c1b0: 7420 2b3d 2031 0a20 2020 2020 2020 2072  t += 1.        r
-0005c1c0: 6169 7365 204d 6174 7269 7843 6f6d 6d61  aise MatrixComma
-0005c1d0: 6e64 6572 4572 726f 7228 0a20 2020 2020  nderError(.     
-0005c1e0: 2020 2020 2020 2022 4532 3437 3a20 220a         "E247: ".
-0005c1f0: 2020 2020 2020 2020 2020 2020 6622 5468              f"Th
-0005c200: 6520 7072 6f67 7261 6d20 7b50 524f 475f  e program {PROG_
-0005c210: 5749 5448 5f45 5854 7d20 7261 6e20 696e  WITH_EXT} ran in
-0005c220: 746f 2061 2074 696d 656f 7574 2e20 220a  to a timeout. ".
-0005c230: 2020 2020 2020 2020 2020 2020 224d 6f73              "Mos
-0005c240: 7420 6c69 6b65 6c79 2063 6f6e 6e65 6374  t likely connect
-0005c250: 6976 6974 7920 746f 2069 6e74 6572 6e65  ivity to interne
-0005c260: 7420 7761 7320 6c6f 7374 2e20 220a 2020  t was lost. ".  
-0005c270: 2020 2020 2020 2020 2020 2249 6620 7468            "If th
-0005c280: 6973 2068 6170 7065 6e73 2066 7265 7175  is happens frequ
-0005c290: 656e 746c 7920 636f 6e73 6964 6572 2072  ently consider r
-0005c2a0: 756e 6e69 6e67 2074 6869 7320 220a 2020  unning this ".  
-0005c2b0: 2020 2020 2020 2020 2020 2270 726f 6772            "progr
-0005c2c0: 616d 2061 7320 6120 7365 7276 6963 6520  am as a service 
-0005c2d0: 736f 2069 7420 7769 6c6c 2072 6573 7461  so it will resta
-0005c2e0: 7274 2061 7574 6f6d 6174 6963 616c 6c79  rt automatically
-0005c2f0: 2e20 536f 7272 792e 220a 2020 2020 2020  . Sorry.".      
-0005c300: 2020 2920 6672 6f6d 2065 0a20 2020 2065    ) from e.    e
-0005c310: 7863 6570 7420 4d61 7472 6978 436f 6d6d  xcept MatrixComm
-0005c320: 616e 6465 7245 7272 6f72 3a0a 2020 2020  anderError:.    
-0005c330: 2020 2020 7261 6973 650a 2020 2020 6578      raise.    ex
-0005c340: 6365 7074 204b 6579 626f 6172 6449 6e74  cept KeyboardInt
-0005c350: 6572 7275 7074 3a0a 2020 2020 2020 2020  errupt:.        
-0005c360: 6773 2e6c 6f67 2e64 6562 7567 2822 4b65  gs.log.debug("Ke
-0005c370: 7962 6f61 7264 2069 6e74 6572 7275 7074  yboard interrupt
-0005c380: 2072 6563 6569 7665 642e 2229 0a20 2020   received.").   
-0005c390: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0005c3a0: 6e3a 0a20 2020 2020 2020 2067 732e 6572  n:.        gs.er
-0005c3b0: 725f 636f 756e 7420 2b3d 2031 0a20 2020  r_count += 1.   
-0005c3c0: 2020 2020 2067 732e 6c6f 672e 6572 726f       gs.log.erro
-0005c3d0: 7228 2245 3234 383a 2022 2066 2254 6865  r("E248: " f"The
-0005c3e0: 2070 726f 6772 616d 207b 5052 4f47 5f57   program {PROG_W
-0005c3f0: 4954 485f 4558 547d 2066 6169 6c65 642e  ITH_EXT} failed.
-0005c400: 2053 6f72 7279 2e22 290a 2020 2020 2020   Sorry.").      
-0005c410: 2020 7261 6973 650a 2020 2020 6669 6e61    raise.    fina
-0005c420: 6c6c 793a 0a20 2020 2020 2020 2063 6c65  lly:.        cle
-0005c430: 616e 7570 2829 0a0a 0a64 6566 206d 6169  anup()...def mai
-0005c440: 6e28 6172 6776 3a20 556e 696f 6e5b 4e6f  n(argv: Union[No
-0005c450: 6e65 2c20 6c69 7374 5d20 3d20 4e6f 6e65  ne, list] = None
-0005c460: 2920 2d3e 2069 6e74 3a0a 2020 2020 2222  ) -> int:.    ""
-0005c470: 2252 756e 2074 6865 2070 726f 6772 616d  "Run the program
-0005c480: 2e0a 0a20 2020 206d 6169 6e28 2920 6973  ...    main() is
-0005c490: 2061 6e20 656e 7472 7920 706f 696e 7420   an entry point 
-0005c4a0: 616c 6c6f 7769 6e67 206f 7468 6572 2050  allowing other P
-0005c4b0: 7974 686f 6e20 7072 6f67 7261 6d73 2074  ython programs t
-0005c4c0: 6f0a 2020 2020 6561 7369 6c79 2063 616c  o.    easily cal
-0005c4d0: 6c20 6d61 7472 6978 2d63 6f6d 6d61 6e64  l matrix-command
-0005c4e0: 6572 2e0a 0a20 2020 2041 7267 756d 656e  er...    Argumen
-0005c4f0: 7473 3a0a 2020 2020 2d2d 2d2d 2d2d 2d2d  ts:.    --------
-0005c500: 2d0a 2020 2020 6172 6776 203a 206c 6973  -.    argv : lis
-0005c510: 7420 6f66 2061 7267 756d 656e 7473 2061  t of arguments a
-0005c520: 7320 696e 2073 7973 2e61 7267 763b 2066  s in sys.argv; f
-0005c530: 6972 7374 2065 6c65 6d65 6e74 2069 7320  irst element is 
-0005c540: 7468 650a 2020 2020 2020 2020 7072 6f67  the.        prog
-0005c550: 7261 6d20 6e61 6d65 2c20 6675 7274 6865  ram name, furthe
-0005c560: 7220 656c 656d 656e 7473 2061 7265 2074  r elements are t
-0005c570: 6865 2061 7267 756d 656e 7473 3b20 6576  he arguments; ev
-0005c580: 6572 790a 2020 2020 2020 2020 656c 656d  ery.        elem
-0005c590: 656e 7420 6d75 7374 2062 6520 6f66 2074  ent must be of t
-0005c5a0: 7970 6520 2273 7472 222e 0a20 2020 2020  ype "str"..     
-0005c5b0: 2020 2061 7267 7620 6973 206f 7074 696f     argv is optio
-0005c5c0: 6e61 6c20 616e 6420 6361 6e20 6265 204e  nal and can be N
-0005c5d0: 6f6e 652e 0a20 2020 2020 2020 2049 6620  one..        If 
-0005c5e0: 6172 6776 2069 7320 7365 7420 7468 656e  argv is set then
-0005c5f0: 2074 6865 7365 2061 7267 756d 656e 7473   these arguments
-0005c600: 2077 696c 6c20 6265 2075 7365 6420 6173   will be used as
-0005c610: 2061 7267 756d 656e 7473 2066 6f72 0a20   arguments for. 
-0005c620: 2020 2020 2020 206d 6174 7269 782d 636f         matrix-co
-0005c630: 6d6d 616e 6465 722e 2049 6620 6172 6776  mmander. If argv
-0005c640: 2069 7320 6e6f 7420 7365 7420 284e 6f6e   is not set (Non
-0005c650: 6520 6f72 2065 6d70 7479 206c 6973 7429  e or empty list)
-0005c660: 2c20 7468 656e 0a20 2020 2020 2020 2073  , then.        s
-0005c670: 7973 2e61 7267 7620 7769 6c6c 2062 6520  ys.argv will be 
-0005c680: 7573 6564 2061 7320 6172 6775 6d65 6e74  used as argument
-0005c690: 7320 666f 7220 6d61 7472 6978 2d63 6f6d  s for matrix-com
-0005c6a0: 6d61 6e64 6572 2e0a 0a20 2020 2045 7861  mander...    Exa
-0005c6b0: 6d70 6c65 2069 6e70 7574 2061 7267 763a  mple input argv:
-0005c6c0: 205b 226d 6174 7269 782d 636f 6d6d 616e   ["matrix-comman
-0005c6d0: 6465 7222 5d0a 2020 2020 2020 2020 5b22  der"].        ["
-0005c6e0: 6d61 7472 6978 2d63 6f6d 6d61 6e64 6572  matrix-commander
-0005c6f0: 2220 222d 2d76 6572 7369 6f6e 225d 0a20  " "--version"]. 
-0005c700: 2020 2020 2020 205b 226d 6174 7269 782d         ["matrix-
-0005c710: 636f 6d6d 616e 6465 7222 2022 2d2d 6d65  commander" "--me
-0005c720: 7373 6167 6522 2022 4865 6c6c 6f22 202d  ssage" "Hello" -
-0005c730: 2d69 6d61 6765 2022 7069 632e 6a70 6722  -image "pic.jpg"
-0005c740: 5d0a 0a20 2020 2052 6574 7572 6e73 2069  ]..    Returns i
-0005c750: 6e74 2e20 3020 666f 7220 7375 6363 6573  nt. 0 for succes
-0005c760: 732e 2050 6f73 6974 6976 6520 696e 7465  s. Positive inte
-0005c770: 6765 7220 666f 7220 6661 696c 7572 652e  ger for failure.
-0005c780: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-0005c790: 2074 6865 2074 6f74 616c 206e 756d 6265   the total numbe
-0005c7a0: 7220 6f66 2065 7272 6f72 7320 656e 636f  r of errors enco
-0005c7b0: 756e 7465 7265 642e 0a0a 2020 2020 5472  untered...    Tr
-0005c7c0: 6965 7320 746f 2061 766f 6964 2072 6169  ies to avoid rai
-0005c7d0: 7369 6e67 2065 7863 6570 7469 6f6e 732e  sing exceptions.
-0005c7e0: 0a0a 2020 2020 2222 220a 2020 2020 7472  ..    """.    tr
-0005c7f0: 793a 0a20 2020 2020 2020 206d 6169 6e5f  y:.        main_
-0005c800: 696e 6e65 7228 6172 6776 290a 2020 2020  inner(argv).    
-0005c810: 6578 6365 7074 2028 4578 6365 7074 696f  except (Exceptio
-0005c820: 6e2c 204d 6174 7269 7843 6f6d 6d61 6e64  n, MatrixCommand
-0005c830: 6572 4572 726f 722c 204d 6174 7269 7843  erError, MatrixC
-0005c840: 6f6d 6d61 6e64 6572 5761 726e 696e 6729  ommanderWarning)
-0005c850: 2061 7320 653a 0a20 2020 2020 2020 2069   as e:.        i
-0005c860: 6620 6520 6e6f 7420 696e 2028 4d61 7472  f e not in (Matr
-0005c870: 6978 436f 6d6d 616e 6465 7245 7272 6f72  ixCommanderError
-0005c880: 2c20 4d61 7472 6978 436f 6d6d 616e 6465  , MatrixCommande
-0005c890: 7257 6172 6e69 6e67 293a 0a20 2020 2020  rWarning):.     
-0005c8a0: 2020 2020 2020 2067 732e 6572 725f 636f         gs.err_co
-0005c8b0: 756e 7420 2b3d 2031 0a20 2020 2020 2020  unt += 1.       
-0005c8c0: 2074 6220 3d20 2222 0a20 2020 2020 2020   tb = "".       
-0005c8d0: 2069 6620 6773 2e70 612e 6465 6275 6720   if gs.pa.debug 
-0005c8e0: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
-0005c8f0: 2074 6220 3d20 6622 5c6e 4865 7265 2069   tb = f"\nHere i
-0005c900: 7320 7468 6520 7472 6163 6562 6163 6b2e  s the traceback.
-0005c910: 5c6e 7b74 7261 6365 6261 636b 2e66 6f72  \n{traceback.for
-0005c920: 6d61 745f 6578 6328 297d 220a 2020 2020  mat_exc()}".    
-0005c930: 2020 2020 6966 2065 203d 3d20 4d61 7472      if e == Matr
-0005c940: 6978 436f 6d6d 616e 6465 7257 6172 6e69  ixCommanderWarni
-0005c950: 6e67 3a0a 2020 2020 2020 2020 2020 2020  ng:.            
-0005c960: 6773 2e6c 6f67 2e77 6172 6e69 6e67 2866  gs.log.warning(f
-0005c970: 227b 657d 7b74 627d 2229 0a20 2020 2020  "{e}{tb}").     
-0005c980: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0005c990: 2020 2020 2067 732e 6c6f 672e 6572 726f       gs.log.erro
-0005c9a0: 7228 6622 7b65 7d7b 7462 7d22 290a 2020  r(f"{e}{tb}").  
-0005c9b0: 2020 6966 2067 732e 6572 725f 636f 756e    if gs.err_coun
-0005c9c0: 7420 3e20 3020 6f72 2067 732e 7761 726e  t > 0 or gs.warn
-0005c9d0: 5f63 6f75 6e74 203e 2030 3a0a 2020 2020  _count > 0:.    
-0005c9e0: 2020 2020 6773 2e6c 6f67 2e69 6e66 6f28      gs.log.info(
-0005c9f0: 0a20 2020 2020 2020 2020 2020 2066 227b  .            f"{
-0005ca00: 6773 2e65 7272 5f63 6f75 6e74 7d20 220a  gs.err_count} ".
-0005ca10: 2020 2020 2020 2020 2020 2020 6622 6572              f"er
-0005ca20: 726f 727b 2727 2069 6620 6773 2e65 7272  ror{'' if gs.err
-0005ca30: 5f63 6f75 6e74 203d 3d20 3120 656c 7365  _count == 1 else
-0005ca40: 2027 7327 7d20 616e 6420 220a 2020 2020   's'} and ".    
-0005ca50: 2020 2020 2020 2020 6622 7b67 732e 7761          f"{gs.wa
-0005ca60: 726e 5f63 6f75 6e74 7d20 220a 2020 2020  rn_count} ".    
-0005ca70: 2020 2020 2020 2020 6622 7761 726e 696e          f"warnin
-0005ca80: 677b 2727 2069 6620 6773 2e77 6172 6e5f  g{'' if gs.warn_
-0005ca90: 636f 756e 7420 3d3d 2031 2065 6c73 6520  count == 1 else 
-0005caa0: 2773 277d 206f 6363 7572 7265 642e 220a  's'} occurred.".
-0005cab0: 2020 2020 2020 2020 290a 2020 2020 7265          ).    re
-0005cac0: 7475 726e 2067 732e 6572 725f 636f 756e  turn gs.err_coun
-0005cad0: 7420 2023 2030 2066 6f72 2073 7563 6365  t  # 0 for succe
-0005cae0: 7373 0a0a 0a69 6620 5f5f 6e61 6d65 5f5f  ss...if __name__
-0005caf0: 203d 3d20 225f 5f6d 6169 6e5f 5f22 3a0a   == "__main__":.
-0005cb00: 2020 2020 7379 732e 6578 6974 286d 6169      sys.exit(mai
-0005cb10: 6e28 2929 0a23 2045 4f46 0a              n()).# EOF.
+0005b300: 2020 2020 6622 6c6f 675f 6c65 7665 6c3d      f"log_level=
+0005b310: 7b67 732e 7061 2e6c 6f67 5f6c 6576 656c  {gs.pa.log_level
+0005b320: 5b31 5d7d 220a 2020 2020 2020 2020 2020  [1]}".          
+0005b330: 2020 2020 2020 290a 2020 2020 6966 2067        ).    if g
+0005b340: 732e 7061 2e64 6562 7567 203e 2030 3a0a  s.pa.debug > 0:.
+0005b350: 2020 2020 2020 2020 6966 2067 732e 7061          if gs.pa
+0005b360: 2e64 6562 7567 203e 2031 3a0a 2020 2020  .debug > 1:.    
+0005b370: 2020 2020 2020 2020 2320 7475 726e 206f          # turn o
+0005b380: 6e20 6465 6275 6720 6c6f 6767 696e 6720  n debug logging 
+0005b390: 666f 7220 4556 4552 5954 4849 4e47 0a20  for EVERYTHING. 
+0005b3a0: 2020 2020 2020 2020 2020 206c 6f67 6769             loggi
+0005b3b0: 6e67 2e67 6574 4c6f 6767 6572 2829 2e73  ng.getLogger().s
+0005b3c0: 6574 4c65 7665 6c28 6c6f 6767 696e 672e  etLevel(logging.
+0005b3d0: 4445 4255 4729 0a20 2020 2020 2020 2023  DEBUG).        #
+0005b3e0: 2074 7572 6e20 6f6e 2064 6562 7567 206c   turn on debug l
+0005b3f0: 6f67 6769 6e67 2066 6f72 206d 6174 7269  ogging for matri
+0005b400: 782d 636f 6d6d 616e 6465 720a 2020 2020  x-commander.    
+0005b410: 2020 2020 6773 2e6c 6f67 2e73 6574 4c65      gs.log.setLe
+0005b420: 7665 6c28 6c6f 6767 696e 672e 4445 4255  vel(logging.DEBU
+0005b430: 4729 0a20 2020 2020 2020 2067 732e 6c6f  G).        gs.lo
+0005b440: 672e 6465 6275 6728 6622 4465 6275 6720  g.debug(f"Debug 
+0005b450: 6973 2074 7572 6e65 6420 6f6e 2e20 6465  is turned on. de
+0005b460: 6275 6720 636f 756e 743d 7b67 732e 7061  bug count={gs.pa
+0005b470: 2e64 6562 7567 7d22 290a 2020 2020 2020  .debug}").      
+0005b480: 2020 6966 2067 732e 7061 2e6c 6f67 5f6c    if gs.pa.log_l
+0005b490: 6576 656c 2061 6e64 206c 656e 2867 732e  evel and len(gs.
+0005b4a0: 7061 2e6c 6f67 5f6c 6576 656c 2920 3e20  pa.log_level) > 
+0005b4b0: 303a 0a20 2020 2020 2020 2020 2020 2067  0:.            g
+0005b4c0: 732e 6c6f 672e 7761 726e 696e 6728 0a20  s.log.warning(. 
+0005b4d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005b4e0: 5731 3131 3a20 2220 2244 6562 7567 206f  W111: " "Debug o
+0005b4f0: 7074 696f 6e20 2d64 206f 7665 7277 726f  ption -d overwro
+0005b500: 7465 206f 7074 696f 6e20 2d2d 6c6f 672d  te option --log-
+0005b510: 6c65 7665 6c2e 220a 2020 2020 2020 2020  level.".        
+0005b520: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0005b530: 2020 6773 2e77 6172 6e5f 636f 756e 7420    gs.warn_count 
+0005b540: 2b3d 2031 0a0a 2020 2020 5345 5020 3d20  += 1..    SEP = 
+0005b550: 6279 7465 7328 6773 2e70 612e 7365 7061  bytes(gs.pa.sepa
+0005b560: 7261 746f 722c 2022 7574 662d 3822 292e  rator, "utf-8").
+0005b570: 6465 636f 6465 2822 756e 6963 6f64 655f  decode("unicode_
+0005b580: 6573 6361 7065 2229 0a20 2020 2067 732e  escape").    gs.
+0005b590: 6c6f 672e 6465 6275 6728 0a20 2020 2020  log.debug(.     
+0005b5a0: 2020 2066 2753 6570 6172 6174 6f72 2069     f'Separator i
+0005b5b0: 7320 7365 7420 746f 2022 7b53 4550 7d22  s set to "{SEP}"
+0005b5c0: 206f 6620 270a 2020 2020 2020 2020 6622   of '.        f"
+0005b5d0: 6c65 6e67 7468 207b 6c65 6e28 5345 5029  length {len(SEP)
+0005b5e0: 7d2e 2045 2e67 2e20 436f 6c31 7b53 4550  }. E.g. Col1{SEP
+0005b5f0: 7d43 6f6c 322e 220a 2020 2020 290a 2020  }Col2.".    ).  
+0005b600: 2020 696e 6974 6961 6c5f 6368 6563 6b5f    initial_check_
+0005b610: 6f66 5f61 7267 7328 290a 2020 2020 6368  of_args().    ch
+0005b620: 6563 6b5f 646f 776e 6c6f 6164 5f6d 6564  eck_download_med
+0005b630: 6961 5f64 6972 2829 0a20 2020 2074 7279  ia_dir().    try
+0005b640: 3a0a 2020 2020 2020 2020 6368 6563 6b5f  :.        check_
+0005b650: 6172 675f 6669 6c65 735f 7265 6164 6162  arg_files_readab
+0005b660: 6c65 2829 0a20 2020 2065 7863 6570 7420  le().    except 
+0005b670: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
+0005b680: 2020 2020 2020 2020 6773 2e6c 6f67 2e65          gs.log.e
+0005b690: 7272 6f72 2865 2920 2023 2061 6c72 6561  rror(e)  # alrea
+0005b6a0: 6479 2068 6173 2045 7878 783a 2075 6e69  dy has Exxx: uni
+0005b6b0: 7175 6520 6572 726f 7220 6e75 6d62 6572  que error number
+0005b6c0: 0a20 2020 2020 2020 2072 6169 7365 204d  .        raise M
+0005b6d0: 6174 7269 7843 6f6d 6d61 6e64 6572 4572  atrixCommanderEr
+0005b6e0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+0005b6f0: 2066 227b 5052 4f47 5f57 4954 484f 5554   f"{PROG_WITHOUT
+0005b700: 5f45 5854 7d20 666f 7263 6573 2061 6e20  _EXT} forces an 
+0005b710: 6561 726c 7920 6162 6f72 742e 2022 0a20  early abort. ". 
+0005b720: 2020 2020 2020 2020 2020 2022 546f 2061             "To a
+0005b730: 766f 6964 2070 6172 7469 616c 2065 7865  void partial exe
+0005b740: 6375 7469 6f6e 2c20 6e6f 2061 6374 696f  cution, no actio
+0005b750: 6e20 6861 7320 6265 656e 2070 6572 666f  n has been perfo
+0005b760: 726d 6564 2061 7420 616c 6c2e 2022 0a20  rmed at all. ". 
+0005b770: 2020 2020 2020 2020 2020 2022 4e6f 7468             "Noth
+0005b780: 696e 6720 6861 7320 6265 656e 2073 656e  ing has been sen
+0005b790: 742e 2046 6978 2079 6f75 7220 6172 6775  t. Fix your argu
+0005b7a0: 6d65 6e74 7320 616e 6420 7275 6e20 7468  ments and run th
+0005b7b0: 6520 636f 6d6d 616e 6420 220a 2020 2020  e command ".    
+0005b7c0: 2020 2020 2020 2020 2261 6761 696e 2e22          "again."
+0005b7d0: 0a20 2020 2020 2020 2029 2066 726f 6d20  .        ) from 
+0005b7e0: 4e6f 6e65 0a0a 2020 2020 6966 2067 732e  None..    if gs.
+0005b7f0: 7061 2e76 6572 7369 6f6e 3a0a 2020 2020  pa.version:.    
+0005b800: 2020 2020 6966 2067 732e 7061 2e76 6572      if gs.pa.ver
+0005b810: 7369 6f6e 2e6c 6f77 6572 2829 203d 3d20  sion.lower() == 
+0005b820: 5052 494e 543a 0a20 2020 2020 2020 2020  PRINT:.         
+0005b830: 2020 2076 6572 7369 6f6e 2829 2020 2320     version()  # 
+0005b840: 636f 6e74 696e 7565 2065 7865 6375 7469  continue executi
+0005b850: 6f6e 0a20 2020 2020 2020 2065 6c73 653a  on.        else:
+0005b860: 0a20 2020 2020 2020 2020 2020 2063 6865  .            che
+0005b870: 636b 5f76 6572 7369 6f6e 2829 2020 2320  ck_version()  # 
+0005b880: 636f 6e74 696e 7565 2065 7865 6375 7469  continue executi
+0005b890: 6f6e 0a20 2020 2020 2020 2069 6620 6e6f  on.        if no
+0005b8a0: 7420 280a 2020 2020 2020 2020 2020 2020  t (.            
+0005b8b0: 6773 2e73 656e 645f 6163 7469 6f6e 0a20  gs.send_action. 
+0005b8c0: 2020 2020 2020 2020 2020 206f 7220 6773             or gs
+0005b8d0: 2e72 6f6f 6d5f 6163 7469 6f6e 0a20 2020  .room_action.   
+0005b8e0: 2020 2020 2020 2020 206f 7220 6773 2e70           or gs.p
+0005b8f0: 612e 6c69 7374 656e 2021 3d20 4c49 5354  a.listen != LIST
+0005b900: 454e 5f44 4546 4155 4c54 0a20 2020 2020  EN_DEFAULT.     
+0005b910: 2020 2020 2020 206f 7220 6773 2e70 612e         or gs.pa.
+0005b920: 7461 696c 2021 3d20 5441 494c 5f55 4e55  tail != TAIL_UNU
+0005b930: 5345 445f 4445 4641 554c 540a 2020 2020  SED_DEFAULT.    
+0005b940: 2020 2020 2020 2020 6f72 2067 732e 7061          or gs.pa
+0005b950: 2e76 6572 6966 790a 2020 2020 2020 2020  .verify.        
+0005b960: 2020 2020 6f72 2067 732e 7365 7467 6574      or gs.setget
+0005b970: 5f61 6374 696f 6e0a 2020 2020 2020 2020  _action.        
+0005b980: 293a 0a20 2020 2020 2020 2020 2020 2067  ):.            g
+0005b990: 732e 6c6f 672e 6465 6275 6728 224f 6e6c  s.log.debug("Onl
+0005b9a0: 7920 2d2d 7665 7273 696f 6e2e 2050 7269  y --version. Pri
+0005b9b0: 6e74 2061 6e64 2071 7569 742e 2229 0a20  nt and quit."). 
+0005b9c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0005b9d0: 6e20 2023 206a 7573 7420 7665 7273 696f  n  # just versio
+0005b9e0: 6e2c 2071 7569 740a 0a20 2020 2063 7265  n, quit..    cre
+0005b9f0: 6174 655f 7069 645f 6669 6c65 2829 0a0a  ate_pid_file()..
+0005ba00: 2020 2020 6773 2e6c 6f67 2e64 6562 7567      gs.log.debug
+0005ba10: 2866 2750 7974 686f 6e20 7665 7273 696f  (f'Python versio
+0005ba20: 6e20 6973 2022 7b73 7973 2e76 6572 7369  n is "{sys.versi
+0005ba30: 6f6e 7d22 2729 0a20 2020 2067 732e 6c6f  on}"').    gs.lo
+0005ba40: 672e 6465 6275 6728 6627 5374 6469 6e20  g.debug(f'Stdin 
+0005ba50: 7069 7065 2069 7320 6173 7369 676e 6564  pipe is assigned
+0005ba60: 2074 6f20 227b 6773 2e73 7464 696e 5f75   to "{gs.stdin_u
+0005ba70: 7365 7d22 2e27 290a 2020 2020 6966 2067  se}".').    if g
+0005ba80: 732e 7061 2e73 736c 5f63 6572 7469 6669  s.pa.ssl_certifi
+0005ba90: 6361 7465 2021 3d20 5353 4c5f 4345 5254  cate != SSL_CERT
+0005baa0: 4946 4943 4154 455f 4445 4641 554c 543a  IFICATE_DEFAULT:
+0005bab0: 0a20 2020 2020 2020 2067 732e 6c6f 672e  .        gs.log.
+0005bac0: 6465 6275 6728 0a20 2020 2020 2020 2020  debug(.         
+0005bad0: 2020 2022 5353 4c20 7769 6c6c 2062 6520     "SSL will be 
+0005bae0: 7573 6564 2e20 4120 6375 7374 6f6d 2053  used. A custom S
+0005baf0: 534c 2063 6572 7469 6669 6361 7465 2077  SL certificate w
+0005bb00: 6173 2070 726f 7669 6465 642e 2022 0a20  as provided. ". 
+0005bb10: 2020 2020 2020 2020 2020 2066 2743 7573             f'Cus
+0005bb20: 746f 6d20 6365 7274 6966 6963 6174 6520  tom certificate 
+0005bb30: 6672 6f6d 2066 696c 6520 227b 6773 2e70  from file "{gs.p
+0005bb40: 612e 7373 6c5f 6365 7274 6966 6963 6174  a.ssl_certificat
+0005bb50: 657d 2220 7769 6c6c 2027 0a20 2020 2020  e}" will '.     
+0005bb60: 2020 2020 2020 2022 6265 2075 7365 6420         "be used 
+0005bb70: 666f 7220 7468 6973 2063 6f6e 6e65 6374  for this connect
+0005bb80: 696f 6e2e 220a 2020 2020 2020 2020 290a  ion.".        ).
+0005bb90: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+0005bba0: 2020 2020 2020 2020 2023 2074 7970 6520           # type 
+0005bbb0: 5353 4c43 6f6e 7465 7874 0a20 2020 2020  SSLContext.     
+0005bbc0: 2020 2020 2020 2067 732e 7373 6c20 3d20         gs.ssl = 
+0005bbd0: 7373 6c2e 6372 6561 7465 5f64 6566 6175  ssl.create_defau
+0005bbe0: 6c74 5f63 6f6e 7465 7874 2863 6166 696c  lt_context(cafil
+0005bbf0: 653d 6773 2e70 612e 7373 6c5f 6365 7274  e=gs.pa.ssl_cert
+0005bc00: 6966 6963 6174 6529 0a20 2020 2020 2020  ificate).       
+0005bc10: 2065 7863 6570 7420 4669 6c65 4e6f 7446   except FileNotF
+0005bc20: 6f75 6e64 4572 726f 723a 0a20 2020 2020  oundError:.     
+0005bc30: 2020 2020 2020 2067 732e 6572 725f 636f         gs.err_co
+0005bc40: 756e 7420 2b3d 2031 0a20 2020 2020 2020  unt += 1.       
+0005bc50: 2020 2020 2072 6169 7365 204d 6174 7269       raise Matri
+0005bc60: 7843 6f6d 6d61 6e64 6572 4572 726f 7228  xCommanderError(
+0005bc70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005bc80: 2022 4532 3433 3a20 220a 2020 2020 2020   "E243: ".      
+0005bc90: 2020 2020 2020 2020 2020 6627 5353 4c20            f'SSL 
+0005bca0: 6365 7274 6966 6963 6174 6520 6669 6c65  certificate file
+0005bcb0: 2022 7b67 732e 7061 2e73 736c 5f63 6572   "{gs.pa.ssl_cer
+0005bcc0: 7469 6669 6361 7465 7d22 2077 6173 2027  tificate}" was '
+0005bcd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005bce0: 2022 6e6f 7420 666f 756e 642e 220a 2020   "not found.".  
+0005bcf0: 2020 2020 2020 2020 2020 2920 6672 6f6d            ) from
+0005bd00: 204e 6f6e 650a 2020 2020 2020 2020 6578   None.        ex
+0005bd10: 6365 7074 2050 6572 6d69 7373 696f 6e45  cept PermissionE
+0005bd20: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+0005bd30: 2020 6773 2e65 7272 5f63 6f75 6e74 202b    gs.err_count +
+0005bd40: 3d20 310a 2020 2020 2020 2020 2020 2020  = 1.            
+0005bd50: 7261 6973 6520 4d61 7472 6978 436f 6d6d  raise MatrixComm
+0005bd60: 616e 6465 7245 7272 6f72 280a 2020 2020  anderError(.    
+0005bd70: 2020 2020 2020 2020 2020 2020 2245 3234              "E24
+0005bd80: 343a 2022 0a20 2020 2020 2020 2020 2020  4: ".           
+0005bd90: 2020 2020 2066 2753 534c 2063 6572 7469       f'SSL certi
+0005bda0: 6669 6361 7465 2066 696c 6520 227b 6773  ficate file "{gs
+0005bdb0: 2e70 612e 7373 6c5f 6365 7274 6966 6963  .pa.ssl_certific
+0005bdc0: 6174 657d 2220 646f 6573 2027 0a20 2020  ate}" does '.   
+0005bdd0: 2020 2020 2020 2020 2020 2020 2022 6e6f               "no
+0005bde0: 7420 6861 7665 2072 6561 6420 7065 726d  t have read perm
+0005bdf0: 6973 7369 6f6e 732e 220a 2020 2020 2020  issions.".      
+0005be00: 2020 2020 2020 2920 6672 6f6d 204e 6f6e        ) from Non
+0005be10: 650a 2020 2020 2020 2020 6578 6365 7074  e.        except
+0005be20: 2073 736c 2e53 534c 4572 726f 723a 0a20   ssl.SSLError:. 
+0005be30: 2020 2020 2020 2020 2020 2067 732e 6572             gs.er
+0005be40: 725f 636f 756e 7420 2b3d 2031 0a20 2020  r_count += 1.   
+0005be50: 2020 2020 2020 2020 2072 6169 7365 204d           raise M
+0005be60: 6174 7269 7843 6f6d 6d61 6e64 6572 4572  atrixCommanderEr
+0005be70: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+0005be80: 2020 2020 2022 4532 3435 3a20 220a 2020       "E245: ".  
+0005be90: 2020 2020 2020 2020 2020 2020 2020 6627                f'
+0005bea0: 5353 4c20 6365 7274 6966 6963 6174 6520  SSL certificate 
+0005beb0: 6669 6c65 2022 7b67 732e 7061 2e73 736c  file "{gs.pa.ssl
+0005bec0: 5f63 6572 7469 6669 6361 7465 7d22 2068  _certificate}" h
+0005bed0: 6173 2027 0a20 2020 2020 2020 2020 2020  as '.           
+0005bee0: 2020 2020 2022 696e 7661 6c69 6420 636f       "invalid co
+0005bef0: 6e74 656e 742e 2044 6f65 7320 6e6f 7420  ntent. Does not 
+0005bf00: 7365 656d 2074 6f20 6265 2061 2063 6572  seem to be a cer
+0005bf10: 7469 6669 6361 7465 2e22 0a20 2020 2020  tificate.".     
+0005bf20: 2020 2020 2020 2029 2066 726f 6d20 4e6f         ) from No
+0005bf30: 6e65 0a20 2020 2065 6c69 6620 6773 2e70  ne.    elif gs.p
+0005bf40: 612e 6e6f 5f73 736c 3a0a 2020 2020 2020  a.no_ssl:.      
+0005bf50: 2020 6773 2e6c 6f67 2e64 6562 7567 280a    gs.log.debug(.
+0005bf60: 2020 2020 2020 2020 2020 2020 2253 534c              "SSL
+0005bf70: 2077 696c 6c20 6265 206e 6f74 2062 6520   will be not be 
+0005bf80: 7573 6564 2e20 5468 6520 5353 4c20 6365  used. The SSL ce
+0005bf90: 7274 6966 6963 6174 6520 7661 6c69 6461  rtificate valida
+0005bfa0: 7469 6f6e 2022 0a20 2020 2020 2020 2020  tion ".         
+0005bfb0: 2020 2022 7769 6c6c 2062 6520 736b 6970     "will be skip
+0005bfc0: 7065 6420 666f 7220 7468 6973 2063 6f6e  ped for this con
+0005bfd0: 6e65 6374 696f 6e2e 220a 2020 2020 2020  nection.".      
+0005bfe0: 2020 290a 2020 2020 2020 2020 6773 2e73    ).        gs.s
+0005bff0: 736c 203d 2046 616c 7365 0a20 2020 2065  sl = False.    e
+0005c000: 6c73 653a 0a20 2020 2020 2020 2067 732e  lse:.        gs.
+0005c010: 6c6f 672e 6465 6275 6728 0a20 2020 2020  log.debug(.     
+0005c020: 2020 2020 2020 2022 5353 4c20 7769 6c6c         "SSL will
+0005c030: 2062 6520 7573 6564 2e20 4465 6661 756c   be used. Defaul
+0005c040: 7420 5353 4c20 6365 7274 6966 6963 6174  t SSL certificat
+0005c050: 6520 7661 6c69 6461 7469 6f6e 2022 0a20  e validation ". 
+0005c060: 2020 2020 2020 2020 2020 2022 7769 6c6c             "will
+0005c070: 2062 6520 646f 6e65 2066 6f72 2074 6869   be done for thi
+0005c080: 7320 636f 6e6e 6563 7469 6f6e 2e22 0a20  s connection.". 
+0005c090: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0005c0a0: 2067 732e 7373 6c20 3d20 4e6f 6e65 0a0a   gs.ssl = None..
+0005c0b0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0005c0c0: 2061 7379 6e63 696f 2e72 756e 2861 7379   asyncio.run(asy
+0005c0d0: 6e63 5f6d 6169 6e28 2929 2020 2320 646f  nc_main())  # do
+0005c0e0: 2065 7665 7279 7468 696e 6720 696e 2074   everything in t
+0005c0f0: 6865 2065 7665 6e74 206c 6f6f 700a 2020  he event loop.  
+0005c100: 2020 2020 2020 2320 7468 6520 6e65 7874        # the next
+0005c110: 2063 616e 2062 6520 7265 6163 6865 6420   can be reached 
+0005c120: 6f6e 2073 7563 6365 7373 206f 7220 6661  on success or fa
+0005c130: 696c 7572 650a 2020 2020 2020 2020 6773  ilure.        gs
+0005c140: 2e6c 6f67 2e64 6562 7567 2866 2254 6865  .log.debug(f"The
+0005c150: 2070 726f 6772 616d 207b 5052 4f47 5f57   program {PROG_W
+0005c160: 4954 485f 4558 547d 206c 6566 7420 7468  ITH_EXT} left th
+0005c170: 6520 6576 656e 7420 6c6f 6f70 2e22 290a  e event loop.").
+0005c180: 2020 2020 6578 6365 7074 2054 696d 656f      except Timeo
+0005c190: 7574 4572 726f 7220 6173 2065 3a0a 2020  utError as e:.  
+0005c1a0: 2020 2020 2020 6773 2e65 7272 5f63 6f75        gs.err_cou
+0005c1b0: 6e74 202b 3d20 310a 2020 2020 2020 2020  nt += 1.        
+0005c1c0: 7261 6973 6520 4d61 7472 6978 436f 6d6d  raise MatrixComm
+0005c1d0: 616e 6465 7245 7272 6f72 280a 2020 2020  anderError(.    
+0005c1e0: 2020 2020 2020 2020 2245 3234 373a 2022          "E247: "
+0005c1f0: 0a20 2020 2020 2020 2020 2020 2066 2254  .            f"T
+0005c200: 6865 2070 726f 6772 616d 207b 5052 4f47  he program {PROG
+0005c210: 5f57 4954 485f 4558 547d 2072 616e 2069  _WITH_EXT} ran i
+0005c220: 6e74 6f20 6120 7469 6d65 6f75 742e 2022  nto a timeout. "
+0005c230: 0a20 2020 2020 2020 2020 2020 2022 4d6f  .            "Mo
+0005c240: 7374 206c 696b 656c 7920 636f 6e6e 6563  st likely connec
+0005c250: 7469 7669 7479 2074 6f20 696e 7465 726e  tivity to intern
+0005c260: 6574 2077 6173 206c 6f73 742e 2022 0a20  et was lost. ". 
+0005c270: 2020 2020 2020 2020 2020 2022 4966 2074             "If t
+0005c280: 6869 7320 6861 7070 656e 7320 6672 6571  his happens freq
+0005c290: 7565 6e74 6c79 2063 6f6e 7369 6465 7220  uently consider 
+0005c2a0: 7275 6e6e 696e 6720 7468 6973 2022 0a20  running this ". 
+0005c2b0: 2020 2020 2020 2020 2020 2022 7072 6f67             "prog
+0005c2c0: 7261 6d20 6173 2061 2073 6572 7669 6365  ram as a service
+0005c2d0: 2073 6f20 6974 2077 696c 6c20 7265 7374   so it will rest
+0005c2e0: 6172 7420 6175 746f 6d61 7469 6361 6c6c  art automaticall
+0005c2f0: 792e 2053 6f72 7279 2e22 0a20 2020 2020  y. Sorry.".     
+0005c300: 2020 2029 2066 726f 6d20 650a 2020 2020     ) from e.    
+0005c310: 6578 6365 7074 204d 6174 7269 7843 6f6d  except MatrixCom
+0005c320: 6d61 6e64 6572 4572 726f 723a 0a20 2020  manderError:.   
+0005c330: 2020 2020 2072 6169 7365 0a20 2020 2065       raise.    e
+0005c340: 7863 6570 7420 4b65 7962 6f61 7264 496e  xcept KeyboardIn
+0005c350: 7465 7272 7570 743a 0a20 2020 2020 2020  terrupt:.       
+0005c360: 2067 732e 6c6f 672e 6465 6275 6728 224b   gs.log.debug("K
+0005c370: 6579 626f 6172 6420 696e 7465 7272 7570  eyboard interrup
+0005c380: 7420 7265 6365 6976 6564 2e22 290a 2020  t received.").  
+0005c390: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+0005c3a0: 6f6e 3a0a 2020 2020 2020 2020 6773 2e65  on:.        gs.e
+0005c3b0: 7272 5f63 6f75 6e74 202b 3d20 310a 2020  rr_count += 1.  
+0005c3c0: 2020 2020 2020 6773 2e6c 6f67 2e65 7272        gs.log.err
+0005c3d0: 6f72 2822 4532 3438 3a20 2220 6622 5468  or("E248: " f"Th
+0005c3e0: 6520 7072 6f67 7261 6d20 7b50 524f 475f  e program {PROG_
+0005c3f0: 5749 5448 5f45 5854 7d20 6661 696c 6564  WITH_EXT} failed
+0005c400: 2e20 536f 7272 792e 2229 0a20 2020 2020  . Sorry.").     
+0005c410: 2020 2072 6169 7365 0a20 2020 2066 696e     raise.    fin
+0005c420: 616c 6c79 3a0a 2020 2020 2020 2020 636c  ally:.        cl
+0005c430: 6561 6e75 7028 290a 0a0a 6465 6620 6d61  eanup()...def ma
+0005c440: 696e 2861 7267 763a 2055 6e69 6f6e 5b4e  in(argv: Union[N
+0005c450: 6f6e 652c 206c 6973 745d 203d 204e 6f6e  one, list] = Non
+0005c460: 6529 202d 3e20 696e 743a 0a20 2020 2022  e) -> int:.    "
+0005c470: 2222 5275 6e20 7468 6520 7072 6f67 7261  ""Run the progra
+0005c480: 6d2e 0a0a 2020 2020 6d61 696e 2829 2069  m...    main() i
+0005c490: 7320 616e 2065 6e74 7279 2070 6f69 6e74  s an entry point
+0005c4a0: 2061 6c6c 6f77 696e 6720 6f74 6865 7220   allowing other 
+0005c4b0: 5079 7468 6f6e 2070 726f 6772 616d 7320  Python programs 
+0005c4c0: 746f 0a20 2020 2065 6173 696c 7920 6361  to.    easily ca
+0005c4d0: 6c6c 206d 6174 7269 782d 636f 6d6d 616e  ll matrix-comman
+0005c4e0: 6465 722e 0a0a 2020 2020 4172 6775 6d65  der...    Argume
+0005c4f0: 6e74 733a 0a20 2020 202d 2d2d 2d2d 2d2d  nts:.    -------
+0005c500: 2d2d 0a20 2020 2061 7267 7620 3a20 6c69  --.    argv : li
+0005c510: 7374 206f 6620 6172 6775 6d65 6e74 7320  st of arguments 
+0005c520: 6173 2069 6e20 7379 732e 6172 6776 3b20  as in sys.argv; 
+0005c530: 6669 7273 7420 656c 656d 656e 7420 6973  first element is
+0005c540: 2074 6865 0a20 2020 2020 2020 2070 726f   the.        pro
+0005c550: 6772 616d 206e 616d 652c 2066 7572 7468  gram name, furth
+0005c560: 6572 2065 6c65 6d65 6e74 7320 6172 6520  er elements are 
+0005c570: 7468 6520 6172 6775 6d65 6e74 733b 2065  the arguments; e
+0005c580: 7665 7279 0a20 2020 2020 2020 2065 6c65  very.        ele
+0005c590: 6d65 6e74 206d 7573 7420 6265 206f 6620  ment must be of 
+0005c5a0: 7479 7065 2022 7374 7222 2e0a 2020 2020  type "str"..    
+0005c5b0: 2020 2020 6172 6776 2069 7320 6f70 7469      argv is opti
+0005c5c0: 6f6e 616c 2061 6e64 2063 616e 2062 6520  onal and can be 
+0005c5d0: 4e6f 6e65 2e0a 2020 2020 2020 2020 4966  None..        If
+0005c5e0: 2061 7267 7620 6973 2073 6574 2074 6865   argv is set the
+0005c5f0: 6e20 7468 6573 6520 6172 6775 6d65 6e74  n these argument
+0005c600: 7320 7769 6c6c 2062 6520 7573 6564 2061  s will be used a
+0005c610: 7320 6172 6775 6d65 6e74 7320 666f 720a  s arguments for.
+0005c620: 2020 2020 2020 2020 6d61 7472 6978 2d63          matrix-c
+0005c630: 6f6d 6d61 6e64 6572 2e20 4966 2061 7267  ommander. If arg
+0005c640: 7620 6973 206e 6f74 2073 6574 2028 4e6f  v is not set (No
+0005c650: 6e65 206f 7220 656d 7074 7920 6c69 7374  ne or empty list
+0005c660: 292c 2074 6865 6e0a 2020 2020 2020 2020  ), then.        
+0005c670: 7379 732e 6172 6776 2077 696c 6c20 6265  sys.argv will be
+0005c680: 2075 7365 6420 6173 2061 7267 756d 656e   used as argumen
+0005c690: 7473 2066 6f72 206d 6174 7269 782d 636f  ts for matrix-co
+0005c6a0: 6d6d 616e 6465 722e 0a0a 2020 2020 4578  mmander...    Ex
+0005c6b0: 616d 706c 6520 696e 7075 7420 6172 6776  ample input argv
+0005c6c0: 3a20 5b22 6d61 7472 6978 2d63 6f6d 6d61  : ["matrix-comma
+0005c6d0: 6e64 6572 225d 0a20 2020 2020 2020 205b  nder"].        [
+0005c6e0: 226d 6174 7269 782d 636f 6d6d 616e 6465  "matrix-commande
+0005c6f0: 7222 2022 2d2d 7665 7273 696f 6e22 5d0a  r" "--version"].
+0005c700: 2020 2020 2020 2020 5b22 6d61 7472 6978          ["matrix
+0005c710: 2d63 6f6d 6d61 6e64 6572 2220 222d 2d6d  -commander" "--m
+0005c720: 6573 7361 6765 2220 2248 656c 6c6f 2220  essage" "Hello" 
+0005c730: 2d2d 696d 6167 6520 2270 6963 2e6a 7067  --image "pic.jpg
+0005c740: 225d 0a0a 2020 2020 5265 7475 726e 7320  "]..    Returns 
+0005c750: 696e 742e 2030 2066 6f72 2073 7563 6365  int. 0 for succe
+0005c760: 7373 2e20 506f 7369 7469 7665 2069 6e74  ss. Positive int
+0005c770: 6567 6572 2066 6f72 2066 6169 6c75 7265  eger for failure
+0005c780: 2e0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0005c790: 7320 7468 6520 746f 7461 6c20 6e75 6d62  s the total numb
+0005c7a0: 6572 206f 6620 6572 726f 7273 2065 6e63  er of errors enc
+0005c7b0: 6f75 6e74 6572 6564 2e0a 0a20 2020 2054  ountered...    T
+0005c7c0: 7269 6573 2074 6f20 6176 6f69 6420 7261  ries to avoid ra
+0005c7d0: 6973 696e 6720 6578 6365 7074 696f 6e73  ising exceptions
+0005c7e0: 2e0a 0a20 2020 2022 2222 0a20 2020 2074  ...    """.    t
+0005c7f0: 7279 3a0a 2020 2020 2020 2020 6d61 696e  ry:.        main
+0005c800: 5f69 6e6e 6572 2861 7267 7629 0a20 2020  _inner(argv).   
+0005c810: 2065 7863 6570 7420 2845 7863 6570 7469   except (Excepti
+0005c820: 6f6e 2c20 4d61 7472 6978 436f 6d6d 616e  on, MatrixComman
+0005c830: 6465 7245 7272 6f72 2c20 4d61 7472 6978  derError, Matrix
+0005c840: 436f 6d6d 616e 6465 7257 6172 6e69 6e67  CommanderWarning
+0005c850: 2920 6173 2065 3a0a 2020 2020 2020 2020  ) as e:.        
+0005c860: 6966 2065 206e 6f74 2069 6e20 284d 6174  if e not in (Mat
+0005c870: 7269 7843 6f6d 6d61 6e64 6572 4572 726f  rixCommanderErro
+0005c880: 722c 204d 6174 7269 7843 6f6d 6d61 6e64  r, MatrixCommand
+0005c890: 6572 5761 726e 696e 6729 3a0a 2020 2020  erWarning):.    
+0005c8a0: 2020 2020 2020 2020 6773 2e65 7272 5f63          gs.err_c
+0005c8b0: 6f75 6e74 202b 3d20 310a 2020 2020 2020  ount += 1.      
+0005c8c0: 2020 7462 203d 2022 220a 2020 2020 2020    tb = "".      
+0005c8d0: 2020 6966 2067 732e 7061 2e64 6562 7567    if gs.pa.debug
+0005c8e0: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
+0005c8f0: 2020 7462 203d 2066 225c 6e48 6572 6520    tb = f"\nHere 
+0005c900: 6973 2074 6865 2074 7261 6365 6261 636b  is the traceback
+0005c910: 2e5c 6e7b 7472 6163 6562 6163 6b2e 666f  .\n{traceback.fo
+0005c920: 726d 6174 5f65 7863 2829 7d22 0a20 2020  rmat_exc()}".   
+0005c930: 2020 2020 2069 6620 6520 3d3d 204d 6174       if e == Mat
+0005c940: 7269 7843 6f6d 6d61 6e64 6572 5761 726e  rixCommanderWarn
+0005c950: 696e 673a 0a20 2020 2020 2020 2020 2020  ing:.           
+0005c960: 2067 732e 6c6f 672e 7761 726e 696e 6728   gs.log.warning(
+0005c970: 6622 7b65 7d7b 7462 7d22 290a 2020 2020  f"{e}{tb}").    
+0005c980: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0005c990: 2020 2020 2020 6773 2e6c 6f67 2e65 7272        gs.log.err
+0005c9a0: 6f72 2866 227b 657d 7b74 627d 2229 0a20  or(f"{e}{tb}"). 
+0005c9b0: 2020 2069 6620 6773 2e65 7272 5f63 6f75     if gs.err_cou
+0005c9c0: 6e74 203e 2030 206f 7220 6773 2e77 6172  nt > 0 or gs.war
+0005c9d0: 6e5f 636f 756e 7420 3e20 303a 0a20 2020  n_count > 0:.   
+0005c9e0: 2020 2020 2067 732e 6c6f 672e 696e 666f       gs.log.info
+0005c9f0: 280a 2020 2020 2020 2020 2020 2020 6622  (.            f"
+0005ca00: 7b67 732e 6572 725f 636f 756e 747d 2022  {gs.err_count} "
+0005ca10: 0a20 2020 2020 2020 2020 2020 2066 2265  .            f"e
+0005ca20: 7272 6f72 7b27 2720 6966 2067 732e 6572  rror{'' if gs.er
+0005ca30: 725f 636f 756e 7420 3d3d 2031 2065 6c73  r_count == 1 els
+0005ca40: 6520 2773 277d 2061 6e64 2022 0a20 2020  e 's'} and ".   
+0005ca50: 2020 2020 2020 2020 2066 227b 6773 2e77           f"{gs.w
+0005ca60: 6172 6e5f 636f 756e 747d 2022 0a20 2020  arn_count} ".   
+0005ca70: 2020 2020 2020 2020 2066 2277 6172 6e69           f"warni
+0005ca80: 6e67 7b27 2720 6966 2067 732e 7761 726e  ng{'' if gs.warn
+0005ca90: 5f63 6f75 6e74 203d 3d20 3120 656c 7365  _count == 1 else
+0005caa0: 2027 7327 7d20 6f63 6375 7272 6564 2e22   's'} occurred."
+0005cab0: 0a20 2020 2020 2020 2029 0a20 2020 2072  .        ).    r
+0005cac0: 6574 7572 6e20 6773 2e65 7272 5f63 6f75  eturn gs.err_cou
+0005cad0: 6e74 2020 2320 3020 666f 7220 7375 6363  nt  # 0 for succ
+0005cae0: 6573 730a 0a0a 6966 205f 5f6e 616d 655f  ess...if __name_
+0005caf0: 5f20 3d3d 2022 5f5f 6d61 696e 5f5f 223a  _ == "__main__":
+0005cb00: 0a20 2020 2073 7973 2e65 7869 7428 6d61  .    sys.exit(ma
+0005cb10: 696e 2829 290a 2320 454f 460a            in()).# EOF.
```

### Comparing `matrix-commander-7.6.0/matrix_commander.egg-info/PKG-INFO` & `matrix_commander-7.6.1/matrix_commander.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,19 +1,16 @@
 Metadata-Version: 2.1
 Name: matrix-commander
-Version: 7.6.0
+Version: 7.6.1
 Summary: A simple command-line Matrix client
 Home-page: https://github.com/8go/matrix-commander
 Author: 8go
 Project-URL: Bug Tracker, https://github.com/8go/matrix-commander/issues
 Project-URL: repository, https://github.com/8go/matrix-commander
 Keywords: Matrix,chat,messaging
-Classifier: Programming Language :: Python :: 3.8
-Classifier: Programming Language :: Python :: 3.9
-Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3.12
 Classifier: License :: OSI Approved :: GNU Lesser General Public License v3 or later (LGPLv3+)
 Classifier: Operating System :: OS Independent
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Natural Language :: English
@@ -21,14 +18,15 @@
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: aiohttp
 Requires-Dist: aiofiles>=0.6.0
 Requires-Dist: argparse
 Requires-Dist: asyncio
+Requires-Dist: async-timeout
 Requires-Dist: datetime
 Requires-Dist: emoji
 Requires-Dist: markdown
 Requires-Dist: matrix-nio[e2e]>=0.14.1
 Requires-Dist: notify2
 Requires-Dist: Pillow
 Requires-Dist: python_magic
```

### Comparing `matrix-commander-7.6.0/setup.cfg` & `matrix_commander-7.6.1/setup.cfg`

 * *Files 24% similar despite different names*

```diff
@@ -1,23 +1,20 @@
 [metadata]
 name = matrix-commander
-version = 7.6.0
+version = 7.6.1
 author = 8go
 description = A simple command-line Matrix client
 long_description = file: PyPi-Instructions.md, README.md
 long_description_content_type = text/markdown
 keywords = Matrix, chat, messaging
 url = https://github.com/8go/matrix-commander
 project_urls = 
 	Bug Tracker = https://github.com/8go/matrix-commander/issues
 	repository = https://github.com/8go/matrix-commander
 classifiers = 
-	Programming Language :: Python :: 3.8
-	Programming Language :: Python :: 3.9
-	Programming Language :: Python :: 3.10
 	Programming Language :: Python :: 3.11
 	Programming Language :: Python :: 3.12
 	License :: OSI Approved :: GNU Lesser General Public License v3 or later (LGPLv3+)
 	Operating System :: OS Independent
 	Development Status :: 5 - Production/Stable
 	Intended Audience :: Developers
 	Natural Language :: English
@@ -29,14 +26,15 @@
 include_package_data = True
 python_requires = >=3.8
 install_requires = 
 	aiohttp
 	aiofiles>=0.6.0
 	argparse
 	asyncio
+	async-timeout # see Issue 161
 	datetime
 	emoji
 	markdown
 	matrix-nio[e2e]>=0.14.1
 	notify2
 	Pillow
 	python_magic
```

### Comparing `matrix-commander-7.6.0/tests/test-send.py` & `matrix_commander-7.6.1/tests/test-send.py`

 * *Files identical despite different names*

